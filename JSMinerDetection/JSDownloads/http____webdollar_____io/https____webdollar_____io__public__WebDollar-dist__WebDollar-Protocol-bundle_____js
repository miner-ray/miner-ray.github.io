(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports;}
var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports;}
__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{configurable:false,enumerable:true,get:getter});}};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module['default'];}:function getModuleExports(){return module;};__webpack_require__.d(getter,'a',getter);return getter;};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property);};__webpack_require__.p="/dist/";return __webpack_require__(__webpack_require__.s=436);})
([(function(module,exports,__webpack_require__){var global=__webpack_require__(11);var core=__webpack_require__(57);var hide=__webpack_require__(48);var redefine=__webpack_require__(49);var ctx=__webpack_require__(58);var PROTOTYPE='prototype';var $export=function(type,name,source){var IS_FORCED=type&$export.F;var IS_GLOBAL=type&$export.G;var IS_STATIC=type&$export.S;var IS_PROTO=type&$export.P;var IS_BIND=type&$export.B;var target=IS_GLOBAL?global:IS_STATIC?global[name]||(global[name]={}):(global[name]||{})[PROTOTYPE];var exports=IS_GLOBAL?core:core[name]||(core[name]={});var expProto=exports[PROTOTYPE]||(exports[PROTOTYPE]={});var key,own,out,exp;if(IS_GLOBAL)source=name;for(key in source){own=!IS_FORCED&&target&&target[key]!==undefined;out=(own?target:source)[key];exp=IS_BIND&&own?ctx(out,global):IS_PROTO&&typeof out=='function'?ctx(Function.call,out):out;if(target)redefine(target,key,out,type&$export.U);if(exports[key]!=out)hide(exports,key,exp);if(IS_PROTO&&expProto[key]!=out)expProto[key]=out;}};global.core=core;$export.F=1;$export.G=2;$export.S=4;$export.P=8;$export.B=16;$export.W=32;$export.U=64;$export.R=128;module.exports=$export;}),(function(module,exports,__webpack_require__){"use strict";(function(global){/*!
* The buffer module from node.js, for the browser.
*
* @author Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
* @license MIT
*/var base64=__webpack_require__(640)
var ieee754=__webpack_require__(641)
var isArray=__webpack_require__(305)
exports.Buffer=Buffer
exports.SlowBuffer=SlowBuffer
exports.INSPECT_MAX_BYTES=50
Buffer.TYPED_ARRAY_SUPPORT=global.TYPED_ARRAY_SUPPORT!==undefined?global.TYPED_ARRAY_SUPPORT:typedArraySupport()
exports.kMaxLength=kMaxLength()
function typedArraySupport(){try{var arr=new Uint8Array(1)
arr.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}}
return arr.foo()===42&&typeof arr.subarray==='function'&&arr.subarray(1,1).byteLength===0}catch(e){return false}}
function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?0x7fffffff:0x3fffffff}
function createBuffer(that,length){if(kMaxLength()<length){throw new RangeError('Invalid typed array length')}
if(Buffer.TYPED_ARRAY_SUPPORT){that=new Uint8Array(length)
that.__proto__=Buffer.prototype}else{if(that===null){that=new Buffer(length)}
that.length=length}
return that}
function Buffer(arg,encodingOrOffset,length){if(!Buffer.TYPED_ARRAY_SUPPORT&&!(this instanceof Buffer)){return new Buffer(arg,encodingOrOffset,length)}
if(typeof arg==='number'){if(typeof encodingOrOffset==='string'){throw new Error('If encoding is specified then the first argument must be a string')}
return allocUnsafe(this,arg)}
return from(this,arg,encodingOrOffset,length)}
Buffer.poolSize=8192
Buffer._augment=function(arr){arr.__proto__=Buffer.prototype
return arr}
function from(that,value,encodingOrOffset,length){if(typeof value==='number'){throw new TypeError('"value" argument must not be a number')}
if(typeof ArrayBuffer!=='undefined'&&value instanceof ArrayBuffer){return fromArrayBuffer(that,value,encodingOrOffset,length)}
if(typeof value==='string'){return fromString(that,value,encodingOrOffset)}
return fromObject(that,value)}
Buffer.from=function(value,encodingOrOffset,length){return from(null,value,encodingOrOffset,length)}
if(Buffer.TYPED_ARRAY_SUPPORT){Buffer.prototype.__proto__=Uint8Array.prototype
Buffer.__proto__=Uint8Array
if(typeof Symbol!=='undefined'&&Symbol.species&&Buffer[Symbol.species]===Buffer){Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:true})}}
function assertSize(size){if(typeof size!=='number'){throw new TypeError('"size" argument must be a number')}else if(size<0){throw new RangeError('"size" argument must not be negative')}}
function alloc(that,size,fill,encoding){assertSize(size)
if(size<=0){return createBuffer(that,size)}
if(fill!==undefined){return typeof encoding==='string'?createBuffer(that,size).fill(fill,encoding):createBuffer(that,size).fill(fill)}
return createBuffer(that,size)}
Buffer.alloc=function(size,fill,encoding){return alloc(null,size,fill,encoding)}
function allocUnsafe(that,size){assertSize(size)
that=createBuffer(that,size<0?0:checked(size)|0)
if(!Buffer.TYPED_ARRAY_SUPPORT){for(var i=0;i<size;++i){that[i]=0}}
return that}
Buffer.allocUnsafe=function(size){return allocUnsafe(null,size)}
Buffer.allocUnsafeSlow=function(size){return allocUnsafe(null,size)}
function fromString(that,string,encoding){if(typeof encoding!=='string'||encoding===''){encoding='utf8'}
if(!Buffer.isEncoding(encoding)){throw new TypeError('"encoding" must be a valid string encoding')}
var length=byteLength(string,encoding)|0
that=createBuffer(that,length)
var actual=that.write(string,encoding)
if(actual!==length){that=that.slice(0,actual)}
return that}
function fromArrayLike(that,array){var length=array.length<0?0:checked(array.length)|0
that=createBuffer(that,length)
for(var i=0;i<length;i+=1){that[i]=array[i]&255}
return that}
function fromArrayBuffer(that,array,byteOffset,length){array.byteLength
if(byteOffset<0||array.byteLength<byteOffset){throw new RangeError('\'offset\' is out of bounds')}
if(array.byteLength<byteOffset+(length||0)){throw new RangeError('\'length\' is out of bounds')}
if(byteOffset===undefined&&length===undefined){array=new Uint8Array(array)}else if(length===undefined){array=new Uint8Array(array,byteOffset)}else{array=new Uint8Array(array,byteOffset,length)}
if(Buffer.TYPED_ARRAY_SUPPORT){that=array
that.__proto__=Buffer.prototype}else{that=fromArrayLike(that,array)}
return that}
function fromObject(that,obj){if(Buffer.isBuffer(obj)){var len=checked(obj.length)|0
that=createBuffer(that,len)
if(that.length===0){return that}
obj.copy(that,0,0,len)
return that}
if(obj){if((typeof ArrayBuffer!=='undefined'&&obj.buffer instanceof ArrayBuffer)||'length'in obj){if(typeof obj.length!=='number'||isnan(obj.length)){return createBuffer(that,0)}
return fromArrayLike(that,obj)}
if(obj.type==='Buffer'&&isArray(obj.data)){return fromArrayLike(that,obj.data)}}
throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')}
function checked(length){if(length>=kMaxLength()){throw new RangeError('Attempt to allocate Buffer larger than maximum '+
'size: 0x'+kMaxLength().toString(16)+' bytes')}
return length|0}
function SlowBuffer(length){if(+length!=length){length=0}
return Buffer.alloc(+length)}
Buffer.isBuffer=function isBuffer(b){return!!(b!=null&&b._isBuffer)}
Buffer.compare=function compare(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b)){throw new TypeError('Arguments must be Buffers')}
if(a===b)return 0
var x=a.length
var y=b.length
for(var i=0,len=Math.min(x,y);i<len;++i){if(a[i]!==b[i]){x=a[i]
y=b[i]
break}}
if(x<y)return-1
if(y<x)return 1
return 0}
Buffer.isEncoding=function isEncoding(encoding){switch(String(encoding).toLowerCase()){case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'latin1':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':return true
default:return false}}
Buffer.concat=function concat(list,length){if(!isArray(list)){throw new TypeError('"list" argument must be an Array of Buffers')}
if(list.length===0){return Buffer.alloc(0)}
var i
if(length===undefined){length=0
for(i=0;i<list.length;++i){length+=list[i].length}}
var buffer=Buffer.allocUnsafe(length)
var pos=0
for(i=0;i<list.length;++i){var buf=list[i]
if(!Buffer.isBuffer(buf)){throw new TypeError('"list" argument must be an Array of Buffers')}
buf.copy(buffer,pos)
pos+=buf.length}
return buffer}
function byteLength(string,encoding){if(Buffer.isBuffer(string)){return string.length}
if(typeof ArrayBuffer!=='undefined'&&typeof ArrayBuffer.isView==='function'&&(ArrayBuffer.isView(string)||string instanceof ArrayBuffer)){return string.byteLength}
if(typeof string!=='string'){string=''+string}
var len=string.length
if(len===0)return 0
var loweredCase=false
for(;;){switch(encoding){case 'ascii':case 'latin1':case 'binary':return len
case 'utf8':case 'utf-8':case undefined:return utf8ToBytes(string).length
case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':return len*2
case 'hex':return len>>>1
case 'base64':return base64ToBytes(string).length
default:if(loweredCase)return utf8ToBytes(string).length
encoding=(''+encoding).toLowerCase()
loweredCase=true}}}
Buffer.byteLength=byteLength
function slowToString(encoding,start,end){var loweredCase=false
if(start===undefined||start<0){start=0}
if(start>this.length){return ''}
if(end===undefined||end>this.length){end=this.length}
if(end<=0){return ''}
end>>>=0
start>>>=0
if(end<=start){return ''}
if(!encoding)encoding='utf8'
while(true){switch(encoding){case 'hex':return hexSlice(this,start,end)
case 'utf8':case 'utf-8':return utf8Slice(this,start,end)
case 'ascii':return asciiSlice(this,start,end)
case 'latin1':case 'binary':return latin1Slice(this,start,end)
case 'base64':return base64Slice(this,start,end)
case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':return utf16leSlice(this,start,end)
default:if(loweredCase)throw new TypeError('Unknown encoding: '+encoding)
encoding=(encoding+'').toLowerCase()
loweredCase=true}}}
Buffer.prototype._isBuffer=true
function swap(b,n,m){var i=b[n]
b[n]=b[m]
b[m]=i}
Buffer.prototype.swap16=function swap16(){var len=this.length
if(len%2!==0){throw new RangeError('Buffer size must be a multiple of 16-bits')}
for(var i=0;i<len;i+=2){swap(this,i,i+1)}
return this}
Buffer.prototype.swap32=function swap32(){var len=this.length
if(len%4!==0){throw new RangeError('Buffer size must be a multiple of 32-bits')}
for(var i=0;i<len;i+=4){swap(this,i,i+3)
swap(this,i+1,i+2)}
return this}
Buffer.prototype.swap64=function swap64(){var len=this.length
if(len%8!==0){throw new RangeError('Buffer size must be a multiple of 64-bits')}
for(var i=0;i<len;i+=8){swap(this,i,i+7)
swap(this,i+1,i+6)
swap(this,i+2,i+5)
swap(this,i+3,i+4)}
return this}
Buffer.prototype.toString=function toString(){var length=this.length|0
if(length===0)return ''
if(arguments.length===0)return utf8Slice(this,0,length)
return slowToString.apply(this,arguments)}
Buffer.prototype.equals=function equals(b){if(!Buffer.isBuffer(b))throw new TypeError('Argument must be a Buffer')
if(this===b)return true
return Buffer.compare(this,b)===0}
Buffer.prototype.inspect=function inspect(){var str=''
var max=exports.INSPECT_MAX_BYTES
if(this.length>0){str=this.toString('hex',0,max).match(/.{2}/g).join(' ')
if(this.length>max)str+=' ... '}
return '<Buffer '+str+'>'}
Buffer.prototype.compare=function compare(target,start,end,thisStart,thisEnd){if(!Buffer.isBuffer(target)){throw new TypeError('Argument must be a Buffer')}
if(start===undefined){start=0}
if(end===undefined){end=target?target.length:0}
if(thisStart===undefined){thisStart=0}
if(thisEnd===undefined){thisEnd=this.length}
if(start<0||end>target.length||thisStart<0||thisEnd>this.length){throw new RangeError('out of range index')}
if(thisStart>=thisEnd&&start>=end){return 0}
if(thisStart>=thisEnd){return-1}
if(start>=end){return 1}
start>>>=0
end>>>=0
thisStart>>>=0
thisEnd>>>=0
if(this===target)return 0
var x=thisEnd-thisStart
var y=end-start
var len=Math.min(x,y)
var thisCopy=this.slice(thisStart,thisEnd)
var targetCopy=target.slice(start,end)
for(var i=0;i<len;++i){if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i]
y=targetCopy[i]
break}}
if(x<y)return-1
if(y<x)return 1
return 0}
function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(buffer.length===0)return-1
if(typeof byteOffset==='string'){encoding=byteOffset
byteOffset=0}else if(byteOffset>0x7fffffff){byteOffset=0x7fffffff}else if(byteOffset<-0x80000000){byteOffset=-0x80000000}
byteOffset=+byteOffset
if(isNaN(byteOffset)){byteOffset=dir?0:(buffer.length-1)}
if(byteOffset<0)byteOffset=buffer.length+byteOffset
if(byteOffset>=buffer.length){if(dir)return-1
else byteOffset=buffer.length-1}else if(byteOffset<0){if(dir)byteOffset=0
else return-1}
if(typeof val==='string'){val=Buffer.from(val,encoding)}
if(Buffer.isBuffer(val)){if(val.length===0){return-1}
return arrayIndexOf(buffer,val,byteOffset,encoding,dir)}else if(typeof val==='number'){val=val&0xFF
if(Buffer.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf==='function'){if(dir){return Uint8Array.prototype.indexOf.call(buffer,val,byteOffset)}else{return Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset)}}
return arrayIndexOf(buffer,[val],byteOffset,encoding,dir)}
throw new TypeError('val must be string, number or Buffer')}
function arrayIndexOf(arr,val,byteOffset,encoding,dir){var indexSize=1
var arrLength=arr.length
var valLength=val.length
if(encoding!==undefined){encoding=String(encoding).toLowerCase()
if(encoding==='ucs2'||encoding==='ucs-2'||encoding==='utf16le'||encoding==='utf-16le'){if(arr.length<2||val.length<2){return-1}
indexSize=2
arrLength/=2
valLength/=2
byteOffset/=2}}
function read(buf,i){if(indexSize===1){return buf[i]}else{return buf.readUInt16BE(i*indexSize)}}
var i
if(dir){var foundIndex=-1
for(i=byteOffset;i<arrLength;i++){if(read(arr,i)===read(val,foundIndex===-1?0:i-foundIndex)){if(foundIndex===-1)foundIndex=i
if(i-foundIndex+1===valLength)return foundIndex*indexSize}else{if(foundIndex!==-1)i-=i-foundIndex
foundIndex=-1}}}else{if(byteOffset+valLength>arrLength)byteOffset=arrLength-valLength
for(i=byteOffset;i>=0;i--){var found=true
for(var j=0;j<valLength;j++){if(read(arr,i+j)!==read(val,j)){found=false
break}}
if(found)return i}}
return-1}
Buffer.prototype.includes=function includes(val,byteOffset,encoding){return this.indexOf(val,byteOffset,encoding)!==-1}
Buffer.prototype.indexOf=function indexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,true)}
Buffer.prototype.lastIndexOf=function lastIndexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,false)}
function hexWrite(buf,string,offset,length){offset=Number(offset)||0
var remaining=buf.length-offset
if(!length){length=remaining}else{length=Number(length)
if(length>remaining){length=remaining}}
var strLen=string.length
if(strLen%2!==0)throw new TypeError('Invalid hex string')
if(length>strLen/2){length=strLen/2}
for(var i=0;i<length;++i){var parsed=parseInt(string.substr(i*2,2),16)
if(isNaN(parsed))return i
buf[offset+i]=parsed}
return i}
function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}
function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length)}
function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}
function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}
function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length)}
Buffer.prototype.write=function write(string,offset,length,encoding){if(offset===undefined){encoding='utf8'
length=this.length
offset=0}else if(length===undefined&&typeof offset==='string'){encoding=offset
length=this.length
offset=0}else if(isFinite(offset)){offset=offset|0
if(isFinite(length)){length=length|0
if(encoding===undefined)encoding='utf8'}else{encoding=length
length=undefined}}else{throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported')}
var remaining=this.length-offset
if(length===undefined||length>remaining)length=remaining
if((string.length>0&&(length<0||offset<0))||offset>this.length){throw new RangeError('Attempt to write outside buffer bounds')}
if(!encoding)encoding='utf8'
var loweredCase=false
for(;;){switch(encoding){case 'hex':return hexWrite(this,string,offset,length)
case 'utf8':case 'utf-8':return utf8Write(this,string,offset,length)
case 'ascii':return asciiWrite(this,string,offset,length)
case 'latin1':case 'binary':return latin1Write(this,string,offset,length)
case 'base64':return base64Write(this,string,offset,length)
case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':return ucs2Write(this,string,offset,length)
default:if(loweredCase)throw new TypeError('Unknown encoding: '+encoding)
encoding=(''+encoding).toLowerCase()
loweredCase=true}}}
Buffer.prototype.toJSON=function toJSON(){return{type:'Buffer',data:Array.prototype.slice.call(this._arr||this,0)}}
function base64Slice(buf,start,end){if(start===0&&end===buf.length){return base64.fromByteArray(buf)}else{return base64.fromByteArray(buf.slice(start,end))}}
function utf8Slice(buf,start,end){end=Math.min(buf.length,end)
var res=[]
var i=start
while(i<end){var firstByte=buf[i]
var codePoint=null
var bytesPerSequence=(firstByte>0xEF)?4:(firstByte>0xDF)?3:(firstByte>0xBF)?2:1
if(i+bytesPerSequence<=end){var secondByte,thirdByte,fourthByte,tempCodePoint
switch(bytesPerSequence){case 1:if(firstByte<0x80){codePoint=firstByte}
break
case 2:secondByte=buf[i+1]
if((secondByte&0xC0)===0x80){tempCodePoint=(firstByte&0x1F)<<0x6|(secondByte&0x3F)
if(tempCodePoint>0x7F){codePoint=tempCodePoint}}
break
case 3:secondByte=buf[i+1]
thirdByte=buf[i+2]
if((secondByte&0xC0)===0x80&&(thirdByte&0xC0)===0x80){tempCodePoint=(firstByte&0xF)<<0xC|(secondByte&0x3F)<<0x6|(thirdByte&0x3F)
if(tempCodePoint>0x7FF&&(tempCodePoint<0xD800||tempCodePoint>0xDFFF)){codePoint=tempCodePoint}}
break
case 4:secondByte=buf[i+1]
thirdByte=buf[i+2]
fourthByte=buf[i+3]
if((secondByte&0xC0)===0x80&&(thirdByte&0xC0)===0x80&&(fourthByte&0xC0)===0x80){tempCodePoint=(firstByte&0xF)<<0x12|(secondByte&0x3F)<<0xC|(thirdByte&0x3F)<<0x6|(fourthByte&0x3F)
if(tempCodePoint>0xFFFF&&tempCodePoint<0x110000){codePoint=tempCodePoint}}}}
if(codePoint===null){codePoint=0xFFFD
bytesPerSequence=1}else if(codePoint>0xFFFF){codePoint-=0x10000
res.push(codePoint>>>10&0x3FF|0xD800)
codePoint=0xDC00|codePoint&0x3FF}
res.push(codePoint)
i+=bytesPerSequence}
return decodeCodePointsArray(res)}
var MAX_ARGUMENTS_LENGTH=0x1000
function decodeCodePointsArray(codePoints){var len=codePoints.length
if(len<=MAX_ARGUMENTS_LENGTH){return String.fromCharCode.apply(String,codePoints)}
var res=''
var i=0
while(i<len){res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH))}
return res}
function asciiSlice(buf,start,end){var ret=''
end=Math.min(buf.length,end)
for(var i=start;i<end;++i){ret+=String.fromCharCode(buf[i]&0x7F)}
return ret}
function latin1Slice(buf,start,end){var ret=''
end=Math.min(buf.length,end)
for(var i=start;i<end;++i){ret+=String.fromCharCode(buf[i])}
return ret}
function hexSlice(buf,start,end){var len=buf.length
if(!start||start<0)start=0
if(!end||end<0||end>len)end=len
var out=''
for(var i=start;i<end;++i){out+=toHex(buf[i])}
return out}
function utf16leSlice(buf,start,end){var bytes=buf.slice(start,end)
var res=''
for(var i=0;i<bytes.length;i+=2){res+=String.fromCharCode(bytes[i]+bytes[i+1]*256)}
return res}
Buffer.prototype.slice=function slice(start,end){var len=this.length
start=~~start
end=end===undefined?len:~~end
if(start<0){start+=len
if(start<0)start=0}else if(start>len){start=len}
if(end<0){end+=len
if(end<0)end=0}else if(end>len){end=len}
if(end<start)end=start
var newBuf
if(Buffer.TYPED_ARRAY_SUPPORT){newBuf=this.subarray(start,end)
newBuf.__proto__=Buffer.prototype}else{var sliceLen=end-start
newBuf=new Buffer(sliceLen,undefined)
for(var i=0;i<sliceLen;++i){newBuf[i]=this[i+start]}}
return newBuf}
function checkOffset(offset,ext,length){if((offset%1)!==0||offset<0)throw new RangeError('offset is not uint')
if(offset+ext>length)throw new RangeError('Trying to access beyond buffer length')}
Buffer.prototype.readUIntLE=function readUIntLE(offset,byteLength,noAssert){offset=offset|0
byteLength=byteLength|0
if(!noAssert)checkOffset(offset,byteLength,this.length)
var val=this[offset]
var mul=1
var i=0
while(++i<byteLength&&(mul*=0x100)){val+=this[offset+i]*mul}
return val}
Buffer.prototype.readUIntBE=function readUIntBE(offset,byteLength,noAssert){offset=offset|0
byteLength=byteLength|0
if(!noAssert){checkOffset(offset,byteLength,this.length)}
var val=this[offset+--byteLength]
var mul=1
while(byteLength>0&&(mul*=0x100)){val+=this[offset+--byteLength]*mul}
return val}
Buffer.prototype.readUInt8=function readUInt8(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length)
return this[offset]}
Buffer.prototype.readUInt16LE=function readUInt16LE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length)
return this[offset]|(this[offset+1]<<8)}
Buffer.prototype.readUInt16BE=function readUInt16BE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length)
return(this[offset]<<8)|this[offset+1]}
Buffer.prototype.readUInt32LE=function readUInt32LE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length)
return((this[offset])|(this[offset+1]<<8)|(this[offset+2]<<16))+
(this[offset+3]*0x1000000)}
Buffer.prototype.readUInt32BE=function readUInt32BE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length)
return(this[offset]*0x1000000)+
((this[offset+1]<<16)|(this[offset+2]<<8)|this[offset+3])}
Buffer.prototype.readIntLE=function readIntLE(offset,byteLength,noAssert){offset=offset|0
byteLength=byteLength|0
if(!noAssert)checkOffset(offset,byteLength,this.length)
var val=this[offset]
var mul=1
var i=0
while(++i<byteLength&&(mul*=0x100)){val+=this[offset+i]*mul}
mul*=0x80
if(val>=mul)val-=Math.pow(2,8*byteLength)
return val}
Buffer.prototype.readIntBE=function readIntBE(offset,byteLength,noAssert){offset=offset|0
byteLength=byteLength|0
if(!noAssert)checkOffset(offset,byteLength,this.length)
var i=byteLength
var mul=1
var val=this[offset+--i]
while(i>0&&(mul*=0x100)){val+=this[offset+--i]*mul}
mul*=0x80
if(val>=mul)val-=Math.pow(2,8*byteLength)
return val}
Buffer.prototype.readInt8=function readInt8(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length)
if(!(this[offset]&0x80))return(this[offset])
return((0xff-this[offset]+1)*-1)}
Buffer.prototype.readInt16LE=function readInt16LE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length)
var val=this[offset]|(this[offset+1]<<8)
return(val&0x8000)?val|0xFFFF0000:val}
Buffer.prototype.readInt16BE=function readInt16BE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length)
var val=this[offset+1]|(this[offset]<<8)
return(val&0x8000)?val|0xFFFF0000:val}
Buffer.prototype.readInt32LE=function readInt32LE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length)
return(this[offset])|(this[offset+1]<<8)|(this[offset+2]<<16)|(this[offset+3]<<24)}
Buffer.prototype.readInt32BE=function readInt32BE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length)
return(this[offset]<<24)|(this[offset+1]<<16)|(this[offset+2]<<8)|(this[offset+3])}
Buffer.prototype.readFloatLE=function readFloatLE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length)
return ieee754.read(this,offset,true,23,4)}
Buffer.prototype.readFloatBE=function readFloatBE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length)
return ieee754.read(this,offset,false,23,4)}
Buffer.prototype.readDoubleLE=function readDoubleLE(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length)
return ieee754.read(this,offset,true,52,8)}
Buffer.prototype.readDoubleBE=function readDoubleBE(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length)
return ieee754.read(this,offset,false,52,8)}
function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance')
if(value>max||value<min)throw new RangeError('"value" argument is out of bounds')
if(offset+ext>buf.length)throw new RangeError('Index out of range')}
Buffer.prototype.writeUIntLE=function writeUIntLE(value,offset,byteLength,noAssert){value=+value
offset=offset|0
byteLength=byteLength|0
if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1
checkInt(this,value,offset,byteLength,maxBytes,0)}
var mul=1
var i=0
this[offset]=value&0xFF
while(++i<byteLength&&(mul*=0x100)){this[offset+i]=(value/mul)&0xFF}
return offset+byteLength}
Buffer.prototype.writeUIntBE=function writeUIntBE(value,offset,byteLength,noAssert){value=+value
offset=offset|0
byteLength=byteLength|0
if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1
checkInt(this,value,offset,byteLength,maxBytes,0)}
var i=byteLength-1
var mul=1
this[offset+i]=value&0xFF
while(--i>=0&&(mul*=0x100)){this[offset+i]=(value/mul)&0xFF}
return offset+byteLength}
Buffer.prototype.writeUInt8=function writeUInt8(value,offset,noAssert){value=+value
offset=offset|0
if(!noAssert)checkInt(this,value,offset,1,0xff,0)
if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value)
this[offset]=(value&0xff)
return offset+1}
function objectWriteUInt16(buf,value,offset,littleEndian){if(value<0)value=0xffff+value+1
for(var i=0,j=Math.min(buf.length-offset,2);i<j;++i){buf[offset+i]=(value&(0xff<<(8*(littleEndian?i:1-i))))>>>(littleEndian?i:1-i)*8}}
Buffer.prototype.writeUInt16LE=function writeUInt16LE(value,offset,noAssert){value=+value
offset=offset|0
if(!noAssert)checkInt(this,value,offset,2,0xffff,0)
if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=(value&0xff)
this[offset+1]=(value>>>8)}else{objectWriteUInt16(this,value,offset,true)}
return offset+2}
Buffer.prototype.writeUInt16BE=function writeUInt16BE(value,offset,noAssert){value=+value
offset=offset|0
if(!noAssert)checkInt(this,value,offset,2,0xffff,0)
if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=(value>>>8)
this[offset+1]=(value&0xff)}else{objectWriteUInt16(this,value,offset,false)}
return offset+2}
function objectWriteUInt32(buf,value,offset,littleEndian){if(value<0)value=0xffffffff+value+1
for(var i=0,j=Math.min(buf.length-offset,4);i<j;++i){buf[offset+i]=(value>>>(littleEndian?i:3-i)*8)&0xff}}
Buffer.prototype.writeUInt32LE=function writeUInt32LE(value,offset,noAssert){value=+value
offset=offset|0
if(!noAssert)checkInt(this,value,offset,4,0xffffffff,0)
if(Buffer.TYPED_ARRAY_SUPPORT){this[offset+3]=(value>>>24)
this[offset+2]=(value>>>16)
this[offset+1]=(value>>>8)
this[offset]=(value&0xff)}else{objectWriteUInt32(this,value,offset,true)}
return offset+4}
Buffer.prototype.writeUInt32BE=function writeUInt32BE(value,offset,noAssert){value=+value
offset=offset|0
if(!noAssert)checkInt(this,value,offset,4,0xffffffff,0)
if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=(value>>>24)
this[offset+1]=(value>>>16)
this[offset+2]=(value>>>8)
this[offset+3]=(value&0xff)}else{objectWriteUInt32(this,value,offset,false)}
return offset+4}
Buffer.prototype.writeIntLE=function writeIntLE(value,offset,byteLength,noAssert){value=+value
offset=offset|0
if(!noAssert){var limit=Math.pow(2,8*byteLength-1)
checkInt(this,value,offset,byteLength,limit-1,-limit)}
var i=0
var mul=1
var sub=0
this[offset]=value&0xFF
while(++i<byteLength&&(mul*=0x100)){if(value<0&&sub===0&&this[offset+i-1]!==0){sub=1}
this[offset+i]=((value/mul)>>0)-sub&0xFF}
return offset+byteLength}
Buffer.prototype.writeIntBE=function writeIntBE(value,offset,byteLength,noAssert){value=+value
offset=offset|0
if(!noAssert){var limit=Math.pow(2,8*byteLength-1)
checkInt(this,value,offset,byteLength,limit-1,-limit)}
var i=byteLength-1
var mul=1
var sub=0
this[offset+i]=value&0xFF
while(--i>=0&&(mul*=0x100)){if(value<0&&sub===0&&this[offset+i+1]!==0){sub=1}
this[offset+i]=((value/mul)>>0)-sub&0xFF}
return offset+byteLength}
Buffer.prototype.writeInt8=function writeInt8(value,offset,noAssert){value=+value
offset=offset|0
if(!noAssert)checkInt(this,value,offset,1,0x7f,-0x80)
if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value)
if(value<0)value=0xff+value+1
this[offset]=(value&0xff)
return offset+1}
Buffer.prototype.writeInt16LE=function writeInt16LE(value,offset,noAssert){value=+value
offset=offset|0
if(!noAssert)checkInt(this,value,offset,2,0x7fff,-0x8000)
if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=(value&0xff)
this[offset+1]=(value>>>8)}else{objectWriteUInt16(this,value,offset,true)}
return offset+2}
Buffer.prototype.writeInt16BE=function writeInt16BE(value,offset,noAssert){value=+value
offset=offset|0
if(!noAssert)checkInt(this,value,offset,2,0x7fff,-0x8000)
if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=(value>>>8)
this[offset+1]=(value&0xff)}else{objectWriteUInt16(this,value,offset,false)}
return offset+2}
Buffer.prototype.writeInt32LE=function writeInt32LE(value,offset,noAssert){value=+value
offset=offset|0
if(!noAssert)checkInt(this,value,offset,4,0x7fffffff,-0x80000000)
if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=(value&0xff)
this[offset+1]=(value>>>8)
this[offset+2]=(value>>>16)
this[offset+3]=(value>>>24)}else{objectWriteUInt32(this,value,offset,true)}
return offset+4}
Buffer.prototype.writeInt32BE=function writeInt32BE(value,offset,noAssert){value=+value
offset=offset|0
if(!noAssert)checkInt(this,value,offset,4,0x7fffffff,-0x80000000)
if(value<0)value=0xffffffff+value+1
if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=(value>>>24)
this[offset+1]=(value>>>16)
this[offset+2]=(value>>>8)
this[offset+3]=(value&0xff)}else{objectWriteUInt32(this,value,offset,false)}
return offset+4}
function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError('Index out of range')
if(offset<0)throw new RangeError('Index out of range')}
function writeFloat(buf,value,offset,littleEndian,noAssert){if(!noAssert){checkIEEE754(buf,value,offset,4,3.4028234663852886e+38,-3.4028234663852886e+38)}
ieee754.write(buf,value,offset,littleEndian,23,4)
return offset+4}
Buffer.prototype.writeFloatLE=function writeFloatLE(value,offset,noAssert){return writeFloat(this,value,offset,true,noAssert)}
Buffer.prototype.writeFloatBE=function writeFloatBE(value,offset,noAssert){return writeFloat(this,value,offset,false,noAssert)}
function writeDouble(buf,value,offset,littleEndian,noAssert){if(!noAssert){checkIEEE754(buf,value,offset,8,1.7976931348623157E+308,-1.7976931348623157E+308)}
ieee754.write(buf,value,offset,littleEndian,52,8)
return offset+8}
Buffer.prototype.writeDoubleLE=function writeDoubleLE(value,offset,noAssert){return writeDouble(this,value,offset,true,noAssert)}
Buffer.prototype.writeDoubleBE=function writeDoubleBE(value,offset,noAssert){return writeDouble(this,value,offset,false,noAssert)}
Buffer.prototype.copy=function copy(target,targetStart,start,end){if(!start)start=0
if(!end&&end!==0)end=this.length
if(targetStart>=target.length)targetStart=target.length
if(!targetStart)targetStart=0
if(end>0&&end<start)end=start
if(end===start)return 0
if(target.length===0||this.length===0)return 0
if(targetStart<0){throw new RangeError('targetStart out of bounds')}
if(start<0||start>=this.length)throw new RangeError('sourceStart out of bounds')
if(end<0)throw new RangeError('sourceEnd out of bounds')
if(end>this.length)end=this.length
if(target.length-targetStart<end-start){end=target.length-targetStart+start}
var len=end-start
var i
if(this===target&&start<targetStart&&targetStart<end){for(i=len-1;i>=0;--i){target[i+targetStart]=this[i+start]}}else if(len<1000||!Buffer.TYPED_ARRAY_SUPPORT){for(i=0;i<len;++i){target[i+targetStart]=this[i+start]}}else{Uint8Array.prototype.set.call(target,this.subarray(start,start+len),targetStart)}
return len}
Buffer.prototype.fill=function fill(val,start,end,encoding){if(typeof val==='string'){if(typeof start==='string'){encoding=start
start=0
end=this.length}else if(typeof end==='string'){encoding=end
end=this.length}
if(val.length===1){var code=val.charCodeAt(0)
if(code<256){val=code}}
if(encoding!==undefined&&typeof encoding!=='string'){throw new TypeError('encoding must be a string')}
if(typeof encoding==='string'&&!Buffer.isEncoding(encoding)){throw new TypeError('Unknown encoding: '+encoding)}}else if(typeof val==='number'){val=val&255}
if(start<0||this.length<start||this.length<end){throw new RangeError('Out of range index')}
if(end<=start){return this}
start=start>>>0
end=end===undefined?this.length:end>>>0
if(!val)val=0
var i
if(typeof val==='number'){for(i=start;i<end;++i){this[i]=val}}else{var bytes=Buffer.isBuffer(val)?val:utf8ToBytes(new Buffer(val,encoding).toString())
var len=bytes.length
for(i=0;i<end-start;++i){this[i+start]=bytes[i%len]}}
return this}
var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g
function base64clean(str){str=stringtrim(str).replace(INVALID_BASE64_RE,'')
if(str.length<2)return ''
while(str.length%4!==0){str=str+'='}
return str}
function stringtrim(str){if(str.trim)return str.trim()
return str.replace(/^\s+|\s+$/g,'')}
function toHex(n){if(n<16)return '0'+n.toString(16)
return n.toString(16)}
function utf8ToBytes(string,units){units=units||Infinity
var codePoint
var length=string.length
var leadSurrogate=null
var bytes=[]
for(var i=0;i<length;++i){codePoint=string.charCodeAt(i)
if(codePoint>0xD7FF&&codePoint<0xE000){if(!leadSurrogate){if(codePoint>0xDBFF){if((units-=3)>-1)bytes.push(0xEF,0xBF,0xBD)
continue}else if(i+1===length){if((units-=3)>-1)bytes.push(0xEF,0xBF,0xBD)
continue}
leadSurrogate=codePoint
continue}
if(codePoint<0xDC00){if((units-=3)>-1)bytes.push(0xEF,0xBF,0xBD)
leadSurrogate=codePoint
continue}
codePoint=(leadSurrogate-0xD800<<10|codePoint-0xDC00)+0x10000}else if(leadSurrogate){if((units-=3)>-1)bytes.push(0xEF,0xBF,0xBD)}
leadSurrogate=null
if(codePoint<0x80){if((units-=1)<0)break
bytes.push(codePoint)}else if(codePoint<0x800){if((units-=2)<0)break
bytes.push(codePoint>>0x6|0xC0,codePoint&0x3F|0x80)}else if(codePoint<0x10000){if((units-=3)<0)break
bytes.push(codePoint>>0xC|0xE0,codePoint>>0x6&0x3F|0x80,codePoint&0x3F|0x80)}else if(codePoint<0x110000){if((units-=4)<0)break
bytes.push(codePoint>>0x12|0xF0,codePoint>>0xC&0x3F|0x80,codePoint>>0x6&0x3F|0x80,codePoint&0x3F|0x80)}else{throw new Error('Invalid code point')}}
return bytes}
function asciiToBytes(str){var byteArray=[]
for(var i=0;i<str.length;++i){byteArray.push(str.charCodeAt(i)&0xFF)}
return byteArray}
function utf16leToBytes(str,units){var c,hi,lo
var byteArray=[]
for(var i=0;i<str.length;++i){if((units-=2)<0)break
c=str.charCodeAt(i)
hi=c>>8
lo=c%256
byteArray.push(lo)
byteArray.push(hi)}
return byteArray}
function base64ToBytes(str){return base64.toByteArray(base64clean(str))}
function blitBuffer(src,dst,offset,length){for(var i=0;i<length;++i){if((i+offset>=dst.length)||(i>=src.length))break
dst[i+offset]=src[i]}
return i}
function isnan(val){return val!==val}}.call(exports,__webpack_require__(10)))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_node_sockets_node_clients_service_discovery_fallbacks_fallback_nodes_list__=__webpack_require__(309);var __WEBPACK_IMPORTED_MODULE_1_common_utils_helpers_Utils__=__webpack_require__(40);const uuid=__webpack_require__(306);const BigNumber=__webpack_require__(84);const BigInteger=__webpack_require__(36);let consts={DEBUG:false,OPEN_SERVER:true,};consts.BLOCKCHAIN={DIFFICULTY:{NO_BLOCKS:10,TIME_PER_BLOCK:40,},TIMESTAMP:{VALIDATION_NO_BLOCKS:10,NETWORK_ADJUSTED_TIME_MAXIMUM_BLOCK_OFFSET_AFTER_POS:30,NETWORK_ADJUSTED_TIME_MAXIMUM_BLOCK_OFFSET:10*60,NETWORK_ADJUSTED_TIME_NODE_MAX_UTC_DIFFERENCE:30,},POS:{MINIMUM_AMOUNT:100,MINIMUM_POS_TRANSFERS:30,},BLOCKS_POW_LENGTH:32,BLOCKS_MAX_TARGET:new BigNumber("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"),BLOCKS_MAX_TARGET_BIG_INTEGER:new BigInteger("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF",16),BLOCKS_MAX_TARGET_BUFFER:Buffer.from("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","hex"),BLOCKS_NONCE:4,LIGHT:{VALIDATE_LAST_BLOCKS:10,SAFETY_LAST_BLOCKS:40,SAFETY_LAST_BLOCKS_DELETE_BROWSER:500,SAFETY_LAST_BLOCKS_DELETE_NODE:100,SAFETY_LAST_ACCOUNTANT_TREES:50,SAFETY_LAST_ACCOUNTANT_TREES_TO_DELETE:60,SAFETY_LAST_BLOCKS_DELETE:undefined,GZIPPED:false,},FORKS:{IMMUTABILITY_LENGTH:60,},HARD_FORKS:{WALLET_RECOVERY:153060,TRANSACTIONS_BUG_2_BYTES:46950,TRANSACTIONS_OPTIMIZATION:153065,DIFFICULTY_TIME_BIGGER:153060,DIFFICULTY_REMOVED_CONDITION:161990,TRANSACTIONS_INCLUDING_ONLY_HEADER:567698,POS_ACTIVATION:567810,}};consts.BLOCKCHAIN.LIGHT.SAFETY_LAST_BLOCKS_DELETE=(true?consts.BLOCKCHAIN.LIGHT.SAFETY_LAST_BLOCKS_DELETE_BROWSER:consts.BLOCKCHAIN.LIGHT.SAFETY_LAST_BLOCKS_DELETE_NODE);consts.BLOCKCHAIN.LIGHT.VALIDATE_LAST_BLOCKS=consts.BLOCKCHAIN.DIFFICULTY.NO_BLOCKS*2;consts.BLOCKCHAIN.LIGHT.SAFETY_LAST_BLOCKS=consts.BLOCKCHAIN.LIGHT.VALIDATE_LAST_BLOCKS+2*consts.BLOCKCHAIN.DIFFICULTY.NO_BLOCKS;consts.MINI_BLOCKCHAIN={TOKENS:{OTHER_TOKENS:{LENGTH:24,ACTIVATED:-1,},WEBD_TOKEN:{LENGTH:1,VALUE:0x01,}}};consts.POPOW_PARAMS={m:30,k:30,k1:30,d:0.5,ACTIVATED:true,};consts.TRANSACTIONS={VERSIONS:{SCHNORR_VERSION:0x01,},SIGNATURE_SCHNORR:{LENGTH:64},};consts.SPAM_GUARDIAN={TRANSACTIONS:{MAXIMUM_IDENTICAL_INPUTS:10,MAXIMUM_IDENTICAL_OUTPUTS:255,MAXIMUM_DIFF_NONCE_ACCEPTED_FOR_QUEUE:500,MAXIMUM_MISSING_NONCE_SEARCH:5}};consts.ADDRESSES={PRIVATE_KEY:{WIF:{VERSION_PREFIX:"80",CHECK_SUM_LENGTH:4,},LENGTH:64,},PUBLIC_KEY:{LENGTH:32,},ADDRESS:{USE_BASE64:true,LENGTH:20,WIF:{LENGTH:0,VERSION_PREFIX:"00",CHECK_SUM_LENGTH:4,PREFIX_BASE64:"584043fe",SUFFIX_BASE64:"FF",PREFIX_BASE58:"00",SUFFIX_BASE58:"",}},};let prefix=(consts.ADDRESSES.ADDRESS.USE_BASE64?consts.ADDRESSES.ADDRESS.WIF.PREFIX_BASE64:consts.ADDRESSES.ADDRESS.WIF.PREFIX_BASE58);let suffix=(consts.ADDRESSES.ADDRESS.USE_BASE64?consts.ADDRESSES.ADDRESS.WIF.SUFFIX_BASE64:consts.ADDRESSES.ADDRESS.WIF.SUFFIX_BASE58);consts.ADDRESSES.ADDRESS.WIF.LENGTH=consts.ADDRESSES.ADDRESS.LENGTH+consts.ADDRESSES.ADDRESS.WIF.CHECK_SUM_LENGTH+consts.ADDRESSES.ADDRESS.WIF.VERSION_PREFIX.length/2+prefix.length/2+suffix.length/2;consts.HASH_ARGON2_PARAMS={salt:'Satoshi_is_Finney',saltBuffer:Buffer.from("Satoshi_is_Finney"),time:2,memPower:8,memBytes:256,parallelism:2,algoNode:0,algoBrowser:0,hashLen:32,};consts.DATABASE_NAMES={DEFAULT_DATABASE:"defaultDB"+(Object({"MINING_POOL_STATUS":undefined}).INSTANCE_PREFIX||""),WALLET_DATABASE:"defaultDB2"+(Object({"MINING_POOL_STATUS":undefined}).INSTANCE_PREFIX||""),BLOCKCHAIN_DATABASE:{FOLDER:"blockchainDB3"+(Object({"MINING_POOL_STATUS":undefined}).INSTANCE_PREFIX||""),FILE_NAME:'blockchain4.bin',},POOL_DATABASE:"poolDB"+(Object({"MINING_POOL_STATUS":undefined}).INSTANCE_PREFIX||""),SERVER_POOL_DATABASE:"serverPoolDB"+(Object({"MINING_POOL_STATUS":undefined}).INSTANCE_PREFIX||""),MINER_POOL_DATABASE:"minerPoolDB"+(Object({"MINING_POOL_STATUS":undefined}).INSTANCE_PREFIX||""),VALIDATE_DATABASE:"validateDB"+(Object({"MINING_POOL_STATUS":undefined}).INSTANCE_PREFIX||""),TESTS_DATABASE:"testDB"+(Object({"MINING_POOL_STATUS":undefined}).INSTANCE_PREFIX||""),TRANSACTIONS_DATABASE:"transactionsDB"+(Object({"MINING_POOL_STATUS":undefined}).INSTANCE_PREFIX||"")};consts.MINING_POOL_TYPE={MINING_POOL_DISABLED:0,MINING_POOL_SERVER:1,MINING_POOL:2,MINING_POOL_MINER:3,};consts.MINING_POOL={MINING_POOL_STATUS:(undefined||consts.MINING_POOL_TYPE.MINING_POOL_DISABLED),MINING:{MINING_POOL_MINIMUM_PAYOUT:200000,FEE_PER_BYTE:580,MAXIMUM_BLOCKS_TO_MINE_BEFORE_ERROR:13},CONNECTIONS:{NO_OF_IDENTICAL_IPS:101,PUSH_WORK_MAX_CONNECTIONS_CONSECUTIVE:0,},SKIP_POW_REWARDS:false,SKIP_POS_REWARDS:false,POOL_PAYOUT_FEE:(Object({"MINING_POOL_STATUS":undefined}).POOL_PAYOUT_FEE||0),};consts.SETTINGS={UUID:uuid.v4(),NODE:{VERSION:"1.211.5",VERSION_COMPATIBILITY:"1.200.2",VERSION_COMPATIBILITY_POOL_MINERS:"1.200.1",VERSION_COMPATIBILITY_UPDATE:"",PROTOCOL:"WebDollar",SSL:true,PORT:8080,MINER_POOL_PORT:8086,},PARAMS:{FALLBACK_INTERVAL:10*1000,STATUS_INTERVAL:40*1000,LATENCY_CHECK:5*1000,MAX_ALLOWED_LATENCY:5*1000,CONCURRENCY_BLOCK_DOWNLOAD_MINERS_NUMBER:(true?10:30),WAITLIST:{TRY_RECONNECT_AGAIN:30*1000,INTERVAL:2*1000,BLOCKED_NODES:[],},SIGNALING:{SERVER_PROTOCOL_CONNECTING_WEB_PEERS_INTERVAL:2*1000,},MAX_SIZE:{BLOCKS_MAX_SIZE_BYTES:1*1024*1024,SOCKET_MAX_SIZE_BYRES:3*1024*1024+50,SPLIT_CHUNKS_BUFFER_SOCKETS_SIZE_BYTES:32*1024,MINIMUM_SPLIT_CHUNKS_BUFFER_SOCKETS_SIZE_BYTES:32*1024,},WALLET:{VERSION:"0.1"},CONNECTIONS:{NO_OF_IDENTICAL_IPS:20,SOCKETS_TO_PROPAGATE_NEW_BLOCK_TIP:100,TERMINAL:{CLIENT:{MAX_SOCKET_CLIENTS_WAITLIST:5,MAX_SOCKET_CLIENTS_WAITLIST_FALLBACK:5,MIN_SOCKET_CLIENTS_WAITLIST:0,MIN_SOCKET_CLIENTS_WAITLIST_FALLBACK:2,SERVER_OPEN:{MAX_SOCKET_CLIENTS_WAITLIST:5,MAX_SOCKET_CLIENTS_WAITLIST_FALLBACK:3,},SSL:{MAX_SOCKET_CLIENTS_WAITLIST_WHEN_SSL:20,MAX_SOCKET_CLIENTS_WAITLIST_FALLBACK_WHEN_SSL:10,},},SERVER:{MAXIMUM_CONNECTIONS_FROM_TERMINAL:400,MAXIMUM_CONNECTIONS_FROM_BROWSER:1000,MAXIMUM_CONNECTIONS_FROM_BROWSER_POOL:2000,MAXIMUM_CONNECTIONS_FROM_TERMINAL_POOL:2000,TERMINAL_CONNECTIONS_REQUIRED_TO_DISCONNECT_FROM_FALLBACK:10,},},BROWSER:{CLIENT:{MAXIMUM_CONNECTIONS_IN_BROWSER_WAITLIST:4,MAXIMUM_CONNECTIONS_IN_BROWSER_WAITLIST_FALLBACK:2,MIN_SOCKET_CLIENTS_WAITLIST:0,MIN_SOCKET_CLIENTS_WAITLIST_FALLBACK:1,},SERVER:{},WEBRTC:{MAXIMUM_CONNECTIONS:13,},},COMPUTED:{CLIENT:{},SERVER:{},},FORKS:{MAXIMUM_BLOCKS_TO_DOWNLOAD:300,MAXIMUM_BLOCKS_TO_DOWNLOAD_TO_USE_SLEEP:30,},TIMEOUT:{WAIT_ASYNC_DISCOVERY_TIMEOUT:7500,}},},MEM_POOL:{TIME_LOCK:{TRANSACTIONS_MAX_LIFE_TIME_IN_POOL_AFTER_EXPIRATION:10*consts.BLOCKCHAIN.LIGHT.VALIDATE_LAST_BLOCKS,},MAXIMUM_TRANSACTIONS_TO_DOWNLOAD:1000,MINIMUM_TRANSACTION_AMOUNT:100000,},GEO_IP_ENABLED:true,};consts.TERMINAL_WORKERS={CPU_WORKER_NONCES_WORK:700,CPU_CPP_WORKER_NONCES_WORK:0,CPU_CPP_WORKER_NONCES_WORK_BATCH:500,GPU_WORKER_NONCES_WORK:20000,GPU_WORKER_NONCES_WORK_BATCH:200,TYPE:Object({"MINING_POOL_STATUS":undefined}).TERMINAL_WORKERS_TYPE||"cpu",PATH:'./dist_bundle/terminal_worker.js',PATH_CPP:__WEBPACK_IMPORTED_MODULE_1_common_utils_helpers_Utils__["a"].isWin?'':'./dist_bundle/CPU/',PATH_CPP_FILENAME:'argon2-bench2'+(__WEBPACK_IMPORTED_MODULE_1_common_utils_helpers_Utils__["a"].isWin?'.exe':''),PATH_GPU:__WEBPACK_IMPORTED_MODULE_1_common_utils_helpers_Utils__["a"].isWin?'':'./dist_bundle/GPU/',PATH_GPU_FILENAME:'argon2-gpu-test'+(__WEBPACK_IMPORTED_MODULE_1_common_utils_helpers_Utils__["a"].isWin?'.exe':''),GPU_MODE:"opencl",GPU_MAX:1,GPU_INSTANCES:1,SILENT:true,CPU_MAX:parseInt(Object({"MINING_POOL_STATUS":undefined}).TERMINAL_WORKERS_CPU_MAX)||0,};consts.JSON_RPC={version:'1.5.0',serverConfig:{host:Object({"MINING_POOL_STATUS":undefined}).JSON_RPC_SERVER_HOST||'127.0.0.1',port:Object({"MINING_POOL_STATUS":undefined}).JSON_RPC_SERVER_PORT,},basicAuth:{users:{},isEnabled:Object({"MINING_POOL_STATUS":undefined}).JSON_RPC_BASIC_AUTH_ENABLE||false},rateLimit:{windowMs:Object({"MINING_POOL_STATUS":undefined}).JSON_RPC_RATE_LIMIT_WINDOW||60*1000,max:Object({"MINING_POOL_STATUS":undefined}).JSON_RPC_RATE_LIMIT_MAX_REQUESTS||60,isEnabled:Object({"MINING_POOL_STATUS":undefined}).JSON_RPC_RATE_LIMIT_ENABLE||true},};if(Object({"MINING_POOL_STATUS":undefined}).JSON_RPC_BASIC_AUTH_USER&&Object({"MINING_POOL_STATUS":undefined}).JSON_RPC_BASIC_AUTH_PASS){consts.JSON_RPC.basicAuth.users[Object({"MINING_POOL_STATUS":undefined}).JSON_RPC_BASIC_AUTH_USER]=Object({"MINING_POOL_STATUS":undefined}).JSON_RPC_BASIC_AUTH_PASS;if(consts.JSON_RPC.basicAuth.isEnabled)
consts.JSON_RPC.basicAuth.isEnabled=true;}
if(Object({"MINING_POOL_STATUS":undefined}).MAXIMUM_CONNECTIONS_FROM_BROWSER)
consts.SETTINGS.PARAMS.CONNECTIONS.TERMINAL.SERVER.MAXIMUM_CONNECTIONS_FROM_BROWSER=Object({"MINING_POOL_STATUS":undefined}).MAXIMUM_CONNECTIONS_FROM_BROWSER;if(Object({"MINING_POOL_STATUS":undefined}).MAXIMUM_CONNECTIONS_FROM_TERMINAL)
consts.SETTINGS.PARAMS.CONNECTIONS.TERMINAL.SERVER.MAXIMUM_CONNECTIONS_FROM_TERMINAL=Object({"MINING_POOL_STATUS":undefined}).MAXIMUM_CONNECTIONS_FROM_TERMINAL;consts.NETWORK_TYPE={id:1,name:"Webdollar MainNet"};if(Object({"MINING_POOL_STATUS":undefined}).NETWORK&&Object({"MINING_POOL_STATUS":undefined}).NETWORK!==''&&Object({"MINING_POOL_STATUS":undefined}).NETWORK==='testnet'){consts.DEBUG=true;__WEBPACK_IMPORTED_MODULE_0_node_sockets_node_clients_service_discovery_fallbacks_fallback_nodes_list__["a"].nodes=__WEBPACK_IMPORTED_MODULE_0_node_sockets_node_clients_service_discovery_fallbacks_fallback_nodes_list__["a"].nodes_testnet;consts.NETWORK_TYPE={id:2,name:"Webdollar TestNet"};}
if(consts.DEBUG===true){consts.MINING_POOL.SKIP_POW_REWARDS=false;consts.MINING_POOL.SKIP_POS_REWARDS=false;consts.SETTINGS.NODE.VERSION="3"+consts.SETTINGS.NODE.VERSION;consts.SETTINGS.NODE.VERSION_COMPATIBILITY="3"+consts.SETTINGS.NODE.VERSION_COMPATIBILITY;consts.SETTINGS.NODE.SSL=false;consts.MINING_POOL.MINING.MAXIMUM_BLOCKS_TO_MINE_BEFORE_ERROR=10000;consts.BLOCKCHAIN.HARD_FORKS.TRANSACTIONS_BUG_2_BYTES=60;consts.BLOCKCHAIN.HARD_FORKS.TRANSACTIONS_OPTIMIZATION=70;consts.BLOCKCHAIN.HARD_FORKS.DIFFICULTY_TIME_BIGGER=70;consts.BLOCKCHAIN.HARD_FORKS.DIFFICULTY_REMOVED_CONDITION=80;consts.BLOCKCHAIN.HARD_FORKS.POS_ACTIVATION=90;consts.BLOCKCHAIN.HARD_FORKS.TRANSACTIONS_INCLUDING_ONLY_HEADER=consts.BLOCKCHAIN.HARD_FORKS.POS_ACTIVATION;consts.SETTINGS.NODE.PORT=2024;__WEBPACK_IMPORTED_MODULE_0_node_sockets_node_clients_service_discovery_fallbacks_fallback_nodes_list__["a"].nodes=[{"addr":["http://testnet2.hoste.ro:8001"],"addr":["http://86.126.138.61:2024"],}];consts.SPAM_GUARDIAN.TRANSACTIONS.MAXIMUM_IDENTICAL_INPUTS=1000;consts.SPAM_GUARDIAN.TRANSACTIONS.MAXIMUM_IDENTICAL_OUTPUTS=1000;consts.SETTINGS.NODE.VERSION="1.210.9";consts.SETTINGS.NODE.VERSION_COMPATIBILITY="1.210.9";consts.SETTINGS.NODE.VERSION_COMPATIBILITY_POOL_MINERS="1.210.9";}
if(Object({"MINING_POOL_STATUS":undefined}).NETWORK!==undefined&&Object({"MINING_POOL_STATUS":undefined}).NETWORK!==''&&Object({"MINING_POOL_STATUS":undefined}).NETWORK==='testnet')
__WEBPACK_IMPORTED_MODULE_0_node_sockets_node_clients_service_discovery_fallbacks_fallback_nodes_list__["a"].nodes=__WEBPACK_IMPORTED_MODULE_0_node_sockets_node_clients_service_discovery_fallbacks_fallback_nodes_list__["a"].nodes_testnet;__webpack_exports__["a"]=(consts);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1_common_crypto_WebDollar_Crypto__=__webpack_require__(28);const bs58=__webpack_require__(310);const safeCompare=__webpack_require__(648);class BufferExtended{substr(buffer,index,count){if(count===undefined)
count=buffer.length;let length=Math.min(index+count,buffer.length);if(length-index<0)
throw{message:"length-index <= 0...",buffer:buffer.toString("hex"),index:index,length:length,count:count};if(length-index===0)return new Buffer(0);let buf=new Buffer(length-index);buffer.copy(buf,0,index,length);return buf;}
longestMatch(buffer,buffer2,startIndex=0){let i=0;while(i+startIndex<buffer.length&&i<buffer2.length){if(buffer[i+startIndex]!==buffer2[i])
break;i++;}
if(i>0)
return this.substr(buffer,startIndex,i);}
safeCompare(buffer1,buffer2,fastValidation){if(fastValidation)
return buffer1.equals(buffer2);if(!buffer1.equals(buffer2))return false;return safeCompare(buffer1,buffer2);}
toBase(buffer){if(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].ADDRESSES.ADDRESS.USE_BASE64)
return __WEBPACK_IMPORTED_MODULE_1_common_crypto_WebDollar_Crypto__["a"].encodeBase64(buffer);else
return bs58.encode(buffer);}
fromBase(string){if(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].ADDRESSES.ADDRESS.USE_BASE64)
return __WEBPACK_IMPORTED_MODULE_1_common_crypto_WebDollar_Crypto__["a"].decodeBase64(string);else
return bs58.decode(string);}}
__webpack_exports__["a"]=(new BufferExtended());}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){var buffer=__webpack_require__(1)
var Buffer=buffer.Buffer
function copyProps(src,dst){for(var key in src){dst[key]=src[key]}}
if(Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow){module.exports=buffer}else{copyProps(buffer,exports)
exports.Buffer=SafeBuffer}
function SafeBuffer(arg,encodingOrOffset,length){return Buffer(arg,encodingOrOffset,length)}
copyProps(Buffer,SafeBuffer)
SafeBuffer.from=function(arg,encodingOrOffset,length){if(typeof arg==='number'){throw new TypeError('Argument must not be a number')}
return Buffer(arg,encodingOrOffset,length)}
SafeBuffer.alloc=function(size,fill,encoding){if(typeof size!=='number'){throw new TypeError('Argument must be a number')}
var buf=Buffer(size)
if(fill!==undefined){if(typeof encoding==='string'){buf.fill(fill,encoding)}else{buf.fill(fill)}}else{buf.fill(0)}
return buf}
SafeBuffer.allocUnsafe=function(size){if(typeof size!=='number'){throw new TypeError('Argument must be a number')}
return Buffer(size)}
SafeBuffer.allocUnsafeSlow=function(size){if(typeof size!=='number'){throw new TypeError('Argument must be a number')}
return buffer.SlowBuffer(size)}}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1_main_blockchain_wallet_Main_Blockchain_Wallet__=__webpack_require__(643);var __WEBPACK_IMPORTED_MODULE_2_main_blockchain_chain_Main_Blockchain__=__webpack_require__(922);var __WEBPACK_IMPORTED_MODULE_3_main_blockchain_mining_Main_Blockchain_Mining__=__webpack_require__(973);var __WEBPACK_IMPORTED_MODULE_4_main_blockchain_agents_Main_Blockchain_Agent__=__webpack_require__(982);var __WEBPACK_IMPORTED_MODULE_5_main_blockchain_balances_Main_Blockchain_Balances__=__webpack_require__(1033);var __WEBPACK_IMPORTED_MODULE_6_common_utils_validation_Validations_Utils__=__webpack_require__(1035);var __WEBPACK_IMPORTED_MODULE_7_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_8_common_events_Status_Events__=__webpack_require__(12);var __WEBPACK_IMPORTED_MODULE_9_node_lists_waitlist_Nodes_Waitlist__=__webpack_require__(39);var __WEBPACK_IMPORTED_MODULE_10_common_crypto_WebDollar_Crypto__=__webpack_require__(28);var __WEBPACK_IMPORTED_MODULE_11__node_lists_types_Node_Type__=__webpack_require__(35);var __WEBPACK_IMPORTED_MODULE_12_common_blockchain_global_Blockchain_Genesis__=__webpack_require__(16);var __WEBPACK_IMPORTED_MODULE_13_common_mining_pools_pool_pool_management_Pool_Management__=__webpack_require__(1038);var __WEBPACK_IMPORTED_MODULE_14_common_mining_pools_miner_Miner_Pool_Management__=__webpack_require__(1063);let ServerPoolManagement=undefined;if(false)
ServerPoolManagement=require("common/mining-pools/server-pool/Server-Pool-Management").default;class Blockchain{constructor(){this._startMiningNextTimeSynchronized=false;this._blockchainInitiated=false;this._walletLoaded=false;this.Chain=new __WEBPACK_IMPORTED_MODULE_2_main_blockchain_chain_Main_Blockchain__["a"](undefined);this.blockchain=this.Chain;this._synchronized=undefined;this.Wallet=new __WEBPACK_IMPORTED_MODULE_1_main_blockchain_wallet_Main_Blockchain_Wallet__["a"](this.Chain);this.Mining=new __WEBPACK_IMPORTED_MODULE_3_main_blockchain_mining_Main_Blockchain_Mining__["a"](this.Chain,undefined);this.SoloMining=this.Mining;this.Transactions=this.Chain.transactions;this.Transactions.setWallet(this.Wallet);this.Balances=new __WEBPACK_IMPORTED_MODULE_5_main_blockchain_balances_Main_Blockchain_Balances__["a"](this.Chain);this.AccountantTree=this.Chain.accountantTree;this.onLoaded=new Promise((resolve)=>{this._onLoadedResolver=resolve;});this.onPoolsInitialized=new Promise((resolve)=>{this._onPoolsInitializedResolver=resolve;});this.onPoolsCreated=new Promise((resolve)=>{this._onPoolsCreatedResolver=resolve;});this._loaded=false;this._poolsLoaded=false;this.blockchainGenesis=__WEBPACK_IMPORTED_MODULE_12_common_blockchain_global_Blockchain_Genesis__["a"];}
async createBlockchain(agentName,beforeBlockchainLoadCallback,afterBlockchainLoadCallback,afterSynchronizationCallback,synchronize=true){this._blockchainInitiated=true;this.Agent=__WEBPACK_IMPORTED_MODULE_4_main_blockchain_agents_Main_Blockchain_Agent__["a"].createAgent(agentName,this.blockchain);this.Agent.setBlockchain(this.blockchain);this.blockchain._setAgent(this.Agent);let validation;try{validation=new __WEBPACK_IMPORTED_MODULE_6_common_utils_validation_Validations_Utils__["a"]();await validation.validate();}catch(exception){}
await validation.waitSingleTab(()=>{__WEBPACK_IMPORTED_MODULE_8_common_events_Status_Events__["a"].emit('blockchain/status',{message:"Multiple Windows Detected"});});__WEBPACK_IMPORTED_MODULE_8_common_events_Status_Events__["a"].emit('blockchain/status',{message:"Single Window"});await this.initializeBlockchain(beforeBlockchainLoadCallback,afterBlockchainLoadCallback,afterSynchronizationCallback,synchronize);}
async loadWallet(){if(!this._walletLoaded){await this.Wallet.loadWallet();await this.Mining.loadMinerAddress(this.Wallet.addresses[0],this.Wallet);this._walletLoaded=true;}}
async initializeBlockchain(beforeBlockchainLoadCallback,afterBlockchainLoadCallback,afterSynchronizationCallback,synchronize=true){await this.loadWallet();await this.createMiningPools();if(true){__WEBPACK_IMPORTED_MODULE_8_common_events_Status_Events__["a"].emit('blockchain/status',{message:"Loading Hashing Function"});await __WEBPACK_IMPORTED_MODULE_10_common_crypto_WebDollar_Crypto__["a"].hashPOW(Buffer(32));__WEBPACK_IMPORTED_MODULE_8_common_events_Status_Events__["a"].emit('blockchain/status',{message:"Successfully Hash Function Loaded"});}
if(typeof beforeBlockchainLoadCallback==="function")
await beforeBlockchainLoadCallback();if(synchronize){await this.Chain.loadBlockchain();await this.blockchain.transactions.pendingQueue.pendingQueueSavingManager.loadPendingTransactions();}
if(typeof afterBlockchainLoadCallback==="function")
await afterBlockchainLoadCallback();if(synchronize){await this.Agent.initializeStartAgentOnce();if(this.Agent.consensus)
await this.synchronizeBlockchain(true);else{this.synchronized=true;this.startMining();__WEBPACK_IMPORTED_MODULE_8_common_events_Status_Events__["a"].emit('blockchain/status',{message:"Blockchain Ready to Mine"});}}
if(typeof afterSynchronizationCallback==="function")
await afterSynchronizationCallback();this.loaded=true;}
async startMining(){if(Object({"MINING_POOL_STATUS":undefined}).START_MINING||this._startMiningNextTimeSynchronized)
return this.Mining.startMining();}
async startMiningInstantly(){return this.Mining.startMining();}
async synchronizeBlockchain(firstTime,synchronizeComplete=false){if(this.synchronized===false)return;this.synchronized=false;console.warn("################### RESYNCHRONIZATION STARTED ##########");let suspendMining=false;if(!this.blockchain.light||(this.blockchain.light&&__WEBPACK_IMPORTED_MODULE_7_node_lists_Nodes_List__["a"].nodes.length<=0))
suspendMining=true;if(suspendMining){__WEBPACK_IMPORTED_MODULE_8_common_events_Status_Events__["a"].emit('blockchain/status',{message:"Start Synchronizing"});this.Mining.stopMining();}
while(!this.synchronized){__WEBPACK_IMPORTED_MODULE_8_common_events_Status_Events__["a"].emit('blockchain/status',{message:"Synchronizing"});let resultAgentStarted=await this.Agent.startAgent(firstTime,synchronizeComplete);firstTime=false;if(resultAgentStarted.result){__WEBPACK_IMPORTED_MODULE_8_common_events_Status_Events__["a"].emit('blockchain/status',{message:"Synchronization Successful"});this.synchronized=true;}else{if(firstTime)
__WEBPACK_IMPORTED_MODULE_8_common_events_Status_Events__["a"].emit('blockchain/status',{message:"Error Synchronizing"});else
__WEBPACK_IMPORTED_MODULE_8_common_events_Status_Events__["a"].emit('blockchain/status',{message:"No Internet Access"});if(__WEBPACK_IMPORTED_MODULE_7_node_lists_Nodes_List__["a"].nodes.length===0)
__WEBPACK_IMPORTED_MODULE_9_node_lists_waitlist_Nodes_Waitlist__["a"].resetWaitlist(__WEBPACK_IMPORTED_MODULE_11__node_lists_types_Node_Type__["a"].NODE_WEB_PEER);this.Agent.initializeAgentPromise();}}
this.synchronized=true;console.warn("Blockchain Ready to Mine");if(suspendMining){this.startMining();__WEBPACK_IMPORTED_MODULE_8_common_events_Status_Events__["a"].emit('blockchain/status',{message:"Blockchain Ready to Mine"});}}
get poolsLoaded(){return this._poolsLoaded;}
get loaded(){return this._loaded;}
set loaded(newValue){this._loaded=newValue;this._onLoadedResolver(newValue);}
set startMiningNextTimeSynchronized(newValue){this._startMiningNextTimeSynchronized=newValue;if(newValue&&this.synchronized)
this.startMining();}
get synchronized(){return this._synchronized;}
set synchronized(newValue){this._synchronized=newValue;__WEBPACK_IMPORTED_MODULE_8_common_events_Status_Events__["a"].emit('blockchain/synchronizing',!newValue);__WEBPACK_IMPORTED_MODULE_8_common_events_Status_Events__["a"].emit('blockchain/synchronized',newValue);}
async createMiningPools(){if(!this.PoolManagement)
this.PoolManagement=new __WEBPACK_IMPORTED_MODULE_13_common_mining_pools_pool_pool_management_Pool_Management__["a"](this.blockchain,this.Wallet);if(!this.MinerPoolManagement)
this.MinerPoolManagement=new __WEBPACK_IMPORTED_MODULE_14_common_mining_pools_miner_Miner_Pool_Management__["a"](this.blockchain);if(ServerPoolManagement&&!this.ServerPoolManagement)
this.ServerPoolManagement=new ServerPoolManagement();this._onPoolsCreatedResolver(true);await this._initializeMiningPools();}
async _initializeMiningPools(){let pool=false,minerPool=false,serverPool=false;try{pool=await this.PoolManagement.initializePoolManagement();}catch(exception){console.error("PoolManagement raised an error",exception);}
try{minerPool=await this.MinerPoolManagement.initializeMinerPoolManagement();}catch(exception){console.error("MinerPool raised an error",exception);}
try{if(this.ServerPoolManagement!==undefined)
serverPool=await this.ServerPoolManagement.initializeServerPoolManagement();}catch(exception){console.error("ServerPool raised an error",exception)}
this._onPoolsInitializedResolver(pool,minerPool,serverPool);await __WEBPACK_IMPORTED_MODULE_8_common_events_Status_Events__["a"].emit("main-pools/status",{message:"Pool Initialized"});await this._startMiningPools();}
async _startMiningPools(){if(this.MinerPoolManagement.minerPoolSettings.minerPoolActivated)
await this.MinerPoolManagement.setMinerPoolStarted(this.MinerPoolManagement.minerPoolSettings.minerPoolActivated,true);if(this.PoolManagement.poolSettings.poolActivated)
await this.PoolManagement.setPoolStarted(this.PoolManagement.poolSettings.poolActivated,true);if(this.ServerPoolManagement!==undefined&&this.ServerPoolManagement.serverPoolSettings.serverPoolActivated)
await this.ServerPoolManagement.setServerPoolStarted(this.ServerPoolManagement.serverPoolSettings.serverPoolActivated,true);}
get isPoolActivated(){return(this.PoolManagement&&this.PoolManagement._poolStarted)||(this.ServerPoolManagement&&this.ServerPoolManagement._serverPoolStarted);}
get versionCompatibility(){if(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].SETTINGS.NODE.VERSION_COMPATIBILITY_UPDATE)
return __WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].SETTINGS.NODE.VERSION_COMPATIBILITY_UPDATE;else
return __WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].SETTINGS.NODE.VERSION_COMPATIBILITY;}}
__webpack_exports__["a"]=(new Blockchain());}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_node_lists_geolocation_lists_GeoLocation_Lists__=__webpack_require__(231);var __WEBPACK_IMPORTED_MODULE_1_common_sockets_protocol_extend_socket_Socket_Address__=__webpack_require__(76);var __WEBPACK_IMPORTED_MODULE_2__Mode_List_Object_js__=__webpack_require__(920);var __WEBPACK_IMPORTED_MODULE_3_node_lists_types_Connection_Type__=__webpack_require__(47);var __WEBPACK_IMPORTED_MODULE_4_node_lists_waitlist_Nodes_Waitlist__=__webpack_require__(39);var __WEBPACK_IMPORTED_MODULE_5_node_lists_types_Node_Type__=__webpack_require__(35);var __WEBPACK_IMPORTED_MODULE_6_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_7_common_utils_Advanced_Emitter__=__webpack_require__(70);class NodesList{constructor(){console.log("NodesList constructor");this.emitter=new __WEBPACK_IMPORTED_MODULE_7_common_utils_Advanced_Emitter__["a"](2000);this.nodes=[];this.consensusBlock=0;this.countsNodeTypes={0:0,1:0,};this.countsNodeConnectionTypes={0:0,1:0,2:0,};setTimeout(this.recalculateSocketsLatency.bind(this),__WEBPACK_IMPORTED_MODULE_6_consts_const_global__["a"].SETTINGS.PARAMS.LATENCY_CHECK);this.removeDisconnectedSockets();}
isConsensus(blockchainHeight){let blocksList={};let consensusHeightNodes=0;if(this.nodes.length>0){for(let i=0;i<this.nodes.length;i++)
if(this.nodes[i].socket.node.protocol.blocks&&this.nodes[i].socket.node.protocol.blocks>0)
if(!blocksList[this.nodes[i].socket.node.protocol.blocks])
blocksList[this.nodes[i].socket.node.protocol.blocks]=1;else
blocksList[this.nodes[i].socket.node.protocol.blocks]++;}else
return false;for(let key in blocksList)
if(blocksList[key]>consensusHeightNodes&&parseInt(key)>=parseInt(this.consensusBlock)){consensusHeightNodes=blocksList[key];this.consensusBlock=parseInt(key);}
if(blockchainHeight>5&&blockchainHeight>this.consensusBlock-4)
return true;else
return false}
searchNodeSocketByAddress(sckAddress,connectionType='all',validationDoubleConnectionsTypes){sckAddress=__WEBPACK_IMPORTED_MODULE_1_common_sockets_protocol_extend_socket_Socket_Address__["a"].createSocketAddress(sckAddress);for(let i=0;i<this.nodes.length;i++)
if((this.nodes[i].connectionType===connectionType||connectionType==="all")&&(this.nodes[i].socket.node.sckAddress.matchAddress(sckAddress,validationDoubleConnectionsTypes)))
return this.nodes[i];return null;}
countNodeSocketByAddress(sckAddress,connectionType="all"){sckAddress=__WEBPACK_IMPORTED_MODULE_1_common_sockets_protocol_extend_socket_Socket_Address__["a"].createSocketAddress(sckAddress);let countUUIDs=0,countIPs=0;for(let i=0;i<this.nodes.length;i++)
if(this.nodes[i].connectionType===connectionType||connectionType==="all"){if(this.nodes[i].socket.node.sckAddress.uuid===sckAddress.uuid)
countUUIDs++;else
if(this.nodes[i].socket.node.sckAddress.address===sckAddress.address)
countIPs++;}
return{countUUIDs:countUUIDs,countIPs:countIPs};}
async registerUniqueSocket(socket,connectionType,nodeType,nodeConsensusType,validationDoubleConnectionsTypes){if(nodeType===undefined)throw{message:"type is necessary"};if(!socket.node||!socket.node.protocol||!socket.node.protocol.helloValidated){socket.disconnect();return false;}
socket.node.protocol.connectionType=connectionType;socket.node.protocol.nodeType=nodeType;socket.node.protocol.nodeConsensusType=nodeConsensusType;if(!this.searchNodeSocketByAddress(socket,undefined,validationDoubleConnectionsTypes)){let object=new __WEBPACK_IMPORTED_MODULE_2__Mode_List_Object_js__["a"](socket,connectionType,nodeType,nodeConsensusType,__WEBPACK_IMPORTED_MODULE_4_node_lists_waitlist_Nodes_Waitlist__["a"].isAddressFallback(socket.node.sckAddress));if(socket.node.protocol.nodeDomain&&(socket.node.protocol.nodeType===__WEBPACK_IMPORTED_MODULE_5_node_lists_types_Node_Type__["a"].NODE_TERMINAL||socket.node.protocol.nodeType===__WEBPACK_IMPORTED_MODULE_5_node_lists_types_Node_Type__["a"].NODE_WEB_PEER)){socket.node.protocol.nodeDomain=socket.node.protocol.nodeDomain.replace("my-ip",socket.node.sckAddress.address);socket.node.protocol.nodeDomain=socket.node.protocol.nodeDomain.replace("browser",socket.node.sckAddress.address);await __WEBPACK_IMPORTED_MODULE_4_node_lists_waitlist_Nodes_Waitlist__["a"].addNewNodeToWaitlist(socket.node.protocol.nodeDomain,undefined,socket.node.protocol.nodeType,socket.node.protocol.nodeConsensusType,true,socket.node.level,socket,socket);}
if(socket.node.protocol.nodeType===__WEBPACK_IMPORTED_MODULE_5_node_lists_types_Node_Type__["a"].NODE_WEB_PEER)
await __WEBPACK_IMPORTED_MODULE_4_node_lists_waitlist_Nodes_Waitlist__["a"].addNewNodeToWaitlist(socket.node.sckAddress,undefined,socket.node.protocol.nodeType,socket.node.protocol.nodeConsensusType,true,socket.node.level,socket,socket);__WEBPACK_IMPORTED_MODULE_0_node_lists_geolocation_lists_GeoLocation_Lists__["a"].includeSocket(socket);await this.emitter.emit("nodes-list/connected",object);this.nodes.push(object);this.countsNodeTypes[socket.node.protocol.nodeType]++;this.countsNodeConnectionTypes[socket.node.protocol.connectionType]++;return true;}
console.error("Already connected to ",socket.node.sckAddress.getAddress(true));socket.disconnect();return false;}
async disconnectSocket(socket,connectionType='all'){if(socket&&!socket.node){if(socket.connected)
socket.disconnect();return false;}
for(let i=this.nodes.length-1;i>=0;i--)
if((this.nodes[i].connectionType===connectionType||connectionType==="all")&&(this.nodes[i].socket===socket||this.nodes[i].socket.node.sckAddress.uuid===socket.node.sckAddress.uuid)){if(Math.random()<0.3)
console.error('deleting client socket '+i+" "+socket.node.sckAddress.toString());let nodeToBeDeleted=this.nodes[i];this.countsNodeTypes[socket.node.protocol.nodeType]--;this.countsNodeConnectionTypes[socket.node.protocol.connectionType]--;this.nodes.splice(i,1);await this.emitter.emit("nodes-list/disconnected",nodeToBeDeleted);socket.disconnect();return true;}
socket.disconnect();return false;}
getNodesByConnectionType(connectionType='all',fallback){let list=[];for(let i=0;i<this.nodes.length;i++)
if(Array.isArray(connectionType)){if(connectionType.indexOf(this.nodes[i].socket.node.protocol.connectionType)>=0)
list.push(this.nodes[i]);}else
if(connectionType===this.nodes[i].socket.node.protocol.connectionType||connectionType==="all")
list.push(this.nodes[i]);return list;}
getNodesByType(type='all'){let list=[];for(let i=0;i<this.nodes.length;i++)
if(Array.isArray(type)){if(type.indexOf(this.nodes[i].socket.node.protocol.nodeType)>=0)
list.push(this.nodes[i]);}else
if(type===this.nodes[i].socket.node.protocol.nodeType||type==="all")
list.push(this.nodes[i]);return list;}
countNodesByConnectionType(connectionType='all'){if(connectionType==="all")return this.countsNodeConnectionTypes[0]+this.countsNodeConnectionTypes[1]+this.countsNodeConnectionTypes[2];return this.countsNodeConnectionTypes[connectionType];}
countNodesByType(nodeType='all'){if(nodeType==="all")return this.countsNodeTypes[0]+this.countsNodeTypes[1];return this.countsNodeTypes[nodeType];}
removeDisconnectedSockets(){for(let i=this.nodes.length-1;i>=0;i--)
if(this.nodes[i].socket.disconnected){this.countsNodeTypes[this.nodes[i].socket.node.protocol.nodeType]--;this.countsNodeConnectionTypes[this.nodes[i].socket.node.protocol.connectionType]--;this.nodes.splice(i,1);}
setTimeout(this.removeDisconnectedSockets.bind(this),5000);}
disconnectAllNodes(connectionType=__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Connection_Type__["a"].CONNECTION_CLIENT_SOCKET){for(let i=this.nodes.length-1;i>=0;i--)
if(this.nodes[i].socket.node.protocol.connectionType===connectionType||connectionType==="all")
this.nodes[i].socket.disconnect();}
disconnectAllNodesByConsensusType(nodeConsensusType){for(let i=this.nodes.length-1;i>=0;i--)
if(this.nodes[i].socket.node.protocol.nodeConsensusType===nodeConsensusType)
this.nodes[i].socket.disconnect();}
disconnectFromFallbacks(){for(let i=this.nodes.length-1;i>=0;i--)
if(this.nodes[i].isFallback)
this.nodes.disconnect();}
countFallbacks(){let count=0;for(let i=this.nodes.length-1;i>=0;i--)
if(this.nodes[i].isFallback)
count++;return count;}
async recalculateSocketsLatency(){try{for(let i=0;i<this.nodes.length;i++)
await this.nodes[i].socket.node.protocol.calculateLatency();}catch(exception){}
setTimeout(this.recalculateSocketsLatency.bind(this),__WEBPACK_IMPORTED_MODULE_6_consts_const_global__["a"].SETTINGS.PARAMS.LATENCY_CHECK);}}
__webpack_exports__["a"]=(new NodesList());}),(function(module,exports){if(typeof Object.create==='function'){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor
ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}});};}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor
var TempCtor=function(){}
TempCtor.prototype=superCtor.prototype
ctor.prototype=new TempCtor()
ctor.prototype.constructor=ctor}}}),(function(module,exports,__webpack_require__){var isObject=__webpack_require__(14);module.exports=function(it){if(!isObject(it))throw TypeError(it+' is not an object!');return it;};}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0__BufferExtended__=__webpack_require__(3);const BigNumber=__webpack_require__(84);const BigInteger=__webpack_require__(36);class Serialization{serializeBigInteger(bigInteger){let list=[];while(bigInteger.greater(0)){let division=bigInteger.divmod(256);list.push(division.remainder);bigInteger=division.quotient;}
list.reverse();let buffer=new Buffer(list.length);for(let i=0;i<list.length;i++)
buffer[i]=list[i];return buffer;}
deserializeBigInteger(buffer){let number=new BigInteger(0);let power=new BigInteger(1);for(let i=buffer.length-1;i>=0;i--){number=number.plus(power.multiply(buffer[i]));power=power.multiply(256);}
return number;}
convertBigNumber(bigNumber,length){let buffer=new Buffer(length);let count=length-1;while(bigNumber.isGreaterThan(0)){buffer[count]=bigNumber.modulo(256).toNumber();bigNumber=bigNumber.dividedToIntegerBy(256);count--;}
return buffer;}
serializeNumber1Byte(data){let buffer=Buffer(1);buffer[0]=(data&0xff);return buffer;}
serializeNumber2Bytes(data){let buffer=Buffer(2);buffer[1]=data&0xff;buffer[0]=data>>8&0xff;return buffer;}
serializeNumber3Bytes(data){let buffer=Buffer(3);buffer[2]=data&0xff;buffer[1]=data>>8&0xff;buffer[0]=data>>16&0xff;return buffer;}
serializeNumber4Bytes(data){let buffer=Buffer(4);buffer[3]=data&0xff;buffer[2]=data>>8&0xff;buffer[1]=data>>16&0xff;buffer[0]=data>>24&0xff;return buffer;}
deserializeNumber4Bytes_Positive(buffer,offset=0){let value=0;for(let i=offset;i<=offset+3;i++)
value=(value*256)+buffer[i];return value;}
deserializeNumber4Bytes(buffer,offset=0){return buffer[3+offset]|(buffer[2+offset]<<8)|(buffer[1+offset]<<16)|(buffer[0+offset]<<24);}
deserializeNumber3Bytes(buffer,offset=0){return buffer[2+offset]|(buffer[1+offset]<<8)|(buffer[0+offset]<<16);}
deserializeNumber2Bytes(buffer,offset=0){return buffer[1+offset]|(buffer[0+offset]<<8);}
deserializeNumber1Bytes(buffer,offset=0){return buffer[0+offset];}
serializeNumber7Bytes(long){var byteArray=new Buffer(7);for(let index=0;index<byteArray.length;index++){let byte=long&0xff;byteArray[index]=byte;long=(long-byte)/256;}
return byteArray;}
deserializeNumber7Bytes(buffer,offset=0){let value=0;for(let i=offset+6;i>=offset;i--)
value=(value*256)+buffer[i];return value;}
deserializeNumber(buffer){if(buffer.length===1)return buffer[0];else
if(buffer.length===2)return buffer[1]|(buffer[0]<<8);else
if(buffer.length===3)return buffer[2]|(buffer[1]<<8)|(buffer[0]<<16);else
if(buffer.length===4)return buffer[3]|(buffer[2]<<8)|(buffer[1]<<16)|(buffer[0]<<24);else
if(buffer.length===6)return buffer[5]|(buffer[4]<<8)|(buffer[3]<<16)|(buffer[2]<<24)|(buffer[1]<<32)|(buffer[0]<<40);}
serializeToFixedBuffer(noBytes,buffer){if(buffer===undefined||buffer===null)
return new Buffer(noBytes);if(buffer.length===noBytes)
return buffer;let result=new Buffer(noBytes);let c=0;for(let i=buffer.length-1;i>=0;i--){c++;result[noBytes-c]=buffer[i];}
return result;}
serializeHashOptimized(hash){return this.serializeBufferRemovingLeadingZeros(hash);}
deserializeHashOptimized(buffer,offset){let hashPrefix=[];let hashLength=this.deserializeNumber1Bytes(buffer,offset);offset+=1;for(let i=0;i<32-hashLength;i++)hashPrefix.push(0);let hashLeadingZero=__WEBPACK_IMPORTED_MODULE_0__BufferExtended__["a"].substr(buffer,offset,hashLength);offset+=hashLength;let deserializedHash=Buffer.concat([new Buffer(hashPrefix),hashLeadingZero]);let result={hash:deserializedHash,offset:offset};return result;}
serializeBufferRemovingLeadingZeros(buffer){let count=0;while(count<buffer.length&&buffer[count]===0)
count++;let result=new Buffer(1+buffer.length-count);result[0]=buffer.length-count;for(let i=count;i<buffer.length;i++)
result[i-count+1]=buffer[i];return result;}
mostSignificantOneBitPosition(n){let num=0;if(0xFFFF0000&n){n=(0xFFFF0000&n)>>16;num+=16;}
if(0xFF00&n){n=(0xFF00&n)>>8;num+=8;}
if(0xF0&n){n=(0xF0&n)>>4;num+=4;}
if(12&n){n=(12&n)>>2;num+=2;}
if(2&n){n=(2&n)>>1;num+=1;}
return num;}
serializeBigNumber(data){if(data instanceof BigNumber===false)
throw 'data is not big decimal';if(data.c.length===0)
throw "data is 0 and can't be ";let buffer=new Buffer(1+1+data.c.length*6);buffer[0]=Math.abs(data.e)%128+(data.e>=0?0:1)*128;buffer[1]=data.c.length%128+(data.s>=0?0:1)*128;for(let i=0;i<data.c.length;i++){let long=data.c[i],byte;byte=long&0xff;buffer[2+(i*6)]=byte;long=(long-byte)/256;byte=long&0xff;buffer[2+(i*6+1)]=byte;long=(long-byte)/256;byte=long&0xff;buffer[2+(i*6+2)]=byte;long=(long-byte)/256;byte=long&0xff;buffer[2+(i*6+3)]=byte;long=(long-byte)/256;byte=long&0xff;buffer[2+(i*6+4)]=byte;long=(long-byte)/256;byte=long&0xff;buffer[2+(i*6+5)]=byte;long=(long-byte)/256;}
return buffer;}
deserializeBigNumber(buffer,offset){offset=offset||0;let bigNumber={e:0,s:0,c:[]};if(!Buffer.isBuffer(buffer))
throw "Can't deserialize Big Number because it is not a buffer";bigNumber.e=buffer[0+offset]%128;bigNumber.e*=Math.floor(buffer[0+offset]/128)===0?1:-1;let length=buffer[1+offset]%128;bigNumber.s=Math.floor(buffer[1+offset]/128)===0?1:-1;for(let i=0;i<length;i++){let nr=0;nr=buffer[2+i*6+5+offset];nr=(nr*256)+buffer[2+i*6+4+offset];nr=(nr*256)+buffer[2+i*6+3+offset];nr=(nr*256)+buffer[2+i*6+2+offset];nr=(nr*256)+buffer[2+i*6+1+offset];nr=(nr*256)+buffer[2+i*6+0+offset];bigNumber.c.push(nr);}
let res=new BigNumber(0);res.c=bigNumber.c;res.s=bigNumber.s;res.e=bigNumber.e;return{number:res,newOffset:2+length*6+offset,}}
deserializeNumber(buffer){if(buffer.length===1)return buffer[0];else
if(buffer.length===2)return buffer[1]|(buffer[0]<<8);else
if(buffer.length===3)return buffer[2]|(buffer[1]<<8)|(buffer[0]<<16);else
if(buffer.length===4)return buffer[3]|(buffer[2]<<8)|(buffer[1]<<16)|(buffer[0]<<24);}}
__webpack_exports__["a"]=(new Serialization());}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,exports){var g;g=(function(){return this;})();try{g=g||Function("return this")()||(1,eval)("this");}catch(e){if(typeof window==="object")
g=window;}
module.exports=g;}),(function(module,exports){var global=module.exports=typeof window!='undefined'&&window.Math==Math?window:typeof self!='undefined'&&self.Math==Math?self:Function('return this')();if(typeof __g=='number')__g=global;}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_utils_Advanced_Emitter__=__webpack_require__(70);class StatusEvents extends __WEBPACK_IMPORTED_MODULE_0_common_utils_Advanced_Emitter__["a"]{}
__webpack_exports__["a"]=(new StatusEvents());}),(function(module,exports){module.exports=function(exec){try{return!!exec();}catch(e){return true;}};}),(function(module,exports){module.exports=function(it){return typeof it==='object'?it!==null:typeof it==='function';};}),(function(module,exports,__webpack_require__){(function(Buffer){var assert=__webpack_require__(71);var Stream=__webpack_require__(67).Stream;var util=__webpack_require__(25);var UUID_REGEXP=/^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$/;function _capitalize(str){return(str.charAt(0).toUpperCase()+str.slice(1));}
function _toss(name,expected,oper,arg,actual){throw new assert.AssertionError({message:util.format('%s (%s) is required',name,expected),actual:(actual===undefined)?typeof(arg):actual(arg),expected:expected,operator:oper||'===',stackStartFunction:_toss.caller});}
function _getClass(arg){return(Object.prototype.toString.call(arg).slice(8,-1));}
function noop(){}
var types={bool:{check:function(arg){return typeof(arg)==='boolean';}},func:{check:function(arg){return typeof(arg)==='function';}},string:{check:function(arg){return typeof(arg)==='string';}},object:{check:function(arg){return typeof(arg)==='object'&&arg!==null;}},number:{check:function(arg){return typeof(arg)==='number'&&!isNaN(arg);}},finite:{check:function(arg){return typeof(arg)==='number'&&!isNaN(arg)&&isFinite(arg);}},buffer:{check:function(arg){return Buffer.isBuffer(arg);},operator:'Buffer.isBuffer'},array:{check:function(arg){return Array.isArray(arg);},operator:'Array.isArray'},stream:{check:function(arg){return arg instanceof Stream;},operator:'instanceof',actual:_getClass},date:{check:function(arg){return arg instanceof Date;},operator:'instanceof',actual:_getClass},regexp:{check:function(arg){return arg instanceof RegExp;},operator:'instanceof',actual:_getClass},uuid:{check:function(arg){return typeof(arg)==='string'&&UUID_REGEXP.test(arg);},operator:'isUUID'}};function _setExports(ndebug){var keys=Object.keys(types);var out;if(Object({"MINING_POOL_STATUS":undefined}).NODE_NDEBUG){out=noop;}else{out=function(arg,msg){if(!arg){_toss(msg,'true',arg);}};}
keys.forEach(function(k){if(ndebug){out[k]=noop;return;}
var type=types[k];out[k]=function(arg,msg){if(!type.check(arg)){_toss(msg,k,type.operator,arg,type.actual);}};});keys.forEach(function(k){var name='optional'+_capitalize(k);if(ndebug){out[name]=noop;return;}
var type=types[k];out[name]=function(arg,msg){if(arg===undefined||arg===null){return;}
if(!type.check(arg)){_toss(msg,k,type.operator,arg,type.actual);}};});keys.forEach(function(k){var name='arrayOf'+_capitalize(k);if(ndebug){out[name]=noop;return;}
var type=types[k];var expected='['+k+']';out[name]=function(arg,msg){if(!Array.isArray(arg)){_toss(msg,expected,type.operator,arg,type.actual);}
var i;for(i=0;i<arg.length;i++){if(!type.check(arg[i])){_toss(msg,expected,type.operator,arg,type.actual);}}};});keys.forEach(function(k){var name='optionalArrayOf'+_capitalize(k);if(ndebug){out[name]=noop;return;}
var type=types[k];var expected='['+k+']';out[name]=function(arg,msg){if(arg===undefined||arg===null){return;}
if(!Array.isArray(arg)){_toss(msg,expected,type.operator,arg,type.actual);}
var i;for(i=0;i<arg.length;i++){if(!type.check(arg[i])){_toss(msg,expected,type.operator,arg,type.actual);}}};});Object.keys(assert).forEach(function(k){if(k==='AssertionError'){out[k]=assert[k];return;}
if(ndebug){out[k]=noop;return;}
out[k]=assert[k];});out._setExports=_setExports;return out;}
module.exports=_setExports(Object({"MINING_POOL_STATUS":undefined}).NODE_NDEBUG);}.call(exports,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__=__webpack_require__(3);class BlockchainGenesis{constructor(){this.hashPrev=new Buffer("731D46C131EB6DD4667A96BDC27BAF9223BEC72C3468DFB6BA52C460E76423A4","hex");this.timeStamp=0;if(!__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].DEBUG)
this.timeStampOffset=1524742312;else
this.timeStampOffset=1529344475;this.difficultyTarget=new Buffer("00029112ca1bbdcafac231b39a23dc4da786eff8147c4e72b9807785afee48bb","hex");this.difficultyTargetPOS=new Buffer("00000000000006ece3173c784c7d4871c061a1f20eca8f33aa76fb15846e0c13","hex");this.address=__WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__["a"].fromBase("WEBD$gBzsiV+$FARK8qSGqs09V6AEDBi#@fP6n7$");this.height=0;}
validateGenesis(block){if(block.timeStamp.length!==this.timeStamp.length)
throw{message:"Timestamp doesn't match",timestamp:block.timeStamp};if(block.timeStamp>0x000FFFFF)
throw{message:"Timestamp is too old ",timestamp:block.timeStamp};if(block.timeStamp<0)
throw{message:"Timestamp is invalid",timeStamp:block.timeStamp}}
get level(){return 0;}
isPoSActivated(height){if(typeof height==="string")height=Number.parseInt(height);if(height<__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.POS_ACTIVATION)
return false;else{if(height%30<20)return true;else return false;}}}
__webpack_exports__["a"]=(new BlockchainGenesis());}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_crypto_ed25519__=__webpack_require__(75);var __WEBPACK_IMPORTED_MODULE_1_common_crypto_WebDollar_Crypto__=__webpack_require__(28);var __WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_3_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_4_node_menu_Advanced_Messages__=__webpack_require__(86);class InterfaceBlockchainAddressHelper{static _generatePrivateKeyAdvanced(salt,showDebug,privateKeyWIF){let privateKey;if(privateKeyWIF){let result=InterfaceBlockchainAddressHelper.validatePrivateKeyWIF(privateKeyWIF);if(result.result)
privateKey=result.privateKey;}
if(!privateKey)
privateKey=__WEBPACK_IMPORTED_MODULE_0_common_crypto_ed25519__["a"].generatePrivateKey();if(showDebug){console.log("privateKeyHex",privateKey.toString("hex"),"length",privateKey.length)}
let privateKeyAndVersion=Buffer.concat([Buffer.from(__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.PRIVATE_KEY.WIF.VERSION_PREFIX,"hex"),privateKey]);let checksum=InterfaceBlockchainAddressHelper._calculateChecksum(privateKeyAndVersion,showDebug);let keyWithChecksum=Buffer.concat([privateKeyAndVersion,checksum]);if(showDebug)
console.log("keyWithChecksum",keyWithChecksum,typeof keyWithChecksum);privateKeyWIF=keyWithChecksum;if(showDebug){console.log("privateKeyWIF",privateKeyWIF.toString("hex"),"length",privateKeyWIF.length);console.log("privateKey",privateKey.toString("hex"),"length",privateKey.length)}
return{privateKeyWIF:privateKeyWIF,privateKey:privateKey,};}
static _generatePrivateKey(salt,showDebug){return InterfaceBlockchainAddressHelper._generatePrivateKeyAdvanced(salt,showDebug).privateKeyWIF.string;}
static _generatePublicKey(privateKeyWIF,showDebug){if(!privateKeyWIF||!Buffer.isBuffer(privateKeyWIF)){console.error("ERROR! ",privateKeyWIF," is not a Buffer");throw{message:'privateKeyWIF must be a Buffer',privateKeyWIF:privateKeyWIF};}
let validation=InterfaceBlockchainAddressHelper.validatePrivateKeyWIF(privateKeyWIF);if(showDebug)
console.log("VALIDATION",validation);let privateKey=undefined;if(validation.result===false)return validation;else privateKey=validation.privateKey;if(showDebug)
console.log("privateKey",privateKey,typeof privateKey);const pubKey=__WEBPACK_IMPORTED_MODULE_0_common_crypto_ed25519__["a"].generatePublicKey(privateKey);if(showDebug)
console.log("pubKey",pubKey);return new Buffer(pubKey);}
static verifySignedData(msg,signature,pubKey){return __WEBPACK_IMPORTED_MODULE_0_common_crypto_ed25519__["a"].verify(signature,msg,pubKey)}
static signMessage(msg,privateKey){return __WEBPACK_IMPORTED_MODULE_0_common_crypto_ed25519__["a"].sign(msg,privateKey);}
static _generateUnencodedAddressFromPublicKey(publicKey,showDebug){if(!Buffer.isBuffer(publicKey))
throw{message:'publicKey must be a Buffer',publicKey:publicKey};let unencodedAddress=__WEBPACK_IMPORTED_MODULE_1_common_crypto_WebDollar_Crypto__["a"].RIPEMD160(__WEBPACK_IMPORTED_MODULE_1_common_crypto_WebDollar_Crypto__["a"].SHA256(publicKey));if(showDebug)
console.log("hash160 hex",unencodedAddress.toString('hex'));return unencodedAddress;}
static _generateAddressFromPublicKey(publicKey,showDebug){let unencodedAddress=InterfaceBlockchainAddressHelper._generateUnencodedAddressFromPublicKey(publicKey,showDebug);let addressWIF=InterfaceBlockchainAddressHelper.generateAddressWIF(unencodedAddress);if(showDebug)
console.log("addressWIF",__WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__["a"].toBase(addressWIF));return{unencodedAddress:unencodedAddress,addressWIF:__WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__["a"].toBase(addressWIF),address:__WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__["a"].toBase(unencodedAddress),};}
static generateAddressWIF(address,showDebug,toBase=false){if(!Buffer.isBuffer(address)&&typeof address==="string")
address=__WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__["a"].fromBase(address);if(!Buffer.isBuffer(address))
throw{message:"invalid address"};let prefix=(__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.USE_BASE64?__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.WIF.PREFIX_BASE64:__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.WIF.PREFIX_BASE58);let suffix=(__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.USE_BASE64?__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.WIF.SUFFIX_BASE64:__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.WIF.SUFFIX_BASE58);if(address.length===__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH+__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.WIF.CHECK_SUM_LENGTH+__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.WIF.VERSION_PREFIX.length/2+prefix.length/2+suffix.length/2)
return(toBase?__WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__["a"].toBase(address):address);address=Buffer.concat([Buffer.from(__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.WIF.VERSION_PREFIX,"hex"),address]);let checksum=InterfaceBlockchainAddressHelper._calculateChecksum(address,showDebug);let addressWIF=Buffer.concat([Buffer.from(prefix,"hex"),address,checksum,Buffer.from(suffix,"hex")]);return(toBase?__WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__["a"].toBase(addressWIF):addressWIF);}
static generateAddress(salt,privateKeyWIF){let privateKey,publicKey,address;let invalidAddress=true;while(invalidAddress){privateKey=InterfaceBlockchainAddressHelper._generatePrivateKeyAdvanced(salt,false,privateKeyWIF);publicKey=InterfaceBlockchainAddressHelper._generatePublicKey(privateKey.privateKeyWIF,false);address=InterfaceBlockchainAddressHelper._generateAddressFromPublicKey(publicKey,false);try{if(InterfaceBlockchainAddressHelper.getUnencodedAddressFromWIF(address.address)!==null)
invalidAddress=false;}catch(exception){console.error("Address is invalid",address.address,address.address.length);InterfaceBlockchainAddressHelper.getUnencodedAddressFromWIF(address.address);}}
return{address:address.address,addressWIF:address.addressWIF,unencodedAddress:address.unencodedAddress,publicKey:publicKey,privateKey:privateKey,};}
static getUnencodedAddressFromWIF(address){if(typeof address==="string")
address=__WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__["a"].fromBase(address);if(typeof address==="object"&&address.hasOwnProperty("unencodedAddress"))
address=address.unencodedAddress;try{let result=this._validateAddressWIF(address);if(result.result===true)return result.unencodedAddress;else return null;}catch(exception){return null;}}
static _calculateChecksum(privateKeyAndVersion,showDebug){if(!Buffer.isBuffer(privateKeyAndVersion)&&typeof privateKeyAndVersion==='string')
privateKeyAndVersion=Buffer.from(privateKeyAndVersion,'hex');let secondSHA=__WEBPACK_IMPORTED_MODULE_1_common_crypto_WebDollar_Crypto__["a"].SHA256(__WEBPACK_IMPORTED_MODULE_1_common_crypto_WebDollar_Crypto__["a"].SHA256(privateKeyAndVersion));let checksum=__WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__["a"].substr(secondSHA,0,__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.PRIVATE_KEY.WIF.CHECK_SUM_LENGTH);if(showDebug)
console.log("checksum",checksum.toString("hex"));return checksum;}
static validatePrivateKeyWIF(privateKeyWIF){if(!privateKeyWIF||!Buffer.isBuffer(privateKeyWIF)){throw{message:'privateKeyWIF must be a Buffer'};}
let versionDetected=false;let versionDetectedBuffer='';if(privateKeyWIF.length===__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.PRIVATE_KEY.LENGTH+__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.PRIVATE_KEY.WIF.CHECK_SUM_LENGTH+__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.PRIVATE_KEY.WIF.VERSION_PREFIX.length/2){if(privateKeyWIF.indexOf(Buffer.from(__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.PRIVATE_KEY.WIF.VERSION_PREFIX,"hex"))===0){versionDetected=true;versionDetectedBuffer=__WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__["a"].substr(privateKeyWIF,0,__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.PRIVATE_KEY.WIF.VERSION_PREFIX.length/2);privateKeyWIF=__WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__["a"].substr(privateKeyWIF,__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.PRIVATE_KEY.WIF.VERSION_PREFIX.length/2);}}
let checkSumDetected=false;if(privateKeyWIF.length===__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.PRIVATE_KEY.LENGTH+__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.PRIVATE_KEY.WIF.CHECK_SUM_LENGTH){let privateKeyWIFCheckSum=__WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__["a"].substr(privateKeyWIF,privateKeyWIF.length-__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.PRIVATE_KEY.WIF.CHECK_SUM_LENGTH);let privateKeyWithoutCheckSum=__WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__["a"].substr(privateKeyWIF,0,privateKeyWIF.length-__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.PRIVATE_KEY.WIF.CHECK_SUM_LENGTH);let privateKeyJustVersionHex=Buffer.concat([versionDetectedBuffer,privateKeyWithoutCheckSum]);let checksum=InterfaceBlockchainAddressHelper._calculateChecksum(privateKeyJustVersionHex);if(checksum.equals(privateKeyWIFCheckSum)){checkSumDetected=true;privateKeyWIF=__WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__["a"].substr(privateKeyWIF,0,privateKeyWIF.length-__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.PRIVATE_KEY.WIF.CHECK_SUM_LENGTH)}}
if(privateKeyWIF.length!==__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.PRIVATE_KEY.LENGTH){if(!checkSumDetected)throw{message:"PRIVATE KEY  CHECK SUM is not right"};if(!versionDetected)throw{message:"PRIVATE KEY  VERSION PREFIX is not recognized"};}
return{result:true,privateKey:privateKeyWIF};}
static _validateAddressWIF(addressWIF){if(!addressWIF||!Buffer.isBuffer(addressWIF)){throw{message:'addressWIF must be a Buffer',addressWIF:addressWIF};}
let versionDetected=false;let prefixDetected=false;let suffixDetected=false;let versionDetectedBuffer='';let prefix=(__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.USE_BASE64?__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.WIF.PREFIX_BASE64:__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.WIF.PREFIX_BASE58);let suffix=(__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.USE_BASE64?__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.WIF.SUFFIX_BASE64:__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.WIF.SUFFIX_BASE58);if(addressWIF.length===__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH+__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.WIF.CHECK_SUM_LENGTH+__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.WIF.VERSION_PREFIX.length/2+prefix.length/2+suffix.length/2){if(addressWIF.indexOf(Buffer.from(prefix,"hex"))===0){prefixDetected=true;addressWIF=__WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__["a"].substr(addressWIF,prefix.length/2);}}
if(addressWIF.length===__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH+__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.WIF.CHECK_SUM_LENGTH+__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.WIF.VERSION_PREFIX.length/2+suffix.length/2){if(addressWIF.lastIndexOf(Buffer.from(suffix,"hex"))===addressWIF.length-suffix.length/2){suffixDetected=true;addressWIF=__WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__["a"].substr(addressWIF,0,addressWIF.length-suffix.length/2);}}
if(addressWIF.length===__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH+__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.WIF.CHECK_SUM_LENGTH+__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.WIF.VERSION_PREFIX.length/2){if(addressWIF.indexOf(Buffer.from(__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.WIF.VERSION_PREFIX,"hex"))===0){versionDetected=true;versionDetectedBuffer=__WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__["a"].substr(addressWIF,0,__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.WIF.VERSION_PREFIX.length/2);addressWIF=__WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__["a"].substr(addressWIF,__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.WIF.VERSION_PREFIX.length/2);}}
let checkSumDetected=false;if(addressWIF.length===__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH+__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.WIF.CHECK_SUM_LENGTH){let addressWIFCheckSum=__WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__["a"].substr(addressWIF,addressWIF.length-__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.WIF.CHECK_SUM_LENGTH);let privateKeyWithoutCheckSum=__WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__["a"].substr(addressWIF,0,addressWIF.length-__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.WIF.CHECK_SUM_LENGTH);let privateKeyJustVersionHex=Buffer.concat([versionDetectedBuffer,privateKeyWithoutCheckSum]);let checksum=InterfaceBlockchainAddressHelper._calculateChecksum(privateKeyJustVersionHex);if(checksum.equals(addressWIFCheckSum)){checkSumDetected=true;addressWIF=__WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__["a"].substr(addressWIF,0,addressWIF.length-__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.WIF.CHECK_SUM_LENGTH)}}
if(addressWIF.length!==__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH){if(!prefixDetected)
throw{message:"ADDRESS KEY  PREFIX  is not right",addressWIF:addressWIF};if(!suffixDetected)
throw{message:"ADDRESS KEY  SUFFIX is not right",addressWIF:addressWIF};if(!checkSumDetected)
throw{message:"ADDRESS KEY  CHECK SUM is not right",addressWIF:addressWIF};if(!versionDetected)
throw{message:"ADDRESS KEY  VERSION PREFIX is not recognized",addressWIF:addressWIF};}
return{result:true,unencodedAddress:addressWIF};}
static askForPassword(message){message=message||'Please enter your last password (12 words separated by space):';return new Promise(async(resolve)=>{let answer=await __WEBPACK_IMPORTED_MODULE_4_node_menu_Advanced_Messages__["a"].input(message);let password=answer.trim().split(' ');for(let i=password.length-1;i>=0;i--)
if(password[i].length===0)
password.splice(i,1);if(password.length!==12){__WEBPACK_IMPORTED_MODULE_4_node_menu_Advanced_Messages__["a"].alert(`You entered a password that has ${password.length} words. It must have 12!`,'Password Error','error',5000);return resolve(null);}
resolve(password);});}}
__webpack_exports__["a"]=(InterfaceBlockchainAddressHelper);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1__Logger__=__webpack_require__(930);const LOG_TYPE={DEFAULT:0,POOLS:1,BLOCKCHAIN:2,BLOCKCHAIN_FORKS:3,CLI_MENU:4,SAVING_MANAGER:5,};class Log{constructor(){this.LOG_TYPE=LOG_TYPE;this.defaultLogger=new __WEBPACK_IMPORTED_MODULE_1__Logger__["a"]("default",LOG_TYPE.DEFAULT);this.poolsLogger=new __WEBPACK_IMPORTED_MODULE_1__Logger__["a"]("pools",LOG_TYPE.POOLS);this.blockchainLogger=new __WEBPACK_IMPORTED_MODULE_1__Logger__["a"]("blockchain",LOG_TYPE.BLOCKCHAIN);this.blockchainForksLogger=new __WEBPACK_IMPORTED_MODULE_1__Logger__["a"]("blockchainForks",LOG_TYPE.BLOCKCHAIN_FORKS);this.savingManagerLogger=new __WEBPACK_IMPORTED_MODULE_1__Logger__["a"]("savingManager",LOG_TYPE.SAVING_MANAGER);this.menuLogger=new __WEBPACK_IMPORTED_MODULE_1__Logger__["a"]("cli_menu",LOG_TYPE.CLI_MENU);this.loggers={};this.loggers[LOG_TYPE.DEFAULT]=this.defaultLogger;this.loggers[LOG_TYPE.POOLS]=this.poolsLogger;this.loggers[LOG_TYPE.BLOCKCHAIN]=this.blockchainLogger;this.loggers[LOG_TYPE.SAVING_MANAGER]=this.savingManagerLogger;this.loggers[LOG_TYPE.BLOCKCHAIN_FORKS]=this.blockchainForksLogger;this.loggers[LOG_TYPE.CLI_MENU]=this.menuLogger;}
info(msg,config=LOG_TYPE.DEFAULT,msg2,msg3){if(this.loggers[config]!==undefined)
this.loggers[config].info.apply(this.loggers[config],arguments);}
log(msg,config=LOG_TYPE.DEFAULT,msg2,msg3){if(this.loggers[config]!==undefined)
this.loggers[config].log.apply(this.loggers[config],arguments);}
debug(msg,config=LOG_TYPE.DEFAULT,msg2,msg3){if(this.loggers[config]!==undefined)
this.loggers[config].debug.apply(this.loggers[config],arguments);}
error(msg,config=LOG_TYPE.DEFAULT,msg2,msg3){if(this.loggers[arguments[1]]!==undefined)
this.loggers[arguments[1]].error.apply(this.loggers[arguments[1]],arguments);}
warn(msg,config=LOG_TYPE.DEFAULT,msg2,msg3){if(this.loggers[arguments[1]]!==undefined)
this.loggers[arguments[1]].warn.apply(this.loggers[arguments[1]],arguments);}}
__webpack_exports__["a"]=(new Log());}),(function(module,exports,__webpack_require__){var store=__webpack_require__(146)('wks');var uid=__webpack_require__(93);var Symbol=__webpack_require__(11).Symbol;var USE_SYMBOL=typeof Symbol=='function';var $exports=module.exports=function(name){return store[name]||(store[name]=USE_SYMBOL&&Symbol[name]||(USE_SYMBOL?Symbol:uid)('Symbol.'+name));};$exports.store=store;}),(function(module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error('setTimeout has not been defined');}
function defaultClearTimeout(){throw new Error('clearTimeout has not been defined');}
(function(){try{if(typeof setTimeout==='function'){cachedSetTimeout=setTimeout;}else{cachedSetTimeout=defaultSetTimout;}}catch(e){cachedSetTimeout=defaultSetTimout;}
try{if(typeof clearTimeout==='function'){cachedClearTimeout=clearTimeout;}else{cachedClearTimeout=defaultClearTimeout;}}catch(e){cachedClearTimeout=defaultClearTimeout;}}())
function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0);}
if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0);}
try{return cachedSetTimeout(fun,0);}catch(e){try{return cachedSetTimeout.call(null,fun,0);}catch(e){return cachedSetTimeout.call(this,fun,0);}}}
function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker);}
if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker);}
try{return cachedClearTimeout(marker);}catch(e){try{return cachedClearTimeout.call(null,marker);}catch(e){return cachedClearTimeout.call(this,marker);}}}
var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return;}
draining=false;if(currentQueue.length){queue=currentQueue.concat(queue);}else{queueIndex=-1;}
if(queue.length){drainQueue();}}
function drainQueue(){if(draining){return;}
var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run();}}
queueIndex=-1;len=queue.length;}
currentQueue=null;draining=false;runClearTimeout(timeout);}
process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i];}}
queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue);}};function Item(fun,array){this.fun=fun;this.array=array;}
Item.prototype.run=function(){this.fun.apply(null,this.array);};process.title='browser';process.browser=true;process.env={};process.argv=[];process.version='';process.versions={};function noop(){}
process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]}
process.binding=function(name){throw new Error('process.binding is not supported');};process.cwd=function(){return '/'};process.chdir=function(dir){throw new Error('process.chdir is not supported');};process.umask=function(){return 0;};}),(function(module,exports,__webpack_require__){"use strict";(function(process){var buffer=__webpack_require__(1)
var Buffer=buffer.Buffer
var safer={}
var key
for(key in buffer){if(!buffer.hasOwnProperty(key))continue
if(key==='SlowBuffer'||key==='Buffer')continue
safer[key]=buffer[key]}
var Safer=safer.Buffer={}
for(key in Buffer){if(!Buffer.hasOwnProperty(key))continue
if(key==='allocUnsafe'||key==='allocUnsafeSlow')continue
Safer[key]=Buffer[key]}
safer.Buffer.prototype=Buffer.prototype
if(!Safer.from||Safer.from===Uint8Array.from){Safer.from=function(value,encodingOrOffset,length){if(typeof value==='number'){throw new TypeError('The "value" argument must not be of type number. Received type '+typeof value)}
if(value&&typeof value.length==='undefined'){throw new TypeError('The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type '+typeof value)}
return Buffer(value,encodingOrOffset,length)}}
if(!Safer.alloc){Safer.alloc=function(size,fill,encoding){if(typeof size!=='number'){throw new TypeError('The "size" argument must be of type number. Received type '+typeof size)}
if(size<0||size>=2*(1<<30)){throw new RangeError('The value "'+size+'" is invalid for option "size"')}
var buf=Buffer(size)
if(!fill||fill.length===0){buf.fill(0)}else if(typeof encoding==='string'){buf.fill(fill,encoding)}else{buf.fill(fill)}
return buf}}
if(!safer.kStringMaxLength){try{safer.kStringMaxLength=process.binding('buffer').kStringMaxLength}catch(e){}}
if(!safer.constants){safer.constants={MAX_LENGTH:safer.kMaxLength}
if(safer.kStringMaxLength){safer.constants.MAX_STRING_LENGTH=safer.kStringMaxLength}}
module.exports=safer}.call(exports,__webpack_require__(20)))}),(function(module,exports,__webpack_require__){var toInteger=__webpack_require__(60);var min=Math.min;module.exports=function(it){return it>0?min(toInteger(it),0x1fffffffffffff):0;};}),(function(module,exports,__webpack_require__){var ERRORS=__webpack_require__(349)
var NATIVE=__webpack_require__(219)
var tfJSON=ERRORS.tfJSON
var TfTypeError=ERRORS.TfTypeError
var TfPropertyTypeError=ERRORS.TfPropertyTypeError
var tfSubError=ERRORS.tfSubError
var getValueTypeName=ERRORS.getValueTypeName
var TYPES={arrayOf:function arrayOf(type,options){type=compile(type)
options=options||{}
function _arrayOf(array,strict){if(!NATIVE.Array(array))return false
if(NATIVE.Nil(array))return false
if(options.minLength!==undefined&&array.length<options.minLength)return false
if(options.maxLength!==undefined&&array.length>options.maxLength)return false
if(options.length!==undefined&&array.length!==options.length)return false
return array.every(function(value,i){try{return typeforce(type,value,strict)}catch(e){throw tfSubError(e,i)}})}
_arrayOf.toJSON=function(){var str='['+tfJSON(type)+']'
if(options.length!==undefined){str+='{'+options.length+'}'}else if(options.minLength!==undefined||options.maxLength!==undefined){str+='{'+
(options.minLength===undefined?0:options.minLength)+','+
(options.maxLength===undefined?Infinity:options.maxLength)+'}'}
return str}
return _arrayOf},maybe:function maybe(type){type=compile(type)
function _maybe(value,strict){return NATIVE.Nil(value)||type(value,strict,maybe)}
_maybe.toJSON=function(){return '?'+tfJSON(type)}
return _maybe},map:function map(propertyType,propertyKeyType){propertyType=compile(propertyType)
if(propertyKeyType)propertyKeyType=compile(propertyKeyType)
function _map(value,strict){if(!NATIVE.Object(value))return false
if(NATIVE.Nil(value))return false
for(var propertyName in value){try{if(propertyKeyType){typeforce(propertyKeyType,propertyName,strict)}}catch(e){throw tfSubError(e,propertyName,'key')}
try{var propertyValue=value[propertyName]
typeforce(propertyType,propertyValue,strict)}catch(e){throw tfSubError(e,propertyName)}}
return true}
if(propertyKeyType){_map.toJSON=function(){return '{'+tfJSON(propertyKeyType)+': '+tfJSON(propertyType)+'}'}}else{_map.toJSON=function(){return '{'+tfJSON(propertyType)+'}'}}
return _map},object:function object(uncompiled){var type={}
for(var typePropertyName in uncompiled){type[typePropertyName]=compile(uncompiled[typePropertyName])}
function _object(value,strict){if(!NATIVE.Object(value))return false
if(NATIVE.Nil(value))return false
var propertyName
try{for(propertyName in type){var propertyType=type[propertyName]
var propertyValue=value[propertyName]
typeforce(propertyType,propertyValue,strict)}}catch(e){throw tfSubError(e,propertyName)}
if(strict){for(propertyName in value){if(type[propertyName])continue
throw new TfPropertyTypeError(undefined,propertyName)}}
return true}
_object.toJSON=function(){return tfJSON(type)}
return _object},anyOf:function anyOf(){var types=[].slice.call(arguments).map(compile)
function _anyOf(value,strict){return types.some(function(type){try{return typeforce(type,value,strict)}catch(e){return false}})}
_anyOf.toJSON=function(){return types.map(tfJSON).join('|')}
return _anyOf},allOf:function allOf(){var types=[].slice.call(arguments).map(compile)
function _allOf(value,strict){return types.every(function(type){try{return typeforce(type,value,strict)}catch(e){return false}})}
_allOf.toJSON=function(){return types.map(tfJSON).join(' & ')}
return _allOf},quacksLike:function quacksLike(type){function _quacksLike(value){return type===getValueTypeName(value)}
_quacksLike.toJSON=function(){return type}
return _quacksLike},tuple:function tuple(){var types=[].slice.call(arguments).map(compile)
function _tuple(values,strict){if(NATIVE.Nil(values))return false
if(NATIVE.Nil(values.length))return false
if(strict&&(values.length!==types.length))return false
return types.every(function(type,i){try{return typeforce(type,values[i],strict)}catch(e){throw tfSubError(e,i)}})}
_tuple.toJSON=function(){return '('+types.map(tfJSON).join(', ')+')'}
return _tuple},value:function value(expected){function _value(actual){return actual===expected}
_value.toJSON=function(){return expected}
return _value}}
TYPES.oneOf=TYPES.anyOf
function compile(type){if(NATIVE.String(type)){if(type[0]==='?')return TYPES.maybe(type.slice(1))
return NATIVE[type]||TYPES.quacksLike(type)}else if(type&&NATIVE.Object(type)){if(NATIVE.Array(type)){if(type.length!==1)throw new TypeError('Expected compile() parameter of type Array of length 1')
return TYPES.arrayOf(type[0])}
return TYPES.object(type)}else if(NATIVE.Function(type)){return type}
return TYPES.value(type)}
function typeforce(type,value,strict,surrogate){if(NATIVE.Function(type)){if(type(value,strict))return true
throw new TfTypeError(surrogate||type,value)}
return typeforce(compile(type),value,strict)}
for(var typeName in NATIVE){typeforce[typeName]=NATIVE[typeName]}
for(typeName in TYPES){typeforce[typeName]=TYPES[typeName]}
var EXTRA=__webpack_require__(753)
for(typeName in EXTRA){typeforce[typeName]=EXTRA[typeName]}
typeforce.compile=compile
typeforce.TfTypeError=TfTypeError
typeforce.TfPropertyTypeError=TfPropertyTypeError
module.exports=typeforce}),(function(module,exports,__webpack_require__){"use strict";exports.randomBytes=exports.rng=exports.pseudoRandomBytes=exports.prng=__webpack_require__(102)
exports.createHash=exports.Hash=__webpack_require__(103)
exports.createHmac=exports.Hmac=__webpack_require__(164)
var algos=__webpack_require__(664)
var algoKeys=Object.keys(algos)
var hashes=['sha1','sha224','sha256','sha384','sha512','md5','rmd160'].concat(algoKeys)
exports.getHashes=function(){return hashes}
var p=__webpack_require__(320)
exports.pbkdf2=p.pbkdf2
exports.pbkdf2Sync=p.pbkdf2Sync
var aes=__webpack_require__(666)
exports.Cipher=aes.Cipher
exports.createCipher=aes.createCipher
exports.Cipheriv=aes.Cipheriv
exports.createCipheriv=aes.createCipheriv
exports.Decipher=aes.Decipher
exports.createDecipher=aes.createDecipher
exports.Decipheriv=aes.Decipheriv
exports.createDecipheriv=aes.createDecipheriv
exports.getCiphers=aes.getCiphers
exports.listCiphers=aes.listCiphers
var dh=__webpack_require__(683)
exports.DiffieHellmanGroup=dh.DiffieHellmanGroup
exports.createDiffieHellmanGroup=dh.createDiffieHellmanGroup
exports.getDiffieHellman=dh.getDiffieHellman
exports.createDiffieHellman=dh.createDiffieHellman
exports.DiffieHellman=dh.DiffieHellman
var sign=__webpack_require__(688)
exports.createSign=sign.createSign
exports.Sign=sign.Sign
exports.createVerify=sign.createVerify
exports.Verify=sign.Verify
exports.createECDH=__webpack_require__(725)
var publicEncrypt=__webpack_require__(726)
exports.publicEncrypt=publicEncrypt.publicEncrypt
exports.privateEncrypt=publicEncrypt.privateEncrypt
exports.publicDecrypt=publicEncrypt.publicDecrypt
exports.privateDecrypt=publicEncrypt.privateDecrypt
var rf=__webpack_require__(729)
exports.randomFill=rf.randomFill
exports.randomFillSync=rf.randomFillSync
exports.createCredentials=function(){throw new Error(['sorry, createCredentials is not implemented yet','we accept pull requests','https://github.com/crypto-browserify/crypto-browserify'].join('\n'))}
exports.constants={'DH_CHECK_P_NOT_SAFE_PRIME':2,'DH_CHECK_P_NOT_PRIME':1,'DH_UNABLE_TO_CHECK_GENERATOR':4,'DH_NOT_SUITABLE_GENERATOR':8,'NPN_ENABLED':1,'ALPN_ENABLED':1,'RSA_PKCS1_PADDING':1,'RSA_SSLV23_PADDING':2,'RSA_NO_PADDING':3,'RSA_PKCS1_OAEP_PADDING':4,'RSA_X931_PADDING':5,'RSA_PKCS1_PSS_PADDING':6,'POINT_CONVERSION_COMPRESSED':2,'POINT_CONVERSION_UNCOMPRESSED':4,'POINT_CONVERSION_HYBRID':6}}),(function(module,exports,__webpack_require__){(function(global,process){var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){var objects=[];for(var i=0;i<arguments.length;i++){objects.push(inspect(arguments[i]));}
return objects.join(' ');}
var i=1;var args=arguments;var len=args.length;var str=String(f).replace(formatRegExp,function(x){if(x==='%%')return '%';if(i>=len)return x;switch(x){case '%s':return String(args[i++]);case '%d':return Number(args[i++]);case '%j':try{return JSON.stringify(args[i++]);}catch(_){return '[Circular]';}
default:return x;}});for(var x=args[i];i<len;x=args[++i]){if(isNull(x)||!isObject(x)){str+=' '+x;}else{str+=' '+inspect(x);}}
return str;};exports.deprecate=function(fn,msg){if(isUndefined(global.process)){return function(){return exports.deprecate(fn,msg).apply(this,arguments);};}
if(process.noDeprecation===true){return fn;}
var warned=false;function deprecated(){if(!warned){if(process.throwDeprecation){throw new Error(msg);}else if(process.traceDeprecation){console.trace(msg);}else{console.error(msg);}
warned=true;}
return fn.apply(this,arguments);}
return deprecated;};var debugs={};var debugEnviron;exports.debuglog=function(set){if(isUndefined(debugEnviron))
debugEnviron=Object({"MINING_POOL_STATUS":undefined}).NODE_DEBUG||'';set=set.toUpperCase();if(!debugs[set]){if(new RegExp('\\b'+set+'\\b','i').test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error('%s %d: %s',set,pid,msg);};}else{debugs[set]=function(){};}}
return debugs[set];};function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};if(arguments.length>=3)ctx.depth=arguments[2];if(arguments.length>=4)ctx.colors=arguments[3];if(isBoolean(opts)){ctx.showHidden=opts;}else if(opts){exports._extend(ctx,opts);}
if(isUndefined(ctx.showHidden))ctx.showHidden=false;if(isUndefined(ctx.depth))ctx.depth=2;if(isUndefined(ctx.colors))ctx.colors=false;if(isUndefined(ctx.customInspect))ctx.customInspect=true;if(ctx.colors)ctx.stylize=stylizeWithColor;return formatValue(ctx,obj,ctx.depth);}
exports.inspect=inspect;inspect.colors={'bold':[1,22],'italic':[3,23],'underline':[4,24],'inverse':[7,27],'white':[37,39],'grey':[90,39],'black':[30,39],'blue':[34,39],'cyan':[36,39],'green':[32,39],'magenta':[35,39],'red':[31,39],'yellow':[33,39]};inspect.styles={'special':'cyan','number':'yellow','boolean':'yellow','undefined':'grey','null':'bold','string':'green','date':'magenta','regexp':'red'};function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];if(style){return '\u001b['+inspect.colors[style][0]+'m'+str+
'\u001b['+inspect.colors[style][1]+'m';}else{return str;}}
function stylizeNoColor(str,styleType){return str;}
function arrayToHash(array){var hash={};array.forEach(function(val,idx){hash[val]=true;});return hash;}
function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&!(value.constructor&&value.constructor.prototype===value)){var ret=value.inspect(recurseTimes,ctx);if(!isString(ret)){ret=formatValue(ctx,ret,recurseTimes);}
return ret;}
var primitive=formatPrimitive(ctx,value);if(primitive){return primitive;}
var keys=Object.keys(value);var visibleKeys=arrayToHash(keys);if(ctx.showHidden){keys=Object.getOwnPropertyNames(value);}
if(isError(value)&&(keys.indexOf('message')>=0||keys.indexOf('description')>=0)){return formatError(value);}
if(keys.length===0){if(isFunction(value)){var name=value.name?': '+value.name:'';return ctx.stylize('[Function'+name+']','special');}
if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),'regexp');}
if(isDate(value)){return ctx.stylize(Date.prototype.toString.call(value),'date');}
if(isError(value)){return formatError(value);}}
var base='',array=false,braces=['{','}'];if(isArray(value)){array=true;braces=['[',']'];}
if(isFunction(value)){var n=value.name?': '+value.name:'';base=' [Function'+n+']';}
if(isRegExp(value)){base=' '+RegExp.prototype.toString.call(value);}
if(isDate(value)){base=' '+Date.prototype.toUTCString.call(value);}
if(isError(value)){base=' '+formatError(value);}
if(keys.length===0&&(!array||value.length==0)){return braces[0]+base+braces[1];}
if(recurseTimes<0){if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),'regexp');}else{return ctx.stylize('[Object]','special');}}
ctx.seen.push(value);var output;if(array){output=formatArray(ctx,value,recurseTimes,visibleKeys,keys);}else{output=keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array);});}
ctx.seen.pop();return reduceToSingleString(output,base,braces);}
function formatPrimitive(ctx,value){if(isUndefined(value))
return ctx.stylize('undefined','undefined');if(isString(value)){var simple='\''+JSON.stringify(value).replace(/^"|"$/g,'').replace(/'/g,"\\'").replace(/\\"/g,'"')+'\'';return ctx.stylize(simple,'string');}
if(isNumber(value))
return ctx.stylize(''+value,'number');if(isBoolean(value))
return ctx.stylize(''+value,'boolean');if(isNull(value))
return ctx.stylize('null','null');}
function formatError(value){return '['+Error.prototype.toString.call(value)+']';}
function formatArray(ctx,value,recurseTimes,visibleKeys,keys){var output=[];for(var i=0,l=value.length;i<l;++i){if(hasOwnProperty(value,String(i))){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),true));}else{output.push('');}}
keys.forEach(function(key){if(!key.match(/^\d+$/)){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,true));}});return output;}
function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]};if(desc.get){if(desc.set){str=ctx.stylize('[Getter/Setter]','special');}else{str=ctx.stylize('[Getter]','special');}}else{if(desc.set){str=ctx.stylize('[Setter]','special');}}
if(!hasOwnProperty(visibleKeys,key)){name='['+key+']';}
if(!str){if(ctx.seen.indexOf(desc.value)<0){if(isNull(recurseTimes)){str=formatValue(ctx,desc.value,null);}else{str=formatValue(ctx,desc.value,recurseTimes-1);}
if(str.indexOf('\n')>-1){if(array){str=str.split('\n').map(function(line){return '  '+line;}).join('\n').substr(2);}else{str='\n'+str.split('\n').map(function(line){return '   '+line;}).join('\n');}}}else{str=ctx.stylize('[Circular]','special');}}
if(isUndefined(name)){if(array&&key.match(/^\d+$/)){return str;}
name=JSON.stringify(''+key);if(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){name=name.substr(1,name.length-2);name=ctx.stylize(name,'name');}else{name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");name=ctx.stylize(name,'string');}}
return name+': '+str;}
function reduceToSingleString(output,base,braces){var numLinesEst=0;var length=output.reduce(function(prev,cur){numLinesEst++;if(cur.indexOf('\n')>=0)numLinesEst++;return prev+cur.replace(/\u001b\[\d\d?m/g,'').length+1;},0);if(length>60){return braces[0]+
(base===''?'':base+'\n ')+
' '+
output.join(',\n  ')+
' '+
braces[1];}
return braces[0]+base+' '+output.join(', ')+' '+braces[1];}
function isArray(ar){return Array.isArray(ar);}
exports.isArray=isArray;function isBoolean(arg){return typeof arg==='boolean';}
exports.isBoolean=isBoolean;function isNull(arg){return arg===null;}
exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null;}
exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==='number';}
exports.isNumber=isNumber;function isString(arg){return typeof arg==='string';}
exports.isString=isString;function isSymbol(arg){return typeof arg==='symbol';}
exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0;}
exports.isUndefined=isUndefined;function isRegExp(re){return isObject(re)&&objectToString(re)==='[object RegExp]';}
exports.isRegExp=isRegExp;function isObject(arg){return typeof arg==='object'&&arg!==null;}
exports.isObject=isObject;function isDate(d){return isObject(d)&&objectToString(d)==='[object Date]';}
exports.isDate=isDate;function isError(e){return isObject(e)&&(objectToString(e)==='[object Error]'||e instanceof Error);}
exports.isError=isError;function isFunction(arg){return typeof arg==='function';}
exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==='boolean'||typeof arg==='number'||typeof arg==='string'||typeof arg==='symbol'||typeof arg==='undefined';}
exports.isPrimitive=isPrimitive;exports.isBuffer=__webpack_require__(777);function objectToString(o){return Object.prototype.toString.call(o);}
function pad(n){return n<10?'0'+n.toString(10):n.toString(10);}
var months=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];function timestamp(){var d=new Date();var time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(':');return[d.getDate(),months[d.getMonth()],time].join(' ');}
exports.log=function(){console.log('%s - %s',timestamp(),exports.format.apply(exports,arguments));};exports.inherits=__webpack_require__(7);exports._extend=function(origin,add){if(!add||!isObject(add))return origin;var keys=Object.keys(add);var i=keys.length;while(i--){origin[keys[i]]=add[keys[i]];}
return origin;};function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop);}}.call(exports,__webpack_require__(10),__webpack_require__(20)))}),(function(module,exports,__webpack_require__){module.exports=!__webpack_require__(13)(function(){return Object.defineProperty({},'a',{get:function(){return 7;}}).a!=7;});}),(function(module,exports,__webpack_require__){var anObject=__webpack_require__(8);var IE8_DOM_DEFINE=__webpack_require__(269);var toPrimitive=__webpack_require__(63);var dP=Object.defineProperty;exports.f=__webpack_require__(26)?Object.defineProperty:function defineProperty(O,P,Attributes){anObject(O);P=toPrimitive(P,true);anObject(Attributes);if(IE8_DOM_DEFINE)try{return dP(O,P,Attributes);}catch(e){}
if('get'in Attributes||'set'in Attributes)throw TypeError('Accessors not supported!');if('value'in Attributes)O[P]=Attributes.value;return O;};}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_crypto_Argon2_Argon2__=__webpack_require__(646);let crypto=(true)?__webpack_require__(24):require('crypto');class WebDollarCrypto{static encodeBase64(buffer){if(!Buffer.isBuffer(buffer))
buffer=new Buffer(buffer);let result=buffer.toString('base64');let newStr='';for(let i=0;i<result.length;i++){if(result[i]==='O')newStr+='#';else
if(result[i]==='l')newStr+='@';else
if(result[i]==='/')newStr+='$';else newStr+=result[i];}
return newStr;}
static decodeBase64(str){if(typeof str!=="string")throw{message:"input is not string for base decoding",str:str};let newStr='';for(let i=0;i<str.length;i++){if(str[i]==='#')newStr+='O';else
if(str[i]==='@')newStr+='l';else
if(str[i]==='$')newStr+='/';else newStr+=str[i];}
let result=new Buffer(newStr,'base64');return result;}
static getBufferRandomValues(count){if(count===undefined)
count=32;let randArr=new Buffer(count);const getRandomValues=__webpack_require__(738);getRandomValues(randArr);return randArr;}
static bytesToHex(bytes){let result='';for(let i=0;i<bytes.length;i++){let hex=bytes[i].toString(16);result+=(hex.length===1?'0':'')+hex;}
return result;}
static isHex(h){let a=parseInt(h,16);return(a.toString(16)===h.toLowerCase());}
static SHA256(bytes){let sha256=crypto.createHash('sha256');sha256.update(bytes);return sha256.digest();}
static encryptAES(buffer,password){if(!Buffer.isBuffer(buffer))
throw{message:"buffer argument is not a buffer"};try{let cipher=crypto.createCipher('aes-256-cbc',password);let crypted=Buffer.concat([cipher.update(buffer),cipher.final()]);return Buffer.from(crypted);}
catch(exception){return null;}}
static decryptAES(buffer,password){if(!Buffer.isBuffer(buffer))
throw{message:"buffer argument is not a buffer"};try{let decipher=crypto.createDecipher('aes-256-cbc',password);let decrypt=Buffer.concat([decipher.update(buffer),decipher.final()]);return Buffer.from(decrypt);}
catch(exception){console.log(exception);return null;}}
static RIPEMD160(bytes){let ripemd160=crypto.createHash('ripemd160');ripemd160.update(bytes);return ripemd160.digest();}
static MD5(bytes){let md5=crypto.createHash('md5');md5.update(bytes);return md5.digest();}
static MD512(bytes){let md512=crypto.createHash('md512');md512.update(bytes);return md512.digest();}
static hashPOW(data){return __WEBPACK_IMPORTED_MODULE_0_common_crypto_Argon2_Argon2__["a"].hash(data);}
static hashPOW_String(data){return __WEBPACK_IMPORTED_MODULE_0_common_crypto_Argon2_Argon2__["a"].hashString(data);}
static verifyHashPOW(hash,data){return __WEBPACK_IMPORTED_MODULE_0_common_crypto_Argon2_Argon2__["a"].verify(hash,data);}}
__webpack_exports__["a"]=(WebDollarCrypto);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){(function(module){(function(module,exports){'use strict';function assert(val,msg){if(!val)throw new Error(msg||'Assertion failed');}
function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor();ctor.prototype.constructor=ctor;}
function BN(number,base,endian){if(BN.isBN(number)){return number;}
this.negative=0;this.words=null;this.length=0;this.red=null;if(number!==null){if(base==='le'||base==='be'){endian=base;base=10;}
this._init(number||0,base||10,endian||'be');}}
if(typeof module==='object'){module.exports=BN;}else{exports.BN=BN;}
BN.BN=BN;BN.wordSize=26;var Buffer;try{Buffer=__webpack_require__(684).Buffer;}catch(e){}
BN.isBN=function isBN(num){if(num instanceof BN){return true;}
return num!==null&&typeof num==='object'&&num.constructor.wordSize===BN.wordSize&&Array.isArray(num.words);};BN.max=function max(left,right){if(left.cmp(right)>0)return left;return right;};BN.min=function min(left,right){if(left.cmp(right)<0)return left;return right;};BN.prototype._init=function init(number,base,endian){if(typeof number==='number'){return this._initNumber(number,base,endian);}
if(typeof number==='object'){return this._initArray(number,base,endian);}
if(base==='hex'){base=16;}
assert(base===(base|0)&&base>=2&&base<=36);number=number.toString().replace(/\s+/g,'');var start=0;if(number[0]==='-'){start++;}
if(base===16){this._parseHex(number,start);}else{this._parseBase(number,base,start);}
if(number[0]==='-'){this.negative=1;}
this.strip();if(endian!=='le')return;this._initArray(this.toArray(),base,endian);};BN.prototype._initNumber=function _initNumber(number,base,endian){if(number<0){this.negative=1;number=-number;}
if(number<0x4000000){this.words=[number&0x3ffffff];this.length=1;}else if(number<0x10000000000000){this.words=[number&0x3ffffff,(number/0x4000000)&0x3ffffff];this.length=2;}else{assert(number<0x20000000000000);this.words=[number&0x3ffffff,(number/0x4000000)&0x3ffffff,1];this.length=3;}
if(endian!=='le')return;this._initArray(this.toArray(),base,endian);};BN.prototype._initArray=function _initArray(number,base,endian){assert(typeof number.length==='number');if(number.length<=0){this.words=[0];this.length=1;return this;}
this.length=Math.ceil(number.length/3);this.words=new Array(this.length);for(var i=0;i<this.length;i++){this.words[i]=0;}
var j,w;var off=0;if(endian==='be'){for(i=number.length-1,j=0;i>=0;i-=3){w=number[i]|(number[i-1]<<8)|(number[i-2]<<16);this.words[j]|=(w<<off)&0x3ffffff;this.words[j+1]=(w>>>(26-off))&0x3ffffff;off+=24;if(off>=26){off-=26;j++;}}}else if(endian==='le'){for(i=0,j=0;i<number.length;i+=3){w=number[i]|(number[i+1]<<8)|(number[i+2]<<16);this.words[j]|=(w<<off)&0x3ffffff;this.words[j+1]=(w>>>(26-off))&0x3ffffff;off+=24;if(off>=26){off-=26;j++;}}}
return this.strip();};function parseHex(str,start,end){var r=0;var len=Math.min(str.length,end);for(var i=start;i<len;i++){var c=str.charCodeAt(i)-48;r<<=4;if(c>=49&&c<=54){r|=c-49+0xa;}else if(c>=17&&c<=22){r|=c-17+0xa;}else{r|=c&0xf;}}
return r;}
BN.prototype._parseHex=function _parseHex(number,start){this.length=Math.ceil((number.length-start)/6);this.words=new Array(this.length);for(var i=0;i<this.length;i++){this.words[i]=0;}
var j,w;var off=0;for(i=number.length-6,j=0;i>=start;i-=6){w=parseHex(number,i,i+6);this.words[j]|=(w<<off)&0x3ffffff;this.words[j+1]|=w>>>(26-off)&0x3fffff;off+=24;if(off>=26){off-=26;j++;}}
if(i+6!==start){w=parseHex(number,start,i+6);this.words[j]|=(w<<off)&0x3ffffff;this.words[j+1]|=w>>>(26-off)&0x3fffff;}
this.strip();};function parseBase(str,start,end,mul){var r=0;var len=Math.min(str.length,end);for(var i=start;i<len;i++){var c=str.charCodeAt(i)-48;r*=mul;if(c>=49){r+=c-49+0xa;}else if(c>=17){r+=c-17+0xa;}else{r+=c;}}
return r;}
BN.prototype._parseBase=function _parseBase(number,base,start){this.words=[0];this.length=1;for(var limbLen=0,limbPow=1;limbPow<=0x3ffffff;limbPow*=base){limbLen++;}
limbLen--;limbPow=(limbPow/base)|0;var total=number.length-start;var mod=total%limbLen;var end=Math.min(total,total-mod)+start;var word=0;for(var i=start;i<end;i+=limbLen){word=parseBase(number,i,i+limbLen,base);this.imuln(limbPow);if(this.words[0]+word<0x4000000){this.words[0]+=word;}else{this._iaddn(word);}}
if(mod!==0){var pow=1;word=parseBase(number,i,number.length,base);for(i=0;i<mod;i++){pow*=base;}
this.imuln(pow);if(this.words[0]+word<0x4000000){this.words[0]+=word;}else{this._iaddn(word);}}};BN.prototype.copy=function copy(dest){dest.words=new Array(this.length);for(var i=0;i<this.length;i++){dest.words[i]=this.words[i];}
dest.length=this.length;dest.negative=this.negative;dest.red=this.red;};BN.prototype.clone=function clone(){var r=new BN(null);this.copy(r);return r;};BN.prototype._expand=function _expand(size){while(this.length<size){this.words[this.length++]=0;}
return this;};BN.prototype.strip=function strip(){while(this.length>1&&this.words[this.length-1]===0){this.length--;}
return this._normSign();};BN.prototype._normSign=function _normSign(){if(this.length===1&&this.words[0]===0){this.negative=0;}
return this;};BN.prototype.inspect=function inspect(){return(this.red?'<BN-R: ':'<BN: ')+this.toString(16)+'>';};var zeros=['','0','00','000','0000','00000','000000','0000000','00000000','000000000','0000000000','00000000000','000000000000','0000000000000','00000000000000','000000000000000','0000000000000000','00000000000000000','000000000000000000','0000000000000000000','00000000000000000000','000000000000000000000','0000000000000000000000','00000000000000000000000','000000000000000000000000','0000000000000000000000000'];var groupSizes=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5];var groupBases=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,10000000,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];BN.prototype.toString=function toString(base,padding){base=base||10;padding=padding|0||1;var out;if(base===16||base==='hex'){out='';var off=0;var carry=0;for(var i=0;i<this.length;i++){var w=this.words[i];var word=(((w<<off)|carry)&0xffffff).toString(16);carry=(w>>>(24-off))&0xffffff;if(carry!==0||i!==this.length-1){out=zeros[6-word.length]+word+out;}else{out=word+out;}
off+=2;if(off>=26){off-=26;i--;}}
if(carry!==0){out=carry.toString(16)+out;}
while(out.length%padding!==0){out='0'+out;}
if(this.negative!==0){out='-'+out;}
return out;}
if(base===(base|0)&&base>=2&&base<=36){var groupSize=groupSizes[base];var groupBase=groupBases[base];out='';var c=this.clone();c.negative=0;while(!c.isZero()){var r=c.modn(groupBase).toString(base);c=c.idivn(groupBase);if(!c.isZero()){out=zeros[groupSize-r.length]+r+out;}else{out=r+out;}}
if(this.isZero()){out='0'+out;}
while(out.length%padding!==0){out='0'+out;}
if(this.negative!==0){out='-'+out;}
return out;}
assert(false,'Base should be between 2 and 36');};BN.prototype.toNumber=function toNumber(){var ret=this.words[0];if(this.length===2){ret+=this.words[1]*0x4000000;}else if(this.length===3&&this.words[2]===0x01){ret+=0x10000000000000+(this.words[1]*0x4000000);}else if(this.length>2){assert(false,'Number can only safely store up to 53 bits');}
return(this.negative!==0)?-ret:ret;};BN.prototype.toJSON=function toJSON(){return this.toString(16);};BN.prototype.toBuffer=function toBuffer(endian,length){assert(typeof Buffer!=='undefined');return this.toArrayLike(Buffer,endian,length);};BN.prototype.toArray=function toArray(endian,length){return this.toArrayLike(Array,endian,length);};BN.prototype.toArrayLike=function toArrayLike(ArrayType,endian,length){var byteLength=this.byteLength();var reqLength=length||Math.max(1,byteLength);assert(byteLength<=reqLength,'byte array longer than desired length');assert(reqLength>0,'Requested array length <= 0');this.strip();var littleEndian=endian==='le';var res=new ArrayType(reqLength);var b,i;var q=this.clone();if(!littleEndian){for(i=0;i<reqLength-byteLength;i++){res[i]=0;}
for(i=0;!q.isZero();i++){b=q.andln(0xff);q.iushrn(8);res[reqLength-i-1]=b;}}else{for(i=0;!q.isZero();i++){b=q.andln(0xff);q.iushrn(8);res[i]=b;}
for(;i<reqLength;i++){res[i]=0;}}
return res;};if(Math.clz32){BN.prototype._countBits=function _countBits(w){return 32-Math.clz32(w);};}else{BN.prototype._countBits=function _countBits(w){var t=w;var r=0;if(t>=0x1000){r+=13;t>>>=13;}
if(t>=0x40){r+=7;t>>>=7;}
if(t>=0x8){r+=4;t>>>=4;}
if(t>=0x02){r+=2;t>>>=2;}
return r+t;};}
BN.prototype._zeroBits=function _zeroBits(w){if(w===0)return 26;var t=w;var r=0;if((t&0x1fff)===0){r+=13;t>>>=13;}
if((t&0x7f)===0){r+=7;t>>>=7;}
if((t&0xf)===0){r+=4;t>>>=4;}
if((t&0x3)===0){r+=2;t>>>=2;}
if((t&0x1)===0){r++;}
return r;};BN.prototype.bitLength=function bitLength(){var w=this.words[this.length-1];var hi=this._countBits(w);return(this.length-1)*26+hi;};function toBitArray(num){var w=new Array(num.bitLength());for(var bit=0;bit<w.length;bit++){var off=(bit/26)|0;var wbit=bit%26;w[bit]=(num.words[off]&(1<<wbit))>>>wbit;}
return w;}
BN.prototype.zeroBits=function zeroBits(){if(this.isZero())return 0;var r=0;for(var i=0;i<this.length;i++){var b=this._zeroBits(this.words[i]);r+=b;if(b!==26)break;}
return r;};BN.prototype.byteLength=function byteLength(){return Math.ceil(this.bitLength()/8);};BN.prototype.toTwos=function toTwos(width){if(this.negative!==0){return this.abs().inotn(width).iaddn(1);}
return this.clone();};BN.prototype.fromTwos=function fromTwos(width){if(this.testn(width-1)){return this.notn(width).iaddn(1).ineg();}
return this.clone();};BN.prototype.isNeg=function isNeg(){return this.negative!==0;};BN.prototype.neg=function neg(){return this.clone().ineg();};BN.prototype.ineg=function ineg(){if(!this.isZero()){this.negative^=1;}
return this;};BN.prototype.iuor=function iuor(num){while(this.length<num.length){this.words[this.length++]=0;}
for(var i=0;i<num.length;i++){this.words[i]=this.words[i]|num.words[i];}
return this.strip();};BN.prototype.ior=function ior(num){assert((this.negative|num.negative)===0);return this.iuor(num);};BN.prototype.or=function or(num){if(this.length>num.length)return this.clone().ior(num);return num.clone().ior(this);};BN.prototype.uor=function uor(num){if(this.length>num.length)return this.clone().iuor(num);return num.clone().iuor(this);};BN.prototype.iuand=function iuand(num){var b;if(this.length>num.length){b=num;}else{b=this;}
for(var i=0;i<b.length;i++){this.words[i]=this.words[i]&num.words[i];}
this.length=b.length;return this.strip();};BN.prototype.iand=function iand(num){assert((this.negative|num.negative)===0);return this.iuand(num);};BN.prototype.and=function and(num){if(this.length>num.length)return this.clone().iand(num);return num.clone().iand(this);};BN.prototype.uand=function uand(num){if(this.length>num.length)return this.clone().iuand(num);return num.clone().iuand(this);};BN.prototype.iuxor=function iuxor(num){var a;var b;if(this.length>num.length){a=this;b=num;}else{a=num;b=this;}
for(var i=0;i<b.length;i++){this.words[i]=a.words[i]^b.words[i];}
if(this!==a){for(;i<a.length;i++){this.words[i]=a.words[i];}}
this.length=a.length;return this.strip();};BN.prototype.ixor=function ixor(num){assert((this.negative|num.negative)===0);return this.iuxor(num);};BN.prototype.xor=function xor(num){if(this.length>num.length)return this.clone().ixor(num);return num.clone().ixor(this);};BN.prototype.uxor=function uxor(num){if(this.length>num.length)return this.clone().iuxor(num);return num.clone().iuxor(this);};BN.prototype.inotn=function inotn(width){assert(typeof width==='number'&&width>=0);var bytesNeeded=Math.ceil(width/26)|0;var bitsLeft=width%26;this._expand(bytesNeeded);if(bitsLeft>0){bytesNeeded--;}
for(var i=0;i<bytesNeeded;i++){this.words[i]=~this.words[i]&0x3ffffff;}
if(bitsLeft>0){this.words[i]=~this.words[i]&(0x3ffffff>>(26-bitsLeft));}
return this.strip();};BN.prototype.notn=function notn(width){return this.clone().inotn(width);};BN.prototype.setn=function setn(bit,val){assert(typeof bit==='number'&&bit>=0);var off=(bit/26)|0;var wbit=bit%26;this._expand(off+1);if(val){this.words[off]=this.words[off]|(1<<wbit);}else{this.words[off]=this.words[off]&~(1<<wbit);}
return this.strip();};BN.prototype.iadd=function iadd(num){var r;if(this.negative!==0&&num.negative===0){this.negative=0;r=this.isub(num);this.negative^=1;return this._normSign();}else if(this.negative===0&&num.negative!==0){num.negative=0;r=this.isub(num);num.negative=1;return r._normSign();}
var a,b;if(this.length>num.length){a=this;b=num;}else{a=num;b=this;}
var carry=0;for(var i=0;i<b.length;i++){r=(a.words[i]|0)+(b.words[i]|0)+carry;this.words[i]=r&0x3ffffff;carry=r>>>26;}
for(;carry!==0&&i<a.length;i++){r=(a.words[i]|0)+carry;this.words[i]=r&0x3ffffff;carry=r>>>26;}
this.length=a.length;if(carry!==0){this.words[this.length]=carry;this.length++;}else if(a!==this){for(;i<a.length;i++){this.words[i]=a.words[i];}}
return this;};BN.prototype.add=function add(num){var res;if(num.negative!==0&&this.negative===0){num.negative=0;res=this.sub(num);num.negative^=1;return res;}else if(num.negative===0&&this.negative!==0){this.negative=0;res=num.sub(this);this.negative=1;return res;}
if(this.length>num.length)return this.clone().iadd(num);return num.clone().iadd(this);};BN.prototype.isub=function isub(num){if(num.negative!==0){num.negative=0;var r=this.iadd(num);num.negative=1;return r._normSign();}else if(this.negative!==0){this.negative=0;this.iadd(num);this.negative=1;return this._normSign();}
var cmp=this.cmp(num);if(cmp===0){this.negative=0;this.length=1;this.words[0]=0;return this;}
var a,b;if(cmp>0){a=this;b=num;}else{a=num;b=this;}
var carry=0;for(var i=0;i<b.length;i++){r=(a.words[i]|0)-(b.words[i]|0)+carry;carry=r>>26;this.words[i]=r&0x3ffffff;}
for(;carry!==0&&i<a.length;i++){r=(a.words[i]|0)+carry;carry=r>>26;this.words[i]=r&0x3ffffff;}
if(carry===0&&i<a.length&&a!==this){for(;i<a.length;i++){this.words[i]=a.words[i];}}
this.length=Math.max(this.length,i);if(a!==this){this.negative=1;}
return this.strip();};BN.prototype.sub=function sub(num){return this.clone().isub(num);};function smallMulTo(self,num,out){out.negative=num.negative^self.negative;var len=(self.length+num.length)|0;out.length=len;len=(len-1)|0;var a=self.words[0]|0;var b=num.words[0]|0;var r=a*b;var lo=r&0x3ffffff;var carry=(r/0x4000000)|0;out.words[0]=lo;for(var k=1;k<len;k++){var ncarry=carry>>>26;var rword=carry&0x3ffffff;var maxJ=Math.min(k,num.length-1);for(var j=Math.max(0,k-self.length+1);j<=maxJ;j++){var i=(k-j)|0;a=self.words[i]|0;b=num.words[j]|0;r=a*b+rword;ncarry+=(r/0x4000000)|0;rword=r&0x3ffffff;}
out.words[k]=rword|0;carry=ncarry|0;}
if(carry!==0){out.words[k]=carry|0;}else{out.length--;}
return out.strip();}
var comb10MulTo=function comb10MulTo(self,num,out){var a=self.words;var b=num.words;var o=out.words;var c=0;var lo;var mid;var hi;var a0=a[0]|0;var al0=a0&0x1fff;var ah0=a0>>>13;var a1=a[1]|0;var al1=a1&0x1fff;var ah1=a1>>>13;var a2=a[2]|0;var al2=a2&0x1fff;var ah2=a2>>>13;var a3=a[3]|0;var al3=a3&0x1fff;var ah3=a3>>>13;var a4=a[4]|0;var al4=a4&0x1fff;var ah4=a4>>>13;var a5=a[5]|0;var al5=a5&0x1fff;var ah5=a5>>>13;var a6=a[6]|0;var al6=a6&0x1fff;var ah6=a6>>>13;var a7=a[7]|0;var al7=a7&0x1fff;var ah7=a7>>>13;var a8=a[8]|0;var al8=a8&0x1fff;var ah8=a8>>>13;var a9=a[9]|0;var al9=a9&0x1fff;var ah9=a9>>>13;var b0=b[0]|0;var bl0=b0&0x1fff;var bh0=b0>>>13;var b1=b[1]|0;var bl1=b1&0x1fff;var bh1=b1>>>13;var b2=b[2]|0;var bl2=b2&0x1fff;var bh2=b2>>>13;var b3=b[3]|0;var bl3=b3&0x1fff;var bh3=b3>>>13;var b4=b[4]|0;var bl4=b4&0x1fff;var bh4=b4>>>13;var b5=b[5]|0;var bl5=b5&0x1fff;var bh5=b5>>>13;var b6=b[6]|0;var bl6=b6&0x1fff;var bh6=b6>>>13;var b7=b[7]|0;var bl7=b7&0x1fff;var bh7=b7>>>13;var b8=b[8]|0;var bl8=b8&0x1fff;var bh8=b8>>>13;var b9=b[9]|0;var bl9=b9&0x1fff;var bh9=b9>>>13;out.negative=self.negative^num.negative;out.length=19;lo=Math.imul(al0,bl0);mid=Math.imul(al0,bh0);mid=(mid+Math.imul(ah0,bl0))|0;hi=Math.imul(ah0,bh0);var w0=(((c+lo)|0)+((mid&0x1fff)<<13))|0;c=(((hi+(mid>>>13))|0)+(w0>>>26))|0;w0&=0x3ffffff;lo=Math.imul(al1,bl0);mid=Math.imul(al1,bh0);mid=(mid+Math.imul(ah1,bl0))|0;hi=Math.imul(ah1,bh0);lo=(lo+Math.imul(al0,bl1))|0;mid=(mid+Math.imul(al0,bh1))|0;mid=(mid+Math.imul(ah0,bl1))|0;hi=(hi+Math.imul(ah0,bh1))|0;var w1=(((c+lo)|0)+((mid&0x1fff)<<13))|0;c=(((hi+(mid>>>13))|0)+(w1>>>26))|0;w1&=0x3ffffff;lo=Math.imul(al2,bl0);mid=Math.imul(al2,bh0);mid=(mid+Math.imul(ah2,bl0))|0;hi=Math.imul(ah2,bh0);lo=(lo+Math.imul(al1,bl1))|0;mid=(mid+Math.imul(al1,bh1))|0;mid=(mid+Math.imul(ah1,bl1))|0;hi=(hi+Math.imul(ah1,bh1))|0;lo=(lo+Math.imul(al0,bl2))|0;mid=(mid+Math.imul(al0,bh2))|0;mid=(mid+Math.imul(ah0,bl2))|0;hi=(hi+Math.imul(ah0,bh2))|0;var w2=(((c+lo)|0)+((mid&0x1fff)<<13))|0;c=(((hi+(mid>>>13))|0)+(w2>>>26))|0;w2&=0x3ffffff;lo=Math.imul(al3,bl0);mid=Math.imul(al3,bh0);mid=(mid+Math.imul(ah3,bl0))|0;hi=Math.imul(ah3,bh0);lo=(lo+Math.imul(al2,bl1))|0;mid=(mid+Math.imul(al2,bh1))|0;mid=(mid+Math.imul(ah2,bl1))|0;hi=(hi+Math.imul(ah2,bh1))|0;lo=(lo+Math.imul(al1,bl2))|0;mid=(mid+Math.imul(al1,bh2))|0;mid=(mid+Math.imul(ah1,bl2))|0;hi=(hi+Math.imul(ah1,bh2))|0;lo=(lo+Math.imul(al0,bl3))|0;mid=(mid+Math.imul(al0,bh3))|0;mid=(mid+Math.imul(ah0,bl3))|0;hi=(hi+Math.imul(ah0,bh3))|0;var w3=(((c+lo)|0)+((mid&0x1fff)<<13))|0;c=(((hi+(mid>>>13))|0)+(w3>>>26))|0;w3&=0x3ffffff;lo=Math.imul(al4,bl0);mid=Math.imul(al4,bh0);mid=(mid+Math.imul(ah4,bl0))|0;hi=Math.imul(ah4,bh0);lo=(lo+Math.imul(al3,bl1))|0;mid=(mid+Math.imul(al3,bh1))|0;mid=(mid+Math.imul(ah3,bl1))|0;hi=(hi+Math.imul(ah3,bh1))|0;lo=(lo+Math.imul(al2,bl2))|0;mid=(mid+Math.imul(al2,bh2))|0;mid=(mid+Math.imul(ah2,bl2))|0;hi=(hi+Math.imul(ah2,bh2))|0;lo=(lo+Math.imul(al1,bl3))|0;mid=(mid+Math.imul(al1,bh3))|0;mid=(mid+Math.imul(ah1,bl3))|0;hi=(hi+Math.imul(ah1,bh3))|0;lo=(lo+Math.imul(al0,bl4))|0;mid=(mid+Math.imul(al0,bh4))|0;mid=(mid+Math.imul(ah0,bl4))|0;hi=(hi+Math.imul(ah0,bh4))|0;var w4=(((c+lo)|0)+((mid&0x1fff)<<13))|0;c=(((hi+(mid>>>13))|0)+(w4>>>26))|0;w4&=0x3ffffff;lo=Math.imul(al5,bl0);mid=Math.imul(al5,bh0);mid=(mid+Math.imul(ah5,bl0))|0;hi=Math.imul(ah5,bh0);lo=(lo+Math.imul(al4,bl1))|0;mid=(mid+Math.imul(al4,bh1))|0;mid=(mid+Math.imul(ah4,bl1))|0;hi=(hi+Math.imul(ah4,bh1))|0;lo=(lo+Math.imul(al3,bl2))|0;mid=(mid+Math.imul(al3,bh2))|0;mid=(mid+Math.imul(ah3,bl2))|0;hi=(hi+Math.imul(ah3,bh2))|0;lo=(lo+Math.imul(al2,bl3))|0;mid=(mid+Math.imul(al2,bh3))|0;mid=(mid+Math.imul(ah2,bl3))|0;hi=(hi+Math.imul(ah2,bh3))|0;lo=(lo+Math.imul(al1,bl4))|0;mid=(mid+Math.imul(al1,bh4))|0;mid=(mid+Math.imul(ah1,bl4))|0;hi=(hi+Math.imul(ah1,bh4))|0;lo=(lo+Math.imul(al0,bl5))|0;mid=(mid+Math.imul(al0,bh5))|0;mid=(mid+Math.imul(ah0,bl5))|0;hi=(hi+Math.imul(ah0,bh5))|0;var w5=(((c+lo)|0)+((mid&0x1fff)<<13))|0;c=(((hi+(mid>>>13))|0)+(w5>>>26))|0;w5&=0x3ffffff;lo=Math.imul(al6,bl0);mid=Math.imul(al6,bh0);mid=(mid+Math.imul(ah6,bl0))|0;hi=Math.imul(ah6,bh0);lo=(lo+Math.imul(al5,bl1))|0;mid=(mid+Math.imul(al5,bh1))|0;mid=(mid+Math.imul(ah5,bl1))|0;hi=(hi+Math.imul(ah5,bh1))|0;lo=(lo+Math.imul(al4,bl2))|0;mid=(mid+Math.imul(al4,bh2))|0;mid=(mid+Math.imul(ah4,bl2))|0;hi=(hi+Math.imul(ah4,bh2))|0;lo=(lo+Math.imul(al3,bl3))|0;mid=(mid+Math.imul(al3,bh3))|0;mid=(mid+Math.imul(ah3,bl3))|0;hi=(hi+Math.imul(ah3,bh3))|0;lo=(lo+Math.imul(al2,bl4))|0;mid=(mid+Math.imul(al2,bh4))|0;mid=(mid+Math.imul(ah2,bl4))|0;hi=(hi+Math.imul(ah2,bh4))|0;lo=(lo+Math.imul(al1,bl5))|0;mid=(mid+Math.imul(al1,bh5))|0;mid=(mid+Math.imul(ah1,bl5))|0;hi=(hi+Math.imul(ah1,bh5))|0;lo=(lo+Math.imul(al0,bl6))|0;mid=(mid+Math.imul(al0,bh6))|0;mid=(mid+Math.imul(ah0,bl6))|0;hi=(hi+Math.imul(ah0,bh6))|0;var w6=(((c+lo)|0)+((mid&0x1fff)<<13))|0;c=(((hi+(mid>>>13))|0)+(w6>>>26))|0;w6&=0x3ffffff;lo=Math.imul(al7,bl0);mid=Math.imul(al7,bh0);mid=(mid+Math.imul(ah7,bl0))|0;hi=Math.imul(ah7,bh0);lo=(lo+Math.imul(al6,bl1))|0;mid=(mid+Math.imul(al6,bh1))|0;mid=(mid+Math.imul(ah6,bl1))|0;hi=(hi+Math.imul(ah6,bh1))|0;lo=(lo+Math.imul(al5,bl2))|0;mid=(mid+Math.imul(al5,bh2))|0;mid=(mid+Math.imul(ah5,bl2))|0;hi=(hi+Math.imul(ah5,bh2))|0;lo=(lo+Math.imul(al4,bl3))|0;mid=(mid+Math.imul(al4,bh3))|0;mid=(mid+Math.imul(ah4,bl3))|0;hi=(hi+Math.imul(ah4,bh3))|0;lo=(lo+Math.imul(al3,bl4))|0;mid=(mid+Math.imul(al3,bh4))|0;mid=(mid+Math.imul(ah3,bl4))|0;hi=(hi+Math.imul(ah3,bh4))|0;lo=(lo+Math.imul(al2,bl5))|0;mid=(mid+Math.imul(al2,bh5))|0;mid=(mid+Math.imul(ah2,bl5))|0;hi=(hi+Math.imul(ah2,bh5))|0;lo=(lo+Math.imul(al1,bl6))|0;mid=(mid+Math.imul(al1,bh6))|0;mid=(mid+Math.imul(ah1,bl6))|0;hi=(hi+Math.imul(ah1,bh6))|0;lo=(lo+Math.imul(al0,bl7))|0;mid=(mid+Math.imul(al0,bh7))|0;mid=(mid+Math.imul(ah0,bl7))|0;hi=(hi+Math.imul(ah0,bh7))|0;var w7=(((c+lo)|0)+((mid&0x1fff)<<13))|0;c=(((hi+(mid>>>13))|0)+(w7>>>26))|0;w7&=0x3ffffff;lo=Math.imul(al8,bl0);mid=Math.imul(al8,bh0);mid=(mid+Math.imul(ah8,bl0))|0;hi=Math.imul(ah8,bh0);lo=(lo+Math.imul(al7,bl1))|0;mid=(mid+Math.imul(al7,bh1))|0;mid=(mid+Math.imul(ah7,bl1))|0;hi=(hi+Math.imul(ah7,bh1))|0;lo=(lo+Math.imul(al6,bl2))|0;mid=(mid+Math.imul(al6,bh2))|0;mid=(mid+Math.imul(ah6,bl2))|0;hi=(hi+Math.imul(ah6,bh2))|0;lo=(lo+Math.imul(al5,bl3))|0;mid=(mid+Math.imul(al5,bh3))|0;mid=(mid+Math.imul(ah5,bl3))|0;hi=(hi+Math.imul(ah5,bh3))|0;lo=(lo+Math.imul(al4,bl4))|0;mid=(mid+Math.imul(al4,bh4))|0;mid=(mid+Math.imul(ah4,bl4))|0;hi=(hi+Math.imul(ah4,bh4))|0;lo=(lo+Math.imul(al3,bl5))|0;mid=(mid+Math.imul(al3,bh5))|0;mid=(mid+Math.imul(ah3,bl5))|0;hi=(hi+Math.imul(ah3,bh5))|0;lo=(lo+Math.imul(al2,bl6))|0;mid=(mid+Math.imul(al2,bh6))|0;mid=(mid+Math.imul(ah2,bl6))|0;hi=(hi+Math.imul(ah2,bh6))|0;lo=(lo+Math.imul(al1,bl7))|0;mid=(mid+Math.imul(al1,bh7))|0;mid=(mid+Math.imul(ah1,bl7))|0;hi=(hi+Math.imul(ah1,bh7))|0;lo=(lo+Math.imul(al0,bl8))|0;mid=(mid+Math.imul(al0,bh8))|0;mid=(mid+Math.imul(ah0,bl8))|0;hi=(hi+Math.imul(ah0,bh8))|0;var w8=(((c+lo)|0)+((mid&0x1fff)<<13))|0;c=(((hi+(mid>>>13))|0)+(w8>>>26))|0;w8&=0x3ffffff;lo=Math.imul(al9,bl0);mid=Math.imul(al9,bh0);mid=(mid+Math.imul(ah9,bl0))|0;hi=Math.imul(ah9,bh0);lo=(lo+Math.imul(al8,bl1))|0;mid=(mid+Math.imul(al8,bh1))|0;mid=(mid+Math.imul(ah8,bl1))|0;hi=(hi+Math.imul(ah8,bh1))|0;lo=(lo+Math.imul(al7,bl2))|0;mid=(mid+Math.imul(al7,bh2))|0;mid=(mid+Math.imul(ah7,bl2))|0;hi=(hi+Math.imul(ah7,bh2))|0;lo=(lo+Math.imul(al6,bl3))|0;mid=(mid+Math.imul(al6,bh3))|0;mid=(mid+Math.imul(ah6,bl3))|0;hi=(hi+Math.imul(ah6,bh3))|0;lo=(lo+Math.imul(al5,bl4))|0;mid=(mid+Math.imul(al5,bh4))|0;mid=(mid+Math.imul(ah5,bl4))|0;hi=(hi+Math.imul(ah5,bh4))|0;lo=(lo+Math.imul(al4,bl5))|0;mid=(mid+Math.imul(al4,bh5))|0;mid=(mid+Math.imul(ah4,bl5))|0;hi=(hi+Math.imul(ah4,bh5))|0;lo=(lo+Math.imul(al3,bl6))|0;mid=(mid+Math.imul(al3,bh6))|0;mid=(mid+Math.imul(ah3,bl6))|0;hi=(hi+Math.imul(ah3,bh6))|0;lo=(lo+Math.imul(al2,bl7))|0;mid=(mid+Math.imul(al2,bh7))|0;mid=(mid+Math.imul(ah2,bl7))|0;hi=(hi+Math.imul(ah2,bh7))|0;lo=(lo+Math.imul(al1,bl8))|0;mid=(mid+Math.imul(al1,bh8))|0;mid=(mid+Math.imul(ah1,bl8))|0;hi=(hi+Math.imul(ah1,bh8))|0;lo=(lo+Math.imul(al0,bl9))|0;mid=(mid+Math.imul(al0,bh9))|0;mid=(mid+Math.imul(ah0,bl9))|0;hi=(hi+Math.imul(ah0,bh9))|0;var w9=(((c+lo)|0)+((mid&0x1fff)<<13))|0;c=(((hi+(mid>>>13))|0)+(w9>>>26))|0;w9&=0x3ffffff;lo=Math.imul(al9,bl1);mid=Math.imul(al9,bh1);mid=(mid+Math.imul(ah9,bl1))|0;hi=Math.imul(ah9,bh1);lo=(lo+Math.imul(al8,bl2))|0;mid=(mid+Math.imul(al8,bh2))|0;mid=(mid+Math.imul(ah8,bl2))|0;hi=(hi+Math.imul(ah8,bh2))|0;lo=(lo+Math.imul(al7,bl3))|0;mid=(mid+Math.imul(al7,bh3))|0;mid=(mid+Math.imul(ah7,bl3))|0;hi=(hi+Math.imul(ah7,bh3))|0;lo=(lo+Math.imul(al6,bl4))|0;mid=(mid+Math.imul(al6,bh4))|0;mid=(mid+Math.imul(ah6,bl4))|0;hi=(hi+Math.imul(ah6,bh4))|0;lo=(lo+Math.imul(al5,bl5))|0;mid=(mid+Math.imul(al5,bh5))|0;mid=(mid+Math.imul(ah5,bl5))|0;hi=(hi+Math.imul(ah5,bh5))|0;lo=(lo+Math.imul(al4,bl6))|0;mid=(mid+Math.imul(al4,bh6))|0;mid=(mid+Math.imul(ah4,bl6))|0;hi=(hi+Math.imul(ah4,bh6))|0;lo=(lo+Math.imul(al3,bl7))|0;mid=(mid+Math.imul(al3,bh7))|0;mid=(mid+Math.imul(ah3,bl7))|0;hi=(hi+Math.imul(ah3,bh7))|0;lo=(lo+Math.imul(al2,bl8))|0;mid=(mid+Math.imul(al2,bh8))|0;mid=(mid+Math.imul(ah2,bl8))|0;hi=(hi+Math.imul(ah2,bh8))|0;lo=(lo+Math.imul(al1,bl9))|0;mid=(mid+Math.imul(al1,bh9))|0;mid=(mid+Math.imul(ah1,bl9))|0;hi=(hi+Math.imul(ah1,bh9))|0;var w10=(((c+lo)|0)+((mid&0x1fff)<<13))|0;c=(((hi+(mid>>>13))|0)+(w10>>>26))|0;w10&=0x3ffffff;lo=Math.imul(al9,bl2);mid=Math.imul(al9,bh2);mid=(mid+Math.imul(ah9,bl2))|0;hi=Math.imul(ah9,bh2);lo=(lo+Math.imul(al8,bl3))|0;mid=(mid+Math.imul(al8,bh3))|0;mid=(mid+Math.imul(ah8,bl3))|0;hi=(hi+Math.imul(ah8,bh3))|0;lo=(lo+Math.imul(al7,bl4))|0;mid=(mid+Math.imul(al7,bh4))|0;mid=(mid+Math.imul(ah7,bl4))|0;hi=(hi+Math.imul(ah7,bh4))|0;lo=(lo+Math.imul(al6,bl5))|0;mid=(mid+Math.imul(al6,bh5))|0;mid=(mid+Math.imul(ah6,bl5))|0;hi=(hi+Math.imul(ah6,bh5))|0;lo=(lo+Math.imul(al5,bl6))|0;mid=(mid+Math.imul(al5,bh6))|0;mid=(mid+Math.imul(ah5,bl6))|0;hi=(hi+Math.imul(ah5,bh6))|0;lo=(lo+Math.imul(al4,bl7))|0;mid=(mid+Math.imul(al4,bh7))|0;mid=(mid+Math.imul(ah4,bl7))|0;hi=(hi+Math.imul(ah4,bh7))|0;lo=(lo+Math.imul(al3,bl8))|0;mid=(mid+Math.imul(al3,bh8))|0;mid=(mid+Math.imul(ah3,bl8))|0;hi=(hi+Math.imul(ah3,bh8))|0;lo=(lo+Math.imul(al2,bl9))|0;mid=(mid+Math.imul(al2,bh9))|0;mid=(mid+Math.imul(ah2,bl9))|0;hi=(hi+Math.imul(ah2,bh9))|0;var w11=(((c+lo)|0)+((mid&0x1fff)<<13))|0;c=(((hi+(mid>>>13))|0)+(w11>>>26))|0;w11&=0x3ffffff;lo=Math.imul(al9,bl3);mid=Math.imul(al9,bh3);mid=(mid+Math.imul(ah9,bl3))|0;hi=Math.imul(ah9,bh3);lo=(lo+Math.imul(al8,bl4))|0;mid=(mid+Math.imul(al8,bh4))|0;mid=(mid+Math.imul(ah8,bl4))|0;hi=(hi+Math.imul(ah8,bh4))|0;lo=(lo+Math.imul(al7,bl5))|0;mid=(mid+Math.imul(al7,bh5))|0;mid=(mid+Math.imul(ah7,bl5))|0;hi=(hi+Math.imul(ah7,bh5))|0;lo=(lo+Math.imul(al6,bl6))|0;mid=(mid+Math.imul(al6,bh6))|0;mid=(mid+Math.imul(ah6,bl6))|0;hi=(hi+Math.imul(ah6,bh6))|0;lo=(lo+Math.imul(al5,bl7))|0;mid=(mid+Math.imul(al5,bh7))|0;mid=(mid+Math.imul(ah5,bl7))|0;hi=(hi+Math.imul(ah5,bh7))|0;lo=(lo+Math.imul(al4,bl8))|0;mid=(mid+Math.imul(al4,bh8))|0;mid=(mid+Math.imul(ah4,bl8))|0;hi=(hi+Math.imul(ah4,bh8))|0;lo=(lo+Math.imul(al3,bl9))|0;mid=(mid+Math.imul(al3,bh9))|0;mid=(mid+Math.imul(ah3,bl9))|0;hi=(hi+Math.imul(ah3,bh9))|0;var w12=(((c+lo)|0)+((mid&0x1fff)<<13))|0;c=(((hi+(mid>>>13))|0)+(w12>>>26))|0;w12&=0x3ffffff;lo=Math.imul(al9,bl4);mid=Math.imul(al9,bh4);mid=(mid+Math.imul(ah9,bl4))|0;hi=Math.imul(ah9,bh4);lo=(lo+Math.imul(al8,bl5))|0;mid=(mid+Math.imul(al8,bh5))|0;mid=(mid+Math.imul(ah8,bl5))|0;hi=(hi+Math.imul(ah8,bh5))|0;lo=(lo+Math.imul(al7,bl6))|0;mid=(mid+Math.imul(al7,bh6))|0;mid=(mid+Math.imul(ah7,bl6))|0;hi=(hi+Math.imul(ah7,bh6))|0;lo=(lo+Math.imul(al6,bl7))|0;mid=(mid+Math.imul(al6,bh7))|0;mid=(mid+Math.imul(ah6,bl7))|0;hi=(hi+Math.imul(ah6,bh7))|0;lo=(lo+Math.imul(al5,bl8))|0;mid=(mid+Math.imul(al5,bh8))|0;mid=(mid+Math.imul(ah5,bl8))|0;hi=(hi+Math.imul(ah5,bh8))|0;lo=(lo+Math.imul(al4,bl9))|0;mid=(mid+Math.imul(al4,bh9))|0;mid=(mid+Math.imul(ah4,bl9))|0;hi=(hi+Math.imul(ah4,bh9))|0;var w13=(((c+lo)|0)+((mid&0x1fff)<<13))|0;c=(((hi+(mid>>>13))|0)+(w13>>>26))|0;w13&=0x3ffffff;lo=Math.imul(al9,bl5);mid=Math.imul(al9,bh5);mid=(mid+Math.imul(ah9,bl5))|0;hi=Math.imul(ah9,bh5);lo=(lo+Math.imul(al8,bl6))|0;mid=(mid+Math.imul(al8,bh6))|0;mid=(mid+Math.imul(ah8,bl6))|0;hi=(hi+Math.imul(ah8,bh6))|0;lo=(lo+Math.imul(al7,bl7))|0;mid=(mid+Math.imul(al7,bh7))|0;mid=(mid+Math.imul(ah7,bl7))|0;hi=(hi+Math.imul(ah7,bh7))|0;lo=(lo+Math.imul(al6,bl8))|0;mid=(mid+Math.imul(al6,bh8))|0;mid=(mid+Math.imul(ah6,bl8))|0;hi=(hi+Math.imul(ah6,bh8))|0;lo=(lo+Math.imul(al5,bl9))|0;mid=(mid+Math.imul(al5,bh9))|0;mid=(mid+Math.imul(ah5,bl9))|0;hi=(hi+Math.imul(ah5,bh9))|0;var w14=(((c+lo)|0)+((mid&0x1fff)<<13))|0;c=(((hi+(mid>>>13))|0)+(w14>>>26))|0;w14&=0x3ffffff;lo=Math.imul(al9,bl6);mid=Math.imul(al9,bh6);mid=(mid+Math.imul(ah9,bl6))|0;hi=Math.imul(ah9,bh6);lo=(lo+Math.imul(al8,bl7))|0;mid=(mid+Math.imul(al8,bh7))|0;mid=(mid+Math.imul(ah8,bl7))|0;hi=(hi+Math.imul(ah8,bh7))|0;lo=(lo+Math.imul(al7,bl8))|0;mid=(mid+Math.imul(al7,bh8))|0;mid=(mid+Math.imul(ah7,bl8))|0;hi=(hi+Math.imul(ah7,bh8))|0;lo=(lo+Math.imul(al6,bl9))|0;mid=(mid+Math.imul(al6,bh9))|0;mid=(mid+Math.imul(ah6,bl9))|0;hi=(hi+Math.imul(ah6,bh9))|0;var w15=(((c+lo)|0)+((mid&0x1fff)<<13))|0;c=(((hi+(mid>>>13))|0)+(w15>>>26))|0;w15&=0x3ffffff;lo=Math.imul(al9,bl7);mid=Math.imul(al9,bh7);mid=(mid+Math.imul(ah9,bl7))|0;hi=Math.imul(ah9,bh7);lo=(lo+Math.imul(al8,bl8))|0;mid=(mid+Math.imul(al8,bh8))|0;mid=(mid+Math.imul(ah8,bl8))|0;hi=(hi+Math.imul(ah8,bh8))|0;lo=(lo+Math.imul(al7,bl9))|0;mid=(mid+Math.imul(al7,bh9))|0;mid=(mid+Math.imul(ah7,bl9))|0;hi=(hi+Math.imul(ah7,bh9))|0;var w16=(((c+lo)|0)+((mid&0x1fff)<<13))|0;c=(((hi+(mid>>>13))|0)+(w16>>>26))|0;w16&=0x3ffffff;lo=Math.imul(al9,bl8);mid=Math.imul(al9,bh8);mid=(mid+Math.imul(ah9,bl8))|0;hi=Math.imul(ah9,bh8);lo=(lo+Math.imul(al8,bl9))|0;mid=(mid+Math.imul(al8,bh9))|0;mid=(mid+Math.imul(ah8,bl9))|0;hi=(hi+Math.imul(ah8,bh9))|0;var w17=(((c+lo)|0)+((mid&0x1fff)<<13))|0;c=(((hi+(mid>>>13))|0)+(w17>>>26))|0;w17&=0x3ffffff;lo=Math.imul(al9,bl9);mid=Math.imul(al9,bh9);mid=(mid+Math.imul(ah9,bl9))|0;hi=Math.imul(ah9,bh9);var w18=(((c+lo)|0)+((mid&0x1fff)<<13))|0;c=(((hi+(mid>>>13))|0)+(w18>>>26))|0;w18&=0x3ffffff;o[0]=w0;o[1]=w1;o[2]=w2;o[3]=w3;o[4]=w4;o[5]=w5;o[6]=w6;o[7]=w7;o[8]=w8;o[9]=w9;o[10]=w10;o[11]=w11;o[12]=w12;o[13]=w13;o[14]=w14;o[15]=w15;o[16]=w16;o[17]=w17;o[18]=w18;if(c!==0){o[19]=c;out.length++;}
return out;};if(!Math.imul){comb10MulTo=smallMulTo;}
function bigMulTo(self,num,out){out.negative=num.negative^self.negative;out.length=self.length+num.length;var carry=0;var hncarry=0;for(var k=0;k<out.length-1;k++){var ncarry=hncarry;hncarry=0;var rword=carry&0x3ffffff;var maxJ=Math.min(k,num.length-1);for(var j=Math.max(0,k-self.length+1);j<=maxJ;j++){var i=k-j;var a=self.words[i]|0;var b=num.words[j]|0;var r=a*b;var lo=r&0x3ffffff;ncarry=(ncarry+((r/0x4000000)|0))|0;lo=(lo+rword)|0;rword=lo&0x3ffffff;ncarry=(ncarry+(lo>>>26))|0;hncarry+=ncarry>>>26;ncarry&=0x3ffffff;}
out.words[k]=rword;carry=ncarry;ncarry=hncarry;}
if(carry!==0){out.words[k]=carry;}else{out.length--;}
return out.strip();}
function jumboMulTo(self,num,out){var fftm=new FFTM();return fftm.mulp(self,num,out);}
BN.prototype.mulTo=function mulTo(num,out){var res;var len=this.length+num.length;if(this.length===10&&num.length===10){res=comb10MulTo(this,num,out);}else if(len<63){res=smallMulTo(this,num,out);}else if(len<1024){res=bigMulTo(this,num,out);}else{res=jumboMulTo(this,num,out);}
return res;};function FFTM(x,y){this.x=x;this.y=y;}
FFTM.prototype.makeRBT=function makeRBT(N){var t=new Array(N);var l=BN.prototype._countBits(N)-1;for(var i=0;i<N;i++){t[i]=this.revBin(i,l,N);}
return t;};FFTM.prototype.revBin=function revBin(x,l,N){if(x===0||x===N-1)return x;var rb=0;for(var i=0;i<l;i++){rb|=(x&1)<<(l-i-1);x>>=1;}
return rb;};FFTM.prototype.permute=function permute(rbt,rws,iws,rtws,itws,N){for(var i=0;i<N;i++){rtws[i]=rws[rbt[i]];itws[i]=iws[rbt[i]];}};FFTM.prototype.transform=function transform(rws,iws,rtws,itws,N,rbt){this.permute(rbt,rws,iws,rtws,itws,N);for(var s=1;s<N;s<<=1){var l=s<<1;var rtwdf=Math.cos(2*Math.PI/l);var itwdf=Math.sin(2*Math.PI/l);for(var p=0;p<N;p+=l){var rtwdf_=rtwdf;var itwdf_=itwdf;for(var j=0;j<s;j++){var re=rtws[p+j];var ie=itws[p+j];var ro=rtws[p+j+s];var io=itws[p+j+s];var rx=rtwdf_*ro-itwdf_*io;io=rtwdf_*io+itwdf_*ro;ro=rx;rtws[p+j]=re+ro;itws[p+j]=ie+io;rtws[p+j+s]=re-ro;itws[p+j+s]=ie-io;if(j!==l){rx=rtwdf*rtwdf_-itwdf*itwdf_;itwdf_=rtwdf*itwdf_+itwdf*rtwdf_;rtwdf_=rx;}}}}};FFTM.prototype.guessLen13b=function guessLen13b(n,m){var N=Math.max(m,n)|1;var odd=N&1;var i=0;for(N=N/2|0;N;N=N>>>1){i++;}
return 1<<i+1+odd;};FFTM.prototype.conjugate=function conjugate(rws,iws,N){if(N<=1)return;for(var i=0;i<N/2;i++){var t=rws[i];rws[i]=rws[N-i-1];rws[N-i-1]=t;t=iws[i];iws[i]=-iws[N-i-1];iws[N-i-1]=-t;}};FFTM.prototype.normalize13b=function normalize13b(ws,N){var carry=0;for(var i=0;i<N/2;i++){var w=Math.round(ws[2*i+1]/N)*0x2000+
Math.round(ws[2*i]/N)+
carry;ws[i]=w&0x3ffffff;if(w<0x4000000){carry=0;}else{carry=w/0x4000000|0;}}
return ws;};FFTM.prototype.convert13b=function convert13b(ws,len,rws,N){var carry=0;for(var i=0;i<len;i++){carry=carry+(ws[i]|0);rws[2*i]=carry&0x1fff;carry=carry>>>13;rws[2*i+1]=carry&0x1fff;carry=carry>>>13;}
for(i=2*len;i<N;++i){rws[i]=0;}
assert(carry===0);assert((carry&~0x1fff)===0);};FFTM.prototype.stub=function stub(N){var ph=new Array(N);for(var i=0;i<N;i++){ph[i]=0;}
return ph;};FFTM.prototype.mulp=function mulp(x,y,out){var N=2*this.guessLen13b(x.length,y.length);var rbt=this.makeRBT(N);var _=this.stub(N);var rws=new Array(N);var rwst=new Array(N);var iwst=new Array(N);var nrws=new Array(N);var nrwst=new Array(N);var niwst=new Array(N);var rmws=out.words;rmws.length=N;this.convert13b(x.words,x.length,rws,N);this.convert13b(y.words,y.length,nrws,N);this.transform(rws,_,rwst,iwst,N,rbt);this.transform(nrws,_,nrwst,niwst,N,rbt);for(var i=0;i<N;i++){var rx=rwst[i]*nrwst[i]-iwst[i]*niwst[i];iwst[i]=rwst[i]*niwst[i]+iwst[i]*nrwst[i];rwst[i]=rx;}
this.conjugate(rwst,iwst,N);this.transform(rwst,iwst,rmws,_,N,rbt);this.conjugate(rmws,_,N);this.normalize13b(rmws,N);out.negative=x.negative^y.negative;out.length=x.length+y.length;return out.strip();};BN.prototype.mul=function mul(num){var out=new BN(null);out.words=new Array(this.length+num.length);return this.mulTo(num,out);};BN.prototype.mulf=function mulf(num){var out=new BN(null);out.words=new Array(this.length+num.length);return jumboMulTo(this,num,out);};BN.prototype.imul=function imul(num){return this.clone().mulTo(num,this);};BN.prototype.imuln=function imuln(num){assert(typeof num==='number');assert(num<0x4000000);var carry=0;for(var i=0;i<this.length;i++){var w=(this.words[i]|0)*num;var lo=(w&0x3ffffff)+(carry&0x3ffffff);carry>>=26;carry+=(w/0x4000000)|0;carry+=lo>>>26;this.words[i]=lo&0x3ffffff;}
if(carry!==0){this.words[i]=carry;this.length++;}
return this;};BN.prototype.muln=function muln(num){return this.clone().imuln(num);};BN.prototype.sqr=function sqr(){return this.mul(this);};BN.prototype.isqr=function isqr(){return this.imul(this.clone());};BN.prototype.pow=function pow(num){var w=toBitArray(num);if(w.length===0)return new BN(1);var res=this;for(var i=0;i<w.length;i++,res=res.sqr()){if(w[i]!==0)break;}
if(++i<w.length){for(var q=res.sqr();i<w.length;i++,q=q.sqr()){if(w[i]===0)continue;res=res.mul(q);}}
return res;};BN.prototype.iushln=function iushln(bits){assert(typeof bits==='number'&&bits>=0);var r=bits%26;var s=(bits-r)/26;var carryMask=(0x3ffffff>>>(26-r))<<(26-r);var i;if(r!==0){var carry=0;for(i=0;i<this.length;i++){var newCarry=this.words[i]&carryMask;var c=((this.words[i]|0)-newCarry)<<r;this.words[i]=c|carry;carry=newCarry>>>(26-r);}
if(carry){this.words[i]=carry;this.length++;}}
if(s!==0){for(i=this.length-1;i>=0;i--){this.words[i+s]=this.words[i];}
for(i=0;i<s;i++){this.words[i]=0;}
this.length+=s;}
return this.strip();};BN.prototype.ishln=function ishln(bits){assert(this.negative===0);return this.iushln(bits);};BN.prototype.iushrn=function iushrn(bits,hint,extended){assert(typeof bits==='number'&&bits>=0);var h;if(hint){h=(hint-(hint%26))/26;}else{h=0;}
var r=bits%26;var s=Math.min((bits-r)/26,this.length);var mask=0x3ffffff^((0x3ffffff>>>r)<<r);var maskedWords=extended;h-=s;h=Math.max(0,h);if(maskedWords){for(var i=0;i<s;i++){maskedWords.words[i]=this.words[i];}
maskedWords.length=s;}
if(s===0){}else if(this.length>s){this.length-=s;for(i=0;i<this.length;i++){this.words[i]=this.words[i+s];}}else{this.words[0]=0;this.length=1;}
var carry=0;for(i=this.length-1;i>=0&&(carry!==0||i>=h);i--){var word=this.words[i]|0;this.words[i]=(carry<<(26-r))|(word>>>r);carry=word&mask;}
if(maskedWords&&carry!==0){maskedWords.words[maskedWords.length++]=carry;}
if(this.length===0){this.words[0]=0;this.length=1;}
return this.strip();};BN.prototype.ishrn=function ishrn(bits,hint,extended){assert(this.negative===0);return this.iushrn(bits,hint,extended);};BN.prototype.shln=function shln(bits){return this.clone().ishln(bits);};BN.prototype.ushln=function ushln(bits){return this.clone().iushln(bits);};BN.prototype.shrn=function shrn(bits){return this.clone().ishrn(bits);};BN.prototype.ushrn=function ushrn(bits){return this.clone().iushrn(bits);};BN.prototype.testn=function testn(bit){assert(typeof bit==='number'&&bit>=0);var r=bit%26;var s=(bit-r)/26;var q=1<<r;if(this.length<=s)return false;var w=this.words[s];return!!(w&q);};BN.prototype.imaskn=function imaskn(bits){assert(typeof bits==='number'&&bits>=0);var r=bits%26;var s=(bits-r)/26;assert(this.negative===0,'imaskn works only with positive numbers');if(this.length<=s){return this;}
if(r!==0){s++;}
this.length=Math.min(s,this.length);if(r!==0){var mask=0x3ffffff^((0x3ffffff>>>r)<<r);this.words[this.length-1]&=mask;}
return this.strip();};BN.prototype.maskn=function maskn(bits){return this.clone().imaskn(bits);};BN.prototype.iaddn=function iaddn(num){assert(typeof num==='number');assert(num<0x4000000);if(num<0)return this.isubn(-num);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<num){this.words[0]=num-(this.words[0]|0);this.negative=0;return this;}
this.negative=0;this.isubn(num);this.negative=1;return this;}
return this._iaddn(num);};BN.prototype._iaddn=function _iaddn(num){this.words[0]+=num;for(var i=0;i<this.length&&this.words[i]>=0x4000000;i++){this.words[i]-=0x4000000;if(i===this.length-1){this.words[i+1]=1;}else{this.words[i+1]++;}}
this.length=Math.max(this.length,i+1);return this;};BN.prototype.isubn=function isubn(num){assert(typeof num==='number');assert(num<0x4000000);if(num<0)return this.iaddn(-num);if(this.negative!==0){this.negative=0;this.iaddn(num);this.negative=1;return this;}
this.words[0]-=num;if(this.length===1&&this.words[0]<0){this.words[0]=-this.words[0];this.negative=1;}else{for(var i=0;i<this.length&&this.words[i]<0;i++){this.words[i]+=0x4000000;this.words[i+1]-=1;}}
return this.strip();};BN.prototype.addn=function addn(num){return this.clone().iaddn(num);};BN.prototype.subn=function subn(num){return this.clone().isubn(num);};BN.prototype.iabs=function iabs(){this.negative=0;return this;};BN.prototype.abs=function abs(){return this.clone().iabs();};BN.prototype._ishlnsubmul=function _ishlnsubmul(num,mul,shift){var len=num.length+shift;var i;this._expand(len);var w;var carry=0;for(i=0;i<num.length;i++){w=(this.words[i+shift]|0)+carry;var right=(num.words[i]|0)*mul;w-=right&0x3ffffff;carry=(w>>26)-((right/0x4000000)|0);this.words[i+shift]=w&0x3ffffff;}
for(;i<this.length-shift;i++){w=(this.words[i+shift]|0)+carry;carry=w>>26;this.words[i+shift]=w&0x3ffffff;}
if(carry===0)return this.strip();assert(carry===-1);carry=0;for(i=0;i<this.length;i++){w=-(this.words[i]|0)+carry;carry=w>>26;this.words[i]=w&0x3ffffff;}
this.negative=1;return this.strip();};BN.prototype._wordDiv=function _wordDiv(num,mode){var shift=this.length-num.length;var a=this.clone();var b=num;var bhi=b.words[b.length-1]|0;var bhiBits=this._countBits(bhi);shift=26-bhiBits;if(shift!==0){b=b.ushln(shift);a.iushln(shift);bhi=b.words[b.length-1]|0;}
var m=a.length-b.length;var q;if(mode!=='mod'){q=new BN(null);q.length=m+1;q.words=new Array(q.length);for(var i=0;i<q.length;i++){q.words[i]=0;}}
var diff=a.clone()._ishlnsubmul(b,1,m);if(diff.negative===0){a=diff;if(q){q.words[m]=1;}}
for(var j=m-1;j>=0;j--){var qj=(a.words[b.length+j]|0)*0x4000000+
(a.words[b.length+j-1]|0);qj=Math.min((qj/bhi)|0,0x3ffffff);a._ishlnsubmul(b,qj,j);while(a.negative!==0){qj--;a.negative=0;a._ishlnsubmul(b,1,j);if(!a.isZero()){a.negative^=1;}}
if(q){q.words[j]=qj;}}
if(q){q.strip();}
a.strip();if(mode!=='div'&&shift!==0){a.iushrn(shift);}
return{div:q||null,mod:a};};BN.prototype.divmod=function divmod(num,mode,positive){assert(!num.isZero());if(this.isZero()){return{div:new BN(0),mod:new BN(0)};}
var div,mod,res;if(this.negative!==0&&num.negative===0){res=this.neg().divmod(num,mode);if(mode!=='mod'){div=res.div.neg();}
if(mode!=='div'){mod=res.mod.neg();if(positive&&mod.negative!==0){mod.iadd(num);}}
return{div:div,mod:mod};}
if(this.negative===0&&num.negative!==0){res=this.divmod(num.neg(),mode);if(mode!=='mod'){div=res.div.neg();}
return{div:div,mod:res.mod};}
if((this.negative&num.negative)!==0){res=this.neg().divmod(num.neg(),mode);if(mode!=='div'){mod=res.mod.neg();if(positive&&mod.negative!==0){mod.isub(num);}}
return{div:res.div,mod:mod};}
if(num.length>this.length||this.cmp(num)<0){return{div:new BN(0),mod:this};}
if(num.length===1){if(mode==='div'){return{div:this.divn(num.words[0]),mod:null};}
if(mode==='mod'){return{div:null,mod:new BN(this.modn(num.words[0]))};}
return{div:this.divn(num.words[0]),mod:new BN(this.modn(num.words[0]))};}
return this._wordDiv(num,mode);};BN.prototype.div=function div(num){return this.divmod(num,'div',false).div;};BN.prototype.mod=function mod(num){return this.divmod(num,'mod',false).mod;};BN.prototype.umod=function umod(num){return this.divmod(num,'mod',true).mod;};BN.prototype.divRound=function divRound(num){var dm=this.divmod(num);if(dm.mod.isZero())return dm.div;var mod=dm.div.negative!==0?dm.mod.isub(num):dm.mod;var half=num.ushrn(1);var r2=num.andln(1);var cmp=mod.cmp(half);if(cmp<0||r2===1&&cmp===0)return dm.div;return dm.div.negative!==0?dm.div.isubn(1):dm.div.iaddn(1);};BN.prototype.modn=function modn(num){assert(num<=0x3ffffff);var p=(1<<26)%num;var acc=0;for(var i=this.length-1;i>=0;i--){acc=(p*acc+(this.words[i]|0))%num;}
return acc;};BN.prototype.idivn=function idivn(num){assert(num<=0x3ffffff);var carry=0;for(var i=this.length-1;i>=0;i--){var w=(this.words[i]|0)+carry*0x4000000;this.words[i]=(w/num)|0;carry=w%num;}
return this.strip();};BN.prototype.divn=function divn(num){return this.clone().idivn(num);};BN.prototype.egcd=function egcd(p){assert(p.negative===0);assert(!p.isZero());var x=this;var y=p.clone();if(x.negative!==0){x=x.umod(p);}else{x=x.clone();}
var A=new BN(1);var B=new BN(0);var C=new BN(0);var D=new BN(1);var g=0;while(x.isEven()&&y.isEven()){x.iushrn(1);y.iushrn(1);++g;}
var yp=y.clone();var xp=x.clone();while(!x.isZero()){for(var i=0,im=1;(x.words[0]&im)===0&&i<26;++i,im<<=1);if(i>0){x.iushrn(i);while(i-->0){if(A.isOdd()||B.isOdd()){A.iadd(yp);B.isub(xp);}
A.iushrn(1);B.iushrn(1);}}
for(var j=0,jm=1;(y.words[0]&jm)===0&&j<26;++j,jm<<=1);if(j>0){y.iushrn(j);while(j-->0){if(C.isOdd()||D.isOdd()){C.iadd(yp);D.isub(xp);}
C.iushrn(1);D.iushrn(1);}}
if(x.cmp(y)>=0){x.isub(y);A.isub(C);B.isub(D);}else{y.isub(x);C.isub(A);D.isub(B);}}
return{a:C,b:D,gcd:y.iushln(g)};};BN.prototype._invmp=function _invmp(p){assert(p.negative===0);assert(!p.isZero());var a=this;var b=p.clone();if(a.negative!==0){a=a.umod(p);}else{a=a.clone();}
var x1=new BN(1);var x2=new BN(0);var delta=b.clone();while(a.cmpn(1)>0&&b.cmpn(1)>0){for(var i=0,im=1;(a.words[0]&im)===0&&i<26;++i,im<<=1);if(i>0){a.iushrn(i);while(i-->0){if(x1.isOdd()){x1.iadd(delta);}
x1.iushrn(1);}}
for(var j=0,jm=1;(b.words[0]&jm)===0&&j<26;++j,jm<<=1);if(j>0){b.iushrn(j);while(j-->0){if(x2.isOdd()){x2.iadd(delta);}
x2.iushrn(1);}}
if(a.cmp(b)>=0){a.isub(b);x1.isub(x2);}else{b.isub(a);x2.isub(x1);}}
var res;if(a.cmpn(1)===0){res=x1;}else{res=x2;}
if(res.cmpn(0)<0){res.iadd(p);}
return res;};BN.prototype.gcd=function gcd(num){if(this.isZero())return num.abs();if(num.isZero())return this.abs();var a=this.clone();var b=num.clone();a.negative=0;b.negative=0;for(var shift=0;a.isEven()&&b.isEven();shift++){a.iushrn(1);b.iushrn(1);}
do{while(a.isEven()){a.iushrn(1);}
while(b.isEven()){b.iushrn(1);}
var r=a.cmp(b);if(r<0){var t=a;a=b;b=t;}else if(r===0||b.cmpn(1)===0){break;}
a.isub(b);}while(true);return b.iushln(shift);};BN.prototype.invm=function invm(num){return this.egcd(num).a.umod(num);};BN.prototype.isEven=function isEven(){return(this.words[0]&1)===0;};BN.prototype.isOdd=function isOdd(){return(this.words[0]&1)===1;};BN.prototype.andln=function andln(num){return this.words[0]&num;};BN.prototype.bincn=function bincn(bit){assert(typeof bit==='number');var r=bit%26;var s=(bit-r)/26;var q=1<<r;if(this.length<=s){this._expand(s+1);this.words[s]|=q;return this;}
var carry=q;for(var i=s;carry!==0&&i<this.length;i++){var w=this.words[i]|0;w+=carry;carry=w>>>26;w&=0x3ffffff;this.words[i]=w;}
if(carry!==0){this.words[i]=carry;this.length++;}
return this;};BN.prototype.isZero=function isZero(){return this.length===1&&this.words[0]===0;};BN.prototype.cmpn=function cmpn(num){var negative=num<0;if(this.negative!==0&&!negative)return-1;if(this.negative===0&&negative)return 1;this.strip();var res;if(this.length>1){res=1;}else{if(negative){num=-num;}
assert(num<=0x3ffffff,'Number is too big');var w=this.words[0]|0;res=w===num?0:w<num?-1:1;}
if(this.negative!==0)return-res|0;return res;};BN.prototype.cmp=function cmp(num){if(this.negative!==0&&num.negative===0)return-1;if(this.negative===0&&num.negative!==0)return 1;var res=this.ucmp(num);if(this.negative!==0)return-res|0;return res;};BN.prototype.ucmp=function ucmp(num){if(this.length>num.length)return 1;if(this.length<num.length)return-1;var res=0;for(var i=this.length-1;i>=0;i--){var a=this.words[i]|0;var b=num.words[i]|0;if(a===b)continue;if(a<b){res=-1;}else if(a>b){res=1;}
break;}
return res;};BN.prototype.gtn=function gtn(num){return this.cmpn(num)===1;};BN.prototype.gt=function gt(num){return this.cmp(num)===1;};BN.prototype.gten=function gten(num){return this.cmpn(num)>=0;};BN.prototype.gte=function gte(num){return this.cmp(num)>=0;};BN.prototype.ltn=function ltn(num){return this.cmpn(num)===-1;};BN.prototype.lt=function lt(num){return this.cmp(num)===-1;};BN.prototype.lten=function lten(num){return this.cmpn(num)<=0;};BN.prototype.lte=function lte(num){return this.cmp(num)<=0;};BN.prototype.eqn=function eqn(num){return this.cmpn(num)===0;};BN.prototype.eq=function eq(num){return this.cmp(num)===0;};BN.red=function red(num){return new Red(num);};BN.prototype.toRed=function toRed(ctx){assert(!this.red,'Already a number in reduction context');assert(this.negative===0,'red works only with positives');return ctx.convertTo(this)._forceRed(ctx);};BN.prototype.fromRed=function fromRed(){assert(this.red,'fromRed works only with numbers in reduction context');return this.red.convertFrom(this);};BN.prototype._forceRed=function _forceRed(ctx){this.red=ctx;return this;};BN.prototype.forceRed=function forceRed(ctx){assert(!this.red,'Already a number in reduction context');return this._forceRed(ctx);};BN.prototype.redAdd=function redAdd(num){assert(this.red,'redAdd works only with red numbers');return this.red.add(this,num);};BN.prototype.redIAdd=function redIAdd(num){assert(this.red,'redIAdd works only with red numbers');return this.red.iadd(this,num);};BN.prototype.redSub=function redSub(num){assert(this.red,'redSub works only with red numbers');return this.red.sub(this,num);};BN.prototype.redISub=function redISub(num){assert(this.red,'redISub works only with red numbers');return this.red.isub(this,num);};BN.prototype.redShl=function redShl(num){assert(this.red,'redShl works only with red numbers');return this.red.shl(this,num);};BN.prototype.redMul=function redMul(num){assert(this.red,'redMul works only with red numbers');this.red._verify2(this,num);return this.red.mul(this,num);};BN.prototype.redIMul=function redIMul(num){assert(this.red,'redMul works only with red numbers');this.red._verify2(this,num);return this.red.imul(this,num);};BN.prototype.redSqr=function redSqr(){assert(this.red,'redSqr works only with red numbers');this.red._verify1(this);return this.red.sqr(this);};BN.prototype.redISqr=function redISqr(){assert(this.red,'redISqr works only with red numbers');this.red._verify1(this);return this.red.isqr(this);};BN.prototype.redSqrt=function redSqrt(){assert(this.red,'redSqrt works only with red numbers');this.red._verify1(this);return this.red.sqrt(this);};BN.prototype.redInvm=function redInvm(){assert(this.red,'redInvm works only with red numbers');this.red._verify1(this);return this.red.invm(this);};BN.prototype.redNeg=function redNeg(){assert(this.red,'redNeg works only with red numbers');this.red._verify1(this);return this.red.neg(this);};BN.prototype.redPow=function redPow(num){assert(this.red&&!num.red,'redPow(normalNum)');this.red._verify1(this);return this.red.pow(this,num);};var primes={k256:null,p224:null,p192:null,p25519:null};function MPrime(name,p){this.name=name;this.p=new BN(p,16);this.n=this.p.bitLength();this.k=new BN(1).iushln(this.n).isub(this.p);this.tmp=this._tmp();}
MPrime.prototype._tmp=function _tmp(){var tmp=new BN(null);tmp.words=new Array(Math.ceil(this.n/13));return tmp;};MPrime.prototype.ireduce=function ireduce(num){var r=num;var rlen;do{this.split(r,this.tmp);r=this.imulK(r);r=r.iadd(this.tmp);rlen=r.bitLength();}while(rlen>this.n);var cmp=rlen<this.n?-1:r.ucmp(this.p);if(cmp===0){r.words[0]=0;r.length=1;}else if(cmp>0){r.isub(this.p);}else{r.strip();}
return r;};MPrime.prototype.split=function split(input,out){input.iushrn(this.n,0,out);};MPrime.prototype.imulK=function imulK(num){return num.imul(this.k);};function K256(){MPrime.call(this,'k256','ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f');}
inherits(K256,MPrime);K256.prototype.split=function split(input,output){var mask=0x3fffff;var outLen=Math.min(input.length,9);for(var i=0;i<outLen;i++){output.words[i]=input.words[i];}
output.length=outLen;if(input.length<=9){input.words[0]=0;input.length=1;return;}
var prev=input.words[9];output.words[output.length++]=prev&mask;for(i=10;i<input.length;i++){var next=input.words[i]|0;input.words[i-10]=((next&mask)<<4)|(prev>>>22);prev=next;}
prev>>>=22;input.words[i-10]=prev;if(prev===0&&input.length>10){input.length-=10;}else{input.length-=9;}};K256.prototype.imulK=function imulK(num){num.words[num.length]=0;num.words[num.length+1]=0;num.length+=2;var lo=0;for(var i=0;i<num.length;i++){var w=num.words[i]|0;lo+=w*0x3d1;num.words[i]=lo&0x3ffffff;lo=w*0x40+((lo/0x4000000)|0);}
if(num.words[num.length-1]===0){num.length--;if(num.words[num.length-1]===0){num.length--;}}
return num;};function P224(){MPrime.call(this,'p224','ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001');}
inherits(P224,MPrime);function P192(){MPrime.call(this,'p192','ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff');}
inherits(P192,MPrime);function P25519(){MPrime.call(this,'25519','7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed');}
inherits(P25519,MPrime);P25519.prototype.imulK=function imulK(num){var carry=0;for(var i=0;i<num.length;i++){var hi=(num.words[i]|0)*0x13+carry;var lo=hi&0x3ffffff;hi>>>=26;num.words[i]=lo;carry=hi;}
if(carry!==0){num.words[num.length++]=carry;}
return num;};BN._prime=function prime(name){if(primes[name])return primes[name];var prime;if(name==='k256'){prime=new K256();}else if(name==='p224'){prime=new P224();}else if(name==='p192'){prime=new P192();}else if(name==='p25519'){prime=new P25519();}else{throw new Error('Unknown prime '+name);}
primes[name]=prime;return prime;};function Red(m){if(typeof m==='string'){var prime=BN._prime(m);this.m=prime.p;this.prime=prime;}else{assert(m.gtn(1),'modulus must be greater than 1');this.m=m;this.prime=null;}}
Red.prototype._verify1=function _verify1(a){assert(a.negative===0,'red works only with positives');assert(a.red,'red works only with red numbers');};Red.prototype._verify2=function _verify2(a,b){assert((a.negative|b.negative)===0,'red works only with positives');assert(a.red&&a.red===b.red,'red works only with red numbers');};Red.prototype.imod=function imod(a){if(this.prime)return this.prime.ireduce(a)._forceRed(this);return a.umod(this.m)._forceRed(this);};Red.prototype.neg=function neg(a){if(a.isZero()){return a.clone();}
return this.m.sub(a)._forceRed(this);};Red.prototype.add=function add(a,b){this._verify2(a,b);var res=a.add(b);if(res.cmp(this.m)>=0){res.isub(this.m);}
return res._forceRed(this);};Red.prototype.iadd=function iadd(a,b){this._verify2(a,b);var res=a.iadd(b);if(res.cmp(this.m)>=0){res.isub(this.m);}
return res;};Red.prototype.sub=function sub(a,b){this._verify2(a,b);var res=a.sub(b);if(res.cmpn(0)<0){res.iadd(this.m);}
return res._forceRed(this);};Red.prototype.isub=function isub(a,b){this._verify2(a,b);var res=a.isub(b);if(res.cmpn(0)<0){res.iadd(this.m);}
return res;};Red.prototype.shl=function shl(a,num){this._verify1(a);return this.imod(a.ushln(num));};Red.prototype.imul=function imul(a,b){this._verify2(a,b);return this.imod(a.imul(b));};Red.prototype.mul=function mul(a,b){this._verify2(a,b);return this.imod(a.mul(b));};Red.prototype.isqr=function isqr(a){return this.imul(a,a.clone());};Red.prototype.sqr=function sqr(a){return this.mul(a,a);};Red.prototype.sqrt=function sqrt(a){if(a.isZero())return a.clone();var mod3=this.m.andln(3);assert(mod3%2===1);if(mod3===3){var pow=this.m.add(new BN(1)).iushrn(2);return this.pow(a,pow);}
var q=this.m.subn(1);var s=0;while(!q.isZero()&&q.andln(1)===0){s++;q.iushrn(1);}
assert(!q.isZero());var one=new BN(1).toRed(this);var nOne=one.redNeg();var lpow=this.m.subn(1).iushrn(1);var z=this.m.bitLength();z=new BN(2*z*z).toRed(this);while(this.pow(z,lpow).cmp(nOne)!==0){z.redIAdd(nOne);}
var c=this.pow(z,q);var r=this.pow(a,q.addn(1).iushrn(1));var t=this.pow(a,q);var m=s;while(t.cmp(one)!==0){var tmp=t;for(var i=0;tmp.cmp(one)!==0;i++){tmp=tmp.redSqr();}
assert(i<m);var b=this.pow(c,new BN(1).iushln(m-i-1));r=r.redMul(b);c=b.redSqr();t=t.redMul(c);m=i;}
return r;};Red.prototype.invm=function invm(a){var inv=a._invmp(this.m);if(inv.negative!==0){inv.negative=0;return this.imod(inv).redNeg();}else{return this.imod(inv);}};Red.prototype.pow=function pow(a,num){if(num.isZero())return new BN(1).toRed(this);if(num.cmpn(1)===0)return a.clone();var windowSize=4;var wnd=new Array(1<<windowSize);wnd[0]=new BN(1).toRed(this);wnd[1]=a;for(var i=2;i<wnd.length;i++){wnd[i]=this.mul(wnd[i-1],a);}
var res=wnd[0];var current=0;var currentLen=0;var start=num.bitLength()%26;if(start===0){start=26;}
for(i=num.length-1;i>=0;i--){var word=num.words[i];for(var j=start-1;j>=0;j--){var bit=(word>>j)&1;if(res!==wnd[0]){res=this.sqr(res);}
if(bit===0&&current===0){currentLen=0;continue;}
current<<=1;current|=bit;currentLen++;if(currentLen!==windowSize&&(i!==0||j!==0))continue;res=this.mul(res,wnd[current]);currentLen=0;current=0;}
start=26;}
return res;};Red.prototype.convertTo=function convertTo(num){var r=num.umod(this.m);return r===num?r.clone():r;};Red.prototype.convertFrom=function convertFrom(num){var res=num.clone();res.red=null;return res;};BN.mont=function mont(num){return new Mont(num);};function Mont(m){Red.call(this,m);this.shift=this.m.bitLength();if(this.shift%26!==0){this.shift+=26-(this.shift%26);}
this.r=new BN(1).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv);}
inherits(Mont,Red);Mont.prototype.convertTo=function convertTo(num){return this.imod(num.ushln(this.shift));};Mont.prototype.convertFrom=function convertFrom(num){var r=this.imod(num.mul(this.rinv));r.red=null;return r;};Mont.prototype.imul=function imul(a,b){if(a.isZero()||b.isZero()){a.words[0]=0;a.length=1;return a;}
var t=a.imul(b);var c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var u=t.isub(c).iushrn(this.shift);var res=u;if(u.cmp(this.m)>=0){res=u.isub(this.m);}else if(u.cmpn(0)<0){res=u.iadd(this.m);}
return res._forceRed(this);};Mont.prototype.mul=function mul(a,b){if(a.isZero()||b.isZero())return new BN(0)._forceRed(this);var t=a.mul(b);var c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var u=t.isub(c).iushrn(this.shift);var res=u;if(u.cmp(this.m)>=0){res=u.isub(this.m);}else if(u.cmpn(0)<0){res=u.iadd(this.m);}
return res._forceRed(this);};Mont.prototype.invm=function invm(a){var res=this.imod(a._invmp(this.m).mul(this.r2));return res._forceRed(this);};})(typeof module==='undefined'||module,this);}.call(exports,__webpack_require__(83)(module)))}),(function(module,exports,__webpack_require__){var defined=__webpack_require__(64);module.exports=function(it){return Object(defined(it));};}),(function(module,exports,__webpack_require__){var Buffer=__webpack_require__(4).Buffer
var bip66=__webpack_require__(347)
var pushdata=__webpack_require__(348)
var typeforce=__webpack_require__(23)
var types=__webpack_require__(37)
var scriptNumber=__webpack_require__(350)
var OPS=__webpack_require__(43)
var REVERSE_OPS=__webpack_require__(754)
var OP_INT_BASE=OPS.OP_RESERVED
function isOPInt(value){return types.Number(value)&&((value===OPS.OP_0)||(value>=OPS.OP_1&&value<=OPS.OP_16)||(value===OPS.OP_1NEGATE))}
function isPushOnlyChunk(value){return types.Buffer(value)||isOPInt(value)}
function isPushOnly(value){return types.Array(value)&&value.every(isPushOnlyChunk)}
function asMinimalOP(buffer){if(buffer.length===0)return OPS.OP_0
if(buffer.length!==1)return
if(buffer[0]>=1&&buffer[0]<=16)return OP_INT_BASE+buffer[0]
if(buffer[0]===0x81)return OPS.OP_1NEGATE}
function compile(chunks){if(Buffer.isBuffer(chunks))return chunks
typeforce(types.Array,chunks)
var bufferSize=chunks.reduce(function(accum,chunk){if(Buffer.isBuffer(chunk)){if(chunk.length===1&&asMinimalOP(chunk)!==undefined){return accum+1}
return accum+pushdata.encodingLength(chunk.length)+chunk.length}
return accum+1},0.0)
var buffer=Buffer.allocUnsafe(bufferSize)
var offset=0
chunks.forEach(function(chunk){if(Buffer.isBuffer(chunk)){var opcode=asMinimalOP(chunk)
if(opcode!==undefined){buffer.writeUInt8(opcode,offset)
offset+=1
return}
offset+=pushdata.encode(buffer,chunk.length,offset)
chunk.copy(buffer,offset)
offset+=chunk.length}else{buffer.writeUInt8(chunk,offset)
offset+=1}})
if(offset!==buffer.length)throw new Error('Could not decode chunks')
return buffer}
function decompile(buffer){if(types.Array(buffer))return buffer
typeforce(types.Buffer,buffer)
var chunks=[]
var i=0
while(i<buffer.length){var opcode=buffer[i]
if((opcode>OPS.OP_0)&&(opcode<=OPS.OP_PUSHDATA4)){var d=pushdata.decode(buffer,i)
if(d===null)return[]
i+=d.size
if(i+d.number>buffer.length)return[]
var data=buffer.slice(i,i+d.number)
i+=d.number
var op=asMinimalOP(data)
if(op!==undefined){chunks.push(op)}else{chunks.push(data)}}else{chunks.push(opcode)
i+=1}}
return chunks}
function toASM(chunks){if(Buffer.isBuffer(chunks)){chunks=decompile(chunks)}
return chunks.map(function(chunk){if(Buffer.isBuffer(chunk)){var op=asMinimalOP(chunk)
if(op===undefined)return chunk.toString('hex')
chunk=op}
return REVERSE_OPS[chunk]}).join(' ')}
function fromASM(asm){typeforce(types.String,asm)
return compile(asm.split(' ').map(function(chunkStr){if(OPS[chunkStr]!==undefined)return OPS[chunkStr]
typeforce(types.Hex,chunkStr)
return Buffer.from(chunkStr,'hex')}))}
function toStack(chunks){chunks=decompile(chunks)
typeforce(isPushOnly,chunks)
return chunks.map(function(op){if(Buffer.isBuffer(op))return op
if(op===OPS.OP_0)return Buffer.allocUnsafe(0)
return scriptNumber.encode(op-OP_INT_BASE)})}
function isCanonicalPubKey(buffer){if(!Buffer.isBuffer(buffer))return false
if(buffer.length<33)return false
switch(buffer[0]){case 0x02:case 0x03:return buffer.length===33
case 0x04:return buffer.length===65}
return false}
function isDefinedHashType(hashType){var hashTypeMod=hashType&~0x80
return hashTypeMod>0x00&&hashTypeMod<0x04}
function isCanonicalSignature(buffer){if(!Buffer.isBuffer(buffer))return false
if(!isDefinedHashType(buffer[buffer.length-1]))return false
return bip66.check(buffer.slice(0,-1))}
module.exports={compile:compile,decompile:decompile,fromASM:fromASM,toASM:toASM,toStack:toStack,number:__webpack_require__(350),isCanonicalPubKey:isCanonicalPubKey,isCanonicalSignature:isCanonicalSignature,isPushOnly:isPushOnly,isDefinedHashType:isDefinedHashType}}),(function(module,__webpack_exports__,__webpack_require__){"use strict";class WebDollarCoins{constructor(){this.MAX_SAFE_COINS=Number.MAX_SAFE_INTEGER;this.MIN_SAFE_COINS=Number.MIN_SAFE_INTEGER;this.WEBD=10000;this.UNIT=1;}
validateCoinsNumber(number){if(number===undefined||number===null)return false;if(!Number.isInteger(number))return false;if(number>this.MAX_SAFE_COINS)return false;if(number<this.MIN_SAFE_COINS)return false;return true;}
convertToUnits(number){return number*this.WEBD;}
convertToWEBD(number){return number/this.WEBD;}}
__webpack_exports__["a"]=(new WebDollarCoins());}),(function(module,exports,__webpack_require__){(function(Buffer){module.exports=Key;var assert=__webpack_require__(15);var algs=__webpack_require__(41);var crypto=__webpack_require__(24);var Fingerprint=__webpack_require__(134);var Signature=__webpack_require__(78);var DiffieHellman=__webpack_require__(242).DiffieHellman;var errs=__webpack_require__(72);var utils=__webpack_require__(34);var PrivateKey=__webpack_require__(38);var edCompat;try{edCompat=__webpack_require__(376);}catch(e){}
var InvalidAlgorithmError=errs.InvalidAlgorithmError;var KeyParseError=errs.KeyParseError;var formats={};formats['auto']=__webpack_require__(377);formats['pem']=__webpack_require__(88);formats['pkcs1']=__webpack_require__(243);formats['pkcs8']=__webpack_require__(137);formats['rfc4253']=__webpack_require__(89);formats['ssh']=__webpack_require__(379);formats['ssh-private']=__webpack_require__(174);formats['openssh']=formats['ssh-private'];formats['dnssec']=__webpack_require__(244);formats['putty']=__webpack_require__(380);formats['ppk']=formats['putty'];function Key(opts){assert.object(opts,'options');assert.arrayOfObject(opts.parts,'options.parts');assert.string(opts.type,'options.type');assert.optionalString(opts.comment,'options.comment');var algInfo=algs.info[opts.type];if(typeof(algInfo)!=='object')
throw(new InvalidAlgorithmError(opts.type));var partLookup={};for(var i=0;i<opts.parts.length;++i){var part=opts.parts[i];partLookup[part.name]=part;}
this.type=opts.type;this.parts=opts.parts;this.part=partLookup;this.comment=undefined;this.source=opts.source;this._rfc4253Cache=opts._rfc4253Cache;this._hashCache={};var sz;this.curve=undefined;if(this.type==='ecdsa'){var curve=this.part.curve.data.toString();this.curve=curve;sz=algs.curves[curve].size;}else if(this.type==='ed25519'||this.type==='curve25519'){sz=256;this.curve='curve25519';}else{var szPart=this.part[algInfo.sizePart];sz=szPart.data.length;sz=sz*8-utils.countZeros(szPart.data);}
this.size=sz;}
Key.formats=formats;Key.prototype.toBuffer=function(format,options){if(format===undefined)
format='ssh';assert.string(format,'format');assert.object(formats[format],'formats[format]');assert.optionalObject(options,'options');if(format==='rfc4253'){if(this._rfc4253Cache===undefined)
this._rfc4253Cache=formats['rfc4253'].write(this);return(this._rfc4253Cache);}
return(formats[format].write(this,options));};Key.prototype.toString=function(format,options){return(this.toBuffer(format,options).toString());};Key.prototype.hash=function(algo,type){assert.string(algo,'algorithm');assert.optionalString(type,'type');if(type===undefined)
type='ssh';algo=algo.toLowerCase();if(algs.hashAlgs[algo]===undefined)
throw(new InvalidAlgorithmError(algo));var cacheKey=algo+'||'+type;if(this._hashCache[cacheKey])
return(this._hashCache[cacheKey]);var buf;if(type==='ssh'){buf=this.toBuffer('rfc4253');}else if(type==='spki'){buf=formats.pkcs8.pkcs8ToBuffer(this);}else{throw(new Error('Hash type '+type+' not supported'));}
var hash=crypto.createHash(algo).update(buf).digest();this._hashCache[cacheKey]=hash;return(hash);};Key.prototype.fingerprint=function(algo,type){if(algo===undefined)
algo='sha256';if(type===undefined)
type='ssh';assert.string(algo,'algorithm');assert.string(type,'type');var opts={type:'key',hash:this.hash(algo,type),algorithm:algo,hashType:type};return(new Fingerprint(opts));};Key.prototype.defaultHashAlgorithm=function(){var hashAlgo='sha1';if(this.type==='rsa')
hashAlgo='sha256';if(this.type==='dsa'&&this.size>1024)
hashAlgo='sha256';if(this.type==='ed25519')
hashAlgo='sha512';if(this.type==='ecdsa'){if(this.size<=256)
hashAlgo='sha256';else if(this.size<=384)
hashAlgo='sha384';else
hashAlgo='sha512';}
return(hashAlgo);};Key.prototype.createVerify=function(hashAlgo){if(hashAlgo===undefined)
hashAlgo=this.defaultHashAlgorithm();assert.string(hashAlgo,'hash algorithm');if(this.type==='ed25519'&&edCompat!==undefined)
return(new edCompat.Verifier(this,hashAlgo));if(this.type==='curve25519')
throw(new Error('Curve25519 keys are not suitable for '+
'signing or verification'));var v,nm,err;try{nm=hashAlgo.toUpperCase();v=crypto.createVerify(nm);}catch(e){err=e;}
if(v===undefined||(err instanceof Error&&err.message.match(/Unknown message digest/))){nm='RSA-';nm+=hashAlgo.toUpperCase();v=crypto.createVerify(nm);}
assert.ok(v,'failed to create verifier');var oldVerify=v.verify.bind(v);var key=this.toBuffer('pkcs8');var curve=this.curve;var self=this;v.verify=function(signature,fmt){if(Signature.isSignature(signature,[2,0])){if(signature.type!==self.type)
return(false);if(signature.hashAlgorithm&&signature.hashAlgorithm!==hashAlgo)
return(false);if(signature.curve&&self.type==='ecdsa'&&signature.curve!==curve)
return(false);return(oldVerify(key,signature.toBuffer('asn1')));}else if(typeof(signature)==='string'||Buffer.isBuffer(signature)){return(oldVerify(key,signature,fmt));}else if(Signature.isSignature(signature,[1,0])){throw(new Error('signature was created by too old '+
'a version of sshpk and cannot be verified'));}else{throw(new TypeError('signature must be a string, '+
'Buffer, or Signature object'));}};return(v);};Key.prototype.createDiffieHellman=function(){if(this.type==='rsa')
throw(new Error('RSA keys do not support Diffie-Hellman'));return(new DiffieHellman(this));};Key.prototype.createDH=Key.prototype.createDiffieHellman;Key.parse=function(data,format,options){if(typeof(data)!=='string')
assert.buffer(data,'data');if(format===undefined)
format='auto';assert.string(format,'format');if(typeof(options)==='string')
options={filename:options};assert.optionalObject(options,'options');if(options===undefined)
options={};assert.optionalString(options.filename,'options.filename');if(options.filename===undefined)
options.filename='(unnamed)';assert.object(formats[format],'formats[format]');try{var k=formats[format].read(data,options);if(k instanceof PrivateKey)
k=k.toPublic();if(!k.comment)
k.comment=options.filename;return(k);}catch(e){if(e.name==='KeyEncryptedError')
throw(e);throw(new KeyParseError(options.filename,format,e));}};Key.isKey=function(obj,ver){return(utils.isCompatible(obj,Key,ver));};Key.prototype._sshpkApiVersion=[1,7];Key._oldVersionDetect=function(obj){assert.func(obj.toBuffer);assert.func(obj.fingerprint);if(obj.createDH)
return([1,4]);if(obj.defaultHashAlgorithm)
return([1,3]);if(obj.formats['auto'])
return([1,2]);if(obj.formats['pkcs1'])
return([1,1]);return([1,0]);};}.call(exports,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){module.exports={bufferSplit:bufferSplit,addRSAMissing:addRSAMissing,calculateDSAPublic:calculateDSAPublic,calculateED25519Public:calculateED25519Public,calculateX25519Public:calculateX25519Public,mpNormalize:mpNormalize,mpDenormalize:mpDenormalize,ecNormalize:ecNormalize,countZeros:countZeros,assertCompatible:assertCompatible,isCompatible:isCompatible,opensslKeyDeriv:opensslKeyDeriv,opensshCipherInfo:opensshCipherInfo,publicFromPrivateECDSA:publicFromPrivateECDSA,zeroPadToLength:zeroPadToLength,writeBitString:writeBitString,readBitString:readBitString,pbkdf2:pbkdf2};var assert=__webpack_require__(15);var Buffer=__webpack_require__(21).Buffer;var PrivateKey=__webpack_require__(38);var Key=__webpack_require__(33);var crypto=__webpack_require__(24);var algs=__webpack_require__(41);var asn1=__webpack_require__(79);var ec=__webpack_require__(172);var jsbn=__webpack_require__(135).BigInteger;var nacl=__webpack_require__(173);var MAX_CLASS_DEPTH=3;function isCompatible(obj,klass,needVer){if(obj===null||typeof(obj)!=='object')
return(false);if(needVer===undefined)
needVer=klass.prototype._sshpkApiVersion;if(obj instanceof klass&&klass.prototype._sshpkApiVersion[0]==needVer[0])
return(true);var proto=Object.getPrototypeOf(obj);var depth=0;while(proto.constructor.name!==klass.name){proto=Object.getPrototypeOf(proto);if(!proto||++depth>MAX_CLASS_DEPTH)
return(false);}
if(proto.constructor.name!==klass.name)
return(false);var ver=proto._sshpkApiVersion;if(ver===undefined)
ver=klass._oldVersionDetect(obj);if(ver[0]!=needVer[0]||ver[1]<needVer[1])
return(false);return(true);}
function assertCompatible(obj,klass,needVer,name){if(name===undefined)
name='object';assert.ok(obj,name+' must not be null');assert.object(obj,name+' must be an object');if(needVer===undefined)
needVer=klass.prototype._sshpkApiVersion;if(obj instanceof klass&&klass.prototype._sshpkApiVersion[0]==needVer[0])
return;var proto=Object.getPrototypeOf(obj);var depth=0;while(proto.constructor.name!==klass.name){proto=Object.getPrototypeOf(proto);assert.ok(proto&&++depth<=MAX_CLASS_DEPTH,name+' must be a '+klass.name+' instance');}
assert.strictEqual(proto.constructor.name,klass.name,name+' must be a '+klass.name+' instance');var ver=proto._sshpkApiVersion;if(ver===undefined)
ver=klass._oldVersionDetect(obj);assert.ok(ver[0]==needVer[0]&&ver[1]>=needVer[1],name+' must be compatible with '+klass.name+' klass '+
'version '+needVer[0]+'.'+needVer[1]);}
var CIPHER_LEN={'des-ede3-cbc':{key:24,iv:8},'aes-128-cbc':{key:16,iv:16},'aes-256-cbc':{key:32,iv:16}};var PKCS5_SALT_LEN=8;function opensslKeyDeriv(cipher,salt,passphrase,count){assert.buffer(salt,'salt');assert.buffer(passphrase,'passphrase');assert.number(count,'iteration count');var clen=CIPHER_LEN[cipher];assert.object(clen,'supported cipher');salt=salt.slice(0,PKCS5_SALT_LEN);var D,D_prev,bufs;var material=Buffer.alloc(0);while(material.length<clen.key+clen.iv){bufs=[];if(D_prev)
bufs.push(D_prev);bufs.push(passphrase);bufs.push(salt);D=Buffer.concat(bufs);for(var j=0;j<count;++j)
D=crypto.createHash('md5').update(D).digest();material=Buffer.concat([material,D]);D_prev=D;}
return({key:material.slice(0,clen.key),iv:material.slice(clen.key,clen.key+clen.iv)});}
function pbkdf2(hashAlg,salt,iterations,size,passphrase){var hkey=Buffer.alloc(salt.length+4);salt.copy(hkey);var gen=0,ts=[];var i=1;while(gen<size){var t=T(i++);gen+=t.length;ts.push(t);}
return(Buffer.concat(ts).slice(0,size));function T(I){hkey.writeUInt32BE(I,hkey.length-4);var hmac=crypto.createHmac(hashAlg,passphrase);hmac.update(hkey);var Ti=hmac.digest();var Uc=Ti;var c=1;while(c++<iterations){hmac=crypto.createHmac(hashAlg,passphrase);hmac.update(Uc);Uc=hmac.digest();for(var x=0;x<Ti.length;++x)
Ti[x]^=Uc[x];}
return(Ti);}}
function countZeros(buf){var o=0,obit=8;while(o<buf.length){var mask=(1<<obit);if((buf[o]&mask)===mask)
break;obit--;if(obit<0){o++;obit=8;}}
return(o*8+(8-obit)-1);}
function bufferSplit(buf,chr){assert.buffer(buf);assert.string(chr);var parts=[];var lastPart=0;var matches=0;for(var i=0;i<buf.length;++i){if(buf[i]===chr.charCodeAt(matches))
++matches;else if(buf[i]===chr.charCodeAt(0))
matches=1;else
matches=0;if(matches>=chr.length){var newPart=i+1;parts.push(buf.slice(lastPart,newPart-matches));lastPart=newPart;matches=0;}}
if(lastPart<=buf.length)
parts.push(buf.slice(lastPart,buf.length));return(parts);}
function ecNormalize(buf,addZero){assert.buffer(buf);if(buf[0]===0x00&&buf[1]===0x04){if(addZero)
return(buf);return(buf.slice(1));}else if(buf[0]===0x04){if(!addZero)
return(buf);}else{while(buf[0]===0x00)
buf=buf.slice(1);if(buf[0]===0x02||buf[0]===0x03)
throw(new Error('Compressed elliptic curve points '+
'are not supported'));if(buf[0]!==0x04)
throw(new Error('Not a valid elliptic curve point'));if(!addZero)
return(buf);}
var b=Buffer.alloc(buf.length+1);b[0]=0x0;buf.copy(b,1);return(b);}
function readBitString(der,tag){if(tag===undefined)
tag=asn1.Ber.BitString;var buf=der.readString(tag,true);assert.strictEqual(buf[0],0x00,'bit strings with unused bits are '+
'not supported (0x'+buf[0].toString(16)+')');return(buf.slice(1));}
function writeBitString(der,buf,tag){if(tag===undefined)
tag=asn1.Ber.BitString;var b=Buffer.alloc(buf.length+1);b[0]=0x00;buf.copy(b,1);der.writeBuffer(b,tag);}
function mpNormalize(buf){assert.buffer(buf);while(buf.length>1&&buf[0]===0x00&&(buf[1]&0x80)===0x00)
buf=buf.slice(1);if((buf[0]&0x80)===0x80){var b=Buffer.alloc(buf.length+1);b[0]=0x00;buf.copy(b,1);buf=b;}
return(buf);}
function mpDenormalize(buf){assert.buffer(buf);while(buf.length>1&&buf[0]===0x00)
buf=buf.slice(1);return(buf);}
function zeroPadToLength(buf,len){assert.buffer(buf);assert.number(len);while(buf.length>len){assert.equal(buf[0],0x00);buf=buf.slice(1);}
while(buf.length<len){var b=Buffer.alloc(buf.length+1);b[0]=0x00;buf.copy(b,1);buf=b;}
return(buf);}
function bigintToMpBuf(bigint){var buf=Buffer.from(bigint.toByteArray());buf=mpNormalize(buf);return(buf);}
function calculateDSAPublic(g,p,x){assert.buffer(g);assert.buffer(p);assert.buffer(x);g=new jsbn(g);p=new jsbn(p);x=new jsbn(x);var y=g.modPow(x,p);var ybuf=bigintToMpBuf(y);return(ybuf);}
function calculateED25519Public(k){assert.buffer(k);var kp=nacl.sign.keyPair.fromSeed(new Uint8Array(k));return(Buffer.from(kp.publicKey));}
function calculateX25519Public(k){assert.buffer(k);var kp=nacl.box.keyPair.fromSeed(new Uint8Array(k));return(Buffer.from(kp.publicKey));}
function addRSAMissing(key){assert.object(key);assertCompatible(key,PrivateKey,[1,1]);var d=new jsbn(key.part.d.data);var buf;if(!key.part.dmodp){var p=new jsbn(key.part.p.data);var dmodp=d.mod(p.subtract(1));buf=bigintToMpBuf(dmodp);key.part.dmodp={name:'dmodp',data:buf};key.parts.push(key.part.dmodp);}
if(!key.part.dmodq){var q=new jsbn(key.part.q.data);var dmodq=d.mod(q.subtract(1));buf=bigintToMpBuf(dmodq);key.part.dmodq={name:'dmodq',data:buf};key.parts.push(key.part.dmodq);}}
function publicFromPrivateECDSA(curveName,priv){assert.string(curveName,'curveName');assert.buffer(priv);var params=algs.curves[curveName];var p=new jsbn(params.p);var a=new jsbn(params.a);var b=new jsbn(params.b);var curve=new ec.ECCurveFp(p,a,b);var G=curve.decodePointHex(params.G.toString('hex'));var d=new jsbn(mpNormalize(priv));var pub=G.multiply(d);pub=Buffer.from(curve.encodePointHex(pub),'hex');var parts=[];parts.push({name:'curve',data:Buffer.from(curveName)});parts.push({name:'Q',data:pub});var key=new Key({type:'ecdsa',curve:curve,parts:parts});return(key);}
function opensshCipherInfo(cipher){var inf={};switch(cipher){case '3des-cbc':inf.keySize=24;inf.blockSize=8;inf.opensslName='des-ede3-cbc';break;case 'blowfish-cbc':inf.keySize=16;inf.blockSize=8;inf.opensslName='bf-cbc';break;case 'aes128-cbc':case 'aes128-ctr':case 'aes128-gcm@openssh.com':inf.keySize=16;inf.blockSize=16;inf.opensslName='aes-128-'+cipher.slice(7,10);break;case 'aes192-cbc':case 'aes192-ctr':case 'aes192-gcm@openssh.com':inf.keySize=24;inf.blockSize=16;inf.opensslName='aes-192-'+cipher.slice(7,10);break;case 'aes256-cbc':case 'aes256-ctr':case 'aes256-gcm@openssh.com':inf.keySize=32;inf.blockSize=16;inf.opensslName='aes-256-'+cipher.slice(7,10);break;default:throw(new Error('Unsupported openssl cipher "'+cipher+'"'));}
return(inf);}}),(function(module,__webpack_exports__,__webpack_require__){"use strict";const NODE_TYPE={NODE_WEB_PEER:0,NODE_TERMINAL:1,};__webpack_exports__["a"]=(NODE_TYPE);}),(function(module,exports,__webpack_require__){(function(module){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;var bigInt=(function(undefined){"use strict";var BASE=1e7,LOG_BASE=7,MAX_INT=9007199254740992,MAX_INT_ARR=smallToArray(MAX_INT),DEFAULT_ALPHABET="0123456789abcdefghijklmnopqrstuvwxyz";var supportsNativeBigInt=typeof BigInt==="function";function Integer(v,radix,alphabet,caseSensitive){if(typeof v==="undefined")return Integer[0];if(typeof radix!=="undefined")return+radix===10&&!alphabet?parseValue(v):parseBase(v,radix,alphabet,caseSensitive);return parseValue(v);}
function BigInteger(value,sign){this.value=value;this.sign=sign;this.isSmall=false;}
BigInteger.prototype=Object.create(Integer.prototype);function SmallInteger(value){this.value=value;this.sign=value<0;this.isSmall=true;}
SmallInteger.prototype=Object.create(Integer.prototype);function NativeBigInt(value){this.value=value;}
NativeBigInt.prototype=Object.create(Integer.prototype);function isPrecise(n){return-MAX_INT<n&&n<MAX_INT;}
function smallToArray(n){if(n<1e7)
return[n];if(n<1e14)
return[n%1e7,Math.floor(n/1e7)];return[n%1e7,Math.floor(n/1e7)%1e7,Math.floor(n/1e14)];}
function arrayToSmall(arr){trim(arr);var length=arr.length;if(length<4&&compareAbs(arr,MAX_INT_ARR)<0){switch(length){case 0:return 0;case 1:return arr[0];case 2:return arr[0]+arr[1]*BASE;default:return arr[0]+(arr[1]+arr[2]*BASE)*BASE;}}
return arr;}
function trim(v){var i=v.length;while(v[--i]===0);v.length=i+1;}
function createArray(length){var x=new Array(length);var i=-1;while(++i<length){x[i]=0;}
return x;}
function truncate(n){if(n>0)return Math.floor(n);return Math.ceil(n);}
function add(a,b){var l_a=a.length,l_b=b.length,r=new Array(l_a),carry=0,base=BASE,sum,i;for(i=0;i<l_b;i++){sum=a[i]+b[i]+carry;carry=sum>=base?1:0;r[i]=sum-carry*base;}
while(i<l_a){sum=a[i]+carry;carry=sum===base?1:0;r[i++]=sum-carry*base;}
if(carry>0)r.push(carry);return r;}
function addAny(a,b){if(a.length>=b.length)return add(a,b);return add(b,a);}
function addSmall(a,carry){var l=a.length,r=new Array(l),base=BASE,sum,i;for(i=0;i<l;i++){sum=a[i]-base+carry;carry=Math.floor(sum/base);r[i]=sum-carry*base;carry+=1;}
while(carry>0){r[i++]=carry%base;carry=Math.floor(carry/base);}
return r;}
BigInteger.prototype.add=function(v){var n=parseValue(v);if(this.sign!==n.sign){return this.subtract(n.negate());}
var a=this.value,b=n.value;if(n.isSmall){return new BigInteger(addSmall(a,Math.abs(b)),this.sign);}
return new BigInteger(addAny(a,b),this.sign);};BigInteger.prototype.plus=BigInteger.prototype.add;SmallInteger.prototype.add=function(v){var n=parseValue(v);var a=this.value;if(a<0!==n.sign){return this.subtract(n.negate());}
var b=n.value;if(n.isSmall){if(isPrecise(a+b))return new SmallInteger(a+b);b=smallToArray(Math.abs(b));}
return new BigInteger(addSmall(b,Math.abs(a)),a<0);};SmallInteger.prototype.plus=SmallInteger.prototype.add;NativeBigInt.prototype.add=function(v){return new NativeBigInt(this.value+parseValue(v).value);}
NativeBigInt.prototype.plus=NativeBigInt.prototype.add;function subtract(a,b){var a_l=a.length,b_l=b.length,r=new Array(a_l),borrow=0,base=BASE,i,difference;for(i=0;i<b_l;i++){difference=a[i]-borrow-b[i];if(difference<0){difference+=base;borrow=1;}else borrow=0;r[i]=difference;}
for(i=b_l;i<a_l;i++){difference=a[i]-borrow;if(difference<0)difference+=base;else{r[i++]=difference;break;}
r[i]=difference;}
for(;i<a_l;i++){r[i]=a[i];}
trim(r);return r;}
function subtractAny(a,b,sign){var value;if(compareAbs(a,b)>=0){value=subtract(a,b);}else{value=subtract(b,a);sign=!sign;}
value=arrayToSmall(value);if(typeof value==="number"){if(sign)value=-value;return new SmallInteger(value);}
return new BigInteger(value,sign);}
function subtractSmall(a,b,sign){var l=a.length,r=new Array(l),carry=-b,base=BASE,i,difference;for(i=0;i<l;i++){difference=a[i]+carry;carry=Math.floor(difference/base);difference%=base;r[i]=difference<0?difference+base:difference;}
r=arrayToSmall(r);if(typeof r==="number"){if(sign)r=-r;return new SmallInteger(r);}return new BigInteger(r,sign);}
BigInteger.prototype.subtract=function(v){var n=parseValue(v);if(this.sign!==n.sign){return this.add(n.negate());}
var a=this.value,b=n.value;if(n.isSmall)
return subtractSmall(a,Math.abs(b),this.sign);return subtractAny(a,b,this.sign);};BigInteger.prototype.minus=BigInteger.prototype.subtract;SmallInteger.prototype.subtract=function(v){var n=parseValue(v);var a=this.value;if(a<0!==n.sign){return this.add(n.negate());}
var b=n.value;if(n.isSmall){return new SmallInteger(a-b);}
return subtractSmall(b,Math.abs(a),a>=0);};SmallInteger.prototype.minus=SmallInteger.prototype.subtract;NativeBigInt.prototype.subtract=function(v){return new NativeBigInt(this.value-parseValue(v).value);}
NativeBigInt.prototype.minus=NativeBigInt.prototype.subtract;BigInteger.prototype.negate=function(){return new BigInteger(this.value,!this.sign);};SmallInteger.prototype.negate=function(){var sign=this.sign;var small=new SmallInteger(-this.value);small.sign=!sign;return small;};NativeBigInt.prototype.negate=function(){return new NativeBigInt(-this.value);}
BigInteger.prototype.abs=function(){return new BigInteger(this.value,false);};SmallInteger.prototype.abs=function(){return new SmallInteger(Math.abs(this.value));};NativeBigInt.prototype.abs=function(){return new NativeBigInt(this.value>=0?this.value:-this.value);}
function multiplyLong(a,b){var a_l=a.length,b_l=b.length,l=a_l+b_l,r=createArray(l),base=BASE,product,carry,i,a_i,b_j;for(i=0;i<a_l;++i){a_i=a[i];for(var j=0;j<b_l;++j){b_j=b[j];product=a_i*b_j+r[i+j];carry=Math.floor(product/base);r[i+j]=product-carry*base;r[i+j+1]+=carry;}}
trim(r);return r;}
function multiplySmall(a,b){var l=a.length,r=new Array(l),base=BASE,carry=0,product,i;for(i=0;i<l;i++){product=a[i]*b+carry;carry=Math.floor(product/base);r[i]=product-carry*base;}
while(carry>0){r[i++]=carry%base;carry=Math.floor(carry/base);}
return r;}
function shiftLeft(x,n){var r=[];while(n-->0)r.push(0);return r.concat(x);}
function multiplyKaratsuba(x,y){var n=Math.max(x.length,y.length);if(n<=30)return multiplyLong(x,y);n=Math.ceil(n/2);var b=x.slice(n),a=x.slice(0,n),d=y.slice(n),c=y.slice(0,n);var ac=multiplyKaratsuba(a,c),bd=multiplyKaratsuba(b,d),abcd=multiplyKaratsuba(addAny(a,b),addAny(c,d));var product=addAny(addAny(ac,shiftLeft(subtract(subtract(abcd,ac),bd),n)),shiftLeft(bd,2*n));trim(product);return product;}
function useKaratsuba(l1,l2){return-0.012*l1-0.012*l2+0.000015*l1*l2>0;}
BigInteger.prototype.multiply=function(v){var n=parseValue(v),a=this.value,b=n.value,sign=this.sign!==n.sign,abs;if(n.isSmall){if(b===0)return Integer[0];if(b===1)return this;if(b===-1)return this.negate();abs=Math.abs(b);if(abs<BASE){return new BigInteger(multiplySmall(a,abs),sign);}
b=smallToArray(abs);}
if(useKaratsuba(a.length,b.length))
return new BigInteger(multiplyKaratsuba(a,b),sign);return new BigInteger(multiplyLong(a,b),sign);};BigInteger.prototype.times=BigInteger.prototype.multiply;function multiplySmallAndArray(a,b,sign){if(a<BASE){return new BigInteger(multiplySmall(b,a),sign);}
return new BigInteger(multiplyLong(b,smallToArray(a)),sign);}
SmallInteger.prototype._multiplyBySmall=function(a){if(isPrecise(a.value*this.value)){return new SmallInteger(a.value*this.value);}
return multiplySmallAndArray(Math.abs(a.value),smallToArray(Math.abs(this.value)),this.sign!==a.sign);};BigInteger.prototype._multiplyBySmall=function(a){if(a.value===0)return Integer[0];if(a.value===1)return this;if(a.value===-1)return this.negate();return multiplySmallAndArray(Math.abs(a.value),this.value,this.sign!==a.sign);};SmallInteger.prototype.multiply=function(v){return parseValue(v)._multiplyBySmall(this);};SmallInteger.prototype.times=SmallInteger.prototype.multiply;NativeBigInt.prototype.multiply=function(v){return new NativeBigInt(this.value*parseValue(v).value);}
NativeBigInt.prototype.times=NativeBigInt.prototype.multiply;function square(a){var l=a.length,r=createArray(l+l),base=BASE,product,carry,i,a_i,a_j;for(i=0;i<l;i++){a_i=a[i];carry=0-a_i*a_i;for(var j=i;j<l;j++){a_j=a[j];product=2*(a_i*a_j)+r[i+j]+carry;carry=Math.floor(product/base);r[i+j]=product-carry*base;}
r[i+l]=carry;}
trim(r);return r;}
BigInteger.prototype.square=function(){return new BigInteger(square(this.value),false);};SmallInteger.prototype.square=function(){var value=this.value*this.value;if(isPrecise(value))return new SmallInteger(value);return new BigInteger(square(smallToArray(Math.abs(this.value))),false);};NativeBigInt.prototype.square=function(v){return new NativeBigInt(this.value*this.value);}
function divMod1(a,b){var a_l=a.length,b_l=b.length,base=BASE,result=createArray(b.length),divisorMostSignificantDigit=b[b_l-1],lambda=Math.ceil(base/(2*divisorMostSignificantDigit)),remainder=multiplySmall(a,lambda),divisor=multiplySmall(b,lambda),quotientDigit,shift,carry,borrow,i,l,q;if(remainder.length<=a_l)remainder.push(0);divisor.push(0);divisorMostSignificantDigit=divisor[b_l-1];for(shift=a_l-b_l;shift>=0;shift--){quotientDigit=base-1;if(remainder[shift+b_l]!==divisorMostSignificantDigit){quotientDigit=Math.floor((remainder[shift+b_l]*base+remainder[shift+b_l-1])/divisorMostSignificantDigit);}
carry=0;borrow=0;l=divisor.length;for(i=0;i<l;i++){carry+=quotientDigit*divisor[i];q=Math.floor(carry/base);borrow+=remainder[shift+i]-(carry-q*base);carry=q;if(borrow<0){remainder[shift+i]=borrow+base;borrow=-1;}else{remainder[shift+i]=borrow;borrow=0;}}
while(borrow!==0){quotientDigit-=1;carry=0;for(i=0;i<l;i++){carry+=remainder[shift+i]-base+divisor[i];if(carry<0){remainder[shift+i]=carry+base;carry=0;}else{remainder[shift+i]=carry;carry=1;}}
borrow+=carry;}
result[shift]=quotientDigit;}
remainder=divModSmall(remainder,lambda)[0];return[arrayToSmall(result),arrayToSmall(remainder)];}
function divMod2(a,b){var a_l=a.length,b_l=b.length,result=[],part=[],base=BASE,guess,xlen,highx,highy,check;while(a_l){part.unshift(a[--a_l]);trim(part);if(compareAbs(part,b)<0){result.push(0);continue;}
xlen=part.length;highx=part[xlen-1]*base+part[xlen-2];highy=b[b_l-1]*base+b[b_l-2];if(xlen>b_l){highx=(highx+1)*base;}
guess=Math.ceil(highx/highy);do{check=multiplySmall(b,guess);if(compareAbs(check,part)<=0)break;guess--;}while(guess);result.push(guess);part=subtract(part,check);}
result.reverse();return[arrayToSmall(result),arrayToSmall(part)];}
function divModSmall(value,lambda){var length=value.length,quotient=createArray(length),base=BASE,i,q,remainder,divisor;remainder=0;for(i=length-1;i>=0;--i){divisor=remainder*base+value[i];q=truncate(divisor/lambda);remainder=divisor-q*lambda;quotient[i]=q|0;}
return[quotient,remainder|0];}
function divModAny(self,v){var value,n=parseValue(v);if(supportsNativeBigInt){return[new NativeBigInt(self.value/n.value),new NativeBigInt(self.value%n.value)];}
var a=self.value,b=n.value;var quotient;if(b===0)throw new Error("Cannot divide by zero");if(self.isSmall){if(n.isSmall){return[new SmallInteger(truncate(a/b)),new SmallInteger(a%b)];}
return[Integer[0],self];}
if(n.isSmall){if(b===1)return[self,Integer[0]];if(b==-1)return[self.negate(),Integer[0]];var abs=Math.abs(b);if(abs<BASE){value=divModSmall(a,abs);quotient=arrayToSmall(value[0]);var remainder=value[1];if(self.sign)remainder=-remainder;if(typeof quotient==="number"){if(self.sign!==n.sign)quotient=-quotient;return[new SmallInteger(quotient),new SmallInteger(remainder)];}
return[new BigInteger(quotient,self.sign!==n.sign),new SmallInteger(remainder)];}
b=smallToArray(abs);}
var comparison=compareAbs(a,b);if(comparison===-1)return[Integer[0],self];if(comparison===0)return[Integer[self.sign===n.sign?1:-1],Integer[0]];if(a.length+b.length<=200)
value=divMod1(a,b);else value=divMod2(a,b);quotient=value[0];var qSign=self.sign!==n.sign,mod=value[1],mSign=self.sign;if(typeof quotient==="number"){if(qSign)quotient=-quotient;quotient=new SmallInteger(quotient);}else quotient=new BigInteger(quotient,qSign);if(typeof mod==="number"){if(mSign)mod=-mod;mod=new SmallInteger(mod);}else mod=new BigInteger(mod,mSign);return[quotient,mod];}
BigInteger.prototype.divmod=function(v){var result=divModAny(this,v);return{quotient:result[0],remainder:result[1]};};NativeBigInt.prototype.divmod=SmallInteger.prototype.divmod=BigInteger.prototype.divmod;BigInteger.prototype.divide=function(v){return divModAny(this,v)[0];};NativeBigInt.prototype.over=NativeBigInt.prototype.divide=SmallInteger.prototype.over=SmallInteger.prototype.divide=BigInteger.prototype.over=BigInteger.prototype.divide;BigInteger.prototype.mod=function(v){return divModAny(this,v)[1];};NativeBigInt.prototype.mod=NativeBigInt.prototype.remainder=SmallInteger.prototype.remainder=SmallInteger.prototype.mod=BigInteger.prototype.remainder=BigInteger.prototype.mod;BigInteger.prototype.pow=function(v){var n=parseValue(v),a=this.value,b=n.value,value,x,y;if(b===0)return Integer[1];if(a===0)return Integer[0];if(a===1)return Integer[1];if(a===-1)return n.isEven()?Integer[1]:Integer[-1];if(n.sign){return Integer[0];}
if(!n.isSmall)throw new Error("The exponent "+n.toString()+" is too large.");if(this.isSmall){if(isPrecise(value=Math.pow(a,b)))
return new SmallInteger(truncate(value));}
x=this;y=Integer[1];while(true){if(b&1===1){y=y.times(x);--b;}
if(b===0)break;b/=2;x=x.square();}
return y;};SmallInteger.prototype.pow=BigInteger.prototype.pow;var pow;if(supportsNativeBigInt){pow=eval("(a,b)=>a**b");}
NativeBigInt.prototype.pow=function(v){var n=parseValue(v);var a=this.value,b=n.value;if(b===BigInt(0))return Integer[1];if(a===BigInt(0))return Integer[0];if(a===BigInt(1))return Integer[1];if(a===BigInt(-1))return n.isEven()?Integer[1]:Integer[-1];if(n.isNegative())return new NativeBigInt(BigInt(0));return new NativeBigInt(pow(a,b));}
BigInteger.prototype.modPow=function(exp,mod){exp=parseValue(exp);mod=parseValue(mod);if(mod.isZero())throw new Error("Cannot take modPow with modulus 0");var r=Integer[1],base=this.mod(mod);while(exp.isPositive()){if(base.isZero())return Integer[0];if(exp.isOdd())r=r.multiply(base).mod(mod);exp=exp.divide(2);base=base.square().mod(mod);}
return r;};NativeBigInt.prototype.modPow=SmallInteger.prototype.modPow=BigInteger.prototype.modPow;function compareAbs(a,b){if(a.length!==b.length){return a.length>b.length?1:-1;}
for(var i=a.length-1;i>=0;i--){if(a[i]!==b[i])return a[i]>b[i]?1:-1;}
return 0;}
BigInteger.prototype.compareAbs=function(v){var n=parseValue(v),a=this.value,b=n.value;if(n.isSmall)return 1;return compareAbs(a,b);};SmallInteger.prototype.compareAbs=function(v){var n=parseValue(v),a=Math.abs(this.value),b=n.value;if(n.isSmall){b=Math.abs(b);return a===b?0:a>b?1:-1;}
return-1;};NativeBigInt.prototype.compareAbs=function(v){var a=this.value;var b=parseValue(v).value;a=a>=0?a:-a;b=b>=0?b:-b;return a===b?0:a>b?1:-1;}
BigInteger.prototype.compare=function(v){if(v===Infinity){return-1;}
if(v===-Infinity){return 1;}
var n=parseValue(v),a=this.value,b=n.value;if(this.sign!==n.sign){return n.sign?1:-1;}
if(n.isSmall){return this.sign?-1:1;}
return compareAbs(a,b)*(this.sign?-1:1);};BigInteger.prototype.compareTo=BigInteger.prototype.compare;SmallInteger.prototype.compare=function(v){if(v===Infinity){return-1;}
if(v===-Infinity){return 1;}
var n=parseValue(v),a=this.value,b=n.value;if(n.isSmall){return a==b?0:a>b?1:-1;}
if(a<0!==n.sign){return a<0?-1:1;}
return a<0?1:-1;};SmallInteger.prototype.compareTo=SmallInteger.prototype.compare;NativeBigInt.prototype.compare=function(v){if(v===Infinity){return-1;}
if(v===-Infinity){return 1;}
var a=this.value;var b=parseValue(v).value;return a===b?0:a>b?1:-1;}
NativeBigInt.prototype.compareTo=NativeBigInt.prototype.compare;BigInteger.prototype.equals=function(v){return this.compare(v)===0;};NativeBigInt.prototype.eq=NativeBigInt.prototype.equals=SmallInteger.prototype.eq=SmallInteger.prototype.equals=BigInteger.prototype.eq=BigInteger.prototype.equals;BigInteger.prototype.notEquals=function(v){return this.compare(v)!==0;};NativeBigInt.prototype.neq=NativeBigInt.prototype.notEquals=SmallInteger.prototype.neq=SmallInteger.prototype.notEquals=BigInteger.prototype.neq=BigInteger.prototype.notEquals;BigInteger.prototype.greater=function(v){return this.compare(v)>0;};NativeBigInt.prototype.gt=NativeBigInt.prototype.greater=SmallInteger.prototype.gt=SmallInteger.prototype.greater=BigInteger.prototype.gt=BigInteger.prototype.greater;BigInteger.prototype.lesser=function(v){return this.compare(v)<0;};NativeBigInt.prototype.lt=NativeBigInt.prototype.lesser=SmallInteger.prototype.lt=SmallInteger.prototype.lesser=BigInteger.prototype.lt=BigInteger.prototype.lesser;BigInteger.prototype.greaterOrEquals=function(v){return this.compare(v)>=0;};NativeBigInt.prototype.geq=NativeBigInt.prototype.greaterOrEquals=SmallInteger.prototype.geq=SmallInteger.prototype.greaterOrEquals=BigInteger.prototype.geq=BigInteger.prototype.greaterOrEquals;BigInteger.prototype.lesserOrEquals=function(v){return this.compare(v)<=0;};NativeBigInt.prototype.leq=NativeBigInt.prototype.lesserOrEquals=SmallInteger.prototype.leq=SmallInteger.prototype.lesserOrEquals=BigInteger.prototype.leq=BigInteger.prototype.lesserOrEquals;BigInteger.prototype.isEven=function(){return(this.value[0]&1)===0;};SmallInteger.prototype.isEven=function(){return(this.value&1)===0;};NativeBigInt.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0);}
BigInteger.prototype.isOdd=function(){return(this.value[0]&1)===1;};SmallInteger.prototype.isOdd=function(){return(this.value&1)===1;};NativeBigInt.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1);}
BigInteger.prototype.isPositive=function(){return!this.sign;};SmallInteger.prototype.isPositive=function(){return this.value>0;};NativeBigInt.prototype.isPositive=SmallInteger.prototype.isPositive;BigInteger.prototype.isNegative=function(){return this.sign;};SmallInteger.prototype.isNegative=function(){return this.value<0;};NativeBigInt.prototype.isNegative=SmallInteger.prototype.isNegative;BigInteger.prototype.isUnit=function(){return false;};SmallInteger.prototype.isUnit=function(){return Math.abs(this.value)===1;};NativeBigInt.prototype.isUnit=function(){return this.abs().value===BigInt(1);}
BigInteger.prototype.isZero=function(){return false;};SmallInteger.prototype.isZero=function(){return this.value===0;};NativeBigInt.prototype.isZero=function(){return this.value===BigInt(0);}
BigInteger.prototype.isDivisibleBy=function(v){var n=parseValue(v);if(n.isZero())return false;if(n.isUnit())return true;if(n.compareAbs(2)===0)return this.isEven();return this.mod(n).isZero();};NativeBigInt.prototype.isDivisibleBy=SmallInteger.prototype.isDivisibleBy=BigInteger.prototype.isDivisibleBy;function isBasicPrime(v){var n=v.abs();if(n.isUnit())return false;if(n.equals(2)||n.equals(3)||n.equals(5))return true;if(n.isEven()||n.isDivisibleBy(3)||n.isDivisibleBy(5))return false;if(n.lesser(49))return true;}
function millerRabinTest(n,a){var nPrev=n.prev(),b=nPrev,r=0,d,t,i,x;while(b.isEven())b=b.divide(2),r++;next:for(i=0;i<a.length;i++){if(n.lesser(a[i]))continue;x=bigInt(a[i]).modPow(b,n);if(x.isUnit()||x.equals(nPrev))continue;for(d=r-1;d!=0;d--){x=x.square().mod(n);if(x.isUnit())return false;if(x.equals(nPrev))continue next;}
return false;}
return true;}
BigInteger.prototype.isPrime=function(strict){var isPrime=isBasicPrime(this);if(isPrime!==undefined)return isPrime;var n=this.abs();var bits=n.bitLength();if(bits<=64)
return millerRabinTest(n,[2,325,9375,28178,450775,9780504,1795265022]);var logN=Math.log(2)*bits.toJSNumber();var t=Math.ceil((strict===true)?(2*Math.pow(logN,2)):logN);for(var a=[],i=0;i<t;i++){a.push(bigInt(i+2));}
return millerRabinTest(n,a);};NativeBigInt.prototype.isPrime=SmallInteger.prototype.isPrime=BigInteger.prototype.isPrime;BigInteger.prototype.isProbablePrime=function(iterations){var isPrime=isBasicPrime(this);if(isPrime!==undefined)return isPrime;var n=this.abs();var t=iterations===undefined?5:iterations;for(var a=[],i=0;i<t;i++){a.push(bigInt.randBetween(2,n.minus(2)));}
return millerRabinTest(n,a);};NativeBigInt.prototype.isProbablePrime=SmallInteger.prototype.isProbablePrime=BigInteger.prototype.isProbablePrime;BigInteger.prototype.modInv=function(n){var t=bigInt.zero,newT=bigInt.one,r=parseValue(n),newR=this.abs(),q,lastT,lastR;while(!newR.isZero()){q=r.divide(newR);lastT=t;lastR=r;t=newT;r=newR;newT=lastT.subtract(q.multiply(newT));newR=lastR.subtract(q.multiply(newR));}
if(!r.isUnit())throw new Error(this.toString()+" and "+n.toString()+" are not co-prime");if(t.compare(0)===-1){t=t.add(n);}
if(this.isNegative()){return t.negate();}
return t;};NativeBigInt.prototype.modInv=SmallInteger.prototype.modInv=BigInteger.prototype.modInv;BigInteger.prototype.next=function(){var value=this.value;if(this.sign){return subtractSmall(value,1,this.sign);}
return new BigInteger(addSmall(value,1),this.sign);};SmallInteger.prototype.next=function(){var value=this.value;if(value+1<MAX_INT)return new SmallInteger(value+1);return new BigInteger(MAX_INT_ARR,false);};NativeBigInt.prototype.next=function(){return new NativeBigInt(this.value+BigInt(1));}
BigInteger.prototype.prev=function(){var value=this.value;if(this.sign){return new BigInteger(addSmall(value,1),true);}
return subtractSmall(value,1,this.sign);};SmallInteger.prototype.prev=function(){var value=this.value;if(value-1>-MAX_INT)return new SmallInteger(value-1);return new BigInteger(MAX_INT_ARR,true);};NativeBigInt.prototype.prev=function(){return new NativeBigInt(this.value-BigInt(1));}
var powersOfTwo=[1];while(2*powersOfTwo[powersOfTwo.length-1]<=BASE)powersOfTwo.push(2*powersOfTwo[powersOfTwo.length-1]);var powers2Length=powersOfTwo.length,highestPower2=powersOfTwo[powers2Length-1];function shift_isSmall(n){return Math.abs(n)<=BASE;}
BigInteger.prototype.shiftLeft=function(v){var n=parseValue(v).toJSNumber();if(!shift_isSmall(n)){throw new Error(String(n)+" is too large for shifting.");}
if(n<0)return this.shiftRight(-n);var result=this;if(result.isZero())return result;while(n>=powers2Length){result=result.multiply(highestPower2);n-=powers2Length-1;}
return result.multiply(powersOfTwo[n]);};NativeBigInt.prototype.shiftLeft=SmallInteger.prototype.shiftLeft=BigInteger.prototype.shiftLeft;BigInteger.prototype.shiftRight=function(v){var remQuo;var n=parseValue(v).toJSNumber();if(!shift_isSmall(n)){throw new Error(String(n)+" is too large for shifting.");}
if(n<0)return this.shiftLeft(-n);var result=this;while(n>=powers2Length){if(result.isZero()||(result.isNegative()&&result.isUnit()))return result;remQuo=divModAny(result,highestPower2);result=remQuo[1].isNegative()?remQuo[0].prev():remQuo[0];n-=powers2Length-1;}
remQuo=divModAny(result,powersOfTwo[n]);return remQuo[1].isNegative()?remQuo[0].prev():remQuo[0];};NativeBigInt.prototype.shiftRight=SmallInteger.prototype.shiftRight=BigInteger.prototype.shiftRight;function bitwise(x,y,fn){y=parseValue(y);var xSign=x.isNegative(),ySign=y.isNegative();var xRem=xSign?x.not():x,yRem=ySign?y.not():y;var xDigit=0,yDigit=0;var xDivMod=null,yDivMod=null;var result=[];while(!xRem.isZero()||!yRem.isZero()){xDivMod=divModAny(xRem,highestPower2);xDigit=xDivMod[1].toJSNumber();if(xSign){xDigit=highestPower2-1-xDigit;}
yDivMod=divModAny(yRem,highestPower2);yDigit=yDivMod[1].toJSNumber();if(ySign){yDigit=highestPower2-1-yDigit;}
xRem=xDivMod[0];yRem=yDivMod[0];result.push(fn(xDigit,yDigit));}
var sum=fn(xSign?1:0,ySign?1:0)!==0?bigInt(-1):bigInt(0);for(var i=result.length-1;i>=0;i-=1){sum=sum.multiply(highestPower2).add(bigInt(result[i]));}
return sum;}
BigInteger.prototype.not=function(){return this.negate().prev();};NativeBigInt.prototype.not=SmallInteger.prototype.not=BigInteger.prototype.not;BigInteger.prototype.and=function(n){return bitwise(this,n,function(a,b){return a&b;});};NativeBigInt.prototype.and=SmallInteger.prototype.and=BigInteger.prototype.and;BigInteger.prototype.or=function(n){return bitwise(this,n,function(a,b){return a|b;});};NativeBigInt.prototype.or=SmallInteger.prototype.or=BigInteger.prototype.or;BigInteger.prototype.xor=function(n){return bitwise(this,n,function(a,b){return a^b;});};NativeBigInt.prototype.xor=SmallInteger.prototype.xor=BigInteger.prototype.xor;var LOBMASK_I=1<<30,LOBMASK_BI=(BASE&-BASE)*(BASE&-BASE)|LOBMASK_I;function roughLOB(n){var v=n.value,x=typeof v==="number"?v|LOBMASK_I:typeof v==="bigint"?v|BigInt(LOBMASK_I):v[0]+v[1]*BASE|LOBMASK_BI;return x&-x;}
function integerLogarithm(value,base){if(base.compareTo(value)<=0){var tmp=integerLogarithm(value,base.square(base));var p=tmp.p;var e=tmp.e;var t=p.multiply(base);return t.compareTo(value)<=0?{p:t,e:e*2+1}:{p:p,e:e*2};}
return{p:bigInt(1),e:0};}
BigInteger.prototype.bitLength=function(){var n=this;if(n.compareTo(bigInt(0))<0){n=n.negate().subtract(bigInt(1));}
if(n.compareTo(bigInt(0))===0){return bigInt(0);}
return bigInt(integerLogarithm(n,bigInt(2)).e).add(bigInt(1));}
NativeBigInt.prototype.bitLength=SmallInteger.prototype.bitLength=BigInteger.prototype.bitLength;function max(a,b){a=parseValue(a);b=parseValue(b);return a.greater(b)?a:b;}
function min(a,b){a=parseValue(a);b=parseValue(b);return a.lesser(b)?a:b;}
function gcd(a,b){a=parseValue(a).abs();b=parseValue(b).abs();if(a.equals(b))return a;if(a.isZero())return b;if(b.isZero())return a;var c=Integer[1],d,t;while(a.isEven()&&b.isEven()){d=min(roughLOB(a),roughLOB(b));a=a.divide(d);b=b.divide(d);c=c.multiply(d);}
while(a.isEven()){a=a.divide(roughLOB(a));}
do{while(b.isEven()){b=b.divide(roughLOB(b));}
if(a.greater(b)){t=b;b=a;a=t;}
b=b.subtract(a);}while(!b.isZero());return c.isUnit()?a:a.multiply(c);}
function lcm(a,b){a=parseValue(a).abs();b=parseValue(b).abs();return a.divide(gcd(a,b)).multiply(b);}
function randBetween(a,b){a=parseValue(a);b=parseValue(b);var low=min(a,b),high=max(a,b);var range=high.subtract(low).add(1);if(range.isSmall)return low.add(Math.floor(Math.random()*range));var digits=toBase(range,BASE).value;var result=[],restricted=true;for(var i=0;i<digits.length;i++){var top=restricted?digits[i]:BASE;var digit=truncate(Math.random()*top);result.push(digit);if(digit<top)restricted=false;}
return low.add(Integer.fromArray(result,BASE,false));}
var parseBase=function(text,base,alphabet,caseSensitive){alphabet=alphabet||DEFAULT_ALPHABET;text=String(text);if(!caseSensitive){text=text.toLowerCase();alphabet=alphabet.toLowerCase();}
var length=text.length;var i;var absBase=Math.abs(base);var alphabetValues={};for(i=0;i<alphabet.length;i++){alphabetValues[alphabet[i]]=i;}
for(i=0;i<length;i++){var c=text[i];if(c==="-")continue;if(c in alphabetValues){if(alphabetValues[c]>=absBase){if(c==="1"&&absBase===1)continue;throw new Error(c+" is not a valid digit in base "+base+".");}}}
base=parseValue(base);var digits=[];var isNegative=text[0]==="-";for(i=isNegative?1:0;i<text.length;i++){var c=text[i];if(c in alphabetValues)digits.push(parseValue(alphabetValues[c]));else if(c==="<"){var start=i;do{i++;}while(text[i]!==">"&&i<text.length);digits.push(parseValue(text.slice(start+1,i)));}
else throw new Error(c+" is not a valid character");}
return parseBaseFromArray(digits,base,isNegative);};function parseBaseFromArray(digits,base,isNegative){var val=Integer[0],pow=Integer[1],i;for(i=digits.length-1;i>=0;i--){val=val.add(digits[i].times(pow));pow=pow.times(base);}
return isNegative?val.negate():val;}
function stringify(digit,alphabet){alphabet=alphabet||DEFAULT_ALPHABET;if(digit<alphabet.length){return alphabet[digit];}
return "<"+digit+">";}
function toBase(n,base){base=bigInt(base);if(base.isZero()){if(n.isZero())return{value:[0],isNegative:false};throw new Error("Cannot convert nonzero numbers to base 0.");}
if(base.equals(-1)){if(n.isZero())return{value:[0],isNegative:false};if(n.isNegative())
return{value:[].concat.apply([],Array.apply(null,Array(-n.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:false};var arr=Array.apply(null,Array(n.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);arr.unshift([1]);return{value:[].concat.apply([],arr),isNegative:false};}
var neg=false;if(n.isNegative()&&base.isPositive()){neg=true;n=n.abs();}
if(base.isUnit()){if(n.isZero())return{value:[0],isNegative:false};return{value:Array.apply(null,Array(n.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:neg};}
var out=[];var left=n,divmod;while(left.isNegative()||left.compareAbs(base)>=0){divmod=left.divmod(base);left=divmod.quotient;var digit=divmod.remainder;if(digit.isNegative()){digit=base.minus(digit).abs();left=left.next();}
out.push(digit.toJSNumber());}
out.push(left.toJSNumber());return{value:out.reverse(),isNegative:neg};}
function toBaseString(n,base,alphabet){var arr=toBase(n,base);return(arr.isNegative?"-":"")+arr.value.map(function(x){return stringify(x,alphabet);}).join('');}
BigInteger.prototype.toArray=function(radix){return toBase(this,radix);};SmallInteger.prototype.toArray=function(radix){return toBase(this,radix);};NativeBigInt.prototype.toArray=function(radix){return toBase(this,radix);};BigInteger.prototype.toString=function(radix,alphabet){if(radix===undefined)radix=10;if(radix!==10)return toBaseString(this,radix,alphabet);var v=this.value,l=v.length,str=String(v[--l]),zeros="0000000",digit;while(--l>=0){digit=String(v[l]);str+=zeros.slice(digit.length)+digit;}
var sign=this.sign?"-":"";return sign+str;};SmallInteger.prototype.toString=function(radix,alphabet){if(radix===undefined)radix=10;if(radix!=10)return toBaseString(this,radix,alphabet);return String(this.value);};NativeBigInt.prototype.toString=SmallInteger.prototype.toString;NativeBigInt.prototype.toJSON=BigInteger.prototype.toJSON=SmallInteger.prototype.toJSON=function(){return this.toString();}
BigInteger.prototype.valueOf=function(){return parseInt(this.toString(),10);};BigInteger.prototype.toJSNumber=BigInteger.prototype.valueOf;SmallInteger.prototype.valueOf=function(){return this.value;};SmallInteger.prototype.toJSNumber=SmallInteger.prototype.valueOf;NativeBigInt.prototype.valueOf=NativeBigInt.prototype.toJSNumber=function(){return parseInt(this.toString(),10);}
function parseStringValue(v){if(isPrecise(+v)){var x=+v;if(x===truncate(x))
return supportsNativeBigInt?new NativeBigInt(BigInt(x)):new SmallInteger(x);throw new Error("Invalid integer: "+v);}
var sign=v[0]==="-";if(sign)v=v.slice(1);var split=v.split(/e/i);if(split.length>2)throw new Error("Invalid integer: "+split.join("e"));if(split.length===2){var exp=split[1];if(exp[0]==="+")exp=exp.slice(1);exp=+exp;if(exp!==truncate(exp)||!isPrecise(exp))throw new Error("Invalid integer: "+exp+" is not a valid exponent.");var text=split[0];var decimalPlace=text.indexOf(".");if(decimalPlace>=0){exp-=text.length-decimalPlace-1;text=text.slice(0,decimalPlace)+text.slice(decimalPlace+1);}
if(exp<0)throw new Error("Cannot include negative exponent part for integers");text+=(new Array(exp+1)).join("0");v=text;}
var isValid=/^([0-9][0-9]*)$/.test(v);if(!isValid)throw new Error("Invalid integer: "+v);if(supportsNativeBigInt){return new NativeBigInt(BigInt(sign?"-"+v:v));}
var r=[],max=v.length,l=LOG_BASE,min=max-l;while(max>0){r.push(+v.slice(min,max));min-=l;if(min<0)min=0;max-=l;}
trim(r);return new BigInteger(r,sign);}
function parseNumberValue(v){if(supportsNativeBigInt){return new NativeBigInt(BigInt(v));}
if(isPrecise(v)){if(v!==truncate(v))throw new Error(v+" is not an integer.");return new SmallInteger(v);}
return parseStringValue(v.toString());}
function parseValue(v){if(typeof v==="number"){return parseNumberValue(v);}
if(typeof v==="string"){return parseStringValue(v);}
if(typeof v==="bigint"){return new NativeBigInt(v);}
return v;}
for(var i=0;i<1000;i++){Integer[i]=parseValue(i);if(i>0)Integer[-i]=parseValue(-i);}
Integer.one=Integer[1];Integer.zero=Integer[0];Integer.minusOne=Integer[-1];Integer.max=max;Integer.min=min;Integer.gcd=gcd;Integer.lcm=lcm;Integer.isInstance=function(x){return x instanceof BigInteger||x instanceof SmallInteger||x instanceof NativeBigInt;};Integer.randBetween=randBetween;Integer.fromArray=function(digits,base,isNegative){return parseBaseFromArray(digits.map(parseValue),parseValue(base||10),isNegative);};return Integer;})();if(typeof module!=="undefined"&&module.hasOwnProperty("exports")){module.exports=bigInt;}
if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=(function(){return bigInt;}).apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));}}.call(exports,__webpack_require__(83)(module)))}),(function(module,exports,__webpack_require__){var typeforce=__webpack_require__(23)
var UINT31_MAX=Math.pow(2,31)-1
function UInt31(value){return typeforce.UInt32(value)&&value<=UINT31_MAX}
function BIP32Path(value){return typeforce.String(value)&&value.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}
BIP32Path.toJSON=function(){return 'BIP32 derivation path'}
var SATOSHI_MAX=21*1e14
function Satoshi(value){return typeforce.UInt53(value)&&value<=SATOSHI_MAX}
var BigInt=typeforce.quacksLike('BigInteger')
var ECPoint=typeforce.quacksLike('Point')
var ECSignature=typeforce.compile({r:BigInt,s:BigInt})
var Network=typeforce.compile({messagePrefix:typeforce.oneOf(typeforce.Buffer,typeforce.String),bip32:{public:typeforce.UInt32,private:typeforce.UInt32},pubKeyHash:typeforce.UInt8,scriptHash:typeforce.UInt8,wif:typeforce.UInt8})
var types={BigInt:BigInt,BIP32Path:BIP32Path,Buffer256bit:typeforce.BufferN(32),ECPoint:ECPoint,ECSignature:ECSignature,Hash160bit:typeforce.BufferN(20),Hash256bit:typeforce.BufferN(32),Network:Network,Satoshi:Satoshi,UInt31:UInt31}
for(var typeName in typeforce){types[typeName]=typeforce[typeName]}
module.exports=types}),(function(module,exports,__webpack_require__){module.exports=PrivateKey;var assert=__webpack_require__(15);var Buffer=__webpack_require__(21).Buffer;var algs=__webpack_require__(41);var crypto=__webpack_require__(24);var Fingerprint=__webpack_require__(134);var Signature=__webpack_require__(78);var errs=__webpack_require__(72);var util=__webpack_require__(25);var utils=__webpack_require__(34);var dhe=__webpack_require__(242);var generateECDSA=dhe.generateECDSA;var generateED25519=dhe.generateED25519;var edCompat=__webpack_require__(376);var nacl=__webpack_require__(173);var Key=__webpack_require__(33);var InvalidAlgorithmError=errs.InvalidAlgorithmError;var KeyParseError=errs.KeyParseError;var KeyEncryptedError=errs.KeyEncryptedError;var formats={};formats['auto']=__webpack_require__(377);formats['pem']=__webpack_require__(88);formats['pkcs1']=__webpack_require__(243);formats['pkcs8']=__webpack_require__(137);formats['rfc4253']=__webpack_require__(89);formats['ssh-private']=__webpack_require__(174);formats['openssh']=formats['ssh-private'];formats['ssh']=formats['ssh-private'];formats['dnssec']=__webpack_require__(244);function PrivateKey(opts){assert.object(opts,'options');Key.call(this,opts);this._pubCache=undefined;}
util.inherits(PrivateKey,Key);PrivateKey.formats=formats;PrivateKey.prototype.toBuffer=function(format,options){if(format===undefined)
format='pkcs1';assert.string(format,'format');assert.object(formats[format],'formats[format]');assert.optionalObject(options,'options');return(formats[format].write(this,options));};PrivateKey.prototype.hash=function(algo,type){return(this.toPublic().hash(algo,type));};PrivateKey.prototype.fingerprint=function(algo,type){return(this.toPublic().fingerprint(algo,type));};PrivateKey.prototype.toPublic=function(){if(this._pubCache)
return(this._pubCache);var algInfo=algs.info[this.type];var pubParts=[];for(var i=0;i<algInfo.parts.length;++i){var p=algInfo.parts[i];pubParts.push(this.part[p]);}
this._pubCache=new Key({type:this.type,source:this,parts:pubParts});if(this.comment)
this._pubCache.comment=this.comment;return(this._pubCache);};PrivateKey.prototype.derive=function(newType){assert.string(newType,'type');var priv,pub,pair;if(this.type==='ed25519'&&newType==='curve25519'){priv=this.part.k.data;if(priv[0]===0x00)
priv=priv.slice(1);pair=nacl.box.keyPair.fromSecretKey(new Uint8Array(priv));pub=Buffer.from(pair.publicKey);return(new PrivateKey({type:'curve25519',parts:[{name:'A',data:utils.mpNormalize(pub)},{name:'k',data:utils.mpNormalize(priv)}]}));}else if(this.type==='curve25519'&&newType==='ed25519'){priv=this.part.k.data;if(priv[0]===0x00)
priv=priv.slice(1);pair=nacl.sign.keyPair.fromSeed(new Uint8Array(priv));pub=Buffer.from(pair.publicKey);return(new PrivateKey({type:'ed25519',parts:[{name:'A',data:utils.mpNormalize(pub)},{name:'k',data:utils.mpNormalize(priv)}]}));}
throw(new Error('Key derivation not supported from '+this.type+
' to '+newType));};PrivateKey.prototype.createVerify=function(hashAlgo){return(this.toPublic().createVerify(hashAlgo));};PrivateKey.prototype.createSign=function(hashAlgo){if(hashAlgo===undefined)
hashAlgo=this.defaultHashAlgorithm();assert.string(hashAlgo,'hash algorithm');if(this.type==='ed25519'&&edCompat!==undefined)
return(new edCompat.Signer(this,hashAlgo));if(this.type==='curve25519')
throw(new Error('Curve25519 keys are not suitable for '+
'signing or verification'));var v,nm,err;try{nm=hashAlgo.toUpperCase();v=crypto.createSign(nm);}catch(e){err=e;}
if(v===undefined||(err instanceof Error&&err.message.match(/Unknown message digest/))){nm='RSA-';nm+=hashAlgo.toUpperCase();v=crypto.createSign(nm);}
assert.ok(v,'failed to create verifier');var oldSign=v.sign.bind(v);var key=this.toBuffer('pkcs1');var type=this.type;var curve=this.curve;v.sign=function(){var sig=oldSign(key);if(typeof(sig)==='string')
sig=Buffer.from(sig,'binary');sig=Signature.parse(sig,type,'asn1');sig.hashAlgorithm=hashAlgo;sig.curve=curve;return(sig);};return(v);};PrivateKey.parse=function(data,format,options){if(typeof(data)!=='string')
assert.buffer(data,'data');if(format===undefined)
format='auto';assert.string(format,'format');if(typeof(options)==='string')
options={filename:options};assert.optionalObject(options,'options');if(options===undefined)
options={};assert.optionalString(options.filename,'options.filename');if(options.filename===undefined)
options.filename='(unnamed)';assert.object(formats[format],'formats[format]');try{var k=formats[format].read(data,options);assert.ok(k instanceof PrivateKey,'key is not a private key');if(!k.comment)
k.comment=options.filename;return(k);}catch(e){if(e.name==='KeyEncryptedError')
throw(e);throw(new KeyParseError(options.filename,format,e));}};PrivateKey.isPrivateKey=function(obj,ver){return(utils.isCompatible(obj,PrivateKey,ver));};PrivateKey.generate=function(type,options){if(options===undefined)
options={};assert.object(options,'options');switch(type){case 'ecdsa':if(options.curve===undefined)
options.curve='nistp256';assert.string(options.curve,'options.curve');return(generateECDSA(options.curve));case 'ed25519':return(generateED25519());default:throw(new Error('Key generation not supported with key '+
'type "'+type+'"'));}};PrivateKey.prototype._sshpkApiVersion=[1,6];PrivateKey._oldVersionDetect=function(obj){assert.func(obj.toPublic);assert.func(obj.createSign);if(obj.derive)
return([1,3]);if(obj.defaultHashAlgorithm)
return([1,2]);if(obj.formats['auto'])
return([1,1]);return([1,0]);};}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_1__Nodes_Waitlist_Object__=__webpack_require__(395);var __WEBPACK_IMPORTED_MODULE_2_common_sockets_protocol_extend_socket_Socket_Address__=__webpack_require__(76);var __WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Type__=__webpack_require__(35);var __WEBPACK_IMPORTED_MODULE_4_node_lists_waitlist_Nodes_Waitlist__=__webpack_require__(39);var __WEBPACK_IMPORTED_MODULE_5_common_utils_helpers_Download_Manager__=__webpack_require__(921);var __WEBPACK_IMPORTED_MODULE_6_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_7_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_8__types_Node_Consensus_Type__=__webpack_require__(44);var __WEBPACK_IMPORTED_MODULE_9_node_lists_geolocation_lists_GeoLocation_Lists__=__webpack_require__(231);var __WEBPACK_IMPORTED_MODULE_10_common_utils_Advanced_Emitter__=__webpack_require__(70);class NodesWaitlist{constructor(){console.log("NodesWaitlist constructor");this.NodesWaitlistObject=__WEBPACK_IMPORTED_MODULE_1__Nodes_Waitlist_Object__["a"];this.emitter=new __WEBPACK_IMPORTED_MODULE_10_common_utils_Advanced_Emitter__["a"](100);this.waitListFullNodes=[];this.waitListLightNodes=[];this.MAX_FULLNODE_WAITLIST_CONNECTIONS=500;this.MAX_LIGHTNODE_WAITLIST_CONNECTIONS=500;this.MAX_ERROR_TRIALS_FALLBACK=1000;this.MAX_ERROR_TRIALS_SIMPLE=50;setTimeout(this._deleteObsoleteFullNodesWaitlist.bind(this),(4+Math.floor(Math.random()*5))*60*1000);}
initializeWaitlist(){setTimeout(this._deleteUselessWaitlists.bind(this),20*1000+Math.random()*3000);}
async addNewNodeToWaitlist(addresses,port,nodeType,nodeConsensusType,connected,level,backedBy,socket,forceInsertingWaitlist=false){if(!addresses||addresses===[])return{result:false,waitlist:null};if(typeof addresses==="string"||!Array.isArray(addresses))addresses=[addresses];if(__WEBPACK_IMPORTED_MODULE_7_main_blockchain_Blockchain__["a"].MinerPoolManagement&&__WEBPACK_IMPORTED_MODULE_7_main_blockchain_Blockchain__["a"].MinerPoolManagement.minerPoolStarted&&nodeConsensusType!==__WEBPACK_IMPORTED_MODULE_8__types_Node_Consensus_Type__["a"].NODE_CONSENSUS_SERVER&&nodeType!==__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Type__["a"].NODE_WEB_PEER)
return{result:false,waitlist:null};let sckAddresses=[],waitListFound;for(let i=0;i<addresses.length;i++){try{let sckAddress=__WEBPACK_IMPORTED_MODULE_2_common_sockets_protocol_extend_socket_Socket_Address__["a"].createSocketAddress(addresses[i],port);if(sckAddress.address.indexOf("192.168")===0&&!__WEBPACK_IMPORTED_MODULE_6_consts_const_global__["a"].DEBUG)continue;for(let i=0;i<__WEBPACK_IMPORTED_MODULE_6_consts_const_global__["a"].SETTINGS.PARAMS.WAITLIST.BLOCKED_NODES.length;i++)
if(sckAddress.address.indexOf(__WEBPACK_IMPORTED_MODULE_6_consts_const_global__["a"].SETTINGS.PARAMS.WAITLIST.BLOCKED_NODES[i]))continue;if(nodeType===__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Type__["a"].NODE_TERMINAL&&true&&!sckAddress.SSL&&__WEBPACK_IMPORTED_MODULE_6_consts_const_global__["a"].SETTINGS.NODE.SSL&&!__WEBPACK_IMPORTED_MODULE_6_consts_const_global__["a"].DEBUG)continue;let answer=this._searchNodesWaitlist(sckAddress,port,nodeType);if(!answer.waitlist)
sckAddresses.push(sckAddress);else{answer.waitlist.pushBackedBy(backedBy,connected);if(socket)
answer.waitlist.socketConnected(socket);waitListFound=answer.waitlist;}}catch(exception){}}
if(sckAddresses.length>0){let waitListObject=new __WEBPACK_IMPORTED_MODULE_1__Nodes_Waitlist_Object__["a"](sckAddresses,nodeType,nodeConsensusType,level,backedBy,connected,socket);__WEBPACK_IMPORTED_MODULE_9_node_lists_geolocation_lists_GeoLocation_Lists__["a"].includeAddress(sckAddresses[0]);let list;if(waitListObject.nodeType===__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Type__["a"].NODE_TERMINAL)list=this.waitListFullNodes;else if(waitListObject.nodeType===__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Type__["a"].NODE_WEB_PEER)list=this.waitListLightNodes;if(socket){waitListObject.socket=socket;waitListObject.connected=true;}
list.push(waitListObject);this.emitter.emit("waitlist/new-node",waitListObject);return{result:true,waitlist:waitListObject};}else
return{result:false,waitlist:waitListFound};}
_findNodesWaitlist(address,port,listType){let list=[];let sckAddress=__WEBPACK_IMPORTED_MODULE_2_common_sockets_protocol_extend_socket_Socket_Address__["a"].createSocketAddress(address,port);if(listType===__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Type__["a"].NODE_TERMINAL)list=this.waitListFullNodes;else if(listType===__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Type__["a"].NODE_WEB_PEER)list=this.waitListLightNodes;for(let i=0;i<list.length;i++)
for(let j=0;j<list[i].sckAddresses.length;j++)
if(list[i].sckAddresses[j].matchAddress(sckAddress,{"ip":true,"uuid":true,"port":true}))
return i;return-1;}
_searchNodesWaitlist(address,port,listType){let list=[];if(listType===__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Type__["a"].NODE_TERMINAL)list=this.waitListFullNodes;else if(listType===__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Type__["a"].NODE_WEB_PEER)list=this.waitListLightNodes;let index=this._findNodesWaitlist(address,port,listType);if(index===-1)return{index:-1,waitlist:null};return{index:index,waitlist:list[index]};}
deleteWaitlistByConsensusNode(nodeConsensusType){for(let i=this.waitListFullNodes.length-1;i>=0;i--)
if(this.waitListFullNodes[i].nodeConsensusType===nodeConsensusType)
this.waitListFullNodes.splice(i,1);}
async _deleteObsoleteFullNodesWaitlist(){for(let i=this.waitListFullNodes.length-1;i>=0;i--){if(!this.waitListFullNodes[i])
this.waitListFullNodes.splice(i,1);else
if(!this.waitListFullNodes[i].isFallback){try{if((__WEBPACK_IMPORTED_MODULE_7_main_blockchain_Blockchain__["a"].MinerPoolManagement.minerPoolStarted||__WEBPACK_IMPORTED_MODULE_7_main_blockchain_Blockchain__["a"].MinerPoolManagement.poolStarted)&&[__WEBPACK_IMPORTED_MODULE_8__types_Node_Consensus_Type__["a"].NODE_CONSENSUS_SERVER,__WEBPACK_IMPORTED_MODULE_8__types_Node_Consensus_Type__["a"].NODE_CONSENSUS_POOL].indexOf(this.waitListFullNodes[i].nodeConsensusType)>=0)continue;let response=await __WEBPACK_IMPORTED_MODULE_5_common_utils_helpers_Download_Manager__["a"].downloadFile(this.waitListFullNodes[i].sckAddresses[0].getAddress(true,true),10000);if(response&&response.protocol===__WEBPACK_IMPORTED_MODULE_6_consts_const_global__["a"].SETTINGS.NODE.PROTOCOL&&response.version>=__WEBPACK_IMPORTED_MODULE_7_main_blockchain_Blockchain__["a"].versionCompatibility){this.waitListFullNodes[i].failsChecking=0;continue;}else{this.waitListFullNodes[i].failsChecking++;if(this.waitListFullNodes[i].failsChecking>=5)
this.waitListFullNodes.splice(i,1);}}catch(exception){}
await __WEBPACK_IMPORTED_MODULE_7_main_blockchain_Blockchain__["a"].blockchain.sleep(500+Math.floor(Math.random()*2000));}}
setTimeout(this._deleteObsoleteFullNodesWaitlist.bind(this),(4+Math.floor(Math.random()*5))*60*1000);}
async _deleteUselessWaitlist(listType){let list,max;if(listType===__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Type__["a"].NODE_TERMINAL){list=this.waitListFullNodes;max=this.MAX_FULLNODE_WAITLIST_CONNECTIONS;}else
if(listType===__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Type__["a"].NODE_WEB_PEER){list=this.waitListLightNodes;max=this.MAX_LIGHTNODE_WAITLIST_CONNECTIONS;}
for(let i=list.length-1;i>=0;i--){if(list[i].socket&&!list[i].socket.connected){list[i].connected=false;list[i].socket=undefined;}
if((list[i].isFallback&&list[i].errorTrials>this.MAX_ERROR_TRIALS_FALLBACK)||(!list[i].isFallback&&list[i].errorTrials>this.MAX_ERROR_TRIALS_SIMPLE)){this.emitter.emit("waitlist/delete-node",list[i]);list.splice(i,1);}}
await __WEBPACK_IMPORTED_MODULE_7_main_blockchain_Blockchain__["a"].blockchain.sleep(20);this._sortList(list);await __WEBPACK_IMPORTED_MODULE_7_main_blockchain_Blockchain__["a"].blockchain.sleep(50);if(list.length>max)
list.splice(max);return false;}
_sortList(list){for(let i=0;i<list.length;i++)
list[i].score=list[i].sortingScore();list.sort((a,b)=>b.score-a.score);}
_deleteUselessWaitlists(){this._deleteUselessWaitlist(__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Type__["a"].NODE_TERMINAL);this._deleteUselessWaitlist(__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Type__["a"].NODE_WEB_PEER);setTimeout(this._deleteUselessWaitlists.bind(this),30*1000+Math.random()*3000);}
resetWaitlist(listType){let list=[];if(listType===__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Type__["a"].NODE_TERMINAL)list=this.waitListFullNodes;else if(listType===__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Type__["a"].NODE_WEB_PEER)list=this.waitListLightNodes;for(let i=0;i<list.length;i++)
list[i].resetWaitlistNode();}
isAddressFallback(address){let answer=this._searchNodesWaitlist(address,undefined,__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Type__["a"].NODE_TERMINAL);if(answer.waitlist)return answer.waitlist.isFallback;return false;}
getJSONList(listType,fallback){let list=[];if(listType===__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Type__["a"].NODE_TERMINAL)list=this.waitListFullNodes;else if(listType===__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Type__["a"].NODE_WEB_PEER)list=this.waitListLightNodes;let answer=[];for(let i=0;i<list.length;i++)
if(!fallback||(fallback===list[i].isFallback))
answer.push(list[i].toJSON());return answer;}}
__webpack_exports__["a"]=(new NodesWaitlist());}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process){const BigInteger=__webpack_require__(36);class Utils{maxBigNumber(a,b){if(a.isGreaterThanOrEqualTo(b))return a;else return b;}
minBigNumber(a,b){if(a.isGreaterThanOrEqualTo(b))return b;else return a;}
get isWin(){return /^win/.test(process.platform);}
validateUrl(value){return /^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/i.test(value)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(value);}
getLocation(href){let match=href.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return match&&{href:href,protocol:match[1],host:match[2],hostname:match[3],port:match[4],pathname:match[5],search:match[6],hash:match[7]}}
divideBigIntegers(divident,divisor){let result=1;let X=new BigInteger(divisor);while(X.compare(divident)<=0){X=X.plus(divisor);result++;}
return result-1;}
makeQuerablePromise(promise){if(promise.isQuerable)return promise;let isPending=true;let isRejected=false;let isFulfilled=false;let result=promise.then(function(v){isFulfilled=true;isPending=false;return v;},function(e){isRejected=true;isPending=false;throw e;});result.isFulfilled=function(){return isFulfilled;};result.isPending=function(){return isPending;};result.isRejected=function(){return isRejected;};result.isQuerable=true;return result;}
sleep(ms){return new Promise(resolve=>setTimeout(resolve,ms));}
timePassed(time){let now=Math.floor((new Date().getTime()-time)/1000);let s=now%60;now=now/60;let m=now%60;now=now/60;let h=now%24;now=now/24;let d=now%30;now=now/30;return{d,h,m,s}}}
__webpack_exports__["a"]=(new Utils());}.call(__webpack_exports__,__webpack_require__(20)))}),(function(module,exports,__webpack_require__){var Buffer=__webpack_require__(21).Buffer;var algInfo={'dsa':{parts:['p','q','g','y'],sizePart:'p'},'rsa':{parts:['e','n'],sizePart:'n'},'ecdsa':{parts:['curve','Q'],sizePart:'Q'},'ed25519':{parts:['A'],sizePart:'A'}};algInfo['curve25519']=algInfo['ed25519'];var algPrivInfo={'dsa':{parts:['p','q','g','y','x']},'rsa':{parts:['n','e','d','iqmp','p','q']},'ecdsa':{parts:['curve','Q','d']},'ed25519':{parts:['A','k']}};algPrivInfo['curve25519']=algPrivInfo['ed25519'];var hashAlgs={'md5':true,'sha1':true,'sha256':true,'sha384':true,'sha512':true};var curves={'nistp256':{size:256,pkcs8oid:'1.2.840.10045.3.1.7',p:Buffer.from(('00'+
'ffffffff 00000001 00000000 00000000'+
'00000000 ffffffff ffffffff ffffffff').replace(/ /g,''),'hex'),a:Buffer.from(('00'+
'FFFFFFFF 00000001 00000000 00000000'+
'00000000 FFFFFFFF FFFFFFFF FFFFFFFC').replace(/ /g,''),'hex'),b:Buffer.from(('5ac635d8 aa3a93e7 b3ebbd55 769886bc'+
'651d06b0 cc53b0f6 3bce3c3e 27d2604b').replace(/ /g,''),'hex'),s:Buffer.from(('00'+
'c49d3608 86e70493 6a6678e1 139d26b7'+
'819f7e90').replace(/ /g,''),'hex'),n:Buffer.from(('00'+
'ffffffff 00000000 ffffffff ffffffff'+
'bce6faad a7179e84 f3b9cac2 fc632551').replace(/ /g,''),'hex'),G:Buffer.from(('04'+
'6b17d1f2 e12c4247 f8bce6e5 63a440f2'+
'77037d81 2deb33a0 f4a13945 d898c296'+
'4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16'+
'2bce3357 6b315ece cbb64068 37bf51f5').replace(/ /g,''),'hex')},'nistp384':{size:384,pkcs8oid:'1.3.132.0.34',p:Buffer.from(('00'+
'ffffffff ffffffff ffffffff ffffffff'+
'ffffffff ffffffff ffffffff fffffffe'+
'ffffffff 00000000 00000000 ffffffff').replace(/ /g,''),'hex'),a:Buffer.from(('00'+
'FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFF'+
'FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFE'+
'FFFFFFFF 00000000 00000000 FFFFFFFC').replace(/ /g,''),'hex'),b:Buffer.from(('b3312fa7 e23ee7e4 988e056b e3f82d19'+
'181d9c6e fe814112 0314088f 5013875a'+
'c656398d 8a2ed19d 2a85c8ed d3ec2aef').replace(/ /g,''),'hex'),s:Buffer.from(('00'+
'a335926a a319a27a 1d00896a 6773a482'+
'7acdac73').replace(/ /g,''),'hex'),n:Buffer.from(('00'+
'ffffffff ffffffff ffffffff ffffffff'+
'ffffffff ffffffff c7634d81 f4372ddf'+
'581a0db2 48b0a77a ecec196a ccc52973').replace(/ /g,''),'hex'),G:Buffer.from(('04'+
'aa87ca22 be8b0537 8eb1c71e f320ad74'+
'6e1d3b62 8ba79b98 59f741e0 82542a38'+
'5502f25d bf55296c 3a545e38 72760ab7'+
'3617de4a 96262c6f 5d9e98bf 9292dc29'+
'f8f41dbd 289a147c e9da3113 b5f0b8c0'+
'0a60b1ce 1d7e819d 7a431d7c 90ea0e5f').replace(/ /g,''),'hex')},'nistp521':{size:521,pkcs8oid:'1.3.132.0.35',p:Buffer.from(('01ffffff ffffffff ffffffff ffffffff'+
'ffffffff ffffffff ffffffff ffffffff'+
'ffffffff ffffffff ffffffff ffffffff'+
'ffffffff ffffffff ffffffff ffffffff'+
'ffff').replace(/ /g,''),'hex'),a:Buffer.from(('01FF'+
'FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFF'+
'FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFF'+
'FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFF'+
'FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFC').replace(/ /g,''),'hex'),b:Buffer.from(('51'+
'953eb961 8e1c9a1f 929a21a0 b68540ee'+
'a2da725b 99b315f3 b8b48991 8ef109e1'+
'56193951 ec7e937b 1652c0bd 3bb1bf07'+
'3573df88 3d2c34f1 ef451fd4 6b503f00').replace(/ /g,''),'hex'),s:Buffer.from(('00'+
'd09e8800 291cb853 96cc6717 393284aa'+
'a0da64ba').replace(/ /g,''),'hex'),n:Buffer.from(('01ff'+
'ffffffff ffffffff ffffffff ffffffff'+
'ffffffff ffffffff ffffffff fffffffa'+
'51868783 bf2f966b 7fcc0148 f709a5d0'+
'3bb5c9b8 899c47ae bb6fb71e 91386409').replace(/ /g,''),'hex'),G:Buffer.from(('04'+
'00c6 858e06b7 0404e9cd 9e3ecb66 2395b442'+
'9c648139 053fb521 f828af60 6b4d3dba'+
'a14b5e77 efe75928 fe1dc127 a2ffa8de'+
'3348b3c1 856a429b f97e7e31 c2e5bd66'+
'0118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9'+
'98f54449 579b4468 17afbd17 273e662c'+
'97ee7299 5ef42640 c550b901 3fad0761'+
'353c7086 a272c240 88be9476 9fd16650').replace(/ /g,''),'hex')}};module.exports={info:algInfo,privInfo:algPrivInfo,hashAlgs:hashAlgs,curves:curves};}),(function(module,exports){module.exports=function(it){if(typeof it!='function')throw TypeError(it+' is not a function!');return it;};}),(function(module,exports){module.exports={"OP_FALSE":0,"OP_0":0,"OP_PUSHDATA1":76,"OP_PUSHDATA2":77,"OP_PUSHDATA4":78,"OP_1NEGATE":79,"OP_RESERVED":80,"OP_TRUE":81,"OP_1":81,"OP_2":82,"OP_3":83,"OP_4":84,"OP_5":85,"OP_6":86,"OP_7":87,"OP_8":88,"OP_9":89,"OP_10":90,"OP_11":91,"OP_12":92,"OP_13":93,"OP_14":94,"OP_15":95,"OP_16":96,"OP_NOP":97,"OP_VER":98,"OP_IF":99,"OP_NOTIF":100,"OP_VERIF":101,"OP_VERNOTIF":102,"OP_ELSE":103,"OP_ENDIF":104,"OP_VERIFY":105,"OP_RETURN":106,"OP_TOALTSTACK":107,"OP_FROMALTSTACK":108,"OP_2DROP":109,"OP_2DUP":110,"OP_3DUP":111,"OP_2OVER":112,"OP_2ROT":113,"OP_2SWAP":114,"OP_IFDUP":115,"OP_DEPTH":116,"OP_DROP":117,"OP_DUP":118,"OP_NIP":119,"OP_OVER":120,"OP_PICK":121,"OP_ROLL":122,"OP_ROT":123,"OP_SWAP":124,"OP_TUCK":125,"OP_CAT":126,"OP_SUBSTR":127,"OP_LEFT":128,"OP_RIGHT":129,"OP_SIZE":130,"OP_INVERT":131,"OP_AND":132,"OP_OR":133,"OP_XOR":134,"OP_EQUAL":135,"OP_EQUALVERIFY":136,"OP_RESERVED1":137,"OP_RESERVED2":138,"OP_1ADD":139,"OP_1SUB":140,"OP_2MUL":141,"OP_2DIV":142,"OP_NEGATE":143,"OP_ABS":144,"OP_NOT":145,"OP_0NOTEQUAL":146,"OP_ADD":147,"OP_SUB":148,"OP_MUL":149,"OP_DIV":150,"OP_MOD":151,"OP_LSHIFT":152,"OP_RSHIFT":153,"OP_BOOLAND":154,"OP_BOOLOR":155,"OP_NUMEQUAL":156,"OP_NUMEQUALVERIFY":157,"OP_NUMNOTEQUAL":158,"OP_LESSTHAN":159,"OP_GREATERTHAN":160,"OP_LESSTHANOREQUAL":161,"OP_GREATERTHANOREQUAL":162,"OP_MIN":163,"OP_MAX":164,"OP_WITHIN":165,"OP_RIPEMD160":166,"OP_SHA1":167,"OP_SHA256":168,"OP_HASH160":169,"OP_HASH256":170,"OP_CODESEPARATOR":171,"OP_CHECKSIG":172,"OP_CHECKSIGVERIFY":173,"OP_CHECKMULTISIG":174,"OP_CHECKMULTISIGVERIFY":175,"OP_NOP1":176,"OP_NOP2":177,"OP_CHECKLOCKTIMEVERIFY":177,"OP_NOP3":178,"OP_CHECKSEQUENCEVERIFY":178,"OP_NOP4":179,"OP_NOP5":180,"OP_NOP6":181,"OP_NOP7":182,"OP_NOP8":183,"OP_NOP9":184,"OP_NOP10":185,"OP_PUBKEYHASH":253,"OP_PUBKEY":254,"OP_INVALIDOPCODE":255}}),(function(module,__webpack_exports__,__webpack_require__){"use strict";const NODES_CONSENSUS_TYPE={NODE_CONSENSUS_PEER:0,NODE_CONSENSUS_SERVER:1,NODE_CONSENSUS_SERVER_FOR_POOL:2,NODE_CONSENSUS_SERVER_FOR_MINER:3,NODE_CONSENSUS_POOL:4,NODE_CONSENSUS_MINER_POOL:5,};__webpack_exports__["a"]=(NODES_CONSENSUS_TYPE);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";let global={}
global.TERMINATED=false
global.MINIBLOCKCHAIN_LIGHT_CONFIGURATION_SAVED=true
global.MINIBLOCKCHAIN_LIGHT_SAVED=true
global.MINIBLOCKCHAIN_ADVANCED_SAVED=true
global.POOL_SAVED=true
global.INTERFACE_BLOCKCHAIN_SAVED=true
global.INTERFACE_BLOCKCHAIN_LOADING=false
global.SEMAPHORE_PROCESS_DONE=true
__webpack_exports__["a"]=(global);}),(function(module,exports,__webpack_require__){"use strict";var elliptic=exports;elliptic.version=__webpack_require__(690).version;elliptic.utils=__webpack_require__(691);elliptic.rand=__webpack_require__(331);elliptic.curve=__webpack_require__(167);elliptic.curves=__webpack_require__(696);elliptic.ec=__webpack_require__(704);elliptic.eddsa=__webpack_require__(708);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";const CONNECTION_TYPE={CONNECTION_WEBRTC:0,CONNECTION_CLIENT_SOCKET:1,CONNECTION_SERVER_SOCKET:2,};__webpack_exports__["a"]=(CONNECTION_TYPE);}),(function(module,exports,__webpack_require__){var dP=__webpack_require__(27);var createDesc=__webpack_require__(92);module.exports=__webpack_require__(26)?function(object,key,value){return dP.f(object,key,createDesc(1,value));}:function(object,key,value){object[key]=value;return object;};}),(function(module,exports,__webpack_require__){var global=__webpack_require__(11);var hide=__webpack_require__(48);var has=__webpack_require__(51);var SRC=__webpack_require__(93)('src');var TO_STRING='toString';var $toString=Function[TO_STRING];var TPL=(''+$toString).split(TO_STRING);__webpack_require__(57).inspectSource=function(it){return $toString.call(it);};(module.exports=function(O,key,val,safe){var isFunction=typeof val=='function';if(isFunction)has(val,'name')||hide(val,'name',key);if(O[key]===val)return;if(isFunction)has(val,SRC)||hide(val,SRC,O[key]?''+O[key]:TPL.join(String(key)));if(O===global){O[key]=val;}else if(!safe){delete O[key];hide(O,key,val);}else if(O[key]){O[key]=val;}else{hide(O,key,val);}})(Function.prototype,TO_STRING,function toString(){return typeof this=='function'&&this[SRC]||$toString.call(this);});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var fails=__webpack_require__(13);var defined=__webpack_require__(64);var quot=/"/g;var createHTML=function(string,tag,attribute,value){var S=String(defined(string));var p1='<'+tag;if(attribute!=='')p1+=' '+attribute+'="'+String(value).replace(quot,'&quot;')+'"';return p1+'>'+S+'</'+tag+'>';};module.exports=function(NAME,exec){var O={};O[NAME]=exec(createHTML);$export($export.P+$export.F*fails(function(){var test=''[NAME]('"');return test!==test.toLowerCase()||test.split('"').length>3;}),'String',O);};}),(function(module,exports){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key);};}),(function(module,exports,__webpack_require__){var IObject=__webpack_require__(123);var defined=__webpack_require__(64);module.exports=function(it){return IObject(defined(it));};}),(function(module,exports,__webpack_require__){var pIE=__webpack_require__(124);var createDesc=__webpack_require__(92);var toIObject=__webpack_require__(52);var toPrimitive=__webpack_require__(63);var has=__webpack_require__(51);var IE8_DOM_DEFINE=__webpack_require__(269);var gOPD=Object.getOwnPropertyDescriptor;exports.f=__webpack_require__(26)?gOPD:function getOwnPropertyDescriptor(O,P){O=toIObject(O);P=toPrimitive(P,true);if(IE8_DOM_DEFINE)try{return gOPD(O,P);}catch(e){}
if(has(O,P))return createDesc(!pIE.f.call(O,P),O[P]);};}),(function(module,exports,__webpack_require__){var has=__webpack_require__(51);var toObject=__webpack_require__(30);var IE_PROTO=__webpack_require__(183)('IE_PROTO');var ObjectProto=Object.prototype;module.exports=Object.getPrototypeOf||function(O){O=toObject(O);if(has(O,IE_PROTO))return O[IE_PROTO];if(typeof O.constructor=='function'&&O instanceof O.constructor){return O.constructor.prototype;}return O instanceof Object?ObjectProto:null;};}),(function(module,exports){module.exports=assert;function assert(val,msg){if(!val)
throw new Error(msg||'Assertion failed');}
assert.equal=function assertEqual(l,r,msg){if(l!=r)
throw new Error(msg||('Assertion failed: '+l+' != '+r));};}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_utils_coins_WebDollar_Coins__=__webpack_require__(32);class BlockchainMiningReward{getSumReward(height){if(typeof height!=="number")
throw{message:'height is not defined'};let marketSupply=4156801128;let minedDistributionAfterCycle=[0,18921600000,28382400000,33112800000,35478000000,36660600000,37251900000,37547550000,37695375000,37769287500,37806243750,37824721875,37833960938,37838580469,37840890234,37842045117,37842622559,37842911279,37843055640,37843127820,37843163910,37843181955,37843190977,37843195489,37843197744,37843198872];let blocksPerCycle=3153600;let cycle=Math.trunc(height/blocksPerCycle);let sum=0;if(height<=40)
for(let i=0;i<=height;i++)
sum+=this.getReward(i);else{sum=__WEBPACK_IMPORTED_MODULE_0_common_utils_coins_WebDollar_Coins__["a"].WEBD*(marketSupply+minedDistributionAfterCycle[cycle])+
(this.getReward(height)*(height%blocksPerCycle));if(height<=blocksPerCycle)
sum-=40*this.getReward(height);}
return sum;}
getReward(height){if(typeof height!=="number")
throw{message:'height is not defined'};let blocksPerCycle=3153600;if(height<=40){let v=[1,1867487789,1007804769,552321669,307400655,173745886,99728963,58133318,34413271,20688253,12630447,7830882,4930598,3152722,2047239,1350046,904119,614893,424689,297878,212180,153485,112752,84116,63728,49032,38311,30400,24497,20047,16660,14061,12051,10490,9272,8323,7588,7025,6604,6306,6113];return v[height]*__WEBPACK_IMPORTED_MODULE_0_common_utils_coins_WebDollar_Coins__["a"].WEBD;}
else{let cycleNumber=Math.trunc(height/blocksPerCycle);let reward=__WEBPACK_IMPORTED_MODULE_0_common_utils_coins_WebDollar_Coins__["a"].WEBD*6000/(1<<cycleNumber);let smallestReward=1;if(reward<smallestReward)
reward=smallestReward;return reward;}}}
__webpack_exports__["a"]=(new BlockchainMiningReward());}),(function(module,exports){var core=module.exports={version:'2.6.2'};if(typeof __e=='number')__e=core;}),(function(module,exports,__webpack_require__){var aFunction=__webpack_require__(42);module.exports=function(fn,that,length){aFunction(fn);if(that===undefined)return fn;switch(length){case 1:return function(a){return fn.call(that,a);};case 2:return function(a,b){return fn.call(that,a,b);};case 3:return function(a,b,c){return fn.call(that,a,b,c);};}
return function(){return fn.apply(that,arguments);};};}),(function(module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1);};}),(function(module,exports){var ceil=Math.ceil;var floor=Math.floor;module.exports=function(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it);};}),(function(module,exports,__webpack_require__){"use strict";var fails=__webpack_require__(13);module.exports=function(method,arg){return!!method&&fails(function(){arg?method.call(null,function(){},1):method.call(null);});};}),(function(module,exports){}),(function(module,exports,__webpack_require__){var isObject=__webpack_require__(14);module.exports=function(it,S){if(!isObject(it))return it;var fn,val;if(S&&typeof(fn=it.toString)=='function'&&!isObject(val=fn.call(it)))return val;if(typeof(fn=it.valueOf)=='function'&&!isObject(val=fn.call(it)))return val;if(!S&&typeof(fn=it.toString)=='function'&&!isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to primitive value");};}),(function(module,exports){module.exports=function(it){if(it==undefined)throw TypeError("Can't call method on  "+it);return it;};}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var core=__webpack_require__(57);var fails=__webpack_require__(13);module.exports=function(KEY,exec){var fn=(core.Object||{})[KEY]||Object[KEY];var exp={};exp[KEY]=exec(fn);$export($export.S+$export.F*fails(function(){fn(1);}),'Object',exp);};}),(function(module,exports,__webpack_require__){var ctx=__webpack_require__(58);var IObject=__webpack_require__(123);var toObject=__webpack_require__(30);var toLength=__webpack_require__(22);var asc=__webpack_require__(199);module.exports=function(TYPE,$create){var IS_MAP=TYPE==1;var IS_FILTER=TYPE==2;var IS_SOME=TYPE==3;var IS_EVERY=TYPE==4;var IS_FIND_INDEX=TYPE==6;var NO_HOLES=TYPE==5||IS_FIND_INDEX;var create=$create||asc;return function($this,callbackfn,that){var O=toObject($this);var self=IObject(O);var f=ctx(callbackfn,that,3);var length=toLength(self.length);var index=0;var result=IS_MAP?create($this,length):IS_FILTER?create($this,0):undefined;var val,res;for(;length>index;index++)if(NO_HOLES||index in self){val=self[index];res=f(val,index,O);if(TYPE){if(IS_MAP)result[index]=res;else if(res)switch(TYPE){case 3:return true;case 5:return val;case 6:return index;case 2:result.push(val);}else if(IS_EVERY)return false;}}
return IS_FIND_INDEX?-1:IS_SOME||IS_EVERY?IS_EVERY:result;};};}),(function(module,exports,__webpack_require__){module.exports=Stream;var EE=__webpack_require__(104).EventEmitter;var inherits=__webpack_require__(7);inherits(Stream,EE);Stream.Readable=__webpack_require__(127);Stream.Writable=__webpack_require__(655);Stream.Duplex=__webpack_require__(656);Stream.Transform=__webpack_require__(657);Stream.PassThrough=__webpack_require__(658);Stream.Stream=Stream;function Stream(){EE.call(this);}
Stream.prototype.pipe=function(dest,options){var source=this;function ondata(chunk){if(dest.writable){if(false===dest.write(chunk)&&source.pause){source.pause();}}}
source.on('data',ondata);function ondrain(){if(source.readable&&source.resume){source.resume();}}
dest.on('drain',ondrain);if(!dest._isStdio&&(!options||options.end!==false)){source.on('end',onend);source.on('close',onclose);}
var didOnEnd=false;function onend(){if(didOnEnd)return;didOnEnd=true;dest.end();}
function onclose(){if(didOnEnd)return;didOnEnd=true;if(typeof dest.destroy==='function')dest.destroy();}
function onerror(er){cleanup();if(EE.listenerCount(this,'error')===0){throw er;}}
source.on('error',onerror);dest.on('error',onerror);function cleanup(){source.removeListener('data',ondata);dest.removeListener('drain',ondrain);source.removeListener('end',onend);source.removeListener('close',onclose);source.removeListener('error',onerror);dest.removeListener('error',onerror);source.removeListener('end',cleanup);source.removeListener('close',cleanup);dest.removeListener('close',cleanup);}
source.on('end',cleanup);source.on('close',cleanup);dest.on('close',cleanup);dest.emit('pipe',source);return dest;};}),(function(module,exports,__webpack_require__){"use strict";var assert=__webpack_require__(55);var inherits=__webpack_require__(7);exports.inherits=inherits;function isSurrogatePair(msg,i){if((msg.charCodeAt(i)&0xFC00)!==0xD800){return false;}
if(i<0||i+1>=msg.length){return false;}
return(msg.charCodeAt(i+1)&0xFC00)===0xDC00;}
function toArray(msg,enc){if(Array.isArray(msg))
return msg.slice();if(!msg)
return[];var res=[];if(typeof msg==='string'){if(!enc){var p=0;for(var i=0;i<msg.length;i++){var c=msg.charCodeAt(i);if(c<128){res[p++]=c;}else if(c<2048){res[p++]=(c>>6)|192;res[p++]=(c&63)|128;}else if(isSurrogatePair(msg,i)){c=0x10000+((c&0x03FF)<<10)+(msg.charCodeAt(++i)&0x03FF);res[p++]=(c>>18)|240;res[p++]=((c>>12)&63)|128;res[p++]=((c>>6)&63)|128;res[p++]=(c&63)|128;}else{res[p++]=(c>>12)|224;res[p++]=((c>>6)&63)|128;res[p++]=(c&63)|128;}}}else if(enc==='hex'){msg=msg.replace(/[^a-z0-9]+/ig,'');if(msg.length%2!==0)
msg='0'+msg;for(i=0;i<msg.length;i+=2)
res.push(parseInt(msg[i]+msg[i+1],16));}}else{for(i=0;i<msg.length;i++)
res[i]=msg[i]|0;}
return res;}
exports.toArray=toArray;function toHex(msg){var res='';for(var i=0;i<msg.length;i++)
res+=zero2(msg[i].toString(16));return res;}
exports.toHex=toHex;function htonl(w){var res=(w>>>24)|((w>>>8)&0xff00)|((w<<8)&0xff0000)|((w&0xff)<<24);return res>>>0;}
exports.htonl=htonl;function toHex32(msg,endian){var res='';for(var i=0;i<msg.length;i++){var w=msg[i];if(endian==='little')
w=htonl(w);res+=zero8(w.toString(16));}
return res;}
exports.toHex32=toHex32;function zero2(word){if(word.length===1)
return '0'+word;else
return word;}
exports.zero2=zero2;function zero8(word){if(word.length===7)
return '0'+word;else if(word.length===6)
return '00'+word;else if(word.length===5)
return '000'+word;else if(word.length===4)
return '0000'+word;else if(word.length===3)
return '00000'+word;else if(word.length===2)
return '000000'+word;else if(word.length===1)
return '0000000'+word;else
return word;}
exports.zero8=zero8;function join32(msg,start,end,endian){var len=end-start;assert(len%4===0);var res=new Array(len/4);for(var i=0,k=start;i<res.length;i++,k+=4){var w;if(endian==='big')
w=(msg[k]<<24)|(msg[k+1]<<16)|(msg[k+2]<<8)|msg[k+3];else
w=(msg[k+3]<<24)|(msg[k+2]<<16)|(msg[k+1]<<8)|msg[k];res[i]=w>>>0;}
return res;}
exports.join32=join32;function split32(msg,endian){var res=new Array(msg.length*4);for(var i=0,k=0;i<msg.length;i++,k+=4){var m=msg[i];if(endian==='big'){res[k]=m>>>24;res[k+1]=(m>>>16)&0xff;res[k+2]=(m>>>8)&0xff;res[k+3]=m&0xff;}else{res[k+3]=m>>>24;res[k+2]=(m>>>16)&0xff;res[k+1]=(m>>>8)&0xff;res[k]=m&0xff;}}
return res;}
exports.split32=split32;function rotr32(w,b){return(w>>>b)|(w<<(32-b));}
exports.rotr32=rotr32;function rotl32(w,b){return(w<<b)|(w>>>(32-b));}
exports.rotl32=rotl32;function sum32(a,b){return(a+b)>>>0;}
exports.sum32=sum32;function sum32_3(a,b,c){return(a+b+c)>>>0;}
exports.sum32_3=sum32_3;function sum32_4(a,b,c,d){return(a+b+c+d)>>>0;}
exports.sum32_4=sum32_4;function sum32_5(a,b,c,d,e){return(a+b+c+d+e)>>>0;}
exports.sum32_5=sum32_5;function sum64(buf,pos,ah,al){var bh=buf[pos];var bl=buf[pos+1];var lo=(al+bl)>>>0;var hi=(lo<al?1:0)+ah+bh;buf[pos]=hi>>>0;buf[pos+1]=lo;}
exports.sum64=sum64;function sum64_hi(ah,al,bh,bl){var lo=(al+bl)>>>0;var hi=(lo<al?1:0)+ah+bh;return hi>>>0;}
exports.sum64_hi=sum64_hi;function sum64_lo(ah,al,bh,bl){var lo=al+bl;return lo>>>0;}
exports.sum64_lo=sum64_lo;function sum64_4_hi(ah,al,bh,bl,ch,cl,dh,dl){var carry=0;var lo=al;lo=(lo+bl)>>>0;carry+=lo<al?1:0;lo=(lo+cl)>>>0;carry+=lo<cl?1:0;lo=(lo+dl)>>>0;carry+=lo<dl?1:0;var hi=ah+bh+ch+dh+carry;return hi>>>0;}
exports.sum64_4_hi=sum64_4_hi;function sum64_4_lo(ah,al,bh,bl,ch,cl,dh,dl){var lo=al+bl+cl+dl;return lo>>>0;}
exports.sum64_4_lo=sum64_4_lo;function sum64_5_hi(ah,al,bh,bl,ch,cl,dh,dl,eh,el){var carry=0;var lo=al;lo=(lo+bl)>>>0;carry+=lo<al?1:0;lo=(lo+cl)>>>0;carry+=lo<cl?1:0;lo=(lo+dl)>>>0;carry+=lo<dl?1:0;lo=(lo+el)>>>0;carry+=lo<el?1:0;var hi=ah+bh+ch+dh+eh+carry;return hi>>>0;}
exports.sum64_5_hi=sum64_5_hi;function sum64_5_lo(ah,al,bh,bl,ch,cl,dh,dl,eh,el){var lo=al+bl+cl+dl+el;return lo>>>0;}
exports.sum64_5_lo=sum64_5_lo;function rotr64_hi(ah,al,num){var r=(al<<(32-num))|(ah>>>num);return r>>>0;}
exports.rotr64_hi=rotr64_hi;function rotr64_lo(ah,al,num){var r=(ah<<(32-num))|(al>>>num);return r>>>0;}
exports.rotr64_lo=rotr64_lo;function shr64_hi(ah,al,num){return ah>>>num;}
exports.shr64_hi=shr64_hi;function shr64_lo(ah,al,num){var r=(ah<<(32-num))|(al>>>num);return r>>>0;}
exports.shr64_lo=shr64_lo;}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_2_common_events_Status_Events__=__webpack_require__(12);var __WEBPACK_IMPORTED_MODULE_3_common_utils_helpers_Utils__=__webpack_require__(40);const atob=__webpack_require__(743);let pounchdb=(true)?(__webpack_require__(344).default):(require('pouchdb-node'));class InterfaceSatoshminDB{constructor(databaseName=__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].DATABASE_NAMES.DEFAULT_DATABASE){this._dbName=databaseName;this._beingRestarted=false;this._start();}
_start(){try{this.db=new pounchdb(this._dbName,{revs_limit:1});}catch(exception){console.error("InterfaceSatoshminDB exception",pounchdb);}}
async restart(){if(this._beingRestarted)
return await __WEBPACK_IMPORTED_MODULE_3_common_utils_helpers_Utils__["a"].sleep(1500);this._beingRestarted=true;this.close();await __WEBPACK_IMPORTED_MODULE_3_common_utils_helpers_Utils__["a"].sleep(1500);this._start();this._beingRestarted=false;}
async _createDocument(key,value){try{let deletion=await this._deleteDocumentAttachmentIfExist(key);let response=await this.db.put({_id:key,value:value});return response&&response.ok;}catch(err){if(err.status===409)
return this._updateDocument(key,value);else{console.error("_createDocument raised exception",key,err);throw err;}}}
async _updateDocument(key,value){try{let doc=await this.db.get(key);let response=await this.db.put({_id:key,_rev:doc._rev,value:value});return response&&response.ok;}catch(exception){console.error("_updateDocument error"+key,exception);throw exception;}}
async _getDocument(key){try{let response=await this.db.get(key,{attachments:true});if(!response)return null;else if(!response._attachments)return response.value;else return new Buffer(atob(response._attachments.key.data).toString('hex'),'hex');}catch(Exception){if(Exception.status===404)
return null;else{console.error("error _getDocument ",Exception);throw Exception;}}}
async _deleteDocument(key){try{let doc=await this.db.get(key,{attachments:true});if(!doc)return false;let response=await this.db.remove(doc);return response&&response.ok;}catch(err){if(err.status===404)
return true;else
if(err.status===500)
__WEBPACK_IMPORTED_MODULE_2_common_events_Status_Events__["a"].emit("blockchain/logs",{message:"IndexedDB Error",reason:exception.reason.toString()});return false;}}
async _saveDocumentAttachment(key,value){let attachment=value;if(true&&Buffer.isBuffer(value))
attachment=new Blob([value.toString('hex')]);else
attachment=new Buffer(value.toString('hex'));try{let deletion=await this._deleteDocument(key);if(!deletion)return false;let result=await this.db.put({_id:key,_attachments:{key:{content_type:'application/octet-binary',data:attachment}}});return result&&result.ok;}catch(err){if(err.status===409){return await this._updateDocumentAttachment(key,attachment);}else{if(err.status===404){try{let response=this._createDocument(key,null);return await this._saveDocumentAttachment(key,value);}catch(exception){console.error('_saveDocumentAttachment raised an error for key '+key,exception);}}else{console.error('_saveDocumentAttachment 222 raised an error for key '+key,err);throw err;}}}}
async _updateDocumentAttachment(key,value){try{let doc=await this.db.get(key,{attachments:true});if(!doc||!doc.ok)throw "db.get didn't work";let result=await this.db.put({_id:doc._id,_attachments:{key:{content_type:'application/octet-binary',data:value}},_rev:doc._rev});return result&&result.ok;}catch(err){console.error("error _updateDocumentAttachment2  "+key,err);throw err;}}
async _deleteDocumentAttachment(key){try{let doc=await this.db.get(key);let result;if(doc._attachments)result=await this.db.removeAttachment(key,this._dbName,doc._rev);else result=await this.db.remove(key,doc._rev);return result||result.ok;}catch(exception){throw exception;}}
async _deleteDocumentAttachmentIfExist(key){try{let deletion=await this._deleteDocumentAttachment(key);return deletion;}catch(err){return false;}}
_save(key,value){return new Promise(async(resolve)=>{try{if(Buffer.isBuffer(value))
resolve(await this._saveDocumentAttachment(key,value));else
resolve(await this._createDocument(key,value));}catch(exception){console.error("db.save error "+key,exception);if(Math.random()<0.1)console.error(key,value);if(exception.status===500)
__WEBPACK_IMPORTED_MODULE_2_common_events_Status_Events__["a"].emit("blockchain/logs",{message:"IndexedDB Error",reason:exception.reason.toString()});resolve(null);}})}
async save(key,value,timeout,trials=10){trials=1000000;let i=0;while(i<trials){let out=await this._save(key,value,timeout);if(out)
return out;if(i>0&&i%5===0)
await this.restart();i++;}
return null;}
_get(key,timeout){return new Promise(resolve=>{this._getDocument(key).then(answer=>{resolve({result:answer});}).catch(exception=>{console.error("db.get error "+key,exception);__WEBPACK_IMPORTED_MODULE_2_common_events_Status_Events__["a"].emit("blockchain/logs",{message:"IndexedDB Error",reason:exception.reason.toString()});resolve(null);});})}
async get(key,timeout=7000,trials=20){trials=1000000;let i=0;while(i<trials){let out=await this._get(key,timeout);if(out)
return out.result;if(i>0&&i%5===0)
await this.restart();i++;}
return null;}
async remove(key,trials=10){trials=1000000;let i=0;while(i<trials){let out=await this._deleteDocument(key);if(out)
return out;if(i>0&&i%5===0)
await this.restart();i++;}
return null;}
close(){if(this.db)
this.db.close();}}
__webpack_exports__["a"]=(InterfaceSatoshminDB);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);const EventEmitter=__webpack_require__(104);class AdvancedEmitter{constructor(maxListeners=100){this._emitter=new EventEmitter();this._emitter.setMaxListeners(maxListeners);this._events=this._emitter._events;this.emit=this._emitter.emit.bind(this._emitter);this.emitter=this._emitter;}
emit(){let answer;try{answer=this._emitter.emit.apply(this,arguments);}catch(exception){if(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].DEBUG)
console.error("Emit raised an error",exception);}
return answer;}
on(a,call){this._emitter.on(a,(...args)=>{try{call(...args);}catch(exception){if(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].DEBUG)
console.error("On raised an error",exception);}});return()=>this._emitter.removeListener(a,call);}
once(a,call){this._emitter.once(a,(...args)=>{try{call(...args);}catch(exception){if(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].DEBUG)
console.error("Once raised an error",exception);}});return()=>this._emitter.removeListener(a,call);}}
__webpack_exports__["a"]=(AdvancedEmitter);}),(function(module,exports,__webpack_require__){"use strict";(function(global){/*!
* The buffer module from node.js, for the browser.
*
* @author Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
* @license MIT
*/function compare(a,b){if(a===b){return 0;}
var x=a.length;var y=b.length;for(var i=0,len=Math.min(x,y);i<len;++i){if(a[i]!==b[i]){x=a[i];y=b[i];break;}}
if(x<y){return-1;}
if(y<x){return 1;}
return 0;}
function isBuffer(b){if(global.Buffer&&typeof global.Buffer.isBuffer==='function'){return global.Buffer.isBuffer(b);}
return!!(b!=null&&b._isBuffer);}
var util=__webpack_require__(25);var hasOwn=Object.prototype.hasOwnProperty;var pSlice=Array.prototype.slice;var functionsHaveNames=(function(){return function foo(){}.name==='foo';}());function pToString(obj){return Object.prototype.toString.call(obj);}
function isView(arrbuf){if(isBuffer(arrbuf)){return false;}
if(typeof global.ArrayBuffer!=='function'){return false;}
if(typeof ArrayBuffer.isView==='function'){return ArrayBuffer.isView(arrbuf);}
if(!arrbuf){return false;}
if(arrbuf instanceof DataView){return true;}
if(arrbuf.buffer&&arrbuf.buffer instanceof ArrayBuffer){return true;}
return false;}
var assert=module.exports=ok;var regex=/\s*function\s+([^\(\s]*)\s*/;function getName(func){if(!util.isFunction(func)){return;}
if(functionsHaveNames){return func.name;}
var str=func.toString();var match=str.match(regex);return match&&match[1];}
assert.AssertionError=function AssertionError(options){this.name='AssertionError';this.actual=options.actual;this.expected=options.expected;this.operator=options.operator;if(options.message){this.message=options.message;this.generatedMessage=false;}else{this.message=getMessage(this);this.generatedMessage=true;}
var stackStartFunction=options.stackStartFunction||fail;if(Error.captureStackTrace){Error.captureStackTrace(this,stackStartFunction);}else{var err=new Error();if(err.stack){var out=err.stack;var fn_name=getName(stackStartFunction);var idx=out.indexOf('\n'+fn_name);if(idx>=0){var next_line=out.indexOf('\n',idx+1);out=out.substring(next_line+1);}
this.stack=out;}}};util.inherits(assert.AssertionError,Error);function truncate(s,n){if(typeof s==='string'){return s.length<n?s:s.slice(0,n);}else{return s;}}
function inspect(something){if(functionsHaveNames||!util.isFunction(something)){return util.inspect(something);}
var rawname=getName(something);var name=rawname?': '+rawname:'';return '[Function'+name+']';}
function getMessage(self){return truncate(inspect(self.actual),128)+' '+
self.operator+' '+
truncate(inspect(self.expected),128);}
function fail(actual,expected,message,operator,stackStartFunction){throw new assert.AssertionError({message:message,actual:actual,expected:expected,operator:operator,stackStartFunction:stackStartFunction});}
assert.fail=fail;function ok(value,message){if(!value)fail(value,true,message,'==',assert.ok);}
assert.ok=ok;assert.equal=function equal(actual,expected,message){if(actual!=expected)fail(actual,expected,message,'==',assert.equal);};assert.notEqual=function notEqual(actual,expected,message){if(actual==expected){fail(actual,expected,message,'!=',assert.notEqual);}};assert.deepEqual=function deepEqual(actual,expected,message){if(!_deepEqual(actual,expected,false)){fail(actual,expected,message,'deepEqual',assert.deepEqual);}};assert.deepStrictEqual=function deepStrictEqual(actual,expected,message){if(!_deepEqual(actual,expected,true)){fail(actual,expected,message,'deepStrictEqual',assert.deepStrictEqual);}};function _deepEqual(actual,expected,strict,memos){if(actual===expected){return true;}else if(isBuffer(actual)&&isBuffer(expected)){return compare(actual,expected)===0;}else if(util.isDate(actual)&&util.isDate(expected)){return actual.getTime()===expected.getTime();}else if(util.isRegExp(actual)&&util.isRegExp(expected)){return actual.source===expected.source&&actual.global===expected.global&&actual.multiline===expected.multiline&&actual.lastIndex===expected.lastIndex&&actual.ignoreCase===expected.ignoreCase;}else if((actual===null||typeof actual!=='object')&&(expected===null||typeof expected!=='object')){return strict?actual===expected:actual==expected;}else if(isView(actual)&&isView(expected)&&pToString(actual)===pToString(expected)&&!(actual instanceof Float32Array||actual instanceof Float64Array)){return compare(new Uint8Array(actual.buffer),new Uint8Array(expected.buffer))===0;}else if(isBuffer(actual)!==isBuffer(expected)){return false;}else{memos=memos||{actual:[],expected:[]};var actualIndex=memos.actual.indexOf(actual);if(actualIndex!==-1){if(actualIndex===memos.expected.indexOf(expected)){return true;}}
memos.actual.push(actual);memos.expected.push(expected);return objEquiv(actual,expected,strict,memos);}}
function isArguments(object){return Object.prototype.toString.call(object)=='[object Arguments]';}
function objEquiv(a,b,strict,actualVisitedObjects){if(a===null||a===undefined||b===null||b===undefined)
return false;if(util.isPrimitive(a)||util.isPrimitive(b))
return a===b;if(strict&&Object.getPrototypeOf(a)!==Object.getPrototypeOf(b))
return false;var aIsArgs=isArguments(a);var bIsArgs=isArguments(b);if((aIsArgs&&!bIsArgs)||(!aIsArgs&&bIsArgs))
return false;if(aIsArgs){a=pSlice.call(a);b=pSlice.call(b);return _deepEqual(a,b,strict);}
var ka=objectKeys(a);var kb=objectKeys(b);var key,i;if(ka.length!==kb.length)
return false;ka.sort();kb.sort();for(i=ka.length-1;i>=0;i--){if(ka[i]!==kb[i])
return false;}
for(i=ka.length-1;i>=0;i--){key=ka[i];if(!_deepEqual(a[key],b[key],strict,actualVisitedObjects))
return false;}
return true;}
assert.notDeepEqual=function notDeepEqual(actual,expected,message){if(_deepEqual(actual,expected,false)){fail(actual,expected,message,'notDeepEqual',assert.notDeepEqual);}};assert.notDeepStrictEqual=notDeepStrictEqual;function notDeepStrictEqual(actual,expected,message){if(_deepEqual(actual,expected,true)){fail(actual,expected,message,'notDeepStrictEqual',notDeepStrictEqual);}}
assert.strictEqual=function strictEqual(actual,expected,message){if(actual!==expected){fail(actual,expected,message,'===',assert.strictEqual);}};assert.notStrictEqual=function notStrictEqual(actual,expected,message){if(actual===expected){fail(actual,expected,message,'!==',assert.notStrictEqual);}};function expectedException(actual,expected){if(!actual||!expected){return false;}
if(Object.prototype.toString.call(expected)=='[object RegExp]'){return expected.test(actual);}
try{if(actual instanceof expected){return true;}}catch(e){}
if(Error.isPrototypeOf(expected)){return false;}
return expected.call({},actual)===true;}
function _tryBlock(block){var error;try{block();}catch(e){error=e;}
return error;}
function _throws(shouldThrow,block,expected,message){var actual;if(typeof block!=='function'){throw new TypeError('"block" argument must be a function');}
if(typeof expected==='string'){message=expected;expected=null;}
actual=_tryBlock(block);message=(expected&&expected.name?' ('+expected.name+').':'.')+
(message?' '+message:'.');if(shouldThrow&&!actual){fail(actual,expected,'Missing expected exception'+message);}
var userProvidedMessage=typeof message==='string';var isUnwantedException=!shouldThrow&&util.isError(actual);var isUnexpectedException=!shouldThrow&&actual&&!expected;if((isUnwantedException&&userProvidedMessage&&expectedException(actual,expected))||isUnexpectedException){fail(actual,expected,'Got unwanted exception'+message);}
if((shouldThrow&&actual&&expected&&!expectedException(actual,expected))||(!shouldThrow&&actual)){throw actual;}}
assert.throws=function(block,error,message){_throws(true,block,error,message);};assert.doesNotThrow=function(block,error,message){_throws(false,block,error,message);};assert.ifError=function(err){if(err)throw err;};var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){if(hasOwn.call(obj,key))keys.push(key);}
return keys;};}.call(exports,__webpack_require__(10)))}),(function(module,exports,__webpack_require__){var assert=__webpack_require__(15);var util=__webpack_require__(25);function FingerprintFormatError(fp,format){if(Error.captureStackTrace)
Error.captureStackTrace(this,FingerprintFormatError);this.name='FingerprintFormatError';this.fingerprint=fp;this.format=format;this.message='Fingerprint format is not supported, or is invalid: ';if(fp!==undefined)
this.message+=' fingerprint = '+fp;if(format!==undefined)
this.message+=' format = '+format;}
util.inherits(FingerprintFormatError,Error);function InvalidAlgorithmError(alg){if(Error.captureStackTrace)
Error.captureStackTrace(this,InvalidAlgorithmError);this.name='InvalidAlgorithmError';this.algorithm=alg;this.message='Algorithm "'+alg+'" is not supported';}
util.inherits(InvalidAlgorithmError,Error);function KeyParseError(name,format,innerErr){if(Error.captureStackTrace)
Error.captureStackTrace(this,KeyParseError);this.name='KeyParseError';this.format=format;this.keyName=name;this.innerErr=innerErr;this.message='Failed to parse '+name+' as a valid '+format+
' format key: '+innerErr.message;}
util.inherits(KeyParseError,Error);function SignatureParseError(type,format,innerErr){if(Error.captureStackTrace)
Error.captureStackTrace(this,SignatureParseError);this.name='SignatureParseError';this.type=type;this.format=format;this.innerErr=innerErr;this.message='Failed to parse the given data as a '+type+
' signature in '+format+' format: '+innerErr.message;}
util.inherits(SignatureParseError,Error);function CertificateParseError(name,format,innerErr){if(Error.captureStackTrace)
Error.captureStackTrace(this,CertificateParseError);this.name='CertificateParseError';this.format=format;this.certName=name;this.innerErr=innerErr;this.message='Failed to parse '+name+' as a valid '+format+
' format certificate: '+innerErr.message;}
util.inherits(CertificateParseError,Error);function KeyEncryptedError(name,format){if(Error.captureStackTrace)
Error.captureStackTrace(this,KeyEncryptedError);this.name='KeyEncryptedError';this.format=format;this.keyName=name;this.message='The '+format+' format key '+name+' is '+
'encrypted (password-protected), and no passphrase was '+
'provided in `options`';}
util.inherits(KeyEncryptedError,Error);module.exports={FingerprintFormatError:FingerprintFormatError,InvalidAlgorithmError:InvalidAlgorithmError,KeyParseError:KeyParseError,SignatureParseError:SignatureParseError,KeyEncryptedError:KeyEncryptedError,CertificateParseError:CertificateParseError};}),(function(module,exports,__webpack_require__){"use strict";if(__webpack_require__(26)){var LIBRARY=__webpack_require__(81);var global=__webpack_require__(11);var fails=__webpack_require__(13);var $export=__webpack_require__(0);var $typed=__webpack_require__(157);var $buffer=__webpack_require__(207);var ctx=__webpack_require__(58);var anInstance=__webpack_require__(99);var propertyDesc=__webpack_require__(92);var hide=__webpack_require__(48);var redefineAll=__webpack_require__(101);var toInteger=__webpack_require__(60);var toLength=__webpack_require__(22);var toIndex=__webpack_require__(297);var toAbsoluteIndex=__webpack_require__(95);var toPrimitive=__webpack_require__(63);var has=__webpack_require__(51);var classof=__webpack_require__(110);var isObject=__webpack_require__(14);var toObject=__webpack_require__(30);var isArrayIter=__webpack_require__(196);var create=__webpack_require__(96);var getPrototypeOf=__webpack_require__(54);var gOPN=__webpack_require__(97).f;var getIterFn=__webpack_require__(198);var uid=__webpack_require__(93);var wks=__webpack_require__(19);var createArrayMethod=__webpack_require__(66);var createArrayIncludes=__webpack_require__(147);var speciesConstructor=__webpack_require__(126);var ArrayIterators=__webpack_require__(201);var Iterators=__webpack_require__(112);var $iterDetect=__webpack_require__(152);var setSpecies=__webpack_require__(98);var arrayFill=__webpack_require__(200);var arrayCopyWithin=__webpack_require__(286);var $DP=__webpack_require__(27);var $GOPD=__webpack_require__(53);var dP=$DP.f;var gOPD=$GOPD.f;var RangeError=global.RangeError;var TypeError=global.TypeError;var Uint8Array=global.Uint8Array;var ARRAY_BUFFER='ArrayBuffer';var SHARED_BUFFER='Shared'+ARRAY_BUFFER;var BYTES_PER_ELEMENT='BYTES_PER_ELEMENT';var PROTOTYPE='prototype';var ArrayProto=Array[PROTOTYPE];var $ArrayBuffer=$buffer.ArrayBuffer;var $DataView=$buffer.DataView;var arrayForEach=createArrayMethod(0);var arrayFilter=createArrayMethod(2);var arraySome=createArrayMethod(3);var arrayEvery=createArrayMethod(4);var arrayFind=createArrayMethod(5);var arrayFindIndex=createArrayMethod(6);var arrayIncludes=createArrayIncludes(true);var arrayIndexOf=createArrayIncludes(false);var arrayValues=ArrayIterators.values;var arrayKeys=ArrayIterators.keys;var arrayEntries=ArrayIterators.entries;var arrayLastIndexOf=ArrayProto.lastIndexOf;var arrayReduce=ArrayProto.reduce;var arrayReduceRight=ArrayProto.reduceRight;var arrayJoin=ArrayProto.join;var arraySort=ArrayProto.sort;var arraySlice=ArrayProto.slice;var arrayToString=ArrayProto.toString;var arrayToLocaleString=ArrayProto.toLocaleString;var ITERATOR=wks('iterator');var TAG=wks('toStringTag');var TYPED_CONSTRUCTOR=uid('typed_constructor');var DEF_CONSTRUCTOR=uid('def_constructor');var ALL_CONSTRUCTORS=$typed.CONSTR;var TYPED_ARRAY=$typed.TYPED;var VIEW=$typed.VIEW;var WRONG_LENGTH='Wrong length!';var $map=createArrayMethod(1,function(O,length){return allocate(speciesConstructor(O,O[DEF_CONSTRUCTOR]),length);});var LITTLE_ENDIAN=fails(function(){return new Uint8Array(new Uint16Array([1]).buffer)[0]===1;});var FORCED_SET=!!Uint8Array&&!!Uint8Array[PROTOTYPE].set&&fails(function(){new Uint8Array(1).set({});});var toOffset=function(it,BYTES){var offset=toInteger(it);if(offset<0||offset%BYTES)throw RangeError('Wrong offset!');return offset;};var validate=function(it){if(isObject(it)&&TYPED_ARRAY in it)return it;throw TypeError(it+' is not a typed array!');};var allocate=function(C,length){if(!(isObject(C)&&TYPED_CONSTRUCTOR in C)){throw TypeError('It is not a typed array constructor!');}return new C(length);};var speciesFromList=function(O,list){return fromList(speciesConstructor(O,O[DEF_CONSTRUCTOR]),list);};var fromList=function(C,list){var index=0;var length=list.length;var result=allocate(C,length);while(length>index)result[index]=list[index++];return result;};var addGetter=function(it,key,internal){dP(it,key,{get:function(){return this._d[internal];}});};var $from=function from(source){var O=toObject(source);var aLen=arguments.length;var mapfn=aLen>1?arguments[1]:undefined;var mapping=mapfn!==undefined;var iterFn=getIterFn(O);var i,length,values,result,step,iterator;if(iterFn!=undefined&&!isArrayIter(iterFn)){for(iterator=iterFn.call(O),values=[],i=0;!(step=iterator.next()).done;i++){values.push(step.value);}O=values;}
if(mapping&&aLen>2)mapfn=ctx(mapfn,arguments[2],2);for(i=0,length=toLength(O.length),result=allocate(this,length);length>i;i++){result[i]=mapping?mapfn(O[i],i):O[i];}
return result;};var $of=function of(){var index=0;var length=arguments.length;var result=allocate(this,length);while(length>index)result[index]=arguments[index++];return result;};var TO_LOCALE_BUG=!!Uint8Array&&fails(function(){arrayToLocaleString.call(new Uint8Array(1));});var $toLocaleString=function toLocaleString(){return arrayToLocaleString.apply(TO_LOCALE_BUG?arraySlice.call(validate(this)):validate(this),arguments);};var proto={copyWithin:function copyWithin(target,start){return arrayCopyWithin.call(validate(this),target,start,arguments.length>2?arguments[2]:undefined);},every:function every(callbackfn){return arrayEvery(validate(this),callbackfn,arguments.length>1?arguments[1]:undefined);},fill:function fill(value){return arrayFill.apply(validate(this),arguments);},filter:function filter(callbackfn){return speciesFromList(this,arrayFilter(validate(this),callbackfn,arguments.length>1?arguments[1]:undefined));},find:function find(predicate){return arrayFind(validate(this),predicate,arguments.length>1?arguments[1]:undefined);},findIndex:function findIndex(predicate){return arrayFindIndex(validate(this),predicate,arguments.length>1?arguments[1]:undefined);},forEach:function forEach(callbackfn){arrayForEach(validate(this),callbackfn,arguments.length>1?arguments[1]:undefined);},indexOf:function indexOf(searchElement){return arrayIndexOf(validate(this),searchElement,arguments.length>1?arguments[1]:undefined);},includes:function includes(searchElement){return arrayIncludes(validate(this),searchElement,arguments.length>1?arguments[1]:undefined);},join:function join(separator){return arrayJoin.apply(validate(this),arguments);},lastIndexOf:function lastIndexOf(searchElement){return arrayLastIndexOf.apply(validate(this),arguments);},map:function map(mapfn){return $map(validate(this),mapfn,arguments.length>1?arguments[1]:undefined);},reduce:function reduce(callbackfn){return arrayReduce.apply(validate(this),arguments);},reduceRight:function reduceRight(callbackfn){return arrayReduceRight.apply(validate(this),arguments);},reverse:function reverse(){var that=this;var length=validate(that).length;var middle=Math.floor(length/2);var index=0;var value;while(index<middle){value=that[index];that[index++]=that[--length];that[length]=value;}return that;},some:function some(callbackfn){return arraySome(validate(this),callbackfn,arguments.length>1?arguments[1]:undefined);},sort:function sort(comparefn){return arraySort.call(validate(this),comparefn);},subarray:function subarray(begin,end){var O=validate(this);var length=O.length;var $begin=toAbsoluteIndex(begin,length);return new(speciesConstructor(O,O[DEF_CONSTRUCTOR]))(O.buffer,O.byteOffset+$begin*O.BYTES_PER_ELEMENT,toLength((end===undefined?length:toAbsoluteIndex(end,length))-$begin));}};var $slice=function slice(start,end){return speciesFromList(this,arraySlice.call(validate(this),start,end));};var $set=function set(arrayLike){validate(this);var offset=toOffset(arguments[1],1);var length=this.length;var src=toObject(arrayLike);var len=toLength(src.length);var index=0;if(len+offset>length)throw RangeError(WRONG_LENGTH);while(index<len)this[offset+index]=src[index++];};var $iterators={entries:function entries(){return arrayEntries.call(validate(this));},keys:function keys(){return arrayKeys.call(validate(this));},values:function values(){return arrayValues.call(validate(this));}};var isTAIndex=function(target,key){return isObject(target)&&target[TYPED_ARRAY]&&typeof key!='symbol'&&key in target&&String(+key)==String(key);};var $getDesc=function getOwnPropertyDescriptor(target,key){return isTAIndex(target,key=toPrimitive(key,true))?propertyDesc(2,target[key]):gOPD(target,key);};var $setDesc=function defineProperty(target,key,desc){if(isTAIndex(target,key=toPrimitive(key,true))&&isObject(desc)&&has(desc,'value')&&!has(desc,'get')&&!has(desc,'set')&&!desc.configurable&&(!has(desc,'writable')||desc.writable)&&(!has(desc,'enumerable')||desc.enumerable)){target[key]=desc.value;return target;}return dP(target,key,desc);};if(!ALL_CONSTRUCTORS){$GOPD.f=$getDesc;$DP.f=$setDesc;}
$export($export.S+$export.F*!ALL_CONSTRUCTORS,'Object',{getOwnPropertyDescriptor:$getDesc,defineProperty:$setDesc});if(fails(function(){arrayToString.call({});})){arrayToString=arrayToLocaleString=function toString(){return arrayJoin.call(this);};}
var $TypedArrayPrototype$=redefineAll({},proto);redefineAll($TypedArrayPrototype$,$iterators);hide($TypedArrayPrototype$,ITERATOR,$iterators.values);redefineAll($TypedArrayPrototype$,{slice:$slice,set:$set,constructor:function(){},toString:arrayToString,toLocaleString:$toLocaleString});addGetter($TypedArrayPrototype$,'buffer','b');addGetter($TypedArrayPrototype$,'byteOffset','o');addGetter($TypedArrayPrototype$,'byteLength','l');addGetter($TypedArrayPrototype$,'length','e');dP($TypedArrayPrototype$,TAG,{get:function(){return this[TYPED_ARRAY];}});module.exports=function(KEY,BYTES,wrapper,CLAMPED){CLAMPED=!!CLAMPED;var NAME=KEY+(CLAMPED?'Clamped':'')+'Array';var GETTER='get'+KEY;var SETTER='set'+KEY;var TypedArray=global[NAME];var Base=TypedArray||{};var TAC=TypedArray&&getPrototypeOf(TypedArray);var FORCED=!TypedArray||!$typed.ABV;var O={};var TypedArrayPrototype=TypedArray&&TypedArray[PROTOTYPE];var getter=function(that,index){var data=that._d;return data.v[GETTER](index*BYTES+data.o,LITTLE_ENDIAN);};var setter=function(that,index,value){var data=that._d;if(CLAMPED)value=(value=Math.round(value))<0?0:value>0xff?0xff:value&0xff;data.v[SETTER](index*BYTES+data.o,value,LITTLE_ENDIAN);};var addElement=function(that,index){dP(that,index,{get:function(){return getter(this,index);},set:function(value){return setter(this,index,value);},enumerable:true});};if(FORCED){TypedArray=wrapper(function(that,data,$offset,$length){anInstance(that,TypedArray,NAME,'_d');var index=0;var offset=0;var buffer,byteLength,length,klass;if(!isObject(data)){length=toIndex(data);byteLength=length*BYTES;buffer=new $ArrayBuffer(byteLength);}else if(data instanceof $ArrayBuffer||(klass=classof(data))==ARRAY_BUFFER||klass==SHARED_BUFFER){buffer=data;offset=toOffset($offset,BYTES);var $len=data.byteLength;if($length===undefined){if($len%BYTES)throw RangeError(WRONG_LENGTH);byteLength=$len-offset;if(byteLength<0)throw RangeError(WRONG_LENGTH);}else{byteLength=toLength($length)*BYTES;if(byteLength+offset>$len)throw RangeError(WRONG_LENGTH);}
length=byteLength/BYTES;}else if(TYPED_ARRAY in data){return fromList(TypedArray,data);}else{return $from.call(TypedArray,data);}
hide(that,'_d',{b:buffer,o:offset,l:byteLength,e:length,v:new $DataView(buffer)});while(index<length)addElement(that,index++);});TypedArrayPrototype=TypedArray[PROTOTYPE]=create($TypedArrayPrototype$);hide(TypedArrayPrototype,'constructor',TypedArray);}else if(!fails(function(){TypedArray(1);})||!fails(function(){new TypedArray(-1);})||!$iterDetect(function(iter){new TypedArray();new TypedArray(null);new TypedArray(1.5);new TypedArray(iter);},true)){TypedArray=wrapper(function(that,data,$offset,$length){anInstance(that,TypedArray,NAME);var klass;if(!isObject(data))return new Base(toIndex(data));if(data instanceof $ArrayBuffer||(klass=classof(data))==ARRAY_BUFFER||klass==SHARED_BUFFER){return $length!==undefined?new Base(data,toOffset($offset,BYTES),$length):$offset!==undefined?new Base(data,toOffset($offset,BYTES)):new Base(data);}
if(TYPED_ARRAY in data)return fromList(TypedArray,data);return $from.call(TypedArray,data);});arrayForEach(TAC!==Function.prototype?gOPN(Base).concat(gOPN(TAC)):gOPN(Base),function(key){if(!(key in TypedArray))hide(TypedArray,key,Base[key]);});TypedArray[PROTOTYPE]=TypedArrayPrototype;if(!LIBRARY)TypedArrayPrototype.constructor=TypedArray;}
var $nativeIterator=TypedArrayPrototype[ITERATOR];var CORRECT_ITER_NAME=!!$nativeIterator&&($nativeIterator.name=='values'||$nativeIterator.name==undefined);var $iterator=$iterators.values;hide(TypedArray,TYPED_CONSTRUCTOR,true);hide(TypedArrayPrototype,TYPED_ARRAY,NAME);hide(TypedArrayPrototype,VIEW,true);hide(TypedArrayPrototype,DEF_CONSTRUCTOR,TypedArray);if(CLAMPED?new TypedArray(1)[TAG]!=NAME:!(TAG in TypedArrayPrototype)){dP(TypedArrayPrototype,TAG,{get:function(){return NAME;}});}
O[NAME]=TypedArray;$export($export.G+$export.W+$export.F*(TypedArray!=Base),O);$export($export.S,NAME,{BYTES_PER_ELEMENT:BYTES});$export($export.S+$export.F*fails(function(){Base.of.call(TypedArray,1);}),NAME,{from:$from,of:$of});if(!(BYTES_PER_ELEMENT in TypedArrayPrototype))hide(TypedArrayPrototype,BYTES_PER_ELEMENT,BYTES);$export($export.P,NAME,proto);setSpecies(NAME);$export($export.P+$export.F*FORCED_SET,NAME,{set:$set});$export($export.P+$export.F*!CORRECT_ITER_NAME,NAME,$iterators);if(!LIBRARY&&TypedArrayPrototype.toString!=arrayToString)TypedArrayPrototype.toString=arrayToString;$export($export.P+$export.F*fails(function(){new TypedArray(1).slice();}),NAME,{slice:$slice});$export($export.P+$export.F*(fails(function(){return[1,2].toLocaleString()!=new TypedArray([1,2]).toLocaleString();})||!fails(function(){TypedArrayPrototype.toLocaleString.call([1,2]);})),NAME,{toLocaleString:$toLocaleString});Iterators[NAME]=CORRECT_ITER_NAME?$nativeIterator:$iterator;if(!LIBRARY&&!CORRECT_ITER_NAME)hide(TypedArrayPrototype,ITERATOR,$iterator);};}else module.exports=function(){};}),(function(module,exports,__webpack_require__){var Map=__webpack_require__(292);var $export=__webpack_require__(0);var shared=__webpack_require__(146)('metadata');var store=shared.store||(shared.store=new(__webpack_require__(295))());var getOrCreateMetadataMap=function(target,targetKey,create){var targetMetadata=store.get(target);if(!targetMetadata){if(!create)return undefined;store.set(target,targetMetadata=new Map());}
var keyMetadata=targetMetadata.get(targetKey);if(!keyMetadata){if(!create)return undefined;targetMetadata.set(targetKey,keyMetadata=new Map());}return keyMetadata;};var ordinaryHasOwnMetadata=function(MetadataKey,O,P){var metadataMap=getOrCreateMetadataMap(O,P,false);return metadataMap===undefined?false:metadataMap.has(MetadataKey);};var ordinaryGetOwnMetadata=function(MetadataKey,O,P){var metadataMap=getOrCreateMetadataMap(O,P,false);return metadataMap===undefined?undefined:metadataMap.get(MetadataKey);};var ordinaryDefineOwnMetadata=function(MetadataKey,MetadataValue,O,P){getOrCreateMetadataMap(O,P,true).set(MetadataKey,MetadataValue);};var ordinaryOwnMetadataKeys=function(target,targetKey){var metadataMap=getOrCreateMetadataMap(target,targetKey,false);var keys=[];if(metadataMap)metadataMap.forEach(function(_,key){keys.push(key);});return keys;};var toMetaKey=function(it){return it===undefined||typeof it=='symbol'?it:String(it);};var exp=function(O){$export($export.S,'Reflect',O);};module.exports={store:store,map:getOrCreateMetadataMap,has:ordinaryHasOwnMetadata,get:ordinaryGetOwnMetadata,set:ordinaryDefineOwnMetadata,keys:ordinaryOwnMetadataKeys,key:toMetaKey,exp:exp};}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_tweetnacl__=__webpack_require__(644);var __WEBPACK_IMPORTED_MODULE_0_tweetnacl___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_tweetnacl__);class ED25519{static generatePrivateKey(fromSecret){let privateKey;if(!fromSecret)privateKey=__WEBPACK_IMPORTED_MODULE_0_tweetnacl___default.a.sign.keyPair().secretKey;else privateKey=__WEBPACK_IMPORTED_MODULE_0_tweetnacl___default.a.sign.keyPair.fromSecretKey(fromSecret).secretKey;if(!Buffer.isBuffer(privateKey))
privateKey=new Buffer(privateKey);return privateKey;}
static generatePublicKey(secretKey){if(!secretKey||!Buffer.isBuffer(secretKey))throw{message:'privateKey must be a Buffer',secretKey:secretKey};let publicKey=__WEBPACK_IMPORTED_MODULE_0_tweetnacl___default.a.sign.keyPair.fromSecretKey(secretKey).publicKey;if(!Buffer.isBuffer(publicKey))
publicKey=new Buffer(publicKey);return publicKey;}
static sign(data,secretKey){if(!secretKey||!Buffer.isBuffer(secretKey))throw{message:'secretKey must be a Buffer',secretKey:secretKey};if(!data||!Buffer.isBuffer(data))throw{message:'data must be a Buffer',data:data};let signature=__WEBPACK_IMPORTED_MODULE_0_tweetnacl___default.a.sign.detached(data,secretKey);if(!Buffer.isBuffer(signature))
signature=new Buffer(signature);return signature;}
static verify(signature,data,publicKey){if(!signature||!Buffer.isBuffer(signature))throw{message:'signature must be a Buffer',signature:signature};if(!data||!Buffer.isBuffer(data))throw{message:'data must be a Buffer',data:data};if(!publicKey||!Buffer.isBuffer(publicKey))throw{message:'publicKey must be a Buffer',publicKey:publicKey};return __WEBPACK_IMPORTED_MODULE_0_tweetnacl___default.a.sign.detached.verify(data,signature,publicKey)}}
__webpack_exports__["a"]=(ED25519);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1_node_lists_geolocation_lists_geo_helpers_geo_helper__=__webpack_require__(233);var __WEBPACK_IMPORTED_MODULE_2_common_utils_helpers_Utils__=__webpack_require__(40);const ipaddr=__webpack_require__(232);class SocketAddress{static checkIsSocketAddress(sckAddress){if(!sckAddress||typeof sckAddress!=='object')return false;if(!(sckAddress.constructor.name==="SocketAddress"))return false;return true;}
static createSocketAddress(address,port,uuid){if(address&&typeof address==="object"&&address.node&&address.node.sckAddress)address=address.node.sckAddress;if(address&&typeof address==="object"&&address.sckAddress)address=address.sckAddress;if(SocketAddress.checkIsSocketAddress(address))
return address;return new SocketAddress(address,port,uuid);}
constructor(address,port,uuid){if(!address)address='';if(!port)port=__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].SETTINGS.NODE.PORT;try{if(address.indexOf("https://")>=0){address=address.replace("https://","");this.SSL=true;}else{address=address.replace("http://","");}}catch(exception){}
let errorIPv6=false;try{if(ipaddr.IPv6.isIPv6(address))
address=this._extractIPv6(address);}catch(exception){console.error("invalid ipv6",address);errorIPv6=true;}
if(address.lastIndexOf(":")>0){port=address.substr(address.lastIndexOf(":")+1);address=address.substr(0,address.lastIndexOf(":"));}
if(errorIPv6&&ipaddr.IPv6.isIPv6(address))
address=this._extractIPv6(address);if(ipaddr.IPv4.isIPv4(address)){let ip=ipaddr.IPv4.parse(address);address=ip.toNormalizedString();}else{}
this.address=address;this.port=port;this._geoLocation=__WEBPACK_IMPORTED_MODULE_2_common_utils_helpers_Utils__["a"].makeQuerablePromise(new Promise(async(resolve)=>{this._geoLocationResolver=resolve;}));this.uuid=uuid;}
_extractIPv6(address){let ip=ipaddr.IPv6.parse(address);if(ip.isIPv4MappedAddress())
address=ip.toIPv4Address().toNormalizedString();else
address=ip.toNormalizedString();return address;}
matchAddress(address,validationDoubleConnectionsTypes={"ip":true,"uuid":true}){let sckAddress=SocketAddress.createSocketAddress(address);if(validationDoubleConnectionsTypes.uuid)
if(this.uuid&&sckAddress.uuid&&this.uuid===sckAddress.uuid)
return true;if(validationDoubleConnectionsTypes.ip){if(validationDoubleConnectionsTypes.port)
return(this.address+":"+this.port===sckAddress.address+":"+sckAddress.port);else
return this.address===sckAddress.address;}
return false;}
toString(){return this.getAddress(false);}
getAddress(includePort=true,includeHTTP=false){return(includeHTTP?'http'+(this.SSL?'s':'')+'://':'')+this.address+(includePort?':'+this.port:'');}
get geoLocation(){return this._geoLocation;}
async getLocationNow(){if(this._geoLocation.isFulfilled())
return this._geoLocation;let answer=await __WEBPACK_IMPORTED_MODULE_1_node_lists_geolocation_lists_geo_helpers_geo_helper__["a"].getLocationFromAddress(this);if(!answer)this._geoLocationResolver(null);else this._geoLocationResolver(answer);return this._geoLocation;}
isLocalHost(){return false;try{let address=this.getAddress(false);if(address.indexOf("127.0.0.1")>=0||address.indexOf("localhost")>=0||address.indexOf("::1")>=0||address.indexOf("::")>=0)
return true;return false;}catch(Exception){throw{message:"EXCEPTION isLocalHost",address:this.address}}}}
__webpack_exports__["a"]=(SocketAddress);}),(function(module,exports,__webpack_require__){"use strict";var punycode=__webpack_require__(236);var util=__webpack_require__(798);exports.parse=urlParse;exports.resolve=urlResolve;exports.resolveObject=urlResolveObject;exports.format=urlFormat;exports.Url=Url;function Url(){this.protocol=null;this.slashes=null;this.auth=null;this.host=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.query=null;this.pathname=null;this.path=null;this.href=null;}
var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=['<','>','"','`',' ','\r','\n','\t'],unwise=['{','}','|','\\','^','`'].concat(delims),autoEscape=['\''].concat(unwise),nonHostChars=['%','/','?',';','#'].concat(autoEscape),hostEndingChars=['/','?','#'],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={'javascript':true,'javascript:':true},hostlessProtocol={'javascript':true,'javascript:':true},slashedProtocol={'http':true,'https':true,'ftp':true,'gopher':true,'file':true,'http:':true,'https:':true,'ftp:':true,'gopher:':true,'file:':true},querystring=__webpack_require__(169);function urlParse(url,parseQueryString,slashesDenoteHost){if(url&&util.isObject(url)&&url instanceof Url)return url;var u=new Url;u.parse(url,parseQueryString,slashesDenoteHost);return u;}
Url.prototype.parse=function(url,parseQueryString,slashesDenoteHost){if(!util.isString(url)){throw new TypeError("Parameter 'url' must be a string, not "+typeof url);}
var queryIndex=url.indexOf('?'),splitter=(queryIndex!==-1&&queryIndex<url.indexOf('#'))?'?':'#',uSplit=url.split(splitter),slashRegex=/\\/g;uSplit[0]=uSplit[0].replace(slashRegex,'/');url=uSplit.join(splitter);var rest=url;rest=rest.trim();if(!slashesDenoteHost&&url.split('#').length===1){var simplePath=simplePathPattern.exec(rest);if(simplePath){this.path=rest;this.href=rest;this.pathname=simplePath[1];if(simplePath[2]){this.search=simplePath[2];if(parseQueryString){this.query=querystring.parse(this.search.substr(1));}else{this.query=this.search.substr(1);}}else if(parseQueryString){this.search='';this.query={};}
return this;}}
var proto=protocolPattern.exec(rest);if(proto){proto=proto[0];var lowerProto=proto.toLowerCase();this.protocol=lowerProto;rest=rest.substr(proto.length);}
if(slashesDenoteHost||proto||rest.match(/^\/\/[^@\/]+@[^@\/]+/)){var slashes=rest.substr(0,2)==='//';if(slashes&&!(proto&&hostlessProtocol[proto])){rest=rest.substr(2);this.slashes=true;}}
if(!hostlessProtocol[proto]&&(slashes||(proto&&!slashedProtocol[proto]))){var hostEnd=-1;for(var i=0;i<hostEndingChars.length;i++){var hec=rest.indexOf(hostEndingChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))
hostEnd=hec;}
var auth,atSign;if(hostEnd===-1){atSign=rest.lastIndexOf('@');}else{atSign=rest.lastIndexOf('@',hostEnd);}
if(atSign!==-1){auth=rest.slice(0,atSign);rest=rest.slice(atSign+1);this.auth=decodeURIComponent(auth);}
hostEnd=-1;for(var i=0;i<nonHostChars.length;i++){var hec=rest.indexOf(nonHostChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))
hostEnd=hec;}
if(hostEnd===-1)
hostEnd=rest.length;this.host=rest.slice(0,hostEnd);rest=rest.slice(hostEnd);this.parseHost();this.hostname=this.hostname||'';var ipv6Hostname=this.hostname[0]==='['&&this.hostname[this.hostname.length-1]===']';if(!ipv6Hostname){var hostparts=this.hostname.split(/\./);for(var i=0,l=hostparts.length;i<l;i++){var part=hostparts[i];if(!part)continue;if(!part.match(hostnamePartPattern)){var newpart='';for(var j=0,k=part.length;j<k;j++){if(part.charCodeAt(j)>127){newpart+='x';}else{newpart+=part[j];}}
if(!newpart.match(hostnamePartPattern)){var validParts=hostparts.slice(0,i);var notHost=hostparts.slice(i+1);var bit=part.match(hostnamePartStart);if(bit){validParts.push(bit[1]);notHost.unshift(bit[2]);}
if(notHost.length){rest='/'+notHost.join('.')+rest;}
this.hostname=validParts.join('.');break;}}}}
if(this.hostname.length>hostnameMaxLen){this.hostname='';}else{this.hostname=this.hostname.toLowerCase();}
if(!ipv6Hostname){this.hostname=punycode.toASCII(this.hostname);}
var p=this.port?':'+this.port:'';var h=this.hostname||'';this.host=h+p;this.href+=this.host;if(ipv6Hostname){this.hostname=this.hostname.substr(1,this.hostname.length-2);if(rest[0]!=='/'){rest='/'+rest;}}}
if(!unsafeProtocol[lowerProto]){for(var i=0,l=autoEscape.length;i<l;i++){var ae=autoEscape[i];if(rest.indexOf(ae)===-1)
continue;var esc=encodeURIComponent(ae);if(esc===ae){esc=escape(ae);}
rest=rest.split(ae).join(esc);}}
var hash=rest.indexOf('#');if(hash!==-1){this.hash=rest.substr(hash);rest=rest.slice(0,hash);}
var qm=rest.indexOf('?');if(qm!==-1){this.search=rest.substr(qm);this.query=rest.substr(qm+1);if(parseQueryString){this.query=querystring.parse(this.query);}
rest=rest.slice(0,qm);}else if(parseQueryString){this.search='';this.query={};}
if(rest)this.pathname=rest;if(slashedProtocol[lowerProto]&&this.hostname&&!this.pathname){this.pathname='/';}
if(this.pathname||this.search){var p=this.pathname||'';var s=this.search||'';this.path=p+s;}
this.href=this.format();return this;};function urlFormat(obj){if(util.isString(obj))obj=urlParse(obj);if(!(obj instanceof Url))return Url.prototype.format.call(obj);return obj.format();}
Url.prototype.format=function(){var auth=this.auth||'';if(auth){auth=encodeURIComponent(auth);auth=auth.replace(/%3A/i,':');auth+='@';}
var protocol=this.protocol||'',pathname=this.pathname||'',hash=this.hash||'',host=false,query='';if(this.host){host=auth+this.host;}else if(this.hostname){host=auth+(this.hostname.indexOf(':')===-1?this.hostname:'['+this.hostname+']');if(this.port){host+=':'+this.port;}}
if(this.query&&util.isObject(this.query)&&Object.keys(this.query).length){query=querystring.stringify(this.query);}
var search=this.search||(query&&('?'+query))||'';if(protocol&&protocol.substr(-1)!==':')protocol+=':';if(this.slashes||(!protocol||slashedProtocol[protocol])&&host!==false){host='//'+(host||'');if(pathname&&pathname.charAt(0)!=='/')pathname='/'+pathname;}else if(!host){host='';}
if(hash&&hash.charAt(0)!=='#')hash='#'+hash;if(search&&search.charAt(0)!=='?')search='?'+search;pathname=pathname.replace(/[?#]/g,function(match){return encodeURIComponent(match);});search=search.replace('#','%23');return protocol+host+pathname+search+hash;};function urlResolve(source,relative){return urlParse(source,false,true).resolve(relative);}
Url.prototype.resolve=function(relative){return this.resolveObject(urlParse(relative,false,true)).format();};function urlResolveObject(source,relative){if(!source)return relative;return urlParse(source,false,true).resolveObject(relative);}
Url.prototype.resolveObject=function(relative){if(util.isString(relative)){var rel=new Url();rel.parse(relative,false,true);relative=rel;}
var result=new Url();var tkeys=Object.keys(this);for(var tk=0;tk<tkeys.length;tk++){var tkey=tkeys[tk];result[tkey]=this[tkey];}
result.hash=relative.hash;if(relative.href===''){result.href=result.format();return result;}
if(relative.slashes&&!relative.protocol){var rkeys=Object.keys(relative);for(var rk=0;rk<rkeys.length;rk++){var rkey=rkeys[rk];if(rkey!=='protocol')
result[rkey]=relative[rkey];}
if(slashedProtocol[result.protocol]&&result.hostname&&!result.pathname){result.path=result.pathname='/';}
result.href=result.format();return result;}
if(relative.protocol&&relative.protocol!==result.protocol){if(!slashedProtocol[relative.protocol]){var keys=Object.keys(relative);for(var v=0;v<keys.length;v++){var k=keys[v];result[k]=relative[k];}
result.href=result.format();return result;}
result.protocol=relative.protocol;if(!relative.host&&!hostlessProtocol[relative.protocol]){var relPath=(relative.pathname||'').split('/');while(relPath.length&&!(relative.host=relPath.shift()));if(!relative.host)relative.host='';if(!relative.hostname)relative.hostname='';if(relPath[0]!=='')relPath.unshift('');if(relPath.length<2)relPath.unshift('');result.pathname=relPath.join('/');}else{result.pathname=relative.pathname;}
result.search=relative.search;result.query=relative.query;result.host=relative.host||'';result.auth=relative.auth;result.hostname=relative.hostname||relative.host;result.port=relative.port;if(result.pathname||result.search){var p=result.pathname||'';var s=result.search||'';result.path=p+s;}
result.slashes=result.slashes||relative.slashes;result.href=result.format();return result;}
var isSourceAbs=(result.pathname&&result.pathname.charAt(0)==='/'),isRelAbs=(relative.host||relative.pathname&&relative.pathname.charAt(0)==='/'),mustEndAbs=(isRelAbs||isSourceAbs||(result.host&&relative.pathname)),removeAllDots=mustEndAbs,srcPath=result.pathname&&result.pathname.split('/')||[],relPath=relative.pathname&&relative.pathname.split('/')||[],psychotic=result.protocol&&!slashedProtocol[result.protocol];if(psychotic){result.hostname='';result.port=null;if(result.host){if(srcPath[0]==='')srcPath[0]=result.host;else srcPath.unshift(result.host);}
result.host='';if(relative.protocol){relative.hostname=null;relative.port=null;if(relative.host){if(relPath[0]==='')relPath[0]=relative.host;else relPath.unshift(relative.host);}
relative.host=null;}
mustEndAbs=mustEndAbs&&(relPath[0]===''||srcPath[0]==='');}
if(isRelAbs){result.host=(relative.host||relative.host==='')?relative.host:result.host;result.hostname=(relative.hostname||relative.hostname==='')?relative.hostname:result.hostname;result.search=relative.search;result.query=relative.query;srcPath=relPath;}else if(relPath.length){if(!srcPath)srcPath=[];srcPath.pop();srcPath=srcPath.concat(relPath);result.search=relative.search;result.query=relative.query;}else if(!util.isNullOrUndefined(relative.search)){if(psychotic){result.hostname=result.host=srcPath.shift();var authInHost=result.host&&result.host.indexOf('@')>0?result.host.split('@'):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift();}}
result.search=relative.search;result.query=relative.query;if(!util.isNull(result.pathname)||!util.isNull(result.search)){result.path=(result.pathname?result.pathname:'')+
(result.search?result.search:'');}
result.href=result.format();return result;}
if(!srcPath.length){result.pathname=null;if(result.search){result.path='/'+result.search;}else{result.path=null;}
result.href=result.format();return result;}
var last=srcPath.slice(-1)[0];var hasTrailingSlash=((result.host||relative.host||srcPath.length>1)&&(last==='.'||last==='..')||last==='');var up=0;for(var i=srcPath.length;i>=0;i--){last=srcPath[i];if(last==='.'){srcPath.splice(i,1);}else if(last==='..'){srcPath.splice(i,1);up++;}else if(up){srcPath.splice(i,1);up--;}}
if(!mustEndAbs&&!removeAllDots){for(;up--;up){srcPath.unshift('..');}}
if(mustEndAbs&&srcPath[0]!==''&&(!srcPath[0]||srcPath[0].charAt(0)!=='/')){srcPath.unshift('');}
if(hasTrailingSlash&&(srcPath.join('/').substr(-1)!=='/')){srcPath.push('');}
var isAbsolute=srcPath[0]===''||(srcPath[0]&&srcPath[0].charAt(0)==='/');if(psychotic){result.hostname=result.host=isAbsolute?'':srcPath.length?srcPath.shift():'';var authInHost=result.host&&result.host.indexOf('@')>0?result.host.split('@'):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift();}}
mustEndAbs=mustEndAbs||(result.host&&srcPath.length);if(mustEndAbs&&!isAbsolute){srcPath.unshift('');}
if(!srcPath.length){result.pathname=null;result.path=null;}else{result.pathname=srcPath.join('/');}
if(!util.isNull(result.pathname)||!util.isNull(result.search)){result.path=(result.pathname?result.pathname:'')+
(result.search?result.search:'');}
result.auth=relative.auth||result.auth;result.slashes=result.slashes||relative.slashes;result.href=result.format();return result;};Url.prototype.parseHost=function(){var host=this.host;var port=portPattern.exec(host);if(port){port=port[0];if(port!==':'){this.port=port.substr(1);}
host=host.substr(0,host.length-port.length);}
if(host)this.hostname=host;};}),(function(module,exports,__webpack_require__){module.exports=Signature;var assert=__webpack_require__(15);var Buffer=__webpack_require__(21).Buffer;var algs=__webpack_require__(41);var crypto=__webpack_require__(24);var errs=__webpack_require__(72);var utils=__webpack_require__(34);var asn1=__webpack_require__(79);var SSHBuffer=__webpack_require__(136);var InvalidAlgorithmError=errs.InvalidAlgorithmError;var SignatureParseError=errs.SignatureParseError;function Signature(opts){assert.object(opts,'options');assert.arrayOfObject(opts.parts,'options.parts');assert.string(opts.type,'options.type');var partLookup={};for(var i=0;i<opts.parts.length;++i){var part=opts.parts[i];partLookup[part.name]=part;}
this.type=opts.type;this.hashAlgorithm=opts.hashAlgo;this.curve=opts.curve;this.parts=opts.parts;this.part=partLookup;}
Signature.prototype.toBuffer=function(format){if(format===undefined)
format='asn1';assert.string(format,'format');var buf;var stype='ssh-'+this.type;switch(this.type){case 'rsa':switch(this.hashAlgorithm){case 'sha256':stype='rsa-sha2-256';break;case 'sha512':stype='rsa-sha2-512';break;case 'sha1':case undefined:break;default:throw(new Error('SSH signature '+
'format does not support hash '+
'algorithm '+this.hashAlgorithm));}
if(format==='ssh'){buf=new SSHBuffer({});buf.writeString(stype);buf.writePart(this.part.sig);return(buf.toBuffer());}else{return(this.part.sig.data);}
break;case 'ed25519':if(format==='ssh'){buf=new SSHBuffer({});buf.writeString(stype);buf.writePart(this.part.sig);return(buf.toBuffer());}else{return(this.part.sig.data);}
break;case 'dsa':case 'ecdsa':var r,s;if(format==='asn1'){var der=new asn1.BerWriter();der.startSequence();r=utils.mpNormalize(this.part.r.data);s=utils.mpNormalize(this.part.s.data);der.writeBuffer(r,asn1.Ber.Integer);der.writeBuffer(s,asn1.Ber.Integer);der.endSequence();return(der.buffer);}else if(format==='ssh'&&this.type==='dsa'){buf=new SSHBuffer({});buf.writeString('ssh-dss');r=this.part.r.data;if(r.length>20&&r[0]===0x00)
r=r.slice(1);s=this.part.s.data;if(s.length>20&&s[0]===0x00)
s=s.slice(1);if((this.hashAlgorithm&&this.hashAlgorithm!=='sha1')||r.length+s.length!==40){throw(new Error('OpenSSH only supports '+
'DSA signatures with SHA1 hash'));}
buf.writeBuffer(Buffer.concat([r,s]));return(buf.toBuffer());}else if(format==='ssh'&&this.type==='ecdsa'){var inner=new SSHBuffer({});r=this.part.r.data;inner.writeBuffer(r);inner.writePart(this.part.s);buf=new SSHBuffer({});var curve;if(r[0]===0x00)
r=r.slice(1);var sz=r.length*8;if(sz===256)
curve='nistp256';else if(sz===384)
curve='nistp384';else if(sz===528)
curve='nistp521';buf.writeString('ecdsa-sha2-'+curve);buf.writeBuffer(inner.toBuffer());return(buf.toBuffer());}
throw(new Error('Invalid signature format'));default:throw(new Error('Invalid signature data'));}};Signature.prototype.toString=function(format){assert.optionalString(format,'format');return(this.toBuffer(format).toString('base64'));};Signature.parse=function(data,type,format){if(typeof(data)==='string')
data=Buffer.from(data,'base64');assert.buffer(data,'data');assert.string(format,'format');assert.string(type,'type');var opts={};opts.type=type.toLowerCase();opts.parts=[];try{assert.ok(data.length>0,'signature must not be empty');switch(opts.type){case 'rsa':return(parseOneNum(data,type,format,opts));case 'ed25519':return(parseOneNum(data,type,format,opts));case 'dsa':case 'ecdsa':if(format==='asn1')
return(parseDSAasn1(data,type,format,opts));else if(opts.type==='dsa')
return(parseDSA(data,type,format,opts));else
return(parseECDSA(data,type,format,opts));default:throw(new InvalidAlgorithmError(type));}}catch(e){if(e instanceof InvalidAlgorithmError)
throw(e);throw(new SignatureParseError(type,format,e));}};function parseOneNum(data,type,format,opts){if(format==='ssh'){try{var buf=new SSHBuffer({buffer:data});var head=buf.readString();}catch(e){}
if(buf!==undefined){var msg='SSH signature does not match expected '+
'type (expected '+type+', got '+head+')';switch(head){case 'ssh-rsa':assert.strictEqual(type,'rsa',msg);opts.hashAlgo='sha1';break;case 'rsa-sha2-256':assert.strictEqual(type,'rsa',msg);opts.hashAlgo='sha256';break;case 'rsa-sha2-512':assert.strictEqual(type,'rsa',msg);opts.hashAlgo='sha512';break;case 'ssh-ed25519':assert.strictEqual(type,'ed25519',msg);opts.hashAlgo='sha512';break;default:throw(new Error('Unknown SSH signature '+
'type: '+head));}
var sig=buf.readPart();assert.ok(buf.atEnd(),'extra trailing bytes');sig.name='sig';opts.parts.push(sig);return(new Signature(opts));}}
opts.parts.push({name:'sig',data:data});return(new Signature(opts));}
function parseDSAasn1(data,type,format,opts){var der=new asn1.BerReader(data);der.readSequence();var r=der.readString(asn1.Ber.Integer,true);var s=der.readString(asn1.Ber.Integer,true);opts.parts.push({name:'r',data:utils.mpNormalize(r)});opts.parts.push({name:'s',data:utils.mpNormalize(s)});return(new Signature(opts));}
function parseDSA(data,type,format,opts){if(data.length!=40){var buf=new SSHBuffer({buffer:data});var d=buf.readBuffer();if(d.toString('ascii')==='ssh-dss')
d=buf.readBuffer();assert.ok(buf.atEnd(),'extra trailing bytes');assert.strictEqual(d.length,40,'invalid inner length');data=d;}
opts.parts.push({name:'r',data:data.slice(0,20)});opts.parts.push({name:'s',data:data.slice(20,40)});return(new Signature(opts));}
function parseECDSA(data,type,format,opts){var buf=new SSHBuffer({buffer:data});var r,s;var inner=buf.readBuffer();var stype=inner.toString('ascii');if(stype.slice(0,6)==='ecdsa-'){var parts=stype.split('-');assert.strictEqual(parts[0],'ecdsa');assert.strictEqual(parts[1],'sha2');opts.curve=parts[2];switch(opts.curve){case 'nistp256':opts.hashAlgo='sha256';break;case 'nistp384':opts.hashAlgo='sha384';break;case 'nistp521':opts.hashAlgo='sha512';break;default:throw(new Error('Unsupported ECDSA curve: '+
opts.curve));}
inner=buf.readBuffer();assert.ok(buf.atEnd(),'extra trailing bytes on outer');buf=new SSHBuffer({buffer:inner});r=buf.readPart();}else{r={data:inner};}
s=buf.readPart();assert.ok(buf.atEnd(),'extra trailing bytes');r.name='r';s.name='s';opts.parts.push(r);opts.parts.push(s);return(new Signature(opts));}
Signature.isSignature=function(obj,ver){return(utils.isCompatible(obj,Signature,ver));};Signature.prototype._sshpkApiVersion=[2,1];Signature._oldVersionDetect=function(obj){assert.func(obj.toBuffer);if(obj.hasOwnProperty('hashAlgorithm'))
return([2,0]);return([1,0]);};}),(function(module,exports,__webpack_require__){var Ber=__webpack_require__(825);module.exports={Ber:Ber,BerReader:Ber.Reader,BerWriter:Ber.Writer};}),(function(module,exports,__webpack_require__){var META=__webpack_require__(93)('meta');var isObject=__webpack_require__(14);var has=__webpack_require__(51);var setDesc=__webpack_require__(27).f;var id=0;var isExtensible=Object.isExtensible||function(){return true;};var FREEZE=!__webpack_require__(13)(function(){return isExtensible(Object.preventExtensions({}));});var setMeta=function(it){setDesc(it,META,{value:{i:'O'+ ++id,w:{}}});};var fastKey=function(it,create){if(!isObject(it))return typeof it=='symbol'?it:(typeof it=='string'?'S':'P')+it;if(!has(it,META)){if(!isExtensible(it))return 'F';if(!create)return 'E';setMeta(it);}return it[META].i;};var getWeak=function(it,create){if(!has(it,META)){if(!isExtensible(it))return true;if(!create)return false;setMeta(it);}return it[META].w;};var onFreeze=function(it){if(FREEZE&&meta.NEED&&isExtensible(it)&&!has(it,META))setMeta(it);return it;};var meta=module.exports={KEY:META,NEED:false,fastKey:fastKey,getWeak:getWeak,onFreeze:onFreeze};}),(function(module,exports){module.exports=false;}),(function(module,exports,__webpack_require__){var UNSCOPABLES=__webpack_require__(19)('unscopables');var ArrayProto=Array.prototype;if(ArrayProto[UNSCOPABLES]==undefined)__webpack_require__(48)(ArrayProto,UNSCOPABLES,{});module.exports=function(key){ArrayProto[UNSCOPABLES][key]=true;};}),(function(module,exports){module.exports=function(module){if(!module.webpackPolyfill){module.deprecate=function(){};module.paths=[];if(!module.children)module.children=[];Object.defineProperty(module,"loaded",{enumerable:true,get:function(){return module.l;}});Object.defineProperty(module,"id",{enumerable:true,get:function(){return module.i;}});module.webpackPolyfill=1;}
return module;};}),(function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;;(function(globalObject){'use strict';var BigNumber,isNumeric=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,mathceil=Math.ceil,mathfloor=Math.floor,bignumberError='[BigNumber Error] ',tooManyDigits=bignumberError+'Number primitive has more than 15 significant digits: ',BASE=1e14,LOG_BASE=14,MAX_SAFE_INTEGER=0x1fffffffffffff,POWS_TEN=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],SQRT_BASE=1e7,MAX=1E9;function clone(configObject){var div,convertBase,parseNumeric,P=BigNumber.prototype,ONE=new BigNumber(1),DECIMAL_PLACES=20,ROUNDING_MODE=4,TO_EXP_NEG=-7,TO_EXP_POS=21,MIN_EXP=-1e7,MAX_EXP=1e7,CRYPTO=false,MODULO_MODE=1,POW_PRECISION=0,FORMAT={decimalSeparator:'.',groupSeparator:',',groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:'\xA0',fractionGroupSize:0},ALPHABET='0123456789abcdefghijklmnopqrstuvwxyz';function BigNumber(n,b){var alphabet,c,e,i,isNum,len,str,x=this;if(!(x instanceof BigNumber)){return new BigNumber(n,b);}
if(b==null){if(n instanceof BigNumber){x.s=n.s;x.e=n.e;x.c=(n=n.c)?n.slice():n;return;}
isNum=typeof n=='number';if(isNum&&n*0==0){x.s=1/n<0?(n=-n,-1):1;if(n===~~n){for(e=0,i=n;i>=10;i/=10,e++);x.e=e;x.c=[n];return;}
str=n+'';}else{if(!isNumeric.test(str=n+''))return parseNumeric(x,str,isNum);x.s=str.charCodeAt(0)==45?(str=str.slice(1),-1):1;}}else{intCheck(b,2,ALPHABET.length,'Base');str=n+'';if(b==10){x=new BigNumber(n instanceof BigNumber?n:str);return round(x,DECIMAL_PLACES+x.e+1,ROUNDING_MODE);}
isNum=typeof n=='number';if(isNum){if(n*0!=0)return parseNumeric(x,str,isNum,b);x.s=1/n<0?(str=str.slice(1),-1):1;if(str.replace(/^0\.0*|\./,'').length>15){throw Error
(tooManyDigits+n);}
isNum=false;}else{x.s=str.charCodeAt(0)===45?(str=str.slice(1),-1):1;if(b>10&&b<37)str=str.toLowerCase();}
alphabet=ALPHABET.slice(0,b);e=i=0;for(len=str.length;i<len;i++){if(alphabet.indexOf(c=str.charAt(i))<0){if(c=='.'){if(i>e){e=len;continue;}}
return parseNumeric(x,n+'',isNum,b);}}
str=convertBase(str,b,10,x.s);}
if((e=str.indexOf('.'))>-1)str=str.replace('.','');if((i=str.search(/e/i))>0){if(e<0)e=i;e+=+str.slice(i+1);str=str.substring(0,i);}else if(e<0){e=str.length;}
for(i=0;str.charCodeAt(i)===48;i++);for(len=str.length;str.charCodeAt(--len)===48;);str=str.slice(i,len+1);if(str){len=str.length;if(isNum&&len>15&&(n>MAX_SAFE_INTEGER||n!==mathfloor(n))){throw Error
(tooManyDigits+(x.s*n));}
e=e-i-1;if(e>MAX_EXP){x.c=x.e=null;}else if(e<MIN_EXP){x.c=[x.e=0];}else{x.e=e;x.c=[];i=(e+1)%LOG_BASE;if(e<0)i+=LOG_BASE;if(i<len){if(i)x.c.push(+str.slice(0,i));for(len-=LOG_BASE;i<len;){x.c.push(+str.slice(i,i+=LOG_BASE));}
str=str.slice(i);i=LOG_BASE-str.length;}else{i-=len;}
for(;i--;str+='0');x.c.push(+str);}}else{x.c=[x.e=0];}}
BigNumber.clone=clone;BigNumber.ROUND_UP=0;BigNumber.ROUND_DOWN=1;BigNumber.ROUND_CEIL=2;BigNumber.ROUND_FLOOR=3;BigNumber.ROUND_HALF_UP=4;BigNumber.ROUND_HALF_DOWN=5;BigNumber.ROUND_HALF_EVEN=6;BigNumber.ROUND_HALF_CEIL=7;BigNumber.ROUND_HALF_FLOOR=8;BigNumber.EUCLID=9;BigNumber.config=BigNumber.set=function(obj){var p,v;if(obj!=null){if(typeof obj=='object'){if(obj.hasOwnProperty(p='DECIMAL_PLACES')){v=obj[p];intCheck(v,0,MAX,p);DECIMAL_PLACES=v;}
if(obj.hasOwnProperty(p='ROUNDING_MODE')){v=obj[p];intCheck(v,0,8,p);ROUNDING_MODE=v;}
if(obj.hasOwnProperty(p='EXPONENTIAL_AT')){v=obj[p];if(isArray(v)){intCheck(v[0],-MAX,0,p);intCheck(v[1],0,MAX,p);TO_EXP_NEG=v[0];TO_EXP_POS=v[1];}else{intCheck(v,-MAX,MAX,p);TO_EXP_NEG=-(TO_EXP_POS=v<0?-v:v);}}
if(obj.hasOwnProperty(p='RANGE')){v=obj[p];if(isArray(v)){intCheck(v[0],-MAX,-1,p);intCheck(v[1],1,MAX,p);MIN_EXP=v[0];MAX_EXP=v[1];}else{intCheck(v,-MAX,MAX,p);if(v){MIN_EXP=-(MAX_EXP=v<0?-v:v);}else{throw Error
(bignumberError+p+' cannot be zero: '+v);}}}
if(obj.hasOwnProperty(p='CRYPTO')){v=obj[p];if(v===!!v){if(v){if(typeof crypto!='undefined'&&crypto&&(crypto.getRandomValues||crypto.randomBytes)){CRYPTO=v;}else{CRYPTO=!v;throw Error
(bignumberError+'crypto unavailable');}}else{CRYPTO=v;}}else{throw Error
(bignumberError+p+' not true or false: '+v);}}
if(obj.hasOwnProperty(p='MODULO_MODE')){v=obj[p];intCheck(v,0,9,p);MODULO_MODE=v;}
if(obj.hasOwnProperty(p='POW_PRECISION')){v=obj[p];intCheck(v,0,MAX,p);POW_PRECISION=v;}
if(obj.hasOwnProperty(p='FORMAT')){v=obj[p];if(typeof v=='object')FORMAT=v;else throw Error
(bignumberError+p+' not an object: '+v);}
if(obj.hasOwnProperty(p='ALPHABET')){v=obj[p];if(typeof v=='string'&&!/^.$|\.|(.).*\1/.test(v)){ALPHABET=v;}else{throw Error
(bignumberError+p+' invalid: '+v);}}}else{throw Error
(bignumberError+'Object expected: '+obj);}}
return{DECIMAL_PLACES:DECIMAL_PLACES,ROUNDING_MODE:ROUNDING_MODE,EXPONENTIAL_AT:[TO_EXP_NEG,TO_EXP_POS],RANGE:[MIN_EXP,MAX_EXP],CRYPTO:CRYPTO,MODULO_MODE:MODULO_MODE,POW_PRECISION:POW_PRECISION,FORMAT:FORMAT,ALPHABET:ALPHABET};};BigNumber.isBigNumber=function(v){return v instanceof BigNumber||v&&v._isBigNumber===true||false;};BigNumber.maximum=BigNumber.max=function(){return maxOrMin(arguments,P.lt);};BigNumber.minimum=BigNumber.min=function(){return maxOrMin(arguments,P.gt);};BigNumber.random=(function(){var pow2_53=0x20000000000000;var random53bitInt=(Math.random()*pow2_53)&0x1fffff?function(){return mathfloor(Math.random()*pow2_53);}:function(){return((Math.random()*0x40000000|0)*0x800000)+
(Math.random()*0x800000|0);};return function(dp){var a,b,e,k,v,i=0,c=[],rand=new BigNumber(ONE);if(dp==null)dp=DECIMAL_PLACES;else intCheck(dp,0,MAX);k=mathceil(dp/LOG_BASE);if(CRYPTO){if(crypto.getRandomValues){a=crypto.getRandomValues(new Uint32Array(k*=2));for(;i<k;){v=a[i]*0x20000+(a[i+1]>>>11);if(v>=9e15){b=crypto.getRandomValues(new Uint32Array(2));a[i]=b[0];a[i+1]=b[1];}else{c.push(v%1e14);i+=2;}}
i=k/2;}else if(crypto.randomBytes){a=crypto.randomBytes(k*=7);for(;i<k;){v=((a[i]&31)*0x1000000000000)+(a[i+1]*0x10000000000)+
(a[i+2]*0x100000000)+(a[i+3]*0x1000000)+
(a[i+4]<<16)+(a[i+5]<<8)+a[i+6];if(v>=9e15){crypto.randomBytes(7).copy(a,i);}else{c.push(v%1e14);i+=7;}}
i=k/7;}else{CRYPTO=false;throw Error
(bignumberError+'crypto unavailable');}}
if(!CRYPTO){for(;i<k;){v=random53bitInt();if(v<9e15)c[i++]=v%1e14;}}
k=c[--i];dp%=LOG_BASE;if(k&&dp){v=POWS_TEN[LOG_BASE-dp];c[i]=mathfloor(k/v)*v;}
for(;c[i]===0;c.pop(),i--);if(i<0){c=[e=0];}else{for(e=-1;c[0]===0;c.splice(0,1),e-=LOG_BASE);for(i=1,v=c[0];v>=10;v/=10,i++);if(i<LOG_BASE)e-=LOG_BASE-i;}
rand.e=e;rand.c=c;return rand;};})();convertBase=(function(){var decimal='0123456789';function toBaseOut(str,baseIn,baseOut,alphabet){var j,arr=[0],arrL,i=0,len=str.length;for(;i<len;){for(arrL=arr.length;arrL--;arr[arrL]*=baseIn);arr[0]+=alphabet.indexOf(str.charAt(i++));for(j=0;j<arr.length;j++){if(arr[j]>baseOut-1){if(arr[j+1]==null)arr[j+1]=0;arr[j+1]+=arr[j]/baseOut|0;arr[j]%=baseOut;}}}
return arr.reverse();}
return function(str,baseIn,baseOut,sign,callerIsToString){var alphabet,d,e,k,r,x,xc,y,i=str.indexOf('.'),dp=DECIMAL_PLACES,rm=ROUNDING_MODE;if(i>=0){k=POW_PRECISION;POW_PRECISION=0;str=str.replace('.','');y=new BigNumber(baseIn);x=y.pow(str.length-i);POW_PRECISION=k;y.c=toBaseOut(toFixedPoint(coeffToString(x.c),x.e,'0'),10,baseOut,decimal);y.e=y.c.length;}
xc=toBaseOut(str,baseIn,baseOut,callerIsToString?(alphabet=ALPHABET,decimal):(alphabet=decimal,ALPHABET));e=k=xc.length;for(;xc[--k]==0;xc.pop());if(!xc[0])return alphabet.charAt(0);if(i<0){--e;}else{x.c=xc;x.e=e;x.s=sign;x=div(x,y,dp,rm,baseOut);xc=x.c;r=x.r;e=x.e;}
d=e+dp+1;i=xc[d];k=baseOut/2;r=r||d<0||xc[d+1]!=null;r=rm<4?(i!=null||r)&&(rm==0||rm==(x.s<0?3:2)):i>k||i==k&&(rm==4||r||rm==6&&xc[d-1]&1||rm==(x.s<0?8:7));if(d<1||!xc[0]){str=r?toFixedPoint(alphabet.charAt(1),-dp,alphabet.charAt(0)):alphabet.charAt(0);}else{xc.length=d;if(r){for(--baseOut;++xc[--d]>baseOut;){xc[d]=0;if(!d){++e;xc=[1].concat(xc);}}}
for(k=xc.length;!xc[--k];);for(i=0,str='';i<=k;str+=alphabet.charAt(xc[i++]));str=toFixedPoint(str,e,alphabet.charAt(0));}
return str;};})();div=(function(){function multiply(x,k,base){var m,temp,xlo,xhi,carry=0,i=x.length,klo=k%SQRT_BASE,khi=k/SQRT_BASE|0;for(x=x.slice();i--;){xlo=x[i]%SQRT_BASE;xhi=x[i]/SQRT_BASE|0;m=khi*xlo+xhi*klo;temp=klo*xlo+((m%SQRT_BASE)*SQRT_BASE)+carry;carry=(temp/base|0)+(m/SQRT_BASE|0)+khi*xhi;x[i]=temp%base;}
if(carry)x=[carry].concat(x);return x;}
function compare(a,b,aL,bL){var i,cmp;if(aL!=bL){cmp=aL>bL?1:-1;}else{for(i=cmp=0;i<aL;i++){if(a[i]!=b[i]){cmp=a[i]>b[i]?1:-1;break;}}}
return cmp;}
function subtract(a,b,aL,base){var i=0;for(;aL--;){a[aL]-=i;i=a[aL]<b[aL]?1:0;a[aL]=i*base+a[aL]-b[aL];}
for(;!a[0]&&a.length>1;a.splice(0,1));}
return function(x,y,dp,rm,base){var cmp,e,i,more,n,prod,prodL,q,qc,rem,remL,rem0,xi,xL,yc0,yL,yz,s=x.s==y.s?1:-1,xc=x.c,yc=y.c;if(!xc||!xc[0]||!yc||!yc[0]){return new BigNumber(!x.s||!y.s||(xc?yc&&xc[0]==yc[0]:!yc)?NaN:xc&&xc[0]==0||!yc?s*0:s/0);}
q=new BigNumber(s);qc=q.c=[];e=x.e-y.e;s=dp+e+1;if(!base){base=BASE;e=bitFloor(x.e/LOG_BASE)-bitFloor(y.e/LOG_BASE);s=s/LOG_BASE|0;}
for(i=0;yc[i]==(xc[i]||0);i++);if(yc[i]>(xc[i]||0))e--;if(s<0){qc.push(1);more=true;}else{xL=xc.length;yL=yc.length;i=0;s+=2;n=mathfloor(base/(yc[0]+1));if(n>1){yc=multiply(yc,n,base);xc=multiply(xc,n,base);yL=yc.length;xL=xc.length;}
xi=yL;rem=xc.slice(0,yL);remL=rem.length;for(;remL<yL;rem[remL++]=0);yz=yc.slice();yz=[0].concat(yz);yc0=yc[0];if(yc[1]>=base/2)yc0++;do{n=0;cmp=compare(yc,rem,yL,remL);if(cmp<0){rem0=rem[0];if(yL!=remL)rem0=rem0*base+(rem[1]||0);n=mathfloor(rem0/yc0);if(n>1){if(n>=base)n=base-1;prod=multiply(yc,n,base);prodL=prod.length;remL=rem.length;while(compare(prod,rem,prodL,remL)==1){n--;subtract(prod,yL<prodL?yz:yc,prodL,base);prodL=prod.length;cmp=1;}}else{if(n==0){cmp=n=1;}
prod=yc.slice();prodL=prod.length;}
if(prodL<remL)prod=[0].concat(prod);subtract(rem,prod,remL,base);remL=rem.length;if(cmp==-1){while(compare(yc,rem,yL,remL)<1){n++;subtract(rem,yL<remL?yz:yc,remL,base);remL=rem.length;}}}else if(cmp===0){n++;rem=[0];}
qc[i++]=n;if(rem[0]){rem[remL++]=xc[xi]||0;}else{rem=[xc[xi]];remL=1;}}while((xi++<xL||rem[0]!=null)&&s--);more=rem[0]!=null;if(!qc[0])qc.splice(0,1);}
if(base==BASE){for(i=1,s=qc[0];s>=10;s/=10,i++);round(q,dp+(q.e=i+e*LOG_BASE-1)+1,rm,more);}else{q.e=e;q.r=+more;}
return q;};})();function format(n,i,rm,id){var c0,e,ne,len,str;if(rm==null)rm=ROUNDING_MODE;else intCheck(rm,0,8);if(!n.c)return n.toString();c0=n.c[0];ne=n.e;if(i==null){str=coeffToString(n.c);str=id==1||id==2&&ne<=TO_EXP_NEG?toExponential(str,ne):toFixedPoint(str,ne,'0');}else{n=round(new BigNumber(n),i,rm);e=n.e;str=coeffToString(n.c);len=str.length;if(id==1||id==2&&(i<=e||e<=TO_EXP_NEG)){for(;len<i;str+='0',len++);str=toExponential(str,e);}else{i-=ne;str=toFixedPoint(str,e,'0');if(e+1>len){if(--i>0)for(str+='.';i--;str+='0');}else{i+=e-len;if(i>0){if(e+1==len)str+='.';for(;i--;str+='0');}}}}
return n.s<0&&c0?'-'+str:str;}
function maxOrMin(args,method){var m,n,i=0;if(isArray(args[0]))args=args[0];m=new BigNumber(args[0]);for(;++i<args.length;){n=new BigNumber(args[i]);if(!n.s){m=n;break;}else if(method.call(m,n)){m=n;}}
return m;}
function normalise(n,c,e){var i=1,j=c.length;for(;!c[--j];c.pop());for(j=c[0];j>=10;j/=10,i++);if((e=i+e*LOG_BASE-1)>MAX_EXP){n.c=n.e=null;}else if(e<MIN_EXP){n.c=[n.e=0];}else{n.e=e;n.c=c;}
return n;}
parseNumeric=(function(){var basePrefix=/^(-?)0([xbo])(?=\w[\w.]*$)/i,dotAfter=/^([^.]+)\.$/,dotBefore=/^\.([^.]+)$/,isInfinityOrNaN=/^-?(Infinity|NaN)$/,whitespaceOrPlus=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(x,str,isNum,b){var base,s=isNum?str:str.replace(whitespaceOrPlus,'');if(isInfinityOrNaN.test(s)){x.s=isNaN(s)?null:s<0?-1:1;x.c=x.e=null;}else{if(!isNum){s=s.replace(basePrefix,function(m,p1,p2){base=(p2=p2.toLowerCase())=='x'?16:p2=='b'?2:8;return!b||b==base?p1:m;});if(b){base=b;s=s.replace(dotAfter,'$1').replace(dotBefore,'0.$1');}
if(str!=s)return new BigNumber(s,base);}
throw Error
(bignumberError+'Not a'+(b?' base '+b:'')+' number: '+str);}}})();function round(x,sd,rm,r){var d,i,j,k,n,ni,rd,xc=x.c,pows10=POWS_TEN;if(xc){out:{for(d=1,k=xc[0];k>=10;k/=10,d++);i=sd-d;if(i<0){i+=LOG_BASE;j=sd;n=xc[ni=0];rd=n/pows10[d-j-1]%10|0;}else{ni=mathceil((i+1)/LOG_BASE);if(ni>=xc.length){if(r){for(;xc.length<=ni;xc.push(0));n=rd=0;d=1;i%=LOG_BASE;j=i-LOG_BASE+1;}else{break out;}}else{n=k=xc[ni];for(d=1;k>=10;k/=10,d++);i%=LOG_BASE;j=i-LOG_BASE+d;rd=j<0?0:n/pows10[d-j-1]%10|0;}}
r=r||sd<0||xc[ni+1]!=null||(j<0?n:n%pows10[d-j-1]);r=rm<4?(rd||r)&&(rm==0||rm==(x.s<0?3:2)):rd>5||rd==5&&(rm==4||r||rm==6&&((i>0?j>0?n/pows10[d-j]:0:xc[ni-1])%10)&1||rm==(x.s<0?8:7));if(sd<1||!xc[0]){xc.length=0;if(r){sd-=x.e+1;xc[0]=pows10[(LOG_BASE-sd%LOG_BASE)%LOG_BASE];x.e=-sd||0;}else{xc[0]=x.e=0;}
return x;}
if(i==0){xc.length=ni;k=1;ni--;}else{xc.length=ni+1;k=pows10[LOG_BASE-i];xc[ni]=j>0?mathfloor(n/pows10[d-j]%pows10[j])*k:0;}
if(r){for(;;){if(ni==0){for(i=1,j=xc[0];j>=10;j/=10,i++);j=xc[0]+=k;for(k=1;j>=10;j/=10,k++);if(i!=k){x.e++;if(xc[0]==BASE)xc[0]=1;}
break;}else{xc[ni]+=k;if(xc[ni]!=BASE)break;xc[ni--]=0;k=1;}}}
for(i=xc.length;xc[--i]===0;xc.pop());}
if(x.e>MAX_EXP){x.c=x.e=null;}else if(x.e<MIN_EXP){x.c=[x.e=0];}}
return x;}
P.absoluteValue=P.abs=function(){var x=new BigNumber(this);if(x.s<0)x.s=1;return x;};P.comparedTo=function(y,b){return compare(this,new BigNumber(y,b));};P.decimalPlaces=P.dp=function(dp,rm){var c,n,v,x=this;if(dp!=null){intCheck(dp,0,MAX);if(rm==null)rm=ROUNDING_MODE;else intCheck(rm,0,8);return round(new BigNumber(x),dp+x.e+1,rm);}
if(!(c=x.c))return null;n=((v=c.length-1)-bitFloor(this.e/LOG_BASE))*LOG_BASE;if(v=c[v])for(;v%10==0;v/=10,n--);if(n<0)n=0;return n;};P.dividedBy=P.div=function(y,b){return div(this,new BigNumber(y,b),DECIMAL_PLACES,ROUNDING_MODE);};P.dividedToIntegerBy=P.idiv=function(y,b){return div(this,new BigNumber(y,b),0,1);};P.isEqualTo=P.eq=function(y,b){return compare(this,new BigNumber(y,b))===0;};P.integerValue=function(rm){var n=new BigNumber(this);if(rm==null)rm=ROUNDING_MODE;else intCheck(rm,0,8);return round(n,n.e+1,rm);};P.isGreaterThan=P.gt=function(y,b){return compare(this,new BigNumber(y,b))>0;};P.isGreaterThanOrEqualTo=P.gte=function(y,b){return(b=compare(this,new BigNumber(y,b)))===1||b===0;};P.isFinite=function(){return!!this.c;};P.isInteger=function(){return!!this.c&&bitFloor(this.e/LOG_BASE)>this.c.length-2;};P.isNaN=function(){return!this.s;};P.isNegative=function(){return this.s<0;};P.isPositive=function(){return this.s>0;};P.isZero=function(){return!!this.c&&this.c[0]==0;};P.isLessThan=P.lt=function(y,b){return compare(this,new BigNumber(y,b))<0;};P.isLessThanOrEqualTo=P.lte=function(y,b){return(b=compare(this,new BigNumber(y,b)))===-1||b===0;};P.minus=function(y,b){var i,j,t,xLTy,x=this,a=x.s;y=new BigNumber(y,b);b=y.s;if(!a||!b)return new BigNumber(NaN);if(a!=b){y.s=-b;return x.plus(y);}
var xe=x.e/LOG_BASE,ye=y.e/LOG_BASE,xc=x.c,yc=y.c;if(!xe||!ye){if(!xc||!yc)return xc?(y.s=-b,y):new BigNumber(yc?x:NaN);if(!xc[0]||!yc[0]){return yc[0]?(y.s=-b,y):new BigNumber(xc[0]?x:ROUNDING_MODE==3?-0:0);}}
xe=bitFloor(xe);ye=bitFloor(ye);xc=xc.slice();if(a=xe-ye){if(xLTy=a<0){a=-a;t=xc;}else{ye=xe;t=yc;}
t.reverse();for(b=a;b--;t.push(0));t.reverse();}else{j=(xLTy=(a=xc.length)<(b=yc.length))?a:b;for(a=b=0;b<j;b++){if(xc[b]!=yc[b]){xLTy=xc[b]<yc[b];break;}}}
if(xLTy)t=xc,xc=yc,yc=t,y.s=-y.s;b=(j=yc.length)-(i=xc.length);if(b>0)for(;b--;xc[i++]=0);b=BASE-1;for(;j>a;){if(xc[--j]<yc[j]){for(i=j;i&&!xc[--i];xc[i]=b);--xc[i];xc[j]+=BASE;}
xc[j]-=yc[j];}
for(;xc[0]==0;xc.splice(0,1),--ye);if(!xc[0]){y.s=ROUNDING_MODE==3?-1:1;y.c=[y.e=0];return y;}
return normalise(y,xc,ye);};P.modulo=P.mod=function(y,b){var q,s,x=this;y=new BigNumber(y,b);if(!x.c||!y.s||y.c&&!y.c[0]){return new BigNumber(NaN);}else if(!y.c||x.c&&!x.c[0]){return new BigNumber(x);}
if(MODULO_MODE==9){s=y.s;y.s=1;q=div(x,y,0,3);y.s=s;q.s*=s;}else{q=div(x,y,0,MODULO_MODE);}
return x.minus(q.times(y));};P.multipliedBy=P.times=function(y,b){var c,e,i,j,k,m,xcL,xlo,xhi,ycL,ylo,yhi,zc,base,sqrtBase,x=this,xc=x.c,yc=(y=new BigNumber(y,b)).c;if(!xc||!yc||!xc[0]||!yc[0]){if(!x.s||!y.s||xc&&!xc[0]&&!yc||yc&&!yc[0]&&!xc){y.c=y.e=y.s=null;}else{y.s*=x.s;if(!xc||!yc){y.c=y.e=null;}else{y.c=[0];y.e=0;}}
return y;}
e=bitFloor(x.e/LOG_BASE)+bitFloor(y.e/LOG_BASE);y.s*=x.s;xcL=xc.length;ycL=yc.length;if(xcL<ycL)zc=xc,xc=yc,yc=zc,i=xcL,xcL=ycL,ycL=i;for(i=xcL+ycL,zc=[];i--;zc.push(0));base=BASE;sqrtBase=SQRT_BASE;for(i=ycL;--i>=0;){c=0;ylo=yc[i]%sqrtBase;yhi=yc[i]/sqrtBase|0;for(k=xcL,j=i+k;j>i;){xlo=xc[--k]%sqrtBase;xhi=xc[k]/sqrtBase|0;m=yhi*xlo+xhi*ylo;xlo=ylo*xlo+((m%sqrtBase)*sqrtBase)+zc[j]+c;c=(xlo/base|0)+(m/sqrtBase|0)+yhi*xhi;zc[j--]=xlo%base;}
zc[j]=c;}
if(c){++e;}else{zc.splice(0,1);}
return normalise(y,zc,e);};P.negated=function(){var x=new BigNumber(this);x.s=-x.s||null;return x;};P.plus=function(y,b){var t,x=this,a=x.s;y=new BigNumber(y,b);b=y.s;if(!a||!b)return new BigNumber(NaN);if(a!=b){y.s=-b;return x.minus(y);}
var xe=x.e/LOG_BASE,ye=y.e/LOG_BASE,xc=x.c,yc=y.c;if(!xe||!ye){if(!xc||!yc)return new BigNumber(a/0);if(!xc[0]||!yc[0])return yc[0]?y:new BigNumber(xc[0]?x:a*0);}
xe=bitFloor(xe);ye=bitFloor(ye);xc=xc.slice();if(a=xe-ye){if(a>0){ye=xe;t=yc;}else{a=-a;t=xc;}
t.reverse();for(;a--;t.push(0));t.reverse();}
a=xc.length;b=yc.length;if(a-b<0)t=yc,yc=xc,xc=t,b=a;for(a=0;b;){a=(xc[--b]=xc[b]+yc[b]+a)/BASE|0;xc[b]=BASE===xc[b]?0:xc[b]%BASE;}
if(a){xc=[a].concat(xc);++ye;}
return normalise(y,xc,ye);};P.precision=P.sd=function(sd,rm){var c,n,v,x=this;if(sd!=null&&sd!==!!sd){intCheck(sd,1,MAX);if(rm==null)rm=ROUNDING_MODE;else intCheck(rm,0,8);return round(new BigNumber(x),sd,rm);}
if(!(c=x.c))return null;v=c.length-1;n=v*LOG_BASE+1;if(v=c[v]){for(;v%10==0;v/=10,n--);for(v=c[0];v>=10;v/=10,n++);}
if(sd&&x.e+1>n)n=x.e+1;return n;};P.shiftedBy=function(k){intCheck(k,-MAX_SAFE_INTEGER,MAX_SAFE_INTEGER);return this.times('1e'+k);};P.squareRoot=P.sqrt=function(){var m,n,r,rep,t,x=this,c=x.c,s=x.s,e=x.e,dp=DECIMAL_PLACES+4,half=new BigNumber('0.5');if(s!==1||!c||!c[0]){return new BigNumber(!s||s<0&&(!c||c[0])?NaN:c?x:1/0);}
s=Math.sqrt(+x);if(s==0||s==1/0){n=coeffToString(c);if((n.length+e)%2==0)n+='0';s=Math.sqrt(n);e=bitFloor((e+1)/2)-(e<0||e%2);if(s==1/0){n='1e'+e;}else{n=s.toExponential();n=n.slice(0,n.indexOf('e')+1)+e;}
r=new BigNumber(n);}else{r=new BigNumber(s+'');}
if(r.c[0]){e=r.e;s=e+dp;if(s<3)s=0;for(;;){t=r;r=half.times(t.plus(div(x,t,dp,1)));if(coeffToString(t.c).slice(0,s)===(n=coeffToString(r.c)).slice(0,s)){if(r.e<e)--s;n=n.slice(s-3,s+1);if(n=='9999'||!rep&&n=='4999'){if(!rep){round(t,t.e+DECIMAL_PLACES+2,0);if(t.times(t).eq(x)){r=t;break;}}
dp+=4;s+=4;rep=1;}else{if(!+n||!+n.slice(1)&&n.charAt(0)=='5'){round(r,r.e+DECIMAL_PLACES+2,1);m=!r.times(r).eq(x);}
break;}}}}
return round(r,r.e+DECIMAL_PLACES+1,ROUNDING_MODE,m);};P.toExponential=function(dp,rm){if(dp!=null){intCheck(dp,0,MAX);dp++;}
return format(this,dp,rm,1);};P.toFixed=function(dp,rm){if(dp!=null){intCheck(dp,0,MAX);dp=dp+this.e+1;}
return format(this,dp,rm);};P.toFormat=function(dp,rm){var str=this.toFixed(dp,rm);if(this.c){var i,arr=str.split('.'),g1=+FORMAT.groupSize,g2=+FORMAT.secondaryGroupSize,groupSeparator=FORMAT.groupSeparator,intPart=arr[0],fractionPart=arr[1],isNeg=this.s<0,intDigits=isNeg?intPart.slice(1):intPart,len=intDigits.length;if(g2)i=g1,g1=g2,g2=i,len-=i;if(g1>0&&len>0){i=len%g1||g1;intPart=intDigits.substr(0,i);for(;i<len;i+=g1){intPart+=groupSeparator+intDigits.substr(i,g1);}
if(g2>0)intPart+=groupSeparator+intDigits.slice(i);if(isNeg)intPart='-'+intPart;}
str=fractionPart?intPart+FORMAT.decimalSeparator+((g2=+FORMAT.fractionGroupSize)?fractionPart.replace(new RegExp('\\d{'+g2+'}\\B','g'),'$&'+FORMAT.fractionGroupSeparator):fractionPart):intPart;}
return str;};P.toFraction=function(md){var arr,d,d0,d1,d2,e,exp,n,n0,n1,q,s,x=this,xc=x.c;if(md!=null){n=new BigNumber(md);if(!n.isInteger()||n.lt(ONE)){throw Error
(bignumberError+'Argument '+
(n.isInteger()?'out of range: ':'not an integer: ')+md);}}
if(!xc)return x.toString();d=new BigNumber(ONE);n1=d0=new BigNumber(ONE);d1=n0=new BigNumber(ONE);s=coeffToString(xc);e=d.e=s.length-x.e-1;d.c[0]=POWS_TEN[(exp=e%LOG_BASE)<0?LOG_BASE+exp:exp];md=!md||n.comparedTo(d)>0?(e>0?d:n1):n;exp=MAX_EXP;MAX_EXP=1/0;n=new BigNumber(s);n0.c[0]=0;for(;;){q=div(n,d,0,1);d2=d0.plus(q.times(d1));if(d2.comparedTo(md)==1)break;d0=d1;d1=d2;n1=n0.plus(q.times(d2=n1));n0=d2;d=n.minus(q.times(d2=d));n=d2;}
d2=div(md.minus(d0),d1,0,1);n0=n0.plus(d2.times(n1));d0=d0.plus(d2.times(d1));n0.s=n1.s=x.s;e*=2;arr=div(n1,d1,e,ROUNDING_MODE).minus(x).abs().comparedTo(div(n0,d0,e,ROUNDING_MODE).minus(x).abs())<1?[n1.toString(),d1.toString()]:[n0.toString(),d0.toString()];MAX_EXP=exp;return arr;};P.toNumber=function(){return+this;};P.exponentiatedBy=P.pow=function(n,m){var i,k,y,z,x=this;intCheck(n,-MAX_SAFE_INTEGER,MAX_SAFE_INTEGER);if(m!=null)m=new BigNumber(m);if(m){if(n>1&&x.gt(ONE)&&x.isInteger()&&m.gt(ONE)&&m.isInteger()){x=x.mod(m);}else{z=m;m=null;}}else if(POW_PRECISION){k=mathceil(POW_PRECISION/LOG_BASE+2);}
y=new BigNumber(ONE);for(i=mathfloor(n<0?-n:n);;){if(i%2){y=y.times(x);if(!y.c)break;if(k){if(y.c.length>k)y.c.length=k;}else if(m){y=y.mod(m);}}
i=mathfloor(i/2);if(!i)break;x=x.times(x);if(k){if(x.c&&x.c.length>k)x.c.length=k;}else if(m){x=x.mod(m);}}
if(m)return y;if(n<0)y=ONE.div(y);return z?y.mod(z):k?round(y,POW_PRECISION,ROUNDING_MODE):y;};P.toPrecision=function(sd,rm){if(sd!=null)intCheck(sd,1,MAX);return format(this,sd,rm,2);};P.toString=function(b){var str,n=this,s=n.s,e=n.e;if(e===null){if(s){str='Infinity';if(s<0)str='-'+str;}else{str='NaN';}}else{str=coeffToString(n.c);if(b==null){str=e<=TO_EXP_NEG||e>=TO_EXP_POS?toExponential(str,e):toFixedPoint(str,e,'0');}else{intCheck(b,2,ALPHABET.length,'Base');str=convertBase(toFixedPoint(str,e,'0'),10,b,s,true);}
if(s<0&&n.c[0])str='-'+str;}
return str;};P.valueOf=P.toJSON=function(){var str,n=this,e=n.e;if(e===null)return n.toString();str=coeffToString(n.c);str=e<=TO_EXP_NEG||e>=TO_EXP_POS?toExponential(str,e):toFixedPoint(str,e,'0');return n.s<0?'-'+str:str;};P._isBigNumber=true;if(configObject!=null)BigNumber.set(configObject);return BigNumber;}
function bitFloor(n){var i=n|0;return n>0||n===i?i:i-1;}
function coeffToString(a){var s,z,i=1,j=a.length,r=a[0]+'';for(;i<j;){s=a[i++]+'';z=LOG_BASE-s.length;for(;z--;s='0'+s);r+=s;}
for(j=r.length;r.charCodeAt(--j)===48;);return r.slice(0,j+1||1);}
function compare(x,y){var a,b,xc=x.c,yc=y.c,i=x.s,j=y.s,k=x.e,l=y.e;if(!i||!j)return null;a=xc&&!xc[0];b=yc&&!yc[0];if(a||b)return a?b?0:-j:i;if(i!=j)return i;a=i<0;b=k==l;if(!xc||!yc)return b?0:!xc^a?1:-1;if(!b)return k>l^a?1:-1;j=(k=xc.length)<(l=yc.length)?k:l;for(i=0;i<j;i++)if(xc[i]!=yc[i])return xc[i]>yc[i]^a?1:-1;return k==l?0:k>l^a?1:-1;}
function intCheck(n,min,max,name){if(n<min||n>max||n!==(n<0?mathceil(n):mathfloor(n))){throw Error
(bignumberError+(name||'Argument')+(typeof n=='number'?n<min||n>max?' out of range: ':' not an integer: ':' not a primitive number: ')+n);}}
function isArray(obj){return Object.prototype.toString.call(obj)=='[object Array]';}
function toExponential(str,e){return(str.length>1?str.charAt(0)+'.'+str.slice(1):str)+
(e<0?'e':'e+')+e;}
function toFixedPoint(str,e,z){var len,zs;if(e<0){for(zs=z+'.';++e;zs+=z);str=zs+str;}else{len=str.length;if(++e>len){for(zs=z,e-=len;--e;zs+=z);str+=zs;}else if(e<len){str=str.slice(0,e)+'.'+str.slice(e);}}
return str;}
BigNumber=clone();BigNumber['default']=BigNumber.BigNumber=BigNumber;if(true){!(__WEBPACK_AMD_DEFINE_RESULT__=(function(){return BigNumber;}).call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));}else if(typeof module!='undefined'&&module.exports){module.exports=BigNumber;}else{if(!globalObject){globalObject=typeof self!='undefined'?self:Function('return this')();}
globalObject.BigNumber=BigNumber;}})(this);}),(function(module,exports,__webpack_require__){var Buffer=__webpack_require__(4).Buffer
var Transform=__webpack_require__(67).Transform
var StringDecoder=__webpack_require__(210).StringDecoder
var inherits=__webpack_require__(7)
function CipherBase(hashMode){Transform.call(this)
this.hashMode=typeof hashMode==='string'
if(this.hashMode){this[hashMode]=this._finalOrDigest}else{this.final=this._finalOrDigest}
if(this._final){this.__final=this._final
this._final=null}
this._decoder=null
this._encoding=null}
inherits(CipherBase,Transform)
CipherBase.prototype.update=function(data,inputEnc,outputEnc){if(typeof data==='string'){data=Buffer.from(data,inputEnc)}
var outData=this._update(data)
if(this.hashMode)return this
if(outputEnc){outData=this._toString(outData,outputEnc)}
return outData}
CipherBase.prototype.setAutoPadding=function(){}
CipherBase.prototype.getAuthTag=function(){throw new Error('trying to get auth tag in unsupported state')}
CipherBase.prototype.setAuthTag=function(){throw new Error('trying to set auth tag in unsupported state')}
CipherBase.prototype.setAAD=function(){throw new Error('trying to set aad in unsupported state')}
CipherBase.prototype._transform=function(data,_,next){var err
try{if(this.hashMode){this._update(data)}else{this.push(this._update(data))}}catch(e){err=e}finally{next(err)}}
CipherBase.prototype._flush=function(done){var err
try{this.push(this.__final())}catch(e){err=e}
done(err)}
CipherBase.prototype._finalOrDigest=function(outputEnc){var outData=this.__final()||Buffer.alloc(0)
if(outputEnc){outData=this._toString(outData,outputEnc,true)}
return outData}
CipherBase.prototype._toString=function(value,enc,fin){if(!this._decoder){this._decoder=new StringDecoder(enc)
this._encoding=enc}
if(this._encoding!==enc)throw new Error('can\'t switch encodings')
var out=this._decoder.write(value)
if(fin){out+=this._decoder.end()}
return out}
module.exports=CipherBase}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__=__webpack_require__(5);let CLI,readline;let termination;if(false){readline=require('readline');termination=require('./../../termination').default;}
class AdvancedMessages{constructor(){if(false){this.WEBD_CLI=readline.createInterface({input:process.stdin,output:process.stdout,prompt:'WEBD_CLI:> '});this.WEBD_CLI.on("SIGINT",function(){termination(Blockchain);});}}
alert(param,title,type,timeout){if(true)
alert(param);else{if(type==='error')console.error(param);if(type==='warn')console.warn(param);if(type==='info')console.log(param);}}
input(message){if(true)
return prompt(message);else
return this._questionCLI(message);}
async confirm(message){if(true)
return await confirm(message);else{while(1===1){let answer=(await this._questionCLI(message+"  y/n")).toLowerCase();if(answer==='y')return true;else if(answer==='n')return false;}}}
async readNumber(message,isFloat=false){let answer=await this.input(message);let num=isFloat?parseFloat(answer):parseInt(answer);if(isNaN(num))
return NaN;return num;}
log(cliMsg,browserMsg){if(true)
console.info(browserMsg||cliMsg);else
console.info(cliMsg);}
_questionCLI(message){return new Promise((resolve)=>{console.info(message);this.WEBD_CLI.question('',(answer)=>{resolve(answer);});});}}
__webpack_exports__["a"]=(new AdvancedMessages());}),(function(module,exports,__webpack_require__){var BigInteger=__webpack_require__(355)
__webpack_require__(776)
module.exports=BigInteger}),(function(module,exports,__webpack_require__){module.exports={read:read,write:write};var assert=__webpack_require__(15);var asn1=__webpack_require__(79);var crypto=__webpack_require__(24);var Buffer=__webpack_require__(21).Buffer;var algs=__webpack_require__(41);var utils=__webpack_require__(34);var Key=__webpack_require__(33);var PrivateKey=__webpack_require__(38);var pkcs1=__webpack_require__(243);var pkcs8=__webpack_require__(137);var sshpriv=__webpack_require__(174);var rfc4253=__webpack_require__(89);var errors=__webpack_require__(72);var OID_PBES2='1.2.840.113549.1.5.13';var OID_PBKDF2='1.2.840.113549.1.5.12';var OID_TO_CIPHER={'1.2.840.113549.3.7':'3des-cbc','2.16.840.1.101.3.4.1.2':'aes128-cbc','2.16.840.1.101.3.4.1.42':'aes256-cbc'};var CIPHER_TO_OID={};Object.keys(OID_TO_CIPHER).forEach(function(k){CIPHER_TO_OID[OID_TO_CIPHER[k]]=k;});var OID_TO_HASH={'1.2.840.113549.2.7':'sha1','1.2.840.113549.2.9':'sha256','1.2.840.113549.2.11':'sha512'};var HASH_TO_OID={};Object.keys(OID_TO_HASH).forEach(function(k){HASH_TO_OID[OID_TO_HASH[k]]=k;});function read(buf,options,forceType){var input=buf;if(typeof(buf)!=='string'){assert.buffer(buf,'buf');buf=buf.toString('ascii');}
var lines=buf.trim().split(/[\r\n]+/g);var m;var si=-1;while(!m&&si<lines.length){m=lines[++si].match(/[-]+[ ]*BEGIN ([A-Z0-9][A-Za-z0-9]+ )?(PUBLIC|PRIVATE) KEY[ ]*[-]+/);}
assert.ok(m,'invalid PEM header');var m2;var ei=lines.length;while(!m2&&ei>0){m2=lines[--ei].match(/[-]+[ ]*END ([A-Z0-9][A-Za-z0-9]+ )?(PUBLIC|PRIVATE) KEY[ ]*[-]+/);}
assert.ok(m2,'invalid PEM footer');assert.equal(m[2],m2[2]);var type=m[2].toLowerCase();var alg;if(m[1]){assert.equal(m[1],m2[1],'PEM header and footer mismatch');alg=m[1].trim();}
lines=lines.slice(si,ei+1);var headers={};while(true){lines=lines.slice(1);m=lines[0].match(/^([A-Za-z0-9-]+): (.+)$/);if(!m)
break;headers[m[1].toLowerCase()]=m[2];}
lines=lines.slice(0,-1).join('');buf=Buffer.from(lines,'base64');var cipher,key,iv;if(headers['proc-type']){var parts=headers['proc-type'].split(',');if(parts[0]==='4'&&parts[1]==='ENCRYPTED'){if(typeof(options.passphrase)==='string'){options.passphrase=Buffer.from(options.passphrase,'utf-8');}
if(!Buffer.isBuffer(options.passphrase)){throw(new errors.KeyEncryptedError(options.filename,'PEM'));}else{parts=headers['dek-info'].split(',');assert.ok(parts.length===2);cipher=parts[0].toLowerCase();iv=Buffer.from(parts[1],'hex');key=utils.opensslKeyDeriv(cipher,iv,options.passphrase,1).key;}}}
if(alg&&alg.toLowerCase()==='encrypted'){var eder=new asn1.BerReader(buf);var pbesEnd;eder.readSequence();eder.readSequence();pbesEnd=eder.offset+eder.length;var method=eder.readOID();if(method!==OID_PBES2){throw(new Error('Unsupported PEM/PKCS8 encryption '+
'scheme: '+method));}
eder.readSequence();eder.readSequence();var kdfEnd=eder.offset+eder.length;var kdfOid=eder.readOID();if(kdfOid!==OID_PBKDF2)
throw(new Error('Unsupported PBES2 KDF: '+kdfOid));eder.readSequence();var salt=eder.readString(asn1.Ber.OctetString,true);var iterations=eder.readInt();var hashAlg='sha1';if(eder.offset<kdfEnd){eder.readSequence();var hashAlgOid=eder.readOID();hashAlg=OID_TO_HASH[hashAlgOid];if(hashAlg===undefined){throw(new Error('Unsupported PBKDF2 hash: '+
hashAlgOid));}}
eder._offset=kdfEnd;eder.readSequence();var cipherOid=eder.readOID();cipher=OID_TO_CIPHER[cipherOid];if(cipher===undefined){throw(new Error('Unsupported PBES2 cipher: '+
cipherOid));}
iv=eder.readString(asn1.Ber.OctetString,true);eder._offset=pbesEnd;buf=eder.readString(asn1.Ber.OctetString,true);if(typeof(options.passphrase)==='string'){options.passphrase=Buffer.from(options.passphrase,'utf-8');}
if(!Buffer.isBuffer(options.passphrase)){throw(new errors.KeyEncryptedError(options.filename,'PEM'));}
var cinfo=utils.opensshCipherInfo(cipher);cipher=cinfo.opensslName;key=utils.pbkdf2(hashAlg,salt,iterations,cinfo.keySize,options.passphrase);alg=undefined;}
if(cipher&&key&&iv){var cipherStream=crypto.createDecipheriv(cipher,key,iv);var chunk,chunks=[];cipherStream.once('error',function(e){if(e.toString().indexOf('bad decrypt')!==-1){throw(new Error('Incorrect passphrase '+
'supplied, could not decrypt key'));}
throw(e);});cipherStream.write(buf);cipherStream.end();while((chunk=cipherStream.read())!==null)
chunks.push(chunk);buf=Buffer.concat(chunks);}
if(alg&&alg.toLowerCase()==='openssh')
return(sshpriv.readSSHPrivate(type,buf,options));if(alg&&alg.toLowerCase()==='ssh2')
return(rfc4253.readType(type,buf,options));var der=new asn1.BerReader(buf);der.originalInput=input;der.readSequence();if(alg){if(forceType)
assert.strictEqual(forceType,'pkcs1');return(pkcs1.readPkcs1(alg,type,der));}else{if(forceType)
assert.strictEqual(forceType,'pkcs8');return(pkcs8.readPkcs8(alg,type,der));}}
function write(key,options,type){assert.object(key);var alg={'ecdsa':'EC','rsa':'RSA','dsa':'DSA','ed25519':'EdDSA'}[key.type];var header;var der=new asn1.BerWriter();if(PrivateKey.isPrivateKey(key)){if(type&&type==='pkcs8'){header='PRIVATE KEY';pkcs8.writePkcs8(der,key);}else{if(type)
assert.strictEqual(type,'pkcs1');header=alg+' PRIVATE KEY';pkcs1.writePkcs1(der,key);}}else if(Key.isKey(key)){if(type&&type==='pkcs1'){header=alg+' PUBLIC KEY';pkcs1.writePkcs1(der,key);}else{if(type)
assert.strictEqual(type,'pkcs8');header='PUBLIC KEY';pkcs8.writePkcs8(der,key);}}else{throw(new Error('key is not a Key or PrivateKey'));}
var tmp=der.buffer.toString('base64');var len=tmp.length+(tmp.length/64)+
18+16+header.length*2+10;var buf=Buffer.alloc(len);var o=0;o+=buf.write('-----BEGIN '+header+'-----\n',o);for(var i=0;i<tmp.length;){var limit=i+64;if(limit>tmp.length)
limit=tmp.length;o+=buf.write(tmp.slice(i,limit),o);buf[o++]=10;i=limit;}
o+=buf.write('-----END '+header+'-----\n',o);return(buf.slice(0,o));}}),(function(module,exports,__webpack_require__){module.exports={read:read.bind(undefined,false,undefined),readType:read.bind(undefined,false),write:write,readPartial:read.bind(undefined,true),readInternal:read,keyTypeToAlg:keyTypeToAlg,algToKeyType:algToKeyType};var assert=__webpack_require__(15);var Buffer=__webpack_require__(21).Buffer;var algs=__webpack_require__(41);var utils=__webpack_require__(34);var Key=__webpack_require__(33);var PrivateKey=__webpack_require__(38);var SSHBuffer=__webpack_require__(136);function algToKeyType(alg){assert.string(alg);if(alg==='ssh-dss')
return('dsa');else if(alg==='ssh-rsa')
return('rsa');else if(alg==='ssh-ed25519')
return('ed25519');else if(alg==='ssh-curve25519')
return('curve25519');else if(alg.match(/^ecdsa-sha2-/))
return('ecdsa');else
throw(new Error('Unknown algorithm '+alg));}
function keyTypeToAlg(key){assert.object(key);if(key.type==='dsa')
return('ssh-dss');else if(key.type==='rsa')
return('ssh-rsa');else if(key.type==='ed25519')
return('ssh-ed25519');else if(key.type==='curve25519')
return('ssh-curve25519');else if(key.type==='ecdsa')
return('ecdsa-sha2-'+key.part.curve.data.toString());else
throw(new Error('Unknown key type '+key.type));}
function read(partial,type,buf,options){if(typeof(buf)==='string')
buf=Buffer.from(buf);assert.buffer(buf,'buf');var key={};var parts=key.parts=[];var sshbuf=new SSHBuffer({buffer:buf});var alg=sshbuf.readString();assert.ok(!sshbuf.atEnd(),'key must have at least one part');key.type=algToKeyType(alg);var partCount=algs.info[key.type].parts.length;if(type&&type==='private')
partCount=algs.privInfo[key.type].parts.length;while(!sshbuf.atEnd()&&parts.length<partCount)
parts.push(sshbuf.readPart());while(!partial&&!sshbuf.atEnd())
parts.push(sshbuf.readPart());assert.ok(parts.length>=1,'key must have at least one part');assert.ok(partial||sshbuf.atEnd(),'leftover bytes at end of key');var Constructor=Key;var algInfo=algs.info[key.type];if(type==='private'||algInfo.parts.length!==parts.length){algInfo=algs.privInfo[key.type];Constructor=PrivateKey;}
assert.strictEqual(algInfo.parts.length,parts.length);if(key.type==='ecdsa'){var res=/^ecdsa-sha2-(.+)$/.exec(alg);assert.ok(res!==null);assert.strictEqual(res[1],parts[0].data.toString());}
var normalized=true;for(var i=0;i<algInfo.parts.length;++i){var p=parts[i];p.name=algInfo.parts[i];if(key.type==='ed25519'&&p.name==='k')
p.data=p.data.slice(0,32);if(p.name!=='curve'&&algInfo.normalize!==false){var nd;if(key.type==='ed25519'){nd=utils.zeroPadToLength(p.data,32);}else{nd=utils.mpNormalize(p.data);}
if(nd.toString('binary')!==p.data.toString('binary')){p.data=nd;normalized=false;}}}
if(normalized)
key._rfc4253Cache=sshbuf.toBuffer();if(partial&&typeof(partial)==='object'){partial.remainder=sshbuf.remainder();partial.consumed=sshbuf._offset;}
return(new Constructor(key));}
function write(key,options){assert.object(key);var alg=keyTypeToAlg(key);var i;var algInfo=algs.info[key.type];if(PrivateKey.isPrivateKey(key))
algInfo=algs.privInfo[key.type];var parts=algInfo.parts;var buf=new SSHBuffer({});buf.writeString(alg);for(i=0;i<parts.length;++i){var data=key.part[parts[i]].data;if(algInfo.normalize!==false){if(key.type==='ed25519')
data=utils.zeroPadToLength(data,32);else
data=utils.mpNormalize(data);}
if(key.type==='ed25519'&&parts[i]==='k')
data=Buffer.concat([data,key.part.A.data]);buf.writeBuffer(data);}
return(buf.toBuffer());}}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){const BigInteger=__webpack_require__(36);const CLEAR_OLD_UNUSED_BLOCKS_INTERVAL=30*1000;const CLEAR_OLD_UNUSED_BLOCKS=5*60*1000;const MAX_BLOCKS_MEMORY=1000;class MemoryManager{constructor(blockchain,savingManager,loadingManager,maxData=MAX_BLOCKS_MEMORY){this.blockchain=blockchain;this.savingManager=savingManager;this.loadingManager=loadingManager;this._loaded={};this._loadedCount=0;this._maxData=maxData;this._intervalClearOldUnsuedBlocks=setTimeout(this._clearOldUnusedBlocks.bind(this),CLEAR_OLD_UNUSED_BLOCKS_INTERVAL);}
_validateHeight(height){if(height>=this.blockchain.blocks.length)
throw{message:"getData  invalid height",height:height};}
async getData(height){this._validateHeight(height);if(!this._loaded[height]){let data=await this._loadData(height);this.addToLoaded(height,data);return data;}
this._loaded[height].lastTimeUsed=new Date().getTime();return this._loaded[height].data;}
async _loadData(height){return null;}
_clearOldUnusedBlocks(){let date=new Date().getTime();try{for(let key in this._loaded)
if(date-this._loaded[key].lastTimeUsed>CLEAR_OLD_UNUSED_BLOCKS)
if(this._validateDataForRemoval(this._loaded[key])){delete this._loaded[key];this._loadedCount--;}
if(this._loadedCount>this._maxData){let array=[];for(let height in this._loaded)
array.push({height:Number.parseInt(height),data:this._loaded[height].data,lastTimeUsed:this._loaded[height].lastTimeUsed,});array.sort((a,b)=>b.lastTimeUsed-a.lastTimeUsed);for(let i=this._maxData;i<array.length;i++)
if(this._validateDataForRemoval(array[i])){delete this._loaded[array[i].height];this._loadedCount--;}}}catch(exception){console.error("MemoryManager _clearOldUnusedBlocks raised an error",exception);}
this._intervalClearOldUnsuedBlocks=setTimeout(this._clearOldUnusedBlocks.bind(this),CLEAR_OLD_UNUSED_BLOCKS_INTERVAL);}
_validateDataForRemoval(data){return true;}
addToLoaded(height,data){this._loaded[height]={lastTimeUsed:new Date().getTime(),data:data,};}
deleteLoaded(height,data){if(this._loaded[height]){let oldData=this._loaded[height].data;if(!oldData){delete this._loaded[height];}else
if(Buffer.isBuffer(oldData)){if(!data.equals(oldData))delete this._loaded[height];}else
if(oldData instanceof BigInteger){if(!data.equals(oldData))delete this._loaded[height];}else
if(typeof oldData==="number"){if(data!==oldData)delete this._loaded[height];}
if(typeof oldData==="object"){if(data!==oldData)delete this._loaded[height];}}}}
__webpack_exports__["a"]=(MemoryManager);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){(function(process){exports=module.exports=__webpack_require__(988);exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage='undefined'!=typeof chrome&&'undefined'!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=['lightseagreen','forestgreen','goldenrod','dodgerblue','darkorchid','crimson'];function useColors(){return(typeof document!=='undefined'&&'WebkitAppearance'in document.documentElement.style)||(window.console&&(console.firebug||(console.exception&&console.table)))||(navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31);}
exports.formatters.j=function(v){try{return JSON.stringify(v);}catch(err){return '[UnexpectedJSONParseError]: '+err.message;}};function formatArgs(){var args=arguments;var useColors=this.useColors;args[0]=(useColors?'%c':'')
+this.namespace
+(useColors?' %c':' ')
+args[0]
+(useColors?'%c ':' ')
+'+'+exports.humanize(this.diff);if(!useColors)return args;var c='color: '+this.color;args=[args[0],c,'color: inherit'].concat(Array.prototype.slice.call(args,1));var index=0;var lastC=0;args[0].replace(/%[a-z%]/g,function(match){if('%%'===match)return;index++;if('%c'===match){lastC=index;}});args.splice(lastC,0,c);return args;}
function log(){return 'object'===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments);}
function save(namespaces){try{if(null==namespaces){exports.storage.removeItem('debug');}else{exports.storage.debug=namespaces;}}catch(e){}}
function load(){var r;try{return exports.storage.debug;}catch(e){}
if(typeof process!=='undefined'&&'env'in process){return Object({"MINING_POOL_STATUS":undefined}).DEBUG;}}
exports.enable(load());function localstorage(){try{return window.localStorage;}catch(e){}}}.call(exports,__webpack_require__(20)))}),(function(module,exports){module.exports=function(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value:value};};}),(function(module,exports){var id=0;var px=Math.random();module.exports=function(key){return 'Symbol('.concat(key===undefined?'':key,')_',(++id+px).toString(36));};}),(function(module,exports,__webpack_require__){var $keys=__webpack_require__(271);var enumBugKeys=__webpack_require__(184);module.exports=Object.keys||function keys(O){return $keys(O,enumBugKeys);};}),(function(module,exports,__webpack_require__){var toInteger=__webpack_require__(60);var max=Math.max;var min=Math.min;module.exports=function(index,length){index=toInteger(index);return index<0?max(index+length,0):min(index,length);};}),(function(module,exports,__webpack_require__){var anObject=__webpack_require__(8);var dPs=__webpack_require__(272);var enumBugKeys=__webpack_require__(184);var IE_PROTO=__webpack_require__(183)('IE_PROTO');var Empty=function(){};var PROTOTYPE='prototype';var createDict=function(){var iframe=__webpack_require__(181)('iframe');var i=enumBugKeys.length;var lt='<';var gt='>';var iframeDocument;iframe.style.display='none';__webpack_require__(185).appendChild(iframe);iframe.src='javascript:';iframeDocument=iframe.contentWindow.document;iframeDocument.open();iframeDocument.write(lt+'script'+gt+'document.F=Object'+lt+'/script'+gt);iframeDocument.close();createDict=iframeDocument.F;while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];return createDict();};module.exports=Object.create||function create(O,Properties){var result;if(O!==null){Empty[PROTOTYPE]=anObject(O);result=new Empty();Empty[PROTOTYPE]=null;result[IE_PROTO]=O;}else result=createDict();return Properties===undefined?result:dPs(result,Properties);};}),(function(module,exports,__webpack_require__){var $keys=__webpack_require__(271);var hiddenKeys=__webpack_require__(184).concat('length','prototype');exports.f=Object.getOwnPropertyNames||function getOwnPropertyNames(O){return $keys(O,hiddenKeys);};}),(function(module,exports,__webpack_require__){"use strict";var global=__webpack_require__(11);var dP=__webpack_require__(27);var DESCRIPTORS=__webpack_require__(26);var SPECIES=__webpack_require__(19)('species');module.exports=function(KEY){var C=global[KEY];if(DESCRIPTORS&&C&&!C[SPECIES])dP.f(C,SPECIES,{configurable:true,get:function(){return this;}});};}),(function(module,exports){module.exports=function(it,Constructor,name,forbiddenField){if(!(it instanceof Constructor)||(forbiddenField!==undefined&&forbiddenField in it)){throw TypeError(name+': incorrect invocation!');}return it;};}),(function(module,exports,__webpack_require__){var ctx=__webpack_require__(58);var call=__webpack_require__(284);var isArrayIter=__webpack_require__(196);var anObject=__webpack_require__(8);var toLength=__webpack_require__(22);var getIterFn=__webpack_require__(198);var BREAK={};var RETURN={};var exports=module.exports=function(iterable,entries,fn,that,ITERATOR){var iterFn=ITERATOR?function(){return iterable;}:getIterFn(iterable);var f=ctx(fn,that,entries?2:1);var index=0;var length,step,iterator,result;if(typeof iterFn!='function')throw TypeError(iterable+' is not iterable!');if(isArrayIter(iterFn))for(length=toLength(iterable.length);length>index;index++){result=entries?f(anObject(step=iterable[index])[0],step[1]):f(iterable[index]);if(result===BREAK||result===RETURN)return result;}else for(iterator=iterFn.call(iterable);!(step=iterator.next()).done;){result=call(iterator,f,step.value,entries);if(result===BREAK||result===RETURN)return result;}};exports.BREAK=BREAK;exports.RETURN=RETURN;}),(function(module,exports,__webpack_require__){var redefine=__webpack_require__(49);module.exports=function(target,src,safe){for(var key in src)redefine(target,key,src[key],safe);return target;};}),(function(module,exports,__webpack_require__){"use strict";(function(global,process){function oldBrowser(){throw new Error('Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11')}
var Buffer=__webpack_require__(4).Buffer
var crypto=global.crypto||global.msCrypto
if(crypto&&crypto.getRandomValues){module.exports=randomBytes}else{module.exports=oldBrowser}
function randomBytes(size,cb){if(size>65536)throw new Error('requested too many random bytes')
var rawBytes=new global.Uint8Array(size)
if(size>0){crypto.getRandomValues(rawBytes)}
var bytes=Buffer.from(rawBytes.buffer)
if(typeof cb==='function'){return process.nextTick(function(){cb(null,bytes)})}
return bytes}}.call(exports,__webpack_require__(10),__webpack_require__(20)))}),(function(module,exports,__webpack_require__){"use strict";var inherits=__webpack_require__(7)
var MD5=__webpack_require__(208)
var RIPEMD160=__webpack_require__(211)
var sha=__webpack_require__(212)
var Base=__webpack_require__(85)
function Hash(hash){Base.call(this,'digest')
this._hash=hash}
inherits(Hash,Base)
Hash.prototype._update=function(data){this._hash.update(data)}
Hash.prototype._final=function(){return this._hash.digest()}
module.exports=function createHash(alg){alg=alg.toLowerCase()
if(alg==='md5')return new MD5()
if(alg==='rmd160'||alg==='ripemd160')return new RIPEMD160()
return new Hash(sha(alg))}}),(function(module,exports){function EventEmitter(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined;}
module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;EventEmitter.defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))
throw TypeError('n must be a positive number');this._maxListeners=n;return this;};EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(!this._events)
this._events={};if(type==='error'){if(!this._events.error||(isObject(this._events.error)&&!this._events.error.length)){er=arguments[1];if(er instanceof Error){throw er;}else{var err=new Error('Uncaught, unspecified "error" event. ('+er+')');err.context=er;throw err;}}}
handler=this._events[type];if(isUndefined(handler))
return false;if(isFunction(handler)){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=Array.prototype.slice.call(arguments,1);handler.apply(this,args);}}else if(isObject(handler)){args=Array.prototype.slice.call(arguments,1);listeners=handler.slice();len=listeners.length;for(i=0;i<len;i++)
listeners[i].apply(this,args);}
return true;};EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))
throw TypeError('listener must be a function');if(!this._events)
this._events={};if(this._events.newListener)
this.emit('newListener',type,isFunction(listener.listener)?listener.listener:listener);if(!this._events[type])
this._events[type]=listener;else if(isObject(this._events[type]))
this._events[type].push(listener);else
this._events[type]=[this._events[type],listener];if(isObject(this._events[type])&&!this._events[type].warned){if(!isUndefined(this._maxListeners)){m=this._maxListeners;}else{m=EventEmitter.defaultMaxListeners;}
if(m&&m>0&&this._events[type].length>m){this._events[type].warned=true;console.error('(node) warning: possible EventEmitter memory '+
'leak detected. %d listeners added. '+
'Use emitter.setMaxListeners() to increase limit.',this._events[type].length);if(typeof console.trace==='function'){console.trace();}}}
return this;};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){if(!isFunction(listener))
throw TypeError('listener must be a function');var fired=false;function g(){this.removeListener(type,g);if(!fired){fired=true;listener.apply(this,arguments);}}
g.listener=listener;this.on(type,g);return this;};EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))
throw TypeError('listener must be a function');if(!this._events||!this._events[type])
return this;list=this._events[type];length=list.length;position=-1;if(list===listener||(isFunction(list.listener)&&list.listener===listener)){delete this._events[type];if(this._events.removeListener)
this.emit('removeListener',type,listener);}else if(isObject(list)){for(i=length;i-->0;){if(list[i]===listener||(list[i].listener&&list[i].listener===listener)){position=i;break;}}
if(position<0)
return this;if(list.length===1){list.length=0;delete this._events[type];}else{list.splice(position,1);}
if(this._events.removeListener)
this.emit('removeListener',type,listener);}
return this;};EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)
return this;if(!this._events.removeListener){if(arguments.length===0)
this._events={};else if(this._events[type])
delete this._events[type];return this;}
if(arguments.length===0){for(key in this._events){if(key==='removeListener')continue;this.removeAllListeners(key);}
this.removeAllListeners('removeListener');this._events={};return this;}
listeners=this._events[type];if(isFunction(listeners)){this.removeListener(type,listeners);}else if(listeners){while(listeners.length)
this.removeListener(type,listeners[listeners.length-1]);}
delete this._events[type];return this;};EventEmitter.prototype.listeners=function(type){var ret;if(!this._events||!this._events[type])
ret=[];else if(isFunction(this._events[type]))
ret=[this._events[type]];else
ret=this._events[type].slice();return ret;};EventEmitter.prototype.listenerCount=function(type){if(this._events){var evlistener=this._events[type];if(isFunction(evlistener))
return 1;else if(evlistener)
return evlistener.length;}
return 0;};EventEmitter.listenerCount=function(emitter,type){return emitter.listenerCount(type);};function isFunction(arg){return typeof arg==='function';}
function isNumber(arg){return typeof arg==='number';}
function isObject(arg){return typeof arg==='object'&&arg!==null;}
function isUndefined(arg){return arg===void 0;}}),(function(module,exports,__webpack_require__){"use strict";var pna=__webpack_require__(162);var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){keys.push(key);}return keys;};module.exports=Duplex;var util=__webpack_require__(114);util.inherits=__webpack_require__(7);var Readable=__webpack_require__(312);var Writable=__webpack_require__(209);util.inherits(Duplex,Readable);{var keys=objectKeys(Writable.prototype);for(var v=0;v<keys.length;v++){var method=keys[v];if(!Duplex.prototype[method])Duplex.prototype[method]=Writable.prototype[method];}}
function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options);Writable.call(this,options);if(options&&options.readable===false)this.readable=false;if(options&&options.writable===false)this.writable=false;this.allowHalfOpen=true;if(options&&options.allowHalfOpen===false)this.allowHalfOpen=false;this.once('end',onend);}
Object.defineProperty(Duplex.prototype,'writableHighWaterMark',{enumerable:false,get:function(){return this._writableState.highWaterMark;}});function onend(){if(this.allowHalfOpen||this._writableState.ended)return;pna.nextTick(onEndNT,this);}
function onEndNT(self){self.end();}
Object.defineProperty(Duplex.prototype,'destroyed',{get:function(){if(this._readableState===undefined||this._writableState===undefined){return false;}
return this._readableState.destroyed&&this._writableState.destroyed;},set:function(value){if(this._readableState===undefined||this._writableState===undefined){return;}
this._readableState.destroyed=value;this._writableState.destroyed=value;}});Duplex.prototype._destroy=function(err,cb){this.push(null);this.end();pna.nextTick(cb,err);};}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0__utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_1__WebDollar_Crypto__=__webpack_require__(28);var __WEBPACK_IMPORTED_MODULE_2_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_3_consts_const_global__=__webpack_require__(2);const BigInteger=__webpack_require__(36);class WebDollarCryptoData{static isWebDollarCryptoData(object){if(typeof object!=='object'||object===null)
return false;if(object instanceof WebDollarCryptoData)
return true;return false;}
static createWebDollarCryptoData(object,forceToCreate){if(WebDollarCryptoData.isWebDollarCryptoData(object)){if(forceToCreate)
return new WebDollarCryptoData(new Buffer(object.buffer),"buffer");return object;}
let cryptoData=new WebDollarCryptoData(object);if(forceToCreate&&cryptoData.buffer!==null){cryptoData.buffer=new Buffer(cryptoData.buffer);}
return cryptoData;}
constructor(data,type){this.buffer=null;if((data!==null&&Buffer.isBuffer(data))||(type==="buffer"))
this.buffer=data;else
if(type==="hex")
this.buffer=new Buffer(data,"hex");else
if(type==="base")
this.buffer=new Buffer(__WEBPACK_IMPORTED_MODULE_0__utils_BufferExtended__["a"].fromBase(data));else
if(type==="utf-8")
this.buffer=new Buffer(data,"utf-8");else
if(type==="ascii"||typeof data==="string")
this.buffer=new Buffer(data,"ascii");else
if(type==="byte"||Array.isArray(data))
{if(data.length>0&&typeof data[0]==="object")
this.buffer=this.createBufferFromArray(data);else
this.buffer=new Buffer(data);}
else
if(type==="object"||typeof data==="object"){if(data instanceof BigInteger){this.buffer=__WEBPACK_IMPORTED_MODULE_2_common_utils_Serialization__["a"].serializeBigInteger(data);return;}
if(typeof data==='number'){this.buffer=__WEBPACK_IMPORTED_MODULE_2_common_utils_Serialization__["a"].serializeNumber7Bytes(data);return;}
if(data===null)
this.buffer=new Buffer([0]);else
this.buffer=this.createBufferFromArray(data);}
else
if(typeof data==="number"){this.buffer=__WEBPACK_IMPORTED_MODULE_2_common_utils_Serialization__["a"].serializeNumber4Bytes(data)}}
createBufferFromArray(data){let newValue=null;let i=0;for(let property in data){if(data.hasOwnProperty(property)){if(i===0)
newValue=WebDollarCryptoData.createWebDollarCryptoData(data[property],true);else{if(Buffer.isBuffer(data[property]))
newValue.concat(data[property],false);else
newValue.concat(WebDollarCryptoData.createWebDollarCryptoData(data[property],false));}
i++;}}
if(newValue!==null)
return newValue.buffer;else
return new Buffer([0]);}
toHex(){return this.buffer.toString('hex');}
toString(param){return this.buffer.toString(param);}
toBytes(){let result=[];for(let i=0;i<this.buffer.length;++i){result.push(this.buffer[i]);}
return result;}
toUint8Array(){let result=new Uint8Array(this.buffer.length);for(let i=0;i<this.buffer.length;++i){result[i]=this.buffer[i];}
return result;}
toBase(){return __WEBPACK_IMPORTED_MODULE_0__utils_BufferExtended__["a"].toBase(this.buffer);}
substr(index,count){return __WEBPACK_IMPORTED_MODULE_0__utils_BufferExtended__["a"].substr(this.buffer,index,count);}
longestMatch(cryptoData2,startIndex){if(!WebDollarCryptoData.isWebDollarCryptoData(cryptoData2))
return null;return __WEBPACK_IMPORTED_MODULE_0__utils_BufferExtended__["a"].longestMatch(this.buffer,cryptoData2.buffer,startIndex);}
concat(data){data=WebDollarCryptoData.createWebDollarCryptoData(data);this.buffer=Buffer.concat([this.buffer,data.buffer]);return this;}
compare(data){if(!Buffer.isBuffer(data))
data=WebDollarCryptoData.createWebDollarCryptoData(data);return this.buffer.compare(data.buffer)}}
__webpack_exports__["a"]=(WebDollarCryptoData);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_crypto_WebDollar_Crypto__=__webpack_require__(28);var __WEBPACK_IMPORTED_MODULE_1_common_blockchain_global_Blockchain_Genesis__=__webpack_require__(16);var __WEBPACK_IMPORTED_MODULE_2_common_blockchain_global_Blockchain_Mining_Reward__=__webpack_require__(56);var __WEBPACK_IMPORTED_MODULE_3_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_5_common_utils_BufferExtended__=__webpack_require__(3);const BigInteger=__webpack_require__(36);class InterfaceBlockchainBlock{constructor(blockchain,blockValidation,version,hash,hashPrev,difficultyTargetPrev,hashChainPrev,timeStamp,nonce,data,height,db){this.blockchain=blockchain;this.version=version||0;this.hashPrev=hashPrev;this.difficultyTargetPrev=difficultyTargetPrev;this.hashChainPrev=hashChainPrev||null;this.nonce=nonce||0;this.hash=hash||null;this.hashChain=null;this.difficultyTarget=null;this.height=typeof height==="number"?height:(typeof height==="string"?parseInt(height):0);if(!blockValidation)
blockValidation=this.blockchain.createBlockValidation();this.blockValidation=blockValidation;this.timeStamp=timeStamp||null;if(!data)
data=this.blockchain.blockCreator.createEmptyBlockData();this.data=data;this.reward=undefined;this.db=db;}
async getTimestampForMining(){let timeStamp=this.blockchain.timestamp.networkAdjustedTime-__WEBPACK_IMPORTED_MODULE_1_common_blockchain_global_Blockchain_Genesis__["a"].timeStampOffset;if(!timeStamp)
timeStamp=(new Date().getTime()-__WEBPACK_IMPORTED_MODULE_1_common_blockchain_global_Blockchain_Genesis__["a"].timeStampOffset)/1000;timeStamp+=Math.floor(Math.random()*5);try{await this.blockchain.blocks.timestampBlocks.validateMedianTimestamp(timeStamp,this.height,this.blockValidation);}catch(exception){timeStamp=exception.medianTimestamp+1;await this.blockchain.blocks.timestampBlocks.validateMedianTimestamp(timeStamp,this.height,this.blockValidation);}
timeStamp=Math.ceil(timeStamp);return timeStamp}
async _supplementaryValidation(){return true;}
async validateBlock(height){if(typeof this.version!=='number')throw{message:'version is empty'};if(typeof this.nonce!=='number')throw{message:'nonce is empty'};if(typeof this.timeStamp!=='number')throw{message:'timeStamp is empty'};if(!this.hash||!Buffer.isBuffer(this.hash))throw{message:'hash is empty'};if(!this.hashPrev||!Buffer.isBuffer(this.hashPrev))throw{message:'hashPrev is empty'};if(!this.hashChainPrev||!Buffer.isBuffer(this.hashChainPrev))throw{message:'hashChainPrev is empty'};if(this.timeStamp<0||this.timeStamp>=0xFFFFFFFF)throw{message:'timeStamp is invalid'};if(height>=0){if(this.version!==__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].TRANSACTIONS.VERSIONS.SCHNORR_VERSION)throw{message:'invalid version ',version:this.version};}
if(height!==this.height)
throw{message:'height is different',height:height,myHeight:this.height};if(!(await this._validateHash()))
throw{message:"validateBlockchain returned false"};await this._validateTargetDifficulty();await this._validateBlockTimeStamp();if(this.reward!==__WEBPACK_IMPORTED_MODULE_2_common_blockchain_global_Blockchain_Mining_Reward__["a"].getReward(this.height))
throw{message:'reward is not right: ',myReward:this.reward,reward:__WEBPACK_IMPORTED_MODULE_2_common_blockchain_global_Blockchain_Mining_Reward__["a"].getReward(this.height)};if(await this._supplementaryValidation()===false)
throw{message:"supplementaryValidation failed"};return true;}
async _validateHash(){if(!this.blockValidation.blockValidationType["skip-prev-hash-validation"]){let previousHash=await this.blockValidation.getHashCallback(this.height-1);if(!previousHash||!Buffer.isBuffer(previousHash))
throw{message:'previous hash is not given'};if(!__WEBPACK_IMPORTED_MODULE_5_common_utils_BufferExtended__["a"].safeCompare(previousHash,this.hashPrev))
throw{message:"block prevHash doesn't match ",hashPrev:previousHash.toString("hex"),blockHashPrev:this.hashPrev.toString("hex")};}
if(!this.blockValidation.blockValidationType['skip-validation-PoW-hash']){let hash=await this.computeHash();if(!__WEBPACK_IMPORTED_MODULE_5_common_utils_BufferExtended__["a"].safeCompare(hash,this.hash))
throw{message:"block hash is not right",nonce:this.nonce,height:this.height,myHash:this.hash.toString("hex"),hash:hash.toString("hex"),difficultyTargetPrev:this.difficultyTargetPrev.toString("hex"),serialization:Buffer.concat([this._computeBlockHeaderPrefix(),__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].serializeNumber4Bytes(this.nonce)]).toString("hex")};}
if(!this.blockValidation.blockValidationType["skip-prev-hash-validation"]&&this.height>=__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.POS_ACTIVATION){let prevBlockChainHash=await this.blockValidation.getChainHashCallback(this.height-1);if(!prevBlockChainHash||!Buffer.isBuffer(prevBlockChainHash))
throw{message:'previous chain hash is not given'};if(!__WEBPACK_IMPORTED_MODULE_5_common_utils_BufferExtended__["a"].safeCompare(prevBlockChainHash,this.hashChainPrev))
throw{message:"block prevChainHash doesn't match ",prevBlockChainHash:prevBlockChainHash.toString("hex"),hashChainPrev:this.hashChainPrev.toString("hex")};}
await this.data.validateBlockData(this.height,this.blockValidation);return true;}
async _validateTargetDifficulty(){let prevDifficultyTarget=await this.blockValidation.getDifficultyCallback(this.height-1);if(!prevDifficultyTarget||!Buffer.isBuffer(prevDifficultyTarget))
throw{message:'previousDifficultyTarget is not given'};if(!this.difficultyTargetPrev.equals(prevDifficultyTarget))
throw{message:'previousDifficultyTarget is invalid'};if(!(this.hash.compare(prevDifficultyTarget)<=0))
throw{message:"block doesn't match the difficulty target is not ",hash:this.hash,prevDifficultyTarget:prevDifficultyTarget};return true;}
async _validateBlockTimeStamp(){if(!this.blockValidation.blockValidationType['skip-validation-timestamp']&&this.height>__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].BLOCKCHAIN.TIMESTAMP.VALIDATION_NO_BLOCKS+1)
await this.blockchain.blocks.timestampBlocks.validateMedianTimestamp(this.timeStamp,this.height,this.blockValidation);if(!this.blockValidation.blockValidationType["skip-validation-timestamp-network-adjusted-time"])
this.blockchain.blocks.timestampBlocks.validateNetworkAdjustedTime(this.timeStamp,this.height);return true;}
toString(){return this.hashPrev.toString()+this.data.toString();}
toJSON(){return{height:this.height,version:this.version,hashPrev:this.hashPrev?this.hashPrev.toString("hex"):'',hashChainPrev:this.hashChainPrev?this.hashChainPrev.toString("hex"):'',data:this.data?this.data.toJSON():'',nonce:this.nonce,timeStamp:this.timeStamp,difficulty:this.difficultyTarget?this.difficultyTarget.toString("hex"):'',hash:this.hash?this.hash.toString("hex"):"",hashChain:this.hashChain?this.hashChain.toString("hex"):'',}}
_computeBlockHeaderPrefix(requestHeader=false){if(this.height<__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.TRANSACTIONS_INCLUDING_ONLY_HEADER&&requestHeader)
requestHeader=false;return Buffer.concat([__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].serializeNumber2Bytes(this.version),__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].serializeToFixedBuffer(__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].BLOCKCHAIN.BLOCKS_POW_LENGTH,this.hashPrev),__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].serializeNumber4Bytes(this.timeStamp),(this.height>__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.POS_ACTIVATION)?__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].serializeToFixedBuffer(__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].BLOCKCHAIN.BLOCKS_POW_LENGTH,this.hashChainPrev):new Buffer(0),this.data.serializeData(requestHeader),]);}
async computeHash(newNonce){return this.computeHashPOW(newNonce);}
_getHashPOWData(newNonce){return Buffer.concat([__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].serializeBufferRemovingLeadingZeros(__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].serializeNumber4Bytes(this.height)),__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].serializeBufferRemovingLeadingZeros(this.difficultyTargetPrev),this._computeBlockHeaderPrefix(true),__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].serializeNumber4Bytes(newNonce||this.nonce),]);}
async computeHashPOW(newNonce){try{return __WEBPACK_IMPORTED_MODULE_0_common_crypto_WebDollar_Crypto__["a"].hashPOW(this._getHashPOWData(newNonce));}catch(exception){console.error("Error computeHash",exception);throw exception;}}
static async computeHashStatic(blockSerialized,newNonce){let buffer=Buffer.concat([blockSerialized,__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].serializeNumber4Bytes(newNonce),]);return await __WEBPACK_IMPORTED_MODULE_0_common_crypto_WebDollar_Crypto__["a"].hashPOW(buffer);}
_calculateSerializedBlock(requestHeader=false){return Buffer.concat([this.hash,__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].serializeNumber4Bytes(this.nonce),this._computeBlockHeaderPrefix(requestHeader),]);}
async serializeBlock(requestHeader=false){if(!Buffer.isBuffer(this.hash)||this.hash.length!==__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].BLOCKCHAIN.BLOCKS_POW_LENGTH)
this.hash=await this.computeHash();let data=this._calculateSerializedBlock(requestHeader);return data;}
_deserializeBlock(buffer,offset=0){this.hash=__WEBPACK_IMPORTED_MODULE_5_common_utils_BufferExtended__["a"].substr(buffer,offset,__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].BLOCKCHAIN.BLOCKS_POW_LENGTH);offset+=__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].BLOCKCHAIN.BLOCKS_POW_LENGTH;this.nonce=__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].deserializeNumber4Bytes(buffer,offset,);offset+=4;return offset;}
deserializeBlock(buffer,height,reward,difficultyTargetPrev,offset=0,blockLengthValidation=true,onlyHeader=false){if(!Buffer.isBuffer(buffer)&&typeof buffer==="string")
buffer=new Buffer(buffer,"hex");if(height)this.height=height||0;if(reward)this.reward=reward;else this.reward=__WEBPACK_IMPORTED_MODULE_2_common_blockchain_global_Blockchain_Mining_Reward__["a"].getReward(this.height);if(difficultyTargetPrev)this.difficultyTargetPrev=difficultyTargetPrev;if(blockLengthValidation&&(buffer.length-offset)>__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].SETTINGS.PARAMS.MAX_SIZE.BLOCKS_MAX_SIZE_BYTES)
throw{message:"Block Size is bigger than the MAX_SIZE.BLOCKS_MAX_SIZE_BYTES",bufferLength:buffer.length};try{offset=this._deserializeBlock(buffer,offset);this.version=__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].deserializeNumber2Bytes(buffer,offset);offset+=2;this.hashPrev=__WEBPACK_IMPORTED_MODULE_5_common_utils_BufferExtended__["a"].substr(buffer,offset,__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].BLOCKCHAIN.BLOCKS_POW_LENGTH);offset+=__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].BLOCKCHAIN.BLOCKS_POW_LENGTH;this.timeStamp=__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].deserializeNumber4Bytes(buffer,offset);offset+=4;if(height>__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.POS_ACTIVATION){this.hashChainPrev=__WEBPACK_IMPORTED_MODULE_5_common_utils_BufferExtended__["a"].substr(buffer,offset,__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].BLOCKCHAIN.BLOCKS_POW_LENGTH);offset+=__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].BLOCKCHAIN.BLOCKS_POW_LENGTH;}else
this.hashChainPrev=this.hashPrev;offset=this.data.deserializeData(buffer,offset,onlyHeader);}catch(exception){console.error("error deserializing a block  ",exception,buffer);throw exception;}
return offset;}
async calculateDifficultyTarget(){this.difficultyTarget=await this.blockValidation.getDifficulty(this.timeStamp,this.height);this.difficultyTarget=__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].convertBigNumber(this.difficultyTarget,__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].BLOCKCHAIN.BLOCKS_POW_LENGTH);}
async saveBlockDifficulty(){return this.db.save("blockDiff"+this.height,this.difficultyTarget);}
async saveBlockHash(){return this.db.save("blockHash"+this.height,this.hash);}
async saveBlockHashInversed(){return this.db.save('blockHashInversed'+this.hash.toString('hex'),this.height);}
async saveBlockChainHash(){return this.db.save("blockChainHash"+this.height,this.hashChain);}
async saveBlockTimestamp(){return this.db.save("blockTimestamp"+this.height,this.timeStamp);}
async getChainWork(){let chainWork=await this.blockchain.blocks.loadingManager.getChainWork(this.height-1);chainWork=chainWork.plus(this.workDone);return chainWork;}
async saveChainWork(){return this.db.save("chainWork"+this.height,__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].serializeBigInteger(await this.getChainWork()))}
async saveBlock(){let key="block"+this.height;let bufferValue;try{bufferValue=await this.serializeBlock(false);}catch(exception){console.error('ERROR serializing block: ',exception);throw exception;}
let trials=0,answer;while(trials<20){answer=true;try{answer=answer&&await this.db.save(key,bufferValue);answer=answer&&await this.saveBlockDifficulty();answer=answer&&await this.saveBlockHash();answer=answer&&await this.saveBlockHashInversed();answer=answer&&await this.saveBlockChainHash();answer=answer&&await this.saveBlockTimestamp();answer=answer&&await this.saveChainWork();await this.data.transactions.confirmTransactions(this.height,true);}
catch(exception){console.error('ERROR on SAVE block: ',exception);trials++;}
if(answer)
break;}
return answer;}
async loadBlock(){let key="block"+this.height;try{let buffer=await this.db.get(key,7000);if(!buffer){console.error("block "+this.height+" was not found "+key);return false;}
this.deserializeBlock(buffer,this.height,undefined);if(!this.difficultyTarget)
await this.calculateDifficultyTarget();return true;}
catch(exception){console.error('ERROR on LOAD block: ',exception);return false;}}
async removeBlock(){let key="block"+this.height;try{return this.db.remove(key);}
catch(exception){return 'ERROR on REMOVE block: '+exception;}}
equals(targetBlock){return __WEBPACK_IMPORTED_MODULE_5_common_utils_BufferExtended__["a"].safeCompare(this.hash,targetBlock.hash)&&this.height===targetBlock.height&&this.nonce===targetBlock.nonce&&this.version===targetBlock.version;}
getBlockHeaderWithInformation(){return{height:this.height,chainLength:this.blockchain.blocks.length,chainStartingPoint:this.blockchain.blocks.blocksStartingPoint,header:this.getBlockHeader(),}}
getBlockHeader(){return{version:this.version,height:this.height,hash:this.hash,hashChain:this.hashChain,hashPrev:this.hashPrev,hashChainPrev:this.hashChainPrev,data:{hashData:this.data.hashData,},nonce:this.nonce,timeStamp:this.timeStamp,difficultyTargetPrev:this.difficultyTargetPrev,}}
async importBlockFromHeader(json){this.height=json.height;this.hash=json.hash;this.data.hashData=json.data.hashData;this.hashChainPrev=json.hashChainPrev;this.hashPrev=json.hashPrev;this.difficultyTargetPrev=json.difficultyTargetPrev;this.nonce=json.nonce;this.version=json.version;this.timeStamp=json.timeStamp;this._computeBlockHeaderPrefix(true);await this.computeHash();}
get workDone(){return __WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].BLOCKCHAIN.BLOCKS_MAX_TARGET_BIG_INTEGER.divide(new BigInteger(this.difficultyTargetPrev.toString("hex"),16));}
calculateChainHash(){return this.hash;}}
__webpack_exports__["a"]=(InterfaceBlockchainBlock);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";let AGENT_STATUS={AGENT_STATUS_NOT_SYNCHRONIZED:0,AGENT_STATUS_SYNCHRONIZED:2,AGENT_STATUS_SYNCHRONIZED_SLAVES:3,AGENT_STATUS_SYNCHRONIZED_POOL:4,};__webpack_exports__["a"]=(AGENT_STATUS);}),(function(module,exports,__webpack_require__){var def=__webpack_require__(27).f;var has=__webpack_require__(51);var TAG=__webpack_require__(19)('toStringTag');module.exports=function(it,tag,stat){if(it&&!has(it=stat?it:it.prototype,TAG))def(it,TAG,{configurable:true,value:tag});};}),(function(module,exports,__webpack_require__){var cof=__webpack_require__(59);var TAG=__webpack_require__(19)('toStringTag');var ARG=cof(function(){return arguments;}())=='Arguments';var tryGet=function(it,key){try{return it[key];}catch(e){}};module.exports=function(it){var O,T,B;return it===undefined?'Undefined':it===null?'Null':typeof(T=tryGet(O=Object(it),TAG))=='string'?T:ARG?cof(O):(B=cof(O))=='Object'&&typeof O.callee=='function'?'Arguments':B;};}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var defined=__webpack_require__(64);var fails=__webpack_require__(13);var spaces=__webpack_require__(187);var space='['+spaces+']';var non='\u200b\u0085';var ltrim=RegExp('^'+space+space+'*');var rtrim=RegExp(space+space+'*$');var exporter=function(KEY,exec,ALIAS){var exp={};var FORCE=fails(function(){return!!spaces[KEY]()||non[KEY]()!=non;});var fn=exp[KEY]=FORCE?exec(trim):spaces[KEY];if(ALIAS)exp[ALIAS]=fn;$export($export.P+$export.F*FORCE,'String',exp);};var trim=exporter.trim=function(string,TYPE){string=String(defined(string));if(TYPE&1)string=string.replace(ltrim,'');if(TYPE&2)string=string.replace(rtrim,'');return string;};module.exports=exporter;}),(function(module,exports){module.exports={};}),(function(module,exports,__webpack_require__){var isObject=__webpack_require__(14);module.exports=function(it,TYPE){if(!isObject(it)||it._t!==TYPE)throw TypeError('Incompatible receiver, '+TYPE+' required!');return it;};}),(function(module,exports,__webpack_require__){(function(Buffer){function isArray(arg){if(Array.isArray){return Array.isArray(arg);}
return objectToString(arg)==='[object Array]';}
exports.isArray=isArray;function isBoolean(arg){return typeof arg==='boolean';}
exports.isBoolean=isBoolean;function isNull(arg){return arg===null;}
exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null;}
exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==='number';}
exports.isNumber=isNumber;function isString(arg){return typeof arg==='string';}
exports.isString=isString;function isSymbol(arg){return typeof arg==='symbol';}
exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0;}
exports.isUndefined=isUndefined;function isRegExp(re){return objectToString(re)==='[object RegExp]';}
exports.isRegExp=isRegExp;function isObject(arg){return typeof arg==='object'&&arg!==null;}
exports.isObject=isObject;function isDate(d){return objectToString(d)==='[object Date]';}
exports.isDate=isDate;function isError(e){return(objectToString(e)==='[object Error]'||e instanceof Error);}
exports.isError=isError;function isFunction(arg){return typeof arg==='function';}
exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==='boolean'||typeof arg==='number'||typeof arg==='string'||typeof arg==='symbol'||typeof arg==='undefined';}
exports.isPrimitive=isPrimitive;exports.isBuffer=Buffer.isBuffer;function objectToString(o){return Object.prototype.toString.call(o);}}.call(exports,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){var Buffer=__webpack_require__(4).Buffer
function Hash(blockSize,finalSize){this._block=Buffer.alloc(blockSize)
this._finalSize=finalSize
this._blockSize=blockSize
this._len=0}
Hash.prototype.update=function(data,enc){if(typeof data==='string'){enc=enc||'utf8'
data=Buffer.from(data,enc)}
var block=this._block
var blockSize=this._blockSize
var length=data.length
var accum=this._len
for(var offset=0;offset<length;){var assigned=accum%blockSize
var remainder=Math.min(length-offset,blockSize-assigned)
for(var i=0;i<remainder;i++){block[assigned+i]=data[offset+i]}
accum+=remainder
offset+=remainder
if((accum%blockSize)===0){this._update(block)}}
this._len+=length
return this}
Hash.prototype.digest=function(enc){var rem=this._len%this._blockSize
this._block[rem]=0x80
this._block.fill(0,rem+1)
if(rem>=this._finalSize){this._update(this._block)
this._block.fill(0)}
var bits=this._len*8
if(bits<=0xffffffff){this._block.writeUInt32BE(bits,this._blockSize-4)}else{var lowBits=(bits&0xffffffff)>>>0
var highBits=(bits-lowBits)/0x100000000
this._block.writeUInt32BE(highBits,this._blockSize-8)
this._block.writeUInt32BE(lowBits,this._blockSize-4)}
this._update(this._block)
var hash=this._hash()
return enc?hash.toString(enc):hash}
Hash.prototype._update=function(){throw new Error('_update must be implemented by subclass')}
module.exports=Hash}),(function(module,exports,__webpack_require__){var createHash=__webpack_require__(103)
function ripemd160(buffer){return createHash('rmd160').update(buffer).digest()}
function sha1(buffer){return createHash('sha1').update(buffer).digest()}
function sha256(buffer){return createHash('sha256').update(buffer).digest()}
function hash160(buffer){return ripemd160(sha256(buffer))}
function hash256(buffer){return sha256(sha256(buffer))}
module.exports={hash160:hash160,hash256:hash256,ripemd160:ripemd160,sha1:sha1,sha256:sha256}}),(function(module,exports,__webpack_require__){"use strict";module.exports={copy:copy,checkDataType:checkDataType,checkDataTypes:checkDataTypes,coerceToTypes:coerceToTypes,toHash:toHash,getProperty:getProperty,escapeQuotes:escapeQuotes,equal:__webpack_require__(247),ucs2length:__webpack_require__(856),varOccurences:varOccurences,varReplace:varReplace,cleanUpCode:cleanUpCode,finalCleanUpCode:finalCleanUpCode,schemaHasRules:schemaHasRules,schemaHasRulesExcept:schemaHasRulesExcept,toQuotedString:toQuotedString,getPathExpr:getPathExpr,getPath:getPath,getData:getData,unescapeFragment:unescapeFragment,unescapeJsonPointer:unescapeJsonPointer,escapeFragment:escapeFragment,escapeJsonPointer:escapeJsonPointer};function copy(o,to){to=to||{};for(var key in o)to[key]=o[key];return to;}
function checkDataType(dataType,data,negate){var EQUAL=negate?' !== ':' === ',AND=negate?' || ':' && ',OK=negate?'!':'',NOT=negate?'':'!';switch(dataType){case 'null':return data+EQUAL+'null';case 'array':return OK+'Array.isArray('+data+')';case 'object':return '('+OK+data+AND+
'typeof '+data+EQUAL+'"object"'+AND+
NOT+'Array.isArray('+data+'))';case 'integer':return '(typeof '+data+EQUAL+'"number"'+AND+
NOT+'('+data+' % 1)'+
AND+data+EQUAL+data+')';default:return 'typeof '+data+EQUAL+'"'+dataType+'"';}}
function checkDataTypes(dataTypes,data){switch(dataTypes.length){case 1:return checkDataType(dataTypes[0],data,true);default:var code='';var types=toHash(dataTypes);if(types.array&&types.object){code=types.null?'(':'(!'+data+' || ';code+='typeof '+data+' !== "object")';delete types.null;delete types.array;delete types.object;}
if(types.number)delete types.integer;for(var t in types)
code+=(code?' && ':'')+checkDataType(t,data,true);return code;}}
var COERCE_TO_TYPES=toHash(['string','number','integer','boolean','null']);function coerceToTypes(optionCoerceTypes,dataTypes){if(Array.isArray(dataTypes)){var types=[];for(var i=0;i<dataTypes.length;i++){var t=dataTypes[i];if(COERCE_TO_TYPES[t])types[types.length]=t;else if(optionCoerceTypes==='array'&&t==='array')types[types.length]=t;}
if(types.length)return types;}else if(COERCE_TO_TYPES[dataTypes]){return[dataTypes];}else if(optionCoerceTypes==='array'&&dataTypes==='array'){return['array'];}}
function toHash(arr){var hash={};for(var i=0;i<arr.length;i++)hash[arr[i]]=true;return hash;}
var IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var SINGLE_QUOTE=/'|\\/g;function getProperty(key){return typeof key=='number'?'['+key+']':IDENTIFIER.test(key)?'.'+key:"['"+escapeQuotes(key)+"']";}
function escapeQuotes(str){return str.replace(SINGLE_QUOTE,'\\$&').replace(/\n/g,'\\n').replace(/\r/g,'\\r').replace(/\f/g,'\\f').replace(/\t/g,'\\t');}
function varOccurences(str,dataVar){dataVar+='[^0-9]';var matches=str.match(new RegExp(dataVar,'g'));return matches?matches.length:0;}
function varReplace(str,dataVar,expr){dataVar+='([^0-9])';expr=expr.replace(/\$/g,'$$$$');return str.replace(new RegExp(dataVar,'g'),expr+'$1');}
var EMPTY_ELSE=/else\s*{\s*}/g,EMPTY_IF_NO_ELSE=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,EMPTY_IF_WITH_ELSE=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g;function cleanUpCode(out){return out.replace(EMPTY_ELSE,'').replace(EMPTY_IF_NO_ELSE,'').replace(EMPTY_IF_WITH_ELSE,'if (!($1))');}
var ERRORS_REGEXP=/[^v.]errors/g,REMOVE_ERRORS=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,REMOVE_ERRORS_ASYNC=/var errors = 0;|var vErrors = null;/g,RETURN_VALID='return errors === 0;',RETURN_TRUE='validate.errors = null; return true;',RETURN_ASYNC=/if \(errors === 0\) return data;\s*else throw new ValidationError\(vErrors\);/,RETURN_DATA_ASYNC='return data;',ROOTDATA_REGEXP=/[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g,REMOVE_ROOTDATA=/if \(rootData === undefined\) rootData = data;/;function finalCleanUpCode(out,async){var matches=out.match(ERRORS_REGEXP);if(matches&&matches.length==2){out=async?out.replace(REMOVE_ERRORS_ASYNC,'').replace(RETURN_ASYNC,RETURN_DATA_ASYNC):out.replace(REMOVE_ERRORS,'').replace(RETURN_VALID,RETURN_TRUE);}
matches=out.match(ROOTDATA_REGEXP);if(!matches||matches.length!==3)return out;return out.replace(REMOVE_ROOTDATA,'');}
function schemaHasRules(schema,rules){if(typeof schema=='boolean')return!schema;for(var key in schema)if(rules[key])return true;}
function schemaHasRulesExcept(schema,rules,exceptKeyword){if(typeof schema=='boolean')return!schema&&exceptKeyword!='not';for(var key in schema)if(key!=exceptKeyword&&rules[key])return true;}
function toQuotedString(str){return '\''+escapeQuotes(str)+'\'';}
function getPathExpr(currentPath,expr,jsonPointers,isNumber){var path=jsonPointers?'\'/\' + '+expr+(isNumber?'':'.replace(/~/g, \'~0\').replace(/\\//g, \'~1\')'):(isNumber?'\'[\' + '+expr+' + \']\'':'\'[\\\'\' + '+expr+' + \'\\\']\'');return joinPaths(currentPath,path);}
function getPath(currentPath,prop,jsonPointers){var path=jsonPointers?toQuotedString('/'+escapeJsonPointer(prop)):toQuotedString(getProperty(prop));return joinPaths(currentPath,path);}
var JSON_POINTER=/^\/(?:[^~]|~0|~1)*$/;var RELATIVE_JSON_POINTER=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function getData($data,lvl,paths){var up,jsonPointer,data,matches;if($data==='')return 'rootData';if($data[0]=='/'){if(!JSON_POINTER.test($data))throw new Error('Invalid JSON-pointer: '+$data);jsonPointer=$data;data='rootData';}else{matches=$data.match(RELATIVE_JSON_POINTER);if(!matches)throw new Error('Invalid JSON-pointer: '+$data);up=+matches[1];jsonPointer=matches[2];if(jsonPointer=='#'){if(up>=lvl)throw new Error('Cannot access property/index '+up+' levels up, current level is '+lvl);return paths[lvl-up];}
if(up>lvl)throw new Error('Cannot access data '+up+' levels up, current level is '+lvl);data='data'+((lvl-up)||'');if(!jsonPointer)return data;}
var expr=data;var segments=jsonPointer.split('/');for(var i=0;i<segments.length;i++){var segment=segments[i];if(segment){data+=getProperty(unescapeJsonPointer(segment));expr+=' && '+data;}}
return expr;}
function joinPaths(a,b){if(a=='""')return b;return(a+' + '+b).replace(/' \+ '/g,'');}
function unescapeFragment(str){return unescapeJsonPointer(decodeURIComponent(str));}
function escapeFragment(str){return encodeURIComponent(escapeJsonPointer(str));}
function escapeJsonPointer(str){return str.replace(/~/g,'~0').replace(/\//g,'~1');}
function unescapeJsonPointer(str){return str.replace(/~1/g,'/').replace(/~0/g,'~');}}),(function(module,__webpack_exports__,__webpack_require__){"use strict";class RevertActions{constructor(blockchain){this.blockchain=blockchain;this._actions=[];}
push(data){this._actions.push(data);}
async revertOperations(actionName='',all=''){for(let i=this._actions.length-1;i>=0;i--){let action=this._actions[i];let done=true;try{if(action.name==="revert-updateAccount"&&(actionName===''||actionName===action.name)){this.blockchain.accountantTree.updateAccount(action.address,-action.value,action.tokenId,undefined,action.showUpdate);}
else if(action.name==="revert-updateAccountNonce"&&(actionName===''||actionName===action.name)){this.blockchain.accountantTree.updateAccountNonce(action.address,-action.nonceChange,action.tokenId,undefined,action.showUpdate);}
else if(action.name==="revert-skip-validation-transactions-from-values"&&(actionName===''||actionName===action.name)){action.block.blockValidation.blockValidationType["skip-validation-transactions-from-values"]=!action.value;}
else if(action.name==="block-removed"&&(actionName===''||actionName===action.name)){await this.blockchain.includeBlockchainBlock(action.data,false,"all",true,undefined,false);}
else if(action.name==="block-added"&&(actionName===''||actionName===action.name)){await this.blockchain.blocks.spliceBlocks(action.height,true,undefined,true);if(this.blockchain.agent.light){this.blockchain.lightPrevHashPrevs.splice(action.height);this.blockchain.lightPrevTimeStamps.splice(action.height);this.blockchain.lightPrevDifficultyTargets.splice(action.height);let block=await this.blockchain.getBlock(action.height-1);this.blockchain.lightPrevHashPrevs[action.height]=block.hash;this.blockchain.lightPrevTimeStamps[action.height]=block.timeStamp;this.blockchain.lightPrevDifficultyTargets[action.height]=block.difficultyTarget;}}else if(action.name==="breakpoint"&&(actionName===''||actionName===action.name)){this._actions.splice(i,1);if(all!=='all')
break;}
else done=false;}catch(exception){console.error("#################################################")
console.error("#################################################")
console.error("revertOperations raised an error",exception)
console.error("#################################################")
console.error("#################################################")}
if(done===true){action.name='';this._actions.splice(i,1);}}}
clearUntilBreakpoint(){for(let i=this._actions.length-1;i>=0;i--){let action=this._actions[i];if(action.name==="breakpoint")
return this._actions.splice(i);}
this._actions=[];}}
__webpack_exports__["a"]=(RevertActions);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_1_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_3__extend_socket_Node_Protocol__=__webpack_require__(141);var __WEBPACK_IMPORTED_MODULE_4_node_lists_types_Node_Consensus_Type__=__webpack_require__(44);const INTERVAL_PROPAGATION=300;class NodeBlockchainPropagation{constructor(){this._blockPropagating=undefined;this._socketsAlreadyBroadcast=[];this._socketsPropagating=[];__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].emitter.on("nodes-list/disconnected",(nodeListObject)=>{for(let i=this._socketsAlreadyBroadcast.length-1;i>=0;i--)
if(this._socketsAlreadyBroadcast[i]===nodeListObject.socket)
this._socketsAlreadyBroadcast.slice(i,1);for(let i=this._socketsPropagating.length-1;i>=0;i--)
if(this._socketsPropagating[i]===nodeListObject.socket)
this._socketsPropagating.slice(i,1);});setTimeout(this.processPropagation.bind(this),INTERVAL_PROPAGATION);setInterval(this._deleteDisconnectedSockets.bind(this),20000)}
propagateBlock(block,socketsAvoidBroadcast){if(this._blockPropagating&&this._blockPropagating===block)return;if(socketsAvoidBroadcast==="all")return;if(socketsAvoidBroadcast){this._socketsAlreadyBroadcast=[];if(!Array.isArray(socketsAvoidBroadcast))socketsAvoidBroadcast=[socketsAvoidBroadcast];for(let i=0;i<__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].nodes.length;i++)
if(__WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__["a"].isPoolActivated&&([__WEBPACK_IMPORTED_MODULE_4_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_MINER_POOL,__WEBPACK_IMPORTED_MODULE_4_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_SERVER_FOR_MINER].indexOf(__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].nodes[i].socket.node.protocol.nodeConsensusType)>=0))
socketsAvoidBroadcast.push(__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].nodes[i].socket);this._socketsAlreadyBroadcast=socketsAvoidBroadcast;this._blockPropagating=block;}}
propagateLastBlockFast(suspendOtherBlocks=true){if(suspendOtherBlocks){this._blockPropagating=undefined;this._socketsPropagating=[];this._socketsAlreadyBroadcast=[];}
for(let i=0;i<__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].nodes.length;i++)
if(!__WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__["a"].isPoolActivated||([__WEBPACK_IMPORTED_MODULE_4_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_MINER_POOL,__WEBPACK_IMPORTED_MODULE_4_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_SERVER_FOR_MINER].indexOf(__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].nodes[i].socket.node.protocol.nodeConsensusType)<0))
__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].nodes[i].socket.node.protocol.sendLastBlock();}
processPropagation(){let block=this._blockPropagating;try{if(block&&this._socketsPropagating.length<__WEBPACK_IMPORTED_MODULE_1_consts_const_global__["a"].SETTINGS.PARAMS.CONNECTIONS.SOCKETS_TO_PROPAGATE_NEW_BLOCK_TIP){let list=[];for(let i=0;i<__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].nodes.length;i++)
if(!this._findSocket(__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].nodes[i].socket))
list.push(__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].nodes[i].socket);while(list.length>0&&this._socketsPropagating.length<__WEBPACK_IMPORTED_MODULE_1_consts_const_global__["a"].SETTINGS.PARAMS.CONNECTIONS.SOCKETS_TO_PROPAGATE_NEW_BLOCK_TIP){let index=Math.floor(Math.random()*list.length);let socket=list[index];list.splice(index,1);this._socketsPropagating.push(socket);socket.node.protocol.sendLastBlock();setTimeout(()=>{if(block===this._blockPropagating){if(socket.disconnected)
return;this._socketsAlreadyBroadcast.push(socket);}
for(let i=this._socketsPropagating.length;i>=0;i--)
if(this._socketsPropagating[i]===socket)
this._socketsPropagating.splice(i,1);},100+Math.random()*200);}}}catch(exception){}
setTimeout(this.processPropagation.bind(this),INTERVAL_PROPAGATION);}
_findSocket(socket){for(let i=0;i<this._socketsPropagating.length;i++)
if(this._socketsPropagating[i]===socket)
return true;for(let i=0;i<this._socketsAlreadyBroadcast.length;i++)
if(this._socketsAlreadyBroadcast[i]===socket)
return true;return false;}
_deleteDisconnectedSockets(){for(let i=this._socketsAlreadyBroadcast.length-1;i>=0;i--)
if(this._socketsAlreadyBroadcast[i].disconnected)
this._socketsAlreadyBroadcast.splice(i,1);for(let i=this._socketsPropagating.length-1;i>=0;i--)
if(this._socketsPropagating[i].disconnected)
this._socketsPropagating.splice(i,1);}}
__webpack_exports__["a"]=(new NodeBlockchainPropagation());}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__BanObject__=__webpack_require__(954);var __WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__=__webpack_require__(6);class BansList{constructor(){this._bans=[];__WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__["a"].emitter.on("nodes-list/disconnected",async(nodesListObject)=>{});this._intervalRemove=setInterval(this._removeEmptyBans.bind(this),10*1000);}
isBanned(sckAddress){let pos=this._findBan(sckAddress);if(pos<0)return false;return this._bans[pos].isBanned(sckAddress);}
addBan(sckAddress,banTime=10000,banReason){if(!sckAddress)return false;if(sckAddress&&sckAddress.node)sckAddress=sckAddress.node;if(sckAddress&&sckAddress.sckAddress)sckAddress=sckAddress.sckAddress;let ban=this.getBan(sckAddress);if(!ban){ban=new __WEBPACK_IMPORTED_MODULE_0__BanObject__["a"](sckAddress);this._bans.push(ban);}
ban.increaseBanTrials(banTime,banReason);return ban;}
_findBan(sckAddress){for(let i=0;i<this._bans.length;i++)
if(this._bans[i].sckAddress.matchAddress(sckAddress,{"uuid":true}))
return i;return-1;}
getBan(sckAddress){let pos=this._findBan(sckAddress);if(pos>=0)return this._bans[pos];}
deleteBan(sckAddress){let position=this._findBan(sckAddress);if(position>=0){this._bans[position].upLiftBan();this._bans.splice(position,1)}}
_removeEmptyBans(){for(let i=this._bans.length-1;i>=0;i--)
if(!this._bans[i].sckAddress||!this._bans[i].isBanned())
this._bans.splice(i,1)}
listBans(){if(this._bans.length>0)
console.info("BANNNNNNNNNNNNNNS");for(let i=0;i<this._bans.length;i++){let timeLeft=(this._bans[i].banTimestamp+this._bans[i].banTime)-new Date().getTime();if(timeLeft>0)
console.warn(this._bans[i].sckAddress.toString(),"banTime",this._bans[i].banTime,"timeLeft",timeLeft,"messages",this._bans[i].banReasons);}}}
__webpack_exports__["a"]=(new BansList());}),(function(module,exports,__webpack_require__){(function(global){var keys=__webpack_require__(1003);var hasBinary=__webpack_require__(422);var sliceBuffer=__webpack_require__(1005);var after=__webpack_require__(1006);var utf8=__webpack_require__(1007);var base64encoder;if(global&&global.ArrayBuffer){base64encoder=__webpack_require__(1008);}
var isAndroid=typeof navigator!=='undefined'&&/Android/i.test(navigator.userAgent);var isPhantomJS=typeof navigator!=='undefined'&&/PhantomJS/i.test(navigator.userAgent);var dontSendBlobs=isAndroid||isPhantomJS;exports.protocol=3;var packets=exports.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6};var packetslist=keys(packets);var err={type:'error',data:'parser error'};var Blob=__webpack_require__(1009);exports.encodePacket=function(packet,supportsBinary,utf8encode,callback){if('function'==typeof supportsBinary){callback=supportsBinary;supportsBinary=false;}
if('function'==typeof utf8encode){callback=utf8encode;utf8encode=null;}
var data=(packet.data===undefined)?undefined:packet.data.buffer||packet.data;if(global.ArrayBuffer&&data instanceof ArrayBuffer){return encodeArrayBuffer(packet,supportsBinary,callback);}else if(Blob&&data instanceof global.Blob){return encodeBlob(packet,supportsBinary,callback);}
if(data&&data.base64){return encodeBase64Object(packet,callback);}
var encoded=packets[packet.type];if(undefined!==packet.data){encoded+=utf8encode?utf8.encode(String(packet.data)):String(packet.data);}
return callback(''+encoded);};function encodeBase64Object(packet,callback){var message='b'+exports.packets[packet.type]+packet.data.data;return callback(message);}
function encodeArrayBuffer(packet,supportsBinary,callback){if(!supportsBinary){return exports.encodeBase64Packet(packet,callback);}
var data=packet.data;var contentArray=new Uint8Array(data);var resultBuffer=new Uint8Array(1+data.byteLength);resultBuffer[0]=packets[packet.type];for(var i=0;i<contentArray.length;i++){resultBuffer[i+1]=contentArray[i];}
return callback(resultBuffer.buffer);}
function encodeBlobAsArrayBuffer(packet,supportsBinary,callback){if(!supportsBinary){return exports.encodeBase64Packet(packet,callback);}
var fr=new FileReader();fr.onload=function(){packet.data=fr.result;exports.encodePacket(packet,supportsBinary,true,callback);};return fr.readAsArrayBuffer(packet.data);}
function encodeBlob(packet,supportsBinary,callback){if(!supportsBinary){return exports.encodeBase64Packet(packet,callback);}
if(dontSendBlobs){return encodeBlobAsArrayBuffer(packet,supportsBinary,callback);}
var length=new Uint8Array(1);length[0]=packets[packet.type];var blob=new Blob([length.buffer,packet.data]);return callback(blob);}
exports.encodeBase64Packet=function(packet,callback){var message='b'+exports.packets[packet.type];if(Blob&&packet.data instanceof global.Blob){var fr=new FileReader();fr.onload=function(){var b64=fr.result.split(',')[1];callback(message+b64);};return fr.readAsDataURL(packet.data);}
var b64data;try{b64data=String.fromCharCode.apply(null,new Uint8Array(packet.data));}catch(e){var typed=new Uint8Array(packet.data);var basic=new Array(typed.length);for(var i=0;i<typed.length;i++){basic[i]=typed[i];}
b64data=String.fromCharCode.apply(null,basic);}
message+=global.btoa(b64data);return callback(message);};exports.decodePacket=function(data,binaryType,utf8decode){if(data===undefined){return err;}
if(typeof data=='string'){if(data.charAt(0)=='b'){return exports.decodeBase64Packet(data.substr(1),binaryType);}
if(utf8decode){data=tryDecode(data);if(data===false){return err;}}
var type=data.charAt(0);if(Number(type)!=type||!packetslist[type]){return err;}
if(data.length>1){return{type:packetslist[type],data:data.substring(1)};}else{return{type:packetslist[type]};}}
var asArray=new Uint8Array(data);var type=asArray[0];var rest=sliceBuffer(data,1);if(Blob&&binaryType==='blob'){rest=new Blob([rest]);}
return{type:packetslist[type],data:rest};};function tryDecode(data){try{data=utf8.decode(data);}catch(e){return false;}
return data;}
exports.decodeBase64Packet=function(msg,binaryType){var type=packetslist[msg.charAt(0)];if(!base64encoder){return{type:type,data:{base64:true,data:msg.substr(1)}};}
var data=base64encoder.decode(msg.substr(1));if(binaryType==='blob'&&Blob){data=new Blob([data]);}
return{type:type,data:data};};exports.encodePayload=function(packets,supportsBinary,callback){if(typeof supportsBinary=='function'){callback=supportsBinary;supportsBinary=null;}
var isBinary=hasBinary(packets);if(supportsBinary&&isBinary){if(Blob&&!dontSendBlobs){return exports.encodePayloadAsBlob(packets,callback);}
return exports.encodePayloadAsArrayBuffer(packets,callback);}
if(!packets.length){return callback('0:');}
function setLengthHeader(message){return message.length+':'+message;}
function encodeOne(packet,doneCallback){exports.encodePacket(packet,!isBinary?false:supportsBinary,true,function(message){doneCallback(null,setLengthHeader(message));});}
map(packets,encodeOne,function(err,results){return callback(results.join(''));});};function map(ary,each,done){var result=new Array(ary.length);var next=after(ary.length,done);var eachWithIndex=function(i,el,cb){each(el,function(error,msg){result[i]=msg;cb(error,result);});};for(var i=0;i<ary.length;i++){eachWithIndex(i,ary[i],next);}}
exports.decodePayload=function(data,binaryType,callback){if(typeof data!='string'){return exports.decodePayloadAsBinary(data,binaryType,callback);}
if(typeof binaryType==='function'){callback=binaryType;binaryType=null;}
var packet;if(data==''){return callback(err,0,1);}
var length='',n,msg;for(var i=0,l=data.length;i<l;i++){var chr=data.charAt(i);if(':'!=chr){length+=chr;}else{if(''==length||(length!=(n=Number(length)))){return callback(err,0,1);}
msg=data.substr(i+1,n);if(length!=msg.length){return callback(err,0,1);}
if(msg.length){packet=exports.decodePacket(msg,binaryType,true);if(err.type==packet.type&&err.data==packet.data){return callback(err,0,1);}
var ret=callback(packet,i+n,l);if(false===ret)return;}
i+=n;length='';}}
if(length!=''){return callback(err,0,1);}};exports.encodePayloadAsArrayBuffer=function(packets,callback){if(!packets.length){return callback(new ArrayBuffer(0));}
function encodeOne(packet,doneCallback){exports.encodePacket(packet,true,true,function(data){return doneCallback(null,data);});}
map(packets,encodeOne,function(err,encodedPackets){var totalLength=encodedPackets.reduce(function(acc,p){var len;if(typeof p==='string'){len=p.length;}else{len=p.byteLength;}
return acc+len.toString().length+len+2;},0);var resultArray=new Uint8Array(totalLength);var bufferIndex=0;encodedPackets.forEach(function(p){var isString=typeof p==='string';var ab=p;if(isString){var view=new Uint8Array(p.length);for(var i=0;i<p.length;i++){view[i]=p.charCodeAt(i);}
ab=view.buffer;}
if(isString){resultArray[bufferIndex++]=0;}else{resultArray[bufferIndex++]=1;}
var lenStr=ab.byteLength.toString();for(var i=0;i<lenStr.length;i++){resultArray[bufferIndex++]=parseInt(lenStr[i]);}
resultArray[bufferIndex++]=255;var view=new Uint8Array(ab);for(var i=0;i<view.length;i++){resultArray[bufferIndex++]=view[i];}});return callback(resultArray.buffer);});};exports.encodePayloadAsBlob=function(packets,callback){function encodeOne(packet,doneCallback){exports.encodePacket(packet,true,true,function(encoded){var binaryIdentifier=new Uint8Array(1);binaryIdentifier[0]=1;if(typeof encoded==='string'){var view=new Uint8Array(encoded.length);for(var i=0;i<encoded.length;i++){view[i]=encoded.charCodeAt(i);}
encoded=view.buffer;binaryIdentifier[0]=0;}
var len=(encoded instanceof ArrayBuffer)?encoded.byteLength:encoded.size;var lenStr=len.toString();var lengthAry=new Uint8Array(lenStr.length+1);for(var i=0;i<lenStr.length;i++){lengthAry[i]=parseInt(lenStr[i]);}
lengthAry[lenStr.length]=255;if(Blob){var blob=new Blob([binaryIdentifier.buffer,lengthAry.buffer,encoded]);doneCallback(null,blob);}});}
map(packets,encodeOne,function(err,results){return callback(new Blob(results));});};exports.decodePayloadAsBinary=function(data,binaryType,callback){if(typeof binaryType==='function'){callback=binaryType;binaryType=null;}
var bufferTail=data;var buffers=[];var numberTooLong=false;while(bufferTail.byteLength>0){var tailArray=new Uint8Array(bufferTail);var isString=tailArray[0]===0;var msgLength='';for(var i=1;;i++){if(tailArray[i]==255)break;if(msgLength.length>310){numberTooLong=true;break;}
msgLength+=tailArray[i];}
if(numberTooLong)return callback(err,0,1);bufferTail=sliceBuffer(bufferTail,2+msgLength.length);msgLength=parseInt(msgLength);var msg=sliceBuffer(bufferTail,0,msgLength);if(isString){try{msg=String.fromCharCode.apply(null,new Uint8Array(msg));}catch(e){var typed=new Uint8Array(msg);msg='';for(var i=0;i<typed.length;i++){msg+=String.fromCharCode(typed[i]);}}}
buffers.push(msg);bufferTail=sliceBuffer(bufferTail,msgLength);}
var total=buffers.length;buffers.forEach(function(buffer,i){callback(exports.decodePacket(buffer,binaryType,true),i,total);});};}.call(exports,__webpack_require__(10)))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_utils_helpers_Utils__=__webpack_require__(40);var __WEBPACK_IMPORTED_MODULE_1_node_lists_waitlist_Nodes_Waitlist__=__webpack_require__(39);var __WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Type__=__webpack_require__(35);var __WEBPACK_IMPORTED_MODULE_4_node_lists_types_Node_Consensus_Type__=__webpack_require__(44);var __WEBPACK_IMPORTED_MODULE_5_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_6__blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__=__webpack_require__(17);var __WEBPACK_IMPORTED_MODULE_7__sockets_protocol_extend_socket_Socket_Address__=__webpack_require__(76);const sanitizer=__webpack_require__(434);class PoolsUtils{constructor(){this.servers=[];}
validatePoolName(poolName){if(typeof poolName!=="string")throw{message:"pool name is not a string"};if(poolName!==''&&!/^[_\-A-Za-z\d\s]+$/.test(poolName))throw{message:"pool name is invalid"};}
validatePoolFee(poolFee){if(typeof poolFee!=="number")throw{message:"pool fee is invalid"};if(poolFee<0&&poolFee>1)throw{message:"pool fee is invalid"};}
validatePoolWebsite(poolWebsite){if(typeof poolWebsite!=="string")throw{message:"pool website is not a string"};if(poolWebsite!==''&&!__WEBPACK_IMPORTED_MODULE_0_common_utils_helpers_Utils__["a"].validateUrl(poolWebsite))throw{message:"pool website is invalid"};}
validatePoolPublicKey(poolPublicKey){if(!Buffer.isBuffer(poolPublicKey)||poolPublicKey.length!==__WEBPACK_IMPORTED_MODULE_5_consts_const_global__["a"].ADDRESSES.PUBLIC_KEY.LENGTH)throw{message:"pool publicKey is not valid"};}
validatePoolServers(poolServers){poolServers=this.processServersList(poolServers);if(!Array.isArray(poolServers))throw{message:"pool servers is not an array"};if(poolServers.length<=0)throw{message:"pool servers is empty"};}
validatePoolActivated(poolActivated=false){if(typeof poolActivated!=="boolean")throw{message:"poolActivated is not a boolean"};}
validatePoolsDetails(poolName,poolFee,poolWebsite,poolAddress,poolPublicKey,poolServers,poolActivated=false,poolReferralFee=0){this.validatePoolName(poolName);this.validatePoolFee(poolFee);this.validatePoolWebsite(poolWebsite);this.validatePoolPublicKey(poolPublicKey);this.validatePoolServers(poolServers);this.validatePoolActivated(poolActivated);this.validatePoolFee(poolReferralFee);if(poolAddress)
if(__WEBPACK_IMPORTED_MODULE_6__blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].getUnencodedAddressFromWIF(poolAddress)===null)throw{message:"poolAddress is invalid"};return true;}
async insertServersListWaitlist(serversListArray,nodeConsensusType=__WEBPACK_IMPORTED_MODULE_4_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_SERVER_FOR_POOL){if(!Array.isArray(serversListArray)||serversListArray.length===0)return false;__WEBPACK_IMPORTED_MODULE_1_node_lists_waitlist_Nodes_Waitlist__["a"].deleteWaitlistByConsensusNode(__WEBPACK_IMPORTED_MODULE_4_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_SERVER);__WEBPACK_IMPORTED_MODULE_1_node_lists_waitlist_Nodes_Waitlist__["a"].deleteWaitlistByConsensusNode(nodeConsensusType);for(let i=0;i<__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].nodes.length;i++)
if(__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].nodes[i].socket.node.protocol.nodeConsensusType===__WEBPACK_IMPORTED_MODULE_4_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_SERVER||__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].nodes[i].socket.node.protocol.nodeConsensusType===nodeConsensusType)
__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].nodes[i].socket.node.protocol._checked=false;for(let i=0;i<serversListArray.length;i++){let server=serversListArray[i];let answer=await __WEBPACK_IMPORTED_MODULE_1_node_lists_waitlist_Nodes_Waitlist__["a"].addNewNodeToWaitlist(server,undefined,__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Type__["a"].NODE_TERMINAL,__WEBPACK_IMPORTED_MODULE_4_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_SERVER,undefined,undefined,undefined,undefined,true);let waitlistObject=answer.waitlist;if(waitlistObject){if(waitlistObject.nodeConsensusType!==__WEBPACK_IMPORTED_MODULE_4_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_SERVER)
waitlistObject.nodeConsensusType=__WEBPACK_IMPORTED_MODULE_4_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_SERVER;for(let j=0;j<__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].nodes.length;j++)
if(__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].nodes[j].socket.node.sckAddress.matchAddress(waitlistObject.sckAddresses[0])){if(__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].nodes[j].socket.node.protocol.nodeConsensusType===__WEBPACK_IMPORTED_MODULE_4_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_PEER)
__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].nodes[j].socket.node.protocol.nodeConsensusType=__WEBPACK_IMPORTED_MODULE_4_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_SERVER;__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].nodes[j].socket.node.protocol._checked=true;}}}
for(let j=__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].nodes.length-1;j>=0;j--){if(__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].nodes[j].socket.node.protocol.nodeConsensusType===__WEBPACK_IMPORTED_MODULE_4_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_SERVER||__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].nodes[j].socket.node.protocol.nodeConsensusType===nodeConsensusType&&!__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].nodes[j].socket.node.protocol._checked)
__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].nodes[j].socket.disconnect();else
delete __WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].nodes[j].socket.node.protocol._checked;}}
processServersList(serversList){if(typeof serversList==="string")serversList=serversList.split(/[\s,]+/);if(!Array.isArray(serversList))throw{message:"serversList is not array"};for(let i=serversList.length-1;i>=0;i--){serversList[i]=serversList[i].replace(/\s+/,"");if(serversList[i]===''){if(serversList.length===1)
serversList=[];else
serversList.splice(i,1);}}
for(let i=0;i<serversList.length;i++)
if(!__WEBPACK_IMPORTED_MODULE_0_common_utils_helpers_Utils__["a"].validateUrl(serversList[i]))throw{message:"serversList element is not a valid url",url:serversList[i]}
return serversList;}
convertServersList(servers){let string='';for(let key in servers){string+=servers[key]+"\n";}
return string;}
substr(url){return sanitizer.sanitize(url.substr(0,url.indexOf("/")!==-1?url.indexOf("/"):undefined));}
substrNext(url){return url.indexOf("/")>=0?url.substr(url.indexOf("/")+1):'';}
extractPoolURL(url){if(!url)return null;url=sanitizer.sanitize(url);let object=__WEBPACK_IMPORTED_MODULE_0_common_utils_helpers_Utils__["a"].getLocation(url);if(object)
url=object.pathname;if(url.indexOf("/pool/")===0)url=url.replace("/pool/","");if(url.indexOf("pool/")===0)url=url.replace("pool/","");let poolURL=url;let version=this.substr(url);url=this.substrNext(url);if(version!=="")version=parseInt(version);let poolName=this.substr(url);poolName=decodeURIComponent(poolName);url=this.substrNext(url);let poolFee=parseFloat(this.substr(url));url=this.substrNext(url);let poolAddress;if(version===0){poolAddress=this.substr(url);poolAddress=poolAddress.replace(/%23/g,"#");url=this.substrNext(url);}
let poolPublicKey=this.substr(url);url=this.substrNext(url);poolPublicKey=new Buffer(poolPublicKey,"hex");let poolWebsite='';if(version===0){poolWebsite=this.substr(url).replace(/\$/g,'/');url=url.substr(url.indexOf("/")+1);}
let poolServers=this.substr(url).replace(/\$/g,'/').split(";");url=this.substrNext(url);let poolReferral='';let ref=this.substr(url);if(ref==="r"){url=this.substrNext(url);poolReferral=this.substr(url);poolReferral=poolReferral.replace(/%23/g,"#");url=this.substrNext(url);}
if(!this.validatePoolsDetails(poolName,poolFee,poolWebsite,poolAddress,poolPublicKey,poolServers))throw{message:"validate pools "};return{poolVersion:version,poolName:poolName,poolFee:poolFee,poolWebsite:poolWebsite,poolServers:poolServers,poolAddress:poolAddress,poolPublicKey:poolPublicKey,poolURL:poolURL,poolReferral:poolReferral,};}
getPoolServersStatus(poolServers){try{if(typeof poolServers==="string")poolServers=this.processServersList(poolServers);}catch(exception){return{}}
let result={};for(let i=0;i<poolServers.length;i++){let address=__WEBPACK_IMPORTED_MODULE_7__sockets_protocol_extend_socket_Socket_Address__["a"].createSocketAddress(poolServers[i]);let connected=false,nodeConsensusType;for(let j=0;j<__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].nodes.length;j++)
if(address.matchAddress(__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].nodes[j].socket.node.sckAddress)||address.matchAddress(__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].nodes[j].socket.node.protocol.nodeDomain)){connected=true;nodeConsensusType=__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].nodes[j].socket.node.protocol.nodeConsensusType;break;}
result[i]={name:poolServers[i],connected:connected,established:[__WEBPACK_IMPORTED_MODULE_4_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_POOL,__WEBPACK_IMPORTED_MODULE_4_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_MINER_POOL].indexOf(nodeConsensusType)>=0,nodeConsensusType:nodeConsensusType,};}
return result;}}
__webpack_exports__["a"]=(new PoolsUtils());}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){var cof=__webpack_require__(59);module.exports=Object('z').propertyIsEnumerable(0)?Object:function(it){return cof(it)=='String'?it.split(''):Object(it);};}),(function(module,exports){exports.f={}.propertyIsEnumerable;}),(function(module,exports,__webpack_require__){"use strict";var anObject=__webpack_require__(8);module.exports=function(){var that=anObject(this);var result='';if(that.global)result+='g';if(that.ignoreCase)result+='i';if(that.multiline)result+='m';if(that.unicode)result+='u';if(that.sticky)result+='y';return result;};}),(function(module,exports,__webpack_require__){var anObject=__webpack_require__(8);var aFunction=__webpack_require__(42);var SPECIES=__webpack_require__(19)('species');module.exports=function(O,D){var C=anObject(O).constructor;var S;return C===undefined||(S=anObject(C)[SPECIES])==undefined?D:aFunction(S);};}),(function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(312);exports.Stream=exports;exports.Readable=exports;exports.Writable=__webpack_require__(209);exports.Duplex=__webpack_require__(105);exports.Transform=__webpack_require__(315);exports.PassThrough=__webpack_require__(654);}),(function(module,exports,__webpack_require__){(function(Buffer){module.exports=function xor(a,b){var length=Math.min(a.length,b.length)
var buffer=new Buffer(length)
for(var i=0;i<length;++i){buffer[i]=a[i]^b[i]}
return buffer}}.call(exports,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(68);var assert=__webpack_require__(55);function BlockHash(){this.pending=null;this.pendingTotal=0;this.blockSize=this.constructor.blockSize;this.outSize=this.constructor.outSize;this.hmacStrength=this.constructor.hmacStrength;this.padLength=this.constructor.padLength/8;this.endian='big';this._delta8=this.blockSize/8;this._delta32=this.blockSize/32;}
exports.BlockHash=BlockHash;BlockHash.prototype.update=function update(msg,enc){msg=utils.toArray(msg,enc);if(!this.pending)
this.pending=msg;else
this.pending=this.pending.concat(msg);this.pendingTotal+=msg.length;if(this.pending.length>=this._delta8){msg=this.pending;var r=msg.length%this._delta8;this.pending=msg.slice(msg.length-r,msg.length);if(this.pending.length===0)
this.pending=null;msg=utils.join32(msg,0,msg.length-r,this.endian);for(var i=0;i<msg.length;i+=this._delta32)
this._update(msg,i,i+this._delta32);}
return this;};BlockHash.prototype.digest=function digest(enc){this.update(this._pad());assert(this.pending===null);return this._digest(enc);};BlockHash.prototype._pad=function pad(){var len=this.pendingTotal;var bytes=this._delta8;var k=bytes-((len+this.padLength)%bytes);var res=new Array(k+this.padLength);res[0]=0x80;for(var i=1;i<k;i++)
res[i]=0;len<<=3;if(this.endian==='big'){for(var t=8;t<this.padLength;t++)
res[i++]=0;res[i++]=0;res[i++]=0;res[i++]=0;res[i++]=0;res[i++]=(len>>>24)&0xff;res[i++]=(len>>>16)&0xff;res[i++]=(len>>>8)&0xff;res[i++]=len&0xff;}else{res[i++]=len&0xff;res[i++]=(len>>>8)&0xff;res[i++]=(len>>>16)&0xff;res[i++]=(len>>>24)&0xff;res[i++]=0;res[i++]=0;res[i++]=0;res[i++]=0;for(t=8;t<this.padLength;t++)
res[i++]=0;}
return res;};}),(function(module,exports,__webpack_require__){var asn1=exports;asn1.bignum=__webpack_require__(29);asn1.define=__webpack_require__(712).define;asn1.base=__webpack_require__(131);asn1.constants=__webpack_require__(337);asn1.decoders=__webpack_require__(717);asn1.encoders=__webpack_require__(719);}),(function(module,exports,__webpack_require__){var base=exports;base.Reporter=__webpack_require__(714).Reporter;base.DecoderBuffer=__webpack_require__(336).DecoderBuffer;base.EncoderBuffer=__webpack_require__(336).EncoderBuffer;base.Node=__webpack_require__(715);}),(function(module,exports){module.exports={bitcoin:{messagePrefix:'\x18Bitcoin Signed Message:\n',bech32:'bc',bip32:{public:0x0488b21e,private:0x0488ade4},pubKeyHash:0x00,scriptHash:0x05,wif:0x80},testnet:{messagePrefix:'\x18Bitcoin Signed Message:\n',bech32:'tb',bip32:{public:0x043587cf,private:0x04358394},pubKeyHash:0x6f,scriptHash:0xc4,wif:0xef},litecoin:{messagePrefix:'\x19Litecoin Signed Message:\n',bip32:{public:0x019da462,private:0x019d9cfe},pubKeyHash:0x30,scriptHash:0x32,wif:0xb0}}}),(function(module,exports,__webpack_require__){(function(global){var ClientRequest=__webpack_require__(807)
var response=__webpack_require__(372)
var extend=__webpack_require__(809)
var statusCodes=__webpack_require__(810)
var url=__webpack_require__(77)
var http=exports
http.request=function(opts,cb){if(typeof opts==='string')
opts=url.parse(opts)
else
opts=extend(opts)
var defaultProtocol=global.location.protocol.search(/^https?:$/)===-1?'http:':''
var protocol=opts.protocol||defaultProtocol
var host=opts.hostname||opts.host
var port=opts.port
var path=opts.path||'/'
if(host&&host.indexOf(':')!==-1)
host='['+host+']'
opts.url=(host?(protocol+'//'+host):'')+(port?':'+port:'')+path
opts.method=(opts.method||'GET').toUpperCase()
opts.headers=opts.headers||{}
var req=new ClientRequest(opts)
if(cb)
req.on('response',cb)
return req}
http.get=function get(opts,cb){var req=http.request(opts,cb)
req.end()
return req}
http.ClientRequest=ClientRequest
http.IncomingMessage=response.IncomingMessage
http.Agent=function(){}
http.Agent.defaultMaxSockets=4
http.globalAgent=new http.Agent()
http.STATUS_CODES=statusCodes
http.METHODS=['CHECKOUT','CONNECT','COPY','DELETE','GET','HEAD','LOCK','M-SEARCH','MERGE','MKACTIVITY','MKCOL','MOVE','NOTIFY','OPTIONS','PATCH','POST','PROPFIND','PROPPATCH','PURGE','PUT','REPORT','SEARCH','SUBSCRIBE','TRACE','UNLOCK','UNSUBSCRIBE']}.call(exports,__webpack_require__(10)))}),(function(module,exports,__webpack_require__){module.exports=Fingerprint;var assert=__webpack_require__(15);var Buffer=__webpack_require__(21).Buffer;var algs=__webpack_require__(41);var crypto=__webpack_require__(24);var errs=__webpack_require__(72);var Key=__webpack_require__(33);var PrivateKey=__webpack_require__(38);var Certificate=__webpack_require__(138);var utils=__webpack_require__(34);var FingerprintFormatError=errs.FingerprintFormatError;var InvalidAlgorithmError=errs.InvalidAlgorithmError;function Fingerprint(opts){assert.object(opts,'options');assert.string(opts.type,'options.type');assert.buffer(opts.hash,'options.hash');assert.string(opts.algorithm,'options.algorithm');this.algorithm=opts.algorithm.toLowerCase();if(algs.hashAlgs[this.algorithm]!==true)
throw(new InvalidAlgorithmError(this.algorithm));this.hash=opts.hash;this.type=opts.type;this.hashType=opts.hashType;}
Fingerprint.prototype.toString=function(format){if(format===undefined){if(this.algorithm==='md5'||this.hashType==='spki')
format='hex';else
format='base64';}
assert.string(format);switch(format){case 'hex':if(this.hashType==='spki')
return(this.hash.toString('hex'));return(addColons(this.hash.toString('hex')));case 'base64':if(this.hashType==='spki')
return(this.hash.toString('base64'));return(sshBase64Format(this.algorithm,this.hash.toString('base64')));default:throw(new FingerprintFormatError(undefined,format));}};Fingerprint.prototype.matches=function(other){assert.object(other,'key or certificate');if(this.type==='key'&&this.hashType!=='ssh'){utils.assertCompatible(other,Key,[1,7],'key with spki');if(PrivateKey.isPrivateKey(other)){utils.assertCompatible(other,PrivateKey,[1,6],'privatekey with spki support');}}else if(this.type==='key'){utils.assertCompatible(other,Key,[1,0],'key');}else{utils.assertCompatible(other,Certificate,[1,0],'certificate');}
var theirHash=other.hash(this.algorithm,this.hashType);var theirHash2=crypto.createHash(this.algorithm).update(theirHash).digest('base64');if(this.hash2===undefined)
this.hash2=crypto.createHash(this.algorithm).update(this.hash).digest('base64');return(this.hash2===theirHash2);};var base64RE=/^[A-Za-z0-9+\/=]+$/;var hexRE=/^[a-fA-F0-9]+$/;Fingerprint.parse=function(fp,options){assert.string(fp,'fingerprint');var alg,hash,enAlgs;if(Array.isArray(options)){enAlgs=options;options={};}
assert.optionalObject(options,'options');if(options===undefined)
options={};if(options.enAlgs!==undefined)
enAlgs=options.enAlgs;if(options.algorithms!==undefined)
enAlgs=options.algorithms;assert.optionalArrayOfString(enAlgs,'algorithms');var hashType='ssh';if(options.hashType!==undefined)
hashType=options.hashType;assert.string(hashType,'options.hashType');var parts=fp.split(':');if(parts.length==2){alg=parts[0].toLowerCase();if(!base64RE.test(parts[1]))
throw(new FingerprintFormatError(fp));try{hash=Buffer.from(parts[1],'base64');}catch(e){throw(new FingerprintFormatError(fp));}}else if(parts.length>2){alg='md5';if(parts[0].toLowerCase()==='md5')
parts=parts.slice(1);parts=parts.map(function(p){while(p.length<2)
p='0'+p;if(p.length>2)
throw(new FingerprintFormatError(fp));return(p);});parts=parts.join('');if(!hexRE.test(parts)||parts.length%2!==0)
throw(new FingerprintFormatError(fp));try{hash=Buffer.from(parts,'hex');}catch(e){throw(new FingerprintFormatError(fp));}}else{if(hexRE.test(fp)){hash=Buffer.from(fp,'hex');}else if(base64RE.test(fp)){hash=Buffer.from(fp,'base64');}else{throw(new FingerprintFormatError(fp));}
switch(hash.length){case 32:alg='sha256';break;case 16:alg='md5';break;case 20:alg='sha1';break;case 64:alg='sha512';break;default:throw(new FingerprintFormatError(fp));}
if(options.hashType===undefined)
hashType='spki';}
if(alg===undefined)
throw(new FingerprintFormatError(fp));if(algs.hashAlgs[alg]===undefined)
throw(new InvalidAlgorithmError(alg));if(enAlgs!==undefined){enAlgs=enAlgs.map(function(a){return a.toLowerCase();});if(enAlgs.indexOf(alg)===-1)
throw(new InvalidAlgorithmError(alg));}
return(new Fingerprint({algorithm:alg,hash:hash,type:options.type||'key',hashType:hashType}));};function addColons(s){return(s.replace(/(.{2})(?=.)/g,'$1:'));}
function base64Strip(s){return(s.replace(/=*$/,''));}
function sshBase64Format(alg,h){return(alg.toUpperCase()+':'+base64Strip(h));}
Fingerprint.isFingerprint=function(obj,ver){return(utils.isCompatible(obj,Fingerprint,ver));};Fingerprint.prototype._sshpkApiVersion=[1,2];Fingerprint._oldVersionDetect=function(obj){assert.func(obj.toString);assert.func(obj.matches);return([1,0]);};}),(function(module,exports,__webpack_require__){(function(){var dbits;var canary=0xdeadbeefcafe;var j_lm=((canary&0xffffff)==0xefcafe);function BigInteger(a,b,c){if(a!=null)
if("number"==typeof a)this.fromNumber(a,b,c);else if(b==null&&"string"!=typeof a)this.fromString(a,256);else this.fromString(a,b);}
function nbi(){return new BigInteger(null);}
function am1(i,x,w,j,c,n){while(--n>=0){var v=x*this[i++]+w[j]+c;c=Math.floor(v/0x4000000);w[j++]=v&0x3ffffff;}
return c;}
function am2(i,x,w,j,c,n){var xl=x&0x7fff,xh=x>>15;while(--n>=0){var l=this[i]&0x7fff;var h=this[i++]>>15;var m=xh*l+h*xl;l=xl*l+((m&0x7fff)<<15)+w[j]+(c&0x3fffffff);c=(l>>>30)+(m>>>15)+xh*h+(c>>>30);w[j++]=l&0x3fffffff;}
return c;}
function am3(i,x,w,j,c,n){var xl=x&0x3fff,xh=x>>14;while(--n>=0){var l=this[i]&0x3fff;var h=this[i++]>>14;var m=xh*l+h*xl;l=xl*l+((m&0x3fff)<<14)+w[j]+c;c=(l>>28)+(m>>14)+xh*h;w[j++]=l&0xfffffff;}
return c;}
var inBrowser=typeof navigator!=="undefined";if(inBrowser&&j_lm&&(navigator.appName=="Microsoft Internet Explorer")){BigInteger.prototype.am=am2;dbits=30;}
else if(inBrowser&&j_lm&&(navigator.appName!="Netscape")){BigInteger.prototype.am=am1;dbits=26;}
else{BigInteger.prototype.am=am3;dbits=28;}
BigInteger.prototype.DB=dbits;BigInteger.prototype.DM=((1<<dbits)-1);BigInteger.prototype.DV=(1<<dbits);var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP);BigInteger.prototype.F1=BI_FP-dbits;BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz";var BI_RC=new Array();var rr,vv;rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;rr="a".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;rr="A".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(n){return BI_RM.charAt(n);}
function intAt(s,i){var c=BI_RC[s.charCodeAt(i)];return(c==null)?-1:c;}
function bnpCopyTo(r){for(var i=this.t-1;i>=0;--i)r[i]=this[i];r.t=this.t;r.s=this.s;}
function bnpFromInt(x){this.t=1;this.s=(x<0)?-1:0;if(x>0)this[0]=x;else if(x<-1)this[0]=x+this.DV;else this.t=0;}
function nbv(i){var r=nbi();r.fromInt(i);return r;}
function bnpFromString(s,b){var k;if(b==16)k=4;else if(b==8)k=3;else if(b==256)k=8;else if(b==2)k=1;else if(b==32)k=5;else if(b==4)k=2;else{this.fromRadix(s,b);return;}
this.t=0;this.s=0;var i=s.length,mi=false,sh=0;while(--i>=0){var x=(k==8)?s[i]&0xff:intAt(s,i);if(x<0){if(s.charAt(i)=="-")mi=true;continue;}
mi=false;if(sh==0)
this[this.t++]=x;else if(sh+k>this.DB){this[this.t-1]|=(x&((1<<(this.DB-sh))-1))<<sh;this[this.t++]=(x>>(this.DB-sh));}
else
this[this.t-1]|=x<<sh;sh+=k;if(sh>=this.DB)sh-=this.DB;}
if(k==8&&(s[0]&0x80)!=0){this.s=-1;if(sh>0)this[this.t-1]|=((1<<(this.DB-sh))-1)<<sh;}
this.clamp();if(mi)BigInteger.ZERO.subTo(this,this);}
function bnpClamp(){var c=this.s&this.DM;while(this.t>0&&this[this.t-1]==c)--this.t;}
function bnToString(b){if(this.s<0)return "-"+this.negate().toString(b);var k;if(b==16)k=4;else if(b==8)k=3;else if(b==2)k=1;else if(b==32)k=5;else if(b==4)k=2;else return this.toRadix(b);var km=(1<<k)-1,d,m=false,r="",i=this.t;var p=this.DB-(i*this.DB)%k;if(i-->0){if(p<this.DB&&(d=this[i]>>p)>0){m=true;r=int2char(d);}
while(i>=0){if(p<k){d=(this[i]&((1<<p)-1))<<(k-p);d|=this[--i]>>(p+=this.DB-k);}
else{d=(this[i]>>(p-=k))&km;if(p<=0){p+=this.DB;--i;}}
if(d>0)m=true;if(m)r+=int2char(d);}}
return m?r:"0";}
function bnNegate(){var r=nbi();BigInteger.ZERO.subTo(this,r);return r;}
function bnAbs(){return(this.s<0)?this.negate():this;}
function bnCompareTo(a){var r=this.s-a.s;if(r!=0)return r;var i=this.t;r=i-a.t;if(r!=0)return(this.s<0)?-r:r;while(--i>=0)if((r=this[i]-a[i])!=0)return r;return 0;}
function nbits(x){var r=1,t;if((t=x>>>16)!=0){x=t;r+=16;}
if((t=x>>8)!=0){x=t;r+=8;}
if((t=x>>4)!=0){x=t;r+=4;}
if((t=x>>2)!=0){x=t;r+=2;}
if((t=x>>1)!=0){x=t;r+=1;}
return r;}
function bnBitLength(){if(this.t<=0)return 0;return this.DB*(this.t-1)+nbits(this[this.t-1]^(this.s&this.DM));}
function bnpDLShiftTo(n,r){var i;for(i=this.t-1;i>=0;--i)r[i+n]=this[i];for(i=n-1;i>=0;--i)r[i]=0;r.t=this.t+n;r.s=this.s;}
function bnpDRShiftTo(n,r){for(var i=n;i<this.t;++i)r[i-n]=this[i];r.t=Math.max(this.t-n,0);r.s=this.s;}
function bnpLShiftTo(n,r){var bs=n%this.DB;var cbs=this.DB-bs;var bm=(1<<cbs)-1;var ds=Math.floor(n/this.DB),c=(this.s<<bs)&this.DM,i;for(i=this.t-1;i>=0;--i){r[i+ds+1]=(this[i]>>cbs)|c;c=(this[i]&bm)<<bs;}
for(i=ds-1;i>=0;--i)r[i]=0;r[ds]=c;r.t=this.t+ds+1;r.s=this.s;r.clamp();}
function bnpRShiftTo(n,r){r.s=this.s;var ds=Math.floor(n/this.DB);if(ds>=this.t){r.t=0;return;}
var bs=n%this.DB;var cbs=this.DB-bs;var bm=(1<<bs)-1;r[0]=this[ds]>>bs;for(var i=ds+1;i<this.t;++i){r[i-ds-1]|=(this[i]&bm)<<cbs;r[i-ds]=this[i]>>bs;}
if(bs>0)r[this.t-ds-1]|=(this.s&bm)<<cbs;r.t=this.t-ds;r.clamp();}
function bnpSubTo(a,r){var i=0,c=0,m=Math.min(a.t,this.t);while(i<m){c+=this[i]-a[i];r[i++]=c&this.DM;c>>=this.DB;}
if(a.t<this.t){c-=a.s;while(i<this.t){c+=this[i];r[i++]=c&this.DM;c>>=this.DB;}
c+=this.s;}
else{c+=this.s;while(i<a.t){c-=a[i];r[i++]=c&this.DM;c>>=this.DB;}
c-=a.s;}
r.s=(c<0)?-1:0;if(c<-1)r[i++]=this.DV+c;else if(c>0)r[i++]=c;r.t=i;r.clamp();}
function bnpMultiplyTo(a,r){var x=this.abs(),y=a.abs();var i=x.t;r.t=i+y.t;while(--i>=0)r[i]=0;for(i=0;i<y.t;++i)r[i+x.t]=x.am(0,y[i],r,i,0,x.t);r.s=0;r.clamp();if(this.s!=a.s)BigInteger.ZERO.subTo(r,r);}
function bnpSquareTo(r){var x=this.abs();var i=r.t=2*x.t;while(--i>=0)r[i]=0;for(i=0;i<x.t-1;++i){var c=x.am(i,x[i],r,2*i,0,1);if((r[i+x.t]+=x.am(i+1,2*x[i],r,2*i+1,c,x.t-i-1))>=x.DV){r[i+x.t]-=x.DV;r[i+x.t+1]=1;}}
if(r.t>0)r[r.t-1]+=x.am(i,x[i],r,2*i,0,1);r.s=0;r.clamp();}
function bnpDivRemTo(m,q,r){var pm=m.abs();if(pm.t<=0)return;var pt=this.abs();if(pt.t<pm.t){if(q!=null)q.fromInt(0);if(r!=null)this.copyTo(r);return;}
if(r==null)r=nbi();var y=nbi(),ts=this.s,ms=m.s;var nsh=this.DB-nbits(pm[pm.t-1]);if(nsh>0){pm.lShiftTo(nsh,y);pt.lShiftTo(nsh,r);}
else{pm.copyTo(y);pt.copyTo(r);}
var ys=y.t;var y0=y[ys-1];if(y0==0)return;var yt=y0*(1<<this.F1)+((ys>1)?y[ys-2]>>this.F2:0);var d1=this.FV/yt,d2=(1<<this.F1)/yt,e=1<<this.F2;var i=r.t,j=i-ys,t=(q==null)?nbi():q;y.dlShiftTo(j,t);if(r.compareTo(t)>=0){r[r.t++]=1;r.subTo(t,r);}
BigInteger.ONE.dlShiftTo(ys,t);t.subTo(y,y);while(y.t<ys)y[y.t++]=0;while(--j>=0){var qd=(r[--i]==y0)?this.DM:Math.floor(r[i]*d1+(r[i-1]+e)*d2);if((r[i]+=y.am(0,qd,r,j,0,ys))<qd){y.dlShiftTo(j,t);r.subTo(t,r);while(r[i]<--qd)r.subTo(t,r);}}
if(q!=null){r.drShiftTo(ys,q);if(ts!=ms)BigInteger.ZERO.subTo(q,q);}
r.t=ys;r.clamp();if(nsh>0)r.rShiftTo(nsh,r);if(ts<0)BigInteger.ZERO.subTo(r,r);}
function bnMod(a){var r=nbi();this.abs().divRemTo(a,null,r);if(this.s<0&&r.compareTo(BigInteger.ZERO)>0)a.subTo(r,r);return r;}
function Classic(m){this.m=m;}
function cConvert(x){if(x.s<0||x.compareTo(this.m)>=0)return x.mod(this.m);else return x;}
function cRevert(x){return x;}
function cReduce(x){x.divRemTo(this.m,null,x);}
function cMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r);}
function cSqrTo(x,r){x.squareTo(r);this.reduce(r);}
Classic.prototype.convert=cConvert;Classic.prototype.revert=cRevert;Classic.prototype.reduce=cReduce;Classic.prototype.mulTo=cMulTo;Classic.prototype.sqrTo=cSqrTo;function bnpInvDigit(){if(this.t<1)return 0;var x=this[0];if((x&1)==0)return 0;var y=x&3;y=(y*(2-(x&0xf)*y))&0xf;y=(y*(2-(x&0xff)*y))&0xff;y=(y*(2-(((x&0xffff)*y)&0xffff)))&0xffff;y=(y*(2-x*y%this.DV))%this.DV;return(y>0)?this.DV-y:-y;}
function Montgomery(m){this.m=m;this.mp=m.invDigit();this.mpl=this.mp&0x7fff;this.mph=this.mp>>15;this.um=(1<<(m.DB-15))-1;this.mt2=2*m.t;}
function montConvert(x){var r=nbi();x.abs().dlShiftTo(this.m.t,r);r.divRemTo(this.m,null,r);if(x.s<0&&r.compareTo(BigInteger.ZERO)>0)this.m.subTo(r,r);return r;}
function montRevert(x){var r=nbi();x.copyTo(r);this.reduce(r);return r;}
function montReduce(x){while(x.t<=this.mt2)
x[x.t++]=0;for(var i=0;i<this.m.t;++i){var j=x[i]&0x7fff;var u0=(j*this.mpl+(((j*this.mph+(x[i]>>15)*this.mpl)&this.um)<<15))&x.DM;j=i+this.m.t;x[j]+=this.m.am(0,u0,x,i,0,this.m.t);while(x[j]>=x.DV){x[j]-=x.DV;x[++j]++;}}
x.clamp();x.drShiftTo(this.m.t,x);if(x.compareTo(this.m)>=0)x.subTo(this.m,x);}
function montSqrTo(x,r){x.squareTo(r);this.reduce(r);}
function montMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r);}
Montgomery.prototype.convert=montConvert;Montgomery.prototype.revert=montRevert;Montgomery.prototype.reduce=montReduce;Montgomery.prototype.mulTo=montMulTo;Montgomery.prototype.sqrTo=montSqrTo;function bnpIsEven(){return((this.t>0)?(this[0]&1):this.s)==0;}
function bnpExp(e,z){if(e>0xffffffff||e<1)return BigInteger.ONE;var r=nbi(),r2=nbi(),g=z.convert(this),i=nbits(e)-1;g.copyTo(r);while(--i>=0){z.sqrTo(r,r2);if((e&(1<<i))>0)z.mulTo(r2,g,r);else{var t=r;r=r2;r2=t;}}
return z.revert(r);}
function bnModPowInt(e,m){var z;if(e<256||m.isEven())z=new Classic(m);else z=new Montgomery(m);return this.exp(e,z);}
BigInteger.prototype.copyTo=bnpCopyTo;BigInteger.prototype.fromInt=bnpFromInt;BigInteger.prototype.fromString=bnpFromString;BigInteger.prototype.clamp=bnpClamp;BigInteger.prototype.dlShiftTo=bnpDLShiftTo;BigInteger.prototype.drShiftTo=bnpDRShiftTo;BigInteger.prototype.lShiftTo=bnpLShiftTo;BigInteger.prototype.rShiftTo=bnpRShiftTo;BigInteger.prototype.subTo=bnpSubTo;BigInteger.prototype.multiplyTo=bnpMultiplyTo;BigInteger.prototype.squareTo=bnpSquareTo;BigInteger.prototype.divRemTo=bnpDivRemTo;BigInteger.prototype.invDigit=bnpInvDigit;BigInteger.prototype.isEven=bnpIsEven;BigInteger.prototype.exp=bnpExp;BigInteger.prototype.toString=bnToString;BigInteger.prototype.negate=bnNegate;BigInteger.prototype.abs=bnAbs;BigInteger.prototype.compareTo=bnCompareTo;BigInteger.prototype.bitLength=bnBitLength;BigInteger.prototype.mod=bnMod;BigInteger.prototype.modPowInt=bnModPowInt;BigInteger.ZERO=nbv(0);BigInteger.ONE=nbv(1);function bnClone(){var r=nbi();this.copyTo(r);return r;}
function bnIntValue(){if(this.s<0){if(this.t==1)return this[0]-this.DV;else if(this.t==0)return-1;}
else if(this.t==1)return this[0];else if(this.t==0)return 0;return((this[1]&((1<<(32-this.DB))-1))<<this.DB)|this[0];}
function bnByteValue(){return(this.t==0)?this.s:(this[0]<<24)>>24;}
function bnShortValue(){return(this.t==0)?this.s:(this[0]<<16)>>16;}
function bnpChunkSize(r){return Math.floor(Math.LN2*this.DB/Math.log(r));}
function bnSigNum(){if(this.s<0)return-1;else if(this.t<=0||(this.t==1&&this[0]<=0))return 0;else return 1;}
function bnpToRadix(b){if(b==null)b=10;if(this.signum()==0||b<2||b>36)return "0";var cs=this.chunkSize(b);var a=Math.pow(b,cs);var d=nbv(a),y=nbi(),z=nbi(),r="";this.divRemTo(d,y,z);while(y.signum()>0){r=(a+z.intValue()).toString(b).substr(1)+r;y.divRemTo(d,y,z);}
return z.intValue().toString(b)+r;}
function bnpFromRadix(s,b){this.fromInt(0);if(b==null)b=10;var cs=this.chunkSize(b);var d=Math.pow(b,cs),mi=false,j=0,w=0;for(var i=0;i<s.length;++i){var x=intAt(s,i);if(x<0){if(s.charAt(i)=="-"&&this.signum()==0)mi=true;continue;}
w=b*w+x;if(++j>=cs){this.dMultiply(d);this.dAddOffset(w,0);j=0;w=0;}}
if(j>0){this.dMultiply(Math.pow(b,j));this.dAddOffset(w,0);}
if(mi)BigInteger.ZERO.subTo(this,this);}
function bnpFromNumber(a,b,c){if("number"==typeof b){if(a<2)this.fromInt(1);else{this.fromNumber(a,c);if(!this.testBit(a-1))
this.bitwiseTo(BigInteger.ONE.shiftLeft(a-1),op_or,this);if(this.isEven())this.dAddOffset(1,0);while(!this.isProbablePrime(b)){this.dAddOffset(2,0);if(this.bitLength()>a)this.subTo(BigInteger.ONE.shiftLeft(a-1),this);}}}
else{var x=new Array(),t=a&7;x.length=(a>>3)+1;b.nextBytes(x);if(t>0)x[0]&=((1<<t)-1);else x[0]=0;this.fromString(x,256);}}
function bnToByteArray(){var i=this.t,r=new Array();r[0]=this.s;var p=this.DB-(i*this.DB)%8,d,k=0;if(i-->0){if(p<this.DB&&(d=this[i]>>p)!=(this.s&this.DM)>>p)
r[k++]=d|(this.s<<(this.DB-p));while(i>=0){if(p<8){d=(this[i]&((1<<p)-1))<<(8-p);d|=this[--i]>>(p+=this.DB-8);}
else{d=(this[i]>>(p-=8))&0xff;if(p<=0){p+=this.DB;--i;}}
if((d&0x80)!=0)d|=-256;if(k==0&&(this.s&0x80)!=(d&0x80))++k;if(k>0||d!=this.s)r[k++]=d;}}
return r;}
function bnEquals(a){return(this.compareTo(a)==0);}
function bnMin(a){return(this.compareTo(a)<0)?this:a;}
function bnMax(a){return(this.compareTo(a)>0)?this:a;}
function bnpBitwiseTo(a,op,r){var i,f,m=Math.min(a.t,this.t);for(i=0;i<m;++i)r[i]=op(this[i],a[i]);if(a.t<this.t){f=a.s&this.DM;for(i=m;i<this.t;++i)r[i]=op(this[i],f);r.t=this.t;}
else{f=this.s&this.DM;for(i=m;i<a.t;++i)r[i]=op(f,a[i]);r.t=a.t;}
r.s=op(this.s,a.s);r.clamp();}
function op_and(x,y){return x&y;}
function bnAnd(a){var r=nbi();this.bitwiseTo(a,op_and,r);return r;}
function op_or(x,y){return x|y;}
function bnOr(a){var r=nbi();this.bitwiseTo(a,op_or,r);return r;}
function op_xor(x,y){return x^y;}
function bnXor(a){var r=nbi();this.bitwiseTo(a,op_xor,r);return r;}
function op_andnot(x,y){return x&~y;}
function bnAndNot(a){var r=nbi();this.bitwiseTo(a,op_andnot,r);return r;}
function bnNot(){var r=nbi();for(var i=0;i<this.t;++i)r[i]=this.DM&~this[i];r.t=this.t;r.s=~this.s;return r;}
function bnShiftLeft(n){var r=nbi();if(n<0)this.rShiftTo(-n,r);else this.lShiftTo(n,r);return r;}
function bnShiftRight(n){var r=nbi();if(n<0)this.lShiftTo(-n,r);else this.rShiftTo(n,r);return r;}
function lbit(x){if(x==0)return-1;var r=0;if((x&0xffff)==0){x>>=16;r+=16;}
if((x&0xff)==0){x>>=8;r+=8;}
if((x&0xf)==0){x>>=4;r+=4;}
if((x&3)==0){x>>=2;r+=2;}
if((x&1)==0)++r;return r;}
function bnGetLowestSetBit(){for(var i=0;i<this.t;++i)
if(this[i]!=0)return i*this.DB+lbit(this[i]);if(this.s<0)return this.t*this.DB;return-1;}
function cbit(x){var r=0;while(x!=0){x&=x-1;++r;}
return r;}
function bnBitCount(){var r=0,x=this.s&this.DM;for(var i=0;i<this.t;++i)r+=cbit(this[i]^x);return r;}
function bnTestBit(n){var j=Math.floor(n/this.DB);if(j>=this.t)return(this.s!=0);return((this[j]&(1<<(n%this.DB)))!=0);}
function bnpChangeBit(n,op){var r=BigInteger.ONE.shiftLeft(n);this.bitwiseTo(r,op,r);return r;}
function bnSetBit(n){return this.changeBit(n,op_or);}
function bnClearBit(n){return this.changeBit(n,op_andnot);}
function bnFlipBit(n){return this.changeBit(n,op_xor);}
function bnpAddTo(a,r){var i=0,c=0,m=Math.min(a.t,this.t);while(i<m){c+=this[i]+a[i];r[i++]=c&this.DM;c>>=this.DB;}
if(a.t<this.t){c+=a.s;while(i<this.t){c+=this[i];r[i++]=c&this.DM;c>>=this.DB;}
c+=this.s;}
else{c+=this.s;while(i<a.t){c+=a[i];r[i++]=c&this.DM;c>>=this.DB;}
c+=a.s;}
r.s=(c<0)?-1:0;if(c>0)r[i++]=c;else if(c<-1)r[i++]=this.DV+c;r.t=i;r.clamp();}
function bnAdd(a){var r=nbi();this.addTo(a,r);return r;}
function bnSubtract(a){var r=nbi();this.subTo(a,r);return r;}
function bnMultiply(a){var r=nbi();this.multiplyTo(a,r);return r;}
function bnSquare(){var r=nbi();this.squareTo(r);return r;}
function bnDivide(a){var r=nbi();this.divRemTo(a,r,null);return r;}
function bnRemainder(a){var r=nbi();this.divRemTo(a,null,r);return r;}
function bnDivideAndRemainder(a){var q=nbi(),r=nbi();this.divRemTo(a,q,r);return new Array(q,r);}
function bnpDMultiply(n){this[this.t]=this.am(0,n-1,this,0,0,this.t);++this.t;this.clamp();}
function bnpDAddOffset(n,w){if(n==0)return;while(this.t<=w)this[this.t++]=0;this[w]+=n;while(this[w]>=this.DV){this[w]-=this.DV;if(++w>=this.t)this[this.t++]=0;++this[w];}}
function NullExp(){}
function nNop(x){return x;}
function nMulTo(x,y,r){x.multiplyTo(y,r);}
function nSqrTo(x,r){x.squareTo(r);}
NullExp.prototype.convert=nNop;NullExp.prototype.revert=nNop;NullExp.prototype.mulTo=nMulTo;NullExp.prototype.sqrTo=nSqrTo;function bnPow(e){return this.exp(e,new NullExp());}
function bnpMultiplyLowerTo(a,n,r){var i=Math.min(this.t+a.t,n);r.s=0;r.t=i;while(i>0)r[--i]=0;var j;for(j=r.t-this.t;i<j;++i)r[i+this.t]=this.am(0,a[i],r,i,0,this.t);for(j=Math.min(a.t,n);i<j;++i)this.am(0,a[i],r,i,0,n-i);r.clamp();}
function bnpMultiplyUpperTo(a,n,r){--n;var i=r.t=this.t+a.t-n;r.s=0;while(--i>=0)r[i]=0;for(i=Math.max(n-this.t,0);i<a.t;++i)
r[this.t+i-n]=this.am(n-i,a[i],r,0,0,this.t+i-n);r.clamp();r.drShiftTo(1,r);}
function Barrett(m){this.r2=nbi();this.q3=nbi();BigInteger.ONE.dlShiftTo(2*m.t,this.r2);this.mu=this.r2.divide(m);this.m=m;}
function barrettConvert(x){if(x.s<0||x.t>2*this.m.t)return x.mod(this.m);else if(x.compareTo(this.m)<0)return x;else{var r=nbi();x.copyTo(r);this.reduce(r);return r;}}
function barrettRevert(x){return x;}
function barrettReduce(x){x.drShiftTo(this.m.t-1,this.r2);if(x.t>this.m.t+1){x.t=this.m.t+1;x.clamp();}
this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(x.compareTo(this.r2)<0)x.dAddOffset(1,this.m.t+1);x.subTo(this.r2,x);while(x.compareTo(this.m)>=0)x.subTo(this.m,x);}
function barrettSqrTo(x,r){x.squareTo(r);this.reduce(r);}
function barrettMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r);}
Barrett.prototype.convert=barrettConvert;Barrett.prototype.revert=barrettRevert;Barrett.prototype.reduce=barrettReduce;Barrett.prototype.mulTo=barrettMulTo;Barrett.prototype.sqrTo=barrettSqrTo;function bnModPow(e,m){var i=e.bitLength(),k,r=nbv(1),z;if(i<=0)return r;else if(i<18)k=1;else if(i<48)k=3;else if(i<144)k=4;else if(i<768)k=5;else k=6;if(i<8)
z=new Classic(m);else if(m.isEven())
z=new Barrett(m);else
z=new Montgomery(m);var g=new Array(),n=3,k1=k-1,km=(1<<k)-1;g[1]=z.convert(this);if(k>1){var g2=nbi();z.sqrTo(g[1],g2);while(n<=km){g[n]=nbi();z.mulTo(g2,g[n-2],g[n]);n+=2;}}
var j=e.t-1,w,is1=true,r2=nbi(),t;i=nbits(e[j])-1;while(j>=0){if(i>=k1)w=(e[j]>>(i-k1))&km;else{w=(e[j]&((1<<(i+1))-1))<<(k1-i);if(j>0)w|=e[j-1]>>(this.DB+i-k1);}
n=k;while((w&1)==0){w>>=1;--n;}
if((i-=n)<0){i+=this.DB;--j;}
if(is1){g[w].copyTo(r);is1=false;}
else{while(n>1){z.sqrTo(r,r2);z.sqrTo(r2,r);n-=2;}
if(n>0)z.sqrTo(r,r2);else{t=r;r=r2;r2=t;}
z.mulTo(r2,g[w],r);}
while(j>=0&&(e[j]&(1<<i))==0){z.sqrTo(r,r2);t=r;r=r2;r2=t;if(--i<0){i=this.DB-1;--j;}}}
return z.revert(r);}
function bnGCD(a){var x=(this.s<0)?this.negate():this.clone();var y=(a.s<0)?a.negate():a.clone();if(x.compareTo(y)<0){var t=x;x=y;y=t;}
var i=x.getLowestSetBit(),g=y.getLowestSetBit();if(g<0)return x;if(i<g)g=i;if(g>0){x.rShiftTo(g,x);y.rShiftTo(g,y);}
while(x.signum()>0){if((i=x.getLowestSetBit())>0)x.rShiftTo(i,x);if((i=y.getLowestSetBit())>0)y.rShiftTo(i,y);if(x.compareTo(y)>=0){x.subTo(y,x);x.rShiftTo(1,x);}
else{y.subTo(x,y);y.rShiftTo(1,y);}}
if(g>0)y.lShiftTo(g,y);return y;}
function bnpModInt(n){if(n<=0)return 0;var d=this.DV%n,r=(this.s<0)?n-1:0;if(this.t>0)
if(d==0)r=this[0]%n;else for(var i=this.t-1;i>=0;--i)r=(d*r+this[i])%n;return r;}
function bnModInverse(m){var ac=m.isEven();if((this.isEven()&&ac)||m.signum()==0)return BigInteger.ZERO;var u=m.clone(),v=this.clone();var a=nbv(1),b=nbv(0),c=nbv(0),d=nbv(1);while(u.signum()!=0){while(u.isEven()){u.rShiftTo(1,u);if(ac){if(!a.isEven()||!b.isEven()){a.addTo(this,a);b.subTo(m,b);}
a.rShiftTo(1,a);}
else if(!b.isEven())b.subTo(m,b);b.rShiftTo(1,b);}
while(v.isEven()){v.rShiftTo(1,v);if(ac){if(!c.isEven()||!d.isEven()){c.addTo(this,c);d.subTo(m,d);}
c.rShiftTo(1,c);}
else if(!d.isEven())d.subTo(m,d);d.rShiftTo(1,d);}
if(u.compareTo(v)>=0){u.subTo(v,u);if(ac)a.subTo(c,a);b.subTo(d,b);}
else{v.subTo(u,v);if(ac)c.subTo(a,c);d.subTo(b,d);}}
if(v.compareTo(BigInteger.ONE)!=0)return BigInteger.ZERO;if(d.compareTo(m)>=0)return d.subtract(m);if(d.signum()<0)d.addTo(m,d);else return d;if(d.signum()<0)return d.add(m);else return d;}
var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997];var lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(t){var i,x=this.abs();if(x.t==1&&x[0]<=lowprimes[lowprimes.length-1]){for(i=0;i<lowprimes.length;++i)
if(x[0]==lowprimes[i])return true;return false;}
if(x.isEven())return false;i=1;while(i<lowprimes.length){var m=lowprimes[i],j=i+1;while(j<lowprimes.length&&m<lplim)m*=lowprimes[j++];m=x.modInt(m);while(i<j)if(m%lowprimes[i++]==0)return false;}
return x.millerRabin(t);}
function bnpMillerRabin(t){var n1=this.subtract(BigInteger.ONE);var k=n1.getLowestSetBit();if(k<=0)return false;var r=n1.shiftRight(k);t=(t+1)>>1;if(t>lowprimes.length)t=lowprimes.length;var a=nbi();for(var i=0;i<t;++i){a.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);var y=a.modPow(r,this);if(y.compareTo(BigInteger.ONE)!=0&&y.compareTo(n1)!=0){var j=1;while(j++<k&&y.compareTo(n1)!=0){y=y.modPowInt(2,this);if(y.compareTo(BigInteger.ONE)==0)return false;}
if(y.compareTo(n1)!=0)return false;}}
return true;}
BigInteger.prototype.chunkSize=bnpChunkSize;BigInteger.prototype.toRadix=bnpToRadix;BigInteger.prototype.fromRadix=bnpFromRadix;BigInteger.prototype.fromNumber=bnpFromNumber;BigInteger.prototype.bitwiseTo=bnpBitwiseTo;BigInteger.prototype.changeBit=bnpChangeBit;BigInteger.prototype.addTo=bnpAddTo;BigInteger.prototype.dMultiply=bnpDMultiply;BigInteger.prototype.dAddOffset=bnpDAddOffset;BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo;BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo;BigInteger.prototype.modInt=bnpModInt;BigInteger.prototype.millerRabin=bnpMillerRabin;BigInteger.prototype.clone=bnClone;BigInteger.prototype.intValue=bnIntValue;BigInteger.prototype.byteValue=bnByteValue;BigInteger.prototype.shortValue=bnShortValue;BigInteger.prototype.signum=bnSigNum;BigInteger.prototype.toByteArray=bnToByteArray;BigInteger.prototype.equals=bnEquals;BigInteger.prototype.min=bnMin;BigInteger.prototype.max=bnMax;BigInteger.prototype.and=bnAnd;BigInteger.prototype.or=bnOr;BigInteger.prototype.xor=bnXor;BigInteger.prototype.andNot=bnAndNot;BigInteger.prototype.not=bnNot;BigInteger.prototype.shiftLeft=bnShiftLeft;BigInteger.prototype.shiftRight=bnShiftRight;BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit;BigInteger.prototype.bitCount=bnBitCount;BigInteger.prototype.testBit=bnTestBit;BigInteger.prototype.setBit=bnSetBit;BigInteger.prototype.clearBit=bnClearBit;BigInteger.prototype.flipBit=bnFlipBit;BigInteger.prototype.add=bnAdd;BigInteger.prototype.subtract=bnSubtract;BigInteger.prototype.multiply=bnMultiply;BigInteger.prototype.divide=bnDivide;BigInteger.prototype.remainder=bnRemainder;BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder;BigInteger.prototype.modPow=bnModPow;BigInteger.prototype.modInverse=bnModInverse;BigInteger.prototype.pow=bnPow;BigInteger.prototype.gcd=bnGCD;BigInteger.prototype.isProbablePrime=bnIsProbablePrime;BigInteger.prototype.square=bnSquare;BigInteger.prototype.Barrett=Barrett
var rng_state;var rng_pool;var rng_pptr;function rng_seed_int(x){rng_pool[rng_pptr++]^=x&255;rng_pool[rng_pptr++]^=(x>>8)&255;rng_pool[rng_pptr++]^=(x>>16)&255;rng_pool[rng_pptr++]^=(x>>24)&255;if(rng_pptr>=rng_psize)rng_pptr-=rng_psize;}
function rng_seed_time(){rng_seed_int(new Date().getTime());}
if(rng_pool==null){rng_pool=new Array();rng_pptr=0;var t;if(typeof window!=="undefined"&&window.crypto){if(window.crypto.getRandomValues){var ua=new Uint8Array(32);window.crypto.getRandomValues(ua);for(t=0;t<32;++t)
rng_pool[rng_pptr++]=ua[t];}
else if(navigator.appName=="Netscape"&&navigator.appVersion<"5"){var z=window.crypto.random(32);for(t=0;t<z.length;++t)
rng_pool[rng_pptr++]=z.charCodeAt(t)&255;}}
while(rng_pptr<rng_psize){t=Math.floor(65536*Math.random());rng_pool[rng_pptr++]=t>>>8;rng_pool[rng_pptr++]=t&255;}
rng_pptr=0;rng_seed_time();}
function rng_get_byte(){if(rng_state==null){rng_seed_time();rng_state=prng_newstate();rng_state.init(rng_pool);for(rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr)
rng_pool[rng_pptr]=0;rng_pptr=0;}
return rng_state.next();}
function rng_get_bytes(ba){var i;for(i=0;i<ba.length;++i)ba[i]=rng_get_byte();}
function SecureRandom(){}
SecureRandom.prototype.nextBytes=rng_get_bytes;function Arcfour(){this.i=0;this.j=0;this.S=new Array();}
function ARC4init(key){var i,j,t;for(i=0;i<256;++i)
this.S[i]=i;j=0;for(i=0;i<256;++i){j=(j+this.S[i]+key[i%key.length])&255;t=this.S[i];this.S[i]=this.S[j];this.S[j]=t;}
this.i=0;this.j=0;}
function ARC4next(){var t;this.i=(this.i+1)&255;this.j=(this.j+this.S[this.i])&255;t=this.S[this.i];this.S[this.i]=this.S[this.j];this.S[this.j]=t;return this.S[(t+this.S[this.i])&255];}
Arcfour.prototype.init=ARC4init;Arcfour.prototype.next=ARC4next;function prng_newstate(){return new Arcfour();}
var rng_psize=256;BigInteger.SecureRandom=SecureRandom;BigInteger.BigInteger=BigInteger;if(true){exports=module.exports=BigInteger;}else{this.BigInteger=BigInteger;this.SecureRandom=SecureRandom;}}).call(this);}),(function(module,exports,__webpack_require__){module.exports=SSHBuffer;var assert=__webpack_require__(15);var Buffer=__webpack_require__(21).Buffer;function SSHBuffer(opts){assert.object(opts,'options');if(opts.buffer!==undefined)
assert.buffer(opts.buffer,'options.buffer');this._size=opts.buffer?opts.buffer.length:1024;this._buffer=opts.buffer||Buffer.alloc(this._size);this._offset=0;}
SSHBuffer.prototype.toBuffer=function(){return(this._buffer.slice(0,this._offset));};SSHBuffer.prototype.atEnd=function(){return(this._offset>=this._buffer.length);};SSHBuffer.prototype.remainder=function(){return(this._buffer.slice(this._offset));};SSHBuffer.prototype.skip=function(n){this._offset+=n;};SSHBuffer.prototype.expand=function(){this._size*=2;var buf=Buffer.alloc(this._size);this._buffer.copy(buf,0);this._buffer=buf;};SSHBuffer.prototype.readPart=function(){return({data:this.readBuffer()});};SSHBuffer.prototype.readBuffer=function(){var len=this._buffer.readUInt32BE(this._offset);this._offset+=4;assert.ok(this._offset+len<=this._buffer.length,'length out of bounds at +0x'+this._offset.toString(16)+
' (data truncated?)');var buf=this._buffer.slice(this._offset,this._offset+len);this._offset+=len;return(buf);};SSHBuffer.prototype.readString=function(){return(this.readBuffer().toString());};SSHBuffer.prototype.readCString=function(){var offset=this._offset;while(offset<this._buffer.length&&this._buffer[offset]!==0x00)
offset++;assert.ok(offset<this._buffer.length,'c string does not terminate');var str=this._buffer.slice(this._offset,offset).toString();this._offset=offset+1;return(str);};SSHBuffer.prototype.readInt=function(){var v=this._buffer.readUInt32BE(this._offset);this._offset+=4;return(v);};SSHBuffer.prototype.readInt64=function(){assert.ok(this._offset+8<this._buffer.length,'buffer not long enough to read Int64');var v=this._buffer.slice(this._offset,this._offset+8);this._offset+=8;return(v);};SSHBuffer.prototype.readChar=function(){var v=this._buffer[this._offset++];return(v);};SSHBuffer.prototype.writeBuffer=function(buf){while(this._offset+4+buf.length>this._size)
this.expand();this._buffer.writeUInt32BE(buf.length,this._offset);this._offset+=4;buf.copy(this._buffer,this._offset);this._offset+=buf.length;};SSHBuffer.prototype.writeString=function(str){this.writeBuffer(Buffer.from(str,'utf8'));};SSHBuffer.prototype.writeCString=function(str){while(this._offset+1+str.length>this._size)
this.expand();this._buffer.write(str,this._offset);this._offset+=str.length;this._buffer[this._offset++]=0;};SSHBuffer.prototype.writeInt=function(v){while(this._offset+4>this._size)
this.expand();this._buffer.writeUInt32BE(v,this._offset);this._offset+=4;};SSHBuffer.prototype.writeInt64=function(v){assert.buffer(v,'value');if(v.length>8){var lead=v.slice(0,v.length-8);for(var i=0;i<lead.length;++i){assert.strictEqual(lead[i],0,'must fit in 64 bits of precision');}
v=v.slice(v.length-8,v.length);}
while(this._offset+8>this._size)
this.expand();v.copy(this._buffer,this._offset);this._offset+=8;};SSHBuffer.prototype.writeChar=function(v){while(this._offset+1>this._size)
this.expand();this._buffer[this._offset++]=v;};SSHBuffer.prototype.writePart=function(p){this.writeBuffer(p.data);};SSHBuffer.prototype.write=function(buf){while(this._offset+buf.length>this._size)
this.expand();buf.copy(this._buffer,this._offset);this._offset+=buf.length;};}),(function(module,exports,__webpack_require__){module.exports={read:read,readPkcs8:readPkcs8,write:write,writePkcs8:writePkcs8,pkcs8ToBuffer:pkcs8ToBuffer,readECDSACurve:readECDSACurve,writeECDSACurve:writeECDSACurve};var assert=__webpack_require__(15);var asn1=__webpack_require__(79);var Buffer=__webpack_require__(21).Buffer;var algs=__webpack_require__(41);var utils=__webpack_require__(34);var Key=__webpack_require__(33);var PrivateKey=__webpack_require__(38);var pem=__webpack_require__(88);function read(buf,options){return(pem.read(buf,options,'pkcs8'));}
function write(key,options){return(pem.write(key,options,'pkcs8'));}
function readMPInt(der,nm){assert.strictEqual(der.peek(),asn1.Ber.Integer,nm+' is not an Integer');return(utils.mpNormalize(der.readString(asn1.Ber.Integer,true)));}
function readPkcs8(alg,type,der){if(der.peek()===asn1.Ber.Integer){assert.strictEqual(type,'private','unexpected Integer at start of public key');der.readString(asn1.Ber.Integer,true);}
der.readSequence();var next=der.offset+der.length;var oid=der.readOID();switch(oid){case '1.2.840.113549.1.1.1':der._offset=next;if(type==='public')
return(readPkcs8RSAPublic(der));else
return(readPkcs8RSAPrivate(der));case '1.2.840.10040.4.1':if(type==='public')
return(readPkcs8DSAPublic(der));else
return(readPkcs8DSAPrivate(der));case '1.2.840.10045.2.1':if(type==='public')
return(readPkcs8ECDSAPublic(der));else
return(readPkcs8ECDSAPrivate(der));case '1.3.101.112':if(type==='public'){return(readPkcs8EdDSAPublic(der));}else{return(readPkcs8EdDSAPrivate(der));}
case '1.3.101.110':if(type==='public'){return(readPkcs8X25519Public(der));}else{return(readPkcs8X25519Private(der));}
default:throw(new Error('Unknown key type OID '+oid));}}
function readPkcs8RSAPublic(der){der.readSequence(asn1.Ber.BitString);der.readByte();der.readSequence();var n=readMPInt(der,'modulus');var e=readMPInt(der,'exponent');var key={type:'rsa',source:der.originalInput,parts:[{name:'e',data:e},{name:'n',data:n}]};return(new Key(key));}
function readPkcs8RSAPrivate(der){der.readSequence(asn1.Ber.OctetString);der.readSequence();var ver=readMPInt(der,'version');assert.equal(ver[0],0x0,'unknown RSA private key version');var n=readMPInt(der,'modulus');var e=readMPInt(der,'public exponent');var d=readMPInt(der,'private exponent');var p=readMPInt(der,'prime1');var q=readMPInt(der,'prime2');var dmodp=readMPInt(der,'exponent1');var dmodq=readMPInt(der,'exponent2');var iqmp=readMPInt(der,'iqmp');var key={type:'rsa',parts:[{name:'n',data:n},{name:'e',data:e},{name:'d',data:d},{name:'iqmp',data:iqmp},{name:'p',data:p},{name:'q',data:q},{name:'dmodp',data:dmodp},{name:'dmodq',data:dmodq}]};return(new PrivateKey(key));}
function readPkcs8DSAPublic(der){der.readSequence();var p=readMPInt(der,'p');var q=readMPInt(der,'q');var g=readMPInt(der,'g');der.readSequence(asn1.Ber.BitString);der.readByte();var y=readMPInt(der,'y');var key={type:'dsa',parts:[{name:'p',data:p},{name:'q',data:q},{name:'g',data:g},{name:'y',data:y}]};return(new Key(key));}
function readPkcs8DSAPrivate(der){der.readSequence();var p=readMPInt(der,'p');var q=readMPInt(der,'q');var g=readMPInt(der,'g');der.readSequence(asn1.Ber.OctetString);var x=readMPInt(der,'x');var y=utils.calculateDSAPublic(g,p,x);var key={type:'dsa',parts:[{name:'p',data:p},{name:'q',data:q},{name:'g',data:g},{name:'y',data:y},{name:'x',data:x}]};return(new PrivateKey(key));}
function readECDSACurve(der){var curveName,curveNames;var j,c,cd;if(der.peek()===asn1.Ber.OID){var oid=der.readOID();curveNames=Object.keys(algs.curves);for(j=0;j<curveNames.length;++j){c=curveNames[j];cd=algs.curves[c];if(cd.pkcs8oid===oid){curveName=c;break;}}}else{der.readSequence();var version=der.readString(asn1.Ber.Integer,true);assert.strictEqual(version[0],1,'ECDSA key not version 1');var curve={};der.readSequence();var fieldTypeOid=der.readOID();assert.strictEqual(fieldTypeOid,'1.2.840.10045.1.1','ECDSA key is not from a prime-field');var p=curve.p=utils.mpNormalize(der.readString(asn1.Ber.Integer,true));curve.size=p.length*8-utils.countZeros(p);der.readSequence();curve.a=utils.mpNormalize(der.readString(asn1.Ber.OctetString,true));curve.b=utils.mpNormalize(der.readString(asn1.Ber.OctetString,true));if(der.peek()===asn1.Ber.BitString)
curve.s=der.readString(asn1.Ber.BitString,true);curve.G=der.readString(asn1.Ber.OctetString,true);assert.strictEqual(curve.G[0],0x4,'uncompressed G is required');curve.n=utils.mpNormalize(der.readString(asn1.Ber.Integer,true));curve.h=utils.mpNormalize(der.readString(asn1.Ber.Integer,true));assert.strictEqual(curve.h[0],0x1,'a cofactor=1 curve is '+
'required');curveNames=Object.keys(algs.curves);var ks=Object.keys(curve);for(j=0;j<curveNames.length;++j){c=curveNames[j];cd=algs.curves[c];var equal=true;for(var i=0;i<ks.length;++i){var k=ks[i];if(cd[k]===undefined)
continue;if(typeof(cd[k])==='object'&&cd[k].equals!==undefined){if(!cd[k].equals(curve[k])){equal=false;break;}}else if(Buffer.isBuffer(cd[k])){if(cd[k].toString('binary')
!==curve[k].toString('binary')){equal=false;break;}}else{if(cd[k]!==curve[k]){equal=false;break;}}}
if(equal){curveName=c;break;}}}
return(curveName);}
function readPkcs8ECDSAPrivate(der){var curveName=readECDSACurve(der);assert.string(curveName,'a known elliptic curve');der.readSequence(asn1.Ber.OctetString);der.readSequence();var version=readMPInt(der,'version');assert.equal(version[0],1,'unknown version of ECDSA key');var d=der.readString(asn1.Ber.OctetString,true);der.readSequence(0xa1);var Q=der.readString(asn1.Ber.BitString,true);Q=utils.ecNormalize(Q);var key={type:'ecdsa',parts:[{name:'curve',data:Buffer.from(curveName)},{name:'Q',data:Q},{name:'d',data:d}]};return(new PrivateKey(key));}
function readPkcs8ECDSAPublic(der){var curveName=readECDSACurve(der);assert.string(curveName,'a known elliptic curve');var Q=der.readString(asn1.Ber.BitString,true);Q=utils.ecNormalize(Q);var key={type:'ecdsa',parts:[{name:'curve',data:Buffer.from(curveName)},{name:'Q',data:Q}]};return(new Key(key));}
function readPkcs8EdDSAPublic(der){if(der.peek()===0x00)
der.readByte();var A=utils.readBitString(der);var key={type:'ed25519',parts:[{name:'A',data:utils.zeroPadToLength(A,32)}]};return(new Key(key));}
function readPkcs8X25519Public(der){var A=utils.readBitString(der);var key={type:'curve25519',parts:[{name:'A',data:utils.zeroPadToLength(A,32)}]};return(new Key(key));}
function readPkcs8EdDSAPrivate(der){if(der.peek()===0x00)
der.readByte();der.readSequence(asn1.Ber.OctetString);var k=der.readString(asn1.Ber.OctetString,true);k=utils.zeroPadToLength(k,32);var A;if(der.peek()===asn1.Ber.BitString){A=utils.readBitString(der);A=utils.zeroPadToLength(A,32);}else{A=utils.calculateED25519Public(k);}
var key={type:'ed25519',parts:[{name:'A',data:utils.zeroPadToLength(A,32)},{name:'k',data:utils.zeroPadToLength(k,32)}]};return(new PrivateKey(key));}
function readPkcs8X25519Private(der){if(der.peek()===0x00)
der.readByte();der.readSequence(asn1.Ber.OctetString);var k=der.readString(asn1.Ber.OctetString,true);k=utils.zeroPadToLength(k,32);var A=utils.calculateX25519Public(k);var key={type:'curve25519',parts:[{name:'A',data:utils.zeroPadToLength(A,32)},{name:'k',data:utils.zeroPadToLength(k,32)}]};return(new PrivateKey(key));}
function pkcs8ToBuffer(key){var der=new asn1.BerWriter();writePkcs8(der,key);return(der.buffer);}
function writePkcs8(der,key){der.startSequence();if(PrivateKey.isPrivateKey(key)){var sillyInt=Buffer.from([0]);der.writeBuffer(sillyInt,asn1.Ber.Integer);}
der.startSequence();switch(key.type){case 'rsa':der.writeOID('1.2.840.113549.1.1.1');if(PrivateKey.isPrivateKey(key))
writePkcs8RSAPrivate(key,der);else
writePkcs8RSAPublic(key,der);break;case 'dsa':der.writeOID('1.2.840.10040.4.1');if(PrivateKey.isPrivateKey(key))
writePkcs8DSAPrivate(key,der);else
writePkcs8DSAPublic(key,der);break;case 'ecdsa':der.writeOID('1.2.840.10045.2.1');if(PrivateKey.isPrivateKey(key))
writePkcs8ECDSAPrivate(key,der);else
writePkcs8ECDSAPublic(key,der);break;case 'ed25519':der.writeOID('1.3.101.112');if(PrivateKey.isPrivateKey(key))
throw(new Error('Ed25519 private keys in pkcs8 '+
'format are not supported'));writePkcs8EdDSAPublic(key,der);break;default:throw(new Error('Unsupported key type: '+key.type));}
der.endSequence();}
function writePkcs8RSAPrivate(key,der){der.writeNull();der.endSequence();der.startSequence(asn1.Ber.OctetString);der.startSequence();var version=Buffer.from([0]);der.writeBuffer(version,asn1.Ber.Integer);der.writeBuffer(key.part.n.data,asn1.Ber.Integer);der.writeBuffer(key.part.e.data,asn1.Ber.Integer);der.writeBuffer(key.part.d.data,asn1.Ber.Integer);der.writeBuffer(key.part.p.data,asn1.Ber.Integer);der.writeBuffer(key.part.q.data,asn1.Ber.Integer);if(!key.part.dmodp||!key.part.dmodq)
utils.addRSAMissing(key);der.writeBuffer(key.part.dmodp.data,asn1.Ber.Integer);der.writeBuffer(key.part.dmodq.data,asn1.Ber.Integer);der.writeBuffer(key.part.iqmp.data,asn1.Ber.Integer);der.endSequence();der.endSequence();}
function writePkcs8RSAPublic(key,der){der.writeNull();der.endSequence();der.startSequence(asn1.Ber.BitString);der.writeByte(0x00);der.startSequence();der.writeBuffer(key.part.n.data,asn1.Ber.Integer);der.writeBuffer(key.part.e.data,asn1.Ber.Integer);der.endSequence();der.endSequence();}
function writePkcs8DSAPrivate(key,der){der.startSequence();der.writeBuffer(key.part.p.data,asn1.Ber.Integer);der.writeBuffer(key.part.q.data,asn1.Ber.Integer);der.writeBuffer(key.part.g.data,asn1.Ber.Integer);der.endSequence();der.endSequence();der.startSequence(asn1.Ber.OctetString);der.writeBuffer(key.part.x.data,asn1.Ber.Integer);der.endSequence();}
function writePkcs8DSAPublic(key,der){der.startSequence();der.writeBuffer(key.part.p.data,asn1.Ber.Integer);der.writeBuffer(key.part.q.data,asn1.Ber.Integer);der.writeBuffer(key.part.g.data,asn1.Ber.Integer);der.endSequence();der.endSequence();der.startSequence(asn1.Ber.BitString);der.writeByte(0x00);der.writeBuffer(key.part.y.data,asn1.Ber.Integer);der.endSequence();}
function writeECDSACurve(key,der){var curve=algs.curves[key.curve];if(curve.pkcs8oid){der.writeOID(curve.pkcs8oid);}else{der.startSequence();var version=Buffer.from([1]);der.writeBuffer(version,asn1.Ber.Integer);der.startSequence();der.writeOID('1.2.840.10045.1.1');der.writeBuffer(curve.p,asn1.Ber.Integer);der.endSequence();der.startSequence();var a=curve.p;if(a[0]===0x0)
a=a.slice(1);der.writeBuffer(a,asn1.Ber.OctetString);der.writeBuffer(curve.b,asn1.Ber.OctetString);der.writeBuffer(curve.s,asn1.Ber.BitString);der.endSequence();der.writeBuffer(curve.G,asn1.Ber.OctetString);der.writeBuffer(curve.n,asn1.Ber.Integer);var h=curve.h;if(!h){h=Buffer.from([1]);}
der.writeBuffer(h,asn1.Ber.Integer);der.endSequence();}}
function writePkcs8ECDSAPublic(key,der){writeECDSACurve(key,der);der.endSequence();var Q=utils.ecNormalize(key.part.Q.data,true);der.writeBuffer(Q,asn1.Ber.BitString);}
function writePkcs8ECDSAPrivate(key,der){writeECDSACurve(key,der);der.endSequence();der.startSequence(asn1.Ber.OctetString);der.startSequence();var version=Buffer.from([1]);der.writeBuffer(version,asn1.Ber.Integer);der.writeBuffer(key.part.d.data,asn1.Ber.OctetString);der.startSequence(0xa1);var Q=utils.ecNormalize(key.part.Q.data,true);der.writeBuffer(Q,asn1.Ber.BitString);der.endSequence();der.endSequence();der.endSequence();}
function writePkcs8EdDSAPublic(key,der){der.endSequence();utils.writeBitString(der,key.part.A.data);}
function writePkcs8EdDSAPrivate(key,der){der.endSequence();var k=utils.mpNormalize(key.part.k.data,true);der.startSequence(asn1.Ber.OctetString);der.writeBuffer(k,asn1.Ber.OctetString);der.endSequence();}}),(function(module,exports,__webpack_require__){module.exports=Certificate;var assert=__webpack_require__(15);var Buffer=__webpack_require__(21).Buffer;var algs=__webpack_require__(41);var crypto=__webpack_require__(24);var Fingerprint=__webpack_require__(134);var Signature=__webpack_require__(78);var errs=__webpack_require__(72);var util=__webpack_require__(25);var utils=__webpack_require__(34);var Key=__webpack_require__(33);var PrivateKey=__webpack_require__(38);var Identity=__webpack_require__(139);var formats={};formats['openssh']=__webpack_require__(833);formats['x509']=__webpack_require__(381);formats['pem']=__webpack_require__(834);var CertificateParseError=errs.CertificateParseError;var InvalidAlgorithmError=errs.InvalidAlgorithmError;function Certificate(opts){assert.object(opts,'options');assert.arrayOfObject(opts.subjects,'options.subjects');utils.assertCompatible(opts.subjects[0],Identity,[1,0],'options.subjects');utils.assertCompatible(opts.subjectKey,Key,[1,0],'options.subjectKey');utils.assertCompatible(opts.issuer,Identity,[1,0],'options.issuer');if(opts.issuerKey!==undefined){utils.assertCompatible(opts.issuerKey,Key,[1,0],'options.issuerKey');}
assert.object(opts.signatures,'options.signatures');assert.buffer(opts.serial,'options.serial');assert.date(opts.validFrom,'options.validFrom');assert.date(opts.validUntil,'optons.validUntil');assert.optionalArrayOfString(opts.purposes,'options.purposes');this._hashCache={};this.subjects=opts.subjects;this.issuer=opts.issuer;this.subjectKey=opts.subjectKey;this.issuerKey=opts.issuerKey;this.signatures=opts.signatures;this.serial=opts.serial;this.validFrom=opts.validFrom;this.validUntil=opts.validUntil;this.purposes=opts.purposes;}
Certificate.formats=formats;Certificate.prototype.toBuffer=function(format,options){if(format===undefined)
format='x509';assert.string(format,'format');assert.object(formats[format],'formats[format]');assert.optionalObject(options,'options');return(formats[format].write(this,options));};Certificate.prototype.toString=function(format,options){if(format===undefined)
format='pem';return(this.toBuffer(format,options).toString());};Certificate.prototype.fingerprint=function(algo){if(algo===undefined)
algo='sha256';assert.string(algo,'algorithm');var opts={type:'certificate',hash:this.hash(algo),algorithm:algo};return(new Fingerprint(opts));};Certificate.prototype.hash=function(algo){assert.string(algo,'algorithm');algo=algo.toLowerCase();if(algs.hashAlgs[algo]===undefined)
throw(new InvalidAlgorithmError(algo));if(this._hashCache[algo])
return(this._hashCache[algo]);var hash=crypto.createHash(algo).update(this.toBuffer('x509')).digest();this._hashCache[algo]=hash;return(hash);};Certificate.prototype.isExpired=function(when){if(when===undefined)
when=new Date();return(!((when.getTime()>=this.validFrom.getTime())&&(when.getTime()<this.validUntil.getTime())));};Certificate.prototype.isSignedBy=function(issuerCert){utils.assertCompatible(issuerCert,Certificate,[1,0],'issuer');if(!this.issuer.equals(issuerCert.subjects[0]))
return(false);if(this.issuer.purposes&&this.issuer.purposes.length>0&&this.issuer.purposes.indexOf('ca')===-1){return(false);}
return(this.isSignedByKey(issuerCert.subjectKey));};Certificate.prototype.getExtension=function(keyOrOid){assert.string(keyOrOid,'keyOrOid');var ext=this.getExtensions().filter(function(maybeExt){if(maybeExt.format==='x509')
return(maybeExt.oid===keyOrOid);if(maybeExt.format==='openssh')
return(maybeExt.name===keyOrOid);return(false);})[0];return(ext);};Certificate.prototype.getExtensions=function(){var exts=[];var x509=this.signatures.x509;if(x509&&x509.extras&&x509.extras.exts){x509.extras.exts.forEach(function(ext){ext.format='x509';exts.push(ext);});}
var openssh=this.signatures.openssh;if(openssh&&openssh.exts){openssh.exts.forEach(function(ext){ext.format='openssh';exts.push(ext);});}
return(exts);};Certificate.prototype.isSignedByKey=function(issuerKey){utils.assertCompatible(issuerKey,Key,[1,2],'issuerKey');if(this.issuerKey!==undefined){return(this.issuerKey.fingerprint('sha512').matches(issuerKey));}
var fmt=Object.keys(this.signatures)[0];var valid=formats[fmt].verify(this,issuerKey);if(valid)
this.issuerKey=issuerKey;return(valid);};Certificate.prototype.signWith=function(key){utils.assertCompatible(key,PrivateKey,[1,2],'key');var fmts=Object.keys(formats);var didOne=false;for(var i=0;i<fmts.length;++i){if(fmts[i]!=='pem'){var ret=formats[fmts[i]].sign(this,key);if(ret===true)
didOne=true;}}
if(!didOne){throw(new Error('Failed to sign the certificate for any '+
'available certificate formats'));}};Certificate.createSelfSigned=function(subjectOrSubjects,key,options){var subjects;if(Array.isArray(subjectOrSubjects))
subjects=subjectOrSubjects;else
subjects=[subjectOrSubjects];assert.arrayOfObject(subjects);subjects.forEach(function(subject){utils.assertCompatible(subject,Identity,[1,0],'subject');});utils.assertCompatible(key,PrivateKey,[1,2],'private key');assert.optionalObject(options,'options');if(options===undefined)
options={};assert.optionalObject(options.validFrom,'options.validFrom');assert.optionalObject(options.validUntil,'options.validUntil');var validFrom=options.validFrom;var validUntil=options.validUntil;if(validFrom===undefined)
validFrom=new Date();if(validUntil===undefined){assert.optionalNumber(options.lifetime,'options.lifetime');var lifetime=options.lifetime;if(lifetime===undefined)
lifetime=10*365*24*3600;validUntil=new Date();validUntil.setTime(validUntil.getTime()+lifetime*1000);}
assert.optionalBuffer(options.serial,'options.serial');var serial=options.serial;if(serial===undefined)
serial=Buffer.from('0000000000000001','hex');var purposes=options.purposes;if(purposes===undefined)
purposes=[];if(purposes.indexOf('signature')===-1)
purposes.push('signature');if(purposes.indexOf('ca')===-1)
purposes.push('ca');if(purposes.indexOf('crl')===-1)
purposes.push('crl');if(purposes.length<=3){var hostSubjects=subjects.filter(function(subject){return(subject.type==='host');});var userSubjects=subjects.filter(function(subject){return(subject.type==='user');});if(hostSubjects.length>0){if(purposes.indexOf('serverAuth')===-1)
purposes.push('serverAuth');}
if(userSubjects.length>0){if(purposes.indexOf('clientAuth')===-1)
purposes.push('clientAuth');}
if(userSubjects.length>0||hostSubjects.length>0){if(purposes.indexOf('keyAgreement')===-1)
purposes.push('keyAgreement');if(key.type==='rsa'&&purposes.indexOf('encryption')===-1)
purposes.push('encryption');}}
var cert=new Certificate({subjects:subjects,issuer:subjects[0],subjectKey:key.toPublic(),issuerKey:key.toPublic(),signatures:{},serial:serial,validFrom:validFrom,validUntil:validUntil,purposes:purposes});cert.signWith(key);return(cert);};Certificate.create=function(subjectOrSubjects,key,issuer,issuerKey,options){var subjects;if(Array.isArray(subjectOrSubjects))
subjects=subjectOrSubjects;else
subjects=[subjectOrSubjects];assert.arrayOfObject(subjects);subjects.forEach(function(subject){utils.assertCompatible(subject,Identity,[1,0],'subject');});utils.assertCompatible(key,Key,[1,0],'key');if(PrivateKey.isPrivateKey(key))
key=key.toPublic();utils.assertCompatible(issuer,Identity,[1,0],'issuer');utils.assertCompatible(issuerKey,PrivateKey,[1,2],'issuer key');assert.optionalObject(options,'options');if(options===undefined)
options={};assert.optionalObject(options.validFrom,'options.validFrom');assert.optionalObject(options.validUntil,'options.validUntil');var validFrom=options.validFrom;var validUntil=options.validUntil;if(validFrom===undefined)
validFrom=new Date();if(validUntil===undefined){assert.optionalNumber(options.lifetime,'options.lifetime');var lifetime=options.lifetime;if(lifetime===undefined)
lifetime=10*365*24*3600;validUntil=new Date();validUntil.setTime(validUntil.getTime()+lifetime*1000);}
assert.optionalBuffer(options.serial,'options.serial');var serial=options.serial;if(serial===undefined)
serial=Buffer.from('0000000000000001','hex');var purposes=options.purposes;if(purposes===undefined)
purposes=[];if(purposes.indexOf('signature')===-1)
purposes.push('signature');if(options.ca===true){if(purposes.indexOf('ca')===-1)
purposes.push('ca');if(purposes.indexOf('crl')===-1)
purposes.push('crl');}
var hostSubjects=subjects.filter(function(subject){return(subject.type==='host');});var userSubjects=subjects.filter(function(subject){return(subject.type==='user');});if(hostSubjects.length>0){if(purposes.indexOf('serverAuth')===-1)
purposes.push('serverAuth');}
if(userSubjects.length>0){if(purposes.indexOf('clientAuth')===-1)
purposes.push('clientAuth');}
if(userSubjects.length>0||hostSubjects.length>0){if(purposes.indexOf('keyAgreement')===-1)
purposes.push('keyAgreement');if(key.type==='rsa'&&purposes.indexOf('encryption')===-1)
purposes.push('encryption');}
var cert=new Certificate({subjects:subjects,issuer:issuer,subjectKey:key,issuerKey:issuerKey.toPublic(),signatures:{},serial:serial,validFrom:validFrom,validUntil:validUntil,purposes:purposes});cert.signWith(issuerKey);return(cert);};Certificate.parse=function(data,format,options){if(typeof(data)!=='string')
assert.buffer(data,'data');if(format===undefined)
format='auto';assert.string(format,'format');if(typeof(options)==='string')
options={filename:options};assert.optionalObject(options,'options');if(options===undefined)
options={};assert.optionalString(options.filename,'options.filename');if(options.filename===undefined)
options.filename='(unnamed)';assert.object(formats[format],'formats[format]');try{var k=formats[format].read(data,options);return(k);}catch(e){throw(new CertificateParseError(options.filename,format,e));}};Certificate.isCertificate=function(obj,ver){return(utils.isCompatible(obj,Certificate,ver));};Certificate.prototype._sshpkApiVersion=[1,1];Certificate._oldVersionDetect=function(obj){return([1,0]);};}),(function(module,exports,__webpack_require__){module.exports=Identity;var assert=__webpack_require__(15);var algs=__webpack_require__(41);var crypto=__webpack_require__(24);var Fingerprint=__webpack_require__(134);var Signature=__webpack_require__(78);var errs=__webpack_require__(72);var util=__webpack_require__(25);var utils=__webpack_require__(34);var asn1=__webpack_require__(79);var Buffer=__webpack_require__(21).Buffer;var DNS_NAME_RE=/^([*]|[a-z0-9][a-z0-9\-]{0,62})(?:\.([*]|[a-z0-9][a-z0-9\-]{0,62}))*$/i;var oids={};oids.cn='2.5.4.3';oids.o='2.5.4.10';oids.ou='2.5.4.11';oids.l='2.5.4.7';oids.s='2.5.4.8';oids.c='2.5.4.6';oids.sn='2.5.4.4';oids.postalCode='2.5.4.17';oids.serialNumber='2.5.4.5';oids.street='2.5.4.9';oids.x500UniqueIdentifier='2.5.4.45';oids.role='2.5.4.72';oids.telephoneNumber='2.5.4.20';oids.description='2.5.4.13';oids.dc='0.9.2342.19200300.100.1.25';oids.uid='0.9.2342.19200300.100.1.1';oids.mail='0.9.2342.19200300.100.1.3';oids.title='2.5.4.12';oids.gn='2.5.4.42';oids.initials='2.5.4.43';oids.pseudonym='2.5.4.65';oids.emailAddress='1.2.840.113549.1.9.1';var unoids={};Object.keys(oids).forEach(function(k){unoids[oids[k]]=k;});function Identity(opts){var self=this;assert.object(opts,'options');assert.arrayOfObject(opts.components,'options.components');this.components=opts.components;this.componentLookup={};this.components.forEach(function(c){if(c.name&&!c.oid)
c.oid=oids[c.name];if(c.oid&&!c.name)
c.name=unoids[c.oid];if(self.componentLookup[c.name]===undefined)
self.componentLookup[c.name]=[];self.componentLookup[c.name].push(c);});if(this.componentLookup.cn&&this.componentLookup.cn.length>0){this.cn=this.componentLookup.cn[0].value;}
assert.optionalString(opts.type,'options.type');if(opts.type===undefined){if(this.components.length===1&&this.componentLookup.cn&&this.componentLookup.cn.length===1&&this.componentLookup.cn[0].value.match(DNS_NAME_RE)){this.type='host';this.hostname=this.componentLookup.cn[0].value;}else if(this.componentLookup.dc&&this.components.length===this.componentLookup.dc.length){this.type='host';this.hostname=this.componentLookup.dc.map(function(c){return(c.value);}).join('.');}else if(this.componentLookup.uid&&this.components.length===this.componentLookup.uid.length){this.type='user';this.uid=this.componentLookup.uid[0].value;}else if(this.componentLookup.cn&&this.componentLookup.cn.length===1&&this.componentLookup.cn[0].value.match(DNS_NAME_RE)){this.type='host';this.hostname=this.componentLookup.cn[0].value;}else if(this.componentLookup.uid&&this.componentLookup.uid.length===1){this.type='user';this.uid=this.componentLookup.uid[0].value;}else if(this.componentLookup.mail&&this.componentLookup.mail.length===1){this.type='email';this.email=this.componentLookup.mail[0].value;}else if(this.componentLookup.cn&&this.componentLookup.cn.length===1){this.type='user';this.uid=this.componentLookup.cn[0].value;}else{this.type='unknown';}}else{this.type=opts.type;if(this.type==='host')
this.hostname=opts.hostname;else if(this.type==='user')
this.uid=opts.uid;else if(this.type==='email')
this.email=opts.email;else
throw(new Error('Unknown type '+this.type));}}
Identity.prototype.toString=function(){return(this.components.map(function(c){var n=c.name.toUpperCase();n=n.replace(/=/g,'\\=');var v=c.value;v=v.replace(/,/g,'\\,');return(n+'='+v);}).join(', '));};Identity.prototype.get=function(name,asArray){assert.string(name,'name');var arr=this.componentLookup[name];if(arr===undefined||arr.length===0)
return(undefined);if(!asArray&&arr.length>1)
throw(new Error('Multiple values for attribute '+name));if(!asArray)
return(arr[0].value);return(arr.map(function(c){return(c.value);}));};Identity.prototype.toArray=function(idx){return(this.components.map(function(c){return({name:c.name,value:c.value});}));};var NOT_PRINTABLE=/[^a-zA-Z0-9 '(),+.\/:=?-]/;var NOT_IA5=/[^\x00-\x7f]/;Identity.prototype.toAsn1=function(der,tag){der.startSequence(tag);this.components.forEach(function(c){der.startSequence(asn1.Ber.Constructor|asn1.Ber.Set);der.startSequence();der.writeOID(c.oid);if(c.asn1type===asn1.Ber.Utf8String||c.value.match(NOT_IA5)){var v=Buffer.from(c.value,'utf8');der.writeBuffer(v,asn1.Ber.Utf8String);}else if(c.asn1type===asn1.Ber.IA5String||c.value.match(NOT_PRINTABLE)){der.writeString(c.value,asn1.Ber.IA5String);}else{var type=asn1.Ber.PrintableString;if(c.asn1type!==undefined)
type=c.asn1type;der.writeString(c.value,type);}
der.endSequence();der.endSequence();});der.endSequence();};function globMatch(a,b){if(a==='**'||b==='**')
return(true);var aParts=a.split('.');var bParts=b.split('.');if(aParts.length!==bParts.length)
return(false);for(var i=0;i<aParts.length;++i){if(aParts[i]==='*'||bParts[i]==='*')
continue;if(aParts[i]!==bParts[i])
return(false);}
return(true);}
Identity.prototype.equals=function(other){if(!Identity.isIdentity(other,[1,0]))
return(false);if(other.components.length!==this.components.length)
return(false);for(var i=0;i<this.components.length;++i){if(this.components[i].oid!==other.components[i].oid)
return(false);if(!globMatch(this.components[i].value,other.components[i].value)){return(false);}}
return(true);};Identity.forHost=function(hostname){assert.string(hostname,'hostname');return(new Identity({type:'host',hostname:hostname,components:[{name:'cn',value:hostname}]}));};Identity.forUser=function(uid){assert.string(uid,'uid');return(new Identity({type:'user',uid:uid,components:[{name:'uid',value:uid}]}));};Identity.forEmail=function(email){assert.string(email,'email');return(new Identity({type:'email',email:email,components:[{name:'mail',value:email}]}));};Identity.parseDN=function(dn){assert.string(dn,'dn');var parts=[''];var idx=0;var rem=dn;while(rem.length>0){var m;if((m=/^,/.exec(rem))!==null){parts[++idx]='';rem=rem.slice(m[0].length);}else if((m=/^\\,/.exec(rem))!==null){parts[idx]+=',';rem=rem.slice(m[0].length);}else if((m=/^\\./.exec(rem))!==null){parts[idx]+=m[0];rem=rem.slice(m[0].length);}else if((m=/^[^\\,]+/.exec(rem))!==null){parts[idx]+=m[0];rem=rem.slice(m[0].length);}else{throw(new Error('Failed to parse DN'));}}
var cmps=parts.map(function(c){c=c.trim();var eqPos=c.indexOf('=');while(eqPos>0&&c.charAt(eqPos-1)==='\\')
eqPos=c.indexOf('=',eqPos+1);if(eqPos===-1){throw(new Error('Failed to parse DN'));}
var name=c.slice(0,eqPos).toLowerCase().replace(/\\=/g,'=');var value=c.slice(eqPos+1);return({name:name,value:value});});return(new Identity({components:cmps}));};Identity.fromArray=function(components){assert.arrayOfObject(components,'components');components.forEach(function(cmp){assert.object(cmp,'component');assert.string(cmp.name,'component.name');if(!Buffer.isBuffer(cmp.value)&&!(typeof(cmp.value)==='string')){throw(new Error('Invalid component value'));}});return(new Identity({components:components}));};Identity.parseAsn1=function(der,top){var components=[];der.readSequence(top);var end=der.offset+der.length;while(der.offset<end){der.readSequence(asn1.Ber.Constructor|asn1.Ber.Set);var after=der.offset+der.length;der.readSequence();var oid=der.readOID();var type=der.peek();var value;switch(type){case asn1.Ber.PrintableString:case asn1.Ber.IA5String:case asn1.Ber.OctetString:case asn1.Ber.T61String:value=der.readString(type);break;case asn1.Ber.Utf8String:value=der.readString(type,true);value=value.toString('utf8');break;case asn1.Ber.CharacterString:case asn1.Ber.BMPString:value=der.readString(type,true);value=value.toString('utf16le');break;default:throw(new Error('Unknown asn1 type '+type));}
components.push({oid:oid,asn1type:type,value:value});der._offset=after;}
der._offset=end;return(new Identity({components:components}));};Identity.isIdentity=function(obj,ver){return(utils.isCompatible(obj,Identity,ver));};Identity.prototype._sshpkApiVersion=[1,0];Identity._oldVersionDetect=function(obj){return([1,0]);};}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_global_difficulty_Blockchain_Difficulty__=__webpack_require__(924);class InterfaceBlockchainBlockValidation{constructor(getBlockCallBack,getDifficultyCallback,getTimeStampCallback,getHashCallback,getChainHashCallback,blockValidationType){if(!blockValidationType)blockValidationType={};this.getBlockCallBack=getBlockCallBack;this.getDifficultyCallback=getDifficultyCallback;this.getTimeStampCallback=getTimeStampCallback;this.getHashCallback=getHashCallback;this.getChainHashCallback=getChainHashCallback;this.blockValidationType=blockValidationType;}
getDifficulty(blockTimestamp,blockNumber){return __WEBPACK_IMPORTED_MODULE_0_common_blockchain_global_difficulty_Blockchain_Difficulty__["a"].getDifficulty(this.getDifficultyCallback,this.getTimeStampCallback,blockTimestamp,blockNumber)}
saveValidation(){}
loadValidation(){}}
__webpack_exports__["a"]=(InterfaceBlockchainBlockValidation);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_2_node_lists_types_Node_Type__=__webpack_require__(35);var __WEBPACK_IMPORTED_MODULE_3_node_lists_types_Connection_Type__=__webpack_require__(47);var __WEBPACK_IMPORTED_MODULE_4_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_5_node_lists_types_Node_Consensus_Type__=__webpack_require__(44);var __WEBPACK_IMPORTED_MODULE_6__utils_Serialization__=__webpack_require__(9);let NodeExpress,NodeServer;if(false){NodeExpress=require('node/sockets/node-server/express/Node-Express').default;NodeServer=require('node/sockets/node-server/sockets/Node-Server').default;}
class NodeProtocol{async justSendHello(){return this.node.sendRequest("HelloNode",{version:__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].SETTINGS.NODE.VERSION,uuid:__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].SETTINGS.UUID,nodeType:true?__WEBPACK_IMPORTED_MODULE_2_node_lists_types_Node_Type__["a"].NODE_WEB_PEER:NODE_TYPE.NODE_TERMINAL,domain:true?"browser":await NodeServer.getServerHTTPAddress(),UTC:__WEBPACK_IMPORTED_MODULE_4_main_blockchain_Blockchain__["a"].blockchain.timestamp.timeUTC,});}
processHello(response,validationDoubleConnectionsTypes){if(!response||typeof response!=="object"){console.error("No Hello");return false;}
if(!response.uuid||!response.version){console.error("hello received, but there is not uuid or version",response);return false;}
if(response.version<__WEBPACK_IMPORTED_MODULE_4_main_blockchain_Blockchain__["a"].versionCompatibility){console.log("hello received, VERSION is not right",response.version,__WEBPACK_IMPORTED_MODULE_4_main_blockchain_Blockchain__["a"].versionCompatibility);return false;}
if(response.nodeType!==__WEBPACK_IMPORTED_MODULE_2_node_lists_types_Node_Type__["a"].NODE_TERMINAL&&response.nodeType!==__WEBPACK_IMPORTED_MODULE_2_node_lists_types_Node_Type__["a"].NODE_WEB_PEER){console.error("invalid node type",response);return false;}
if(__WEBPACK_IMPORTED_MODULE_2_node_lists_types_Node_Type__["a"].NODE_TERMINAL===response.nodeType&&__WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__["a"].countNodesByType(__WEBPACK_IMPORTED_MODULE_2_node_lists_types_Node_Type__["a"].NODE_TERMINAL)>__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].SETTINGS.PARAMS.CONNECTIONS.BROWSER.CLIENT.MAXIMUM_CONNECTIONS_FROM_TERMINAL){console.warn("too many terminal connections");return false;}
if(response.uuid===__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].SETTINGS.UUID)
return false;this.node.sckAddress.uuid=response.uuid;let connections=__WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__["a"].countNodeSocketByAddress(this.node.sckAddress,"all");if(validationDoubleConnectionsTypes.uuid&&connections.countUUIDs!==0)return false;if(validationDoubleConnectionsTypes.ip&&connections.countIPs>(__WEBPACK_IMPORTED_MODULE_4_main_blockchain_Blockchain__["a"].isPoolActivated?__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].MINING_POOL.CONNECTIONS.NO_OF_IDENTICAL_IPS:__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].SETTINGS.PARAMS.CONNECTIONS.NO_OF_IDENTICAL_IPS))return false;console.log("RECEIVED HELLO NODE BACK",response.version);this.node.protocol.nodeType=response.nodeType;this.node.protocol.nodeConsensusType=response.nodeConsensusType||__WEBPACK_IMPORTED_MODULE_5_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_PEER;this.node.protocol.nodeDomain=response.domain;this.node.protocol.nodeUTC=response.UTC;this.node.protocol.helloValidated=true;return true;}
static broadcastRequest(request,data,connectionType,exceptSockets){if(exceptSockets==="all")return true;let nodes=__WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__["a"].getNodesByConnectionType(connectionType);if(exceptSockets&&!Array.isArray(exceptSockets))
exceptSockets=[exceptSockets];for(let i=0;i<nodes.length;i++){let broadcast=true;if(exceptSockets&&Array.isArray(exceptSockets))
for(let j=0;j<exceptSockets.length;j++)
if(exceptSockets[j].node&&exceptSockets[j].node.sckAddress)
if(nodes[i].socket.node.sckAddress.matchAddress(exceptSockets[j].node.sckAddress,{"uuid":true})){broadcast=false;break;}
if(broadcast)
nodes[i].socket.node.sendRequest(request,data);}
return true;}
sendLastBlock(callback){if(!__WEBPACK_IMPORTED_MODULE_4_main_blockchain_Blockchain__["a"].blockchain.blocks.last)return;this.node.sendRequest("head/new-block",{l:__WEBPACK_IMPORTED_MODULE_4_main_blockchain_Blockchain__["a"].blockchain.blocks.length,h:__WEBPACK_IMPORTED_MODULE_4_main_blockchain_Blockchain__["a"].blockchain.blocks.last.hashChain,s:__WEBPACK_IMPORTED_MODULE_4_main_blockchain_Blockchain__["a"].blockchain.blocks.blocksStartingPoint,p:__WEBPACK_IMPORTED_MODULE_4_main_blockchain_Blockchain__["a"].blockchain.agent.light?(__WEBPACK_IMPORTED_MODULE_4_main_blockchain_Blockchain__["a"].blockchain.proofPi&&__WEBPACK_IMPORTED_MODULE_4_main_blockchain_Blockchain__["a"].blockchain.proofPi.validatesLastBlock()):true,W:__WEBPACK_IMPORTED_MODULE_4_main_blockchain_Blockchain__["a"].blockchain.blocks.chainWorkSerialized,},callback);}
async calculateLatency(){let maxLatency=__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].SETTINGS.PARAMS.MAX_ALLOWED_LATENCY;let startTime=Date.now();let answer=await this.node.sendRequestWaitOnce("ping",undefined,"pong",maxLatency);if(answer==='r')
this.latency=Date.now()-startTime;else
this.latency=maxLatency;}}
__webpack_exports__["a"]=(NodeProtocol);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_consts_global__=__webpack_require__(45);var __WEBPACK_IMPORTED_MODULE_1_common_blockchain_global_Blockchain_Genesis__=__webpack_require__(16);var __WEBPACK_IMPORTED_MODULE_2_common_events_Status_Events__=__webpack_require__(12);var __WEBPACK_IMPORTED_MODULE_3_common_sockets_protocol_propagation_Node_Blockchain_Propagation__=__webpack_require__(119);var __WEBPACK_IMPORTED_MODULE_4_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_5_common_utils_Revert_Actions_Revert_Actions__=__webpack_require__(118);var __WEBPACK_IMPORTED_MODULE_6_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__=__webpack_require__(18);var __WEBPACK_IMPORTED_MODULE_8__Interface_Blockchain_Fork_Basic__=__webpack_require__(947);var __WEBPACK_IMPORTED_MODULE_9_common_utils_helpers_Utils__=__webpack_require__(40);var __WEBPACK_IMPORTED_MODULE_10__tests_Interface_Blockchain_Fork_Tests__=__webpack_require__(948);class InterfaceBlockchainFork extends __WEBPACK_IMPORTED_MODULE_8__Interface_Blockchain_Fork_Basic__["a"]{async includeForkBlock(block,){if(await this._validateForkBlock(block,block.height)===false)
throw{message:"includeForkBlock failed for ",height:block.height};this.forkBlocks.push(block);this.forkChainHashes[block.hash.toString("hex")]=true;return true;}
async _validateForkBlock(block,height){let forkHeight=block.height-this.forkStartingHeight;if(block.height<this.forkStartingHeight)throw{message:'block height is smaller than the fork itself',blockHeight:block.height,forkStartingHeight:this.forkStartingHeight};if(block.height!==height)throw{message:"block height is different than block's height",blockHeight:block.height,height:height};if(__WEBPACK_IMPORTED_MODULE_1_common_blockchain_global_Blockchain_Genesis__["a"].isPoSActivated(block.height))
block.blockValidation.blockValidationType["skip-validation-PoW-hash"]=true;return this.blockchain.validateBlockchainBlock(block);}
async validateForkImmutability(){if(this.blockchain.blocks.blocksStartingPoint<this.blockchain.blocks.length-__WEBPACK_IMPORTED_MODULE_4_consts_const_global__["a"].BLOCKCHAIN.FORKS.IMMUTABILITY_LENGTH)
if(this.forkStartingHeight<=this.blockchain.blocks.length-__WEBPACK_IMPORTED_MODULE_4_consts_const_global__["a"].BLOCKCHAIN.FORKS.IMMUTABILITY_LENGTH){let addresses={},addressesCount=0;for(let i=this.forkStartingHeight;i<this.blockchain.blocks.length;i++){let block=await this.blockchain.getBlock(i);if(block.data.minerAddress.equals(this.blockchain.mining.unencodedMinerAddress))continue;if(!addresses[block.data.minerAddress.toString("hex")]){addresses[block.data.minerAddress.toString("hex")]=true;addressesCount++;}
if(!__WEBPACK_IMPORTED_MODULE_4_consts_const_global__["a"].DEBUG&&addressesCount>=1)
throw{message:"Validate for Immutability failed"};else
return true;}}
return true;}
_showDebugInfo(){__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].log("Accountant Tree",__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].LOG_TYPE.BLOCKCHAIN_FORKS,this.blockchain.accountantTree.root.hash.toString("hex"));for(let forkBlock of this.forkBlocks){for(let tx of forkBlock.data.transactions.transactions)
__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].log("Transaction",__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].LOG_TYPE.BLOCKCHAIN_FORKS,tx.toJSON());__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].log("Transaction hash",__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].LOG_TYPE.BLOCKCHAIN_FORKS,forkBlock.data.transactions.hashTransactions.toString("hex"));}}
async saveFork(){if(__WEBPACK_IMPORTED_MODULE_0_consts_global__["a"].TERMINATED)return false;this.forkIsSaving=true;if(await this._validateFork(false,true)===false){__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].error("validateFork was not passed",__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].LOG_TYPE.BLOCKCHAIN_FORKS);return false}
__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].log("Save Fork after validateFork",__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].LOG_TYPE.BLOCKCHAIN_FORKS);let revertActions=new __WEBPACK_IMPORTED_MODULE_5_common_utils_Revert_Actions_Revert_Actions__["a"](this.blockchain);let revertActionsOldBlocks=new __WEBPACK_IMPORTED_MODULE_5_common_utils_Revert_Actions_Revert_Actions__["a"](this.blockchain);let revertActionsNewBlocks=new __WEBPACK_IMPORTED_MODULE_5_common_utils_Revert_Actions_Revert_Actions__["a"](this.blockchain);let success=false;if(this.blockchain)
success=await this.blockchain.semaphoreProcessing.processSempahoreCallback(async()=>{if(__WEBPACK_IMPORTED_MODULE_0_consts_global__["a"].TERMINATED)return true;if(await this._validateFork(false,false)===false)
return __WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].error("validateFork was not passed",__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].LOG_TYPE.BLOCKCHAIN_FORKS);if(await this.deleteAlreadyIncludedBlocks()===false)
return __WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].error("deleteAlreadyIncludedBlocks blocks no longer exist",__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].LOG_TYPE.BLOCKCHAIN_FORKS);if(__WEBPACK_IMPORTED_MODULE_0_consts_global__["a"].TERMINATED)return false;for(let forkBlock of this.forkBlocks)
forkBlock.isForkBlock=true;let forkedSuccessfully=true;__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].log("Accountant Tree",__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].LOG_TYPE.BLOCKCHAIN_FORKS,this.blockchain.accountantTree.root.hash.toString("hex"));let oldBlocks=[];try{await this.preForkClone();await this.preFork(revertActions);oldBlocks=await this.blockchain.blocks.spliceBlocks(this.forkStartingHeight,false,revertActionsOldBlocks);__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].log("===========================",__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].LOG_TYPE.BLOCKCHAIN_FORKS);__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].log("===========================",__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].LOG_TYPE.BLOCKCHAIN_FORKS);if(__WEBPACK_IMPORTED_MODULE_4_consts_const_global__["a"].DEBUG)this._showDebugInfo();for(let index=0;index<this.forkBlocks.length;index++){let forkBlock=this.forkBlocks[index];__WEBPACK_IMPORTED_MODULE_2_common_events_Status_Events__["a"].emit("agent/status",{message:"Synchronizing - Including Block",blockHeight:forkBlock.height,blockHeightMax:this.forkChainLength});forkBlock.blockValidation=this._createBlockValidation_BlockchainValidation(forkBlock.height,index);if(await this.saveIncludeBlock(index,revertActionsNewBlocks,false)===false)
throw({message:"fork couldn't be included in main Blockchain ",index:index});revertActionsNewBlocks.push({name:"block-added",height:forkBlock.height});if(false)
forkBlock.blockValidation.blockValidationType['skip-sleep']=true;else
await this.blockchain.sleep(2);if(forkBlock.height%50===0)
__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].log("FORK PROCESSING: "+index,__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].LOG_TYPE.BLOCKCHAIN_FORKS,);}
console.warn("Saving Fork. Starting from ",this.forkStartingHeight,this.blockchain.blocks.length);__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].log("FORK STATUS SUCCESS5: "+forkedSuccessfully+" position "+this.forkStartingHeight,__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].LOG_TYPE.BLOCKCHAIN_FORKS,);await this.postForkTransactions(forkedSuccessfully,oldBlocks);if(this.downloadBlocksSleep)await __WEBPACK_IMPORTED_MODULE_9_common_utils_helpers_Utils__["a"].sleep(30);this.postFork(forkedSuccessfully);}catch(exception){forkedSuccessfully=false;__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].error("preFork raised an error",__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].LOG_TYPE.BLOCKCHAIN_FORKS,exception);await revertActionsNewBlocks.revertOperations('',"all");await revertActions.revertOperations('',"all");let revertOldBlocksActions=new __WEBPACK_IMPORTED_MODULE_5_common_utils_Revert_Actions_Revert_Actions__["a"](this.blockchain);for(let i=0;i<oldBlocks.length;i++)
if(await this.blockchain.includeBlockchainBlock(oldBlocks[i],false,"all",true,revertOldBlocksActions,false)===false){__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].error("fork oldBLock couldn't be included in main Blockchain "+index,__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].LOG_TYPE.BLOCKCHAIN_FORKS);return false;}
await this.revertFork();}
for(let forkBlock of this.forkBlocks)
forkBlock.isForkBlock=false;__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].log("Accountant Tree",__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].LOG_TYPE.BLOCKCHAIN_FORKS,this.blockchain.accountantTree.root.hash.toString("hex"));return forkedSuccessfully;});this.forkIsSaving=false;if(this.downloadAllBlocks)
__WEBPACK_IMPORTED_MODULE_6_main_blockchain_Blockchain__["a"].synchronizeBlockchain();if(success){this.blockchain.mining.resetMining();this._forkPromiseResolver(true);__WEBPACK_IMPORTED_MODULE_2_common_events_Status_Events__["a"].emit("blockchain/new-blocks",{});await this.blockchain.blocks.emitBlockInserted();}
__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].info("FORK SOLVER SUCCESS: "+success,__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].LOG_TYPE.BLOCKCHAIN_FORKS);__WEBPACK_IMPORTED_MODULE_6_main_blockchain_Blockchain__["a"].blockchain.accountantTree.emitBalancesChanges();await __WEBPACK_IMPORTED_MODULE_6_main_blockchain_Blockchain__["a"].blockchain.blocks.recalculateNetworkHashRate();await __WEBPACK_IMPORTED_MODULE_6_main_blockchain_Blockchain__["a"].blockchain.blocks.emitBlockInserted();__WEBPACK_IMPORTED_MODULE_6_main_blockchain_Blockchain__["a"].blockchain.blocks.emitBlockCountChanged();if(success){try{__WEBPACK_IMPORTED_MODULE_3_common_sockets_protocol_propagation_Node_Blockchain_Propagation__["a"].propagateBlock(await this.blockchain.blocks.last,this.sockets);if(this.downloadAllBlocks){await __WEBPACK_IMPORTED_MODULE_9_common_utils_helpers_Utils__["a"].sleep(100);this.blockchain.agent.protocol.askBlockchain(this.getSocket());}}catch(exception){__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].error("saveFork - saving the fork returned an exception",__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].LOG_TYPE.BLOCKCHAIN_FORKS,exception);}}
return success;}
preFork(revertActions){}
async postForkTransactions(forkedSuccessfully,oldBlocks){if(forkedSuccessfully){for(let block of oldBlocks)
await block.data.transactions.unconfirmTransactions();for(let block of this.forkBlocks)
await block.data.transactions.confirmTransactions(block.height);}else{for(let block of this.forkBlocks)
await block.data.transactions.unconfirmTransactions();for(let block of oldBlocks)
await block.data.transactions.confirmTransactions(block.height);}}
postFork(forkedSuccessfully){}
preForkClone(){}
revertFork(){}
async saveIncludeBlock(index,revertActions,showUpdate=false){if(await this.blockchain.includeBlockchainBlock(this.forkBlocks[index],false,"all",true,revertActions,showUpdate)===false){__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].error("fork couldn't be included in main Blockchain "+index,__WEBPACK_IMPORTED_MODULE_7_common_utils_logging_Log__["a"].LOG_TYPE.BLOCKCHAIN_FORKS);return false;}
return true;}}
__webpack_exports__["a"]=(InterfaceBlockchainFork);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0__utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_1__utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_2__Interface_Tree_Edge__=__webpack_require__(254);var uniqueId=0;class InterfaceTreeNode{constructor(root,parent,edges,value){if(edges===undefined)
edges=[];if(value===undefined)
value=null;this.id=uniqueId++;this.root=root;this.parent=parent;this.edges=edges;this.value=value;}
destroyNode(){for(let i=0;i<this.edges.length;i++){this.edges[i].destroyEdge();this.edges[i]=undefined;}
this.root=undefined;this.parent=undefined;delete this.value;delete this.edges}
isLeaf(){return this.value!==null}
serializeNodeData(){let buffers=[];if(this.value&&Buffer.isBuffer(this.value)){buffers.push(__WEBPACK_IMPORTED_MODULE_0__utils_Serialization__["a"].serializeNumber2Bytes(this.value.length));buffers.push(this.value);}else
buffers.push(new Buffer(2));return Buffer.concat(buffer);}
serializeNode(includeEdges){try{let buffer=this.serializeNodeData.apply(this,arguments);if(includeEdges){buffer.push(__WEBPACK_IMPORTED_MODULE_0__utils_Serialization__["a"].serializeNumber1Byte(this.edges.length));for(let i=0;i<this.edges.length;i++)
buffer.push(this.edges[i].serializeEdge())}
return Buffer.concat(buffer);}catch(exception){console.log("Error serializing TreeNode",exception);throw exception;}}
deserializeNodeData(buffer,offset=0){let valueLength=__WEBPACK_IMPORTED_MODULE_0__utils_Serialization__["a"].deserializeNumber2Bytes(buffer,offset);offset+=2;let value=__WEBPACK_IMPORTED_MODULE_0__utils_Serialization__["a"].deserializeNumber(__WEBPACK_IMPORTED_MODULE_1__utils_BufferExtended__["a"].substr(buffer,offset,valueLength));offset+=valueLength;this.value=value;return offset;}
deserializeNode(buffer,offset,includeEdges,includeHashes){try{offset=this.deserializeNodeData.apply(this,arguments);if(includeEdges){let length=__WEBPACK_IMPORTED_MODULE_0__utils_Serialization__["a"].deserializeNumber1Bytes(buffer,offset);offset+=1;for(let i=0;i<length;i++){let edge=new this.root.createNewEdge(null);edge.deserializeEdge(buffer,offset,this.createNewNode);this.edgesPush(edge);}}
return offset;}catch(exception){console.log("Error deserializing TreeNode",exception)
throw exception;}}
createNewEdge(node){return new __WEBPACK_IMPORTED_MODULE_2__Interface_Tree_Edge__["a"](node);}
createNewNode(parent,edges=[],value=null,hash=null){if(parent===undefined)parent=this;return new this.constructor(this.root,parent,edges,value,hash);}
validateTreeNode(){for(let i=0;i<this.edges.length;i++){if(!this.edges[i].targetNode)
throw{message:'Edge target node is Null',node:this,edge:this.edges[i],edgeIndex:i};if(this.edges[i].targetNode.parent!==this)
throw{message:'Edge target node parent is different that current node',node:this};}
return true;}
validateCompleteTreeNode(){if(!this.validateTreeNode())return false;for(let i=0;i<this.edges.length;i++){if(!this.edges[i].targetNode.validateCompleteTreeNode())
return false;}
return true;}
_changedNode(node){}
edgesPush(edge){let position=0;if(typeof edge.label==="string"){for(let i=0;i<this.edges.length;i++){position=0;while(position>=0&&position<this.edges.length){if(edge.label>this.edges[position].label)
position++;else
break}}}else if(Buffer.isBuffer(edge.label)){position=0;while(position>=0&&position<this.edges.length){if(Buffer.compare(edge.label,this.edges[position].label)>0)
position++;else
break}}
this.edges.splice(position,0,edge);}}
__webpack_exports__["a"]=(InterfaceTreeNode);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){if(true){module.exports=Emitter;}
function Emitter(obj){if(obj)return mixin(obj);};function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key];}
return obj;}
Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks['$'+event]=this._callbacks['$'+event]||[]).push(fn);return this;};Emitter.prototype.once=function(event,fn){function on(){this.off(event,on);fn.apply(this,arguments);}
on.fn=fn;this.on(event,on);return this;};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this;}
var callbacks=this._callbacks['$'+event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks['$'+event];return this;}
var cb;for(var i=0;i<callbacks.length;i++){cb=callbacks[i];if(cb===fn||cb.fn===fn){callbacks.splice(i,1);break;}}
return this;};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks['$'+event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args);}}
return this;};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks['$'+event]||[];};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length;};}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_os__=__webpack_require__(394);var __WEBPACK_IMPORTED_MODULE_0_os___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_os__);var __WEBPACK_IMPORTED_MODULE_1__AddressBanObject__=__webpack_require__(1050);var __WEBPACK_IMPORTED_MODULE_2_main_blockchain_Blockchain__=__webpack_require__(5);const fs=__webpack_require__(62);class AddressBanList{constructor(){this._bans=[];this._intervalRemove=setInterval(this._removeEmptyBans.bind(this),60*1000);}
isBanned(address){let pos=this._findBan(address);if(pos<0)return false;return this._bans[pos].isBanned(address);}
addBan(address,banTime=10000,banReason){if(!address){console.log("Not address");return false;}
let ban=this.getBan(address);if(!ban){ban=new __WEBPACK_IMPORTED_MODULE_1__AddressBanObject__["a"](address);this._bans.push(ban);}
ban.increaseBanTrials(banTime,banReason);if(__WEBPACK_IMPORTED_MODULE_2_main_blockchain_Blockchain__["a"].PoolManagement!==undefined&&__WEBPACK_IMPORTED_MODULE_2_main_blockchain_Blockchain__["a"].PoolManagement.poolStarted){if(__WEBPACK_IMPORTED_MODULE_2_main_blockchain_Blockchain__["a"].PoolManagement.poolData!==undefined){for(let blockInfo of __WEBPACK_IMPORTED_MODULE_2_main_blockchain_Blockchain__["a"].PoolManagement.poolData.blocksInfo)
for(let blockInformationMinerInstance of blockInfo.blockInformationMinersInstances)
if(blockInformationMinerInstance.minerAddress.equals(address)){blockInformationMinerInstance.cancelDifficulties("pos");blockInformationMinerInstance.cancelReward();blockInformationMinerInstance.penalty=true;}}else console.info("Pool data is undefined!?");}
return ban;}
_findBan(address){for(let i=0;i<this._bans.length;i++)
if(this._bans[i].address.equals(address))
return i;return-1;}
getBan(address){let pos=this._findBan(address);if(pos>=0)return this._bans[pos];}
deleteBan(address){let position=this._findBan(address);if(position>=0){this._bans[position].upLiftBan();this._bans.splice(position,1)}}
_removeEmptyBans(){for(let i=this._bans.length-1;i>=0;i--)
if(!this._bans[i].address||!this._bans[i].isBanned())
this._bans.splice(i,1)}
listBans(){if(this._bans.length>0)
console.info("ADDRESS BANS");for(let i=0;i<this._bans.length;i++){let timeLeft=(this._bans[i].banTimestamp+this._bans[i].banTime)-new Date().getTime();if(timeLeft>0)
console.warn(this._bans[i].addressWIF,"banTime",this._bans[i].banTime,"timeLeft",timeLeft,"messages",this._bans[i].banReasons);}}
saveBans(){try{let bansFileStream=fs.createWriteStream('address-ban-list.txt',{'flags':'w'});for(let i=0;i<this._bans.length;i++){let timeLeft=(((this._bans[i].banTimestamp+this._bans[i].banTime)-new Date().getTime())/3600/1000).toFixed(2);bansFileStream.write(timeLeft+";"+this._bans[i].addressWIF+";"+this._bans[i].banReasons+__WEBPACK_IMPORTED_MODULE_0_os__["EOL"]);}
bansFileStream.end();}catch(err){}}}
__webpack_exports__["a"]=(new AddressBanList());}),(function(module,exports,__webpack_require__){var core=__webpack_require__(57);var global=__webpack_require__(11);var SHARED='__core-js_shared__';var store=global[SHARED]||(global[SHARED]={});(module.exports=function(key,value){return store[key]||(store[key]=value!==undefined?value:{});})('versions',[]).push({version:core.version,mode:__webpack_require__(81)?'pure':'global',copyright:'© 2019 Denis Pushkarev (zloirock.ru)'});}),(function(module,exports,__webpack_require__){var toIObject=__webpack_require__(52);var toLength=__webpack_require__(22);var toAbsoluteIndex=__webpack_require__(95);module.exports=function(IS_INCLUDES){return function($this,el,fromIndex){var O=toIObject($this);var length=toLength(O.length);var index=toAbsoluteIndex(fromIndex,length);var value;if(IS_INCLUDES&&el!=el)while(length>index){value=O[index++];if(value!=value)return true;}else for(;length>index;index++)if(IS_INCLUDES||index in O){if(O[index]===el)return IS_INCLUDES||index||0;}return!IS_INCLUDES&&-1;};};}),(function(module,exports){exports.f=Object.getOwnPropertySymbols;}),(function(module,exports,__webpack_require__){var cof=__webpack_require__(59);module.exports=Array.isArray||function isArray(arg){return cof(arg)=='Array';};}),(function(module,exports,__webpack_require__){var toInteger=__webpack_require__(60);var defined=__webpack_require__(64);module.exports=function(TO_STRING){return function(that,pos){var s=String(defined(that));var i=toInteger(pos);var l=s.length;var a,b;if(i<0||i>=l)return TO_STRING?'':undefined;a=s.charCodeAt(i);return a<0xd800||a>0xdbff||i+1===l||(b=s.charCodeAt(i+1))<0xdc00||b>0xdfff?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):(a-0xd800<<10)+(b-0xdc00)+0x10000;};};}),(function(module,exports,__webpack_require__){var isObject=__webpack_require__(14);var cof=__webpack_require__(59);var MATCH=__webpack_require__(19)('match');module.exports=function(it){var isRegExp;return isObject(it)&&((isRegExp=it[MATCH])!==undefined?!!isRegExp:cof(it)=='RegExp');};}),(function(module,exports,__webpack_require__){var ITERATOR=__webpack_require__(19)('iterator');var SAFE_CLOSING=false;try{var riter=[7][ITERATOR]();riter['return']=function(){SAFE_CLOSING=true;};Array.from(riter,function(){throw 2;});}catch(e){}
module.exports=function(exec,skipClosing){if(!skipClosing&&!SAFE_CLOSING)return false;var safe=false;try{var arr=[7];var iter=arr[ITERATOR]();iter.next=function(){return{done:safe=true};};arr[ITERATOR]=function(){return iter;};exec(arr);}catch(e){}
return safe;};}),(function(module,exports,__webpack_require__){"use strict";var classof=__webpack_require__(110);var builtinExec=RegExp.prototype.exec;module.exports=function(R,S){var exec=R.exec;if(typeof exec==='function'){var result=exec.call(R,S);if(typeof result!=='object'){throw new TypeError('RegExp exec method returned something other than an Object or null');}
return result;}
if(classof(R)!=='RegExp'){throw new TypeError('RegExp#exec called on incompatible receiver');}
return builtinExec.call(R,S);};}),(function(module,exports,__webpack_require__){"use strict";__webpack_require__(288);var redefine=__webpack_require__(49);var hide=__webpack_require__(48);var fails=__webpack_require__(13);var defined=__webpack_require__(64);var wks=__webpack_require__(19);var regexpExec=__webpack_require__(202);var SPECIES=wks('species');var REPLACE_SUPPORTS_NAMED_GROUPS=!fails(function(){var re=/./;re.exec=function(){var result=[];result.groups={a:'7'};return result;};return ''.replace(re,'$<a>')!=='7';});var SPLIT_WORKS_WITH_OVERWRITTEN_EXEC=(function(){var re=/(?:)/;var originalExec=re.exec;re.exec=function(){return originalExec.apply(this,arguments);};var result='ab'.split(re);return result.length===2&&result[0]==='a'&&result[1]==='b';})();module.exports=function(KEY,length,exec){var SYMBOL=wks(KEY);var DELEGATES_TO_SYMBOL=!fails(function(){var O={};O[SYMBOL]=function(){return 7;};return ''[KEY](O)!=7;});var DELEGATES_TO_EXEC=DELEGATES_TO_SYMBOL?!fails(function(){var execCalled=false;var re=/a/;re.exec=function(){execCalled=true;return null;};if(KEY==='split'){re.constructor={};re.constructor[SPECIES]=function(){return re;};}
re[SYMBOL]('');return!execCalled;}):undefined;if(!DELEGATES_TO_SYMBOL||!DELEGATES_TO_EXEC||(KEY==='replace'&&!REPLACE_SUPPORTS_NAMED_GROUPS)||(KEY==='split'&&!SPLIT_WORKS_WITH_OVERWRITTEN_EXEC)){var nativeRegExpMethod=/./[SYMBOL];var fns=exec(defined,SYMBOL,''[KEY],function maybeCallNative(nativeMethod,regexp,str,arg2,forceStringMethod){if(regexp.exec===regexpExec){if(DELEGATES_TO_SYMBOL&&!forceStringMethod){return{done:true,value:nativeRegExpMethod.call(regexp,str,arg2)};}
return{done:true,value:nativeMethod.call(str,regexp,arg2)};}
return{done:false};});var strfn=fns[0];var rxfn=fns[1];redefine(String.prototype,KEY,strfn);hide(RegExp.prototype,SYMBOL,length==2?function(string,arg){return rxfn.call(string,this,arg);}:function(string){return rxfn.call(string,this);});}};}),(function(module,exports,__webpack_require__){var global=__webpack_require__(11);var navigator=global.navigator;module.exports=navigator&&navigator.userAgent||'';}),(function(module,exports,__webpack_require__){"use strict";var global=__webpack_require__(11);var $export=__webpack_require__(0);var redefine=__webpack_require__(49);var redefineAll=__webpack_require__(101);var meta=__webpack_require__(80);var forOf=__webpack_require__(100);var anInstance=__webpack_require__(99);var isObject=__webpack_require__(14);var fails=__webpack_require__(13);var $iterDetect=__webpack_require__(152);var setToStringTag=__webpack_require__(109);var inheritIfRequired=__webpack_require__(188);module.exports=function(NAME,wrapper,methods,common,IS_MAP,IS_WEAK){var Base=global[NAME];var C=Base;var ADDER=IS_MAP?'set':'add';var proto=C&&C.prototype;var O={};var fixMethod=function(KEY){var fn=proto[KEY];redefine(proto,KEY,KEY=='delete'?function(a){return IS_WEAK&&!isObject(a)?false:fn.call(this,a===0?0:a);}:KEY=='has'?function has(a){return IS_WEAK&&!isObject(a)?false:fn.call(this,a===0?0:a);}:KEY=='get'?function get(a){return IS_WEAK&&!isObject(a)?undefined:fn.call(this,a===0?0:a);}:KEY=='add'?function add(a){fn.call(this,a===0?0:a);return this;}:function set(a,b){fn.call(this,a===0?0:a,b);return this;});};if(typeof C!='function'||!(IS_WEAK||proto.forEach&&!fails(function(){new C().entries().next();}))){C=common.getConstructor(wrapper,NAME,IS_MAP,ADDER);redefineAll(C.prototype,methods);meta.NEED=true;}else{var instance=new C();var HASNT_CHAINING=instance[ADDER](IS_WEAK?{}:-0,1)!=instance;var THROWS_ON_PRIMITIVES=fails(function(){instance.has(1);});var ACCEPT_ITERABLES=$iterDetect(function(iter){new C(iter);});var BUGGY_ZERO=!IS_WEAK&&fails(function(){var $instance=new C();var index=5;while(index--)$instance[ADDER](index,index);return!$instance.has(-0);});if(!ACCEPT_ITERABLES){C=wrapper(function(target,iterable){anInstance(target,C,NAME);var that=inheritIfRequired(new Base(),target,C);if(iterable!=undefined)forOf(iterable,IS_MAP,that[ADDER],that);return that;});C.prototype=proto;proto.constructor=C;}
if(THROWS_ON_PRIMITIVES||BUGGY_ZERO){fixMethod('delete');fixMethod('has');IS_MAP&&fixMethod('get');}
if(BUGGY_ZERO||HASNT_CHAINING)fixMethod(ADDER);if(IS_WEAK&&proto.clear)delete proto.clear;}
setToStringTag(C,NAME);O[NAME]=C;$export($export.G+$export.W+$export.F*(C!=Base),O);if(!IS_WEAK)common.setStrong(C,NAME,IS_MAP);return C;};}),(function(module,exports,__webpack_require__){var global=__webpack_require__(11);var hide=__webpack_require__(48);var uid=__webpack_require__(93);var TYPED=uid('typed_array');var VIEW=uid('view');var ABV=!!(global.ArrayBuffer&&global.DataView);var CONSTR=ABV;var i=0;var l=9;var Typed;var TypedArrayConstructors=('Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array').split(',');while(i<l){if(Typed=global[TypedArrayConstructors[i++]]){hide(Typed.prototype,TYPED,true);hide(Typed.prototype,VIEW,true);}else CONSTR=false;}
module.exports={ABV:ABV,CONSTR:CONSTR,TYPED:TYPED,VIEW:VIEW};}),(function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(81)||!__webpack_require__(13)(function(){var K=Math.random();__defineSetter__.call(null,K,function(){});delete __webpack_require__(11)[K];});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);module.exports=function(COLLECTION){$export($export.S,COLLECTION,{of:function of(){var length=arguments.length;var A=new Array(length);while(length--)A[length]=arguments[length];return new this(A);}});};}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var aFunction=__webpack_require__(42);var ctx=__webpack_require__(58);var forOf=__webpack_require__(100);module.exports=function(COLLECTION){$export($export.S,COLLECTION,{from:function from(source){var mapFn=arguments[1];var mapping,A,n,cb;aFunction(this);mapping=mapFn!==undefined;if(mapping)aFunction(mapFn);if(source==undefined)return new this();A=[];if(mapping){n=0;cb=ctx(mapFn,arguments[2],2);forOf(source,false,function(nextItem){A.push(cb(nextItem,n++));});}else{forOf(source,false,A.push,A);}
return new this(A);}});};}),(function(module,exports,__webpack_require__){var rng=__webpack_require__(307);var bytesToUuid=__webpack_require__(308);function v4(options,buf,offset){var i=buf&&offset||0;if(typeof(options)=='string'){buf=options==='binary'?new Array(16):null;options=null;}
options=options||{};var rnds=options.random||(options.rng||rng)();rnds[6]=(rnds[6]&0x0f)|0x40;rnds[8]=(rnds[8]&0x3f)|0x80;if(buf){for(var ii=0;ii<16;++ii){buf[i+ii]=rnds[ii];}}
return buf||bytesToUuid(rnds);}
module.exports=v4;}),(function(module,exports,__webpack_require__){"use strict";(function(process){if(!process.version||process.version.indexOf('v0.')===0||process.version.indexOf('v1.')===0&&process.version.indexOf('v1.8.')!==0){module.exports={nextTick:nextTick};}else{module.exports=process}
function nextTick(fn,arg1,arg2,arg3){if(typeof fn!=='function'){throw new TypeError('"callback" argument must be a function');}
var len=arguments.length;var args,i;switch(len){case 0:case 1:return process.nextTick(fn);case 2:return process.nextTick(function afterTickOne(){fn.call(null,arg1);});case 3:return process.nextTick(function afterTickTwo(){fn.call(null,arg1,arg2);});case 4:return process.nextTick(function afterTickThree(){fn.call(null,arg1,arg2,arg3);});default:args=new Array(len-1);i=0;while(i<args.length){args[i++]=arguments[i];}
return process.nextTick(function afterTick(){fn.apply(null,args);});}}}.call(exports,__webpack_require__(20)))}),(function(module,exports,__webpack_require__){(function(global){var scope=(typeof global!=="undefined"&&global)||(typeof self!=="undefined"&&self)||window;var apply=Function.prototype.apply;exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,scope,arguments),clearTimeout);};exports.setInterval=function(){return new Timeout(apply.call(setInterval,scope,arguments),clearInterval);};exports.clearTimeout=exports.clearInterval=function(timeout){if(timeout){timeout.close();}};function Timeout(id,clearFn){this._id=id;this._clearFn=clearFn;}
Timeout.prototype.unref=Timeout.prototype.ref=function(){};Timeout.prototype.close=function(){this._clearFn.call(scope,this._id);};exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId);item._idleTimeout=msecs;};exports.unenroll=function(item){clearTimeout(item._idleTimeoutId);item._idleTimeout=-1;};exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;if(msecs>=0){item._idleTimeoutId=setTimeout(function onTimeout(){if(item._onTimeout)
item._onTimeout();},msecs);}};__webpack_require__(652);exports.setImmediate=(typeof self!=="undefined"&&self.setImmediate)||(typeof global!=="undefined"&&global.setImmediate)||(this&&this.setImmediate);exports.clearImmediate=(typeof self!=="undefined"&&self.clearImmediate)||(typeof global!=="undefined"&&global.clearImmediate)||(this&&this.clearImmediate);}.call(exports,__webpack_require__(10)))}),(function(module,exports,__webpack_require__){"use strict";var inherits=__webpack_require__(7)
var Legacy=__webpack_require__(663)
var Base=__webpack_require__(85)
var Buffer=__webpack_require__(4).Buffer
var md5=__webpack_require__(318)
var RIPEMD160=__webpack_require__(211)
var sha=__webpack_require__(212)
var ZEROS=Buffer.alloc(128)
function Hmac(alg,key){Base.call(this,'digest')
if(typeof key==='string'){key=Buffer.from(key)}
var blocksize=(alg==='sha512'||alg==='sha384')?128:64
this._alg=alg
this._key=key
if(key.length>blocksize){var hash=alg==='rmd160'?new RIPEMD160():sha(alg)
key=hash.update(key).digest()}else if(key.length<blocksize){key=Buffer.concat([key,ZEROS],blocksize)}
var ipad=this._ipad=Buffer.allocUnsafe(blocksize)
var opad=this._opad=Buffer.allocUnsafe(blocksize)
for(var i=0;i<blocksize;i++){ipad[i]=key[i]^0x36
opad[i]=key[i]^0x5C}
this._hash=alg==='rmd160'?new RIPEMD160():sha(alg)
this._hash.update(ipad)}
inherits(Hmac,Base)
Hmac.prototype._update=function(data){this._hash.update(data)}
Hmac.prototype._final=function(){var h=this._hash.digest()
var hash=this._alg==='rmd160'?new RIPEMD160():sha(this._alg)
return hash.update(this._opad).update(h).digest()}
module.exports=function createHmac(alg,key){alg=alg.toLowerCase()
if(alg==='rmd160'||alg==='ripemd160'){return new Hmac('rmd160',key)}
if(alg==='md5'){return new Legacy(md5,key)}
return new Hmac(alg,key)}}),(function(module,exports,__webpack_require__){var Buffer=__webpack_require__(4).Buffer
function asUInt32Array(buf){if(!Buffer.isBuffer(buf))buf=Buffer.from(buf)
var len=(buf.length/4)|0
var out=new Array(len)
for(var i=0;i<len;i++){out[i]=buf.readUInt32BE(i*4)}
return out}
function scrubVec(v){for(var i=0;i<v.length;v++){v[i]=0}}
function cryptBlock(M,keySchedule,SUB_MIX,SBOX,nRounds){var SUB_MIX0=SUB_MIX[0]
var SUB_MIX1=SUB_MIX[1]
var SUB_MIX2=SUB_MIX[2]
var SUB_MIX3=SUB_MIX[3]
var s0=M[0]^keySchedule[0]
var s1=M[1]^keySchedule[1]
var s2=M[2]^keySchedule[2]
var s3=M[3]^keySchedule[3]
var t0,t1,t2,t3
var ksRow=4
for(var round=1;round<nRounds;round++){t0=SUB_MIX0[s0>>>24]^SUB_MIX1[(s1>>>16)&0xff]^SUB_MIX2[(s2>>>8)&0xff]^SUB_MIX3[s3&0xff]^keySchedule[ksRow++]
t1=SUB_MIX0[s1>>>24]^SUB_MIX1[(s2>>>16)&0xff]^SUB_MIX2[(s3>>>8)&0xff]^SUB_MIX3[s0&0xff]^keySchedule[ksRow++]
t2=SUB_MIX0[s2>>>24]^SUB_MIX1[(s3>>>16)&0xff]^SUB_MIX2[(s0>>>8)&0xff]^SUB_MIX3[s1&0xff]^keySchedule[ksRow++]
t3=SUB_MIX0[s3>>>24]^SUB_MIX1[(s0>>>16)&0xff]^SUB_MIX2[(s1>>>8)&0xff]^SUB_MIX3[s2&0xff]^keySchedule[ksRow++]
s0=t0
s1=t1
s2=t2
s3=t3}
t0=((SBOX[s0>>>24]<<24)|(SBOX[(s1>>>16)&0xff]<<16)|(SBOX[(s2>>>8)&0xff]<<8)|SBOX[s3&0xff])^keySchedule[ksRow++]
t1=((SBOX[s1>>>24]<<24)|(SBOX[(s2>>>16)&0xff]<<16)|(SBOX[(s3>>>8)&0xff]<<8)|SBOX[s0&0xff])^keySchedule[ksRow++]
t2=((SBOX[s2>>>24]<<24)|(SBOX[(s3>>>16)&0xff]<<16)|(SBOX[(s0>>>8)&0xff]<<8)|SBOX[s1&0xff])^keySchedule[ksRow++]
t3=((SBOX[s3>>>24]<<24)|(SBOX[(s0>>>16)&0xff]<<16)|(SBOX[(s1>>>8)&0xff]<<8)|SBOX[s2&0xff])^keySchedule[ksRow++]
t0=t0>>>0
t1=t1>>>0
t2=t2>>>0
t3=t3>>>0
return[t0,t1,t2,t3]}
var RCON=[0x00,0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80,0x1b,0x36]
var G=(function(){var d=new Array(256)
for(var j=0;j<256;j++){if(j<128){d[j]=j<<1}else{d[j]=(j<<1)^0x11b}}
var SBOX=[]
var INV_SBOX=[]
var SUB_MIX=[[],[],[],[]]
var INV_SUB_MIX=[[],[],[],[]]
var x=0
var xi=0
for(var i=0;i<256;++i){var sx=xi^(xi<<1)^(xi<<2)^(xi<<3)^(xi<<4)
sx=(sx>>>8)^(sx&0xff)^0x63
SBOX[x]=sx
INV_SBOX[sx]=x
var x2=d[x]
var x4=d[x2]
var x8=d[x4]
var t=(d[sx]*0x101)^(sx*0x1010100)
SUB_MIX[0][x]=(t<<24)|(t>>>8)
SUB_MIX[1][x]=(t<<16)|(t>>>16)
SUB_MIX[2][x]=(t<<8)|(t>>>24)
SUB_MIX[3][x]=t
t=(x8*0x1010101)^(x4*0x10001)^(x2*0x101)^(x*0x1010100)
INV_SUB_MIX[0][sx]=(t<<24)|(t>>>8)
INV_SUB_MIX[1][sx]=(t<<16)|(t>>>16)
INV_SUB_MIX[2][sx]=(t<<8)|(t>>>24)
INV_SUB_MIX[3][sx]=t
if(x===0){x=xi=1}else{x=x2^d[d[d[x8^x2]]]
xi^=d[d[xi]]}}
return{SBOX:SBOX,INV_SBOX:INV_SBOX,SUB_MIX:SUB_MIX,INV_SUB_MIX:INV_SUB_MIX}})()
function AES(key){this._key=asUInt32Array(key)
this._reset()}
AES.blockSize=4*4
AES.keySize=256/8
AES.prototype.blockSize=AES.blockSize
AES.prototype.keySize=AES.keySize
AES.prototype._reset=function(){var keyWords=this._key
var keySize=keyWords.length
var nRounds=keySize+6
var ksRows=(nRounds+1)*4
var keySchedule=[]
for(var k=0;k<keySize;k++){keySchedule[k]=keyWords[k]}
for(k=keySize;k<ksRows;k++){var t=keySchedule[k-1]
if(k%keySize===0){t=(t<<8)|(t>>>24)
t=(G.SBOX[t>>>24]<<24)|(G.SBOX[(t>>>16)&0xff]<<16)|(G.SBOX[(t>>>8)&0xff]<<8)|(G.SBOX[t&0xff])
t^=RCON[(k/keySize)|0]<<24}else if(keySize>6&&k%keySize===4){t=(G.SBOX[t>>>24]<<24)|(G.SBOX[(t>>>16)&0xff]<<16)|(G.SBOX[(t>>>8)&0xff]<<8)|(G.SBOX[t&0xff])}
keySchedule[k]=keySchedule[k-keySize]^t}
var invKeySchedule=[]
for(var ik=0;ik<ksRows;ik++){var ksR=ksRows-ik
var tt=keySchedule[ksR-(ik%4?0:4)]
if(ik<4||ksR<=4){invKeySchedule[ik]=tt}else{invKeySchedule[ik]=G.INV_SUB_MIX[0][G.SBOX[tt>>>24]]^G.INV_SUB_MIX[1][G.SBOX[(tt>>>16)&0xff]]^G.INV_SUB_MIX[2][G.SBOX[(tt>>>8)&0xff]]^G.INV_SUB_MIX[3][G.SBOX[tt&0xff]]}}
this._nRounds=nRounds
this._keySchedule=keySchedule
this._invKeySchedule=invKeySchedule}
AES.prototype.encryptBlockRaw=function(M){M=asUInt32Array(M)
return cryptBlock(M,this._keySchedule,G.SUB_MIX,G.SBOX,this._nRounds)}
AES.prototype.encryptBlock=function(M){var out=this.encryptBlockRaw(M)
var buf=Buffer.allocUnsafe(16)
buf.writeUInt32BE(out[0],0)
buf.writeUInt32BE(out[1],4)
buf.writeUInt32BE(out[2],8)
buf.writeUInt32BE(out[3],12)
return buf}
AES.prototype.decryptBlock=function(M){M=asUInt32Array(M)
var m1=M[1]
M[1]=M[3]
M[3]=m1
var out=cryptBlock(M,this._invKeySchedule,G.INV_SUB_MIX,G.INV_SBOX,this._nRounds)
var buf=Buffer.allocUnsafe(16)
buf.writeUInt32BE(out[0],0)
buf.writeUInt32BE(out[3],4)
buf.writeUInt32BE(out[2],8)
buf.writeUInt32BE(out[1],12)
return buf}
AES.prototype.scrub=function(){scrubVec(this._keySchedule)
scrubVec(this._invKeySchedule)
scrubVec(this._key)}
module.exports.AES=AES}),(function(module,exports,__webpack_require__){var Buffer=__webpack_require__(4).Buffer
var MD5=__webpack_require__(208)
function EVP_BytesToKey(password,salt,keyBits,ivLen){if(!Buffer.isBuffer(password))password=Buffer.from(password,'binary')
if(salt){if(!Buffer.isBuffer(salt))salt=Buffer.from(salt,'binary')
if(salt.length!==8)throw new RangeError('salt should be Buffer with 8 byte length')}
var keyLen=keyBits/8
var key=Buffer.alloc(keyLen)
var iv=Buffer.alloc(ivLen||0)
var tmp=Buffer.alloc(0)
while(keyLen>0||ivLen>0){var hash=new MD5()
hash.update(tmp)
hash.update(password)
if(salt)hash.update(salt)
tmp=hash.digest()
var used=0
if(keyLen>0){var keyStart=key.length-keyLen
used=Math.min(keyLen,tmp.length)
tmp.copy(key,keyStart,0,used)
keyLen-=used}
if(used<tmp.length&&ivLen>0){var ivStart=iv.length-ivLen
var length=Math.min(ivLen,tmp.length-used)
tmp.copy(iv,ivStart,used,used+length)
ivLen-=length}}
tmp.fill(0)
return{key:key,iv:iv}}
module.exports=EVP_BytesToKey}),(function(module,exports,__webpack_require__){"use strict";var curve=exports;curve.base=__webpack_require__(692);curve.short=__webpack_require__(693);curve.mont=__webpack_require__(694);curve.edwards=__webpack_require__(695);}),(function(module,exports,__webpack_require__){(function(Buffer){var asn1=__webpack_require__(711)
var aesid=__webpack_require__(722)
var fixProc=__webpack_require__(723)
var ciphers=__webpack_require__(214)
var compat=__webpack_require__(320)
module.exports=parseKeys
function parseKeys(buffer){var password
if(typeof buffer==='object'&&!Buffer.isBuffer(buffer)){password=buffer.passphrase
buffer=buffer.key}
if(typeof buffer==='string'){buffer=new Buffer(buffer)}
var stripped=fixProc(buffer,password)
var type=stripped.tag
var data=stripped.data
var subtype,ndata
switch(type){case 'CERTIFICATE':ndata=asn1.certificate.decode(data,'der').tbsCertificate.subjectPublicKeyInfo
case 'PUBLIC KEY':if(!ndata){ndata=asn1.PublicKey.decode(data,'der')}
subtype=ndata.algorithm.algorithm.join('.')
switch(subtype){case '1.2.840.113549.1.1.1':return asn1.RSAPublicKey.decode(ndata.subjectPublicKey.data,'der')
case '1.2.840.10045.2.1':ndata.subjectPrivateKey=ndata.subjectPublicKey
return{type:'ec',data:ndata}
case '1.2.840.10040.4.1':ndata.algorithm.params.pub_key=asn1.DSAparam.decode(ndata.subjectPublicKey.data,'der')
return{type:'dsa',data:ndata.algorithm.params}
default:throw new Error('unknown key id '+subtype)}
throw new Error('unknown key type '+type)
case 'ENCRYPTED PRIVATE KEY':data=asn1.EncryptedPrivateKey.decode(data,'der')
data=decrypt(data,password)
case 'PRIVATE KEY':ndata=asn1.PrivateKey.decode(data,'der')
subtype=ndata.algorithm.algorithm.join('.')
switch(subtype){case '1.2.840.113549.1.1.1':return asn1.RSAPrivateKey.decode(ndata.subjectPrivateKey,'der')
case '1.2.840.10045.2.1':return{curve:ndata.algorithm.curve,privateKey:asn1.ECPrivateKey.decode(ndata.subjectPrivateKey,'der').privateKey}
case '1.2.840.10040.4.1':ndata.algorithm.params.priv_key=asn1.DSAparam.decode(ndata.subjectPrivateKey,'der')
return{type:'dsa',params:ndata.algorithm.params}
default:throw new Error('unknown key id '+subtype)}
throw new Error('unknown key type '+type)
case 'RSA PUBLIC KEY':return asn1.RSAPublicKey.decode(data,'der')
case 'RSA PRIVATE KEY':return asn1.RSAPrivateKey.decode(data,'der')
case 'DSA PRIVATE KEY':return{type:'dsa',params:asn1.DSAPrivateKey.decode(data,'der')}
case 'EC PRIVATE KEY':data=asn1.ECPrivateKey.decode(data,'der')
return{curve:data.parameters.value,privateKey:data.privateKey}
default:throw new Error('unknown key type '+type)}}
parseKeys.signature=asn1.signature
function decrypt(data,password){var salt=data.algorithm.decrypt.kde.kdeparams.salt
var iters=parseInt(data.algorithm.decrypt.kde.kdeparams.iters.toString(),10)
var algo=aesid[data.algorithm.decrypt.cipher.algo.join('.')]
var iv=data.algorithm.decrypt.cipher.iv
var cipherText=data.subjectPrivateKey
var keylen=parseInt(algo.split('-')[1],10)/8
var key=compat.pbkdf2Sync(password,salt,iters,keylen)
var cipher=ciphers.createDecipheriv(algo,key,iv)
var out=[]
out.push(cipher.update(cipherText))
out.push(cipher.final())
return Buffer.concat(out)}}.call(exports,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){"use strict";exports.decode=exports.parse=__webpack_require__(799);exports.encode=exports.stringify=__webpack_require__(800);}),(function(module,exports,__webpack_require__){"use strict";var TYPED_OK=(typeof Uint8Array!=='undefined')&&(typeof Uint16Array!=='undefined')&&(typeof Int32Array!=='undefined');function _has(obj,key){return Object.prototype.hasOwnProperty.call(obj,key);}
exports.assign=function(obj){var sources=Array.prototype.slice.call(arguments,1);while(sources.length){var source=sources.shift();if(!source){continue;}
if(typeof source!=='object'){throw new TypeError(source+'must be non-object');}
for(var p in source){if(_has(source,p)){obj[p]=source[p];}}}
return obj;};exports.shrinkBuf=function(buf,size){if(buf.length===size){return buf;}
if(buf.subarray){return buf.subarray(0,size);}
buf.length=size;return buf;};var fnTyped={arraySet:function(dest,src,src_offs,len,dest_offs){if(src.subarray&&dest.subarray){dest.set(src.subarray(src_offs,src_offs+len),dest_offs);return;}
for(var i=0;i<len;i++){dest[dest_offs+i]=src[src_offs+i];}},flattenChunks:function(chunks){var i,l,len,pos,chunk,result;len=0;for(i=0,l=chunks.length;i<l;i++){len+=chunks[i].length;}
result=new Uint8Array(len);pos=0;for(i=0,l=chunks.length;i<l;i++){chunk=chunks[i];result.set(chunk,pos);pos+=chunk.length;}
return result;}};var fnUntyped={arraySet:function(dest,src,src_offs,len,dest_offs){for(var i=0;i<len;i++){dest[dest_offs+i]=src[src_offs+i];}},flattenChunks:function(chunks){return[].concat.apply([],chunks);}};exports.setTyped=function(on){if(on){exports.Buf8=Uint8Array;exports.Buf16=Uint16Array;exports.Buf32=Int32Array;exports.assign(exports,fnTyped);}else{exports.Buf8=Array;exports.Buf16=Array;exports.Buf32=Array;exports.assign(exports,fnUntyped);}};exports.setTyped(TYPED_OK);}),(function(module,exports,__webpack_require__){var assert=__webpack_require__(15);var sshpk=__webpack_require__(239);var util=__webpack_require__(25);var HASH_ALGOS={'sha1':true,'sha256':true,'sha512':true};var PK_ALGOS={'rsa':true,'dsa':true,'ecdsa':true};function HttpSignatureError(message,caller){if(Error.captureStackTrace)
Error.captureStackTrace(this,caller||HttpSignatureError);this.message=message;this.name=caller.name;}
util.inherits(HttpSignatureError,Error);function InvalidAlgorithmError(message){HttpSignatureError.call(this,message,InvalidAlgorithmError);}
util.inherits(InvalidAlgorithmError,HttpSignatureError);function validateAlgorithm(algorithm){var alg=algorithm.toLowerCase().split('-');if(alg.length!==2){throw(new InvalidAlgorithmError(alg[0].toUpperCase()+' is not a '+
'valid algorithm'));}
if(alg[0]!=='hmac'&&!PK_ALGOS[alg[0]]){throw(new InvalidAlgorithmError(alg[0].toUpperCase()+' type keys '+
'are not supported'));}
if(!HASH_ALGOS[alg[1]]){throw(new InvalidAlgorithmError(alg[1].toUpperCase()+' is not a '+
'supported hash algorithm'));}
return(alg);}
module.exports={HASH_ALGOS:HASH_ALGOS,PK_ALGOS:PK_ALGOS,HttpSignatureError:HttpSignatureError,InvalidAlgorithmError:InvalidAlgorithmError,validateAlgorithm:validateAlgorithm,sshKeyToPEM:function sshKeyToPEM(key){assert.string(key,'ssh_key');var k=sshpk.parseKey(key,'ssh');return(k.toString('pem'));},fingerprint:function fingerprint(key){assert.string(key,'ssh_key');var k=sshpk.parseKey(key,'ssh');return(k.fingerprint('md5').toString('hex'));},pemToRsaSSHKey:function pemToRsaSSHKey(pem,comment){assert.equal('string',typeof(pem),'typeof pem');var k=sshpk.parseKey(pem,'pem');k.comment=comment;return(k.toString('ssh'));}};}),(function(module,exports,__webpack_require__){var BigInteger=__webpack_require__(135).BigInteger
var Barrett=BigInteger.prototype.Barrett
function ECFieldElementFp(q,x){this.x=x;this.q=q;}
function feFpEquals(other){if(other==this)return true;return(this.q.equals(other.q)&&this.x.equals(other.x));}
function feFpToBigInteger(){return this.x;}
function feFpNegate(){return new ECFieldElementFp(this.q,this.x.negate().mod(this.q));}
function feFpAdd(b){return new ECFieldElementFp(this.q,this.x.add(b.toBigInteger()).mod(this.q));}
function feFpSubtract(b){return new ECFieldElementFp(this.q,this.x.subtract(b.toBigInteger()).mod(this.q));}
function feFpMultiply(b){return new ECFieldElementFp(this.q,this.x.multiply(b.toBigInteger()).mod(this.q));}
function feFpSquare(){return new ECFieldElementFp(this.q,this.x.square().mod(this.q));}
function feFpDivide(b){return new ECFieldElementFp(this.q,this.x.multiply(b.toBigInteger().modInverse(this.q)).mod(this.q));}
ECFieldElementFp.prototype.equals=feFpEquals;ECFieldElementFp.prototype.toBigInteger=feFpToBigInteger;ECFieldElementFp.prototype.negate=feFpNegate;ECFieldElementFp.prototype.add=feFpAdd;ECFieldElementFp.prototype.subtract=feFpSubtract;ECFieldElementFp.prototype.multiply=feFpMultiply;ECFieldElementFp.prototype.square=feFpSquare;ECFieldElementFp.prototype.divide=feFpDivide;function ECPointFp(curve,x,y,z){this.curve=curve;this.x=x;this.y=y;if(z==null){this.z=BigInteger.ONE;}
else{this.z=z;}
this.zinv=null;}
function pointFpGetX(){if(this.zinv==null){this.zinv=this.z.modInverse(this.curve.q);}
var r=this.x.toBigInteger().multiply(this.zinv);this.curve.reduce(r);return this.curve.fromBigInteger(r);}
function pointFpGetY(){if(this.zinv==null){this.zinv=this.z.modInverse(this.curve.q);}
var r=this.y.toBigInteger().multiply(this.zinv);this.curve.reduce(r);return this.curve.fromBigInteger(r);}
function pointFpEquals(other){if(other==this)return true;if(this.isInfinity())return other.isInfinity();if(other.isInfinity())return this.isInfinity();var u,v;u=other.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(other.z)).mod(this.curve.q);if(!u.equals(BigInteger.ZERO))return false;v=other.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(other.z)).mod(this.curve.q);return v.equals(BigInteger.ZERO);}
function pointFpIsInfinity(){if((this.x==null)&&(this.y==null))return true;return this.z.equals(BigInteger.ZERO)&&!this.y.toBigInteger().equals(BigInteger.ZERO);}
function pointFpNegate(){return new ECPointFp(this.curve,this.x,this.y.negate(),this.z);}
function pointFpAdd(b){if(this.isInfinity())return b;if(b.isInfinity())return this;var u=b.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(b.z)).mod(this.curve.q);var v=b.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(b.z)).mod(this.curve.q);if(BigInteger.ZERO.equals(v)){if(BigInteger.ZERO.equals(u)){return this.twice();}
return this.curve.getInfinity();}
var THREE=new BigInteger("3");var x1=this.x.toBigInteger();var y1=this.y.toBigInteger();var x2=b.x.toBigInteger();var y2=b.y.toBigInteger();var v2=v.square();var v3=v2.multiply(v);var x1v2=x1.multiply(v2);var zu2=u.square().multiply(this.z);var x3=zu2.subtract(x1v2.shiftLeft(1)).multiply(b.z).subtract(v3).multiply(v).mod(this.curve.q);var y3=x1v2.multiply(THREE).multiply(u).subtract(y1.multiply(v3)).subtract(zu2.multiply(u)).multiply(b.z).add(u.multiply(v3)).mod(this.curve.q);var z3=v3.multiply(this.z).multiply(b.z).mod(this.curve.q);return new ECPointFp(this.curve,this.curve.fromBigInteger(x3),this.curve.fromBigInteger(y3),z3);}
function pointFpTwice(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var THREE=new BigInteger("3");var x1=this.x.toBigInteger();var y1=this.y.toBigInteger();var y1z1=y1.multiply(this.z);var y1sqz1=y1z1.multiply(y1).mod(this.curve.q);var a=this.curve.a.toBigInteger();var w=x1.square().multiply(THREE);if(!BigInteger.ZERO.equals(a)){w=w.add(this.z.square().multiply(a));}
w=w.mod(this.curve.q);var x3=w.square().subtract(x1.shiftLeft(3).multiply(y1sqz1)).shiftLeft(1).multiply(y1z1).mod(this.curve.q);var y3=w.multiply(THREE).multiply(x1).subtract(y1sqz1.shiftLeft(1)).shiftLeft(2).multiply(y1sqz1).subtract(w.square().multiply(w)).mod(this.curve.q);var z3=y1z1.square().multiply(y1z1).shiftLeft(3).mod(this.curve.q);return new ECPointFp(this.curve,this.curve.fromBigInteger(x3),this.curve.fromBigInteger(y3),z3);}
function pointFpMultiply(k){if(this.isInfinity())return this;if(k.signum()==0)return this.curve.getInfinity();var e=k;var h=e.multiply(new BigInteger("3"));var neg=this.negate();var R=this;var i;for(i=h.bitLength()-2;i>0;--i){R=R.twice();var hBit=h.testBit(i);var eBit=e.testBit(i);if(hBit!=eBit){R=R.add(hBit?this:neg);}}
return R;}
function pointFpMultiplyTwo(j,x,k){var i;if(j.bitLength()>k.bitLength())
i=j.bitLength()-1;else
i=k.bitLength()-1;var R=this.curve.getInfinity();var both=this.add(x);while(i>=0){R=R.twice();if(j.testBit(i)){if(k.testBit(i)){R=R.add(both);}
else{R=R.add(this);}}
else{if(k.testBit(i)){R=R.add(x);}}
--i;}
return R;}
ECPointFp.prototype.getX=pointFpGetX;ECPointFp.prototype.getY=pointFpGetY;ECPointFp.prototype.equals=pointFpEquals;ECPointFp.prototype.isInfinity=pointFpIsInfinity;ECPointFp.prototype.negate=pointFpNegate;ECPointFp.prototype.add=pointFpAdd;ECPointFp.prototype.twice=pointFpTwice;ECPointFp.prototype.multiply=pointFpMultiply;ECPointFp.prototype.multiplyTwo=pointFpMultiplyTwo;function ECCurveFp(q,a,b){this.q=q;this.a=this.fromBigInteger(a);this.b=this.fromBigInteger(b);this.infinity=new ECPointFp(this,null,null);this.reducer=new Barrett(this.q);}
function curveFpGetQ(){return this.q;}
function curveFpGetA(){return this.a;}
function curveFpGetB(){return this.b;}
function curveFpEquals(other){if(other==this)return true;return(this.q.equals(other.q)&&this.a.equals(other.a)&&this.b.equals(other.b));}
function curveFpGetInfinity(){return this.infinity;}
function curveFpFromBigInteger(x){return new ECFieldElementFp(this.q,x);}
function curveReduce(x){this.reducer.reduce(x);}
function curveFpDecodePointHex(s){switch(parseInt(s.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var len=(s.length-2)/2;var xHex=s.substr(2,len);var yHex=s.substr(len+2,len);return new ECPointFp(this,this.fromBigInteger(new BigInteger(xHex,16)),this.fromBigInteger(new BigInteger(yHex,16)));default:return null;}}
function curveFpEncodePointHex(p){if(p.isInfinity())return "00";var xHex=p.getX().toBigInteger().toString(16);var yHex=p.getY().toBigInteger().toString(16);var oLen=this.getQ().toString(16).length;if((oLen%2)!=0)oLen++;while(xHex.length<oLen){xHex="0"+xHex;}
while(yHex.length<oLen){yHex="0"+yHex;}
return "04"+xHex+yHex;}
ECCurveFp.prototype.getQ=curveFpGetQ;ECCurveFp.prototype.getA=curveFpGetA;ECCurveFp.prototype.getB=curveFpGetB;ECCurveFp.prototype.equals=curveFpEquals;ECCurveFp.prototype.getInfinity=curveFpGetInfinity;ECCurveFp.prototype.fromBigInteger=curveFpFromBigInteger;ECCurveFp.prototype.reduce=curveReduce;ECCurveFp.prototype.encodePointHex=curveFpEncodePointHex;ECCurveFp.prototype.decodePointHex=function(s)
{var yIsEven;switch(parseInt(s.substr(0,2),16)){case 0:return this.infinity;case 2:yIsEven=false;case 3:if(yIsEven==undefined)yIsEven=true;var len=s.length-2;var xHex=s.substr(2,len);var x=this.fromBigInteger(new BigInteger(xHex,16));var alpha=x.multiply(x.square().add(this.getA())).add(this.getB());var beta=alpha.sqrt();if(beta==null)throw "Invalid point compression";var betaValue=beta.toBigInteger();if(betaValue.testBit(0)!=yIsEven)
{beta=this.fromBigInteger(this.getQ().subtract(betaValue));}
return new ECPointFp(this,x,beta);case 4:case 6:case 7:var len=(s.length-2)/2;var xHex=s.substr(2,len);var yHex=s.substr(len+2,len);return new ECPointFp(this,this.fromBigInteger(new BigInteger(xHex,16)),this.fromBigInteger(new BigInteger(yHex,16)));default:return null;}}
ECCurveFp.prototype.encodeCompressedPointHex=function(p)
{if(p.isInfinity())return "00";var xHex=p.getX().toBigInteger().toString(16);var oLen=this.getQ().toString(16).length;if((oLen%2)!=0)oLen++;while(xHex.length<oLen)
xHex="0"+xHex;var yPrefix;if(p.getY().toBigInteger().isEven())yPrefix="02";else yPrefix="03";return yPrefix+xHex;}
ECFieldElementFp.prototype.getR=function()
{if(this.r!=undefined)return this.r;this.r=null;var bitLength=this.q.bitLength();if(bitLength>128)
{var firstWord=this.q.shiftRight(bitLength-64);if(firstWord.intValue()==-1)
{this.r=BigInteger.ONE.shiftLeft(bitLength).subtract(this.q);}}
return this.r;}
ECFieldElementFp.prototype.modMult=function(x1,x2)
{return this.modReduce(x1.multiply(x2));}
ECFieldElementFp.prototype.modReduce=function(x)
{if(this.getR()!=null)
{var qLen=q.bitLength();while(x.bitLength()>(qLen+1))
{var u=x.shiftRight(qLen);var v=x.subtract(u.shiftLeft(qLen));if(!this.getR().equals(BigInteger.ONE))
{u=u.multiply(this.getR());}
x=u.add(v);}
while(x.compareTo(q)>=0)
{x=x.subtract(q);}}
else
{x=x.mod(q);}
return x;}
ECFieldElementFp.prototype.sqrt=function()
{if(!this.q.testBit(0))throw "unsupported";if(this.q.testBit(1))
{var z=new ECFieldElementFp(this.q,this.x.modPow(this.q.shiftRight(2).add(BigInteger.ONE),this.q));return z.square().equals(this)?z:null;}
var qMinusOne=this.q.subtract(BigInteger.ONE);var legendreExponent=qMinusOne.shiftRight(1);if(!(this.x.modPow(legendreExponent,this.q).equals(BigInteger.ONE)))
{return null;}
var u=qMinusOne.shiftRight(2);var k=u.shiftLeft(1).add(BigInteger.ONE);var Q=this.x;var fourQ=modDouble(modDouble(Q));var U,V;do
{var P;do
{P=new BigInteger(this.q.bitLength(),new SecureRandom());}
while(P.compareTo(this.q)>=0||!(P.multiply(P).subtract(fourQ).modPow(legendreExponent,this.q).equals(qMinusOne)));var result=this.lucasSequence(P,Q,k);U=result[0];V=result[1];if(this.modMult(V,V).equals(fourQ))
{if(V.testBit(0))
{V=V.add(q);}
V=V.shiftRight(1);return new ECFieldElementFp(q,V);}}
while(U.equals(BigInteger.ONE)||U.equals(qMinusOne));return null;}
ECFieldElementFp.prototype.lucasSequence=function(P,Q,k)
{var n=k.bitLength();var s=k.getLowestSetBit();var Uh=BigInteger.ONE;var Vl=BigInteger.TWO;var Vh=P;var Ql=BigInteger.ONE;var Qh=BigInteger.ONE;for(var j=n-1;j>=s+1;--j)
{Ql=this.modMult(Ql,Qh);if(k.testBit(j))
{Qh=this.modMult(Ql,Q);Uh=this.modMult(Uh,Vh);Vl=this.modReduce(Vh.multiply(Vl).subtract(P.multiply(Ql)));Vh=this.modReduce(Vh.multiply(Vh).subtract(Qh.shiftLeft(1)));}
else
{Qh=Ql;Uh=this.modReduce(Uh.multiply(Vl).subtract(Ql));Vh=this.modReduce(Vh.multiply(Vl).subtract(P.multiply(Ql)));Vl=this.modReduce(Vl.multiply(Vl).subtract(Ql.shiftLeft(1)));}}
Ql=this.modMult(Ql,Qh);Qh=this.modMult(Ql,Q);Uh=this.modReduce(Uh.multiply(Vl).subtract(Ql));Vl=this.modReduce(Vh.multiply(Vl).subtract(P.multiply(Ql)));Ql=this.modMult(Ql,Qh);for(var j=1;j<=s;++j)
{Uh=this.modMult(Uh,Vl);Vl=this.modReduce(Vl.multiply(Vl).subtract(Ql.shiftLeft(1)));Ql=this.modMult(Ql,Ql);}
return[Uh,Vl];}
var exports={ECCurveFp:ECCurveFp,ECPointFp:ECPointFp,ECFieldElementFp:ECFieldElementFp}
module.exports=exports}),(function(module,exports,__webpack_require__){(function(nacl){'use strict';var gf=function(init){var i,r=new Float64Array(16);if(init)for(i=0;i<init.length;i++)r[i]=init[i];return r;};var randombytes=function(){throw new Error('no PRNG');};var _0=new Uint8Array(16);var _9=new Uint8Array(32);_9[0]=9;var gf0=gf(),gf1=gf([1]),_121665=gf([0xdb41,1]),D=gf([0x78a3,0x1359,0x4dca,0x75eb,0xd8ab,0x4141,0x0a4d,0x0070,0xe898,0x7779,0x4079,0x8cc7,0xfe73,0x2b6f,0x6cee,0x5203]),D2=gf([0xf159,0x26b2,0x9b94,0xebd6,0xb156,0x8283,0x149a,0x00e0,0xd130,0xeef3,0x80f2,0x198e,0xfce7,0x56df,0xd9dc,0x2406]),X=gf([0xd51a,0x8f25,0x2d60,0xc956,0xa7b2,0x9525,0xc760,0x692c,0xdc5c,0xfdd6,0xe231,0xc0a4,0x53fe,0xcd6e,0x36d3,0x2169]),Y=gf([0x6658,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666]),I=gf([0xa0b0,0x4a0e,0x1b27,0xc4ee,0xe478,0xad2f,0x1806,0x2f43,0xd7a7,0x3dfb,0x0099,0x2b4d,0xdf0b,0x4fc1,0x2480,0x2b83]);function ts64(x,i,h,l){x[i]=(h>>24)&0xff;x[i+1]=(h>>16)&0xff;x[i+2]=(h>>8)&0xff;x[i+3]=h&0xff;x[i+4]=(l>>24)&0xff;x[i+5]=(l>>16)&0xff;x[i+6]=(l>>8)&0xff;x[i+7]=l&0xff;}
function vn(x,xi,y,yi,n){var i,d=0;for(i=0;i<n;i++)d|=x[xi+i]^y[yi+i];return(1&((d-1)>>>8))-1;}
function crypto_verify_16(x,xi,y,yi){return vn(x,xi,y,yi,16);}
function crypto_verify_32(x,xi,y,yi){return vn(x,xi,y,yi,32);}
function core_salsa20(o,p,k,c){var j0=c[0]&0xff|(c[1]&0xff)<<8|(c[2]&0xff)<<16|(c[3]&0xff)<<24,j1=k[0]&0xff|(k[1]&0xff)<<8|(k[2]&0xff)<<16|(k[3]&0xff)<<24,j2=k[4]&0xff|(k[5]&0xff)<<8|(k[6]&0xff)<<16|(k[7]&0xff)<<24,j3=k[8]&0xff|(k[9]&0xff)<<8|(k[10]&0xff)<<16|(k[11]&0xff)<<24,j4=k[12]&0xff|(k[13]&0xff)<<8|(k[14]&0xff)<<16|(k[15]&0xff)<<24,j5=c[4]&0xff|(c[5]&0xff)<<8|(c[6]&0xff)<<16|(c[7]&0xff)<<24,j6=p[0]&0xff|(p[1]&0xff)<<8|(p[2]&0xff)<<16|(p[3]&0xff)<<24,j7=p[4]&0xff|(p[5]&0xff)<<8|(p[6]&0xff)<<16|(p[7]&0xff)<<24,j8=p[8]&0xff|(p[9]&0xff)<<8|(p[10]&0xff)<<16|(p[11]&0xff)<<24,j9=p[12]&0xff|(p[13]&0xff)<<8|(p[14]&0xff)<<16|(p[15]&0xff)<<24,j10=c[8]&0xff|(c[9]&0xff)<<8|(c[10]&0xff)<<16|(c[11]&0xff)<<24,j11=k[16]&0xff|(k[17]&0xff)<<8|(k[18]&0xff)<<16|(k[19]&0xff)<<24,j12=k[20]&0xff|(k[21]&0xff)<<8|(k[22]&0xff)<<16|(k[23]&0xff)<<24,j13=k[24]&0xff|(k[25]&0xff)<<8|(k[26]&0xff)<<16|(k[27]&0xff)<<24,j14=k[28]&0xff|(k[29]&0xff)<<8|(k[30]&0xff)<<16|(k[31]&0xff)<<24,j15=c[12]&0xff|(c[13]&0xff)<<8|(c[14]&0xff)<<16|(c[15]&0xff)<<24;var x0=j0,x1=j1,x2=j2,x3=j3,x4=j4,x5=j5,x6=j6,x7=j7,x8=j8,x9=j9,x10=j10,x11=j11,x12=j12,x13=j13,x14=j14,x15=j15,u;for(var i=0;i<20;i+=2){u=x0+x12|0;x4^=u<<7|u>>>(32-7);u=x4+x0|0;x8^=u<<9|u>>>(32-9);u=x8+x4|0;x12^=u<<13|u>>>(32-13);u=x12+x8|0;x0^=u<<18|u>>>(32-18);u=x5+x1|0;x9^=u<<7|u>>>(32-7);u=x9+x5|0;x13^=u<<9|u>>>(32-9);u=x13+x9|0;x1^=u<<13|u>>>(32-13);u=x1+x13|0;x5^=u<<18|u>>>(32-18);u=x10+x6|0;x14^=u<<7|u>>>(32-7);u=x14+x10|0;x2^=u<<9|u>>>(32-9);u=x2+x14|0;x6^=u<<13|u>>>(32-13);u=x6+x2|0;x10^=u<<18|u>>>(32-18);u=x15+x11|0;x3^=u<<7|u>>>(32-7);u=x3+x15|0;x7^=u<<9|u>>>(32-9);u=x7+x3|0;x11^=u<<13|u>>>(32-13);u=x11+x7|0;x15^=u<<18|u>>>(32-18);u=x0+x3|0;x1^=u<<7|u>>>(32-7);u=x1+x0|0;x2^=u<<9|u>>>(32-9);u=x2+x1|0;x3^=u<<13|u>>>(32-13);u=x3+x2|0;x0^=u<<18|u>>>(32-18);u=x5+x4|0;x6^=u<<7|u>>>(32-7);u=x6+x5|0;x7^=u<<9|u>>>(32-9);u=x7+x6|0;x4^=u<<13|u>>>(32-13);u=x4+x7|0;x5^=u<<18|u>>>(32-18);u=x10+x9|0;x11^=u<<7|u>>>(32-7);u=x11+x10|0;x8^=u<<9|u>>>(32-9);u=x8+x11|0;x9^=u<<13|u>>>(32-13);u=x9+x8|0;x10^=u<<18|u>>>(32-18);u=x15+x14|0;x12^=u<<7|u>>>(32-7);u=x12+x15|0;x13^=u<<9|u>>>(32-9);u=x13+x12|0;x14^=u<<13|u>>>(32-13);u=x14+x13|0;x15^=u<<18|u>>>(32-18);}
x0=x0+j0|0;x1=x1+j1|0;x2=x2+j2|0;x3=x3+j3|0;x4=x4+j4|0;x5=x5+j5|0;x6=x6+j6|0;x7=x7+j7|0;x8=x8+j8|0;x9=x9+j9|0;x10=x10+j10|0;x11=x11+j11|0;x12=x12+j12|0;x13=x13+j13|0;x14=x14+j14|0;x15=x15+j15|0;o[0]=x0>>>0&0xff;o[1]=x0>>>8&0xff;o[2]=x0>>>16&0xff;o[3]=x0>>>24&0xff;o[4]=x1>>>0&0xff;o[5]=x1>>>8&0xff;o[6]=x1>>>16&0xff;o[7]=x1>>>24&0xff;o[8]=x2>>>0&0xff;o[9]=x2>>>8&0xff;o[10]=x2>>>16&0xff;o[11]=x2>>>24&0xff;o[12]=x3>>>0&0xff;o[13]=x3>>>8&0xff;o[14]=x3>>>16&0xff;o[15]=x3>>>24&0xff;o[16]=x4>>>0&0xff;o[17]=x4>>>8&0xff;o[18]=x4>>>16&0xff;o[19]=x4>>>24&0xff;o[20]=x5>>>0&0xff;o[21]=x5>>>8&0xff;o[22]=x5>>>16&0xff;o[23]=x5>>>24&0xff;o[24]=x6>>>0&0xff;o[25]=x6>>>8&0xff;o[26]=x6>>>16&0xff;o[27]=x6>>>24&0xff;o[28]=x7>>>0&0xff;o[29]=x7>>>8&0xff;o[30]=x7>>>16&0xff;o[31]=x7>>>24&0xff;o[32]=x8>>>0&0xff;o[33]=x8>>>8&0xff;o[34]=x8>>>16&0xff;o[35]=x8>>>24&0xff;o[36]=x9>>>0&0xff;o[37]=x9>>>8&0xff;o[38]=x9>>>16&0xff;o[39]=x9>>>24&0xff;o[40]=x10>>>0&0xff;o[41]=x10>>>8&0xff;o[42]=x10>>>16&0xff;o[43]=x10>>>24&0xff;o[44]=x11>>>0&0xff;o[45]=x11>>>8&0xff;o[46]=x11>>>16&0xff;o[47]=x11>>>24&0xff;o[48]=x12>>>0&0xff;o[49]=x12>>>8&0xff;o[50]=x12>>>16&0xff;o[51]=x12>>>24&0xff;o[52]=x13>>>0&0xff;o[53]=x13>>>8&0xff;o[54]=x13>>>16&0xff;o[55]=x13>>>24&0xff;o[56]=x14>>>0&0xff;o[57]=x14>>>8&0xff;o[58]=x14>>>16&0xff;o[59]=x14>>>24&0xff;o[60]=x15>>>0&0xff;o[61]=x15>>>8&0xff;o[62]=x15>>>16&0xff;o[63]=x15>>>24&0xff;}
function core_hsalsa20(o,p,k,c){var j0=c[0]&0xff|(c[1]&0xff)<<8|(c[2]&0xff)<<16|(c[3]&0xff)<<24,j1=k[0]&0xff|(k[1]&0xff)<<8|(k[2]&0xff)<<16|(k[3]&0xff)<<24,j2=k[4]&0xff|(k[5]&0xff)<<8|(k[6]&0xff)<<16|(k[7]&0xff)<<24,j3=k[8]&0xff|(k[9]&0xff)<<8|(k[10]&0xff)<<16|(k[11]&0xff)<<24,j4=k[12]&0xff|(k[13]&0xff)<<8|(k[14]&0xff)<<16|(k[15]&0xff)<<24,j5=c[4]&0xff|(c[5]&0xff)<<8|(c[6]&0xff)<<16|(c[7]&0xff)<<24,j6=p[0]&0xff|(p[1]&0xff)<<8|(p[2]&0xff)<<16|(p[3]&0xff)<<24,j7=p[4]&0xff|(p[5]&0xff)<<8|(p[6]&0xff)<<16|(p[7]&0xff)<<24,j8=p[8]&0xff|(p[9]&0xff)<<8|(p[10]&0xff)<<16|(p[11]&0xff)<<24,j9=p[12]&0xff|(p[13]&0xff)<<8|(p[14]&0xff)<<16|(p[15]&0xff)<<24,j10=c[8]&0xff|(c[9]&0xff)<<8|(c[10]&0xff)<<16|(c[11]&0xff)<<24,j11=k[16]&0xff|(k[17]&0xff)<<8|(k[18]&0xff)<<16|(k[19]&0xff)<<24,j12=k[20]&0xff|(k[21]&0xff)<<8|(k[22]&0xff)<<16|(k[23]&0xff)<<24,j13=k[24]&0xff|(k[25]&0xff)<<8|(k[26]&0xff)<<16|(k[27]&0xff)<<24,j14=k[28]&0xff|(k[29]&0xff)<<8|(k[30]&0xff)<<16|(k[31]&0xff)<<24,j15=c[12]&0xff|(c[13]&0xff)<<8|(c[14]&0xff)<<16|(c[15]&0xff)<<24;var x0=j0,x1=j1,x2=j2,x3=j3,x4=j4,x5=j5,x6=j6,x7=j7,x8=j8,x9=j9,x10=j10,x11=j11,x12=j12,x13=j13,x14=j14,x15=j15,u;for(var i=0;i<20;i+=2){u=x0+x12|0;x4^=u<<7|u>>>(32-7);u=x4+x0|0;x8^=u<<9|u>>>(32-9);u=x8+x4|0;x12^=u<<13|u>>>(32-13);u=x12+x8|0;x0^=u<<18|u>>>(32-18);u=x5+x1|0;x9^=u<<7|u>>>(32-7);u=x9+x5|0;x13^=u<<9|u>>>(32-9);u=x13+x9|0;x1^=u<<13|u>>>(32-13);u=x1+x13|0;x5^=u<<18|u>>>(32-18);u=x10+x6|0;x14^=u<<7|u>>>(32-7);u=x14+x10|0;x2^=u<<9|u>>>(32-9);u=x2+x14|0;x6^=u<<13|u>>>(32-13);u=x6+x2|0;x10^=u<<18|u>>>(32-18);u=x15+x11|0;x3^=u<<7|u>>>(32-7);u=x3+x15|0;x7^=u<<9|u>>>(32-9);u=x7+x3|0;x11^=u<<13|u>>>(32-13);u=x11+x7|0;x15^=u<<18|u>>>(32-18);u=x0+x3|0;x1^=u<<7|u>>>(32-7);u=x1+x0|0;x2^=u<<9|u>>>(32-9);u=x2+x1|0;x3^=u<<13|u>>>(32-13);u=x3+x2|0;x0^=u<<18|u>>>(32-18);u=x5+x4|0;x6^=u<<7|u>>>(32-7);u=x6+x5|0;x7^=u<<9|u>>>(32-9);u=x7+x6|0;x4^=u<<13|u>>>(32-13);u=x4+x7|0;x5^=u<<18|u>>>(32-18);u=x10+x9|0;x11^=u<<7|u>>>(32-7);u=x11+x10|0;x8^=u<<9|u>>>(32-9);u=x8+x11|0;x9^=u<<13|u>>>(32-13);u=x9+x8|0;x10^=u<<18|u>>>(32-18);u=x15+x14|0;x12^=u<<7|u>>>(32-7);u=x12+x15|0;x13^=u<<9|u>>>(32-9);u=x13+x12|0;x14^=u<<13|u>>>(32-13);u=x14+x13|0;x15^=u<<18|u>>>(32-18);}
o[0]=x0>>>0&0xff;o[1]=x0>>>8&0xff;o[2]=x0>>>16&0xff;o[3]=x0>>>24&0xff;o[4]=x5>>>0&0xff;o[5]=x5>>>8&0xff;o[6]=x5>>>16&0xff;o[7]=x5>>>24&0xff;o[8]=x10>>>0&0xff;o[9]=x10>>>8&0xff;o[10]=x10>>>16&0xff;o[11]=x10>>>24&0xff;o[12]=x15>>>0&0xff;o[13]=x15>>>8&0xff;o[14]=x15>>>16&0xff;o[15]=x15>>>24&0xff;o[16]=x6>>>0&0xff;o[17]=x6>>>8&0xff;o[18]=x6>>>16&0xff;o[19]=x6>>>24&0xff;o[20]=x7>>>0&0xff;o[21]=x7>>>8&0xff;o[22]=x7>>>16&0xff;o[23]=x7>>>24&0xff;o[24]=x8>>>0&0xff;o[25]=x8>>>8&0xff;o[26]=x8>>>16&0xff;o[27]=x8>>>24&0xff;o[28]=x9>>>0&0xff;o[29]=x9>>>8&0xff;o[30]=x9>>>16&0xff;o[31]=x9>>>24&0xff;}
function crypto_core_salsa20(out,inp,k,c){core_salsa20(out,inp,k,c);}
function crypto_core_hsalsa20(out,inp,k,c){core_hsalsa20(out,inp,k,c);}
var sigma=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function crypto_stream_salsa20_xor(c,cpos,m,mpos,b,n,k){var z=new Uint8Array(16),x=new Uint8Array(64);var u,i;for(i=0;i<16;i++)z[i]=0;for(i=0;i<8;i++)z[i]=n[i];while(b>=64){crypto_core_salsa20(x,z,k,sigma);for(i=0;i<64;i++)c[cpos+i]=m[mpos+i]^x[i];u=1;for(i=8;i<16;i++){u=u+(z[i]&0xff)|0;z[i]=u&0xff;u>>>=8;}
b-=64;cpos+=64;mpos+=64;}
if(b>0){crypto_core_salsa20(x,z,k,sigma);for(i=0;i<b;i++)c[cpos+i]=m[mpos+i]^x[i];}
return 0;}
function crypto_stream_salsa20(c,cpos,b,n,k){var z=new Uint8Array(16),x=new Uint8Array(64);var u,i;for(i=0;i<16;i++)z[i]=0;for(i=0;i<8;i++)z[i]=n[i];while(b>=64){crypto_core_salsa20(x,z,k,sigma);for(i=0;i<64;i++)c[cpos+i]=x[i];u=1;for(i=8;i<16;i++){u=u+(z[i]&0xff)|0;z[i]=u&0xff;u>>>=8;}
b-=64;cpos+=64;}
if(b>0){crypto_core_salsa20(x,z,k,sigma);for(i=0;i<b;i++)c[cpos+i]=x[i];}
return 0;}
function crypto_stream(c,cpos,d,n,k){var s=new Uint8Array(32);crypto_core_hsalsa20(s,n,k,sigma);var sn=new Uint8Array(8);for(var i=0;i<8;i++)sn[i]=n[i+16];return crypto_stream_salsa20(c,cpos,d,sn,s);}
function crypto_stream_xor(c,cpos,m,mpos,d,n,k){var s=new Uint8Array(32);crypto_core_hsalsa20(s,n,k,sigma);var sn=new Uint8Array(8);for(var i=0;i<8;i++)sn[i]=n[i+16];return crypto_stream_salsa20_xor(c,cpos,m,mpos,d,sn,s);}
var poly1305=function(key){this.buffer=new Uint8Array(16);this.r=new Uint16Array(10);this.h=new Uint16Array(10);this.pad=new Uint16Array(8);this.leftover=0;this.fin=0;var t0,t1,t2,t3,t4,t5,t6,t7;t0=key[0]&0xff|(key[1]&0xff)<<8;this.r[0]=(t0)&0x1fff;t1=key[2]&0xff|(key[3]&0xff)<<8;this.r[1]=((t0>>>13)|(t1<<3))&0x1fff;t2=key[4]&0xff|(key[5]&0xff)<<8;this.r[2]=((t1>>>10)|(t2<<6))&0x1f03;t3=key[6]&0xff|(key[7]&0xff)<<8;this.r[3]=((t2>>>7)|(t3<<9))&0x1fff;t4=key[8]&0xff|(key[9]&0xff)<<8;this.r[4]=((t3>>>4)|(t4<<12))&0x00ff;this.r[5]=((t4>>>1))&0x1ffe;t5=key[10]&0xff|(key[11]&0xff)<<8;this.r[6]=((t4>>>14)|(t5<<2))&0x1fff;t6=key[12]&0xff|(key[13]&0xff)<<8;this.r[7]=((t5>>>11)|(t6<<5))&0x1f81;t7=key[14]&0xff|(key[15]&0xff)<<8;this.r[8]=((t6>>>8)|(t7<<8))&0x1fff;this.r[9]=((t7>>>5))&0x007f;this.pad[0]=key[16]&0xff|(key[17]&0xff)<<8;this.pad[1]=key[18]&0xff|(key[19]&0xff)<<8;this.pad[2]=key[20]&0xff|(key[21]&0xff)<<8;this.pad[3]=key[22]&0xff|(key[23]&0xff)<<8;this.pad[4]=key[24]&0xff|(key[25]&0xff)<<8;this.pad[5]=key[26]&0xff|(key[27]&0xff)<<8;this.pad[6]=key[28]&0xff|(key[29]&0xff)<<8;this.pad[7]=key[30]&0xff|(key[31]&0xff)<<8;};poly1305.prototype.blocks=function(m,mpos,bytes){var hibit=this.fin?0:(1<<11);var t0,t1,t2,t3,t4,t5,t6,t7,c;var d0,d1,d2,d3,d4,d5,d6,d7,d8,d9;var h0=this.h[0],h1=this.h[1],h2=this.h[2],h3=this.h[3],h4=this.h[4],h5=this.h[5],h6=this.h[6],h7=this.h[7],h8=this.h[8],h9=this.h[9];var r0=this.r[0],r1=this.r[1],r2=this.r[2],r3=this.r[3],r4=this.r[4],r5=this.r[5],r6=this.r[6],r7=this.r[7],r8=this.r[8],r9=this.r[9];while(bytes>=16){t0=m[mpos+0]&0xff|(m[mpos+1]&0xff)<<8;h0+=(t0)&0x1fff;t1=m[mpos+2]&0xff|(m[mpos+3]&0xff)<<8;h1+=((t0>>>13)|(t1<<3))&0x1fff;t2=m[mpos+4]&0xff|(m[mpos+5]&0xff)<<8;h2+=((t1>>>10)|(t2<<6))&0x1fff;t3=m[mpos+6]&0xff|(m[mpos+7]&0xff)<<8;h3+=((t2>>>7)|(t3<<9))&0x1fff;t4=m[mpos+8]&0xff|(m[mpos+9]&0xff)<<8;h4+=((t3>>>4)|(t4<<12))&0x1fff;h5+=((t4>>>1))&0x1fff;t5=m[mpos+10]&0xff|(m[mpos+11]&0xff)<<8;h6+=((t4>>>14)|(t5<<2))&0x1fff;t6=m[mpos+12]&0xff|(m[mpos+13]&0xff)<<8;h7+=((t5>>>11)|(t6<<5))&0x1fff;t7=m[mpos+14]&0xff|(m[mpos+15]&0xff)<<8;h8+=((t6>>>8)|(t7<<8))&0x1fff;h9+=((t7>>>5))|hibit;c=0;d0=c;d0+=h0*r0;d0+=h1*(5*r9);d0+=h2*(5*r8);d0+=h3*(5*r7);d0+=h4*(5*r6);c=(d0>>>13);d0&=0x1fff;d0+=h5*(5*r5);d0+=h6*(5*r4);d0+=h7*(5*r3);d0+=h8*(5*r2);d0+=h9*(5*r1);c+=(d0>>>13);d0&=0x1fff;d1=c;d1+=h0*r1;d1+=h1*r0;d1+=h2*(5*r9);d1+=h3*(5*r8);d1+=h4*(5*r7);c=(d1>>>13);d1&=0x1fff;d1+=h5*(5*r6);d1+=h6*(5*r5);d1+=h7*(5*r4);d1+=h8*(5*r3);d1+=h9*(5*r2);c+=(d1>>>13);d1&=0x1fff;d2=c;d2+=h0*r2;d2+=h1*r1;d2+=h2*r0;d2+=h3*(5*r9);d2+=h4*(5*r8);c=(d2>>>13);d2&=0x1fff;d2+=h5*(5*r7);d2+=h6*(5*r6);d2+=h7*(5*r5);d2+=h8*(5*r4);d2+=h9*(5*r3);c+=(d2>>>13);d2&=0x1fff;d3=c;d3+=h0*r3;d3+=h1*r2;d3+=h2*r1;d3+=h3*r0;d3+=h4*(5*r9);c=(d3>>>13);d3&=0x1fff;d3+=h5*(5*r8);d3+=h6*(5*r7);d3+=h7*(5*r6);d3+=h8*(5*r5);d3+=h9*(5*r4);c+=(d3>>>13);d3&=0x1fff;d4=c;d4+=h0*r4;d4+=h1*r3;d4+=h2*r2;d4+=h3*r1;d4+=h4*r0;c=(d4>>>13);d4&=0x1fff;d4+=h5*(5*r9);d4+=h6*(5*r8);d4+=h7*(5*r7);d4+=h8*(5*r6);d4+=h9*(5*r5);c+=(d4>>>13);d4&=0x1fff;d5=c;d5+=h0*r5;d5+=h1*r4;d5+=h2*r3;d5+=h3*r2;d5+=h4*r1;c=(d5>>>13);d5&=0x1fff;d5+=h5*r0;d5+=h6*(5*r9);d5+=h7*(5*r8);d5+=h8*(5*r7);d5+=h9*(5*r6);c+=(d5>>>13);d5&=0x1fff;d6=c;d6+=h0*r6;d6+=h1*r5;d6+=h2*r4;d6+=h3*r3;d6+=h4*r2;c=(d6>>>13);d6&=0x1fff;d6+=h5*r1;d6+=h6*r0;d6+=h7*(5*r9);d6+=h8*(5*r8);d6+=h9*(5*r7);c+=(d6>>>13);d6&=0x1fff;d7=c;d7+=h0*r7;d7+=h1*r6;d7+=h2*r5;d7+=h3*r4;d7+=h4*r3;c=(d7>>>13);d7&=0x1fff;d7+=h5*r2;d7+=h6*r1;d7+=h7*r0;d7+=h8*(5*r9);d7+=h9*(5*r8);c+=(d7>>>13);d7&=0x1fff;d8=c;d8+=h0*r8;d8+=h1*r7;d8+=h2*r6;d8+=h3*r5;d8+=h4*r4;c=(d8>>>13);d8&=0x1fff;d8+=h5*r3;d8+=h6*r2;d8+=h7*r1;d8+=h8*r0;d8+=h9*(5*r9);c+=(d8>>>13);d8&=0x1fff;d9=c;d9+=h0*r9;d9+=h1*r8;d9+=h2*r7;d9+=h3*r6;d9+=h4*r5;c=(d9>>>13);d9&=0x1fff;d9+=h5*r4;d9+=h6*r3;d9+=h7*r2;d9+=h8*r1;d9+=h9*r0;c+=(d9>>>13);d9&=0x1fff;c=(((c<<2)+c))|0;c=(c+d0)|0;d0=c&0x1fff;c=(c>>>13);d1+=c;h0=d0;h1=d1;h2=d2;h3=d3;h4=d4;h5=d5;h6=d6;h7=d7;h8=d8;h9=d9;mpos+=16;bytes-=16;}
this.h[0]=h0;this.h[1]=h1;this.h[2]=h2;this.h[3]=h3;this.h[4]=h4;this.h[5]=h5;this.h[6]=h6;this.h[7]=h7;this.h[8]=h8;this.h[9]=h9;};poly1305.prototype.finish=function(mac,macpos){var g=new Uint16Array(10);var c,mask,f,i;if(this.leftover){i=this.leftover;this.buffer[i++]=1;for(;i<16;i++)this.buffer[i]=0;this.fin=1;this.blocks(this.buffer,0,16);}
c=this.h[1]>>>13;this.h[1]&=0x1fff;for(i=2;i<10;i++){this.h[i]+=c;c=this.h[i]>>>13;this.h[i]&=0x1fff;}
this.h[0]+=(c*5);c=this.h[0]>>>13;this.h[0]&=0x1fff;this.h[1]+=c;c=this.h[1]>>>13;this.h[1]&=0x1fff;this.h[2]+=c;g[0]=this.h[0]+5;c=g[0]>>>13;g[0]&=0x1fff;for(i=1;i<10;i++){g[i]=this.h[i]+c;c=g[i]>>>13;g[i]&=0x1fff;}
g[9]-=(1<<13);mask=(c^1)-1;for(i=0;i<10;i++)g[i]&=mask;mask=~mask;for(i=0;i<10;i++)this.h[i]=(this.h[i]&mask)|g[i];this.h[0]=((this.h[0])|(this.h[1]<<13))&0xffff;this.h[1]=((this.h[1]>>>3)|(this.h[2]<<10))&0xffff;this.h[2]=((this.h[2]>>>6)|(this.h[3]<<7))&0xffff;this.h[3]=((this.h[3]>>>9)|(this.h[4]<<4))&0xffff;this.h[4]=((this.h[4]>>>12)|(this.h[5]<<1)|(this.h[6]<<14))&0xffff;this.h[5]=((this.h[6]>>>2)|(this.h[7]<<11))&0xffff;this.h[6]=((this.h[7]>>>5)|(this.h[8]<<8))&0xffff;this.h[7]=((this.h[8]>>>8)|(this.h[9]<<5))&0xffff;f=this.h[0]+this.pad[0];this.h[0]=f&0xffff;for(i=1;i<8;i++){f=(((this.h[i]+this.pad[i])|0)+(f>>>16))|0;this.h[i]=f&0xffff;}
mac[macpos+0]=(this.h[0]>>>0)&0xff;mac[macpos+1]=(this.h[0]>>>8)&0xff;mac[macpos+2]=(this.h[1]>>>0)&0xff;mac[macpos+3]=(this.h[1]>>>8)&0xff;mac[macpos+4]=(this.h[2]>>>0)&0xff;mac[macpos+5]=(this.h[2]>>>8)&0xff;mac[macpos+6]=(this.h[3]>>>0)&0xff;mac[macpos+7]=(this.h[3]>>>8)&0xff;mac[macpos+8]=(this.h[4]>>>0)&0xff;mac[macpos+9]=(this.h[4]>>>8)&0xff;mac[macpos+10]=(this.h[5]>>>0)&0xff;mac[macpos+11]=(this.h[5]>>>8)&0xff;mac[macpos+12]=(this.h[6]>>>0)&0xff;mac[macpos+13]=(this.h[6]>>>8)&0xff;mac[macpos+14]=(this.h[7]>>>0)&0xff;mac[macpos+15]=(this.h[7]>>>8)&0xff;};poly1305.prototype.update=function(m,mpos,bytes){var i,want;if(this.leftover){want=(16-this.leftover);if(want>bytes)
want=bytes;for(i=0;i<want;i++)
this.buffer[this.leftover+i]=m[mpos+i];bytes-=want;mpos+=want;this.leftover+=want;if(this.leftover<16)
return;this.blocks(this.buffer,0,16);this.leftover=0;}
if(bytes>=16){want=bytes-(bytes%16);this.blocks(m,mpos,want);mpos+=want;bytes-=want;}
if(bytes){for(i=0;i<bytes;i++)
this.buffer[this.leftover+i]=m[mpos+i];this.leftover+=bytes;}};function crypto_onetimeauth(out,outpos,m,mpos,n,k){var s=new poly1305(k);s.update(m,mpos,n);s.finish(out,outpos);return 0;}
function crypto_onetimeauth_verify(h,hpos,m,mpos,n,k){var x=new Uint8Array(16);crypto_onetimeauth(x,0,m,mpos,n,k);return crypto_verify_16(h,hpos,x,0);}
function crypto_secretbox(c,m,d,n,k){var i;if(d<32)return-1;crypto_stream_xor(c,0,m,0,d,n,k);crypto_onetimeauth(c,16,c,32,d-32,c);for(i=0;i<16;i++)c[i]=0;return 0;}
function crypto_secretbox_open(m,c,d,n,k){var i;var x=new Uint8Array(32);if(d<32)return-1;crypto_stream(x,0,32,n,k);if(crypto_onetimeauth_verify(c,16,c,32,d-32,x)!==0)return-1;crypto_stream_xor(m,0,c,0,d,n,k);for(i=0;i<32;i++)m[i]=0;return 0;}
function set25519(r,a){var i;for(i=0;i<16;i++)r[i]=a[i]|0;}
function car25519(o){var i,v,c=1;for(i=0;i<16;i++){v=o[i]+c+65535;c=Math.floor(v/65536);o[i]=v-c*65536;}
o[0]+=c-1+37*(c-1);}
function sel25519(p,q,b){var t,c=~(b-1);for(var i=0;i<16;i++){t=c&(p[i]^q[i]);p[i]^=t;q[i]^=t;}}
function pack25519(o,n){var i,j,b;var m=gf(),t=gf();for(i=0;i<16;i++)t[i]=n[i];car25519(t);car25519(t);car25519(t);for(j=0;j<2;j++){m[0]=t[0]-0xffed;for(i=1;i<15;i++){m[i]=t[i]-0xffff-((m[i-1]>>16)&1);m[i-1]&=0xffff;}
m[15]=t[15]-0x7fff-((m[14]>>16)&1);b=(m[15]>>16)&1;m[14]&=0xffff;sel25519(t,m,1-b);}
for(i=0;i<16;i++){o[2*i]=t[i]&0xff;o[2*i+1]=t[i]>>8;}}
function neq25519(a,b){var c=new Uint8Array(32),d=new Uint8Array(32);pack25519(c,a);pack25519(d,b);return crypto_verify_32(c,0,d,0);}
function par25519(a){var d=new Uint8Array(32);pack25519(d,a);return d[0]&1;}
function unpack25519(o,n){var i;for(i=0;i<16;i++)o[i]=n[2*i]+(n[2*i+1]<<8);o[15]&=0x7fff;}
function A(o,a,b){for(var i=0;i<16;i++)o[i]=a[i]+b[i];}
function Z(o,a,b){for(var i=0;i<16;i++)o[i]=a[i]-b[i];}
function M(o,a,b){var v,c,t0=0,t1=0,t2=0,t3=0,t4=0,t5=0,t6=0,t7=0,t8=0,t9=0,t10=0,t11=0,t12=0,t13=0,t14=0,t15=0,t16=0,t17=0,t18=0,t19=0,t20=0,t21=0,t22=0,t23=0,t24=0,t25=0,t26=0,t27=0,t28=0,t29=0,t30=0,b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=b[6],b7=b[7],b8=b[8],b9=b[9],b10=b[10],b11=b[11],b12=b[12],b13=b[13],b14=b[14],b15=b[15];v=a[0];t0+=v*b0;t1+=v*b1;t2+=v*b2;t3+=v*b3;t4+=v*b4;t5+=v*b5;t6+=v*b6;t7+=v*b7;t8+=v*b8;t9+=v*b9;t10+=v*b10;t11+=v*b11;t12+=v*b12;t13+=v*b13;t14+=v*b14;t15+=v*b15;v=a[1];t1+=v*b0;t2+=v*b1;t3+=v*b2;t4+=v*b3;t5+=v*b4;t6+=v*b5;t7+=v*b6;t8+=v*b7;t9+=v*b8;t10+=v*b9;t11+=v*b10;t12+=v*b11;t13+=v*b12;t14+=v*b13;t15+=v*b14;t16+=v*b15;v=a[2];t2+=v*b0;t3+=v*b1;t4+=v*b2;t5+=v*b3;t6+=v*b4;t7+=v*b5;t8+=v*b6;t9+=v*b7;t10+=v*b8;t11+=v*b9;t12+=v*b10;t13+=v*b11;t14+=v*b12;t15+=v*b13;t16+=v*b14;t17+=v*b15;v=a[3];t3+=v*b0;t4+=v*b1;t5+=v*b2;t6+=v*b3;t7+=v*b4;t8+=v*b5;t9+=v*b6;t10+=v*b7;t11+=v*b8;t12+=v*b9;t13+=v*b10;t14+=v*b11;t15+=v*b12;t16+=v*b13;t17+=v*b14;t18+=v*b15;v=a[4];t4+=v*b0;t5+=v*b1;t6+=v*b2;t7+=v*b3;t8+=v*b4;t9+=v*b5;t10+=v*b6;t11+=v*b7;t12+=v*b8;t13+=v*b9;t14+=v*b10;t15+=v*b11;t16+=v*b12;t17+=v*b13;t18+=v*b14;t19+=v*b15;v=a[5];t5+=v*b0;t6+=v*b1;t7+=v*b2;t8+=v*b3;t9+=v*b4;t10+=v*b5;t11+=v*b6;t12+=v*b7;t13+=v*b8;t14+=v*b9;t15+=v*b10;t16+=v*b11;t17+=v*b12;t18+=v*b13;t19+=v*b14;t20+=v*b15;v=a[6];t6+=v*b0;t7+=v*b1;t8+=v*b2;t9+=v*b3;t10+=v*b4;t11+=v*b5;t12+=v*b6;t13+=v*b7;t14+=v*b8;t15+=v*b9;t16+=v*b10;t17+=v*b11;t18+=v*b12;t19+=v*b13;t20+=v*b14;t21+=v*b15;v=a[7];t7+=v*b0;t8+=v*b1;t9+=v*b2;t10+=v*b3;t11+=v*b4;t12+=v*b5;t13+=v*b6;t14+=v*b7;t15+=v*b8;t16+=v*b9;t17+=v*b10;t18+=v*b11;t19+=v*b12;t20+=v*b13;t21+=v*b14;t22+=v*b15;v=a[8];t8+=v*b0;t9+=v*b1;t10+=v*b2;t11+=v*b3;t12+=v*b4;t13+=v*b5;t14+=v*b6;t15+=v*b7;t16+=v*b8;t17+=v*b9;t18+=v*b10;t19+=v*b11;t20+=v*b12;t21+=v*b13;t22+=v*b14;t23+=v*b15;v=a[9];t9+=v*b0;t10+=v*b1;t11+=v*b2;t12+=v*b3;t13+=v*b4;t14+=v*b5;t15+=v*b6;t16+=v*b7;t17+=v*b8;t18+=v*b9;t19+=v*b10;t20+=v*b11;t21+=v*b12;t22+=v*b13;t23+=v*b14;t24+=v*b15;v=a[10];t10+=v*b0;t11+=v*b1;t12+=v*b2;t13+=v*b3;t14+=v*b4;t15+=v*b5;t16+=v*b6;t17+=v*b7;t18+=v*b8;t19+=v*b9;t20+=v*b10;t21+=v*b11;t22+=v*b12;t23+=v*b13;t24+=v*b14;t25+=v*b15;v=a[11];t11+=v*b0;t12+=v*b1;t13+=v*b2;t14+=v*b3;t15+=v*b4;t16+=v*b5;t17+=v*b6;t18+=v*b7;t19+=v*b8;t20+=v*b9;t21+=v*b10;t22+=v*b11;t23+=v*b12;t24+=v*b13;t25+=v*b14;t26+=v*b15;v=a[12];t12+=v*b0;t13+=v*b1;t14+=v*b2;t15+=v*b3;t16+=v*b4;t17+=v*b5;t18+=v*b6;t19+=v*b7;t20+=v*b8;t21+=v*b9;t22+=v*b10;t23+=v*b11;t24+=v*b12;t25+=v*b13;t26+=v*b14;t27+=v*b15;v=a[13];t13+=v*b0;t14+=v*b1;t15+=v*b2;t16+=v*b3;t17+=v*b4;t18+=v*b5;t19+=v*b6;t20+=v*b7;t21+=v*b8;t22+=v*b9;t23+=v*b10;t24+=v*b11;t25+=v*b12;t26+=v*b13;t27+=v*b14;t28+=v*b15;v=a[14];t14+=v*b0;t15+=v*b1;t16+=v*b2;t17+=v*b3;t18+=v*b4;t19+=v*b5;t20+=v*b6;t21+=v*b7;t22+=v*b8;t23+=v*b9;t24+=v*b10;t25+=v*b11;t26+=v*b12;t27+=v*b13;t28+=v*b14;t29+=v*b15;v=a[15];t15+=v*b0;t16+=v*b1;t17+=v*b2;t18+=v*b3;t19+=v*b4;t20+=v*b5;t21+=v*b6;t22+=v*b7;t23+=v*b8;t24+=v*b9;t25+=v*b10;t26+=v*b11;t27+=v*b12;t28+=v*b13;t29+=v*b14;t30+=v*b15;t0+=38*t16;t1+=38*t17;t2+=38*t18;t3+=38*t19;t4+=38*t20;t5+=38*t21;t6+=38*t22;t7+=38*t23;t8+=38*t24;t9+=38*t25;t10+=38*t26;t11+=38*t27;t12+=38*t28;t13+=38*t29;t14+=38*t30;c=1;v=t0+c+65535;c=Math.floor(v/65536);t0=v-c*65536;v=t1+c+65535;c=Math.floor(v/65536);t1=v-c*65536;v=t2+c+65535;c=Math.floor(v/65536);t2=v-c*65536;v=t3+c+65535;c=Math.floor(v/65536);t3=v-c*65536;v=t4+c+65535;c=Math.floor(v/65536);t4=v-c*65536;v=t5+c+65535;c=Math.floor(v/65536);t5=v-c*65536;v=t6+c+65535;c=Math.floor(v/65536);t6=v-c*65536;v=t7+c+65535;c=Math.floor(v/65536);t7=v-c*65536;v=t8+c+65535;c=Math.floor(v/65536);t8=v-c*65536;v=t9+c+65535;c=Math.floor(v/65536);t9=v-c*65536;v=t10+c+65535;c=Math.floor(v/65536);t10=v-c*65536;v=t11+c+65535;c=Math.floor(v/65536);t11=v-c*65536;v=t12+c+65535;c=Math.floor(v/65536);t12=v-c*65536;v=t13+c+65535;c=Math.floor(v/65536);t13=v-c*65536;v=t14+c+65535;c=Math.floor(v/65536);t14=v-c*65536;v=t15+c+65535;c=Math.floor(v/65536);t15=v-c*65536;t0+=c-1+37*(c-1);c=1;v=t0+c+65535;c=Math.floor(v/65536);t0=v-c*65536;v=t1+c+65535;c=Math.floor(v/65536);t1=v-c*65536;v=t2+c+65535;c=Math.floor(v/65536);t2=v-c*65536;v=t3+c+65535;c=Math.floor(v/65536);t3=v-c*65536;v=t4+c+65535;c=Math.floor(v/65536);t4=v-c*65536;v=t5+c+65535;c=Math.floor(v/65536);t5=v-c*65536;v=t6+c+65535;c=Math.floor(v/65536);t6=v-c*65536;v=t7+c+65535;c=Math.floor(v/65536);t7=v-c*65536;v=t8+c+65535;c=Math.floor(v/65536);t8=v-c*65536;v=t9+c+65535;c=Math.floor(v/65536);t9=v-c*65536;v=t10+c+65535;c=Math.floor(v/65536);t10=v-c*65536;v=t11+c+65535;c=Math.floor(v/65536);t11=v-c*65536;v=t12+c+65535;c=Math.floor(v/65536);t12=v-c*65536;v=t13+c+65535;c=Math.floor(v/65536);t13=v-c*65536;v=t14+c+65535;c=Math.floor(v/65536);t14=v-c*65536;v=t15+c+65535;c=Math.floor(v/65536);t15=v-c*65536;t0+=c-1+37*(c-1);o[0]=t0;o[1]=t1;o[2]=t2;o[3]=t3;o[4]=t4;o[5]=t5;o[6]=t6;o[7]=t7;o[8]=t8;o[9]=t9;o[10]=t10;o[11]=t11;o[12]=t12;o[13]=t13;o[14]=t14;o[15]=t15;}
function S(o,a){M(o,a,a);}
function inv25519(o,i){var c=gf();var a;for(a=0;a<16;a++)c[a]=i[a];for(a=253;a>=0;a--){S(c,c);if(a!==2&&a!==4)M(c,c,i);}
for(a=0;a<16;a++)o[a]=c[a];}
function pow2523(o,i){var c=gf();var a;for(a=0;a<16;a++)c[a]=i[a];for(a=250;a>=0;a--){S(c,c);if(a!==1)M(c,c,i);}
for(a=0;a<16;a++)o[a]=c[a];}
function crypto_scalarmult(q,n,p){var z=new Uint8Array(32);var x=new Float64Array(80),r,i;var a=gf(),b=gf(),c=gf(),d=gf(),e=gf(),f=gf();for(i=0;i<31;i++)z[i]=n[i];z[31]=(n[31]&127)|64;z[0]&=248;unpack25519(x,p);for(i=0;i<16;i++){b[i]=x[i];d[i]=a[i]=c[i]=0;}
a[0]=d[0]=1;for(i=254;i>=0;--i){r=(z[i>>>3]>>>(i&7))&1;sel25519(a,b,r);sel25519(c,d,r);A(e,a,c);Z(a,a,c);A(c,b,d);Z(b,b,d);S(d,e);S(f,a);M(a,c,a);M(c,b,e);A(e,a,c);Z(a,a,c);S(b,a);Z(c,d,f);M(a,c,_121665);A(a,a,d);M(c,c,a);M(a,d,f);M(d,b,x);S(b,e);sel25519(a,b,r);sel25519(c,d,r);}
for(i=0;i<16;i++){x[i+16]=a[i];x[i+32]=c[i];x[i+48]=b[i];x[i+64]=d[i];}
var x32=x.subarray(32);var x16=x.subarray(16);inv25519(x32,x32);M(x16,x16,x32);pack25519(q,x16);return 0;}
function crypto_scalarmult_base(q,n){return crypto_scalarmult(q,n,_9);}
function crypto_box_keypair(y,x){randombytes(x,32);return crypto_scalarmult_base(y,x);}
function crypto_box_beforenm(k,y,x){var s=new Uint8Array(32);crypto_scalarmult(s,x,y);return crypto_core_hsalsa20(k,_0,s,sigma);}
var crypto_box_afternm=crypto_secretbox;var crypto_box_open_afternm=crypto_secretbox_open;function crypto_box(c,m,d,n,y,x){var k=new Uint8Array(32);crypto_box_beforenm(k,y,x);return crypto_box_afternm(c,m,d,n,k);}
function crypto_box_open(m,c,d,n,y,x){var k=new Uint8Array(32);crypto_box_beforenm(k,y,x);return crypto_box_open_afternm(m,c,d,n,k);}
var K=[0x428a2f98,0xd728ae22,0x71374491,0x23ef65cd,0xb5c0fbcf,0xec4d3b2f,0xe9b5dba5,0x8189dbbc,0x3956c25b,0xf348b538,0x59f111f1,0xb605d019,0x923f82a4,0xaf194f9b,0xab1c5ed5,0xda6d8118,0xd807aa98,0xa3030242,0x12835b01,0x45706fbe,0x243185be,0x4ee4b28c,0x550c7dc3,0xd5ffb4e2,0x72be5d74,0xf27b896f,0x80deb1fe,0x3b1696b1,0x9bdc06a7,0x25c71235,0xc19bf174,0xcf692694,0xe49b69c1,0x9ef14ad2,0xefbe4786,0x384f25e3,0x0fc19dc6,0x8b8cd5b5,0x240ca1cc,0x77ac9c65,0x2de92c6f,0x592b0275,0x4a7484aa,0x6ea6e483,0x5cb0a9dc,0xbd41fbd4,0x76f988da,0x831153b5,0x983e5152,0xee66dfab,0xa831c66d,0x2db43210,0xb00327c8,0x98fb213f,0xbf597fc7,0xbeef0ee4,0xc6e00bf3,0x3da88fc2,0xd5a79147,0x930aa725,0x06ca6351,0xe003826f,0x14292967,0x0a0e6e70,0x27b70a85,0x46d22ffc,0x2e1b2138,0x5c26c926,0x4d2c6dfc,0x5ac42aed,0x53380d13,0x9d95b3df,0x650a7354,0x8baf63de,0x766a0abb,0x3c77b2a8,0x81c2c92e,0x47edaee6,0x92722c85,0x1482353b,0xa2bfe8a1,0x4cf10364,0xa81a664b,0xbc423001,0xc24b8b70,0xd0f89791,0xc76c51a3,0x0654be30,0xd192e819,0xd6ef5218,0xd6990624,0x5565a910,0xf40e3585,0x5771202a,0x106aa070,0x32bbd1b8,0x19a4c116,0xb8d2d0c8,0x1e376c08,0x5141ab53,0x2748774c,0xdf8eeb99,0x34b0bcb5,0xe19b48a8,0x391c0cb3,0xc5c95a63,0x4ed8aa4a,0xe3418acb,0x5b9cca4f,0x7763e373,0x682e6ff3,0xd6b2b8a3,0x748f82ee,0x5defb2fc,0x78a5636f,0x43172f60,0x84c87814,0xa1f0ab72,0x8cc70208,0x1a6439ec,0x90befffa,0x23631e28,0xa4506ceb,0xde82bde9,0xbef9a3f7,0xb2c67915,0xc67178f2,0xe372532b,0xca273ece,0xea26619c,0xd186b8c7,0x21c0c207,0xeada7dd6,0xcde0eb1e,0xf57d4f7f,0xee6ed178,0x06f067aa,0x72176fba,0x0a637dc5,0xa2c898a6,0x113f9804,0xbef90dae,0x1b710b35,0x131c471b,0x28db77f5,0x23047d84,0x32caab7b,0x40c72493,0x3c9ebe0a,0x15c9bebc,0x431d67c4,0x9c100d4c,0x4cc5d4be,0xcb3e42b6,0x597f299c,0xfc657e2a,0x5fcb6fab,0x3ad6faec,0x6c44198c,0x4a475817];function crypto_hashblocks_hl(hh,hl,m,n){var wh=new Int32Array(16),wl=new Int32Array(16),bh0,bh1,bh2,bh3,bh4,bh5,bh6,bh7,bl0,bl1,bl2,bl3,bl4,bl5,bl6,bl7,th,tl,i,j,h,l,a,b,c,d;var ah0=hh[0],ah1=hh[1],ah2=hh[2],ah3=hh[3],ah4=hh[4],ah5=hh[5],ah6=hh[6],ah7=hh[7],al0=hl[0],al1=hl[1],al2=hl[2],al3=hl[3],al4=hl[4],al5=hl[5],al6=hl[6],al7=hl[7];var pos=0;while(n>=128){for(i=0;i<16;i++){j=8*i+pos;wh[i]=(m[j+0]<<24)|(m[j+1]<<16)|(m[j+2]<<8)|m[j+3];wl[i]=(m[j+4]<<24)|(m[j+5]<<16)|(m[j+6]<<8)|m[j+7];}
for(i=0;i<80;i++){bh0=ah0;bh1=ah1;bh2=ah2;bh3=ah3;bh4=ah4;bh5=ah5;bh6=ah6;bh7=ah7;bl0=al0;bl1=al1;bl2=al2;bl3=al3;bl4=al4;bl5=al5;bl6=al6;bl7=al7;h=ah7;l=al7;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=((ah4>>>14)|(al4<<(32-14)))^((ah4>>>18)|(al4<<(32-18)))^((al4>>>(41-32))|(ah4<<(32-(41-32))));l=((al4>>>14)|(ah4<<(32-14)))^((al4>>>18)|(ah4<<(32-18)))^((ah4>>>(41-32))|(al4<<(32-(41-32))));a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;h=(ah4&ah5)^(~ah4&ah6);l=(al4&al5)^(~al4&al6);a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;h=K[i*2];l=K[i*2+1];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;h=wh[i%16];l=wl[i%16];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;th=c&0xffff|d<<16;tl=a&0xffff|b<<16;h=th;l=tl;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=((ah0>>>28)|(al0<<(32-28)))^((al0>>>(34-32))|(ah0<<(32-(34-32))))^((al0>>>(39-32))|(ah0<<(32-(39-32))));l=((al0>>>28)|(ah0<<(32-28)))^((ah0>>>(34-32))|(al0<<(32-(34-32))))^((ah0>>>(39-32))|(al0<<(32-(39-32))));a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;h=(ah0&ah1)^(ah0&ah2)^(ah1&ah2);l=(al0&al1)^(al0&al2)^(al1&al2);a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;bh7=(c&0xffff)|(d<<16);bl7=(a&0xffff)|(b<<16);h=bh3;l=bl3;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=th;l=tl;a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;bh3=(c&0xffff)|(d<<16);bl3=(a&0xffff)|(b<<16);ah1=bh0;ah2=bh1;ah3=bh2;ah4=bh3;ah5=bh4;ah6=bh5;ah7=bh6;ah0=bh7;al1=bl0;al2=bl1;al3=bl2;al4=bl3;al5=bl4;al6=bl5;al7=bl6;al0=bl7;if(i%16===15){for(j=0;j<16;j++){h=wh[j];l=wl[j];a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=wh[(j+9)%16];l=wl[(j+9)%16];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;th=wh[(j+1)%16];tl=wl[(j+1)%16];h=((th>>>1)|(tl<<(32-1)))^((th>>>8)|(tl<<(32-8)))^(th>>>7);l=((tl>>>1)|(th<<(32-1)))^((tl>>>8)|(th<<(32-8)))^((tl>>>7)|(th<<(32-7)));a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;th=wh[(j+14)%16];tl=wl[(j+14)%16];h=((th>>>19)|(tl<<(32-19)))^((tl>>>(61-32))|(th<<(32-(61-32))))^(th>>>6);l=((tl>>>19)|(th<<(32-19)))^((th>>>(61-32))|(tl<<(32-(61-32))))^((tl>>>6)|(th<<(32-6)));a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;wh[j]=(c&0xffff)|(d<<16);wl[j]=(a&0xffff)|(b<<16);}}}
h=ah0;l=al0;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[0];l=hl[0];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[0]=ah0=(c&0xffff)|(d<<16);hl[0]=al0=(a&0xffff)|(b<<16);h=ah1;l=al1;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[1];l=hl[1];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[1]=ah1=(c&0xffff)|(d<<16);hl[1]=al1=(a&0xffff)|(b<<16);h=ah2;l=al2;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[2];l=hl[2];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[2]=ah2=(c&0xffff)|(d<<16);hl[2]=al2=(a&0xffff)|(b<<16);h=ah3;l=al3;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[3];l=hl[3];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[3]=ah3=(c&0xffff)|(d<<16);hl[3]=al3=(a&0xffff)|(b<<16);h=ah4;l=al4;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[4];l=hl[4];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[4]=ah4=(c&0xffff)|(d<<16);hl[4]=al4=(a&0xffff)|(b<<16);h=ah5;l=al5;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[5];l=hl[5];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[5]=ah5=(c&0xffff)|(d<<16);hl[5]=al5=(a&0xffff)|(b<<16);h=ah6;l=al6;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[6];l=hl[6];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[6]=ah6=(c&0xffff)|(d<<16);hl[6]=al6=(a&0xffff)|(b<<16);h=ah7;l=al7;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[7];l=hl[7];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[7]=ah7=(c&0xffff)|(d<<16);hl[7]=al7=(a&0xffff)|(b<<16);pos+=128;n-=128;}
return n;}
function crypto_hash(out,m,n){var hh=new Int32Array(8),hl=new Int32Array(8),x=new Uint8Array(256),i,b=n;hh[0]=0x6a09e667;hh[1]=0xbb67ae85;hh[2]=0x3c6ef372;hh[3]=0xa54ff53a;hh[4]=0x510e527f;hh[5]=0x9b05688c;hh[6]=0x1f83d9ab;hh[7]=0x5be0cd19;hl[0]=0xf3bcc908;hl[1]=0x84caa73b;hl[2]=0xfe94f82b;hl[3]=0x5f1d36f1;hl[4]=0xade682d1;hl[5]=0x2b3e6c1f;hl[6]=0xfb41bd6b;hl[7]=0x137e2179;crypto_hashblocks_hl(hh,hl,m,n);n%=128;for(i=0;i<n;i++)x[i]=m[b-n+i];x[n]=128;n=256-128*(n<112?1:0);x[n-9]=0;ts64(x,n-8,(b/0x20000000)|0,b<<3);crypto_hashblocks_hl(hh,hl,x,n);for(i=0;i<8;i++)ts64(out,8*i,hh[i],hl[i]);return 0;}
function add(p,q){var a=gf(),b=gf(),c=gf(),d=gf(),e=gf(),f=gf(),g=gf(),h=gf(),t=gf();Z(a,p[1],p[0]);Z(t,q[1],q[0]);M(a,a,t);A(b,p[0],p[1]);A(t,q[0],q[1]);M(b,b,t);M(c,p[3],q[3]);M(c,c,D2);M(d,p[2],q[2]);A(d,d,d);Z(e,b,a);Z(f,d,c);A(g,d,c);A(h,b,a);M(p[0],e,f);M(p[1],h,g);M(p[2],g,f);M(p[3],e,h);}
function cswap(p,q,b){var i;for(i=0;i<4;i++){sel25519(p[i],q[i],b);}}
function pack(r,p){var tx=gf(),ty=gf(),zi=gf();inv25519(zi,p[2]);M(tx,p[0],zi);M(ty,p[1],zi);pack25519(r,ty);r[31]^=par25519(tx)<<7;}
function scalarmult(p,q,s){var b,i;set25519(p[0],gf0);set25519(p[1],gf1);set25519(p[2],gf1);set25519(p[3],gf0);for(i=255;i>=0;--i){b=(s[(i/8)|0]>>(i&7))&1;cswap(p,q,b);add(q,p);add(p,p);cswap(p,q,b);}}
function scalarbase(p,s){var q=[gf(),gf(),gf(),gf()];set25519(q[0],X);set25519(q[1],Y);set25519(q[2],gf1);M(q[3],X,Y);scalarmult(p,q,s);}
function crypto_sign_keypair(pk,sk,seeded){var d=new Uint8Array(64);var p=[gf(),gf(),gf(),gf()];var i;if(!seeded)randombytes(sk,32);crypto_hash(d,sk,32);d[0]&=248;d[31]&=127;d[31]|=64;scalarbase(p,d);pack(pk,p);for(i=0;i<32;i++)sk[i+32]=pk[i];return 0;}
var L=new Float64Array([0xed,0xd3,0xf5,0x5c,0x1a,0x63,0x12,0x58,0xd6,0x9c,0xf7,0xa2,0xde,0xf9,0xde,0x14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x10]);function modL(r,x){var carry,i,j,k;for(i=63;i>=32;--i){carry=0;for(j=i-32,k=i-12;j<k;++j){x[j]+=carry-16*x[i]*L[j-(i-32)];carry=(x[j]+128)>>8;x[j]-=carry*256;}
x[j]+=carry;x[i]=0;}
carry=0;for(j=0;j<32;j++){x[j]+=carry-(x[31]>>4)*L[j];carry=x[j]>>8;x[j]&=255;}
for(j=0;j<32;j++)x[j]-=carry*L[j];for(i=0;i<32;i++){x[i+1]+=x[i]>>8;r[i]=x[i]&255;}}
function reduce(r){var x=new Float64Array(64),i;for(i=0;i<64;i++)x[i]=r[i];for(i=0;i<64;i++)r[i]=0;modL(r,x);}
function crypto_sign(sm,m,n,sk){var d=new Uint8Array(64),h=new Uint8Array(64),r=new Uint8Array(64);var i,j,x=new Float64Array(64);var p=[gf(),gf(),gf(),gf()];crypto_hash(d,sk,32);d[0]&=248;d[31]&=127;d[31]|=64;var smlen=n+64;for(i=0;i<n;i++)sm[64+i]=m[i];for(i=0;i<32;i++)sm[32+i]=d[32+i];crypto_hash(r,sm.subarray(32),n+32);reduce(r);scalarbase(p,r);pack(sm,p);for(i=32;i<64;i++)sm[i]=sk[i];crypto_hash(h,sm,n+64);reduce(h);for(i=0;i<64;i++)x[i]=0;for(i=0;i<32;i++)x[i]=r[i];for(i=0;i<32;i++){for(j=0;j<32;j++){x[i+j]+=h[i]*d[j];}}
modL(sm.subarray(32),x);return smlen;}
function unpackneg(r,p){var t=gf(),chk=gf(),num=gf(),den=gf(),den2=gf(),den4=gf(),den6=gf();set25519(r[2],gf1);unpack25519(r[1],p);S(num,r[1]);M(den,num,D);Z(num,num,r[2]);A(den,r[2],den);S(den2,den);S(den4,den2);M(den6,den4,den2);M(t,den6,num);M(t,t,den);pow2523(t,t);M(t,t,num);M(t,t,den);M(t,t,den);M(r[0],t,den);S(chk,r[0]);M(chk,chk,den);if(neq25519(chk,num))M(r[0],r[0],I);S(chk,r[0]);M(chk,chk,den);if(neq25519(chk,num))return-1;if(par25519(r[0])===(p[31]>>7))Z(r[0],gf0,r[0]);M(r[3],r[0],r[1]);return 0;}
function crypto_sign_open(m,sm,n,pk){var i,mlen;var t=new Uint8Array(32),h=new Uint8Array(64);var p=[gf(),gf(),gf(),gf()],q=[gf(),gf(),gf(),gf()];mlen=-1;if(n<64)return-1;if(unpackneg(q,pk))return-1;for(i=0;i<n;i++)m[i]=sm[i];for(i=0;i<32;i++)m[i+32]=pk[i];crypto_hash(h,m,n);reduce(h);scalarmult(p,q,h);scalarbase(q,sm.subarray(32));add(p,q);pack(t,p);n-=64;if(crypto_verify_32(sm,0,t,0)){for(i=0;i<n;i++)m[i]=0;return-1;}
for(i=0;i<n;i++)m[i]=sm[i+64];mlen=n;return mlen;}
var crypto_secretbox_KEYBYTES=32,crypto_secretbox_NONCEBYTES=24,crypto_secretbox_ZEROBYTES=32,crypto_secretbox_BOXZEROBYTES=16,crypto_scalarmult_BYTES=32,crypto_scalarmult_SCALARBYTES=32,crypto_box_PUBLICKEYBYTES=32,crypto_box_SECRETKEYBYTES=32,crypto_box_BEFORENMBYTES=32,crypto_box_NONCEBYTES=crypto_secretbox_NONCEBYTES,crypto_box_ZEROBYTES=crypto_secretbox_ZEROBYTES,crypto_box_BOXZEROBYTES=crypto_secretbox_BOXZEROBYTES,crypto_sign_BYTES=64,crypto_sign_PUBLICKEYBYTES=32,crypto_sign_SECRETKEYBYTES=64,crypto_sign_SEEDBYTES=32,crypto_hash_BYTES=64;nacl.lowlevel={crypto_core_hsalsa20:crypto_core_hsalsa20,crypto_stream_xor:crypto_stream_xor,crypto_stream:crypto_stream,crypto_stream_salsa20_xor:crypto_stream_salsa20_xor,crypto_stream_salsa20:crypto_stream_salsa20,crypto_onetimeauth:crypto_onetimeauth,crypto_onetimeauth_verify:crypto_onetimeauth_verify,crypto_verify_16:crypto_verify_16,crypto_verify_32:crypto_verify_32,crypto_secretbox:crypto_secretbox,crypto_secretbox_open:crypto_secretbox_open,crypto_scalarmult:crypto_scalarmult,crypto_scalarmult_base:crypto_scalarmult_base,crypto_box_beforenm:crypto_box_beforenm,crypto_box_afternm:crypto_box_afternm,crypto_box:crypto_box,crypto_box_open:crypto_box_open,crypto_box_keypair:crypto_box_keypair,crypto_hash:crypto_hash,crypto_sign:crypto_sign,crypto_sign_keypair:crypto_sign_keypair,crypto_sign_open:crypto_sign_open,crypto_secretbox_KEYBYTES:crypto_secretbox_KEYBYTES,crypto_secretbox_NONCEBYTES:crypto_secretbox_NONCEBYTES,crypto_secretbox_ZEROBYTES:crypto_secretbox_ZEROBYTES,crypto_secretbox_BOXZEROBYTES:crypto_secretbox_BOXZEROBYTES,crypto_scalarmult_BYTES:crypto_scalarmult_BYTES,crypto_scalarmult_SCALARBYTES:crypto_scalarmult_SCALARBYTES,crypto_box_PUBLICKEYBYTES:crypto_box_PUBLICKEYBYTES,crypto_box_SECRETKEYBYTES:crypto_box_SECRETKEYBYTES,crypto_box_BEFORENMBYTES:crypto_box_BEFORENMBYTES,crypto_box_NONCEBYTES:crypto_box_NONCEBYTES,crypto_box_ZEROBYTES:crypto_box_ZEROBYTES,crypto_box_BOXZEROBYTES:crypto_box_BOXZEROBYTES,crypto_sign_BYTES:crypto_sign_BYTES,crypto_sign_PUBLICKEYBYTES:crypto_sign_PUBLICKEYBYTES,crypto_sign_SECRETKEYBYTES:crypto_sign_SECRETKEYBYTES,crypto_sign_SEEDBYTES:crypto_sign_SEEDBYTES,crypto_hash_BYTES:crypto_hash_BYTES};function checkLengths(k,n){if(k.length!==crypto_secretbox_KEYBYTES)throw new Error('bad key size');if(n.length!==crypto_secretbox_NONCEBYTES)throw new Error('bad nonce size');}
function checkBoxLengths(pk,sk){if(pk.length!==crypto_box_PUBLICKEYBYTES)throw new Error('bad public key size');if(sk.length!==crypto_box_SECRETKEYBYTES)throw new Error('bad secret key size');}
function checkArrayTypes(){var t,i;for(i=0;i<arguments.length;i++){if((t=Object.prototype.toString.call(arguments[i]))!=='[object Uint8Array]')
throw new TypeError('unexpected type '+t+', use Uint8Array');}}
function cleanup(arr){for(var i=0;i<arr.length;i++)arr[i]=0;}
if(!nacl.util){nacl.util={};nacl.util.decodeUTF8=nacl.util.encodeUTF8=nacl.util.encodeBase64=nacl.util.decodeBase64=function(){throw new Error('nacl.util moved into separate package: https://github.com/dchest/tweetnacl-util-js');};}
nacl.randomBytes=function(n){var b=new Uint8Array(n);randombytes(b,n);return b;};nacl.secretbox=function(msg,nonce,key){checkArrayTypes(msg,nonce,key);checkLengths(key,nonce);var m=new Uint8Array(crypto_secretbox_ZEROBYTES+msg.length);var c=new Uint8Array(m.length);for(var i=0;i<msg.length;i++)m[i+crypto_secretbox_ZEROBYTES]=msg[i];crypto_secretbox(c,m,m.length,nonce,key);return c.subarray(crypto_secretbox_BOXZEROBYTES);};nacl.secretbox.open=function(box,nonce,key){checkArrayTypes(box,nonce,key);checkLengths(key,nonce);var c=new Uint8Array(crypto_secretbox_BOXZEROBYTES+box.length);var m=new Uint8Array(c.length);for(var i=0;i<box.length;i++)c[i+crypto_secretbox_BOXZEROBYTES]=box[i];if(c.length<32)return false;if(crypto_secretbox_open(m,c,c.length,nonce,key)!==0)return false;return m.subarray(crypto_secretbox_ZEROBYTES);};nacl.secretbox.keyLength=crypto_secretbox_KEYBYTES;nacl.secretbox.nonceLength=crypto_secretbox_NONCEBYTES;nacl.secretbox.overheadLength=crypto_secretbox_BOXZEROBYTES;nacl.scalarMult=function(n,p){checkArrayTypes(n,p);if(n.length!==crypto_scalarmult_SCALARBYTES)throw new Error('bad n size');if(p.length!==crypto_scalarmult_BYTES)throw new Error('bad p size');var q=new Uint8Array(crypto_scalarmult_BYTES);crypto_scalarmult(q,n,p);return q;};nacl.scalarMult.base=function(n){checkArrayTypes(n);if(n.length!==crypto_scalarmult_SCALARBYTES)throw new Error('bad n size');var q=new Uint8Array(crypto_scalarmult_BYTES);crypto_scalarmult_base(q,n);return q;};nacl.scalarMult.scalarLength=crypto_scalarmult_SCALARBYTES;nacl.scalarMult.groupElementLength=crypto_scalarmult_BYTES;nacl.box=function(msg,nonce,publicKey,secretKey){var k=nacl.box.before(publicKey,secretKey);return nacl.secretbox(msg,nonce,k);};nacl.box.before=function(publicKey,secretKey){checkArrayTypes(publicKey,secretKey);checkBoxLengths(publicKey,secretKey);var k=new Uint8Array(crypto_box_BEFORENMBYTES);crypto_box_beforenm(k,publicKey,secretKey);return k;};nacl.box.after=nacl.secretbox;nacl.box.open=function(msg,nonce,publicKey,secretKey){var k=nacl.box.before(publicKey,secretKey);return nacl.secretbox.open(msg,nonce,k);};nacl.box.open.after=nacl.secretbox.open;nacl.box.keyPair=function(){var pk=new Uint8Array(crypto_box_PUBLICKEYBYTES);var sk=new Uint8Array(crypto_box_SECRETKEYBYTES);crypto_box_keypair(pk,sk);return{publicKey:pk,secretKey:sk};};nacl.box.keyPair.fromSecretKey=function(secretKey){checkArrayTypes(secretKey);if(secretKey.length!==crypto_box_SECRETKEYBYTES)
throw new Error('bad secret key size');var pk=new Uint8Array(crypto_box_PUBLICKEYBYTES);crypto_scalarmult_base(pk,secretKey);return{publicKey:pk,secretKey:new Uint8Array(secretKey)};};nacl.box.publicKeyLength=crypto_box_PUBLICKEYBYTES;nacl.box.secretKeyLength=crypto_box_SECRETKEYBYTES;nacl.box.sharedKeyLength=crypto_box_BEFORENMBYTES;nacl.box.nonceLength=crypto_box_NONCEBYTES;nacl.box.overheadLength=nacl.secretbox.overheadLength;nacl.sign=function(msg,secretKey){checkArrayTypes(msg,secretKey);if(secretKey.length!==crypto_sign_SECRETKEYBYTES)
throw new Error('bad secret key size');var signedMsg=new Uint8Array(crypto_sign_BYTES+msg.length);crypto_sign(signedMsg,msg,msg.length,secretKey);return signedMsg;};nacl.sign.open=function(signedMsg,publicKey){if(arguments.length!==2)
throw new Error('nacl.sign.open accepts 2 arguments; did you mean to use nacl.sign.detached.verify?');checkArrayTypes(signedMsg,publicKey);if(publicKey.length!==crypto_sign_PUBLICKEYBYTES)
throw new Error('bad public key size');var tmp=new Uint8Array(signedMsg.length);var mlen=crypto_sign_open(tmp,signedMsg,signedMsg.length,publicKey);if(mlen<0)return null;var m=new Uint8Array(mlen);for(var i=0;i<m.length;i++)m[i]=tmp[i];return m;};nacl.sign.detached=function(msg,secretKey){var signedMsg=nacl.sign(msg,secretKey);var sig=new Uint8Array(crypto_sign_BYTES);for(var i=0;i<sig.length;i++)sig[i]=signedMsg[i];return sig;};nacl.sign.detached.verify=function(msg,sig,publicKey){checkArrayTypes(msg,sig,publicKey);if(sig.length!==crypto_sign_BYTES)
throw new Error('bad signature size');if(publicKey.length!==crypto_sign_PUBLICKEYBYTES)
throw new Error('bad public key size');var sm=new Uint8Array(crypto_sign_BYTES+msg.length);var m=new Uint8Array(crypto_sign_BYTES+msg.length);var i;for(i=0;i<crypto_sign_BYTES;i++)sm[i]=sig[i];for(i=0;i<msg.length;i++)sm[i+crypto_sign_BYTES]=msg[i];return(crypto_sign_open(m,sm,sm.length,publicKey)>=0);};nacl.sign.keyPair=function(){var pk=new Uint8Array(crypto_sign_PUBLICKEYBYTES);var sk=new Uint8Array(crypto_sign_SECRETKEYBYTES);crypto_sign_keypair(pk,sk);return{publicKey:pk,secretKey:sk};};nacl.sign.keyPair.fromSecretKey=function(secretKey){checkArrayTypes(secretKey);if(secretKey.length!==crypto_sign_SECRETKEYBYTES)
throw new Error('bad secret key size');var pk=new Uint8Array(crypto_sign_PUBLICKEYBYTES);for(var i=0;i<pk.length;i++)pk[i]=secretKey[32+i];return{publicKey:pk,secretKey:new Uint8Array(secretKey)};};nacl.sign.keyPair.fromSeed=function(seed){checkArrayTypes(seed);if(seed.length!==crypto_sign_SEEDBYTES)
throw new Error('bad seed size');var pk=new Uint8Array(crypto_sign_PUBLICKEYBYTES);var sk=new Uint8Array(crypto_sign_SECRETKEYBYTES);for(var i=0;i<32;i++)sk[i]=seed[i];crypto_sign_keypair(pk,sk,true);return{publicKey:pk,secretKey:sk};};nacl.sign.publicKeyLength=crypto_sign_PUBLICKEYBYTES;nacl.sign.secretKeyLength=crypto_sign_SECRETKEYBYTES;nacl.sign.seedLength=crypto_sign_SEEDBYTES;nacl.sign.signatureLength=crypto_sign_BYTES;nacl.hash=function(msg){checkArrayTypes(msg);var h=new Uint8Array(crypto_hash_BYTES);crypto_hash(h,msg,msg.length);return h;};nacl.hash.hashLength=crypto_hash_BYTES;nacl.verify=function(x,y){checkArrayTypes(x,y);if(x.length===0||y.length===0)return false;if(x.length!==y.length)return false;return(vn(x,0,y,0,x.length)===0)?true:false;};nacl.setPRNG=function(fn){randombytes=fn;};(function(){var crypto=typeof self!=='undefined'?(self.crypto||self.msCrypto):null;if(crypto&&crypto.getRandomValues){var QUOTA=65536;nacl.setPRNG(function(x,n){var i,v=new Uint8Array(n);for(i=0;i<n;i+=QUOTA){crypto.getRandomValues(v.subarray(i,i+Math.min(n-i,QUOTA)));}
for(i=0;i<n;i++)x[i]=v[i];cleanup(v);});}else if(true){crypto=__webpack_require__(828);if(crypto&&crypto.randomBytes){nacl.setPRNG(function(x,n){var i,v=crypto.randomBytes(n);for(i=0;i<n;i++)x[i]=v[i];cleanup(v);});}}})();})(typeof module!=='undefined'&&module.exports?module.exports:(self.nacl=self.nacl||{}));}),(function(module,exports,__webpack_require__){module.exports={read:read,readSSHPrivate:readSSHPrivate,write:write};var assert=__webpack_require__(15);var asn1=__webpack_require__(79);var Buffer=__webpack_require__(21).Buffer;var algs=__webpack_require__(41);var utils=__webpack_require__(34);var crypto=__webpack_require__(24);var Key=__webpack_require__(33);var PrivateKey=__webpack_require__(38);var pem=__webpack_require__(88);var rfc4253=__webpack_require__(89);var SSHBuffer=__webpack_require__(136);var errors=__webpack_require__(72);var bcrypt;function read(buf,options){return(pem.read(buf,options));}
var MAGIC='openssh-key-v1';function readSSHPrivate(type,buf,options){buf=new SSHBuffer({buffer:buf});var magic=buf.readCString();assert.strictEqual(magic,MAGIC,'bad magic string');var cipher=buf.readString();var kdf=buf.readString();var kdfOpts=buf.readBuffer();var nkeys=buf.readInt();if(nkeys!==1){throw(new Error('OpenSSH-format key file contains '+
'multiple keys: this is unsupported.'));}
var pubKey=buf.readBuffer();if(type==='public'){assert.ok(buf.atEnd(),'excess bytes left after key');return(rfc4253.read(pubKey));}
var privKeyBlob=buf.readBuffer();assert.ok(buf.atEnd(),'excess bytes left after key');var kdfOptsBuf=new SSHBuffer({buffer:kdfOpts});switch(kdf){case 'none':if(cipher!=='none'){throw(new Error('OpenSSH-format key uses KDF "none" '+
'but specifies a cipher other than "none"'));}
break;case 'bcrypt':var salt=kdfOptsBuf.readBuffer();var rounds=kdfOptsBuf.readInt();var cinf=utils.opensshCipherInfo(cipher);if(bcrypt===undefined){bcrypt=__webpack_require__(378);}
if(typeof(options.passphrase)==='string'){options.passphrase=Buffer.from(options.passphrase,'utf-8');}
if(!Buffer.isBuffer(options.passphrase)){throw(new errors.KeyEncryptedError(options.filename,'OpenSSH'));}
var pass=new Uint8Array(options.passphrase);var salti=new Uint8Array(salt);var out=new Uint8Array(cinf.keySize+cinf.blockSize);var res=bcrypt.pbkdf(pass,pass.length,salti,salti.length,out,out.length,rounds);if(res!==0){throw(new Error('bcrypt_pbkdf function returned '+
'failure, parameters invalid'));}
out=Buffer.from(out);var ckey=out.slice(0,cinf.keySize);var iv=out.slice(cinf.keySize,cinf.keySize+cinf.blockSize);var cipherStream=crypto.createDecipheriv(cinf.opensslName,ckey,iv);cipherStream.setAutoPadding(false);var chunk,chunks=[];cipherStream.once('error',function(e){if(e.toString().indexOf('bad decrypt')!==-1){throw(new Error('Incorrect passphrase '+
'supplied, could not decrypt key'));}
throw(e);});cipherStream.write(privKeyBlob);cipherStream.end();while((chunk=cipherStream.read())!==null)
chunks.push(chunk);privKeyBlob=Buffer.concat(chunks);break;default:throw(new Error('OpenSSH-format key uses unknown KDF "'+kdf+'"'));}
buf=new SSHBuffer({buffer:privKeyBlob});var checkInt1=buf.readInt();var checkInt2=buf.readInt();if(checkInt1!==checkInt2){throw(new Error('Incorrect passphrase supplied, could not '+
'decrypt key'));}
var ret={};var key=rfc4253.readInternal(ret,'private',buf.remainder());buf.skip(ret.consumed);var comment=buf.readString();key.comment=comment;return(key);}
function write(key,options){var pubKey;if(PrivateKey.isPrivateKey(key))
pubKey=key.toPublic();else
pubKey=key;var cipher='none';var kdf='none';var kdfopts=Buffer.alloc(0);var cinf={blockSize:8};var passphrase;if(options!==undefined){passphrase=options.passphrase;if(typeof(passphrase)==='string')
passphrase=Buffer.from(passphrase,'utf-8');if(passphrase!==undefined){assert.buffer(passphrase,'options.passphrase');assert.optionalString(options.cipher,'options.cipher');cipher=options.cipher;if(cipher===undefined)
cipher='aes128-ctr';cinf=utils.opensshCipherInfo(cipher);kdf='bcrypt';}}
var privBuf;if(PrivateKey.isPrivateKey(key)){privBuf=new SSHBuffer({});var checkInt=crypto.randomBytes(4).readUInt32BE(0);privBuf.writeInt(checkInt);privBuf.writeInt(checkInt);privBuf.write(key.toBuffer('rfc4253'));privBuf.writeString(key.comment||'');var n=1;while(privBuf._offset%cinf.blockSize!==0)
privBuf.writeChar(n++);privBuf=privBuf.toBuffer();}
switch(kdf){case 'none':break;case 'bcrypt':var salt=crypto.randomBytes(16);var rounds=16;var kdfssh=new SSHBuffer({});kdfssh.writeBuffer(salt);kdfssh.writeInt(rounds);kdfopts=kdfssh.toBuffer();if(bcrypt===undefined){bcrypt=__webpack_require__(378);}
var pass=new Uint8Array(passphrase);var salti=new Uint8Array(salt);var out=new Uint8Array(cinf.keySize+cinf.blockSize);var res=bcrypt.pbkdf(pass,pass.length,salti,salti.length,out,out.length,rounds);if(res!==0){throw(new Error('bcrypt_pbkdf function returned '+
'failure, parameters invalid'));}
out=Buffer.from(out);var ckey=out.slice(0,cinf.keySize);var iv=out.slice(cinf.keySize,cinf.keySize+cinf.blockSize);var cipherStream=crypto.createCipheriv(cinf.opensslName,ckey,iv);cipherStream.setAutoPadding(false);var chunk,chunks=[];cipherStream.once('error',function(e){throw(e);});cipherStream.write(privBuf);cipherStream.end();while((chunk=cipherStream.read())!==null)
chunks.push(chunk);privBuf=Buffer.concat(chunks);break;default:throw(new Error('Unsupported kdf '+kdf));}
var buf=new SSHBuffer({});buf.writeCString(MAGIC);buf.writeString(cipher);buf.writeString(kdf);buf.writeBuffer(kdfopts);buf.writeInt(1);buf.writeBuffer(pubKey.toBuffer('rfc4253'));if(privBuf)
buf.writeBuffer(privBuf);buf=buf.toBuffer();var header;if(PrivateKey.isPrivateKey(key))
header='OPENSSH PRIVATE KEY';else
header='OPENSSH PUBLIC KEY';var tmp=buf.toString('base64');var len=tmp.length+(tmp.length/70)+
18+16+header.length*2+10;buf=Buffer.alloc(len);var o=0;o+=buf.write('-----BEGIN '+header+'-----\n',o);for(var i=0;i<tmp.length;){var limit=i+70;if(limit>tmp.length)
limit=tmp.length;o+=buf.write(tmp.slice(i,limit),o);buf[o++]=10;i=limit;}
o+=buf.write('-----END '+header+'-----\n',o);return(buf.slice(0,o));}}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0__PPoW_Blockchain_Proof_Basic__=__webpack_require__(406);var __WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_2__utils_BufferExtended__=__webpack_require__(3);class PPowBlockchainProofPi extends __WEBPACK_IMPORTED_MODULE_0__PPoW_Blockchain_Proof_Basic__["a"]{constructor(blockchain,blocks){super(blockchain,blocks)
this.proofGzip=undefined;}
blocksGreaterLevel(miu){let list=[];for(let i=0;i<this.blocks.length;++i)
if(miu<=this.blockchain.prover.provesCalculated.allBlocks[this.blocks[i]])
list.push(this.blocks[i]);return new PPowBlockchainProofPi(this.blockchain,list);}
blocksLessLevel(miu){let list=[];for(let i=0;i<this.blocks.length;++i)
if(this.blockchain.prover.provesCalculated.allBlocks[this.blocks[i]]<=miu)
list.push(this.blocks[i]);return new PPowBlockchainProofPi(this.blockchain,list);}
downSuperChainGetUnderlyingChain(underlyingChain){let first=-1,last=-1;for(let i=0;i<this.blocks.length;i++)
if(underlyingChain.blocks[i]===this.blocks[0]){first=i;break;}
for(let i=0;i<underlyingChain.blocks.length;i++)
if(underlyingChain.blocks[i]===this.blocks[this.blocks.length-1]){last=i;break;}
if(first===-1||last===-1)
return new PPowBlockchainProofPi(this.blockchain,[]);else{let newUnderlyingChain=new PPowBlockchainProofPi(this.blockchain,[]);if(last<first){let aux=last;last=first;first=aux;}
for(let i=first;i<=last;i++)
newUnderlyingChain.blocks.push(underlyingChain.blocks[i]);return newUnderlyingChain;}}
downSuperChainGetUnderlyingChainLength(underlyingChain){let first,last;for(let i=0;i<this.blocks.length;i++)
if(underlyingChain.blocks[i]===this.blocks[0]){first=i;break;}
for(let i=underlyingChain.blocks.length-1;i>=0;i--)
if(underlyingChain.blocks[i]===this.blocks[this.blocks.length-1]){last=i;break;}
if(first===undefined||last===undefined)
return 0;else{if(last<first){let aux=last;last=first;first=aux;}
return last-first+1;}}
serializeProof(proof){let buffer=[];buffer.push(__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeNumber1Byte(proof.version));buffer.push(__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeNumber3Bytes(proof.height));buffer.push(__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeNumber4Bytes(proof.timeStamp));buffer.push(__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeNumber4Bytes(proof.nonce));buffer.push(proof.data.hashData);buffer.push(proof.data.hashAccountantTree);buffer.push(__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeHashOptimized(proof.difficultyTargetPrev));buffer.push(__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeHashOptimized(proof.hash));buffer.push(__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeHashOptimized(proof.hashPrev));buffer.push(__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeNumber1Byte(proof.interlinks.length));let interlinks=[];let containGemesis=false;let genesisPosition=0;for(let i=0;i<proof.interlinks.length;i++){if(proof.interlinks[i]===0)
interlinks.push(__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeNumber1Byte(0));else{interlinks.push(__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeHashOptimized(proof.interlinks[i].bId));if(proof.interlinks[i].h===-1){containGemesis=true;genesisPosition=i;}else{interlinks.push(__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeNumber3Bytes(proof.interlinks[i].h));}}}
if(containGemesis===true){buffer.push(__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeNumber1Byte(containGemesis===true?1:0));buffer.push(__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeNumber1Byte(genesisPosition));}else
buffer.push(__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeNumber1Byte(containGemesis===true?1:0));for(let i=0;i<interlinks.length;i++)buffer.push(interlinks[i]);return Buffer.concat(buffer);}
deserializeProof(buffer,offset=0){let deserializeResult={};let proof={data:{},interlinks:[]};proof.version=__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].deserializeNumber1Bytes(buffer,offset);offset+=1;proof.height=__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].deserializeNumber3Bytes(buffer,offset);offset+=3;proof.timeStamp=__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].deserializeNumber4Bytes(buffer,offset);offset+=4;proof.nonce=__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].deserializeNumber4Bytes(buffer,offset);offset+=4;proof.data.hashData=__WEBPACK_IMPORTED_MODULE_2__utils_BufferExtended__["a"].substr(buffer,offset,32);offset+=32;proof.data.hashAccountantTree=__WEBPACK_IMPORTED_MODULE_2__utils_BufferExtended__["a"].substr(buffer,offset,32);offset+=32;deserializeResult=__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].deserializeHashOptimized(buffer,offset);proof.difficultyTargetPrev=deserializeResult.hash;offset=deserializeResult.offset;deserializeResult=__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].deserializeHashOptimized(buffer,offset);proof.hash=deserializeResult.hash;offset=deserializeResult.offset;deserializeResult=__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].deserializeHashOptimized(buffer,offset);proof.hashPrev=deserializeResult.hash;offset=deserializeResult.offset;let currentInterlinkIterator=0;let interlinksLength=__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].deserializeNumber1Bytes(buffer,offset);offset+=1;let genesisPosition=0;let containsGenesis=__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].deserializeNumber1Bytes(buffer,offset);offset+=1;if(containsGenesis){genesisPosition=__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].deserializeNumber1Bytes(buffer,offset);offset+=1;}
while(interlinksLength!==currentInterlinkIterator){let currentInterlinkPrefix=__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].deserializeNumber1Bytes(buffer,offset);if(currentInterlinkPrefix===0){proof.interlinks.push(0);offset+=1;}
else{deserializeResult=__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].deserializeHashOptimized(buffer,offset);offset=deserializeResult.offset;let deserializeHeight;if(containsGenesis&&genesisPosition===currentInterlinkIterator)
deserializeHeight=-1;else{deserializeHeight=__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].deserializeNumber3Bytes(buffer,offset);offset+=3;}
proof.interlinks.push({h:deserializeHeight,bId:deserializeResult.hash});}
currentInterlinkIterator++;}
return{data:proof,offset:offset};}}
__webpack_exports__["a"]=(PPowBlockchainProofPi);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var zlib=__webpack_require__(373);class GZip{zip(buffer){return zlib.deflateSync(buffer);}
unzip(buffer){return zlib.unzipSync(buffer);}}
__webpack_exports__["a"]=(new GZip());}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_1__Interface_Blockchain_Protocol_Fork_Solver__=__webpack_require__(257);var __WEBPACK_IMPORTED_MODULE_2__Interface_Blockchain_Protocol_Forks_Manager__=__webpack_require__(416);var __WEBPACK_IMPORTED_MODULE_3_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_4_common_sockets_protocol_extend_socket_Node_Protocol__=__webpack_require__(141);var __WEBPACK_IMPORTED_MODULE_5_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_6__sockets_protocol_propagation_Node_Blockchain_Propagation__=__webpack_require__(119);class InterfaceBlockchainProtocol{constructor(blockchain){this.blockchain=blockchain;this.acceptBlockHeaders=true;this.acceptBlocks=true;this.forkSolver=undefined;this.tipsManager=undefined;}
setBlockchain(blockchain){this.blockchain=blockchain;if(this.forkSolver)
this.forkSolver.blockchain=blockchain;if(this.tipsManager)
this.tipsManager.blockchain=blockchain;}
initialize(params){this.acceptBlockHeaders=params.indexOf("acceptBlockHeaders")>=0;this.acceptBlocks=params.indexOf("acceptBlocks")>=0;__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].emitter.on("nodes-list/connected",(result)=>{this._initializeNewSocket(result)});__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].emitter.on("nodes-list/disconnected",(result)=>{this._uninitializeSocket(result)});for(let i=0;i<__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].nodes.length;i++)
this._initializeNewSocket(__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].nodes[i]);this.createForkSolver();this.createForksManager();}
createForkSolver(){this.forkSolver=new __WEBPACK_IMPORTED_MODULE_1__Interface_Blockchain_Protocol_Fork_Solver__["a"](this.blockchain,this);}
createForksManager(){this.forksManager=new __WEBPACK_IMPORTED_MODULE_2__Interface_Blockchain_Protocol_Forks_Manager__["a"](this.blockchain,this);}
_validateBlockchainHeader(data){if(data===undefined||data===null)throw{message:"data is not defined"};if(typeof data.chainLength!=='number')throw{message:'chainLength is not specified'};if(typeof data.chainStartingPoint!=='number')throw{message:'chainStartingPoint is not specified'};if(typeof data.height!=='number')throw{message:'height is not specified'};if(typeof data.header!=='object')throw{message:'header is not specified'};if(!data.header)throw{message:'header.header is not specified'};if(!data.header.hashPrev)throw{message:'header.hashPrev is not specified'};if(!data.header.hash)throw{message:'header.hash is not specified'};if(typeof data.header.hashPrev==='string')
data.header.hashPrev=__WEBPACK_IMPORTED_MODULE_3_common_utils_Serialization__["a"].fromBase(data.header.hashPrev);if(typeof data.header.hash==='string')
data.header.hash=__WEBPACK_IMPORTED_MODULE_3_common_utils_Serialization__["a"].fromBase(data.header.hash);if((typeof data.header.nonce==='number'||Buffer.isBuffer(data.header.nonce))===false)
throw{message:'nonce is not specified'};if(typeof data.header.data.hashData==='string')
data.header.data.hashData=__WEBPACK_IMPORTED_MODULE_3_common_utils_Serialization__["a"].fromBase(data.header.data.hashData);if(data.header.chainLength<data.header.height)
throw{message:'chainLength is smaller than block height ?? ',dataChainLength:data.header.chainLength,dataHeaderHeight:data.header.height};if(data.header.chainStartingPoint>data.header.height)
throw{message:'chainLength is smaller than block height ?? ',dataChainStartingPoint:data.header.chainStartingPoint,dataHeaderHeight:data.header.height};}
_initializeNewSocket(nodesListObject){let socket=nodesListObject.socket;if(this.acceptBlockHeaders)
try{if(this.blockchain.blocks.length>0&&this.blockchain.blocks.last){socket.node.sendRequest("head/last-block/a",{l:this.blockchain.blocks.length,h:this.blockchain.blocks.last.hash,s:this.blockchain.blocks.blocksStartingPoint,p:this.blockchain.agent.light?(this.blockchain.proofPi&&this.blockchain.proofPi.validatesLastBlock()):true,W:this.blockchain.blocks.chainWorkSerialized,});}}catch(exception){}
if(this.acceptBlockHeaders)
socket.node.on("head/new-block",async(data)=>{if(!data||(data.l<0)||(data.s>=data.l))return;if(Math.random()<0.1)
console.log("newForkTip",data.l);await this.blockchain.sleep(15+Math.random()*20);this.forksManager.newForkTip(socket,data.l,data.s,data.h,data.p,data.W);});if(this.acceptBlockHeaders){socket.node.on("head/chainHash",async(h)=>{if(typeof h!=='number'||this.blockchain.blocks.length<=h)
return socket.node.sendRequest("head/chainHash",null);let chainHash=await this.blockchain.getChainHash(h);socket.node.sendRequest("head/chainHash/"+h,{hash:chainHash});});socket.node.on("head/hash",async(h)=>{if(typeof h!=='number'||this.blockchain.blocks.length<=h)
return socket.node.sendRequest("head/hash",null);let hash=await this.blockchain.getHash(h);socket.node.sendRequest("head/hash/"+h,{hash:hash});});}
if(this.acceptBlocks)
socket.node.on("blockchain/blocks/request-block-by-height",async(data)=>{if(typeof data.height!=='number')throw{message:"data.height is not defined"};if(this.blockchain.blocks.length<=data.height)
throw{message:"data.height is higher than I have ",blockchainLength:this.blockchain.blocks.length,clientHeight:data.height};let serialization=await(data.onlyHeader?this.blockchain.blocks.loadingManager.getBlockHeaderBuffer(data.height):this.blockchain.blocks.loadingManager.getBlockBuffer(data.height));if(!serialization)throw{message:"block is empty",height:data.height};socket.node.sendRequest("blockchain/blocks/request-block-by-height/"+(data.height||0),{result:true,block:serialization,})});if(this.blockchain.agent.consensus)
this.askBlockchain(socket);}
_uninitializeSocket(nodesListObject){let socket=nodesListObject.socket;}
async askBlockchain(socket){try{let data=await socket.node.sendRequestWaitOnce("head/last-block",undefined,"a");if(!data)return false;return await this.forksManager.newForkTip(socket,data.l,data.s,data.h,data.p,data.W);}catch(exception){console.error("Error asking for Blockchain",exception);return false;}}}
__webpack_exports__["a"]=(InterfaceBlockchainProtocol);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";class VersionCheckerHelper{detectMobile(){if(typeof window==="undefined")return false;let check=false;(function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check=true;})(navigator.userAgent||navigator.vendor||window.opera);return check;}
detectMobileAndTablet(){if(typeof window==="undefined")return false;let check=false;(function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check=true;})(navigator.userAgent||navigator.vendor||window.opera);return check;}}
__webpack_exports__["a"]=(new VersionCheckerHelper());}),(function(module,exports){module.exports=function(a,b){var fn=function(){};fn.prototype=b.prototype;a.prototype=new fn;a.prototype.constructor=a;};}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__=__webpack_require__(6);class PoolProtocolList{constructor(){this.list=[];this._checkDisconnection();}
_checkDisconnection(){__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].emitter.on("nodes-list/disconnected",(nodesListObject)=>{this.deleteElementBySocket(nodesListObject.socket);});}
addElement(socket){if(this.findElement(socket)!==-1)return false;this.list.push(socket);return true;}
findElement(socket){for(let i=0;i<this.list.length;i++)
if(this.list[i]===socket)
return i;return-1;}
deleteElement(socket){for(let i=this.list.length-1;i>=0;i--)
if(this.list[i]===socket){this.list.splice(i,1);break;}}
deleteElementBySocket(socket){return this.deleteElement(socket);}}
__webpack_exports__["a"]=(PoolProtocolList);}),(function(module,exports,__webpack_require__){var isObject=__webpack_require__(14);var document=__webpack_require__(11).document;var is=isObject(document)&&isObject(document.createElement);module.exports=function(it){return is?document.createElement(it):{};};}),(function(module,exports,__webpack_require__){var global=__webpack_require__(11);var core=__webpack_require__(57);var LIBRARY=__webpack_require__(81);var wksExt=__webpack_require__(270);var defineProperty=__webpack_require__(27).f;module.exports=function(name){var $Symbol=core.Symbol||(core.Symbol=LIBRARY?{}:global.Symbol||{});if(name.charAt(0)!='_'&&!(name in $Symbol))defineProperty($Symbol,name,{value:wksExt.f(name)});};}),(function(module,exports,__webpack_require__){var shared=__webpack_require__(146)('keys');var uid=__webpack_require__(93);module.exports=function(key){return shared[key]||(shared[key]=uid(key));};}),(function(module,exports){module.exports=('constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf').split(',');}),(function(module,exports,__webpack_require__){var document=__webpack_require__(11).document;module.exports=document&&document.documentElement;}),(function(module,exports,__webpack_require__){var isObject=__webpack_require__(14);var anObject=__webpack_require__(8);var check=function(O,proto){anObject(O);if(!isObject(proto)&&proto!==null)throw TypeError(proto+": can't set as prototype!");};module.exports={set:Object.setPrototypeOf||('__proto__'in{}?function(test,buggy,set){try{set=__webpack_require__(58)(Function.call,__webpack_require__(53).f(Object.prototype,'__proto__').set,2);set(test,[]);buggy=!(test instanceof Array);}catch(e){buggy=true;}
return function setPrototypeOf(O,proto){check(O,proto);if(buggy)O.__proto__=proto;else set(O,proto);return O;};}({},false):undefined),check:check};}),(function(module,exports){module.exports='\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003'+
'\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF';}),(function(module,exports,__webpack_require__){var isObject=__webpack_require__(14);var setPrototypeOf=__webpack_require__(186).set;module.exports=function(that,target,C){var S=target.constructor;var P;if(S!==C&&typeof S=='function'&&(P=S.prototype)!==C.prototype&&isObject(P)&&setPrototypeOf){setPrototypeOf(that,P);}return that;};}),(function(module,exports,__webpack_require__){"use strict";var toInteger=__webpack_require__(60);var defined=__webpack_require__(64);module.exports=function repeat(count){var str=String(defined(this));var res='';var n=toInteger(count);if(n<0||n==Infinity)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(str+=str))if(n&1)res+=str;return res;};}),(function(module,exports){module.exports=Math.sign||function sign(x){return(x=+x)==0||x!=x?x:x<0?-1:1;};}),(function(module,exports){var $expm1=Math.expm1;module.exports=(!$expm1||$expm1(10)>22025.465794806719||$expm1(10)<22025.4657948067165168||$expm1(-2e-17)!=-2e-17)?function expm1(x){return(x=+x)==0?x:x>-1e-6&&x<1e-6?x+x*x/2:Math.exp(x)-1;}:$expm1;}),(function(module,exports,__webpack_require__){"use strict";var LIBRARY=__webpack_require__(81);var $export=__webpack_require__(0);var redefine=__webpack_require__(49);var hide=__webpack_require__(48);var Iterators=__webpack_require__(112);var $iterCreate=__webpack_require__(193);var setToStringTag=__webpack_require__(109);var getPrototypeOf=__webpack_require__(54);var ITERATOR=__webpack_require__(19)('iterator');var BUGGY=!([].keys&&'next'in[].keys());var FF_ITERATOR='@@iterator';var KEYS='keys';var VALUES='values';var returnThis=function(){return this;};module.exports=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){$iterCreate(Constructor,NAME,next);var getMethod=function(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case KEYS:return function keys(){return new Constructor(this,kind);};case VALUES:return function values(){return new Constructor(this,kind);};}return function entries(){return new Constructor(this,kind);};};var TAG=NAME+' Iterator';var DEF_VALUES=DEFAULT==VALUES;var VALUES_BUG=false;var proto=Base.prototype;var $native=proto[ITERATOR]||proto[FF_ITERATOR]||DEFAULT&&proto[DEFAULT];var $default=$native||getMethod(DEFAULT);var $entries=DEFAULT?!DEF_VALUES?$default:getMethod('entries'):undefined;var $anyNative=NAME=='Array'?proto.entries||$native:$native;var methods,key,IteratorPrototype;if($anyNative){IteratorPrototype=getPrototypeOf($anyNative.call(new Base()));if(IteratorPrototype!==Object.prototype&&IteratorPrototype.next){setToStringTag(IteratorPrototype,TAG,true);if(!LIBRARY&&typeof IteratorPrototype[ITERATOR]!='function')hide(IteratorPrototype,ITERATOR,returnThis);}}
if(DEF_VALUES&&$native&&$native.name!==VALUES){VALUES_BUG=true;$default=function values(){return $native.call(this);};}
if((!LIBRARY||FORCED)&&(BUGGY||VALUES_BUG||!proto[ITERATOR])){hide(proto,ITERATOR,$default);}
Iterators[NAME]=$default;Iterators[TAG]=returnThis;if(DEFAULT){methods={values:DEF_VALUES?$default:getMethod(VALUES),keys:IS_SET?$default:getMethod(KEYS),entries:$entries};if(FORCED)for(key in methods){if(!(key in proto))redefine(proto,key,methods[key]);}else $export($export.P+$export.F*(BUGGY||VALUES_BUG),NAME,methods);}
return methods;};}),(function(module,exports,__webpack_require__){"use strict";var create=__webpack_require__(96);var descriptor=__webpack_require__(92);var setToStringTag=__webpack_require__(109);var IteratorPrototype={};__webpack_require__(48)(IteratorPrototype,__webpack_require__(19)('iterator'),function(){return this;});module.exports=function(Constructor,NAME,next){Constructor.prototype=create(IteratorPrototype,{next:descriptor(1,next)});setToStringTag(Constructor,NAME+' Iterator');};}),(function(module,exports,__webpack_require__){var isRegExp=__webpack_require__(151);var defined=__webpack_require__(64);module.exports=function(that,searchString,NAME){if(isRegExp(searchString))throw TypeError('String#'+NAME+" doesn't accept regex!");return String(defined(that));};}),(function(module,exports,__webpack_require__){var MATCH=__webpack_require__(19)('match');module.exports=function(KEY){var re=/./;try{'/./'[KEY](re);}catch(e){try{re[MATCH]=false;return!'/./'[KEY](re);}catch(f){}}return true;};}),(function(module,exports,__webpack_require__){var Iterators=__webpack_require__(112);var ITERATOR=__webpack_require__(19)('iterator');var ArrayProto=Array.prototype;module.exports=function(it){return it!==undefined&&(Iterators.Array===it||ArrayProto[ITERATOR]===it);};}),(function(module,exports,__webpack_require__){"use strict";var $defineProperty=__webpack_require__(27);var createDesc=__webpack_require__(92);module.exports=function(object,index,value){if(index in object)$defineProperty.f(object,index,createDesc(0,value));else object[index]=value;};}),(function(module,exports,__webpack_require__){var classof=__webpack_require__(110);var ITERATOR=__webpack_require__(19)('iterator');var Iterators=__webpack_require__(112);module.exports=__webpack_require__(57).getIteratorMethod=function(it){if(it!=undefined)return it[ITERATOR]||it['@@iterator']||Iterators[classof(it)];};}),(function(module,exports,__webpack_require__){var speciesConstructor=__webpack_require__(529);module.exports=function(original,length){return new(speciesConstructor(original))(length);};}),(function(module,exports,__webpack_require__){"use strict";var toObject=__webpack_require__(30);var toAbsoluteIndex=__webpack_require__(95);var toLength=__webpack_require__(22);module.exports=function fill(value){var O=toObject(this);var length=toLength(O.length);var aLen=arguments.length;var index=toAbsoluteIndex(aLen>1?arguments[1]:undefined,length);var end=aLen>2?arguments[2]:undefined;var endPos=end===undefined?length:toAbsoluteIndex(end,length);while(endPos>index)O[index++]=value;return O;};}),(function(module,exports,__webpack_require__){"use strict";var addToUnscopables=__webpack_require__(82);var step=__webpack_require__(287);var Iterators=__webpack_require__(112);var toIObject=__webpack_require__(52);module.exports=__webpack_require__(192)(Array,'Array',function(iterated,kind){this._t=toIObject(iterated);this._i=0;this._k=kind;},function(){var O=this._t;var kind=this._k;var index=this._i++;if(!O||index>=O.length){this._t=undefined;return step(1);}
if(kind=='keys')return step(0,index);if(kind=='values')return step(0,O[index]);return step(0,[index,O[index]]);},'values');Iterators.Arguments=Iterators.Array;addToUnscopables('keys');addToUnscopables('values');addToUnscopables('entries');}),(function(module,exports,__webpack_require__){"use strict";var regexpFlags=__webpack_require__(125);var nativeExec=RegExp.prototype.exec;var nativeReplace=String.prototype.replace;var patchedExec=nativeExec;var LAST_INDEX='lastIndex';var UPDATES_LAST_INDEX_WRONG=(function(){var re1=/a/,re2=/b*/g;nativeExec.call(re1,'a');nativeExec.call(re2,'a');return re1[LAST_INDEX]!==0||re2[LAST_INDEX]!==0;})();var NPCG_INCLUDED=/()??/.exec('')[1]!==undefined;var PATCH=UPDATES_LAST_INDEX_WRONG||NPCG_INCLUDED;if(PATCH){patchedExec=function exec(str){var re=this;var lastIndex,reCopy,match,i;if(NPCG_INCLUDED){reCopy=new RegExp('^'+re.source+'$(?!\\s)',regexpFlags.call(re));}
if(UPDATES_LAST_INDEX_WRONG)lastIndex=re[LAST_INDEX];match=nativeExec.call(re,str);if(UPDATES_LAST_INDEX_WRONG&&match){re[LAST_INDEX]=re.global?match.index+match[0].length:lastIndex;}
if(NPCG_INCLUDED&&match&&match.length>1){nativeReplace.call(match[0],reCopy,function(){for(i=1;i<arguments.length-2;i++){if(arguments[i]===undefined)match[i]=undefined;}});}
return match;};}
module.exports=patchedExec;}),(function(module,exports,__webpack_require__){"use strict";var at=__webpack_require__(150)(true);module.exports=function(S,index,unicode){return index+(unicode?at(S,index).length:1);};}),(function(module,exports,__webpack_require__){var ctx=__webpack_require__(58);var invoke=__webpack_require__(277);var html=__webpack_require__(185);var cel=__webpack_require__(181);var global=__webpack_require__(11);var process=global.process;var setTask=global.setImmediate;var clearTask=global.clearImmediate;var MessageChannel=global.MessageChannel;var Dispatch=global.Dispatch;var counter=0;var queue={};var ONREADYSTATECHANGE='onreadystatechange';var defer,channel,port;var run=function(){var id=+this;if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id];fn();}};var listener=function(event){run.call(event.data);};if(!setTask||!clearTask){setTask=function setImmediate(fn){var args=[];var i=1;while(arguments.length>i)args.push(arguments[i++]);queue[++counter]=function(){invoke(typeof fn=='function'?fn:Function(fn),args);};defer(counter);return counter;};clearTask=function clearImmediate(id){delete queue[id];};if(__webpack_require__(59)(process)=='process'){defer=function(id){process.nextTick(ctx(run,id,1));};}else if(Dispatch&&Dispatch.now){defer=function(id){Dispatch.now(ctx(run,id,1));};}else if(MessageChannel){channel=new MessageChannel();port=channel.port2;channel.port1.onmessage=listener;defer=ctx(port.postMessage,port,1);}else if(global.addEventListener&&typeof postMessage=='function'&&!global.importScripts){defer=function(id){global.postMessage(id+'','*');};global.addEventListener('message',listener,false);}else if(ONREADYSTATECHANGE in cel('script')){defer=function(id){html.appendChild(cel('script'))[ONREADYSTATECHANGE]=function(){html.removeChild(this);run.call(id);};};}else{defer=function(id){setTimeout(ctx(run,id,1),0);};}}
module.exports={set:setTask,clear:clearTask};}),(function(module,exports,__webpack_require__){var global=__webpack_require__(11);var macrotask=__webpack_require__(204).set;var Observer=global.MutationObserver||global.WebKitMutationObserver;var process=global.process;var Promise=global.Promise;var isNode=__webpack_require__(59)(process)=='process';module.exports=function(){var head,last,notify;var flush=function(){var parent,fn;if(isNode&&(parent=process.domain))parent.exit();while(head){fn=head.fn;head=head.next;try{fn();}catch(e){if(head)notify();else last=undefined;throw e;}}last=undefined;if(parent)parent.enter();};if(isNode){notify=function(){process.nextTick(flush);};}else if(Observer&&!(global.navigator&&global.navigator.standalone)){var toggle=true;var node=document.createTextNode('');new Observer(flush).observe(node,{characterData:true});notify=function(){node.data=toggle=!toggle;};}else if(Promise&&Promise.resolve){var promise=Promise.resolve(undefined);notify=function(){promise.then(flush);};}else{notify=function(){macrotask.call(global,flush);};}
return function(fn){var task={fn:fn,next:undefined};if(last)last.next=task;if(!head){head=task;notify();}last=task;};};}),(function(module,exports,__webpack_require__){"use strict";var aFunction=__webpack_require__(42);function PromiseCapability(C){var resolve,reject;this.promise=new C(function($$resolve,$$reject){if(resolve!==undefined||reject!==undefined)throw TypeError('Bad Promise constructor');resolve=$$resolve;reject=$$reject;});this.resolve=aFunction(resolve);this.reject=aFunction(reject);}
module.exports.f=function(C){return new PromiseCapability(C);};}),(function(module,exports,__webpack_require__){"use strict";var global=__webpack_require__(11);var DESCRIPTORS=__webpack_require__(26);var LIBRARY=__webpack_require__(81);var $typed=__webpack_require__(157);var hide=__webpack_require__(48);var redefineAll=__webpack_require__(101);var fails=__webpack_require__(13);var anInstance=__webpack_require__(99);var toInteger=__webpack_require__(60);var toLength=__webpack_require__(22);var toIndex=__webpack_require__(297);var gOPN=__webpack_require__(97).f;var dP=__webpack_require__(27).f;var arrayFill=__webpack_require__(200);var setToStringTag=__webpack_require__(109);var ARRAY_BUFFER='ArrayBuffer';var DATA_VIEW='DataView';var PROTOTYPE='prototype';var WRONG_LENGTH='Wrong length!';var WRONG_INDEX='Wrong index!';var $ArrayBuffer=global[ARRAY_BUFFER];var $DataView=global[DATA_VIEW];var Math=global.Math;var RangeError=global.RangeError;var Infinity=global.Infinity;var BaseBuffer=$ArrayBuffer;var abs=Math.abs;var pow=Math.pow;var floor=Math.floor;var log=Math.log;var LN2=Math.LN2;var BUFFER='buffer';var BYTE_LENGTH='byteLength';var BYTE_OFFSET='byteOffset';var $BUFFER=DESCRIPTORS?'_b':BUFFER;var $LENGTH=DESCRIPTORS?'_l':BYTE_LENGTH;var $OFFSET=DESCRIPTORS?'_o':BYTE_OFFSET;function packIEEE754(value,mLen,nBytes){var buffer=new Array(nBytes);var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var rt=mLen===23?pow(2,-24)-pow(2,-77):0;var i=0;var s=value<0||value===0&&1/value<0?1:0;var e,m,c;value=abs(value);if(value!=value||value===Infinity){m=value!=value?1:0;e=eMax;}else{e=floor(log(value)/LN2);if(value*(c=pow(2,-e))<1){e--;c*=2;}
if(e+eBias>=1){value+=rt/c;}else{value+=rt*pow(2,1-eBias);}
if(value*c>=2){e++;c/=2;}
if(e+eBias>=eMax){m=0;e=eMax;}else if(e+eBias>=1){m=(value*c-1)*pow(2,mLen);e=e+eBias;}else{m=value*pow(2,eBias-1)*pow(2,mLen);e=0;}}
for(;mLen>=8;buffer[i++]=m&255,m/=256,mLen-=8);e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[i++]=e&255,e/=256,eLen-=8);buffer[--i]|=s*128;return buffer;}
function unpackIEEE754(buffer,mLen,nBytes){var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var nBits=eLen-7;var i=nBytes-1;var s=buffer[i--];var e=s&127;var m;s>>=7;for(;nBits>0;e=e*256+buffer[i],i--,nBits-=8);m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[i],i--,nBits-=8);if(e===0){e=1-eBias;}else if(e===eMax){return m?NaN:s?-Infinity:Infinity;}else{m=m+pow(2,mLen);e=e-eBias;}return(s?-1:1)*m*pow(2,e-mLen);}
function unpackI32(bytes){return bytes[3]<<24|bytes[2]<<16|bytes[1]<<8|bytes[0];}
function packI8(it){return[it&0xff];}
function packI16(it){return[it&0xff,it>>8&0xff];}
function packI32(it){return[it&0xff,it>>8&0xff,it>>16&0xff,it>>24&0xff];}
function packF64(it){return packIEEE754(it,52,8);}
function packF32(it){return packIEEE754(it,23,4);}
function addGetter(C,key,internal){dP(C[PROTOTYPE],key,{get:function(){return this[internal];}});}
function get(view,bytes,index,isLittleEndian){var numIndex=+index;var intIndex=toIndex(numIndex);if(intIndex+bytes>view[$LENGTH])throw RangeError(WRONG_INDEX);var store=view[$BUFFER]._b;var start=intIndex+view[$OFFSET];var pack=store.slice(start,start+bytes);return isLittleEndian?pack:pack.reverse();}
function set(view,bytes,index,conversion,value,isLittleEndian){var numIndex=+index;var intIndex=toIndex(numIndex);if(intIndex+bytes>view[$LENGTH])throw RangeError(WRONG_INDEX);var store=view[$BUFFER]._b;var start=intIndex+view[$OFFSET];var pack=conversion(+value);for(var i=0;i<bytes;i++)store[start+i]=pack[isLittleEndian?i:bytes-i-1];}
if(!$typed.ABV){$ArrayBuffer=function ArrayBuffer(length){anInstance(this,$ArrayBuffer,ARRAY_BUFFER);var byteLength=toIndex(length);this._b=arrayFill.call(new Array(byteLength),0);this[$LENGTH]=byteLength;};$DataView=function DataView(buffer,byteOffset,byteLength){anInstance(this,$DataView,DATA_VIEW);anInstance(buffer,$ArrayBuffer,DATA_VIEW);var bufferLength=buffer[$LENGTH];var offset=toInteger(byteOffset);if(offset<0||offset>bufferLength)throw RangeError('Wrong offset!');byteLength=byteLength===undefined?bufferLength-offset:toLength(byteLength);if(offset+byteLength>bufferLength)throw RangeError(WRONG_LENGTH);this[$BUFFER]=buffer;this[$OFFSET]=offset;this[$LENGTH]=byteLength;};if(DESCRIPTORS){addGetter($ArrayBuffer,BYTE_LENGTH,'_l');addGetter($DataView,BUFFER,'_b');addGetter($DataView,BYTE_LENGTH,'_l');addGetter($DataView,BYTE_OFFSET,'_o');}
redefineAll($DataView[PROTOTYPE],{getInt8:function getInt8(byteOffset){return get(this,1,byteOffset)[0]<<24>>24;},getUint8:function getUint8(byteOffset){return get(this,1,byteOffset)[0];},getInt16:function getInt16(byteOffset){var bytes=get(this,2,byteOffset,arguments[1]);return(bytes[1]<<8|bytes[0])<<16>>16;},getUint16:function getUint16(byteOffset){var bytes=get(this,2,byteOffset,arguments[1]);return bytes[1]<<8|bytes[0];},getInt32:function getInt32(byteOffset){return unpackI32(get(this,4,byteOffset,arguments[1]));},getUint32:function getUint32(byteOffset){return unpackI32(get(this,4,byteOffset,arguments[1]))>>>0;},getFloat32:function getFloat32(byteOffset){return unpackIEEE754(get(this,4,byteOffset,arguments[1]),23,4);},getFloat64:function getFloat64(byteOffset){return unpackIEEE754(get(this,8,byteOffset,arguments[1]),52,8);},setInt8:function setInt8(byteOffset,value){set(this,1,byteOffset,packI8,value);},setUint8:function setUint8(byteOffset,value){set(this,1,byteOffset,packI8,value);},setInt16:function setInt16(byteOffset,value){set(this,2,byteOffset,packI16,value,arguments[2]);},setUint16:function setUint16(byteOffset,value){set(this,2,byteOffset,packI16,value,arguments[2]);},setInt32:function setInt32(byteOffset,value){set(this,4,byteOffset,packI32,value,arguments[2]);},setUint32:function setUint32(byteOffset,value){set(this,4,byteOffset,packI32,value,arguments[2]);},setFloat32:function setFloat32(byteOffset,value){set(this,4,byteOffset,packF32,value,arguments[2]);},setFloat64:function setFloat64(byteOffset,value){set(this,8,byteOffset,packF64,value,arguments[2]);}});}else{if(!fails(function(){$ArrayBuffer(1);})||!fails(function(){new $ArrayBuffer(-1);})||fails(function(){new $ArrayBuffer();new $ArrayBuffer(1.5);new $ArrayBuffer(NaN);return $ArrayBuffer.name!=ARRAY_BUFFER;})){$ArrayBuffer=function ArrayBuffer(length){anInstance(this,$ArrayBuffer);return new BaseBuffer(toIndex(length));};var ArrayBufferProto=$ArrayBuffer[PROTOTYPE]=BaseBuffer[PROTOTYPE];for(var keys=gOPN(BaseBuffer),j=0,key;keys.length>j;){if(!((key=keys[j++])in $ArrayBuffer))hide($ArrayBuffer,key,BaseBuffer[key]);}
if(!LIBRARY)ArrayBufferProto.constructor=$ArrayBuffer;}
var view=new $DataView(new $ArrayBuffer(2));var $setInt8=$DataView[PROTOTYPE].setInt8;view.setInt8(0,2147483648);view.setInt8(1,2147483649);if(view.getInt8(0)||!view.getInt8(1))redefineAll($DataView[PROTOTYPE],{setInt8:function setInt8(byteOffset,value){$setInt8.call(this,byteOffset,value<<24>>24);},setUint8:function setUint8(byteOffset,value){$setInt8.call(this,byteOffset,value<<24>>24);}},true);}
setToStringTag($ArrayBuffer,ARRAY_BUFFER);setToStringTag($DataView,DATA_VIEW);hide($DataView[PROTOTYPE],$typed.VIEW,true);exports[ARRAY_BUFFER]=$ArrayBuffer;exports[DATA_VIEW]=$DataView;}),(function(module,exports,__webpack_require__){"use strict";var inherits=__webpack_require__(7)
var HashBase=__webpack_require__(311)
var Buffer=__webpack_require__(4).Buffer
var ARRAY16=new Array(16)
function MD5(){HashBase.call(this,64)
this._a=0x67452301
this._b=0xefcdab89
this._c=0x98badcfe
this._d=0x10325476}
inherits(MD5,HashBase)
MD5.prototype._update=function(){var M=ARRAY16
for(var i=0;i<16;++i)M[i]=this._block.readInt32LE(i*4)
var a=this._a
var b=this._b
var c=this._c
var d=this._d
a=fnF(a,b,c,d,M[0],0xd76aa478,7)
d=fnF(d,a,b,c,M[1],0xe8c7b756,12)
c=fnF(c,d,a,b,M[2],0x242070db,17)
b=fnF(b,c,d,a,M[3],0xc1bdceee,22)
a=fnF(a,b,c,d,M[4],0xf57c0faf,7)
d=fnF(d,a,b,c,M[5],0x4787c62a,12)
c=fnF(c,d,a,b,M[6],0xa8304613,17)
b=fnF(b,c,d,a,M[7],0xfd469501,22)
a=fnF(a,b,c,d,M[8],0x698098d8,7)
d=fnF(d,a,b,c,M[9],0x8b44f7af,12)
c=fnF(c,d,a,b,M[10],0xffff5bb1,17)
b=fnF(b,c,d,a,M[11],0x895cd7be,22)
a=fnF(a,b,c,d,M[12],0x6b901122,7)
d=fnF(d,a,b,c,M[13],0xfd987193,12)
c=fnF(c,d,a,b,M[14],0xa679438e,17)
b=fnF(b,c,d,a,M[15],0x49b40821,22)
a=fnG(a,b,c,d,M[1],0xf61e2562,5)
d=fnG(d,a,b,c,M[6],0xc040b340,9)
c=fnG(c,d,a,b,M[11],0x265e5a51,14)
b=fnG(b,c,d,a,M[0],0xe9b6c7aa,20)
a=fnG(a,b,c,d,M[5],0xd62f105d,5)
d=fnG(d,a,b,c,M[10],0x02441453,9)
c=fnG(c,d,a,b,M[15],0xd8a1e681,14)
b=fnG(b,c,d,a,M[4],0xe7d3fbc8,20)
a=fnG(a,b,c,d,M[9],0x21e1cde6,5)
d=fnG(d,a,b,c,M[14],0xc33707d6,9)
c=fnG(c,d,a,b,M[3],0xf4d50d87,14)
b=fnG(b,c,d,a,M[8],0x455a14ed,20)
a=fnG(a,b,c,d,M[13],0xa9e3e905,5)
d=fnG(d,a,b,c,M[2],0xfcefa3f8,9)
c=fnG(c,d,a,b,M[7],0x676f02d9,14)
b=fnG(b,c,d,a,M[12],0x8d2a4c8a,20)
a=fnH(a,b,c,d,M[5],0xfffa3942,4)
d=fnH(d,a,b,c,M[8],0x8771f681,11)
c=fnH(c,d,a,b,M[11],0x6d9d6122,16)
b=fnH(b,c,d,a,M[14],0xfde5380c,23)
a=fnH(a,b,c,d,M[1],0xa4beea44,4)
d=fnH(d,a,b,c,M[4],0x4bdecfa9,11)
c=fnH(c,d,a,b,M[7],0xf6bb4b60,16)
b=fnH(b,c,d,a,M[10],0xbebfbc70,23)
a=fnH(a,b,c,d,M[13],0x289b7ec6,4)
d=fnH(d,a,b,c,M[0],0xeaa127fa,11)
c=fnH(c,d,a,b,M[3],0xd4ef3085,16)
b=fnH(b,c,d,a,M[6],0x04881d05,23)
a=fnH(a,b,c,d,M[9],0xd9d4d039,4)
d=fnH(d,a,b,c,M[12],0xe6db99e5,11)
c=fnH(c,d,a,b,M[15],0x1fa27cf8,16)
b=fnH(b,c,d,a,M[2],0xc4ac5665,23)
a=fnI(a,b,c,d,M[0],0xf4292244,6)
d=fnI(d,a,b,c,M[7],0x432aff97,10)
c=fnI(c,d,a,b,M[14],0xab9423a7,15)
b=fnI(b,c,d,a,M[5],0xfc93a039,21)
a=fnI(a,b,c,d,M[12],0x655b59c3,6)
d=fnI(d,a,b,c,M[3],0x8f0ccc92,10)
c=fnI(c,d,a,b,M[10],0xffeff47d,15)
b=fnI(b,c,d,a,M[1],0x85845dd1,21)
a=fnI(a,b,c,d,M[8],0x6fa87e4f,6)
d=fnI(d,a,b,c,M[15],0xfe2ce6e0,10)
c=fnI(c,d,a,b,M[6],0xa3014314,15)
b=fnI(b,c,d,a,M[13],0x4e0811a1,21)
a=fnI(a,b,c,d,M[4],0xf7537e82,6)
d=fnI(d,a,b,c,M[11],0xbd3af235,10)
c=fnI(c,d,a,b,M[2],0x2ad7d2bb,15)
b=fnI(b,c,d,a,M[9],0xeb86d391,21)
this._a=(this._a+a)|0
this._b=(this._b+b)|0
this._c=(this._c+c)|0
this._d=(this._d+d)|0}
MD5.prototype._digest=function(){this._block[this._blockOffset++]=0x80
if(this._blockOffset>56){this._block.fill(0,this._blockOffset,64)
this._update()
this._blockOffset=0}
this._block.fill(0,this._blockOffset,56)
this._block.writeUInt32LE(this._length[0],56)
this._block.writeUInt32LE(this._length[1],60)
this._update()
var buffer=Buffer.allocUnsafe(16)
buffer.writeInt32LE(this._a,0)
buffer.writeInt32LE(this._b,4)
buffer.writeInt32LE(this._c,8)
buffer.writeInt32LE(this._d,12)
return buffer}
function rotl(x,n){return(x<<n)|(x>>>(32-n))}
function fnF(a,b,c,d,m,k,s){return(rotl((a+((b&c)|((~b)&d))+m+k)|0,s)+b)|0}
function fnG(a,b,c,d,m,k,s){return(rotl((a+((b&d)|(c&(~d)))+m+k)|0,s)+b)|0}
function fnH(a,b,c,d,m,k,s){return(rotl((a+(b^c^d)+m+k)|0,s)+b)|0}
function fnI(a,b,c,d,m,k,s){return(rotl((a+((c^(b|(~d))))+m+k)|0,s)+b)|0}
module.exports=MD5}),(function(module,exports,__webpack_require__){"use strict";(function(process,setImmediate,global){var pna=__webpack_require__(162);module.exports=Writable;function WriteReq(chunk,encoding,cb){this.chunk=chunk;this.encoding=encoding;this.callback=cb;this.next=null;}
function CorkedRequest(state){var _this=this;this.next=null;this.entry=null;this.finish=function(){onCorkedFinish(_this,state);};}
var asyncWrite=!process.browser&&['v0.10','v0.9.'].indexOf(process.version.slice(0,5))>-1?setImmediate:pna.nextTick;var Duplex;Writable.WritableState=WritableState;var util=__webpack_require__(114);util.inherits=__webpack_require__(7);var internalUtil={deprecate:__webpack_require__(653)};var Stream=__webpack_require__(313);var Buffer=__webpack_require__(4).Buffer;var OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk);}
function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array;}
var destroyImpl=__webpack_require__(314);util.inherits(Writable,Stream);function nop(){}
function WritableState(options,stream){Duplex=Duplex||__webpack_require__(105);options=options||{};var isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode;if(isDuplex)this.objectMode=this.objectMode||!!options.writableObjectMode;var hwm=options.highWaterMark;var writableHwm=options.writableHighWaterMark;var defaultHwm=this.objectMode?16:16*1024;if(hwm||hwm===0)this.highWaterMark=hwm;else if(isDuplex&&(writableHwm||writableHwm===0))this.highWaterMark=writableHwm;else this.highWaterMark=defaultHwm;this.highWaterMark=Math.floor(this.highWaterMark);this.finalCalled=false;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;this.destroyed=false;var noDecode=options.decodeStrings===false;this.decodeStrings=!noDecode;this.defaultEncoding=options.defaultEncoding||'utf8';this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(er){onwrite(stream,er);};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.bufferedRequestCount=0;this.corkedRequestsFree=new CorkedRequest(this);}
WritableState.prototype.getBuffer=function getBuffer(){var current=this.bufferedRequest;var out=[];while(current){out.push(current);current=current.next;}
return out;};(function(){try{Object.defineProperty(WritableState.prototype,'buffer',{get:internalUtil.deprecate(function(){return this.getBuffer();},'_writableState.buffer is deprecated. Use _writableState.getBuffer '+'instead.','DEP0003')});}catch(_){}})();var realHasInstance;if(typeof Symbol==='function'&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==='function'){realHasInstance=Function.prototype[Symbol.hasInstance];Object.defineProperty(Writable,Symbol.hasInstance,{value:function(object){if(realHasInstance.call(this,object))return true;if(this!==Writable)return false;return object&&object._writableState instanceof WritableState;}});}else{realHasInstance=function(object){return object instanceof this;};}
function Writable(options){Duplex=Duplex||__webpack_require__(105);if(!realHasInstance.call(Writable,this)&&!(this instanceof Duplex)){return new Writable(options);}
this._writableState=new WritableState(options,this);this.writable=true;if(options){if(typeof options.write==='function')this._write=options.write;if(typeof options.writev==='function')this._writev=options.writev;if(typeof options.destroy==='function')this._destroy=options.destroy;if(typeof options.final==='function')this._final=options.final;}
Stream.call(this);}
Writable.prototype.pipe=function(){this.emit('error',new Error('Cannot pipe, not readable'));};function writeAfterEnd(stream,cb){var er=new Error('write after end');stream.emit('error',er);pna.nextTick(cb,er);}
function validChunk(stream,state,chunk,cb){var valid=true;var er=false;if(chunk===null){er=new TypeError('May not write null values to stream');}else if(typeof chunk!=='string'&&chunk!==undefined&&!state.objectMode){er=new TypeError('Invalid non-string/buffer chunk');}
if(er){stream.emit('error',er);pna.nextTick(cb,er);valid=false;}
return valid;}
Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState;var ret=false;var isBuf=!state.objectMode&&_isUint8Array(chunk);if(isBuf&&!Buffer.isBuffer(chunk)){chunk=_uint8ArrayToBuffer(chunk);}
if(typeof encoding==='function'){cb=encoding;encoding=null;}
if(isBuf)encoding='buffer';else if(!encoding)encoding=state.defaultEncoding;if(typeof cb!=='function')cb=nop;if(state.ended)writeAfterEnd(this,cb);else if(isBuf||validChunk(this,state,chunk,cb)){state.pendingcb++;ret=writeOrBuffer(this,state,isBuf,chunk,encoding,cb);}
return ret;};Writable.prototype.cork=function(){var state=this._writableState;state.corked++;};Writable.prototype.uncork=function(){var state=this._writableState;if(state.corked){state.corked--;if(!state.writing&&!state.corked&&!state.finished&&!state.bufferProcessing&&state.bufferedRequest)clearBuffer(this,state);}};Writable.prototype.setDefaultEncoding=function setDefaultEncoding(encoding){if(typeof encoding==='string')encoding=encoding.toLowerCase();if(!(['hex','utf8','utf-8','ascii','binary','base64','ucs2','ucs-2','utf16le','utf-16le','raw'].indexOf((encoding+'').toLowerCase())>-1))throw new TypeError('Unknown encoding: '+encoding);this._writableState.defaultEncoding=encoding;return this;};function decodeChunk(state,chunk,encoding){if(!state.objectMode&&state.decodeStrings!==false&&typeof chunk==='string'){chunk=Buffer.from(chunk,encoding);}
return chunk;}
Object.defineProperty(Writable.prototype,'writableHighWaterMark',{enumerable:false,get:function(){return this._writableState.highWaterMark;}});function writeOrBuffer(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=decodeChunk(state,chunk,encoding);if(chunk!==newChunk){isBuf=true;encoding='buffer';chunk=newChunk;}}
var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;if(!ret)state.needDrain=true;if(state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk:chunk,encoding:encoding,isBuf:isBuf,callback:cb,next:null};if(last){last.next=state.lastBufferedRequest;}else{state.bufferedRequest=state.lastBufferedRequest;}
state.bufferedRequestCount+=1;}else{doWrite(stream,state,false,len,chunk,encoding,cb);}
return ret;}
function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len;state.writecb=cb;state.writing=true;state.sync=true;if(writev)stream._writev(chunk,state.onwrite);else stream._write(chunk,encoding,state.onwrite);state.sync=false;}
function onwriteError(stream,state,sync,er,cb){--state.pendingcb;if(sync){pna.nextTick(cb,er);pna.nextTick(finishMaybe,stream,state);stream._writableState.errorEmitted=true;stream.emit('error',er);}else{cb(er);stream._writableState.errorEmitted=true;stream.emit('error',er);finishMaybe(stream,state);}}
function onwriteStateUpdate(state){state.writing=false;state.writecb=null;state.length-=state.writelen;state.writelen=0;}
function onwrite(stream,er){var state=stream._writableState;var sync=state.sync;var cb=state.writecb;onwriteStateUpdate(state);if(er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(state);if(!finished&&!state.corked&&!state.bufferProcessing&&state.bufferedRequest){clearBuffer(stream,state);}
if(sync){asyncWrite(afterWrite,stream,state,finished,cb);}else{afterWrite(stream,state,finished,cb);}}}
function afterWrite(stream,state,finished,cb){if(!finished)onwriteDrain(stream,state);state.pendingcb--;cb();finishMaybe(stream,state);}
function onwriteDrain(stream,state){if(state.length===0&&state.needDrain){state.needDrain=false;stream.emit('drain');}}
function clearBuffer(stream,state){state.bufferProcessing=true;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount;var buffer=new Array(l);var holder=state.corkedRequestsFree;holder.entry=entry;var count=0;var allBuffers=true;while(entry){buffer[count]=entry;if(!entry.isBuf)allBuffers=false;entry=entry.next;count+=1;}
buffer.allBuffers=allBuffers;doWrite(stream,state,true,state.length,buffer,'',holder.finish);state.pendingcb++;state.lastBufferedRequest=null;if(holder.next){state.corkedRequestsFree=holder.next;holder.next=null;}else{state.corkedRequestsFree=new CorkedRequest(state);}
state.bufferedRequestCount=0;}else{while(entry){var chunk=entry.chunk;var encoding=entry.encoding;var cb=entry.callback;var len=state.objectMode?1:chunk.length;doWrite(stream,state,false,len,chunk,encoding,cb);entry=entry.next;state.bufferedRequestCount--;if(state.writing){break;}}
if(entry===null)state.lastBufferedRequest=null;}
state.bufferedRequest=entry;state.bufferProcessing=false;}
Writable.prototype._write=function(chunk,encoding,cb){cb(new Error('_write() is not implemented'));};Writable.prototype._writev=null;Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;if(typeof chunk==='function'){cb=chunk;chunk=null;encoding=null;}else if(typeof encoding==='function'){cb=encoding;encoding=null;}
if(chunk!==null&&chunk!==undefined)this.write(chunk,encoding);if(state.corked){state.corked=1;this.uncork();}
if(!state.ending&&!state.finished)endWritable(this,state,cb);};function needFinish(state){return state.ending&&state.length===0&&state.bufferedRequest===null&&!state.finished&&!state.writing;}
function callFinal(stream,state){stream._final(function(err){state.pendingcb--;if(err){stream.emit('error',err);}
state.prefinished=true;stream.emit('prefinish');finishMaybe(stream,state);});}
function prefinish(stream,state){if(!state.prefinished&&!state.finalCalled){if(typeof stream._final==='function'){state.pendingcb++;state.finalCalled=true;pna.nextTick(callFinal,stream,state);}else{state.prefinished=true;stream.emit('prefinish');}}}
function finishMaybe(stream,state){var need=needFinish(state);if(need){prefinish(stream,state);if(state.pendingcb===0){state.finished=true;stream.emit('finish');}}
return need;}
function endWritable(stream,state,cb){state.ending=true;finishMaybe(stream,state);if(cb){if(state.finished)pna.nextTick(cb);else stream.once('finish',cb);}
state.ended=true;stream.writable=false;}
function onCorkedFinish(corkReq,state,err){var entry=corkReq.entry;corkReq.entry=null;while(entry){var cb=entry.callback;state.pendingcb--;cb(err);entry=entry.next;}
if(state.corkedRequestsFree){state.corkedRequestsFree.next=corkReq;}else{state.corkedRequestsFree=corkReq;}}
Object.defineProperty(Writable.prototype,'destroyed',{get:function(){if(this._writableState===undefined){return false;}
return this._writableState.destroyed;},set:function(value){if(!this._writableState){return;}
this._writableState.destroyed=value;}});Writable.prototype.destroy=destroyImpl.destroy;Writable.prototype._undestroy=destroyImpl.undestroy;Writable.prototype._destroy=function(err,cb){this.end();cb(err);};}.call(exports,__webpack_require__(20),__webpack_require__(163).setImmediate,__webpack_require__(10)))}),(function(module,exports,__webpack_require__){"use strict";var Buffer=__webpack_require__(4).Buffer;var isEncoding=Buffer.isEncoding||function(encoding){encoding=''+encoding;switch(encoding&&encoding.toLowerCase()){case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':return true;default:return false;}};function _normalizeEncoding(enc){if(!enc)return 'utf8';var retried;while(true){switch(enc){case 'utf8':case 'utf-8':return 'utf8';case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':return 'utf16le';case 'latin1':case 'binary':return 'latin1';case 'base64':case 'ascii':case 'hex':return enc;default:if(retried)return;enc=(''+enc).toLowerCase();retried=true;}}};function normalizeEncoding(enc){var nenc=_normalizeEncoding(enc);if(typeof nenc!=='string'&&(Buffer.isEncoding===isEncoding||!isEncoding(enc)))throw new Error('Unknown encoding: '+enc);return nenc||enc;}
exports.StringDecoder=StringDecoder;function StringDecoder(encoding){this.encoding=normalizeEncoding(encoding);var nb;switch(this.encoding){case 'utf16le':this.text=utf16Text;this.end=utf16End;nb=4;break;case 'utf8':this.fillLast=utf8FillLast;nb=4;break;case 'base64':this.text=base64Text;this.end=base64End;nb=3;break;default:this.write=simpleWrite;this.end=simpleEnd;return;}
this.lastNeed=0;this.lastTotal=0;this.lastChar=Buffer.allocUnsafe(nb);}
StringDecoder.prototype.write=function(buf){if(buf.length===0)return '';var r;var i;if(this.lastNeed){r=this.fillLast(buf);if(r===undefined)return '';i=this.lastNeed;this.lastNeed=0;}else{i=0;}
if(i<buf.length)return r?r+this.text(buf,i):this.text(buf,i);return r||'';};StringDecoder.prototype.end=utf8End;StringDecoder.prototype.text=utf8Text;StringDecoder.prototype.fillLast=function(buf){if(this.lastNeed<=buf.length){buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal);}
buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,buf.length);this.lastNeed-=buf.length;};function utf8CheckByte(byte){if(byte<=0x7F)return 0;else if(byte>>5===0x06)return 2;else if(byte>>4===0x0E)return 3;else if(byte>>3===0x1E)return 4;return byte>>6===0x02?-1:-2;}
function utf8CheckIncomplete(self,buf,i){var j=buf.length-1;if(j<i)return 0;var nb=utf8CheckByte(buf[j]);if(nb>=0){if(nb>0)self.lastNeed=nb-1;return nb;}
if(--j<i||nb===-2)return 0;nb=utf8CheckByte(buf[j]);if(nb>=0){if(nb>0)self.lastNeed=nb-2;return nb;}
if(--j<i||nb===-2)return 0;nb=utf8CheckByte(buf[j]);if(nb>=0){if(nb>0){if(nb===2)nb=0;else self.lastNeed=nb-3;}
return nb;}
return 0;}
function utf8CheckExtraBytes(self,buf,p){if((buf[0]&0xC0)!==0x80){self.lastNeed=0;return '\ufffd';}
if(self.lastNeed>1&&buf.length>1){if((buf[1]&0xC0)!==0x80){self.lastNeed=1;return '\ufffd';}
if(self.lastNeed>2&&buf.length>2){if((buf[2]&0xC0)!==0x80){self.lastNeed=2;return '\ufffd';}}}}
function utf8FillLast(buf){var p=this.lastTotal-this.lastNeed;var r=utf8CheckExtraBytes(this,buf,p);if(r!==undefined)return r;if(this.lastNeed<=buf.length){buf.copy(this.lastChar,p,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal);}
buf.copy(this.lastChar,p,0,buf.length);this.lastNeed-=buf.length;}
function utf8Text(buf,i){var total=utf8CheckIncomplete(this,buf,i);if(!this.lastNeed)return buf.toString('utf8',i);this.lastTotal=total;var end=buf.length-(total-this.lastNeed);buf.copy(this.lastChar,0,end);return buf.toString('utf8',i,end);}
function utf8End(buf){var r=buf&&buf.length?this.write(buf):'';if(this.lastNeed)return r+'\ufffd';return r;}
function utf16Text(buf,i){if((buf.length-i)%2===0){var r=buf.toString('utf16le',i);if(r){var c=r.charCodeAt(r.length-1);if(c>=0xD800&&c<=0xDBFF){this.lastNeed=2;this.lastTotal=4;this.lastChar[0]=buf[buf.length-2];this.lastChar[1]=buf[buf.length-1];return r.slice(0,-1);}}
return r;}
this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=buf[buf.length-1];return buf.toString('utf16le',i,buf.length-1);}
function utf16End(buf){var r=buf&&buf.length?this.write(buf):'';if(this.lastNeed){var end=this.lastTotal-this.lastNeed;return r+this.lastChar.toString('utf16le',0,end);}
return r;}
function base64Text(buf,i){var n=(buf.length-i)%3;if(n===0)return buf.toString('base64',i);this.lastNeed=3-n;this.lastTotal=3;if(n===1){this.lastChar[0]=buf[buf.length-1];}else{this.lastChar[0]=buf[buf.length-2];this.lastChar[1]=buf[buf.length-1];}
return buf.toString('base64',i,buf.length-n);}
function base64End(buf){var r=buf&&buf.length?this.write(buf):'';if(this.lastNeed)return r+this.lastChar.toString('base64',0,3-this.lastNeed);return r;}
function simpleWrite(buf){return buf.toString(this.encoding);}
function simpleEnd(buf){return buf&&buf.length?this.write(buf):'';}}),(function(module,exports,__webpack_require__){"use strict";var Buffer=__webpack_require__(1).Buffer
var inherits=__webpack_require__(7)
var HashBase=__webpack_require__(311)
var ARRAY16=new Array(16)
var zl=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]
var zr=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]
var sl=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]
var sr=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]
var hl=[0x00000000,0x5a827999,0x6ed9eba1,0x8f1bbcdc,0xa953fd4e]
var hr=[0x50a28be6,0x5c4dd124,0x6d703ef3,0x7a6d76e9,0x00000000]
function RIPEMD160(){HashBase.call(this,64)
this._a=0x67452301
this._b=0xefcdab89
this._c=0x98badcfe
this._d=0x10325476
this._e=0xc3d2e1f0}
inherits(RIPEMD160,HashBase)
RIPEMD160.prototype._update=function(){var words=ARRAY16
for(var j=0;j<16;++j)words[j]=this._block.readInt32LE(j*4)
var al=this._a|0
var bl=this._b|0
var cl=this._c|0
var dl=this._d|0
var el=this._e|0
var ar=this._a|0
var br=this._b|0
var cr=this._c|0
var dr=this._d|0
var er=this._e|0
for(var i=0;i<80;i+=1){var tl
var tr
if(i<16){tl=fn1(al,bl,cl,dl,el,words[zl[i]],hl[0],sl[i])
tr=fn5(ar,br,cr,dr,er,words[zr[i]],hr[0],sr[i])}else if(i<32){tl=fn2(al,bl,cl,dl,el,words[zl[i]],hl[1],sl[i])
tr=fn4(ar,br,cr,dr,er,words[zr[i]],hr[1],sr[i])}else if(i<48){tl=fn3(al,bl,cl,dl,el,words[zl[i]],hl[2],sl[i])
tr=fn3(ar,br,cr,dr,er,words[zr[i]],hr[2],sr[i])}else if(i<64){tl=fn4(al,bl,cl,dl,el,words[zl[i]],hl[3],sl[i])
tr=fn2(ar,br,cr,dr,er,words[zr[i]],hr[3],sr[i])}else{tl=fn5(al,bl,cl,dl,el,words[zl[i]],hl[4],sl[i])
tr=fn1(ar,br,cr,dr,er,words[zr[i]],hr[4],sr[i])}
al=el
el=dl
dl=rotl(cl,10)
cl=bl
bl=tl
ar=er
er=dr
dr=rotl(cr,10)
cr=br
br=tr}
var t=(this._b+cl+dr)|0
this._b=(this._c+dl+er)|0
this._c=(this._d+el+ar)|0
this._d=(this._e+al+br)|0
this._e=(this._a+bl+cr)|0
this._a=t}
RIPEMD160.prototype._digest=function(){this._block[this._blockOffset++]=0x80
if(this._blockOffset>56){this._block.fill(0,this._blockOffset,64)
this._update()
this._blockOffset=0}
this._block.fill(0,this._blockOffset,56)
this._block.writeUInt32LE(this._length[0],56)
this._block.writeUInt32LE(this._length[1],60)
this._update()
var buffer=Buffer.alloc?Buffer.alloc(20):new Buffer(20)
buffer.writeInt32LE(this._a,0)
buffer.writeInt32LE(this._b,4)
buffer.writeInt32LE(this._c,8)
buffer.writeInt32LE(this._d,12)
buffer.writeInt32LE(this._e,16)
return buffer}
function rotl(x,n){return(x<<n)|(x>>>(32-n))}
function fn1(a,b,c,d,e,m,k,s){return(rotl((a+(b^c^d)+m+k)|0,s)+e)|0}
function fn2(a,b,c,d,e,m,k,s){return(rotl((a+((b&c)|((~b)&d))+m+k)|0,s)+e)|0}
function fn3(a,b,c,d,e,m,k,s){return(rotl((a+((b|(~c))^d)+m+k)|0,s)+e)|0}
function fn4(a,b,c,d,e,m,k,s){return(rotl((a+((b&d)|(c&(~d)))+m+k)|0,s)+e)|0}
function fn5(a,b,c,d,e,m,k,s){return(rotl((a+(b^(c|(~d)))+m+k)|0,s)+e)|0}
module.exports=RIPEMD160}),(function(module,exports,__webpack_require__){var exports=module.exports=function SHA(algorithm){algorithm=algorithm.toLowerCase()
var Algorithm=exports[algorithm]
if(!Algorithm)throw new Error(algorithm+' is not supported (we accept pull requests)')
return new Algorithm()}
exports.sha=__webpack_require__(659)
exports.sha1=__webpack_require__(660)
exports.sha224=__webpack_require__(661)
exports.sha256=__webpack_require__(316)
exports.sha384=__webpack_require__(662)
exports.sha512=__webpack_require__(317)}),(function(module,exports,__webpack_require__){"use strict";exports.utils=__webpack_require__(668);exports.Cipher=__webpack_require__(669);exports.DES=__webpack_require__(670);exports.CBC=__webpack_require__(671);exports.EDE=__webpack_require__(672);}),(function(module,exports,__webpack_require__){var ciphers=__webpack_require__(673)
var deciphers=__webpack_require__(681)
var modes=__webpack_require__(326)
function getCiphers(){return Object.keys(modes)}
exports.createCipher=exports.Cipher=ciphers.createCipher
exports.createCipheriv=exports.Cipheriv=ciphers.createCipheriv
exports.createDecipher=exports.Decipher=deciphers.createDecipher
exports.createDecipheriv=exports.Decipheriv=deciphers.createDecipheriv
exports.listCiphers=exports.getCiphers=getCiphers}),(function(module,exports,__webpack_require__){var modeModules={ECB:__webpack_require__(674),CBC:__webpack_require__(675),CFB:__webpack_require__(676),CFB8:__webpack_require__(677),CFB1:__webpack_require__(678),OFB:__webpack_require__(679),CTR:__webpack_require__(324),GCM:__webpack_require__(324)}
var modes=__webpack_require__(326)
for(var key in modes){modes[key].module=modeModules[modes[key].mode]}
module.exports=modes}),(function(module,exports,__webpack_require__){(function(Buffer){var bn=__webpack_require__(29);var randomBytes=__webpack_require__(102);module.exports=crt;function blind(priv){var r=getr(priv);var blinder=r.toRed(bn.mont(priv.modulus)).redPow(new bn(priv.publicExponent)).fromRed();return{blinder:blinder,unblinder:r.invm(priv.modulus)};}
function crt(msg,priv){var blinds=blind(priv);var len=priv.modulus.byteLength();var mod=bn.mont(priv.modulus);var blinded=new bn(msg).mul(blinds.blinder).umod(priv.modulus);var c1=blinded.toRed(bn.mont(priv.prime1));var c2=blinded.toRed(bn.mont(priv.prime2));var qinv=priv.coefficient;var p=priv.prime1;var q=priv.prime2;var m1=c1.redPow(priv.exponent1);var m2=c2.redPow(priv.exponent2);m1=m1.fromRed();m2=m2.fromRed();var h=m1.isub(m2).imul(qinv).umod(p);h.imul(q);m2.iadd(h);return new Buffer(m2.imul(blinds.unblinder).umod(priv.modulus).toArray(false,len));}
crt.getr=getr;function getr(priv){var len=priv.modulus.byteLength();var r=new bn(randomBytes(len));while(r.cmp(priv.modulus)>=0||!r.umod(priv.prime1)||!r.umod(priv.prime2)){r=new bn(randomBytes(len));}
return r;}}.call(exports,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){var hash=exports;hash.utils=__webpack_require__(68);hash.common=__webpack_require__(129);hash.sha=__webpack_require__(697);hash.ripemd=__webpack_require__(701);hash.hmac=__webpack_require__(702);hash.sha1=hash.sha.sha1;hash.sha256=hash.sha.sha256;hash.sha224=hash.sha.sha224;hash.sha384=hash.sha.sha384;hash.sha512=hash.sha.sha512;hash.ripemd160=hash.ripemd.ripemd160;}),(function(module,exports){var indexOf=[].indexOf;module.exports=function(arr,obj){if(indexOf)return arr.indexOf(obj);for(var i=0;i<arr.length;++i){if(arr[i]===obj)return i;}
return-1;};}),(function(module,exports){var types={Array:function(value){return value!==null&&value!==undefined&&value.constructor===Array},Boolean:function(value){return typeof value==='boolean'},Function:function(value){return typeof value==='function'},Nil:function(value){return value===undefined||value===null},Number:function(value){return typeof value==='number'},Object:function(value){return typeof value==='object'},String:function(value){return typeof value==='string'},'':function(){return true}}
types.Null=types.Nil
for(var typeName in types){types[typeName].toJSON=function(t){return t}.bind(null,typeName)}
module.exports=types}),(function(module,exports,__webpack_require__){var decompile=__webpack_require__(31).decompile
var multisig=__webpack_require__(221)
var nullData=__webpack_require__(756)
var pubKey=__webpack_require__(222)
var pubKeyHash=__webpack_require__(223)
var scriptHash=__webpack_require__(761)
var witnessPubKeyHash=__webpack_require__(764)
var witnessScriptHash=__webpack_require__(766)
var witnessCommitment=__webpack_require__(768)
var types={MULTISIG:'multisig',NONSTANDARD:'nonstandard',NULLDATA:'nulldata',P2PK:'pubkey',P2PKH:'pubkeyhash',P2SH:'scripthash',P2WPKH:'witnesspubkeyhash',P2WSH:'witnessscripthash',WITNESS_COMMITMENT:'witnesscommitment'}
function classifyOutput(script){if(witnessPubKeyHash.output.check(script))return types.P2WPKH
if(witnessScriptHash.output.check(script))return types.P2WSH
if(pubKeyHash.output.check(script))return types.P2PKH
if(scriptHash.output.check(script))return types.P2SH
var chunks=decompile(script)
if(multisig.output.check(chunks))return types.MULTISIG
if(pubKey.output.check(chunks))return types.P2PK
if(witnessCommitment.output.check(chunks))return types.WITNESS_COMMITMENT
if(nullData.output.check(chunks))return types.NULLDATA
return types.NONSTANDARD}
function classifyInput(script,allowIncomplete){var chunks=decompile(script)
if(pubKeyHash.input.check(chunks))return types.P2PKH
if(scriptHash.input.check(chunks,allowIncomplete))return types.P2SH
if(multisig.input.check(chunks,allowIncomplete))return types.MULTISIG
if(pubKey.input.check(chunks))return types.P2PK
return types.NONSTANDARD}
function classifyWitness(script,allowIncomplete){var chunks=decompile(script)
if(witnessPubKeyHash.input.check(chunks))return types.P2WPKH
if(witnessScriptHash.input.check(chunks,allowIncomplete))return types.P2WSH
return types.NONSTANDARD}
module.exports={classifyInput:classifyInput,classifyOutput:classifyOutput,classifyWitness:classifyWitness,multisig:multisig,nullData:nullData,pubKey:pubKey,pubKeyHash:pubKeyHash,scriptHash:scriptHash,witnessPubKeyHash:witnessPubKeyHash,witnessScriptHash:witnessScriptHash,witnessCommitment:witnessCommitment,types:types}}),(function(module,exports,__webpack_require__){module.exports={input:__webpack_require__(755),output:__webpack_require__(351)}}),(function(module,exports,__webpack_require__){module.exports={input:__webpack_require__(757),output:__webpack_require__(758)}}),(function(module,exports,__webpack_require__){module.exports={input:__webpack_require__(759),output:__webpack_require__(760)}}),(function(module,exports,__webpack_require__){"use strict";var Buffer=__webpack_require__(4).Buffer
var MAX_SAFE_INTEGER=9007199254740991
function checkUInt53(n){if(n<0||n>MAX_SAFE_INTEGER||n%1!==0)throw new RangeError('value out of range')}
function encode(number,buffer,offset){checkUInt53(number)
if(!buffer)buffer=Buffer.allocUnsafe(encodingLength(number))
if(!Buffer.isBuffer(buffer))throw new TypeError('buffer must be a Buffer instance')
if(!offset)offset=0
if(number<0xfd){buffer.writeUInt8(number,offset)
encode.bytes=1}else if(number<=0xffff){buffer.writeUInt8(0xfd,offset)
buffer.writeUInt16LE(number,offset+1)
encode.bytes=3}else if(number<=0xffffffff){buffer.writeUInt8(0xfe,offset)
buffer.writeUInt32LE(number,offset+1)
encode.bytes=5}else{buffer.writeUInt8(0xff,offset)
buffer.writeUInt32LE(number>>>0,offset+1)
buffer.writeUInt32LE((number/0x100000000)|0,offset+5)
encode.bytes=9}
return buffer}
function decode(buffer,offset){if(!Buffer.isBuffer(buffer))throw new TypeError('buffer must be a Buffer instance')
if(!offset)offset=0
var first=buffer.readUInt8(offset)
if(first<0xfd){decode.bytes=1
return first}else if(first===0xfd){decode.bytes=3
return buffer.readUInt16LE(offset+1)}else if(first===0xfe){decode.bytes=5
return buffer.readUInt32LE(offset+1)}else{decode.bytes=9
var lo=buffer.readUInt32LE(offset+1)
var hi=buffer.readUInt32LE(offset+5)
var number=hi*0x0100000000+lo
checkUInt53(number)
return number}}
function encodingLength(number){checkUInt53(number)
return(number<0xfd?1:number<=0xffff?3:number<=0xffffffff?5:9)}
module.exports={encode:encode,decode:decode,encodingLength:encodingLength}}),(function(module,exports,__webpack_require__){var Buffer=__webpack_require__(4).Buffer
var bcrypto=__webpack_require__(116)
var bscript=__webpack_require__(31)
var bufferutils=__webpack_require__(354)
var opcodes=__webpack_require__(43)
var typeforce=__webpack_require__(23)
var types=__webpack_require__(37)
var varuint=__webpack_require__(224)
function varSliceSize(someScript){var length=someScript.length
return varuint.encodingLength(length)+length}
function vectorSize(someVector){var length=someVector.length
return varuint.encodingLength(length)+someVector.reduce(function(sum,witness){return sum+varSliceSize(witness)},0)}
function Transaction(){this.version=1
this.locktime=0
this.ins=[]
this.outs=[]}
Transaction.DEFAULT_SEQUENCE=0xffffffff
Transaction.SIGHASH_ALL=0x01
Transaction.SIGHASH_NONE=0x02
Transaction.SIGHASH_SINGLE=0x03
Transaction.SIGHASH_ANYONECANPAY=0x80
Transaction.ADVANCED_TRANSACTION_MARKER=0x00
Transaction.ADVANCED_TRANSACTION_FLAG=0x01
var EMPTY_SCRIPT=Buffer.allocUnsafe(0)
var EMPTY_WITNESS=[]
var ZERO=Buffer.from('0000000000000000000000000000000000000000000000000000000000000000','hex')
var ONE=Buffer.from('0000000000000000000000000000000000000000000000000000000000000001','hex')
var VALUE_UINT64_MAX=Buffer.from('ffffffffffffffff','hex')
var BLANK_OUTPUT={script:EMPTY_SCRIPT,valueBuffer:VALUE_UINT64_MAX}
Transaction.fromBuffer=function(buffer,__noStrict){var offset=0
function readSlice(n){offset+=n
return buffer.slice(offset-n,offset)}
function readUInt32(){var i=buffer.readUInt32LE(offset)
offset+=4
return i}
function readInt32(){var i=buffer.readInt32LE(offset)
offset+=4
return i}
function readUInt64(){var i=bufferutils.readUInt64LE(buffer,offset)
offset+=8
return i}
function readVarInt(){var vi=varuint.decode(buffer,offset)
offset+=varuint.decode.bytes
return vi}
function readVarSlice(){return readSlice(readVarInt())}
function readVector(){var count=readVarInt()
var vector=[]
for(var i=0;i<count;i++)vector.push(readVarSlice())
return vector}
var tx=new Transaction()
tx.version=readInt32()
var marker=buffer.readUInt8(offset)
var flag=buffer.readUInt8(offset+1)
var hasWitnesses=false
if(marker===Transaction.ADVANCED_TRANSACTION_MARKER&&flag===Transaction.ADVANCED_TRANSACTION_FLAG){offset+=2
hasWitnesses=true}
var vinLen=readVarInt()
for(var i=0;i<vinLen;++i){tx.ins.push({hash:readSlice(32),index:readUInt32(),script:readVarSlice(),sequence:readUInt32(),witness:EMPTY_WITNESS})}
var voutLen=readVarInt()
for(i=0;i<voutLen;++i){tx.outs.push({value:readUInt64(),script:readVarSlice()})}
if(hasWitnesses){for(i=0;i<vinLen;++i){tx.ins[i].witness=readVector()}
if(!tx.hasWitnesses())throw new Error('Transaction has superfluous witness data')}
tx.locktime=readUInt32()
if(__noStrict)return tx
if(offset!==buffer.length)throw new Error('Transaction has unexpected data')
return tx}
Transaction.fromHex=function(hex){return Transaction.fromBuffer(Buffer.from(hex,'hex'))}
Transaction.isCoinbaseHash=function(buffer){typeforce(types.Hash256bit,buffer)
for(var i=0;i<32;++i){if(buffer[i]!==0)return false}
return true}
Transaction.prototype.isCoinbase=function(){return this.ins.length===1&&Transaction.isCoinbaseHash(this.ins[0].hash)}
Transaction.prototype.addInput=function(hash,index,sequence,scriptSig){typeforce(types.tuple(types.Hash256bit,types.UInt32,types.maybe(types.UInt32),types.maybe(types.Buffer)),arguments)
if(types.Null(sequence)){sequence=Transaction.DEFAULT_SEQUENCE}
return(this.ins.push({hash:hash,index:index,script:scriptSig||EMPTY_SCRIPT,sequence:sequence,witness:EMPTY_WITNESS})-1)}
Transaction.prototype.addOutput=function(scriptPubKey,value){typeforce(types.tuple(types.Buffer,types.Satoshi),arguments)
return(this.outs.push({script:scriptPubKey,value:value})-1)}
Transaction.prototype.hasWitnesses=function(){return this.ins.some(function(x){return x.witness.length!==0})}
Transaction.prototype.weight=function(){var base=this.__byteLength(false)
var total=this.__byteLength(true)
return base*3+total}
Transaction.prototype.virtualSize=function(){return Math.ceil(this.weight()/4)}
Transaction.prototype.byteLength=function(){return this.__byteLength(true)}
Transaction.prototype.__byteLength=function(__allowWitness){var hasWitnesses=__allowWitness&&this.hasWitnesses()
return((hasWitnesses?10:8)+
varuint.encodingLength(this.ins.length)+
varuint.encodingLength(this.outs.length)+
this.ins.reduce(function(sum,input){return sum+40+varSliceSize(input.script)},0)+
this.outs.reduce(function(sum,output){return sum+8+varSliceSize(output.script)},0)+
(hasWitnesses?this.ins.reduce(function(sum,input){return sum+vectorSize(input.witness)},0):0))}
Transaction.prototype.clone=function(){var newTx=new Transaction()
newTx.version=this.version
newTx.locktime=this.locktime
newTx.ins=this.ins.map(function(txIn){return{hash:txIn.hash,index:txIn.index,script:txIn.script,sequence:txIn.sequence,witness:txIn.witness}})
newTx.outs=this.outs.map(function(txOut){return{script:txOut.script,value:txOut.value}})
return newTx}
Transaction.prototype.hashForSignature=function(inIndex,prevOutScript,hashType){typeforce(types.tuple(types.UInt32,types.Buffer,types.Number),arguments)
if(inIndex>=this.ins.length)return ONE
var ourScript=bscript.compile(bscript.decompile(prevOutScript).filter(function(x){return x!==opcodes.OP_CODESEPARATOR}))
var txTmp=this.clone()
if((hashType&0x1f)===Transaction.SIGHASH_NONE){txTmp.outs=[]
txTmp.ins.forEach(function(input,i){if(i===inIndex)return
input.sequence=0})}else if((hashType&0x1f)===Transaction.SIGHASH_SINGLE){if(inIndex>=this.outs.length)return ONE
txTmp.outs.length=inIndex+1
for(var i=0;i<inIndex;i++){txTmp.outs[i]=BLANK_OUTPUT}
txTmp.ins.forEach(function(input,y){if(y===inIndex)return
input.sequence=0})}
if(hashType&Transaction.SIGHASH_ANYONECANPAY){txTmp.ins=[txTmp.ins[inIndex]]
txTmp.ins[0].script=ourScript}else{txTmp.ins.forEach(function(input){input.script=EMPTY_SCRIPT})
txTmp.ins[inIndex].script=ourScript}
var buffer=Buffer.allocUnsafe(txTmp.__byteLength(false)+4)
buffer.writeInt32LE(hashType,buffer.length-4)
txTmp.__toBuffer(buffer,0,false)
return bcrypto.hash256(buffer)}
Transaction.prototype.hashForWitnessV0=function(inIndex,prevOutScript,value,hashType){typeforce(types.tuple(types.UInt32,types.Buffer,types.Satoshi,types.UInt32),arguments)
var tbuffer,toffset
function writeSlice(slice){toffset+=slice.copy(tbuffer,toffset)}
function writeUInt32(i){toffset=tbuffer.writeUInt32LE(i,toffset)}
function writeUInt64(i){toffset=bufferutils.writeUInt64LE(tbuffer,i,toffset)}
function writeVarInt(i){varuint.encode(i,tbuffer,toffset)
toffset+=varuint.encode.bytes}
function writeVarSlice(slice){writeVarInt(slice.length);writeSlice(slice)}
var hashOutputs=ZERO
var hashPrevouts=ZERO
var hashSequence=ZERO
if(!(hashType&Transaction.SIGHASH_ANYONECANPAY)){tbuffer=Buffer.allocUnsafe(36*this.ins.length)
toffset=0
this.ins.forEach(function(txIn){writeSlice(txIn.hash)
writeUInt32(txIn.index)})
hashPrevouts=bcrypto.hash256(tbuffer)}
if(!(hashType&Transaction.SIGHASH_ANYONECANPAY)&&(hashType&0x1f)!==Transaction.SIGHASH_SINGLE&&(hashType&0x1f)!==Transaction.SIGHASH_NONE){tbuffer=Buffer.allocUnsafe(4*this.ins.length)
toffset=0
this.ins.forEach(function(txIn){writeUInt32(txIn.sequence)})
hashSequence=bcrypto.hash256(tbuffer)}
if((hashType&0x1f)!==Transaction.SIGHASH_SINGLE&&(hashType&0x1f)!==Transaction.SIGHASH_NONE){var txOutsSize=this.outs.reduce(function(sum,output){return sum+8+varSliceSize(output.script)},0)
tbuffer=Buffer.allocUnsafe(txOutsSize)
toffset=0
this.outs.forEach(function(out){writeUInt64(out.value)
writeVarSlice(out.script)})
hashOutputs=bcrypto.hash256(tbuffer)}else if((hashType&0x1f)===Transaction.SIGHASH_SINGLE&&inIndex<this.outs.length){var output=this.outs[inIndex]
tbuffer=Buffer.allocUnsafe(8+varSliceSize(output.script))
toffset=0
writeUInt64(output.value)
writeVarSlice(output.script)
hashOutputs=bcrypto.hash256(tbuffer)}
tbuffer=Buffer.allocUnsafe(156+varSliceSize(prevOutScript))
toffset=0
var input=this.ins[inIndex]
writeUInt32(this.version)
writeSlice(hashPrevouts)
writeSlice(hashSequence)
writeSlice(input.hash)
writeUInt32(input.index)
writeVarSlice(prevOutScript)
writeUInt64(value)
writeUInt32(input.sequence)
writeSlice(hashOutputs)
writeUInt32(this.locktime)
writeUInt32(hashType)
return bcrypto.hash256(tbuffer)}
Transaction.prototype.getHash=function(){return bcrypto.hash256(this.__toBuffer(undefined,undefined,false))}
Transaction.prototype.getId=function(){return this.getHash().reverse().toString('hex')}
Transaction.prototype.toBuffer=function(buffer,initialOffset){return this.__toBuffer(buffer,initialOffset,true)}
Transaction.prototype.__toBuffer=function(buffer,initialOffset,__allowWitness){if(!buffer)buffer=Buffer.allocUnsafe(this.__byteLength(__allowWitness))
var offset=initialOffset||0
function writeSlice(slice){offset+=slice.copy(buffer,offset)}
function writeUInt8(i){offset=buffer.writeUInt8(i,offset)}
function writeUInt32(i){offset=buffer.writeUInt32LE(i,offset)}
function writeInt32(i){offset=buffer.writeInt32LE(i,offset)}
function writeUInt64(i){offset=bufferutils.writeUInt64LE(buffer,i,offset)}
function writeVarInt(i){varuint.encode(i,buffer,offset)
offset+=varuint.encode.bytes}
function writeVarSlice(slice){writeVarInt(slice.length);writeSlice(slice)}
function writeVector(vector){writeVarInt(vector.length);vector.forEach(writeVarSlice)}
writeInt32(this.version)
var hasWitnesses=__allowWitness&&this.hasWitnesses()
if(hasWitnesses){writeUInt8(Transaction.ADVANCED_TRANSACTION_MARKER)
writeUInt8(Transaction.ADVANCED_TRANSACTION_FLAG)}
writeVarInt(this.ins.length)
this.ins.forEach(function(txIn){writeSlice(txIn.hash)
writeUInt32(txIn.index)
writeVarSlice(txIn.script)
writeUInt32(txIn.sequence)})
writeVarInt(this.outs.length)
this.outs.forEach(function(txOut){if(!txOut.valueBuffer){writeUInt64(txOut.value)}else{writeSlice(txOut.valueBuffer)}
writeVarSlice(txOut.script)})
if(hasWitnesses){this.ins.forEach(function(input){writeVector(input.witness)})}
writeUInt32(this.locktime)
if(initialOffset!==undefined)return buffer.slice(initialOffset,offset)
return buffer}
Transaction.prototype.toHex=function(){return this.toBuffer().toString('hex')}
Transaction.prototype.setInputScript=function(index,scriptSig){typeforce(types.tuple(types.Number,types.Buffer),arguments)
this.ins[index].script=scriptSig}
Transaction.prototype.setWitness=function(index,witness){typeforce(types.tuple(types.Number,[types.Buffer]),arguments)
this.ins[index].witness=witness}
module.exports=Transaction}),(function(module,exports,__webpack_require__){var baddress=__webpack_require__(227)
var bcrypto=__webpack_require__(116)
var ecdsa=__webpack_require__(774)
var randomBytes=__webpack_require__(102)
var typeforce=__webpack_require__(23)
var types=__webpack_require__(37)
var wif=__webpack_require__(780)
var NETWORKS=__webpack_require__(132)
var BigInteger=__webpack_require__(87)
var ecurve=__webpack_require__(230)
var secp256k1=ecdsa.__curve
function ECPair(d,Q,options){if(options){typeforce({compressed:types.maybe(types.Boolean),network:types.maybe(types.Network)},options)}
options=options||{}
if(d){if(d.signum()<=0)throw new Error('Private key must be greater than 0')
if(d.compareTo(secp256k1.n)>=0)throw new Error('Private key must be less than the curve order')
if(Q)throw new TypeError('Unexpected publicKey parameter')
this.d=d}else{typeforce(types.ECPoint,Q)
this.__Q=Q}
this.compressed=options.compressed===undefined?true:options.compressed
this.network=options.network||NETWORKS.bitcoin}
Object.defineProperty(ECPair.prototype,'Q',{get:function(){if(!this.__Q&&this.d){this.__Q=secp256k1.G.multiply(this.d)}
return this.__Q}})
ECPair.fromPublicKeyBuffer=function(buffer,network){var Q=ecurve.Point.decodeFrom(secp256k1,buffer)
return new ECPair(null,Q,{compressed:Q.compressed,network:network})}
ECPair.fromWIF=function(string,network){var decoded=wif.decode(string)
var version=decoded.version
if(types.Array(network)){network=network.filter(function(x){return version===x.wif}).pop()
if(!network)throw new Error('Unknown network version')}else{network=network||NETWORKS.bitcoin
if(version!==network.wif)throw new Error('Invalid network version')}
var d=BigInteger.fromBuffer(decoded.privateKey)
return new ECPair(d,null,{compressed:decoded.compressed,network:network})}
ECPair.makeRandom=function(options){options=options||{}
var rng=options.rng||randomBytes
var d
do{var buffer=rng(32)
typeforce(types.Buffer256bit,buffer)
d=BigInteger.fromBuffer(buffer)}while(d.signum()<=0||d.compareTo(secp256k1.n)>=0)
return new ECPair(d,null,options)}
ECPair.prototype.getAddress=function(){return baddress.toBase58Check(bcrypto.hash160(this.getPublicKeyBuffer()),this.getNetwork().pubKeyHash)}
ECPair.prototype.getNetwork=function(){return this.network}
ECPair.prototype.getPublicKeyBuffer=function(){return this.Q.getEncoded(this.compressed)}
ECPair.prototype.sign=function(hash){if(!this.d)throw new Error('Missing private key')
return ecdsa.sign(hash,this.d)}
ECPair.prototype.toWIF=function(){if(!this.d)throw new Error('Missing private key')
return wif.encode(this.network.wif,this.d.toBuffer(32),this.compressed)}
ECPair.prototype.verify=function(hash,signature){return ecdsa.verify(hash,signature,this.Q)}
module.exports=ECPair}),(function(module,exports,__webpack_require__){var Buffer=__webpack_require__(4).Buffer
var bech32=__webpack_require__(772)
var bs58check=__webpack_require__(228)
var bscript=__webpack_require__(31)
var btemplates=__webpack_require__(220)
var networks=__webpack_require__(132)
var typeforce=__webpack_require__(23)
var types=__webpack_require__(37)
function fromBase58Check(address){var payload=bs58check.decode(address)
if(payload.length<21)throw new TypeError(address+' is too short')
if(payload.length>21)throw new TypeError(address+' is too long')
var version=payload.readUInt8(0)
var hash=payload.slice(1)
return{version:version,hash:hash}}
function fromBech32(address){var result=bech32.decode(address)
var data=bech32.fromWords(result.words.slice(1))
return{version:result.words[0],prefix:result.prefix,data:Buffer.from(data)}}
function toBase58Check(hash,version){typeforce(types.tuple(types.Hash160bit,types.UInt8),arguments)
var payload=Buffer.allocUnsafe(21)
payload.writeUInt8(version,0)
hash.copy(payload,1)
return bs58check.encode(payload)}
function toBech32(data,version,prefix){var words=bech32.toWords(data)
words.unshift(version)
return bech32.encode(prefix,words)}
function fromOutputScript(outputScript,network){network=network||networks.bitcoin
if(btemplates.pubKeyHash.output.check(outputScript))return toBase58Check(bscript.compile(outputScript).slice(3,23),network.pubKeyHash)
if(btemplates.scriptHash.output.check(outputScript))return toBase58Check(bscript.compile(outputScript).slice(2,22),network.scriptHash)
if(btemplates.witnessPubKeyHash.output.check(outputScript))return toBech32(bscript.compile(outputScript).slice(2,22),0,network.bech32)
if(btemplates.witnessScriptHash.output.check(outputScript))return toBech32(bscript.compile(outputScript).slice(2,34),0,network.bech32)
throw new Error(bscript.toASM(outputScript)+' has no matching Address')}
function toOutputScript(address,network){network=network||networks.bitcoin
var decode
try{decode=fromBase58Check(address)}catch(e){}
if(decode){if(decode.version===network.pubKeyHash)return btemplates.pubKeyHash.output.encode(decode.hash)
if(decode.version===network.scriptHash)return btemplates.scriptHash.output.encode(decode.hash)}else{try{decode=fromBech32(address)}catch(e){}
if(decode){if(decode.prefix!==network.bech32)throw new Error(address+' has an invalid prefix')
if(decode.version===0){if(decode.data.length===20)return btemplates.witnessPubKeyHash.output.encode(decode.data)
if(decode.data.length===32)return btemplates.witnessScriptHash.output.encode(decode.data)}}}
throw new Error(address+' has no matching Script')}
module.exports={fromBase58Check:fromBase58Check,fromBech32:fromBech32,fromOutputScript:fromOutputScript,toBase58Check:toBase58Check,toBech32:toBech32,toOutputScript:toOutputScript}}),(function(module,exports,__webpack_require__){"use strict";var createHash=__webpack_require__(103)
var bs58checkBase=__webpack_require__(773)
function sha256x2(buffer){var tmp=createHash('sha256').update(buffer).digest()
return createHash('sha256').update(tmp).digest()}
module.exports=bs58checkBase(sha256x2)}),(function(module,exports,__webpack_require__){(function(Buffer){var bip66=__webpack_require__(347)
var typeforce=__webpack_require__(23)
var types=__webpack_require__(37)
var BigInteger=__webpack_require__(87)
function ECSignature(r,s){typeforce(types.tuple(types.BigInt,types.BigInt),arguments)
this.r=r
this.s=s}
ECSignature.parseCompact=function(buffer){typeforce(types.BufferN(65),buffer)
var flagByte=buffer.readUInt8(0)-27
if(flagByte!==(flagByte&7))throw new Error('Invalid signature parameter')
var compressed=!!(flagByte&4)
var recoveryParam=flagByte&3
var signature=ECSignature.fromRSBuffer(buffer.slice(1))
return{compressed:compressed,i:recoveryParam,signature:signature}}
ECSignature.fromRSBuffer=function(buffer){typeforce(types.BufferN(64),buffer)
var r=BigInteger.fromBuffer(buffer.slice(0,32))
var s=BigInteger.fromBuffer(buffer.slice(32,64))
return new ECSignature(r,s)}
ECSignature.fromDER=function(buffer){var decode=bip66.decode(buffer)
var r=BigInteger.fromDERInteger(decode.r)
var s=BigInteger.fromDERInteger(decode.s)
return new ECSignature(r,s)}
ECSignature.parseScriptSignature=function(buffer){var hashType=buffer.readUInt8(buffer.length-1)
var hashTypeMod=hashType&~0x80
if(hashTypeMod<=0x00||hashTypeMod>=0x04)throw new Error('Invalid hashType '+hashType)
return{signature:ECSignature.fromDER(buffer.slice(0,-1)),hashType:hashType}}
ECSignature.prototype.toCompact=function(i,compressed){if(compressed){i+=4}
i+=27
var buffer=Buffer.alloc(65)
buffer.writeUInt8(i,0)
this.toRSBuffer(buffer,1)
return buffer}
ECSignature.prototype.toDER=function(){var r=Buffer.from(this.r.toDERInteger())
var s=Buffer.from(this.s.toDERInteger())
return bip66.encode(r,s)}
ECSignature.prototype.toRSBuffer=function(buffer,offset){buffer=buffer||Buffer.alloc(64)
this.r.toBuffer(32).copy(buffer,offset)
this.s.toBuffer(32).copy(buffer,offset+32)
return buffer}
ECSignature.prototype.toScriptSignature=function(hashType){var hashTypeMod=hashType&~0x80
if(hashTypeMod<=0||hashTypeMod>=4)throw new Error('Invalid hashType '+hashType)
var hashTypeBuffer=Buffer.alloc(1)
hashTypeBuffer.writeUInt8(hashType,0)
return Buffer.concat([this.toDER(),hashTypeBuffer])}
module.exports=ECSignature}.call(exports,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){var Point=__webpack_require__(356)
var Curve=__webpack_require__(357)
var getCurveByName=__webpack_require__(778)
module.exports={Curve:Curve,Point:Point,getCurveByName:getCurveByName}}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__GeoLocation_Address_Object_js__=__webpack_require__(783);var __WEBPACK_IMPORTED_MODULE_1_common_sockets_protocol_extend_socket_Socket_Address__=__webpack_require__(76);var __WEBPACK_IMPORTED_MODULE_2_node_lists_geolocation_lists_geo_helpers_geo_helper__=__webpack_require__(233);class GeoLocationLists{constructor(){console.log("GeoLocations constructor");this.geoLocationContinentsLists={};this.countGeoLocationContinentsLists=0;this._addressesResolved={};this._pendingLocationLists=[];setTimeout(this._processGeoLocationPendingList.bind(this),true?500:5000);}
async _processGeoLocationPendingList(){if(this._pendingLocationLists.length>0){let data=this._pendingLocationLists[0];this._pendingLocationLists.splice(0,1);let location=await __WEBPACK_IMPORTED_MODULE_2_node_lists_geolocation_lists_geo_helpers_geo_helper__["a"].getLocationFromAddress(data.address);if(!location){return null;}
location.continent=location.continent||'--';this._addGeoLocationContinentByAddress(data.address,location);try{data.resolver(location);}catch(exception){}}
setTimeout(this._processGeoLocationPendingList.bind(this),true?500:5000);}
includeAddress(sckAddress,port){sckAddress=__WEBPACK_IMPORTED_MODULE_1_common_sockets_protocol_extend_socket_Socket_Address__["a"].createSocketAddress(sckAddress,port);let address=sckAddress.getAddress(false,false);if(this._addressesResolved[address])
return this._addressesResolved[address];let data={address:sckAddress,promise:sckAddress._geoLocation,resolver:sckAddress._geoLocationResolver,};this._pendingLocationLists.push(data);this._addressesResolved[address]=data;return data;}
includeSocket(socket){if(!socket)return null;if(!socket.node&&!socket.node.location){let data=this.includeAddress(socket.node.sckAddress);socket.node.sckAddress._geoLocation=data.promise;socket.node.sckAddress._geoLocationResolver=data.resolver;}
socket.node.location=socket.node.sckAddress.geoLocation;return socket.node.location;}
_addGeoLocationContinentByAddress(sckAddress,location){sckAddress=__WEBPACK_IMPORTED_MODULE_1_common_sockets_protocol_extend_socket_Socket_Address__["a"].createSocketAddress(sckAddress);if(!this.geoLocationContinentsLists[location.continent])this.geoLocationContinentsLists[location.continent]=[];let geoLocationAddressObject=new __WEBPACK_IMPORTED_MODULE_0__GeoLocation_Address_Object_js__["a"](sckAddress,undefined,location);geoLocationAddressObject.refreshLastTimeChecked();this.geoLocationContinentsLists[location.continent].push(geoLocationAddressObject);this.countGeoLocationContinentsLists+=1;return location.continent;}
printGeoLocationContinentsLists(){for(let continent in this.geoLocationContinentsLists){let listString='';for(let i=0;i<this.geoLocationContinentsLists[continent].length;i++)
listString+=this.geoLocationContinentsLists[continent][i].toString()+"   ,   ";}}}
__webpack_exports__["a"]=(new GeoLocationLists());}),(function(module,exports,__webpack_require__){(function(module){(function(){var expandIPv6,ipaddr,ipv4Part,ipv4Regexes,ipv6Part,ipv6Regexes,matchCIDR,root,zoneIndex;ipaddr={};root=this;if((typeof module!=="undefined"&&module!==null)&&module.exports){module.exports=ipaddr;}else{root['ipaddr']=ipaddr;}
matchCIDR=function(first,second,partSize,cidrBits){var part,shift;if(first.length!==second.length){throw new Error("ipaddr: cannot match CIDR for objects with different lengths");}
part=0;while(cidrBits>0){shift=partSize-cidrBits;if(shift<0){shift=0;}
if(first[part]>>shift!==second[part]>>shift){return false;}
cidrBits-=partSize;part+=1;}
return true;};ipaddr.subnetMatch=function(address,rangeList,defaultName){var k,len,rangeName,rangeSubnets,subnet;if(defaultName==null){defaultName='unicast';}
for(rangeName in rangeList){rangeSubnets=rangeList[rangeName];if(rangeSubnets[0]&&!(rangeSubnets[0]instanceof Array)){rangeSubnets=[rangeSubnets];}
for(k=0,len=rangeSubnets.length;k<len;k++){subnet=rangeSubnets[k];if(address.kind()===subnet[0].kind()){if(address.match.apply(address,subnet)){return rangeName;}}}}
return defaultName;};ipaddr.IPv4=(function(){function IPv4(octets){var k,len,octet;if(octets.length!==4){throw new Error("ipaddr: ipv4 octet count should be 4");}
for(k=0,len=octets.length;k<len;k++){octet=octets[k];if(!((0<=octet&&octet<=255))){throw new Error("ipaddr: ipv4 octet should fit in 8 bits");}}
this.octets=octets;}
IPv4.prototype.kind=function(){return 'ipv4';};IPv4.prototype.toString=function(){return this.octets.join(".");};IPv4.prototype.toNormalizedString=function(){return this.toString();};IPv4.prototype.toByteArray=function(){return this.octets.slice(0);};IPv4.prototype.match=function(other,cidrRange){var ref;if(cidrRange===void 0){ref=other,other=ref[0],cidrRange=ref[1];}
if(other.kind()!=='ipv4'){throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");}
return matchCIDR(this.octets,other.octets,8,cidrRange);};IPv4.prototype.SpecialRanges={unspecified:[[new IPv4([0,0,0,0]),8]],broadcast:[[new IPv4([255,255,255,255]),32]],multicast:[[new IPv4([224,0,0,0]),4]],linkLocal:[[new IPv4([169,254,0,0]),16]],loopback:[[new IPv4([127,0,0,0]),8]],carrierGradeNat:[[new IPv4([100,64,0,0]),10]],"private":[[new IPv4([10,0,0,0]),8],[new IPv4([172,16,0,0]),12],[new IPv4([192,168,0,0]),16]],reserved:[[new IPv4([192,0,0,0]),24],[new IPv4([192,0,2,0]),24],[new IPv4([192,88,99,0]),24],[new IPv4([198,51,100,0]),24],[new IPv4([203,0,113,0]),24],[new IPv4([240,0,0,0]),4]]};IPv4.prototype.range=function(){return ipaddr.subnetMatch(this,this.SpecialRanges);};IPv4.prototype.toIPv4MappedAddress=function(){return ipaddr.IPv6.parse("::ffff:"+(this.toString()));};IPv4.prototype.prefixLengthFromSubnetMask=function(){var cidr,i,k,octet,stop,zeros,zerotable;zerotable={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};cidr=0;stop=false;for(i=k=3;k>=0;i=k+=-1){octet=this.octets[i];if(octet in zerotable){zeros=zerotable[octet];if(stop&&zeros!==0){return null;}
if(zeros!==8){stop=true;}
cidr+=zeros;}else{return null;}}
return 32-cidr;};return IPv4;})();ipv4Part="(0?\\d+|0x[a-f0-9]+)";ipv4Regexes={fourOctet:new RegExp("^"+ipv4Part+"\\."+ipv4Part+"\\."+ipv4Part+"\\."+ipv4Part+"$",'i'),longValue:new RegExp("^"+ipv4Part+"$",'i')};ipaddr.IPv4.parser=function(string){var match,parseIntAuto,part,shift,value;parseIntAuto=function(string){if(string[0]==="0"&&string[1]!=="x"){return parseInt(string,8);}else{return parseInt(string);}};if(match=string.match(ipv4Regexes.fourOctet)){return(function(){var k,len,ref,results;ref=match.slice(1,6);results=[];for(k=0,len=ref.length;k<len;k++){part=ref[k];results.push(parseIntAuto(part));}
return results;})();}else if(match=string.match(ipv4Regexes.longValue)){value=parseIntAuto(match[1]);if(value>0xffffffff||value<0){throw new Error("ipaddr: address outside defined range");}
return((function(){var k,results;results=[];for(shift=k=0;k<=24;shift=k+=8){results.push((value>>shift)&0xff);}
return results;})()).reverse();}else{return null;}};ipaddr.IPv6=(function(){function IPv6(parts,zoneId){var i,k,l,len,part,ref;if(parts.length===16){this.parts=[];for(i=k=0;k<=14;i=k+=2){this.parts.push((parts[i]<<8)|parts[i+1]);}}else if(parts.length===8){this.parts=parts;}else{throw new Error("ipaddr: ipv6 part count should be 8 or 16");}
ref=this.parts;for(l=0,len=ref.length;l<len;l++){part=ref[l];if(!((0<=part&&part<=0xffff))){throw new Error("ipaddr: ipv6 part should fit in 16 bits");}}
if(zoneId){this.zoneId=zoneId;}}
IPv6.prototype.kind=function(){return 'ipv6';};IPv6.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,'::');};IPv6.prototype.toByteArray=function(){var bytes,k,len,part,ref;bytes=[];ref=this.parts;for(k=0,len=ref.length;k<len;k++){part=ref[k];bytes.push(part>>8);bytes.push(part&0xff);}
return bytes;};IPv6.prototype.toNormalizedString=function(){var addr,part,suffix;addr=((function(){var k,len,ref,results;ref=this.parts;results=[];for(k=0,len=ref.length;k<len;k++){part=ref[k];results.push(part.toString(16));}
return results;}).call(this)).join(":");suffix='';if(this.zoneId){suffix='%'+this.zoneId;}
return addr+suffix;};IPv6.prototype.match=function(other,cidrRange){var ref;if(cidrRange===void 0){ref=other,other=ref[0],cidrRange=ref[1];}
if(other.kind()!=='ipv6'){throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");}
return matchCIDR(this.parts,other.parts,16,cidrRange);};IPv6.prototype.SpecialRanges={unspecified:[new IPv6([0,0,0,0,0,0,0,0]),128],linkLocal:[new IPv6([0xfe80,0,0,0,0,0,0,0]),10],multicast:[new IPv6([0xff00,0,0,0,0,0,0,0]),8],loopback:[new IPv6([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new IPv6([0xfc00,0,0,0,0,0,0,0]),7],ipv4Mapped:[new IPv6([0,0,0,0,0,0xffff,0,0]),96],rfc6145:[new IPv6([0,0,0,0,0xffff,0,0,0]),96],rfc6052:[new IPv6([0x64,0xff9b,0,0,0,0,0,0]),96],'6to4':[new IPv6([0x2002,0,0,0,0,0,0,0]),16],teredo:[new IPv6([0x2001,0,0,0,0,0,0,0]),32],reserved:[[new IPv6([0x2001,0xdb8,0,0,0,0,0,0]),32]]};IPv6.prototype.range=function(){return ipaddr.subnetMatch(this,this.SpecialRanges);};IPv6.prototype.isIPv4MappedAddress=function(){return this.range()==='ipv4Mapped';};IPv6.prototype.toIPv4Address=function(){var high,low,ref;if(!this.isIPv4MappedAddress()){throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");}
ref=this.parts.slice(-2),high=ref[0],low=ref[1];return new ipaddr.IPv4([high>>8,high&0xff,low>>8,low&0xff]);};IPv6.prototype.prefixLengthFromSubnetMask=function(){var cidr,i,k,part,stop,zeros,zerotable;zerotable={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0};cidr=0;stop=false;for(i=k=7;k>=0;i=k+=-1){part=this.parts[i];if(part in zerotable){zeros=zerotable[part];if(stop&&zeros!==0){return null;}
if(zeros!==16){stop=true;}
cidr+=zeros;}else{return null;}}
return 128-cidr;};return IPv6;})();ipv6Part="(?:[0-9a-f]+::?)+";zoneIndex="%[0-9a-z]{1,}";ipv6Regexes={zoneIndex:new RegExp(zoneIndex,'i'),"native":new RegExp("^(::)?("+ipv6Part+")?([0-9a-f]+)?(::)?("+zoneIndex+")?$",'i'),transitional:new RegExp(("^((?:"+ipv6Part+")|(?:::)(?:"+ipv6Part+")?)")+(ipv4Part+"\\."+ipv4Part+"\\."+ipv4Part+"\\."+ipv4Part)+("("+zoneIndex+")?$"),'i')};expandIPv6=function(string,parts){var colonCount,lastColon,part,replacement,replacementCount,zoneId;if(string.indexOf('::')!==string.lastIndexOf('::')){return null;}
zoneId=(string.match(ipv6Regexes['zoneIndex'])||[])[0];if(zoneId){zoneId=zoneId.substring(1);string=string.replace(/%.+$/,'');}
colonCount=0;lastColon=-1;while((lastColon=string.indexOf(':',lastColon+1))>=0){colonCount++;}
if(string.substr(0,2)==='::'){colonCount--;}
if(string.substr(-2,2)==='::'){colonCount--;}
if(colonCount>parts){return null;}
replacementCount=parts-colonCount;replacement=':';while(replacementCount--){replacement+='0:';}
string=string.replace('::',replacement);if(string[0]===':'){string=string.slice(1);}
if(string[string.length-1]===':'){string=string.slice(0,-1);}
parts=(function(){var k,len,ref,results;ref=string.split(":");results=[];for(k=0,len=ref.length;k<len;k++){part=ref[k];results.push(parseInt(part,16));}
return results;})();return{parts:parts,zoneId:zoneId};};ipaddr.IPv6.parser=function(string){var addr,k,len,match,octet,octets,zoneId;if(ipv6Regexes['native'].test(string)){return expandIPv6(string,8);}else if(match=string.match(ipv6Regexes['transitional'])){zoneId=match[6]||'';addr=expandIPv6(match[1].slice(0,-1)+zoneId,6);if(addr.parts){octets=[parseInt(match[2]),parseInt(match[3]),parseInt(match[4]),parseInt(match[5])];for(k=0,len=octets.length;k<len;k++){octet=octets[k];if(!((0<=octet&&octet<=255))){return null;}}
addr.parts.push(octets[0]<<8|octets[1]);addr.parts.push(octets[2]<<8|octets[3]);return{parts:addr.parts,zoneId:addr.zoneId};}}
return null;};ipaddr.IPv4.isIPv4=ipaddr.IPv6.isIPv6=function(string){return this.parser(string)!==null;};ipaddr.IPv4.isValid=function(string){var e;try{new this(this.parser(string));return true;}catch(error1){e=error1;return false;}};ipaddr.IPv4.isValidFourPartDecimal=function(string){if(ipaddr.IPv4.isValid(string)&&string.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/)){return true;}else{return false;}};ipaddr.IPv6.isValid=function(string){var addr,e;if(typeof string==="string"&&string.indexOf(":")===-1){return false;}
try{addr=this.parser(string);new this(addr.parts,addr.zoneId);return true;}catch(error1){e=error1;return false;}};ipaddr.IPv4.parse=function(string){var parts;parts=this.parser(string);if(parts===null){throw new Error("ipaddr: string is not formatted like ip address");}
return new this(parts);};ipaddr.IPv6.parse=function(string){var addr;addr=this.parser(string);if(addr.parts===null){throw new Error("ipaddr: string is not formatted like ip address");}
return new this(addr.parts,addr.zoneId);};ipaddr.IPv4.parseCIDR=function(string){var maskLength,match,parsed;if(match=string.match(/^(.+)\/(\d+)$/)){maskLength=parseInt(match[2]);if(maskLength>=0&&maskLength<=32){parsed=[this.parse(match[1]),maskLength];Object.defineProperty(parsed,'toString',{value:function(){return this.join('/');}});return parsed;}}
throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range");};ipaddr.IPv4.subnetMaskFromPrefixLength=function(prefix){var filledOctetCount,j,octets;prefix=parseInt(prefix);if(prefix<0||prefix>32){throw new Error('ipaddr: invalid IPv4 prefix length');}
octets=[0,0,0,0];j=0;filledOctetCount=Math.floor(prefix/8);while(j<filledOctetCount){octets[j]=255;j++;}
if(filledOctetCount<4){octets[filledOctetCount]=Math.pow(2,prefix%8)-1<<8-(prefix%8);}
return new this(octets);};ipaddr.IPv4.broadcastAddressFromCIDR=function(string){var cidr,error,i,ipInterfaceOctets,octets,subnetMaskOctets;try{cidr=this.parseCIDR(string);ipInterfaceOctets=cidr[0].toByteArray();subnetMaskOctets=this.subnetMaskFromPrefixLength(cidr[1]).toByteArray();octets=[];i=0;while(i<4){octets.push(parseInt(ipInterfaceOctets[i],10)|parseInt(subnetMaskOctets[i],10)^255);i++;}
return new this(octets);}catch(error1){error=error1;throw new Error('ipaddr: the address does not have IPv4 CIDR format');}};ipaddr.IPv4.networkAddressFromCIDR=function(string){var cidr,error,i,ipInterfaceOctets,octets,subnetMaskOctets;try{cidr=this.parseCIDR(string);ipInterfaceOctets=cidr[0].toByteArray();subnetMaskOctets=this.subnetMaskFromPrefixLength(cidr[1]).toByteArray();octets=[];i=0;while(i<4){octets.push(parseInt(ipInterfaceOctets[i],10)&parseInt(subnetMaskOctets[i],10));i++;}
return new this(octets);}catch(error1){error=error1;throw new Error('ipaddr: the address does not have IPv4 CIDR format');}};ipaddr.IPv6.parseCIDR=function(string){var maskLength,match,parsed;if(match=string.match(/^(.+)\/(\d+)$/)){maskLength=parseInt(match[2]);if(maskLength>=0&&maskLength<=128){parsed=[this.parse(match[1]),maskLength];Object.defineProperty(parsed,'toString',{value:function(){return this.join('/');}});return parsed;}}
throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range");};ipaddr.isValid=function(string){return ipaddr.IPv6.isValid(string)||ipaddr.IPv4.isValid(string);};ipaddr.parse=function(string){if(ipaddr.IPv6.isValid(string)){return ipaddr.IPv6.parse(string);}else if(ipaddr.IPv4.isValid(string)){return ipaddr.IPv4.parse(string);}else{throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format");}};ipaddr.parseCIDR=function(string){var e;try{return ipaddr.IPv6.parseCIDR(string);}catch(error1){e=error1;try{return ipaddr.IPv4.parseCIDR(string);}catch(error1){e=error1;throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format");}}};ipaddr.fromByteArray=function(bytes){var length;length=bytes.length;if(length===4){return new ipaddr.IPv4(bytes);}else if(length===16){return new ipaddr.IPv6(bytes);}else{throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address");}};ipaddr.process=function(string){var addr;addr=this.parse(string);if(addr.kind()==='ipv6'&&addr.isIPv4MappedAddress()){return addr.toIPv4Address();}else{return addr;}};}).call(this);}.call(exports,__webpack_require__(83)(module)))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__data_continents_js__=__webpack_require__(784);var __WEBPACK_IMPORTED_MODULE_0__data_continents_js___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__data_continents_js__);var __WEBPACK_IMPORTED_MODULE_1_common_sockets_protocol_extend_socket_Socket_Address__=__webpack_require__(76);var __WEBPACK_IMPORTED_MODULE_2_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_3_common_utils_helpers_Download_Helper__=__webpack_require__(359);var __WEBPACK_IMPORTED_MODULE_4_common_utils_helpers_Utils__=__webpack_require__(40);const ipaddr=__webpack_require__(232);class GeoHelper{async getLocationFromAddress(address,skipSocketAddress){if(__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].SETTINGS.GEO_IP_ENABLED===false)return;if(!skipSocketAddress)skipSocketAddress=false;let sckAddress=null;if(!skipSocketAddress){sckAddress=__WEBPACK_IMPORTED_MODULE_1_common_sockets_protocol_extend_socket_Socket_Address__["a"].createSocketAddress(address);address=sckAddress.getAddress(false);if(sckAddress._geoLocation.isFulfilled())
return sckAddress._geoLocation;}
let result={country:'',countryCode:'',city:'',state:'',region:'',regionCode:'',lat:(22.2120780),lng:(-40.1109744),isp:'',timezone:'',continent:'',address:address,};try{let localIP=false;if(address.indexOf("192.168")===0){address="";localIP=true;}
let list=[];list.push("https://geoip-db.com/json/"+address);let data=await __WEBPACK_IMPORTED_MODULE_3_common_utils_helpers_Download_Helper__["a"].downloadMultipleFiles(list,20000);if(data){if(data.length===1)data=data[0];result.country=data.country||data.country_name;result.countryCode=data.countryCode||data.country_code;if(address==='')
if(data.query)result.address=address||data.query;if(result.countryCode)
result.continent=Object(__WEBPACK_IMPORTED_MODULE_0__data_continents_js__["getContinentFromCountry"])(result.countryCode);result.city=data.city||'';result.state=data.state||'';result.region=data.regionname||data.region_name||'';result.regionCode=data.regioncode||data.region_code||'';result.lat=(data.latitude||data.lat||22.2120780)+(localIP?0.05*(-1+2*Math.random()):0);result.lng=(data.longitude||data.lng||data.lon||-40.1109744)+(localIP?0.05*(-1+2*Math.random()):0);result.timezone=data.timezone||data.time_zone||'';if(!skipSocketAddress)
sckAddress._geoLocationResolver(result);}}
catch(Exception){console.error("GeoHelper getLocationFromAddress raised an error ",Exception);}
return result;}}
__webpack_exports__["a"]=(new GeoHelper());}),(function(module,exports){function isObjectLike(value){return value!=null&&typeof value=='object';}
module.exports=isObjectLike;}),(function(module,exports,__webpack_require__){"use strict";var hasOwn=Object.prototype.hasOwnProperty;var toStr=Object.prototype.toString;var defineProperty=Object.defineProperty;var gOPD=Object.getOwnPropertyDescriptor;var isArray=function isArray(arr){if(typeof Array.isArray==='function'){return Array.isArray(arr);}
return toStr.call(arr)==='[object Array]';};var isPlainObject=function isPlainObject(obj){if(!obj||toStr.call(obj)!=='[object Object]'){return false;}
var hasOwnConstructor=hasOwn.call(obj,'constructor');var hasIsPrototypeOf=obj.constructor&&obj.constructor.prototype&&hasOwn.call(obj.constructor.prototype,'isPrototypeOf');if(obj.constructor&&!hasOwnConstructor&&!hasIsPrototypeOf){return false;}
var key;for(key in obj){}
return typeof key==='undefined'||hasOwn.call(obj,key);};var setProperty=function setProperty(target,options){if(defineProperty&&options.name==='__proto__'){defineProperty(target,options.name,{enumerable:true,configurable:true,value:options.newValue,writable:true});}else{target[options.name]=options.newValue;}};var getProperty=function getProperty(obj,name){if(name==='__proto__'){if(!hasOwn.call(obj,name)){return void 0;}else if(gOPD){return gOPD(obj,name).value;}}
return obj[name];};module.exports=function extend(){var options,name,src,copy,copyIsArray,clone;var target=arguments[0];var i=1;var length=arguments.length;var deep=false;if(typeof target==='boolean'){deep=target;target=arguments[1]||{};i=2;}
if(target==null||(typeof target!=='object'&&typeof target!=='function')){target={};}
for(;i<length;++i){options=arguments[i];if(options!=null){for(name in options){src=getProperty(target,name);copy=getProperty(options,name);if(target!==copy){if(deep&&copy&&(isPlainObject(copy)||(copyIsArray=isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&isArray(src)?src:[];}else{clone=src&&isPlainObject(src)?src:{};}
setProperty(target,{name:name,newValue:extend(deep,clone,copy)});}else if(typeof copy!=='undefined'){setProperty(target,{name:name,newValue:copy});}}}}}
return target;};}),(function(module,exports,__webpack_require__){(function(module,global){var __WEBPACK_AMD_DEFINE_RESULT__;/*!https://mths.be/punycode v1.4.1 by @mathias*/;(function(root){var freeExports=typeof exports=='object'&&exports&&!exports.nodeType&&exports;var freeModule=typeof module=='object'&&module&&!module.nodeType&&module;var freeGlobal=typeof global=='object'&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal||freeGlobal.self===freeGlobal){root=freeGlobal;}
var punycode,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter='-',regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={'overflow':'Overflow: input needs wider integers to process','not-basic':'Illegal input >= 0x80 (not a basic code point)','invalid-input':'Invalid input'},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode,key;function error(type){throw new RangeError(errors[type]);}
function map(array,fn){var length=array.length;var result=[];while(length--){result[length]=fn(array[length]);}
return result;}
function mapDomain(string,fn){var parts=string.split('@');var result='';if(parts.length>1){result=parts[0]+'@';string=parts[1];}
string=string.replace(regexSeparators,'\x2E');var labels=string.split('.');var encoded=map(labels,fn).join('.');return result+encoded;}
function ucs2decode(string){var output=[],counter=0,length=string.length,value,extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=0xD800&&value<=0xDBFF&&counter<length){extra=string.charCodeAt(counter++);if((extra&0xFC00)==0xDC00){output.push(((value&0x3FF)<<10)+(extra&0x3FF)+0x10000);}else{output.push(value);counter--;}}else{output.push(value);}}
return output;}
function ucs2encode(array){return map(array,function(value){var output='';if(value>0xFFFF){value-=0x10000;output+=stringFromCharCode(value>>>10&0x3FF|0xD800);value=0xDC00|value&0x3FF;}
output+=stringFromCharCode(value);return output;}).join('');}
function basicToDigit(codePoint){if(codePoint-48<10){return codePoint-22;}
if(codePoint-65<26){return codePoint-65;}
if(codePoint-97<26){return codePoint-97;}
return base;}
function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((flag!=0)<<5);}
function adapt(delta,numPoints,firstTime){var k=0;delta=firstTime?floor(delta/damp):delta>>1;delta+=floor(delta/numPoints);for(;delta>baseMinusTMin*tMax>>1;k+=base){delta=floor(delta/baseMinusTMin);}
return floor(k+(baseMinusTMin+1)*delta/(delta+skew));}
function decode(input){var output=[],inputLength=input.length,out,i=0,n=initialN,bias=initialBias,basic,j,index,oldi,w,k,digit,t,baseMinusT;basic=input.lastIndexOf(delimiter);if(basic<0){basic=0;}
for(j=0;j<basic;++j){if(input.charCodeAt(j)>=0x80){error('not-basic');}
output.push(input.charCodeAt(j));}
for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=base;;k+=base){if(index>=inputLength){error('invalid-input');}
digit=basicToDigit(input.charCodeAt(index++));if(digit>=base||digit>floor((maxInt-i)/w)){error('overflow');}
i+=digit*w;t=k<=bias?tMin:(k>=bias+tMax?tMax:k-bias);if(digit<t){break;}
baseMinusT=base-t;if(w>floor(maxInt/baseMinusT)){error('overflow');}
w*=baseMinusT;}
out=output.length+1;bias=adapt(i-oldi,out,oldi==0);if(floor(i/out)>maxInt-n){error('overflow');}
n+=floor(i/out);i%=out;output.splice(i++,0,n);}
return ucs2encode(output);}
function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,output=[],inputLength,handledCPCountPlusOne,baseMinusT,qMinusT;input=ucs2decode(input);inputLength=input.length;n=initialN;delta=0;bias=initialBias;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<0x80){output.push(stringFromCharCode(currentValue));}}
handledCPCount=basicLength=output.length;if(basicLength){output.push(delimiter);}
while(handledCPCount<inputLength){for(m=maxInt,j=0;j<inputLength;++j){currentValue=input[j];if(currentValue>=n&&currentValue<m){m=currentValue;}}
handledCPCountPlusOne=handledCPCount+1;if(m-n>floor((maxInt-delta)/handledCPCountPlusOne)){error('overflow');}
delta+=(m-n)*handledCPCountPlusOne;n=m;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<n&&++delta>maxInt){error('overflow');}
if(currentValue==n){for(q=delta,k=base;;k+=base){t=k<=bias?tMin:(k>=bias+tMax?tMax:k-bias);if(q<t){break;}
qMinusT=q-t;baseMinusT=base-t;output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0)));q=floor(qMinusT/baseMinusT);}
output.push(stringFromCharCode(digitToBasic(q,0)));bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength);delta=0;++handledCPCount;}}
++delta;++n;}
return output.join('');}
function toUnicode(input){return mapDomain(input,function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string;});}
function toASCII(input){return mapDomain(input,function(string){return regexNonASCII.test(string)?'xn--'+encode(string):string;});}
punycode={'version':'1.4.1','ucs2':{'decode':ucs2decode,'encode':ucs2encode},'decode':decode,'encode':encode,'toASCII':toASCII,'toUnicode':toUnicode};if(true){!(__WEBPACK_AMD_DEFINE_RESULT__=(function(){return punycode;}).call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));}else if(freeExports&&freeModule){if(module.exports==freeExports){freeModule.exports=punycode;}else{for(key in punycode){punycode.hasOwnProperty(key)&&(freeExports[key]=punycode[key]);}}}else{root.punycode=punycode;}}(this));}.call(exports,__webpack_require__(83)(module),__webpack_require__(10)))}),(function(module,exports,__webpack_require__){"use strict";(function(setImmediate,process){var jsonSafeStringify=__webpack_require__(805)
var crypto=__webpack_require__(24)
var Buffer=__webpack_require__(4).Buffer
var defer=typeof setImmediate==='undefined'?process.nextTick:setImmediate
function paramsHaveRequestBody(params){return(params.body||params.requestBodyStream||(params.json&&typeof params.json!=='boolean')||params.multipart)}
function safeStringify(obj,replacer){var ret
try{ret=JSON.stringify(obj,replacer)}catch(e){ret=jsonSafeStringify(obj,replacer)}
return ret}
function md5(str){return crypto.createHash('md5').update(str).digest('hex')}
function isReadStream(rs){return rs.readable&&rs.path&&rs.mode}
function toBase64(str){return Buffer.from(str||'','utf8').toString('base64')}
function copy(obj){var o={}
Object.keys(obj).forEach(function(i){o[i]=obj[i]})
return o}
function version(){var numbers=process.version.replace('v','').split('.')
return{major:parseInt(numbers[0],10),minor:parseInt(numbers[1],10),patch:parseInt(numbers[2],10)}}
exports.paramsHaveRequestBody=paramsHaveRequestBody
exports.safeStringify=safeStringify
exports.md5=md5
exports.isReadStream=isReadStream
exports.toBase64=toBase64
exports.copy=copy
exports.version=version
exports.defer=defer}.call(exports,__webpack_require__(163).setImmediate,__webpack_require__(20)))}),(function(module,exports,__webpack_require__){var http=__webpack_require__(133)
var url=__webpack_require__(77)
var https=module.exports
for(var key in http){if(http.hasOwnProperty(key))https[key]=http[key]}
https.request=function(params,cb){params=validateParams(params)
return http.request.call(this,params,cb)}
https.get=function(params,cb){params=validateParams(params)
return http.get.call(this,params,cb)}
function validateParams(params){if(typeof params==='string'){params=url.parse(params)}
if(!params.protocol){params.protocol='https:'}
if(params.protocol!=='https:'){throw new Error('Protocol "'+params.protocol+'" not supported. Expected "https:"')}
return params}}),(function(module,exports,__webpack_require__){var Key=__webpack_require__(33);var Fingerprint=__webpack_require__(134);var Signature=__webpack_require__(78);var PrivateKey=__webpack_require__(38);var Certificate=__webpack_require__(138);var Identity=__webpack_require__(139);var errs=__webpack_require__(72);module.exports={Key:Key,parseKey:Key.parse,Fingerprint:Fingerprint,parseFingerprint:Fingerprint.parse,Signature:Signature,parseSignature:Signature.parse,PrivateKey:PrivateKey,parsePrivateKey:PrivateKey.parse,generatePrivateKey:PrivateKey.generate,Certificate:Certificate,parseCertificate:Certificate.parse,createSelfSignedCertificate:Certificate.createSelfSigned,createCertificate:Certificate.create,Identity:Identity,identityFromDN:Identity.parseDN,identityForHost:Identity.forHost,identityForUser:Identity.forUser,identityForEmail:Identity.forEmail,identityFromArray:Identity.fromArray,FingerprintFormatError:errs.FingerprintFormatError,InvalidAlgorithmError:errs.InvalidAlgorithmError,KeyParseError:errs.KeyParseError,SignatureParseError:errs.SignatureParseError,KeyEncryptedError:errs.KeyEncryptedError,CertificateParseError:errs.CertificateParseError};}),(function(module,exports){module.exports={newInvalidAsn1Error:function(msg){var e=new Error();e.name='InvalidAsn1Error';e.message=msg||'';return e;}};}),(function(module,exports){module.exports={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128};}),(function(module,exports,__webpack_require__){module.exports={DiffieHellman:DiffieHellman,generateECDSA:generateECDSA,generateED25519:generateED25519};var assert=__webpack_require__(15);var crypto=__webpack_require__(24);var Buffer=__webpack_require__(21).Buffer;var algs=__webpack_require__(41);var utils=__webpack_require__(34);var nacl=__webpack_require__(173);var Key=__webpack_require__(33);var PrivateKey=__webpack_require__(38);var CRYPTO_HAVE_ECDH=(crypto.createECDH!==undefined);var ecdh=__webpack_require__(829);var ec=__webpack_require__(172);var jsbn=__webpack_require__(135).BigInteger;function DiffieHellman(key){utils.assertCompatible(key,Key,[1,4],'key');this._isPriv=PrivateKey.isPrivateKey(key,[1,3]);this._algo=key.type;this._curve=key.curve;this._key=key;if(key.type==='dsa'){if(!CRYPTO_HAVE_ECDH){throw(new Error('Due to bugs in the node 0.10 '+
'crypto API, node 0.12.x or later is required '+
'to use DH'));}
this._dh=crypto.createDiffieHellman(key.part.p.data,undefined,key.part.g.data,undefined);this._p=key.part.p;this._g=key.part.g;if(this._isPriv)
this._dh.setPrivateKey(key.part.x.data);this._dh.setPublicKey(key.part.y.data);}else if(key.type==='ecdsa'){if(!CRYPTO_HAVE_ECDH){this._ecParams=new X9ECParameters(this._curve);if(this._isPriv){this._priv=new ECPrivate(this._ecParams,key.part.d.data);}
return;}
var curve={'nistp256':'prime256v1','nistp384':'secp384r1','nistp521':'secp521r1'}[key.curve];this._dh=crypto.createECDH(curve);if(typeof(this._dh)!=='object'||typeof(this._dh.setPrivateKey)!=='function'){CRYPTO_HAVE_ECDH=false;DiffieHellman.call(this,key);return;}
if(this._isPriv)
this._dh.setPrivateKey(key.part.d.data);this._dh.setPublicKey(key.part.Q.data);}else if(key.type==='curve25519'){if(this._isPriv){utils.assertCompatible(key,PrivateKey,[1,5],'key');this._priv=key.part.k.data;}}else{throw(new Error('DH not supported for '+key.type+' keys'));}}
DiffieHellman.prototype.getPublicKey=function(){if(this._isPriv)
return(this._key.toPublic());return(this._key);};DiffieHellman.prototype.getPrivateKey=function(){if(this._isPriv)
return(this._key);else
return(undefined);};DiffieHellman.prototype.getKey=DiffieHellman.prototype.getPrivateKey;DiffieHellman.prototype._keyCheck=function(pk,isPub){assert.object(pk,'key');if(!isPub)
utils.assertCompatible(pk,PrivateKey,[1,3],'key');utils.assertCompatible(pk,Key,[1,4],'key');if(pk.type!==this._algo){throw(new Error('A '+pk.type+' key cannot be used in '+
this._algo+' Diffie-Hellman'));}
if(pk.curve!==this._curve){throw(new Error('A key from the '+pk.curve+' curve '+
'cannot be used with a '+this._curve+
' Diffie-Hellman'));}
if(pk.type==='dsa'){assert.deepEqual(pk.part.p,this._p,'DSA key prime does not match');assert.deepEqual(pk.part.g,this._g,'DSA key generator does not match');}};DiffieHellman.prototype.setKey=function(pk){this._keyCheck(pk);if(pk.type==='dsa'){this._dh.setPrivateKey(pk.part.x.data);this._dh.setPublicKey(pk.part.y.data);}else if(pk.type==='ecdsa'){if(CRYPTO_HAVE_ECDH){this._dh.setPrivateKey(pk.part.d.data);this._dh.setPublicKey(pk.part.Q.data);}else{this._priv=new ECPrivate(this._ecParams,pk.part.d.data);}}else if(pk.type==='curve25519'){var k=pk.part.k;if(!pk.part.k)
k=pk.part.r;this._priv=k.data;if(this._priv[0]===0x00)
this._priv=this._priv.slice(1);this._priv=this._priv.slice(0,32);}
this._key=pk;this._isPriv=true;};DiffieHellman.prototype.setPrivateKey=DiffieHellman.prototype.setKey;DiffieHellman.prototype.computeSecret=function(otherpk){this._keyCheck(otherpk,true);if(!this._isPriv)
throw(new Error('DH exchange has not been initialized with '+
'a private key yet'));var pub;if(this._algo==='dsa'){return(this._dh.computeSecret(otherpk.part.y.data));}else if(this._algo==='ecdsa'){if(CRYPTO_HAVE_ECDH){return(this._dh.computeSecret(otherpk.part.Q.data));}else{pub=new ECPublic(this._ecParams,otherpk.part.Q.data);return(this._priv.deriveSharedSecret(pub));}}else if(this._algo==='curve25519'){pub=otherpk.part.A.data;while(pub[0]===0x00&&pub.length>32)
pub=pub.slice(1);var priv=this._priv;assert.strictEqual(pub.length,32);assert.strictEqual(priv.length,32);var secret=nacl.box.before(new Uint8Array(pub),new Uint8Array(priv));return(Buffer.from(secret));}
throw(new Error('Invalid algorithm: '+this._algo));};DiffieHellman.prototype.generateKey=function(){var parts=[];var priv,pub;if(this._algo==='dsa'){this._dh.generateKeys();parts.push({name:'p',data:this._p.data});parts.push({name:'q',data:this._key.part.q.data});parts.push({name:'g',data:this._g.data});parts.push({name:'y',data:this._dh.getPublicKey()});parts.push({name:'x',data:this._dh.getPrivateKey()});this._key=new PrivateKey({type:'dsa',parts:parts});this._isPriv=true;return(this._key);}else if(this._algo==='ecdsa'){if(CRYPTO_HAVE_ECDH){this._dh.generateKeys();parts.push({name:'curve',data:Buffer.from(this._curve)});parts.push({name:'Q',data:this._dh.getPublicKey()});parts.push({name:'d',data:this._dh.getPrivateKey()});this._key=new PrivateKey({type:'ecdsa',curve:this._curve,parts:parts});this._isPriv=true;return(this._key);}else{var n=this._ecParams.getN();var r=new jsbn(crypto.randomBytes(n.bitLength()));var n1=n.subtract(jsbn.ONE);priv=r.mod(n1).add(jsbn.ONE);pub=this._ecParams.getG().multiply(priv);priv=Buffer.from(priv.toByteArray());pub=Buffer.from(this._ecParams.getCurve().encodePointHex(pub),'hex');this._priv=new ECPrivate(this._ecParams,priv);parts.push({name:'curve',data:Buffer.from(this._curve)});parts.push({name:'Q',data:pub});parts.push({name:'d',data:priv});this._key=new PrivateKey({type:'ecdsa',curve:this._curve,parts:parts});this._isPriv=true;return(this._key);}}else if(this._algo==='curve25519'){var pair=nacl.box.keyPair();priv=Buffer.from(pair.secretKey);pub=Buffer.from(pair.publicKey);priv=Buffer.concat([priv,pub]);assert.strictEqual(priv.length,64);assert.strictEqual(pub.length,32);parts.push({name:'A',data:pub});parts.push({name:'k',data:priv});this._key=new PrivateKey({type:'curve25519',parts:parts});this._isPriv=true;return(this._key);}
throw(new Error('Invalid algorithm: '+this._algo));};DiffieHellman.prototype.generateKeys=DiffieHellman.prototype.generateKey;function X9ECParameters(name){var params=algs.curves[name];assert.object(params);var p=new jsbn(params.p);var a=new jsbn(params.a);var b=new jsbn(params.b);var n=new jsbn(params.n);var h=jsbn.ONE;var curve=new ec.ECCurveFp(p,a,b);var G=curve.decodePointHex(params.G.toString('hex'));this.curve=curve;this.g=G;this.n=n;this.h=h;}
X9ECParameters.prototype.getCurve=function(){return(this.curve);};X9ECParameters.prototype.getG=function(){return(this.g);};X9ECParameters.prototype.getN=function(){return(this.n);};X9ECParameters.prototype.getH=function(){return(this.h);};function ECPublic(params,buffer){this._params=params;if(buffer[0]===0x00)
buffer=buffer.slice(1);this._pub=params.getCurve().decodePointHex(buffer.toString('hex'));}
function ECPrivate(params,buffer){this._params=params;this._priv=new jsbn(utils.mpNormalize(buffer));}
ECPrivate.prototype.deriveSharedSecret=function(pubKey){assert.ok(pubKey instanceof ECPublic);var S=pubKey._pub.multiply(this._priv);return(Buffer.from(S.getX().toBigInteger().toByteArray()));};function generateED25519(){var pair=nacl.sign.keyPair();var priv=Buffer.from(pair.secretKey);var pub=Buffer.from(pair.publicKey);assert.strictEqual(priv.length,64);assert.strictEqual(pub.length,32);var parts=[];parts.push({name:'A',data:pub});parts.push({name:'k',data:priv.slice(0,32)});var key=new PrivateKey({type:'ed25519',parts:parts});return(key);}
function generateECDSA(curve){var parts=[];var key;if(CRYPTO_HAVE_ECDH){var osCurve={'nistp256':'prime256v1','nistp384':'secp384r1','nistp521':'secp521r1'}[curve];var dh=crypto.createECDH(osCurve);dh.generateKeys();parts.push({name:'curve',data:Buffer.from(curve)});parts.push({name:'Q',data:dh.getPublicKey()});parts.push({name:'d',data:dh.getPrivateKey()});key=new PrivateKey({type:'ecdsa',curve:curve,parts:parts});return(key);}else{var ecParams=new X9ECParameters(curve);var n=ecParams.getN();var cByteLen=Math.ceil((n.bitLength()+64)/8);var c=new jsbn(crypto.randomBytes(cByteLen));var n1=n.subtract(jsbn.ONE);var priv=c.mod(n1).add(jsbn.ONE);var pub=ecParams.getG().multiply(priv);priv=Buffer.from(priv.toByteArray());pub=Buffer.from(ecParams.getCurve().encodePointHex(pub),'hex');parts.push({name:'curve',data:Buffer.from(curve)});parts.push({name:'Q',data:pub});parts.push({name:'d',data:priv});key=new PrivateKey({type:'ecdsa',curve:curve,parts:parts});return(key);}}}),(function(module,exports,__webpack_require__){module.exports={read:read,readPkcs1:readPkcs1,write:write,writePkcs1:writePkcs1};var assert=__webpack_require__(15);var asn1=__webpack_require__(79);var Buffer=__webpack_require__(21).Buffer;var algs=__webpack_require__(41);var utils=__webpack_require__(34);var Key=__webpack_require__(33);var PrivateKey=__webpack_require__(38);var pem=__webpack_require__(88);var pkcs8=__webpack_require__(137);var readECDSACurve=pkcs8.readECDSACurve;function read(buf,options){return(pem.read(buf,options,'pkcs1'));}
function write(key,options){return(pem.write(key,options,'pkcs1'));}
function readMPInt(der,nm){assert.strictEqual(der.peek(),asn1.Ber.Integer,nm+' is not an Integer');return(utils.mpNormalize(der.readString(asn1.Ber.Integer,true)));}
function readPkcs1(alg,type,der){switch(alg){case 'RSA':if(type==='public')
return(readPkcs1RSAPublic(der));else if(type==='private')
return(readPkcs1RSAPrivate(der));throw(new Error('Unknown key type: '+type));case 'DSA':if(type==='public')
return(readPkcs1DSAPublic(der));else if(type==='private')
return(readPkcs1DSAPrivate(der));throw(new Error('Unknown key type: '+type));case 'EC':case 'ECDSA':if(type==='private')
return(readPkcs1ECDSAPrivate(der));else if(type==='public')
return(readPkcs1ECDSAPublic(der));throw(new Error('Unknown key type: '+type));case 'EDDSA':case 'EdDSA':if(type==='private')
return(readPkcs1EdDSAPrivate(der));throw(new Error(type+' keys not supported with EdDSA'));default:throw(new Error('Unknown key algo: '+alg));}}
function readPkcs1RSAPublic(der){var n=readMPInt(der,'modulus');var e=readMPInt(der,'exponent');var key={type:'rsa',parts:[{name:'e',data:e},{name:'n',data:n}]};return(new Key(key));}
function readPkcs1RSAPrivate(der){var version=readMPInt(der,'version');assert.strictEqual(version[0],0);var n=readMPInt(der,'modulus');var e=readMPInt(der,'public exponent');var d=readMPInt(der,'private exponent');var p=readMPInt(der,'prime1');var q=readMPInt(der,'prime2');var dmodp=readMPInt(der,'exponent1');var dmodq=readMPInt(der,'exponent2');var iqmp=readMPInt(der,'iqmp');var key={type:'rsa',parts:[{name:'n',data:n},{name:'e',data:e},{name:'d',data:d},{name:'iqmp',data:iqmp},{name:'p',data:p},{name:'q',data:q},{name:'dmodp',data:dmodp},{name:'dmodq',data:dmodq}]};return(new PrivateKey(key));}
function readPkcs1DSAPrivate(der){var version=readMPInt(der,'version');assert.strictEqual(version.readUInt8(0),0);var p=readMPInt(der,'p');var q=readMPInt(der,'q');var g=readMPInt(der,'g');var y=readMPInt(der,'y');var x=readMPInt(der,'x');var key={type:'dsa',parts:[{name:'p',data:p},{name:'q',data:q},{name:'g',data:g},{name:'y',data:y},{name:'x',data:x}]};return(new PrivateKey(key));}
function readPkcs1EdDSAPrivate(der){var version=readMPInt(der,'version');assert.strictEqual(version.readUInt8(0),1);var k=der.readString(asn1.Ber.OctetString,true);der.readSequence(0xa0);var oid=der.readOID();assert.strictEqual(oid,'1.3.101.112','the ed25519 curve identifier');der.readSequence(0xa1);var A=utils.readBitString(der);var key={type:'ed25519',parts:[{name:'A',data:utils.zeroPadToLength(A,32)},{name:'k',data:k}]};return(new PrivateKey(key));}
function readPkcs1DSAPublic(der){var y=readMPInt(der,'y');var p=readMPInt(der,'p');var q=readMPInt(der,'q');var g=readMPInt(der,'g');var key={type:'dsa',parts:[{name:'y',data:y},{name:'p',data:p},{name:'q',data:q},{name:'g',data:g}]};return(new Key(key));}
function readPkcs1ECDSAPublic(der){der.readSequence();var oid=der.readOID();assert.strictEqual(oid,'1.2.840.10045.2.1','must be ecPublicKey');var curveOid=der.readOID();var curve;var curves=Object.keys(algs.curves);for(var j=0;j<curves.length;++j){var c=curves[j];var cd=algs.curves[c];if(cd.pkcs8oid===curveOid){curve=c;break;}}
assert.string(curve,'a known ECDSA named curve');var Q=der.readString(asn1.Ber.BitString,true);Q=utils.ecNormalize(Q);var key={type:'ecdsa',parts:[{name:'curve',data:Buffer.from(curve)},{name:'Q',data:Q}]};return(new Key(key));}
function readPkcs1ECDSAPrivate(der){var version=readMPInt(der,'version');assert.strictEqual(version.readUInt8(0),1);var d=der.readString(asn1.Ber.OctetString,true);der.readSequence(0xa0);var curve=readECDSACurve(der);assert.string(curve,'a known elliptic curve');der.readSequence(0xa1);var Q=der.readString(asn1.Ber.BitString,true);Q=utils.ecNormalize(Q);var key={type:'ecdsa',parts:[{name:'curve',data:Buffer.from(curve)},{name:'Q',data:Q},{name:'d',data:d}]};return(new PrivateKey(key));}
function writePkcs1(der,key){der.startSequence();switch(key.type){case 'rsa':if(PrivateKey.isPrivateKey(key))
writePkcs1RSAPrivate(der,key);else
writePkcs1RSAPublic(der,key);break;case 'dsa':if(PrivateKey.isPrivateKey(key))
writePkcs1DSAPrivate(der,key);else
writePkcs1DSAPublic(der,key);break;case 'ecdsa':if(PrivateKey.isPrivateKey(key))
writePkcs1ECDSAPrivate(der,key);else
writePkcs1ECDSAPublic(der,key);break;case 'ed25519':if(PrivateKey.isPrivateKey(key))
writePkcs1EdDSAPrivate(der,key);else
writePkcs1EdDSAPublic(der,key);break;default:throw(new Error('Unknown key algo: '+key.type));}
der.endSequence();}
function writePkcs1RSAPublic(der,key){der.writeBuffer(key.part.n.data,asn1.Ber.Integer);der.writeBuffer(key.part.e.data,asn1.Ber.Integer);}
function writePkcs1RSAPrivate(der,key){var ver=Buffer.from([0]);der.writeBuffer(ver,asn1.Ber.Integer);der.writeBuffer(key.part.n.data,asn1.Ber.Integer);der.writeBuffer(key.part.e.data,asn1.Ber.Integer);der.writeBuffer(key.part.d.data,asn1.Ber.Integer);der.writeBuffer(key.part.p.data,asn1.Ber.Integer);der.writeBuffer(key.part.q.data,asn1.Ber.Integer);if(!key.part.dmodp||!key.part.dmodq)
utils.addRSAMissing(key);der.writeBuffer(key.part.dmodp.data,asn1.Ber.Integer);der.writeBuffer(key.part.dmodq.data,asn1.Ber.Integer);der.writeBuffer(key.part.iqmp.data,asn1.Ber.Integer);}
function writePkcs1DSAPrivate(der,key){var ver=Buffer.from([0]);der.writeBuffer(ver,asn1.Ber.Integer);der.writeBuffer(key.part.p.data,asn1.Ber.Integer);der.writeBuffer(key.part.q.data,asn1.Ber.Integer);der.writeBuffer(key.part.g.data,asn1.Ber.Integer);der.writeBuffer(key.part.y.data,asn1.Ber.Integer);der.writeBuffer(key.part.x.data,asn1.Ber.Integer);}
function writePkcs1DSAPublic(der,key){der.writeBuffer(key.part.y.data,asn1.Ber.Integer);der.writeBuffer(key.part.p.data,asn1.Ber.Integer);der.writeBuffer(key.part.q.data,asn1.Ber.Integer);der.writeBuffer(key.part.g.data,asn1.Ber.Integer);}
function writePkcs1ECDSAPublic(der,key){der.startSequence();der.writeOID('1.2.840.10045.2.1');var curve=key.part.curve.data.toString();var curveOid=algs.curves[curve].pkcs8oid;assert.string(curveOid,'a known ECDSA named curve');der.writeOID(curveOid);der.endSequence();var Q=utils.ecNormalize(key.part.Q.data,true);der.writeBuffer(Q,asn1.Ber.BitString);}
function writePkcs1ECDSAPrivate(der,key){var ver=Buffer.from([1]);der.writeBuffer(ver,asn1.Ber.Integer);der.writeBuffer(key.part.d.data,asn1.Ber.OctetString);der.startSequence(0xa0);var curve=key.part.curve.data.toString();var curveOid=algs.curves[curve].pkcs8oid;assert.string(curveOid,'a known ECDSA named curve');der.writeOID(curveOid);der.endSequence();der.startSequence(0xa1);var Q=utils.ecNormalize(key.part.Q.data,true);der.writeBuffer(Q,asn1.Ber.BitString);der.endSequence();}
function writePkcs1EdDSAPrivate(der,key){var ver=Buffer.from([1]);der.writeBuffer(ver,asn1.Ber.Integer);der.writeBuffer(key.part.k.data,asn1.Ber.OctetString);der.startSequence(0xa0);der.writeOID('1.3.101.112');der.endSequence();der.startSequence(0xa1);utils.writeBitString(der,key.part.A.data);der.endSequence();}
function writePkcs1EdDSAPublic(der,key){throw(new Error('Public keys are not supported for EdDSA PKCS#1'));}}),(function(module,exports,__webpack_require__){module.exports={read:read,write:write};var assert=__webpack_require__(15);var Buffer=__webpack_require__(21).Buffer;var Key=__webpack_require__(33);var PrivateKey=__webpack_require__(38);var utils=__webpack_require__(34);var SSHBuffer=__webpack_require__(136);var Dhe=__webpack_require__(242);var supportedAlgos={'rsa-sha1':5,'rsa-sha256':8,'rsa-sha512':10,'ecdsa-p256-sha256':13,'ecdsa-p384-sha384':14};var supportedAlgosById={};Object.keys(supportedAlgos).forEach(function(k){supportedAlgosById[supportedAlgos[k]]=k.toUpperCase();});function read(buf,options){if(typeof(buf)!=='string'){assert.buffer(buf,'buf');buf=buf.toString('ascii');}
var lines=buf.split('\n');if(lines[0].match(/^Private-key-format\: v1/)){var algElems=lines[1].split(' ');var algoNum=parseInt(algElems[1],10);var algoName=algElems[2];if(!supportedAlgosById[algoNum])
throw(new Error('Unsupported algorithm: '+algoName));return(readDNSSECPrivateKey(algoNum,lines.slice(2)));}
var line=0;while(lines[line].match(/^\;/))
line++;if((lines[line].match(/\. IN KEY /)||lines[line].match(/\. IN DNSKEY /))&&lines[line+1].length===0){return(readRFC3110(lines[line]));}
throw(new Error('Cannot parse dnssec key'));}
function readRFC3110(keyString){var elems=keyString.split(' ');var algorithm=parseInt(elems[5],10);if(!supportedAlgosById[algorithm])
throw(new Error('Unsupported algorithm: '+algorithm));var base64key=elems.slice(6,elems.length).join();var keyBuffer=Buffer.from(base64key,'base64');if(supportedAlgosById[algorithm].match(/^RSA-/)){var publicExponentLen=keyBuffer.readUInt8(0);if(publicExponentLen!=3&&publicExponentLen!=1)
throw(new Error('Cannot parse dnssec key: '+
'unsupported exponent length'));var publicExponent=keyBuffer.slice(1,publicExponentLen+1);publicExponent=utils.mpNormalize(publicExponent);var modulus=keyBuffer.slice(1+publicExponentLen);modulus=utils.mpNormalize(modulus);var rsaKey={type:'rsa',parts:[]};rsaKey.parts.push({name:'e',data:publicExponent});rsaKey.parts.push({name:'n',data:modulus});return(new Key(rsaKey));}
if(supportedAlgosById[algorithm]==='ECDSA-P384-SHA384'||supportedAlgosById[algorithm]==='ECDSA-P256-SHA256'){var curve='nistp384';var size=384;if(supportedAlgosById[algorithm].match(/^ECDSA-P256-SHA256/)){curve='nistp256';size=256;}
var ecdsaKey={type:'ecdsa',curve:curve,size:size,parts:[{name:'curve',data:Buffer.from(curve)},{name:'Q',data:utils.ecNormalize(keyBuffer)}]};return(new Key(ecdsaKey));}
throw(new Error('Unsupported algorithm: '+
supportedAlgosById[algorithm]));}
function elementToBuf(e){return(Buffer.from(e.split(' ')[1],'base64'));}
function readDNSSECRSAPrivateKey(elements){var rsaParams={};elements.forEach(function(element){if(element.split(' ')[0]==='Modulus:')
rsaParams['n']=elementToBuf(element);else if(element.split(' ')[0]==='PublicExponent:')
rsaParams['e']=elementToBuf(element);else if(element.split(' ')[0]==='PrivateExponent:')
rsaParams['d']=elementToBuf(element);else if(element.split(' ')[0]==='Prime1:')
rsaParams['p']=elementToBuf(element);else if(element.split(' ')[0]==='Prime2:')
rsaParams['q']=elementToBuf(element);else if(element.split(' ')[0]==='Exponent1:')
rsaParams['dmodp']=elementToBuf(element);else if(element.split(' ')[0]==='Exponent2:')
rsaParams['dmodq']=elementToBuf(element);else if(element.split(' ')[0]==='Coefficient:')
rsaParams['iqmp']=elementToBuf(element);});var key={type:'rsa',parts:[{name:'e',data:utils.mpNormalize(rsaParams['e'])},{name:'n',data:utils.mpNormalize(rsaParams['n'])},{name:'d',data:utils.mpNormalize(rsaParams['d'])},{name:'p',data:utils.mpNormalize(rsaParams['p'])},{name:'q',data:utils.mpNormalize(rsaParams['q'])},{name:'dmodp',data:utils.mpNormalize(rsaParams['dmodp'])},{name:'dmodq',data:utils.mpNormalize(rsaParams['dmodq'])},{name:'iqmp',data:utils.mpNormalize(rsaParams['iqmp'])}]};return(new PrivateKey(key));}
function readDNSSECPrivateKey(alg,elements){if(supportedAlgosById[alg].match(/^RSA-/)){return(readDNSSECRSAPrivateKey(elements));}
if(supportedAlgosById[alg]==='ECDSA-P384-SHA384'||supportedAlgosById[alg]==='ECDSA-P256-SHA256'){var d=Buffer.from(elements[0].split(' ')[1],'base64');var curve='nistp384';var size=384;if(supportedAlgosById[alg]==='ECDSA-P256-SHA256'){curve='nistp256';size=256;}
var publicKey=utils.publicFromPrivateECDSA(curve,d);var Q=publicKey.part['Q'].data;var ecdsaKey={type:'ecdsa',curve:curve,size:size,parts:[{name:'curve',data:Buffer.from(curve)},{name:'d',data:d},{name:'Q',data:Q}]};return(new PrivateKey(ecdsaKey));}
throw(new Error('Unsupported algorithm: '+supportedAlgosById[alg]));}
function dnssecTimestamp(date){var year=date.getFullYear()+'';var month=(date.getMonth()+1);var timestampStr=year+month+date.getUTCDate();timestampStr+=''+date.getUTCHours()+date.getUTCMinutes();timestampStr+=date.getUTCSeconds();return(timestampStr);}
function rsaAlgFromOptions(opts){if(!opts||!opts.hashAlgo||opts.hashAlgo==='sha1')
return('5 (RSASHA1)');else if(opts.hashAlgo==='sha256')
return('8 (RSASHA256)');else if(opts.hashAlgo==='sha512')
return('10 (RSASHA512)');else
throw(new Error('Unknown or unsupported hash: '+
opts.hashAlgo));}
function writeRSA(key,options){if(!key.part.dmodp||!key.part.dmodq){utils.addRSAMissing(key);}
var out='';out+='Private-key-format: v1.3\n';out+='Algorithm: '+rsaAlgFromOptions(options)+'\n';var n=utils.mpDenormalize(key.part['n'].data);out+='Modulus: '+n.toString('base64')+'\n';var e=utils.mpDenormalize(key.part['e'].data);out+='PublicExponent: '+e.toString('base64')+'\n';var d=utils.mpDenormalize(key.part['d'].data);out+='PrivateExponent: '+d.toString('base64')+'\n';var p=utils.mpDenormalize(key.part['p'].data);out+='Prime1: '+p.toString('base64')+'\n';var q=utils.mpDenormalize(key.part['q'].data);out+='Prime2: '+q.toString('base64')+'\n';var dmodp=utils.mpDenormalize(key.part['dmodp'].data);out+='Exponent1: '+dmodp.toString('base64')+'\n';var dmodq=utils.mpDenormalize(key.part['dmodq'].data);out+='Exponent2: '+dmodq.toString('base64')+'\n';var iqmp=utils.mpDenormalize(key.part['iqmp'].data);out+='Coefficient: '+iqmp.toString('base64')+'\n';var timestamp=new Date();out+='Created: '+dnssecTimestamp(timestamp)+'\n';out+='Publish: '+dnssecTimestamp(timestamp)+'\n';out+='Activate: '+dnssecTimestamp(timestamp)+'\n';return(Buffer.from(out,'ascii'));}
function writeECDSA(key,options){var out='';out+='Private-key-format: v1.3\n';if(key.curve==='nistp256'){out+='Algorithm: 13 (ECDSAP256SHA256)\n';}else if(key.curve==='nistp384'){out+='Algorithm: 14 (ECDSAP384SHA384)\n';}else{throw(new Error('Unsupported curve'));}
var base64Key=key.part['d'].data.toString('base64');out+='PrivateKey: '+base64Key+'\n';var timestamp=new Date();out+='Created: '+dnssecTimestamp(timestamp)+'\n';out+='Publish: '+dnssecTimestamp(timestamp)+'\n';out+='Activate: '+dnssecTimestamp(timestamp)+'\n';return(Buffer.from(out,'ascii'));}
function write(key,options){if(PrivateKey.isPrivateKey(key)){if(key.type==='rsa'){return(writeRSA(key,options));}else if(key.type==='ecdsa'){return(writeECDSA(key,options));}else{throw(new Error('Unsupported algorithm: '+key.type));}}else if(Key.isKey(key)){throw(new Error('Format "dnssec" only supports '+
'writing private keys'));}else{throw(new Error('key is not a Key or PrivateKey'));}}}),(function(module,exports){function Caseless(dict){this.dict=dict||{}}
Caseless.prototype.set=function(name,value,clobber){if(typeof name==='object'){for(var i in name){this.set(i,name[i],value)}}else{if(typeof clobber==='undefined')clobber=true
var has=this.has(name)
if(!clobber&&has)this.dict[has]=this.dict[has]+','+value
else this.dict[has||name]=value
return has}}
Caseless.prototype.has=function(name){var keys=Object.keys(this.dict),name=name.toLowerCase();for(var i=0;i<keys.length;i++){if(keys[i].toLowerCase()===name)return keys[i]}
return false}
Caseless.prototype.get=function(name){name=name.toLowerCase()
var result,_key
var headers=this.dict
Object.keys(headers).forEach(function(key){_key=key.toLowerCase()
if(name===_key)result=headers[key]})
return result}
Caseless.prototype.swap=function(name){var has=this.has(name)
if(has===name)return
if(!has)throw new Error('There is no header than matches "'+name+'"')
this.dict[name]=this.dict[has]
delete this.dict[has]}
Caseless.prototype.del=function(name){var has=this.has(name)
return delete this.dict[has||name]}
module.exports=function(dict){return new Caseless(dict)}
module.exports.httpify=function(resp,headers){var c=new Caseless(headers)
resp.setHeader=function(key,value,clobber){if(typeof value==='undefined')return
return c.set(key,value,clobber)}
resp.hasHeader=function(key){return c.has(key)}
resp.getHeader=function(key){return c.get(key)}
resp.removeHeader=function(key){return c.del(key)}
resp.headers=c.dict
return c}}),(function(module,exports,__webpack_require__){"use strict";var URI=__webpack_require__(855),equal=__webpack_require__(247),util=__webpack_require__(117),SchemaObject=__webpack_require__(387),traverse=__webpack_require__(857);module.exports=resolve;resolve.normalizeId=normalizeId;resolve.fullPath=getFullPath;resolve.url=resolveUrl;resolve.ids=resolveIds;resolve.inlineRef=inlineRef;resolve.schema=resolveSchema;function resolve(compile,root,ref){var refVal=this._refs[ref];if(typeof refVal=='string'){if(this._refs[refVal])refVal=this._refs[refVal];else return resolve.call(this,compile,root,refVal);}
refVal=refVal||this._schemas[ref];if(refVal instanceof SchemaObject){return inlineRef(refVal.schema,this._opts.inlineRefs)?refVal.schema:refVal.validate||this._compile(refVal);}
var res=resolveSchema.call(this,root,ref);var schema,v,baseId;if(res){schema=res.schema;root=res.root;baseId=res.baseId;}
if(schema instanceof SchemaObject){v=schema.validate||compile.call(this,schema.schema,root,undefined,baseId);}else if(schema!==undefined){v=inlineRef(schema,this._opts.inlineRefs)?schema:compile.call(this,schema,root,undefined,baseId);}
return v;}
function resolveSchema(root,ref){var p=URI.parse(ref),refPath=_getFullPath(p),baseId=getFullPath(this._getId(root.schema));if(Object.keys(root.schema).length===0||refPath!==baseId){var id=normalizeId(refPath);var refVal=this._refs[id];if(typeof refVal=='string'){return resolveRecursive.call(this,root,refVal,p);}else if(refVal instanceof SchemaObject){if(!refVal.validate)this._compile(refVal);root=refVal;}else{refVal=this._schemas[id];if(refVal instanceof SchemaObject){if(!refVal.validate)this._compile(refVal);if(id==normalizeId(ref))
return{schema:refVal,root:root,baseId:baseId};root=refVal;}else{return;}}
if(!root.schema)return;baseId=getFullPath(this._getId(root.schema));}
return getJsonPointer.call(this,p,baseId,root.schema,root);}
function resolveRecursive(root,ref,parsedRef){var res=resolveSchema.call(this,root,ref);if(res){var schema=res.schema;var baseId=res.baseId;root=res.root;var id=this._getId(schema);if(id)baseId=resolveUrl(baseId,id);return getJsonPointer.call(this,parsedRef,baseId,schema,root);}}
var PREVENT_SCOPE_CHANGE=util.toHash(['properties','patternProperties','enum','dependencies','definitions']);function getJsonPointer(parsedRef,baseId,schema,root){parsedRef.fragment=parsedRef.fragment||'';if(parsedRef.fragment.slice(0,1)!='/')return;var parts=parsedRef.fragment.split('/');for(var i=1;i<parts.length;i++){var part=parts[i];if(part){part=util.unescapeFragment(part);schema=schema[part];if(schema===undefined)break;var id;if(!PREVENT_SCOPE_CHANGE[part]){id=this._getId(schema);if(id)baseId=resolveUrl(baseId,id);if(schema.$ref){var $ref=resolveUrl(baseId,schema.$ref);var res=resolveSchema.call(this,root,$ref);if(res){schema=res.schema;root=res.root;baseId=res.baseId;}}}}}
if(schema!==undefined&&schema!==root.schema)
return{schema:schema,root:root,baseId:baseId};}
var SIMPLE_INLINED=util.toHash(['type','format','pattern','maxLength','minLength','maxProperties','minProperties','maxItems','minItems','maximum','minimum','uniqueItems','multipleOf','required','enum']);function inlineRef(schema,limit){if(limit===false)return false;if(limit===undefined||limit===true)return checkNoRef(schema);else if(limit)return countKeys(schema)<=limit;}
function checkNoRef(schema){var item;if(Array.isArray(schema)){for(var i=0;i<schema.length;i++){item=schema[i];if(typeof item=='object'&&!checkNoRef(item))return false;}}else{for(var key in schema){if(key=='$ref')return false;item=schema[key];if(typeof item=='object'&&!checkNoRef(item))return false;}}
return true;}
function countKeys(schema){var count=0,item;if(Array.isArray(schema)){for(var i=0;i<schema.length;i++){item=schema[i];if(typeof item=='object')count+=countKeys(item);if(count==Infinity)return Infinity;}}else{for(var key in schema){if(key=='$ref')return Infinity;if(SIMPLE_INLINED[key]){count++;}else{item=schema[key];if(typeof item=='object')count+=countKeys(item)+1;if(count==Infinity)return Infinity;}}}
return count;}
function getFullPath(id,normalize){if(normalize!==false)id=normalizeId(id);var p=URI.parse(id);return _getFullPath(p);}
function _getFullPath(p){return URI.serialize(p).split('#')[0]+'#';}
var TRAILING_SLASH_HASH=/#\/?$/;function normalizeId(id){return id?id.replace(TRAILING_SLASH_HASH,''):'';}
function resolveUrl(baseId,id){id=normalizeId(id);return URI.resolve(baseId,id);}
function resolveIds(schema){var schemaId=normalizeId(this._getId(schema));var baseIds={'':schemaId};var fullPaths={'':getFullPath(schemaId,false)};var localRefs={};var self=this;traverse(schema,{allKeys:true},function(sch,jsonPtr,rootSchema,parentJsonPtr,parentKeyword,parentSchema,keyIndex){if(jsonPtr==='')return;var id=self._getId(sch);var baseId=baseIds[parentJsonPtr];var fullPath=fullPaths[parentJsonPtr]+'/'+parentKeyword;if(keyIndex!==undefined)
fullPath+='/'+(typeof keyIndex=='number'?keyIndex:util.escapeFragment(keyIndex));if(typeof id=='string'){id=baseId=normalizeId(baseId?URI.resolve(baseId,id):id);var refVal=self._refs[id];if(typeof refVal=='string')refVal=self._refs[refVal];if(refVal&&refVal.schema){if(!equal(sch,refVal.schema))
throw new Error('id "'+id+'" resolves to more than one schema');}else if(id!=normalizeId(fullPath)){if(id[0]=='#'){if(localRefs[id]&&!equal(sch,localRefs[id]))
throw new Error('id "'+id+'" resolves to more than one schema');localRefs[id]=sch;}else{self._refs[id]=fullPath;}}}
baseIds[jsonPtr]=baseId;fullPaths[jsonPtr]=fullPath;});return localRefs;}}),(function(module,exports,__webpack_require__){"use strict";var isArray=Array.isArray;var keyList=Object.keys;var hasProp=Object.prototype.hasOwnProperty;module.exports=function equal(a,b){if(a===b)return true;if(a&&b&&typeof a=='object'&&typeof b=='object'){var arrA=isArray(a),arrB=isArray(b),i,length,key;if(arrA&&arrB){length=a.length;if(length!=b.length)return false;for(i=length;i--!==0;)
if(!equal(a[i],b[i]))return false;return true;}
if(arrA!=arrB)return false;var dateA=a instanceof Date,dateB=b instanceof Date;if(dateA!=dateB)return false;if(dateA&&dateB)return a.getTime()==b.getTime();var regexpA=a instanceof RegExp,regexpB=b instanceof RegExp;if(regexpA!=regexpB)return false;if(regexpA&&regexpB)return a.toString()==b.toString();var keys=keyList(a);length=keys.length;if(length!==keyList(b).length)
return false;for(i=length;i--!==0;)
if(!hasProp.call(b,keys[i]))return false;for(i=length;i--!==0;){key=keys[i];if(!equal(a[key],b[key]))return false;}
return true;}
return a!==a&&b!==b;};}),(function(module,exports,__webpack_require__){"use strict";var resolve=__webpack_require__(246);module.exports={Validation:errorSubclass(ValidationError),MissingRef:errorSubclass(MissingRefError)};function ValidationError(errors){this.message='validation failed';this.errors=errors;this.ajv=this.validation=true;}
MissingRefError.message=function(baseId,ref){return 'can\'t resolve reference '+ref+' from id '+baseId;};function MissingRefError(baseId,ref,message){this.message=message||MissingRefError.message(baseId,ref);this.missingRef=resolve.url(baseId,ref);this.missingSchema=resolve.normalizeId(resolve.fullPath(this.missingRef));}
function errorSubclass(Subclass){Subclass.prototype=Object.create(Error.prototype);Subclass.prototype.constructor=Subclass;return Subclass;}}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_global_Blockchain_Genesis__=__webpack_require__(16);var __WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__=__webpack_require__(3);class InterfaceBlockchainBlockCreator{constructor(blockchain,db,blockClass,blockDataClass){this.blockClass=blockClass;this.blockDataClass=blockDataClass;this.blockchain=blockchain;this.db=db;}
_createBlockGenesis(blockValidation,minerAddress,args){args.unshift(this.blockchain,minerAddress,undefined,undefined,undefined);let data=new this.blockDataClass(...args);return new this.blockClass(this.blockchain,blockValidation,1,undefined,__WEBPACK_IMPORTED_MODULE_0_common_blockchain_global_Blockchain_Genesis__["a"].hashPrev,undefined,0,data,0,this.db);}
async _createBlockNew(height,blockValidation,minerAddress,transactions,args){args.unshift(this.blockchain,minerAddress,transactions,undefined,undefined);let data=new this.blockDataClass(...args);return new this.blockClass(this.blockchain,blockValidation,1,undefined,await blockValidation.getHashCallback(height-1),await blockValidation.getDifficultyCallback(height-1),await blockValidation.getChainHashCallback(height-1),undefined,0,data,height,this.db);}
async createBlockNew(minerAddress,blockValidation,transactions){if(!blockValidation)
blockValidation=this.blockchain.createBlockValidation();try{if(!Buffer.isBuffer(minerAddress))
minerAddress=__WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__["a"].fromBase(minerAddress);}catch(exception){console.log("error creating a new block invalid minerAddress",minerAddress,exception);}
let restArgs=[];for(let i=2;i<arguments.length;i++)
restArgs.push(arguments[i]);if(this.blockchain.blocks.length===0){return this._createBlockGenesis(blockValidation,minerAddress,restArgs);}else{return this._createBlockNew(this.blockchain.blocks.length,blockValidation,minerAddress,transactions,restArgs);}}
async createEmptyBlock(height,blockValidation){return new this.blockClass(this.blockchain,blockValidation,1,undefined,undefined,undefined,undefined,undefined,0,null,height,this.db);}
createEmptyBlockData(){return new this.blockDataClass(this.blockchain);}}
__webpack_exports__["a"]=(InterfaceBlockchainBlockCreator);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_transactions_transaction_Interface_Blockchain_Transaction__=__webpack_require__(400);var __WEBPACK_IMPORTED_MODULE_1_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_2__Mini_Blockchain_Transaction_From__=__webpack_require__(931);var __WEBPACK_IMPORTED_MODULE_3__Mini_Blockchain_Transaction_To__=__webpack_require__(932);var __WEBPACK_IMPORTED_MODULE_4_common_utils_coins_WebDollar_Coins__=__webpack_require__(32);var __WEBPACK_IMPORTED_MODULE_5_common_utils_BufferExtended__=__webpack_require__(3);class MiniBlockchainTransaction extends __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_transactions_transaction_Interface_Blockchain_Transaction__["a"]{_createTransactionFrom(from){return new __WEBPACK_IMPORTED_MODULE_2__Mini_Blockchain_Transaction_From__["a"](this,from);}
_createTransactionTo(to){return new __WEBPACK_IMPORTED_MODULE_3__Mini_Blockchain_Transaction_To__["a"](this,to);}
_preProcessTransaction(multiplicationFactor=1,revertActions,showUpdate){this.blockchain.accountantTree.updateAccountNonce(this.from.addresses[0].unencodedAddress,multiplicationFactor,revertActions,showUpdate);return true;}
_validateNonce(blockValidationType){let nonce=this.blockchain.accountantTree.getAccountNonce(this.from.addresses[0].unencodedAddress);if(nonce<this.nonce)
if(blockValidationType!==undefined&&blockValidationType['take-transactions-list-in-consideration']!==undefined&&blockValidationType['take-transactions-list-in-consideration'].validation){let foundNonce={};let transactionsList=blockValidationType['take-transactions-list-in-consideration'].transactions;if(transactionsList===undefined)
transactionsList=this.blockchain.transactions.pendingQueue.listArray;transactionsList.forEach((transaction)=>{if(transaction.from.addresses[0].unencodedAddress.equals(this.from.addresses[0].unencodedAddress))
foundNonce[transaction.nonce]=true;});for(let i=nonce;i<this.nonce;i++)
if(!foundNonce[i])
throw{message:"Nonce is not right 2",myNonce:this.nonce,nonce:nonce,txId:this.txId.toString("hex")};return true;}
if(nonce!==this.nonce)
throw{message:"Nonce is not right",myNonce:this.nonce,nonce:nonce,txId:this.txId.toString("hex")};return true;}
_computeNonce(){let nonce=this.blockchain.accountantTree.getAccountNonce(this.from.addresses[0].unencodedAddress);try{this.blockchain.transactions.pendingQueue.listArray.forEach((pendingTransaction)=>{if(__WEBPACK_IMPORTED_MODULE_5_common_utils_BufferExtended__["a"].safeCompare(pendingTransaction.from.addresses[0].unencodedAddress,this.from.addresses[0].unencodedAddress)&&pendingTransaction.nonce>=nonce){if(pendingTransaction.nonce-nonce<=1)
nonce++;}});}catch(exception){console.error("Error processing how many transactions we already have to increment the current nonce",exception);}
return nonce;}
_processTransactionFees(multiplicationFactor=1,minerAddress=undefined,revertActions,showUpdate){let inputSum=this.from.calculateInputSum();let outputSum=this.to.calculateOutputSum();let diffInFees=inputSum-outputSum;if(!__WEBPACK_IMPORTED_MODULE_4_common_utils_coins_WebDollar_Coins__["a"].validateCoinsNumber(diffInFees))
throw{message:"diffInFees is not number",address:minerAddress};if(diffInFees<0)
throw{message:"Accountant Tree is negative"};this.blockchain.accountantTree.updateAccount(minerAddress,diffInFees*multiplicationFactor,this.from.currencyTokenId,revertActions,showUpdate);return{fees:diffInFees,currencyTokenId:this.currencyTokenId};}}
__webpack_exports__["a"]=(MiniBlockchainTransaction);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_utils_coins_WebDollar_Coins__=__webpack_require__(32);var __WEBPACK_IMPORTED_MODULE_1__mini_blockchain_transactions_trasanction_Mini_Blockchain_Transaction__=__webpack_require__(250);var __WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_3_consts_const_global__=__webpack_require__(2);class InterfaceBlockchainTransactionsWizard{constructor(transactions,blockchain,wallet,){this.blockchain=blockchain;this.transactions=transactions;this.wallet=wallet;}
async deserializeValidateTransaction(transaction){let myTransaction=new __WEBPACK_IMPORTED_MODULE_1__mini_blockchain_transactions_trasanction_Mini_Blockchain_Transaction__["a"](this.blockchain,undefined,undefined,0,undefined,undefined,undefined,false,false,false,false,false,false);await myTransaction.deserializeTransaction(transaction.data,0,true);return myTransaction;}
async createTransactionSimple(address,toAddress,toAmount,fee,currencyTokenId,password=undefined,timeLock){let process=await this.validateTransaction(address,toAddress,toAmount,fee,currencyTokenId,password,timeLock,undefined);if(process.result)
return await this.propagateTransaction(process.signature,process.transaction);else
return process;}
async validateTransaction(address,toAddress,toAmount,fee,currencyTokenId,password=undefined,timeLock,nonce,skipValidationNonce=false){try{if(typeof toAmount==='string')
toAmount=parseInt(toAmount);}catch(exception){if(typeof exception==="object"&&exception.message!==undefined)
exception=exception.message;return{result:false,message:"Amount is not a valid number",reason:exception}}
try{if(typeof fee==='string')
fee=parseInt(fee);}catch(exception){if(typeof exception==="object"&&exception.message!==undefined)
exception=exception.message;return{result:false,message:"Fee is not a valid number",reason:exception}}
try{address=this.wallet.getAddress(address);}catch(exception){console.error("Creating a new transaction raised an exception - Getting Address",exception);if(typeof exception==="object"&&exception.message!==undefined)
exception=exception.message;return{result:false,message:"Get Address failed",reason:exception}}
let transaction=undefined;try{let to;let toAmountTotal;if(toAddress!==undefined&&typeof toAmount==="number"){toAmountTotal=toAmount;to={addresses:[{unencodedAddress:toAddress,amount:toAmount},]};}else if(Array.isArray(toAddress)){toAmountTotal=0;for(let i=0;i<toAddress.length;i++)
toAmountTotal+=toAddress[i].amount;to={addresses:toAddress};}
let from={addresses:[{unencodedAddress:address,publicKey:undefined,amount:toAmountTotal+(fee||0)}],currencyTokenId:currencyTokenId};transaction=await this.transactions._createTransaction(from,to,nonce,timeLock,undefined,undefined,false,false,true,true,true,false,);}catch(exception){console.error("Creating a new transaction raised an exception - Failed Creating a transaction",exception);if(typeof exception==="object"&&exception.message!==undefined)exception=exception.message;return{result:false,message:"Failed Creating a transaction",reason:exception}}
if(fee===undefined){fee=this.calculateFeeWizzard(transaction.serializeTransaction(true));transaction.from.addresses[0].amount+=fee;transaction.serializeTransaction(true);}
let signature;try{signature=await address.signTransaction(transaction,password);}catch(exception){console.error("Creating a new transaction raised an exception - Failed Signing the Transaction",exception);if(typeof exception==="object"&&exception.message)exception=exception.message;return{result:false,message:"Wrong password",reason:exception}}
try{if(!skipValidationNonce){let blockValidationType={"take-transactions-list-in-consideration":{validation:true}};if(!transaction.validateTransactionOnce(this.blockchain.blocks.length-1,blockValidationType))
throw{message:"Transaction is invalid"};}}catch(exception){console.error("Creating a new transaction raised an exception - Failed Validating Transaction",exception);if(typeof exception==="object"&&exception.message!==undefined)exception=exception.message;return{result:false,message:"Failed Signing the transaction",reason:exception}}
return{result:true,transaction:transaction,signature:signature};}
async propagateTransaction(signature,transaction){try{await this.transactions.pendingQueue.includePendingTransaction(transaction);}catch(exception){console.error("Creating a new transaction raised an exception - Including Pending Transaction",exception);if(typeof exception==="object"&&exception.message!==undefined)exception=exception.message;return{result:false,message:"Including Pending Transaction",reason:exception}}
return{result:true,message:"Your transaction is pending...",signature:signature,transaction:transaction,}}
calculateFeeWizzard(serialization,webdPerByte){if(webdPerByte===undefined)
webdPerByte=__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].MINING_POOL.MINING.FEE_PER_BYTE;return serialization.length*webdPerByte;}
calculateFeeSimple(){return this.calculateFeeWizzard(new Buffer(141));}}
__webpack_exports__["a"]=(InterfaceBlockchainTransactionsWizard);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_1_common_crypto_WebDollar_Crypto__=__webpack_require__(28);var __WEBPACK_IMPORTED_MODULE_2_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_3_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_4_common_blockchain_global_Blockchain_Genesis__=__webpack_require__(16);var __WEBPACK_IMPORTED_MODULE_5__addresses_Interface_Blockchain_Address_Helper__=__webpack_require__(17);var __WEBPACK_IMPORTED_MODULE_6__Interface_Blockchain_Block_Data_Transactions__=__webpack_require__(934);class InterfaceBlockchainBlockData{constructor(blockchain,minerAddress,transactions,hashTransactions,hashData){this.blockchain=blockchain;this._minerAddress=undefined;if(!minerAddress)minerAddress=__WEBPACK_IMPORTED_MODULE_4_common_blockchain_global_Blockchain_Genesis__["a"].address;this.minerAddress=minerAddress;this.transactions=new __WEBPACK_IMPORTED_MODULE_6__Interface_Blockchain_Block_Data_Transactions__["a"](this,transactions,hashTransactions,blockchain.db);this.hashData=hashData;if(!hashData)this.computeHashBlockData();}
async validateBlockData(blockHeight,blockValidation){if(!Buffer.isBuffer(this.minerAddress)||this.minerAddress.length!==__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH)
throw{message:'data.minerAddress is empty'};if(!this.hashData||!Buffer.isBuffer(this.hashData))
throw{message:'hashData is empty'};if(!blockValidation.blockValidationType["skip-block-data-validation"]){let hashData=this.calculateHashBlockData();if(!__WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].safeCompare(hashData,this.hashData))
throw{message:"block.data hashData is not right"};}
if(!blockValidation.blockValidationType["skip-block-data-transactions-validation"]){if(await this.transactions.validateTransactions(blockHeight,blockValidation.blockValidationType)===false)
throw{message:"transactions failed to validate"};}
return true;}
computeHashBlockData(){this.hashData=this.calculateHashBlockData();}
calculateHashBlockData(){return __WEBPACK_IMPORTED_MODULE_1_common_crypto_WebDollar_Crypto__["a"].SHA256(__WEBPACK_IMPORTED_MODULE_1_common_crypto_WebDollar_Crypto__["a"].SHA256(this._computeBlockDataHeaderPrefix(true)));}
_computeBlockDataHeaderPrefix(onlyHeader=false){if(!this.transactions.hashTransactions)
this.transactions.hashTransactions=this.transactions.calculateHashTransactions();return Buffer.concat([__WEBPACK_IMPORTED_MODULE_3_common_utils_Serialization__["a"].serializeToFixedBuffer(__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH,this.minerAddress),this.transactions.serializeTransactions(onlyHeader),]);}
serializeData(onlyHeader=false){if(!Buffer.isBuffer(this.hashData)||this.hashData.length!==32)
this.computeHashBlockData();return Buffer.concat([__WEBPACK_IMPORTED_MODULE_3_common_utils_Serialization__["a"].serializeToFixedBuffer(32,this.hashData),this._computeBlockDataHeaderPrefix(onlyHeader),])}
deserializeData(buffer,offset,onlyHeader=false){this.hashData=__WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].substr(buffer,offset,32);offset+=32;this.minerAddress=__WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].substr(buffer,offset,__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH);offset+=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH;offset=this.transactions.deserializeTransactions(buffer,offset,onlyHeader);return offset;}
toString(){return this.minerAddress.toString("hex")+this.hashData.toString("hex")}
toJSON(){return{minerAddress:Buffer.isBuffer(this.minerAddress)?this.minerAddress.toString("hex"):'',hashData:Buffer.isBuffer(this.hashData)?this.hashData.toString("hex"):'',};}
equals(data){return __WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].safeCompare(this.hashData,data.hashData);}
get minerAddress(){return this._minerAddress;}
set minerAddress(minerAddress){this._setMinerAddress(minerAddress);}
_setMinerAddress(minerAddressWIF){if(!Buffer.isBuffer(minerAddressWIF))
minerAddressWIF=__WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].fromBase(minerAddressWIF);let result=__WEBPACK_IMPORTED_MODULE_5__addresses_Interface_Blockchain_Address_Helper__["a"].getUnencodedAddressFromWIF(minerAddressWIF);if(!result)
throw{message:"Miner address is not a valid WIF",address:minerAddressWIF};this._minerAddress=result;}}
__webpack_exports__["a"]=(InterfaceBlockchainBlockData);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_2__prover_proofs_PPoW_Blockchain_Proof_Pi__=__webpack_require__(175);const BigInteger=__webpack_require__(36);const BigNumber=__webpack_require__(84);class PPoWHelper{LCA(proofs1,proofs2){let i1=proofs1.blocks.length-1;let i2=proofs2.blocks.length-1;while(i1>=0&&i2>=0){const block1=proofs1.blocks[i1];const block2=proofs2.blocks[i2];if(block1.hash.equals(block2.hash))
return block1;else if(block1.height>block2.height)
i1--;else
i2--;}
return null;}
_localGood(superLength,underlyingLength,miu){if(new BigNumber(superLength).isGreaterThan((new BigNumber(1).minus(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].POPOW_PARAMS.d)).multipliedBy(new BigNumber(2).pow(-miu)).multipliedBy(underlyingLength)))
return true;else
return false;}
_superchainQuality(underlyingChain,superChain,miu){if(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].POPOW_PARAMS.m<1)
throw{message:'superchainQuality is not good'};if(superChain.blocks.length<=__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].POPOW_PARAMS.m)
return false;let upperChain=underlyingChain.blocksGreaterLevel(miu);let downChain=upperChain.downSuperChainGetUnderlyingChain(underlyingChain,);let mP=__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].POPOW_PARAMS.m;while(mP>=__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].POPOW_PARAMS.m&&mP<underlyingChain.blocks.length){if(!this._localGood(Math.min(upperChain.blocks.length,mP),Math.min(downChain.blocks.length,mP),miu))
return false;mP++;}
return true;}
_multilevelQuality(underlyingChain,superChain,miu){for(let miu1=miu;miu1>=1;miu1--){let CStar=superChain.downSuperChainGetUnderlyingChain(underlyingChain);CStar=CStar.blocksGreaterLevel(miu1-1);if(CStar===null)continue;let upperChain=CStar.blocksGreaterLevel(miu1);if(upperChain.blocks.length>=__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].POPOW_PARAMS.k1)
if(!(CStar.blocksGreaterLevel(miu).blocks.length>=(1-__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].POPOW_PARAMS.d)*new BigInteger(2).pow(miu-miu1)*upperChain.blocks.length))
return false;}
return true;}
good(underlyingChain,superChain,miu){if(this._superchainQuality(underlyingChain,superChain,miu)===false)
return false;return true;}}
__webpack_exports__["a"]=(new PPoWHelper());}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0__Interface_Tree_Node__=__webpack_require__(143);class InterfaceTreeEdge{constructor(targetNode){if(targetNode===null)
throw{message:"Target Node is null"};if(targetNode instanceof __WEBPACK_IMPORTED_MODULE_0__Interface_Tree_Node__["a"]===false)
throw{message:"Target Node is not a Node"};this.targetNode=targetNode;}
destroyEdge(){if(this.targetNode!==undefined&&this.targetNode!==null)
this.targetNode.destroyNode();this.targetNode=undefined;}
serializeEdge(){return Buffer.concat(this.targetNode.serializeNode());}
deserializeEdge(buffer,offset,createNewNode){let node=createNewNode();offset=node.deserializeNode(buffer,offset,true);return offset;}}
__webpack_exports__["a"]=(InterfaceTreeEdge);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__Interface_Blockchain_Agent__=__webpack_require__(256);var __WEBPACK_IMPORTED_MODULE_1_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_2__Interface_Blockchain_Agent_Miner_Pool__=__webpack_require__(432);class InterfaceBlockchainAgentFullNode extends __WEBPACK_IMPORTED_MODULE_2__Interface_Blockchain_Agent_Miner_Pool__["a"]{constructor(blockchain){super(blockchain);}
_initializeProtocol(){this.protocol.initialize(["acceptBlockHeaders","acceptBlocks"]);}}
__webpack_exports__["a"]=(InterfaceBlockchainAgentFullNode);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_1__protocol_Interface_Blockchain_Protocol__=__webpack_require__(177);var __WEBPACK_IMPORTED_MODULE_2_common_blockchain_interface_blockchain_blockchain_forks_Interface_Blockchain_Fork__=__webpack_require__(142);var __WEBPACK_IMPORTED_MODULE_3_common_utils_helpers_Version_Checker_Helper__=__webpack_require__(178);var __WEBPACK_IMPORTED_MODULE_4_node_lists_types_Connection_Type__=__webpack_require__(47);var __WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_6__Agent_Status__=__webpack_require__(108);var __WEBPACK_IMPORTED_MODULE_7_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_8__Interface_Blockchain_Agent_Basic__=__webpack_require__(984);var __WEBPACK_IMPORTED_MODULE_9_node_lists_types_Node_Type__=__webpack_require__(35);var __WEBPACK_IMPORTED_MODULE_10_node_lists_waitlist_Nodes_Waitlist_Connecting__=__webpack_require__(258);var __WEBPACK_IMPORTED_MODULE_11_common_utils_logging_Log__=__webpack_require__(18);let NodeExpress;if(false){NodeExpress=require('node/sockets/node-server/express/Node-Express').default;}
class InterfaceBlockchainAgent extends __WEBPACK_IMPORTED_MODULE_8__Interface_Blockchain_Agent_Basic__["a"]{constructor(blockchain){super(blockchain);if(__WEBPACK_IMPORTED_MODULE_3_common_utils_helpers_Version_Checker_Helper__["a"].detectMobileAndTablet())
this.AGENT_TIME_OUT=140*1000;else
this.AGENT_TIME_OUT=120*1000;this.AGENT_TIME_INTERVAL=500;this._startAgentTimeOut=undefined;this._startAgentInterval=undefined;this._newProtocol();}
newFork(){let fork=new __WEBPACK_IMPORTED_MODULE_2_common_blockchain_interface_blockchain_blockchain_forks_Interface_Blockchain_Fork__["a"]();__WEBPACK_IMPORTED_MODULE_2_common_blockchain_interface_blockchain_blockchain_forks_Interface_Blockchain_Fork__["a"].prototype.initializeConstructor.apply(fork,arguments);return fork;}
_newProtocol(){this.protocol=new __WEBPACK_IMPORTED_MODULE_1__protocol_Interface_Blockchain_Protocol__["a"](this.blockchain,this);}
_initializeProtocol(){this.protocol.initialize(["acceptBlockHeaders"]);}
initializeAgentPromise(){clearTimeout(this._startAgentTimeOut);this._startAgentTimeOut=undefined;clearInterval(this._startAgentInterval);this._startAgentInterval=undefined;this._setStartAgentInterval();this._setStartAgentTimeOut();}
initializeStartAgentOnce(){this._initializeProtocol();__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].emitter.on("nodes-list/connected",async(result)=>{});}
_determineSynchronizedSlaves(){return!this.light&&!NodeExpress.SSL&&!NodeExpress.amIFallback()&&__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].countNodesByType(__WEBPACK_IMPORTED_MODULE_9_node_lists_types_Node_Type__["a"].NODE_TERMINAL)>__WEBPACK_IMPORTED_MODULE_7_consts_const_global__["a"].SETTINGS.PARAMS.CONNECTIONS.TERMINAL.SERVER.TERMINAL_CONNECTIONS_REQUIRED_TO_DISCONNECT_FROM_FALLBACK;}
async startAgent(firsTime,synchronizeComplete=false){console.warn("startAgent was started");this.status=__WEBPACK_IMPORTED_MODULE_6__Agent_Status__["a"].AGENT_STATUS_NOT_SYNCHRONIZED;this.initializeAgentPromise();return await this.waitSynchronizationStatus();}
_agentConfirmationIntervalFunction(){if(this.blockchain.blocks.length<=0)return false;if(__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].countNodesByConnectionType(__WEBPACK_IMPORTED_MODULE_4_node_lists_types_Connection_Type__["a"].CONNECTION_CLIENT_SOCKET)<=0)return false;if(this.light){if(this.blockchain.proofPi!==undefined&&this.blockchain.proofPi.blocks.length>0&&this.blockchain.proofPi.blocks[this.blockchain.proofPi.blocks.length-1]!==undefined&&this.blockchain.blocks.length>=this.blockchain.proofPi.blocks[this.blockchain.proofPi.blocks.length-1].height+__WEBPACK_IMPORTED_MODULE_7_consts_const_global__["a"].POPOW_PARAMS.k)
this.status=__WEBPACK_IMPORTED_MODULE_6__Agent_Status__["a"].AGENT_STATUS_SYNCHRONIZED;}
else{let set=true;if(this.lastTimeChecked!==undefined){let diffBlocks=this.blockchain.blocks.length-this.lastTimeChecked.blocks;let shouldItStart=false;if(__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].nodes.length>0&&diffBlocks>=0&&diffBlocks<__WEBPACK_IMPORTED_MODULE_7_consts_const_global__["a"].SETTINGS.PARAMS.CONNECTIONS.FORKS.MAXIMUM_BLOCKS_TO_DOWNLOAD&&__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].nodes.length>=__WEBPACK_IMPORTED_MODULE_10_node_lists_waitlist_Nodes_Waitlist_Connecting__["a"].connectingMaximum.minimum_fallbacks+__WEBPACK_IMPORTED_MODULE_10_node_lists_waitlist_Nodes_Waitlist_Connecting__["a"].connectingMaximum.minimum_waitlist){shouldItStart=true;}
let difference=Math.max(0,Math.floor((1*60*1000-(new Date().getTime()-this.lastTimeChecked.date))/1000));if(Math.random()<0.1){__WEBPACK_IMPORTED_MODULE_11_common_utils_logging_Log__["a"].warn("",__WEBPACK_IMPORTED_MODULE_11_common_utils_logging_Log__["a"].LOG_TYPE.BLOCKCHAIN);__WEBPACK_IMPORTED_MODULE_11_common_utils_logging_Log__["a"].warn(shouldItStart?("Synchronization probably starts in: "+difference+' seconds '):'Synchronizing',__WEBPACK_IMPORTED_MODULE_11_common_utils_logging_Log__["a"].LOG_TYPE.BLOCKCHAIN);__WEBPACK_IMPORTED_MODULE_11_common_utils_logging_Log__["a"].warn("",__WEBPACK_IMPORTED_MODULE_11_common_utils_logging_Log__["a"].LOG_TYPE.BLOCKCHAIN);}
if(difference<=0){if(shouldItStart)
this.status=__WEBPACK_IMPORTED_MODULE_6__Agent_Status__["a"].AGENT_STATUS_SYNCHRONIZED;}else set=false;}
if(set)
this.lastTimeChecked={date:new Date().getTime(),blocks:this.blockchain.blocks.length,};if(__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].nodes.length>0)
this.status=__WEBPACK_IMPORTED_MODULE_6__Agent_Status__["a"].AGENT_STATUS_SYNCHRONIZED;}}
_setStartAgentInterval(){if(this._startAgentInterval!==undefined)return;this._startAgentInterval=setInterval(this._agentConfirmationIntervalFunction.bind(this),this.AGENT_TIME_INTERVAL);}
_setStartAgentTimeOut(factor=1){if(this._startAgentTimeOut!==undefined)return;this._startAgentTimeOut=setTimeout(()=>{this._startAgentTimeOut=undefined;this.status=__WEBPACK_IMPORTED_MODULE_6__Agent_Status__["a"].AGENT_STATUS_NOT_SYNCHRONIZED;},this.AGENT_TIME_OUT);}
waitSynchronizationStatus(){return new Promise((resolve)=>{this._eventEmitter.once('agent/synchronized',(answer)=>{resolve(answer);});});}
set status(newValue){if(this._status===newValue)
return;this._status=newValue;if([__WEBPACK_IMPORTED_MODULE_6__Agent_Status__["a"].AGENT_STATUS_SYNCHRONIZED,__WEBPACK_IMPORTED_MODULE_6__Agent_Status__["a"].AGENT_STATUS_NOT_SYNCHRONIZED,__WEBPACK_IMPORTED_MODULE_6__Agent_Status__["a"].AGENT_STATUS_SYNCHRONIZED_SLAVES,__WEBPACK_IMPORTED_MODULE_6__Agent_Status__["a"].AGENT_STATUS_SYNCHRONIZED_POOL].indexOf(newValue)>=0){clearTimeout(this._startAgentTimeOut);this._startAgentTimeOut=undefined;clearInterval(this._startAgentInterval);this._startAgentInterval=undefined;}
if([__WEBPACK_IMPORTED_MODULE_6__Agent_Status__["a"].AGENT_STATUS_SYNCHRONIZED,__WEBPACK_IMPORTED_MODULE_6__Agent_Status__["a"].AGENT_STATUS_SYNCHRONIZED_SLAVES,__WEBPACK_IMPORTED_MODULE_6__Agent_Status__["a"].AGENT_STATUS_SYNCHRONIZED_POOL].indexOf(newValue)>=0)
this._eventEmitter.emit('agent/synchronized',{result:true,message:"Start Agent worked successfully",});else if(__WEBPACK_IMPORTED_MODULE_6__Agent_Status__["a"].AGENT_STATUS_NOT_SYNCHRONIZED===newValue)
this._eventEmitter.emit('agent/synchronized',{result:false,message:"Start Agent Timeout",});}
get status(){return this._status;}}
__webpack_exports__["a"]=(InterfaceBlockchainAgent);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0__blockchain_forks_Interface_Blockchain_Fork__=__webpack_require__(142);var __WEBPACK_IMPORTED_MODULE_1_common_blockchain_global_Blockchain_Mining_Reward__=__webpack_require__(56);var __WEBPACK_IMPORTED_MODULE_2_consts_global__=__webpack_require__(45);var __WEBPACK_IMPORTED_MODULE_3_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__=__webpack_require__(12);var __WEBPACK_IMPORTED_MODULE_5_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_6_common_utils_bans_BansList__=__webpack_require__(120);class InterfaceBlockchainProtocolForkSolver{constructor(blockchain,protocol){this.blockchain=blockchain;this.protocol=protocol;this.curentIterationsDownloaded=0;}
async _discoverForkBinarySearch(socket,initialLeft,left,right){let answer;try{let mid=Math.trunc((left+right)/2);answer=await socket.node.sendRequestWaitOnce("head/chainHash",mid,mid,__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].SETTINGS.PARAMS.CONNECTIONS.TIMEOUT.WAIT_ASYNC_DISCOVERY_TIMEOUT);console.log("_discoverForkBinarySearch",initialLeft,"left",left,"right ",right,(answer&&answer.hash)?answer.hash.toString("hex"):'no remote hash',"my chain hash",(await this.blockchain.getChainHash(mid)).toString("hex"));if(left<0||!answer||!Buffer.isBuffer(answer.hash))
return{position:null,header:answer};if(left>=right){if(answer.hash.equals(await this.blockchain.getChainHash(mid)))
return{position:mid,header:answer.hash};else{if(mid-1>=0&&initialLeft<=mid-1&&initialLeft<left){answer=await socket.node.sendRequestWaitOnce("head/chainHash",mid-1,mid-1,__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].SETTINGS.PARAMS.CONNECTIONS.TIMEOUT.WAIT_ASYNC_DISCOVERY_TIMEOUT);if(!answer||!Buffer.isBuffer(answer.hash))
return{position:null,header:answer};if(answer.hash.equals(await this.blockchain.getChainHash(mid-1)))
return{position:mid-1,header:answer.hash};}
return{position:-1,header:answer.hash}}}
if(!answer.hash.equals(await this.blockchain.getChainHash(mid)))
return await this._discoverForkBinarySearch(socket,initialLeft,left,mid);else
return await this._discoverForkBinarySearch(socket,initialLeft,mid+1,right);}catch(exception){console.error("_discoverForkBinarySearch raised an exception",exception,answer);return{position:null,header:null};}}
async _calculateForkBinarySearch(socket,forkChainStartingPoint,forkChainLength,currentBlockchainLength){if(forkChainStartingPoint>currentBlockchainLength-1||currentBlockchainLength===0)
return{position:-1,header:null};else{let binarySearchResult=await this._discoverForkBinarySearch(socket,forkChainStartingPoint,forkChainStartingPoint,currentBlockchainLength-1);if(binarySearchResult.position!==-1&&binarySearchResult.position+1<forkChainLength)
binarySearchResult.position++;return binarySearchResult;}}
async discoverFork(socket,forkChainLength,forkChainStartingPoint,forkLastChainHash,forkProof,forkChainWork){let binarySearchResult={position:-1,header:null};let currentBlockchainLength=this.blockchain.blocks.length;let fork,forkFound;try{let answer=this.blockchain.forksAdministrator.findFork(socket,forkLastChainHash,forkProof);if(answer)return answer;let forkChainHash={};forkChainHash[forkLastChainHash.toString("hex")]=true;fork=await this.blockchain.forksAdministrator.createNewFork(socket,undefined,undefined,undefined,undefined,forkChainHash,false);const count=6;if(currentBlockchainLength>=count&&(forkChainLength>=currentBlockchainLength||(this.blockchain.agent.light&&forkProof))){let errors=0;for(let i=currentBlockchainLength-1;i>=currentBlockchainLength-1-count&&errors<3;i--){if(i===forkChainLength-1&&forkLastChainHash){answer={hash:forkLastChainHash};}else{answer=await socket.node.sendRequestWaitOnce("head/chainHash",i,i,__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].SETTINGS.PARAMS.CONNECTIONS.TIMEOUT.WAIT_ASYNC_DISCOVERY_TIMEOUT);if(!answer||!answer.hash){errors++;continue;}}
forkFound=this.blockchain.forksAdministrator.findForkyByChainHash(answer.hash);if(forkFound&&forkFound!==fork){if(Math.random()<0.01)console.error("discoverAndProcessFork - fork already found by n-2");for(let key in fork.forkChainHashes)
forkFound.forkChainHashes[key]=true;forkFound.pushSocket(socket,forkProof);this.blockchain.forksAdministrator.deleteFork(fork);return{result:true,fork:forkFound};}
fork.forkChainHashes[answer.hash.toString("hex")]=true;let chainHash=await this.blockchain.getChainHash(i);if(chainHash.equals(answer.hash)){binarySearchResult={position:(i===currentBlockchainLength-1)?currentBlockchainLength:i+1,header:answer.hash,};break;}}}
if(binarySearchResult.position===-1){if(this.blockchain.agent.light){if(forkChainLength-forkChainStartingPoint>__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].BLOCKCHAIN.LIGHT.VALIDATE_LAST_BLOCKS){console.warn("LIGHT CHANGES from ",forkChainStartingPoint," to ",forkChainLength-__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].BLOCKCHAIN.LIGHT.VALIDATE_LAST_BLOCKS-1);forkChainStartingPoint=forkChainLength-__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].BLOCKCHAIN.LIGHT.VALIDATE_LAST_BLOCKS-1;}}
console.warn("discoverFork 6666"+forkChainStartingPoint);binarySearchResult=await this._calculateForkBinarySearch(socket,forkChainStartingPoint,forkChainLength,currentBlockchainLength);if(binarySearchResult.position===null)
throw{message:"connection dropped discoverForkBinarySearch"};forkFound=this.blockchain.forksAdministrator.findForkyByChainHash(binarySearchResult.header);if(forkFound&&forkFound!==fork){if(Math.random()<0.01)console.error("discoverAndProcessFork - fork already found by hash after binary search");forkFound.forkChainHashes[forkLastChainHash.toString("hex")]=true;forkFound.pushSocket(socket,forkProof);this.blockchain.forksAdministrator.deleteFork(fork);return{result:true,fork:forkFound};}
if(binarySearchResult.header)
fork.forkChainHashes[binarySearchResult.header.toString("hex")]=true;}
await this.optionalProcess(socket,binarySearchResult,currentBlockchainLength,forkChainLength,forkChainStartingPoint);console.log("fork position",binarySearchResult.position,"forkChainStartingPoint",forkChainStartingPoint,"forkChainLength",forkChainLength);if(binarySearchResult.position===-1||(binarySearchResult.position>0&&binarySearchResult.header)){if(binarySearchResult.position===-1)
binarySearchResult.position=0;if(!this.blockchain.agent.light&&forkChainLength>=this.blockchain.blocks.length+__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].SETTINGS.PARAMS.CONNECTIONS.FORKS.MAXIMUM_BLOCKS_TO_DOWNLOAD){fork.downloadAllBlocks=true;forkChainLength=Math.min(forkChainLength,this.blockchain.blocks.length+__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].SETTINGS.PARAMS.CONNECTIONS.FORKS.MAXIMUM_BLOCKS_TO_DOWNLOAD);}
if((forkChainLength-binarySearchResult.position)>=__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].SETTINGS.PARAMS.CONNECTIONS.FORKS.MAXIMUM_BLOCKS_TO_DOWNLOAD_TO_USE_SLEEP)
fork.downloadBlocksSleep=true;fork.forkStartingHeight=binarySearchResult.position;fork.forkChainStartingPoint=forkChainStartingPoint;fork.forkChainLength=forkChainLength;fork.forkChainWork=forkChainWork;if(fork.forkStartingHeight>fork.forkChainLength-1)
throw{message:"FORK is empty"};await fork.validateForkImmutability();console.info("initialize fork");await fork.initializeFork();if(!fork.forkReady)
throw{message:" FORK IS NOT READY "};}else{console.log("fork is something new");throw{message:"fork is something new",binarySearchResult:binarySearchResult,forkChainStartingPoint:forkChainStartingPoint,forkChainLength:forkChainLength};}
return{result:true,fork:fork};}catch(exception){this.blockchain.forksAdministrator.deleteFork(fork);console.error("discoverAndProcessFork",exception);let bIncludeBan=true;if(this.blockchain.agent.light)
if(["FORK is empty","fork is something new","discoverAndProcessFork - fork already found by socket","same proof, but your blockchain is smaller than mine","Your proof is worse than mine because you have the same block","fork proof was already downloaded"].indexOf(exception.message)>=0)
bIncludeBan=false;if(bIncludeBan){console.warn("BANNNNNNNNNNNNNNNNN",socket.node.sckAddress.toString(),exception.message);__WEBPACK_IMPORTED_MODULE_6_common_utils_bans_BansList__["a"].addBan(socket,180000,exception.message);}
await this.blockchain.sleep(10);return{result:false,error:exception};}}
async optionalProcess(socket,binarySearchResult,currentBlockchainLength,forkChainLength,forkChainStartingPoint){}
async _solveFork(fork){__WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__["a"].emit("agent/status",{message:"Collecting Blockchain",blockHeight:fork.forkStartingHeight});if(!fork)
throw{message:'fork is null'};let nextBlockHeight=fork.forkStartingHeight;if(fork.sockets.length===0||!fork.forkReady)
return false;console.log(" < fork.forkChainLength",fork.forkChainLength,"fork.forkBlocks.length",fork.forkBlocks.length);let blocksAlreadyHave=0;while((fork.forkStartingHeight+fork.forkBlocks.length<fork.forkChainLength)&&!__WEBPACK_IMPORTED_MODULE_2_consts_global__["a"].TERMINATED){__WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__["a"].emit("agent/status",{message:"Synchronizing - Downloading Block",blockHeight:nextBlockHeight,blockHeightMax:fork.forkChainLength});let onlyHeader;if(this.protocol.acceptBlocks)
onlyHeader=false;else
if(this.protocol.acceptBlockHeaders)
onlyHeader=true;let answer;let howManyBlocks=Math.min(fork.forkChainLength-(fork.forkStartingHeight+fork.forkBlocks.length),__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].SETTINGS.PARAMS.CONCURRENCY_BLOCK_DOWNLOAD_MINERS_NUMBER);let downloadingList={},trialsList={};let alreadyDownloaded=0;let resolved=false;let finished=new Promise((resolve)=>{let downloadingBlock=async(index)=>{try{if(trialsList[index]>10||__WEBPACK_IMPORTED_MODULE_2_consts_global__["a"].TERMINATED){if(!resolved){resolved=true;resolve(false);}
return false;}
if(!trialsList[index])trialsList[index]=0;trialsList[index]++;let socketIndex=Math.floor(Math.random()*fork.sockets.length);let socket=fork.getForkSocket(socketIndex);if(!socket){if(!resolved)return downloadingBlock(index);return;}
let waitingTime=socket.latency===0?__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].SETTINGS.PARAMS.MAX_ALLOWED_LATENCY:(socket.latency+Math.random()*2000);answer=socket.node.sendRequestWaitOnce("blockchain/blocks/request-block-by-height",{height:nextBlockHeight+index},nextBlockHeight+index,Math.min(waitingTime,__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].SETTINGS.PARAMS.MAX_ALLOWED_LATENCY));answer.then(result=>{if(!result){socket.latency+=Math.floor(Math.random()*1500);if(!resolved)return downloadingBlock(index);}
else{if(!result.result){if(!resolved)return downloadingBlock(index);}else if(!downloadingList[index]){alreadyDownloaded++;downloadingList[index]=result;if(((alreadyDownloaded===howManyBlocks)||__WEBPACK_IMPORTED_MODULE_2_consts_global__["a"].TERMINATED)&&!resolved){resolved=true;resolve(true);}}}}).catch((exception)=>{if(!resolved)return downloadingBlock(index);});}catch(exception){if(!resolved)return downloadingBlock(index);}};console.info("Downloading Blocks...",howManyBlocks);for(let i=0;i<howManyBlocks;i++)
if(!downloadingList[i])
downloadingBlock(i);});try{await finished;}catch(exception){console.error("Downloading blocks raised an error",exception);resolved=true;finished=false;}
let blockValidation;let block;for(let i=0;i<howManyBlocks;i++){if(!downloadingList[i])
throw{message:"block never received "+nextBlockHeight};if(!downloadingList[i].result||!downloadingList[i].block||!Buffer.isBuffer(downloadingList[i].block)){console.error("Fork Answer received ",downloadingList[i]);throw{message:"Fork Answer is not Buffer"};}
blockValidation=fork._createBlockValidation_ForkValidation(nextBlockHeight,fork.forkBlocks.length-1);block=await this._deserializeForkBlock(fork,downloadingList[i].block,nextBlockHeight,blockValidation);if(fork.downloadBlocksSleep&&nextBlockHeight%10===0)
await this.blockchain.sleep(15);if(this.blockchain.blocks.length>block.height){let hashChain=await this.blockchain.getChainHash(block.height);if(hashChain.equals(block.hashChain)){if(blocksAlreadyHave>10)
throw{message:"You gave me a block which I already have the same block"};blocksAlreadyHave+=1;if(fork.forkStartingHeight===nextBlockHeight){nextBlockHeight++;fork.forkStartingHeight++;}
continue;}}
let result;try{result=await fork.includeForkBlock(block);}catch(Exception){console.error("Error including block "+nextBlockHeight+" in fork ",Exception);throw{message:"fork.includeForkBlock returned an exception",Exception}}
fork.forkChainHashes[block.hash.toString("hex")]=true;if(result){if(nextBlockHeight%10===0)
console.log("Block "+nextBlockHeight+" successfully downloaded!");nextBlockHeight++;}
else
throw{message:"Fork didn't work at height ",nextBlockHeight};if(fork.downloadBlocksSleep&&nextBlockHeight%10===0)await this.blockchain.sleep(15);}}
if(fork.forkStartingHeight+fork.forkBlocks.length>=fork.forkChainLength){if(await fork.saveFork())
return true;else
throw{message:"Save Fork couldn't be saved"};}}
async _deserializeForkBlock(fork,blockData,blockHeight,validationBlock){let block;try{block=await this.blockchain.blockCreator.createEmptyBlock(blockHeight,validationBlock);if(!this.protocol.acceptBlocks&&this.protocol.acceptBlockHeaders)
block.data._onlyHeader=true;block.deserializeBlock(blockData,blockHeight,undefined,await validationBlock.getDifficultyCallback(blockHeight-1));}catch(Exception){console.error("Error deserializing blocks ",Exception,blockData);return false;}
return block;}}
__webpack_exports__["a"]=(InterfaceBlockchainProtocolForkSolver);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__Nodes_Waitlist__=__webpack_require__(39);var __WEBPACK_IMPORTED_MODULE_1_node_sockets_node_clients_socket_Node_Client__=__webpack_require__(985);var __WEBPACK_IMPORTED_MODULE_2_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_3_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_4__types_Connection_Type__=__webpack_require__(47);var __WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_6_common_blockchain_interface_blockchain_agents_Agent_Status__=__webpack_require__(108);var __WEBPACK_IMPORTED_MODULE_7_common_utils_helpers_Version_Checker_Helper__=__webpack_require__(178);var __WEBPACK_IMPORTED_MODULE_8_node_lists_types_Node_Type__=__webpack_require__(35);var __WEBPACK_IMPORTED_MODULE_9__types_Node_Consensus_Type__=__webpack_require__(44);var __WEBPACK_IMPORTED_MODULE_10_common_utils_logging_Log__=__webpack_require__(18);let NodeExpress;if(false){NodeExpress=require('node/sockets/node-server/express/Node-Express').default;}
class NodesWaitlistConnecting{constructor(){this.started=false;this._connectingQueue=[];this._connectedOnlyTo80=false;if(__WEBPACK_IMPORTED_MODULE_7_common_utils_helpers_Version_Checker_Helper__["a"].detectMobile())
this._connectedOnlyTo80=true;this.connectingMaximum={maximum_fallbacks:0,maximum_waitlist:0,minimum_fallbacks:0,minimum_waitlist:0,};this._timeoutCalculateNumberOfConnections=setTimeout(this._calculateNumberOfConnections.bind(this),20000);this._calculateNumberOfConnections();}
startConnecting(){if(this.started)return;this.started=true;this._connectNewNodesWaitlistInterval();}
stopConnecting(){if(this._connectingTimeout!==undefined)
clearTimeout(this._connectingTimeout);}
_connectNewNodesWaitlist(){for(let i=0;i<__WEBPACK_IMPORTED_MODULE_0__Nodes_Waitlist__["a"].waitListFullNodes.length;i++){let pos=Math.floor(Math.random()*__WEBPACK_IMPORTED_MODULE_0__Nodes_Waitlist__["a"].waitListFullNodes.length);if(this._connectedOnlyTo80&&__WEBPACK_IMPORTED_MODULE_0__Nodes_Waitlist__["a"].waitListFullNodes[pos].sckAddresses[0].port!=="80")continue;this._tryToConnectNextNode(__WEBPACK_IMPORTED_MODULE_0__Nodes_Waitlist__["a"].waitListFullNodes[pos]);}}
_connectNewNodesWaitlistInterval(){this._connectNewNodesWaitlist();this._connectingTimeout=setTimeout(this._connectNewNodesWaitlistInterval.bind(this),__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].SETTINGS.PARAMS.WAITLIST.INTERVAL);}
_tryToConnectNextNode(nextWaitListObject){if(__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].MinerPoolManagement&&__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].MinerPoolManagement.minerPoolStarted&&[__WEBPACK_IMPORTED_MODULE_9__types_Node_Consensus_Type__["a"].NODE_CONSENSUS_SERVER].indexOf(nextWaitListObject.nodeConsensusType)<0)return;if(__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].blockchain.agent.consensus){if(nextWaitListObject.isFallback){let fallbacks=this._countConnectingToFallbacks()+__WEBPACK_IMPORTED_MODULE_3_node_lists_Nodes_List__["a"].countFallbacks();if(fallbacks>=this.connectingMaximum.maximum_fallbacks)return true;}else{let simple=(this._connectingQueue.length-this._countConnectingToFallbacks())+(__WEBPACK_IMPORTED_MODULE_3_node_lists_Nodes_List__["a"].countNodesByConnectionType(__WEBPACK_IMPORTED_MODULE_4__types_Connection_Type__["a"].CONNECTION_CLIENT_SOCKET)-__WEBPACK_IMPORTED_MODULE_3_node_lists_Nodes_List__["a"].countFallbacks());if(simple>=this.connectingMaximum.maximum_waitlist)return true;}}
if(__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].Agent.status===__WEBPACK_IMPORTED_MODULE_6_common_blockchain_interface_blockchain_agents_Agent_Status__["a"].AGENT_STATUS_SYNCHRONIZED_SLAVES)
return;if(nextWaitListObject.nodeType===__WEBPACK_IMPORTED_MODULE_8_node_lists_types_Node_Type__["a"].NODE_TERMINAL){if(nextWaitListObject.checkLastTimeChecked(__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].SETTINGS.PARAMS.WAITLIST.TRY_RECONNECT_AGAIN)&&nextWaitListObject.blocked===false&&nextWaitListObject.connecting===false&&nextWaitListObject.checkIsConnected()===null){nextWaitListObject.blocked=true;nextWaitListObject.blockedLastTime=new Date().getTime();this._connectingQueue.push(nextWaitListObject);this._connectNowToNewNode(nextWaitListObject).then((connected)=>{for(let i=this._connectingQueue.length-1;i>=0;i--)
if(this._connectingQueue[i]===nextWaitListObject)
this._connectingQueue.splice(i,1);nextWaitListObject.checked=true;nextWaitListObject.blocked=false;nextWaitListObject.connected=connected;nextWaitListObject.refreshLastTimeChecked();});}}}
async _connectNowToNewNode(nextWaitListObject){nextWaitListObject.connecting=true;let index=Math.floor(Math.random()*nextWaitListObject.sckAddresses.length);let nodeClient=__WEBPACK_IMPORTED_MODULE_3_node_lists_Nodes_List__["a"].searchNodeSocketByAddress(nextWaitListObject.sckAddresses[index],'all',{"id":true,"uuid":true});if(nodeClient)return nodeClient;nodeClient=new __WEBPACK_IMPORTED_MODULE_1_node_sockets_node_clients_socket_Node_Client__["a"]();try{let answer=await nodeClient.connectToWaitlist(nextWaitListObject,index);if(answer)nextWaitListObject.socketConnected(nodeClient.socket);else{nextWaitListObject.socketErrorConnected();await __WEBPACK_IMPORTED_MODULE_3_node_lists_Nodes_List__["a"].disconnectSocket(nodeClient.socket);}
nextWaitListObject.connecting=false;return answer;}
catch(Exception){console.log("Error connecting to new protocol waitlist",Exception)}
nextWaitListObject.connecting=false;return false;}
_countConnectingToFallbacks(){let count=0;for(let i=0;i<this._connectingQueue.length;i++)
if(this._connectingQueue[i].isFallback)
count++;return count;}
_calculateNumberOfConnections(){if(true){this.connectingMaximum.maximum_fallbacks=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].SETTINGS.PARAMS.CONNECTIONS.BROWSER.CLIENT.MAXIMUM_CONNECTIONS_IN_BROWSER_WAITLIST_FALLBACK;this.connectingMaximum.maximum_waitlist=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].SETTINGS.PARAMS.CONNECTIONS.BROWSER.CLIENT.MAXIMUM_CONNECTIONS_IN_BROWSER_WAITLIST;this.connectingMaximum.minimum_fallbacks=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].SETTINGS.PARAMS.CONNECTIONS.BROWSER.CLIENT.MIN_SOCKET_CLIENTS_WAITLIST_FALLBACK;this.connectingMaximum.minimum_waitlist=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].SETTINGS.PARAMS.CONNECTIONS.BROWSER.CLIENT.MIN_SOCKET_CLIENTS_WAITLIST;}
else{let server=NodesList.countNodesByConnectionType(CONNECTION_TYPE.CONNECTION_SERVER_SOCKET);this.connectingMaximum.minimum_fallbacks=consts.SETTINGS.PARAMS.CONNECTIONS.TERMINAL.CLIENT.MIN_SOCKET_CLIENTS_WAITLIST_FALLBACK;this.connectingMaximum.minimum_waitlist=consts.SETTINGS.PARAMS.CONNECTIONS.TERMINAL.CLIENT.MIN_SOCKET_CLIENTS_WAITLIST;if(NodeExpress.SSL){this.connectingMaximum.maximum_waitlist=consts.SETTINGS.PARAMS.CONNECTIONS.TERMINAL.CLIENT.SSL.MAX_SOCKET_CLIENTS_WAITLIST_WHEN_SSL;this.connectingMaximum.maximum_fallbacks=consts.SETTINGS.PARAMS.CONNECTIONS.TERMINAL.CLIENT.SSL.MAX_SOCKET_CLIENTS_WAITLIST_FALLBACK_WHEN_SSL;}else{if(server<=5){this.connectingMaximum.maximum_fallbacks=consts.SETTINGS.PARAMS.CONNECTIONS.TERMINAL.CLIENT.MAX_SOCKET_CLIENTS_WAITLIST_FALLBACK;this.connectingMaximum.maximum_waitlist=consts.SETTINGS.PARAMS.CONNECTIONS.TERMINAL.CLIENT.MAX_SOCKET_CLIENTS_WAITLIST;}else{this.connectingMaximum.maximum_fallbacks=consts.SETTINGS.PARAMS.CONNECTIONS.TERMINAL.CLIENT.SERVER_OPEN.MAX_SOCKET_CLIENTS_WAITLIST_FALLBACK;this.connectingMaximum.maximum_waitlist=consts.SETTINGS.PARAMS.CONNECTIONS.TERMINAL.CLIENT.SERVER_OPEN.MAX_SOCKET_CLIENTS_WAITLIST;}}}
if(__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"]!==undefined&&__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].isPoolActivated){this.connectingMaximum.maximum_fallbacks+=10;this.connectingMaximum.maximum_waitlist+=20;this.connectingMaximum.minimum_fallbacks+=5;this.connectingMaximum.minimum_waitlist+=5;}
try{let date=new Date().getTime();for(let i=this._connectingQueue.length-1;i>=0;i--)
if(date-this._connectingQueue[i].blockedLastTime>2*60*1000){__WEBPACK_IMPORTED_MODULE_10_common_utils_logging_Log__["a"].warn("Deleting OLD connectingQueue element "+i+" "+this._connectingQueue[i].sckAddresses[0].getAddress(),__WEBPACK_IMPORTED_MODULE_10_common_utils_logging_Log__["a"].LOG_TYPE.default);this._connectingQueue.splice(i,1);}}catch(exception){console.error(exception)}
this._timeoutCalculateNumberOfConnections=setTimeout(this._calculateNumberOfConnections.bind(this),10000);}}
__webpack_exports__["a"]=(new NodesWaitlistConnecting());}),(function(module,exports,__webpack_require__){var debug=__webpack_require__(990)('socket.io-parser');var json=__webpack_require__(993);var Emitter=__webpack_require__(995);var binary=__webpack_require__(996);var isBuf=__webpack_require__(418);exports.protocol=4;exports.types=['CONNECT','DISCONNECT','EVENT','ACK','ERROR','BINARY_EVENT','BINARY_ACK'];exports.CONNECT=0;exports.DISCONNECT=1;exports.EVENT=2;exports.ACK=3;exports.ERROR=4;exports.BINARY_EVENT=5;exports.BINARY_ACK=6;exports.Encoder=Encoder;exports.Decoder=Decoder;function Encoder(){}
Encoder.prototype.encode=function(obj,callback){debug('encoding packet %j',obj);if(exports.BINARY_EVENT==obj.type||exports.BINARY_ACK==obj.type){encodeAsBinary(obj,callback);}
else{var encoding=encodeAsString(obj);callback([encoding]);}};function encodeAsString(obj){var str='';var nsp=false;str+=obj.type;if(exports.BINARY_EVENT==obj.type||exports.BINARY_ACK==obj.type){str+=obj.attachments;str+='-';}
if(obj.nsp&&'/'!=obj.nsp){nsp=true;str+=obj.nsp;}
if(null!=obj.id){if(nsp){str+=',';nsp=false;}
str+=obj.id;}
if(null!=obj.data){if(nsp)str+=',';str+=json.stringify(obj.data);}
debug('encoded %j as %s',obj,str);return str;}
function encodeAsBinary(obj,callback){function writeEncoding(bloblessData){var deconstruction=binary.deconstructPacket(bloblessData);var pack=encodeAsString(deconstruction.packet);var buffers=deconstruction.buffers;buffers.unshift(pack);callback(buffers);}
binary.removeBlobs(obj,writeEncoding);}
function Decoder(){this.reconstructor=null;}
Emitter(Decoder.prototype);Decoder.prototype.add=function(obj){var packet;if('string'==typeof obj){packet=decodeString(obj);if(exports.BINARY_EVENT==packet.type||exports.BINARY_ACK==packet.type){this.reconstructor=new BinaryReconstructor(packet);if(this.reconstructor.reconPack.attachments===0){this.emit('decoded',packet);}}else{this.emit('decoded',packet);}}
else if(isBuf(obj)||obj.base64){if(!this.reconstructor){throw new Error('got binary data when not reconstructing a packet');}else{packet=this.reconstructor.takeBinaryData(obj);if(packet){this.reconstructor=null;this.emit('decoded',packet);}}}
else{throw new Error('Unknown type: '+obj);}};function decodeString(str){var p={};var i=0;p.type=Number(str.charAt(0));if(null==exports.types[p.type])return error();if(exports.BINARY_EVENT==p.type||exports.BINARY_ACK==p.type){var buf='';while(str.charAt(++i)!='-'){buf+=str.charAt(i);if(i==str.length)break;}
if(buf!=Number(buf)||str.charAt(i)!='-'){throw new Error('Illegal attachments');}
p.attachments=Number(buf);}
if('/'==str.charAt(i+1)){p.nsp='';while(++i){var c=str.charAt(i);if(','==c)break;p.nsp+=c;if(i==str.length)break;}}else{p.nsp='/';}
var next=str.charAt(i+1);if(''!==next&&Number(next)==next){p.id='';while(++i){var c=str.charAt(i);if(null==c||Number(c)!=c){--i;break;}
p.id+=str.charAt(i);if(i==str.length)break;}
p.id=Number(p.id);}
if(str.charAt(++i)){p=tryParse(p,str.substr(i));}
debug('decoded %s as %j',str,p);return p;}
function tryParse(p,str){try{p.data=json.parse(str);}catch(e){return error();}
return p;};Decoder.prototype.destroy=function(){if(this.reconstructor){this.reconstructor.finishedReconstruction();}};function BinaryReconstructor(packet){this.reconPack=packet;this.buffers=[];}
BinaryReconstructor.prototype.takeBinaryData=function(binData){this.buffers.push(binData);if(this.buffers.length==this.reconPack.attachments){var packet=binary.reconstructPacket(this.reconPack,this.buffers);this.finishedReconstruction();return packet;}
return null;};BinaryReconstructor.prototype.finishedReconstruction=function(){this.reconPack=null;this.buffers=[];};function error(data){return{type:exports.ERROR,data:'parser error'};}}),(function(module,exports,__webpack_require__){(function(global){var hasCORS=__webpack_require__(1001);module.exports=function(opts){var xdomain=opts.xdomain;var xscheme=opts.xscheme;var enablesXDR=opts.enablesXDR;try{if('undefined'!==typeof XMLHttpRequest&&(!xdomain||hasCORS)){return new XMLHttpRequest();}}catch(e){}
try{if('undefined'!==typeof XDomainRequest&&!xscheme&&enablesXDR){return new XDomainRequest();}}catch(e){}
if(!xdomain){try{return new global[['Active'].concat('Object').join('X')]('Microsoft.XMLHTTP');}catch(e){}}};}.call(exports,__webpack_require__(10)))}),(function(module,exports,__webpack_require__){var parser=__webpack_require__(121);var Emitter=__webpack_require__(144);module.exports=Transport;function Transport(opts){this.path=opts.path;this.hostname=opts.hostname;this.port=opts.port;this.secure=opts.secure;this.query=opts.query;this.timestampParam=opts.timestampParam;this.timestampRequests=opts.timestampRequests;this.readyState='';this.agent=opts.agent||false;this.socket=opts.socket;this.enablesXDR=opts.enablesXDR;this.pfx=opts.pfx;this.key=opts.key;this.passphrase=opts.passphrase;this.cert=opts.cert;this.ca=opts.ca;this.ciphers=opts.ciphers;this.rejectUnauthorized=opts.rejectUnauthorized;this.forceNode=opts.forceNode;this.extraHeaders=opts.extraHeaders;this.localAddress=opts.localAddress;}
Emitter(Transport.prototype);Transport.prototype.onError=function(msg,desc){var err=new Error(msg);err.type='TransportError';err.description=desc;this.emit('error',err);return this;};Transport.prototype.open=function(){if('closed'===this.readyState||''===this.readyState){this.readyState='opening';this.doOpen();}
return this;};Transport.prototype.close=function(){if('opening'===this.readyState||'open'===this.readyState){this.doClose();this.onClose();}
return this;};Transport.prototype.send=function(packets){if('open'===this.readyState){this.write(packets);}else{throw new Error('Transport not open');}};Transport.prototype.onOpen=function(){this.readyState='open';this.writable=true;this.emit('open');};Transport.prototype.onData=function(data){var packet=parser.decodePacket(data,this.socket.binaryType);this.onPacket(packet);};Transport.prototype.onPacket=function(packet){this.emit('packet',packet);};Transport.prototype.onClose=function(){this.readyState='closed';this.emit('close');};}),(function(module,exports){exports.encode=function(obj){var str='';for(var i in obj){if(obj.hasOwnProperty(i)){if(str.length)str+='&';str+=encodeURIComponent(i)+'='+encodeURIComponent(obj[i]);}}
return str;};exports.decode=function(qs){var qry={};var pairs=qs.split('&');for(var i=0,l=pairs.length;i<l;i++){var pair=pairs[i].split('=');qry[decodeURIComponent(pair[0])]=decodeURIComponent(pair[1]);}
return qry;};}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_node_lists_types_Node_Consensus_Type__=__webpack_require__(44);var __WEBPACK_IMPORTED_MODULE_1_node_lists_waitlist_Nodes_Waitlist__=__webpack_require__(39);var __WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Type__=__webpack_require__(35);var __WEBPACK_IMPORTED_MODULE_4_common_sockets_protocol_extend_socket_Node_Protocol__=__webpack_require__(141);var __WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_6_common_sockets_protocol_Node_Propagation_List__=__webpack_require__(1016);const MAX_WAITLIST_QUEUE_LENGTH=1000;const DOWNLOAD_WAITLIST_COUNT=20;class NodePropagationProtocol{constructor(){this._newFullNodesWaitList={length:0};this._newLightNodesWaitList={length:0};this._waitlistProccessed={};setTimeout(this._processNewWaitlistInterval.bind(this),5000+Math.random()*2000);}
async _processList(list,nodeType){for(let key in list){if(key==="length")continue;if(!list.hasOwnProperty(key))continue;let answer=await __WEBPACK_IMPORTED_MODULE_1_node_lists_waitlist_Nodes_Waitlist__["a"].addNewNodeToWaitlist(key,undefined,list[key].t,list[key].ct||__WEBPACK_IMPORTED_MODULE_0_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_PEER,list[key].c,list[key].sock.node.level+1,list[key].sock);if(list[key].next&&list[key].next>0)
list[key].sock.node.sendRequest((nodeType===__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Type__["a"].NODE_TERMINAL?"propagation/request-all-wait-list/full-nodes":"propagation/request-all-wait-list/light-nodes"),{index:list[key].next,count:this.count(list[key].sock)});delete list[key];list.length--;if(answer.result){this._waitlistProccessed[key]=true;return;}}}
async _processNewWaitlistInterval(){await this._processList(this._newFullNodesWaitList,__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Type__["a"].NODE_TERMINAL);await this._processList(this._newLightNodesWaitList,__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Type__["a"].NODE_WEB_PEER);setTimeout(async()=>{await this._processNewWaitlistInterval()},1500+Math.floor(Math.random()*200));}
initializePropagationProtocol(){__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].emitter.once("nodes-list/connected",nodeListObject=>{this._newNodeConnected(nodeListObject)});__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].emitter.once("nodes-list/disconnected",nodeListObject=>{this._nodeDisconnected(nodeListObject)});__WEBPACK_IMPORTED_MODULE_1_node_lists_waitlist_Nodes_Waitlist__["a"].emitter.on("waitlist/new-node",nodeWaitListObject=>{this._newNodeConnected(nodeWaitListObject)});__WEBPACK_IMPORTED_MODULE_1_node_lists_waitlist_Nodes_Waitlist__["a"].emitter.on("waitlist/delete-node",nodeWaitListObject=>{this._nodeDisconnected(nodeWaitListObject)});}
initializeSocketForPropagation(socket){this.initializeNodesPropagation(socket);setTimeout(()=>{if([__WEBPACK_IMPORTED_MODULE_0_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_MINER_POOL].indexOf(socket.node.protocol.nodeConsensusType)===0)
socket.node.sendRequest("propagation/request-all-wait-list/full-nodes",{index:0,count:this.count(socket)});socket.node.sendRequest("propagation/request-all-wait-list/light-nodes",{index:0,count:this.count(socket)});},500+Math.floor(Math.random()*3000));}
initializeNodesSimpleWaitlist(socket){if(socket.propagationSet===true)return;socket.propagationSet=true;socket.on("propagation/simple-waitlist-nodes",async(data,callback)=>{try{await this._processNodesList(data,socket);callback("received",{});}catch(exception){}});}
async _processNodesList(response,socket){try{let addresses=response.addresses||[];if(typeof addresses==="string")addresses=[addresses];if(!Array.isArray(addresses))throw{message:"addresses is not an array"};if(addresses.length>50)addresses.splice(50);let op=response.op||'';switch(op){case "new-full-nodes":case "new-light-nodes":let list,type;if(op==="new-full-nodes"){list=this._newFullNodesWaitList;type=__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Type__["a"].NODE_TERMINAL}else{list=this._newLightNodesWaitList;type=__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Type__["a"].NODE_WEB_PEER;}
if(list.length>MAX_WAITLIST_QUEUE_LENGTH)
break;let lastWaitlist=undefined;for(let i=0;i<addresses.length;i++){if(typeof addresses[i].a==="string"&&list[addresses[i].a]===undefined&&addresses[i].a!=="length"){list[addresses[i].a]={a:addresses[i].a,t:addresses[i].t,c:addresses[i].c,sock:socket,};lastWaitlist=list[addresses[i].a];list.length++;if(list.length>MAX_WAITLIST_QUEUE_LENGTH)
break;}}
if(lastWaitlist!==undefined&&response.next!==undefined&&response.next>0)
lastWaitlist.next=response.next;break;case "disconnected-light-nodes":case "disconnected-full-nodes":break;default:throw{message:"Op is invalid"};}}
catch(exception){}}
initializeNodesPropagation(socket){socket.on("propagation/nodes",data=>this._processNodesList(data,socket));socket.node.on("propagation/request-all-wait-list/full-nodes",response=>{let answer=this._getWaitlist(response,__WEBPACK_IMPORTED_MODULE_1_node_lists_waitlist_Nodes_Waitlist__["a"].waitListFullNodes);if(answer&&answer.list.length>0)
socket.node.sendRequest("propagation/nodes",{"op":"new-full-nodes",addresses:answer.list,next:answer.next});});socket.node.on("propagation/request-all-wait-list/light-nodes",response=>{let answer=this._getWaitlist(response,__WEBPACK_IMPORTED_MODULE_1_node_lists_waitlist_Nodes_Waitlist__["a"].waitListLightNodes);if(answer&&answer.list.length>0)
socket.node.sendRequest("propagation/nodes",{"op":"new-light-nodes",addresses:answer.list,next:answer.next});});this.initializeNodesSimpleWaitlist(socket);}
_getWaitlist(response,list){try{let index=response.index||0;let count=response.count||50;count=Math.min(count,50);count=Math.max(count,5);let answer=[];for(let i=index*count;i<(index+1)*count&&i<list.length;i++)
answer.push(list[i].toJSON());return{list:answer,next:((index+1)*count<list.length)?(index+1):0}}catch(exception){return null;}}
_newNodeConnected(nodeWaitListObject){}
_nodeDisconnected(nodeWaitListObject){}
count(socket){return[__WEBPACK_IMPORTED_MODULE_0_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_MINER_POOL].indexOf(socket.node.protocol.nodeConsensusType)?15:DOWNLOAD_WAITLIST_COUNT;}}
__webpack_exports__["a"]=(new NodePropagationProtocol());}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1__signaling_client_list_signaling_client_list__=__webpack_require__(265);var __WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_3__signaling_client_service_Node_Signaling_Client_Service__=__webpack_require__(431);class NodeSignalingClientProtocol{constructor(){console.log("NodeSignalingClientProtocol constructor");}
_initializeSimpleProtocol(socket){}
_initializeSignalingClientService1(socket){socket.node.on("signals/client/initiator/generate-initiator-signal",async(data)=>{if(!data.remoteUUID)
throw{message:"remoteUUID was not specified"};if(__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].searchNodeSocketByAddress(data.remoteUUID,'all',{"uuid":true})!==null)
throw{message:"Already connected"};if(__WEBPACK_IMPORTED_MODULE_1__signaling_client_list_signaling_client_list__["a"].searchWebPeerSignalingClientList(undefined,undefined,data.remoteUUID)!==null)
throw{message:"Already connected"};if(__WEBPACK_IMPORTED_MODULE_1__signaling_client_list_signaling_client_list__["a"].countConnectedByType("initiator")>__WEBPACK_IMPORTED_MODULE_1__signaling_client_list_signaling_client_list__["a"].computeMaxWebPeersConnected(data.remoteUUID))
throw{message:"I can't accept WebPeers anymore"};if(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].DEBUG)console.warn("WEBRTC# 1 Generate Initiator Signal");let webPeerSignalingClientListObject=__WEBPACK_IMPORTED_MODULE_1__signaling_client_list_signaling_client_list__["a"].registerWebPeerSignalingClientListBySignal(undefined,undefined,data.remoteUUID,"initiator");let webPeer=webPeerSignalingClientListObject.webPeer;if(webPeer.peer===null)
await webPeer.createPeer(true,socket,data.connectionId,(iceCandidate)=>{this.sendInitiatorIceCandidate(socket,data.connectionId,iceCandidate)},data.remoteAddress,data.remoteUUID,socket.level+1);let answer=await webPeer.createSignalInitiator();if(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].DEBUG)
console.log("###################### signals/client/initiator/generate-initiator-signal/answer"+data.connectionId,answer,webPeer.peer,typeof answer);if(answer.signal===undefined)
console.error("WEBRTC 1 is not supported !!!! being the initiator");if(!answer.result)
throw{message:"Failed to Get a initiatorSignal: "+answer.message};socket.node.sendRequest("signals/client/initiator/generate-initiator-signal/answer",{connectionId:data.connectionId,accepted:true,initiatorSignal:answer.signal});});socket.node.on("signals/client/initiator/join-answer-signal",async(data)=>{if(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].DEBUG)console.warn("WEBRTC# 1_2");if(data.remoteUUID===undefined||data.remoteUUID===null)throw{message:"remoteUUID was not specified"};let webPeerSignalingClientListObject=__WEBPACK_IMPORTED_MODULE_1__signaling_client_list_signaling_client_list__["a"].searchWebPeerSignalingClientList(data.initiatorSignal,undefined,data.remoteUUID);if(webPeerSignalingClientListObject===null)throw{message:"WebRTC Client was not found"};let answer=await webPeerSignalingClientListObject.webPeer.joinAnswer(data.answerSignal);if(!answer.result)
throw{message:answer.message};socket.node.sendRequest("signals/client/initiator/join-answer-signal/answer",{connectionId:data.connectionId,established:true,remoteUUID:data.remoteUUID});});socket.node.on("signals/client/initiator/receive-ice-candidate",async(data)=>{if(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].DEBUG)console.warn("WEBRTC# 1_3");if(data.remoteUUID===undefined||data.remoteUUID===null)
throw{message:"data.remoteUUID 4 was not specified"};if(data.iceCandidate===undefined)
throw{message:"data.iceCandidate 4 was not specified"};let webPeerSignalingClientListObject=__WEBPACK_IMPORTED_MODULE_1__signaling_client_list_signaling_client_list__["a"].searchWebPeerSignalingClientList(data.initiatorSignal,undefined,data.remoteUUID);if(webPeerSignalingClientListObject===null)throw{message:"WebRTC Client was not found"};let answer=await webPeerSignalingClientListObject.webPeer.createSignal(data.iceCandidate);if(!answer.result)
throw{message:answer.message};socket.node.sendRequest("signals/client/initiator/receive-ice-candidate"+"/answer",{connectionId:data.connectionId,accepted:true,answerSignal:answer.signal});});}
_initializeSignalingClientService2(socket){socket.node.on("signals/client/answer/receive-initiator-signal",async(data)=>{if(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].DEBUG)console.warn("WEBRTC# 2");if(data.remoteUUID===undefined||data.remoteUUID===null)
throw{message:"data.remoteUUID 2 was not specified"}
if(__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].searchNodeSocketByAddress(data.remoteUUID,'all',{"uuid":true})!==null)
throw{message:"Already connected"};if(__WEBPACK_IMPORTED_MODULE_1__signaling_client_list_signaling_client_list__["a"].searchWebPeerSignalingClientList(data.initiatorSignal,undefined,data.remoteUUID)!==null)
throw{message:"Already connected"};let webPeer=await this._searchWebPeerSignalingClientList2(socket,data);let answer=await webPeer.createSignal(data.initiatorSignal);if(answer.signal===undefined)
console.log("WEBRTC 2 is not supported !!!!",answer);if(!answer.result)
throw{message:answer.message};socket.node.sendRequest("signals/client/answer/receive-initiator-signal/answer",{connectionId:data.connectionId,accepted:true,answerSignal:answer.signal});});socket.node.on("signals/client/answer/receive-ice-candidate",async(data)=>{if(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].DEBUG)console.warn("WEBRTC# 2_2");if(data.remoteUUID===undefined||data.remoteUUID===null)
throw{message:"data.remoteUUID 3 is empty"};let webPeer=await this._searchWebPeerSignalingClientList2(socket,data);let answer=await webPeer.createSignal(data.iceCandidate);if(!answer.result)
throw{message:answer.message};socket.node.sendRequest("signals/client/answer/receive-ice-candidate"+"/answer",{connectionId:data.connectionId,accepted:true,answerSignal:answer.signal});});}
async _searchWebPeerSignalingClientList2(socket,data){let webPeerSignalingClientListObject=__WEBPACK_IMPORTED_MODULE_1__signaling_client_list_signaling_client_list__["a"].searchWebPeerSignalingClientList(undefined,data.remoteUUID);if(webPeerSignalingClientListObject===null){if(__WEBPACK_IMPORTED_MODULE_1__signaling_client_list_signaling_client_list__["a"].countConnectedByType("answer")>__WEBPACK_IMPORTED_MODULE_1__signaling_client_list_signaling_client_list__["a"].computeMaxWebPeersConnected(data.remoteUUID))
throw{message:"I can't accept WebPeers anymore"};webPeerSignalingClientListObject=__WEBPACK_IMPORTED_MODULE_1__signaling_client_list_signaling_client_list__["a"].registerWebPeerSignalingClientListBySignal(undefined,undefined,data.remoteUUID,"answer");}
let webPeer=webPeerSignalingClientListObject.webPeer;if(webPeer.peer===null){await webPeer.createPeer(false,socket,data.connectionId,(iceCandidate)=>{this.sendAnswerIceCandidate(socket,data.connectionId,iceCandidate)},data.remoteAddress,data.remoteUUID,socket.level+1);webPeer.peer.signalInitiatorData=data.initiatorSignal;}
return webPeer;}
initializeSignalingClientService(socket){this._initializeSimpleProtocol(socket);this._initializeSignalingClientService1(socket);this._initializeSignalingClientService2(socket);__WEBPACK_IMPORTED_MODULE_3__signaling_client_service_Node_Signaling_Client_Service__["a"].subscribeSignalingServer(socket);}
sendInitiatorIceCandidate(socket,connectionId,iceCandidate){socket.node.sendRequest("signals/server/new-initiator-ice-candidate",{connectionId:connectionId,candidate:iceCandidate})}
sendAnswerIceCandidate(socket,connectionId,iceCandidate){socket.node.sendRequest("signals/server/new-answer-ice-candidate",{connectionId:connectionId,candidate:iceCandidate})}
webPeerDisconnected(webPeer){webPeer.peer.signaling.socketSignaling.node.sendRequest("signals/server/connections/established-connection-was-dropped",{connectionId:webPeer.peer.signaling.connectionId,address:webPeer.remoteAddress});__WEBPACK_IMPORTED_MODULE_1__signaling_client_list_signaling_client_list__["a"].desinitializeWebPeerConnection(webPeer);}
sendSuccessConnection(webPeer){if(webPeer.peer!==null&&webPeer.peer.signaling!==null)
webPeer.peer.signaling.socketSignaling.node.sendRequest("signals/server/connections/was-established-successfully",{connectionId:webPeer.peer.signaling.connectionId})}
sendErrorConnection(webPeer){if(webPeer.peer!==null&&webPeer.peer.signaling!==null)
webPeer.peer.signaling.socketSignaling.node.sendRequest("signals/server/connections/error-establishing-connection",{connectionId:webPeer.peer.signaling.connectionId})}}
__webpack_exports__["a"]=(new NodeSignalingClientProtocol());}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1__signaling_client_peer_object__=__webpack_require__(1019);var __WEBPACK_IMPORTED_MODULE_2_node_webrtc_web_peer_node_web_peer_webRTC__=__webpack_require__(1020);var __WEBPACK_IMPORTED_MODULE_3_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_4__signaling_client_service_Node_Signaling_Client_Service__=__webpack_require__(431);class SignalingClientList{constructor(){console.log("SignalingRoomList constructor");this.connected=[];}
desinitializeWebPeerConnection(webpeer){let pos=this.findWebPeerSignalingClientList(undefined,undefined,webpeer.peer.node.sckAddress.uuid);if(pos!==-1){this.connected.splice(pos,1);__WEBPACK_IMPORTED_MODULE_4__signaling_client_service_Node_Signaling_Client_Service__["a"].askRandomSignalingServerToConnect();}}
registerWebPeerSignalingClientListBySignal(signalInitiator,signalAnswer,uuid,signalingClientType){let signalingClientPeerObject=this.searchWebPeerSignalingClientList(signalInitiator,signalAnswer,uuid);if(signalingClientPeerObject===null){let webPeer=new __WEBPACK_IMPORTED_MODULE_2_node_webrtc_web_peer_node_web_peer_webRTC__["a"]();signalingClientPeerObject=new __WEBPACK_IMPORTED_MODULE_1__signaling_client_peer_object__["a"](webPeer,uuid,signalingClientType);this.connected.push(signalingClientPeerObject);}
return signalingClientPeerObject;}
findWebPeerSignalingClientList(signalInitiator,signalAnswer,uuid){for(let i=0;i<this.connected.length;i++)
if(this.connected[i].webPeer.peer!==null&&this.connected[i].webPeer.peer!==undefined){if(signalInitiator!==undefined&&JSON.stringify(this.connected[i].webPeer.peer.signalInitiatorData)===JSON.stringify(signalInitiator))
return i;if(signalAnswer!==undefined&&JSON.stringify(this.connected[i].webPeer.peer.signalData)===JSON.stringify(signalAnswer))
return i;if(uuid!==undefined&&this.connected[i].uuid===uuid)
return i;}
return-1;}
searchWebPeerSignalingClientList(signalInitiator,signalAnswer,uuid){let pos=this.findWebPeerSignalingClientList(signalInitiator,signalAnswer,uuid);if(pos===-1)return null;return this.connected[pos];}
deleteWebPeerSignalingClientList(uuid){for(let i=0;i<this.connected.length;i++)
if(this.connected[i].uuid===uuid){this.connected[i].webPeer.peer.close();this.connected.splice(i,1);return true;}
return false;}
computeMaxWebPeersConnected(uuid){return __WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].SETTINGS.PARAMS.CONNECTIONS.BROWSER.WEBRTC.MAXIMUM_CONNECTIONS+(this.findWebPeerSignalingClientList(undefined,undefined,uuid)!==-1?1:0)}
countConnectedByType(signalingClientType){let count=0;for(let i=0;i<this.connected.length;i++)
if(this.connected[i].signalingClientType===signalingClientType)
count++;return count;}}
__webpack_exports__["a"]=(new SignalingClientList());}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_protocol_Interface_Blockchain_Protocol__=__webpack_require__(177);var __WEBPACK_IMPORTED_MODULE_1__PPoW_Blockchain_Protocol_Forks_Manager__=__webpack_require__(1023);var __WEBPACK_IMPORTED_MODULE_2_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_3__utils_BufferExtended__=__webpack_require__(3);class PPoWBlockchainProtocol extends __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_protocol_Interface_Blockchain_Protocol__["a"]{createForksManager(){this.forksManager=new __WEBPACK_IMPORTED_MODULE_1__PPoW_Blockchain_Protocol_Forks_Manager__["a"](this.blockchain,this);}
_initializeNewSocket(nodesListObject){__WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_protocol_Interface_Blockchain_Protocol__["a"].prototype._initializeNewSocket.call(this,nodesListObject);let socket=nodesListObject.socket;this._initializeNodeNiPoPoW(socket);}
_initializeNodeNiPoPoW(socket){socket.node.on("get/nipopow-blockchain/headers/get-proofs/pi/hash",()=>{let answer;if(this.blockchain.agent.light)
answer={hash:this.blockchain.proofPi.hash,length:this.blockchain.proofPi.blocks.length};else
answer={hash:this.blockchain.prover.proofPi.hash,length:this.blockchain.prover.proofPi.blocks.length};socket.node.sendRequest("get/nipopow-blockchain/headers/get-proofs/pi/hash"+"/answer",answer);});socket.node.on("get/nipopow-blockchain/headers/get-proofs/pi-gzip",async(data)=>{if(!data)return;let serialization;let proofPi;if(this.blockchain.agent.light)proofPi=this.blockchain.proofPi;else proofPi=this.blockchain.prover.proofPi;if(proofPi.proofGzip)serialization=proofPi.proofGzip;else serialization=proofPi.proofSerialized;let moreChunks=false;if(typeof data.starting==="number"&&typeof data.length==="number"){if(data.length<__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].SETTINGS.PARAMS.MAX_SIZE.MINIMUM_SPLIT_CHUNKS_BUFFER_SOCKETS_SIZE_BYTES)throw{message:"way to few messages"};if((serialization.length-data.starting)>data.length)
moreChunks=true;else
moreChunks=false;if(serialization.length-1-data.starting>0)
serialization=__WEBPACK_IMPORTED_MODULE_3__utils_BufferExtended__["a"].substr(serialization,data.starting,Math.min(data.length,serialization.length-data.starting));else
serialization=new Buffer(0);return socket.node.sendRequest("get/nipopow-blockchain/headers/get-proofs/pi-gzip/answer",{result:true,data:serialization,moreChunks:moreChunks,});}});socket.node.on("get/nipopow-blockchain/headers/get-proofs/xi",async()=>{});}}
__webpack_exports__["a"]=(PPoWBlockchainProtocol);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0__Mini_Blockchain_Protocol__=__webpack_require__(1024);var __WEBPACK_IMPORTED_MODULE_1__utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_2_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_3_common_utils_GZip__=__webpack_require__(176);class MiniBlockchainAdvancedProtocol extends __WEBPACK_IMPORTED_MODULE_0__Mini_Blockchain_Protocol__["a"]{_initializeNewSocket(nodesListObject){let socket=nodesListObject.socket;__WEBPACK_IMPORTED_MODULE_0__Mini_Blockchain_Protocol__["a"].prototype._initializeNewSocket.call(this,nodesListObject);socket.node.on("get/blockchain/light/get-light-settings",async(data)=>{if(data.height===undefined)
data.height=-1;if(typeof data.height!=="number")throw{message:"data.height is not a number"};if(data.height<0)throw{message:"height is not valid"};if(this.blockchain.blocks.length<data.height)
throw{message:"height is not valid"};let difficultyTarget=await this.blockchain.getDifficultyTarget(data.height);let timestamp=this.blockchain.getTimeStamp(data.height);let hashPrev=this.blockchain.getHash(data.height-1);socket.node.sendRequest("get/blockchain/light/get-light-settings/"+data.height,{result:difficultyTarget?true:false,difficultyTarget:difficultyTarget,timeStamp:timestamp,hashPrev:hashPrev,});});}
async getAccountantTree(socket,height,timeoutCount=1000){let downloading=true;let pos=0;let buffers=[];let gzippedCommunication=false;while(downloading&&pos<timeoutCount){let answer=await socket.node.sendRequestWaitOnce("get/blockchain/accountant-tree/get-accountant-tree",{height:height,substr:{startIndex:pos*__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].SETTINGS.PARAMS.MAX_SIZE.SPLIT_CHUNKS_BUFFER_SOCKETS_SIZE_BYTES,count:__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].SETTINGS.PARAMS.MAX_SIZE.SPLIT_CHUNKS_BUFFER_SOCKETS_SIZE_BYTES,},gzipped:__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].BLOCKCHAIN.LIGHT.GZIPPED?true:undefined,},height,10000);if(answer===null)throw{message:"get-accountant-tree never received ",forkStartingHeight:height};if(!answer.result)throw{message:"get-accountant-tree return false ",answer:answer.message};if(!Buffer.isBuffer(answer.accountantTree))
throw{message:"accountantTree data is not a buffer"};if(gzippedCommunication===false&&answer.gzipped===true)gzippedCommunication=true;if(answer.accountantTree.length===__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].SETTINGS.PARAMS.MAX_SIZE.SPLIT_CHUNKS_BUFFER_SOCKETS_SIZE_BYTES||(answer.accountantTree.length<=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].SETTINGS.PARAMS.MAX_SIZE.SPLIT_CHUNKS_BUFFER_SOCKETS_SIZE_BYTES&&!answer.moreChunks))
{buffers.push(answer.accountantTree);if(!answer.moreChunks)
downloading=false;}
pos++;}
if(pos===timeoutCount)
throw{message:"accountantTree too many trials"};if(buffers.length===0)
throw{message:"accountantTree is empty"};let buffer=Buffer.concat(buffers);try{buffer=gzippedCommunication?await __WEBPACK_IMPORTED_MODULE_3_common_utils_GZip__["a"].unzip(buffer):buffer;}catch(exception){gzippedCommunication=false;}
return{buffer:buffer,gzipped:gzippedCommunication?buffer:undefined};}}
__webpack_exports__["a"]=(MiniBlockchainAdvancedProtocol);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_ppow_blockchain_blockchain_forks_PPoW_Blockchain_Fork__=__webpack_require__(1025);var __WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_blockchain_forks_Interface_Blockchain_Fork__=__webpack_require__(142);var __WEBPACK_IMPORTED_MODULE_2_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_3_common_blockchain_interface_blockchain_blocks_validation_Interface_Blockchain_Block_Validation__=__webpack_require__(140);let inheritFork;if(__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].POPOW_PARAMS.ACTIVATED)inheritFork=__WEBPACK_IMPORTED_MODULE_0_common_blockchain_ppow_blockchain_blockchain_forks_PPoW_Blockchain_Fork__["a"];else inheritFork=__WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_blockchain_forks_Interface_Blockchain_Fork__["a"];class MiniBlockchainFork extends inheritFork{_createBlockValidation_ForkValidation(height,forkHeight){let validationType={"skip-accountant-tree-validation":true,"skip-validation-transactions-from-values":true};return new __WEBPACK_IMPORTED_MODULE_3_common_blockchain_interface_blockchain_blocks_validation_Interface_Blockchain_Block_Validation__["a"](this.getForkBlock.bind(this),this.getForkDifficultyTarget.bind(this),this.getForkTimeStamp.bind(this),this.getForkHash.bind(this),this.getForkChainHash.bind(this),validationType);}}
__webpack_exports__["a"]=(MiniBlockchainFork);}),(function(module,exports,__webpack_require__){module.exports=!__webpack_require__(26)&&!__webpack_require__(13)(function(){return Object.defineProperty(__webpack_require__(181)('div'),'a',{get:function(){return 7;}}).a!=7;});}),(function(module,exports,__webpack_require__){exports.f=__webpack_require__(19);}),(function(module,exports,__webpack_require__){var has=__webpack_require__(51);var toIObject=__webpack_require__(52);var arrayIndexOf=__webpack_require__(147)(false);var IE_PROTO=__webpack_require__(183)('IE_PROTO');module.exports=function(object,names){var O=toIObject(object);var i=0;var result=[];var key;for(key in O)if(key!=IE_PROTO)has(O,key)&&result.push(key);while(names.length>i)if(has(O,key=names[i++])){~arrayIndexOf(result,key)||result.push(key);}
return result;};}),(function(module,exports,__webpack_require__){var dP=__webpack_require__(27);var anObject=__webpack_require__(8);var getKeys=__webpack_require__(94);module.exports=__webpack_require__(26)?Object.defineProperties:function defineProperties(O,Properties){anObject(O);var keys=getKeys(Properties);var length=keys.length;var i=0;var P;while(length>i)dP.f(O,P=keys[i++],Properties[P]);return O;};}),(function(module,exports,__webpack_require__){var toIObject=__webpack_require__(52);var gOPN=__webpack_require__(97).f;var toString={}.toString;var windowNames=typeof window=='object'&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var getWindowNames=function(it){try{return gOPN(it);}catch(e){return windowNames.slice();}};module.exports.f=function getOwnPropertyNames(it){return windowNames&&toString.call(it)=='[object Window]'?getWindowNames(it):gOPN(toIObject(it));};}),(function(module,exports,__webpack_require__){"use strict";var getKeys=__webpack_require__(94);var gOPS=__webpack_require__(148);var pIE=__webpack_require__(124);var toObject=__webpack_require__(30);var IObject=__webpack_require__(123);var $assign=Object.assign;module.exports=!$assign||__webpack_require__(13)(function(){var A={};var B={};var S=Symbol();var K='abcdefghijklmnopqrst';A[S]=7;K.split('').forEach(function(k){B[k]=k;});return $assign({},A)[S]!=7||Object.keys($assign({},B)).join('')!=K;})?function assign(target,source){var T=toObject(target);var aLen=arguments.length;var index=1;var getSymbols=gOPS.f;var isEnum=pIE.f;while(aLen>index){var S=IObject(arguments[index++]);var keys=getSymbols?getKeys(S).concat(getSymbols(S)):getKeys(S);var length=keys.length;var j=0;var key;while(length>j)if(isEnum.call(S,key=keys[j++]))T[key]=S[key];}return T;}:$assign;}),(function(module,exports){module.exports=Object.is||function is(x,y){return x===y?x!==0||1/x===1/y:x!=x&&y!=y;};}),(function(module,exports,__webpack_require__){"use strict";var aFunction=__webpack_require__(42);var isObject=__webpack_require__(14);var invoke=__webpack_require__(277);var arraySlice=[].slice;var factories={};var construct=function(F,len,args){if(!(len in factories)){for(var n=[],i=0;i<len;i++)n[i]='a['+i+']';factories[len]=Function('F,a','return new F('+n.join(',')+')');}return factories[len](F,args);};module.exports=Function.bind||function bind(that){var fn=aFunction(this);var partArgs=arraySlice.call(arguments,1);var bound=function(){var args=partArgs.concat(arraySlice.call(arguments));return this instanceof bound?construct(fn,args.length,args):invoke(fn,args,that);};if(isObject(fn.prototype))bound.prototype=fn.prototype;return bound;};}),(function(module,exports){module.exports=function(fn,args,that){var un=that===undefined;switch(args.length){case 0:return un?fn():fn.call(that);case 1:return un?fn(args[0]):fn.call(that,args[0]);case 2:return un?fn(args[0],args[1]):fn.call(that,args[0],args[1]);case 3:return un?fn(args[0],args[1],args[2]):fn.call(that,args[0],args[1],args[2]);case 4:return un?fn(args[0],args[1],args[2],args[3]):fn.call(that,args[0],args[1],args[2],args[3]);}return fn.apply(that,args);};}),(function(module,exports,__webpack_require__){var $parseInt=__webpack_require__(11).parseInt;var $trim=__webpack_require__(111).trim;var ws=__webpack_require__(187);var hex=/^[-+]?0[xX]/;module.exports=$parseInt(ws+'08')!==8||$parseInt(ws+'0x16')!==22?function parseInt(str,radix){var string=$trim(String(str),3);return $parseInt(string,(radix>>>0)||(hex.test(string)?16:10));}:$parseInt;}),(function(module,exports,__webpack_require__){var $parseFloat=__webpack_require__(11).parseFloat;var $trim=__webpack_require__(111).trim;module.exports=1/$parseFloat(__webpack_require__(187)+'-0')!==-Infinity?function parseFloat(str){var string=$trim(String(str),3);var result=$parseFloat(string);return result===0&&string.charAt(0)=='-'?-0:result;}:$parseFloat;}),(function(module,exports,__webpack_require__){var cof=__webpack_require__(59);module.exports=function(it,msg){if(typeof it!='number'&&cof(it)!='Number')throw TypeError(msg);return+it;};}),(function(module,exports,__webpack_require__){var isObject=__webpack_require__(14);var floor=Math.floor;module.exports=function isInteger(it){return!isObject(it)&&isFinite(it)&&floor(it)===it;};}),(function(module,exports){module.exports=Math.log1p||function log1p(x){return(x=+x)>-1e-8&&x<1e-8?x-x*x/2:Math.log(1+x);};}),(function(module,exports,__webpack_require__){var sign=__webpack_require__(190);var pow=Math.pow;var EPSILON=pow(2,-52);var EPSILON32=pow(2,-23);var MAX32=pow(2,127)*(2-EPSILON32);var MIN32=pow(2,-126);var roundTiesToEven=function(n){return n+1/EPSILON-1/EPSILON;};module.exports=Math.fround||function fround(x){var $abs=Math.abs(x);var $sign=sign(x);var a,result;if($abs<MIN32)return $sign*roundTiesToEven($abs/MIN32/EPSILON32)*MIN32*EPSILON32;a=(1+EPSILON32/EPSILON)*$abs;result=a-(a-$abs);if(result>MAX32||result!=result)return $sign*Infinity;return $sign*result;};}),(function(module,exports,__webpack_require__){var anObject=__webpack_require__(8);module.exports=function(iterator,fn,value,entries){try{return entries?fn(anObject(value)[0],value[1]):fn(value);}catch(e){var ret=iterator['return'];if(ret!==undefined)anObject(ret.call(iterator));throw e;}};}),(function(module,exports,__webpack_require__){var aFunction=__webpack_require__(42);var toObject=__webpack_require__(30);var IObject=__webpack_require__(123);var toLength=__webpack_require__(22);module.exports=function(that,callbackfn,aLen,memo,isRight){aFunction(callbackfn);var O=toObject(that);var self=IObject(O);var length=toLength(O.length);var index=isRight?length-1:0;var i=isRight?-1:1;if(aLen<2)for(;;){if(index in self){memo=self[index];index+=i;break;}
index+=i;if(isRight?index<0:length<=index){throw TypeError('Reduce of empty array with no initial value');}}
for(;isRight?index>=0:length>index;index+=i)if(index in self){memo=callbackfn(memo,self[index],index,O);}
return memo;};}),(function(module,exports,__webpack_require__){"use strict";var toObject=__webpack_require__(30);var toAbsoluteIndex=__webpack_require__(95);var toLength=__webpack_require__(22);module.exports=[].copyWithin||function copyWithin(target,start){var O=toObject(this);var len=toLength(O.length);var to=toAbsoluteIndex(target,len);var from=toAbsoluteIndex(start,len);var end=arguments.length>2?arguments[2]:undefined;var count=Math.min((end===undefined?len:toAbsoluteIndex(end,len))-from,len-to);var inc=1;if(from<to&&to<from+count){inc=-1;from+=count-1;to+=count-1;}
while(count-->0){if(from in O)O[to]=O[from];else delete O[to];to+=inc;from+=inc;}return O;};}),(function(module,exports){module.exports=function(done,value){return{value:value,done:!!done};};}),(function(module,exports,__webpack_require__){"use strict";var regexpExec=__webpack_require__(202);__webpack_require__(0)({target:'RegExp',proto:true,forced:regexpExec!==/./.exec},{exec:regexpExec});}),(function(module,exports,__webpack_require__){if(__webpack_require__(26)&&/./g.flags!='g')__webpack_require__(27).f(RegExp.prototype,'flags',{configurable:true,get:__webpack_require__(125)});}),(function(module,exports){module.exports=function(exec){try{return{e:false,v:exec()};}catch(e){return{e:true,v:e};}};}),(function(module,exports,__webpack_require__){var anObject=__webpack_require__(8);var isObject=__webpack_require__(14);var newPromiseCapability=__webpack_require__(206);module.exports=function(C,x){anObject(C);if(isObject(x)&&x.constructor===C)return x;var promiseCapability=newPromiseCapability.f(C);var resolve=promiseCapability.resolve;resolve(x);return promiseCapability.promise;};}),(function(module,exports,__webpack_require__){"use strict";var strong=__webpack_require__(293);var validate=__webpack_require__(113);var MAP='Map';module.exports=__webpack_require__(156)(MAP,function(get){return function Map(){return get(this,arguments.length>0?arguments[0]:undefined);};},{get:function get(key){var entry=strong.getEntry(validate(this,MAP),key);return entry&&entry.v;},set:function set(key,value){return strong.def(validate(this,MAP),key===0?0:key,value);}},strong,true);}),(function(module,exports,__webpack_require__){"use strict";var dP=__webpack_require__(27).f;var create=__webpack_require__(96);var redefineAll=__webpack_require__(101);var ctx=__webpack_require__(58);var anInstance=__webpack_require__(99);var forOf=__webpack_require__(100);var $iterDefine=__webpack_require__(192);var step=__webpack_require__(287);var setSpecies=__webpack_require__(98);var DESCRIPTORS=__webpack_require__(26);var fastKey=__webpack_require__(80).fastKey;var validate=__webpack_require__(113);var SIZE=DESCRIPTORS?'_s':'size';var getEntry=function(that,key){var index=fastKey(key);var entry;if(index!=='F')return that._i[index];for(entry=that._f;entry;entry=entry.n){if(entry.k==key)return entry;}};module.exports={getConstructor:function(wrapper,NAME,IS_MAP,ADDER){var C=wrapper(function(that,iterable){anInstance(that,C,NAME,'_i');that._t=NAME;that._i=create(null);that._f=undefined;that._l=undefined;that[SIZE]=0;if(iterable!=undefined)forOf(iterable,IS_MAP,that[ADDER],that);});redefineAll(C.prototype,{clear:function clear(){for(var that=validate(this,NAME),data=that._i,entry=that._f;entry;entry=entry.n){entry.r=true;if(entry.p)entry.p=entry.p.n=undefined;delete data[entry.i];}
that._f=that._l=undefined;that[SIZE]=0;},'delete':function(key){var that=validate(this,NAME);var entry=getEntry(that,key);if(entry){var next=entry.n;var prev=entry.p;delete that._i[entry.i];entry.r=true;if(prev)prev.n=next;if(next)next.p=prev;if(that._f==entry)that._f=next;if(that._l==entry)that._l=prev;that[SIZE]--;}return!!entry;},forEach:function forEach(callbackfn){validate(this,NAME);var f=ctx(callbackfn,arguments.length>1?arguments[1]:undefined,3);var entry;while(entry=entry?entry.n:this._f){f(entry.v,entry.k,this);while(entry&&entry.r)entry=entry.p;}},has:function has(key){return!!getEntry(validate(this,NAME),key);}});if(DESCRIPTORS)dP(C.prototype,'size',{get:function(){return validate(this,NAME)[SIZE];}});return C;},def:function(that,key,value){var entry=getEntry(that,key);var prev,index;if(entry){entry.v=value;}else{that._l=entry={i:index=fastKey(key,true),k:key,v:value,p:prev=that._l,n:undefined,r:false};if(!that._f)that._f=entry;if(prev)prev.n=entry;that[SIZE]++;if(index!=='F')that._i[index]=entry;}return that;},getEntry:getEntry,setStrong:function(C,NAME,IS_MAP){$iterDefine(C,NAME,function(iterated,kind){this._t=validate(iterated,NAME);this._k=kind;this._l=undefined;},function(){var that=this;var kind=that._k;var entry=that._l;while(entry&&entry.r)entry=entry.p;if(!that._t||!(that._l=entry=entry?entry.n:that._t._f)){that._t=undefined;return step(1);}
if(kind=='keys')return step(0,entry.k);if(kind=='values')return step(0,entry.v);return step(0,[entry.k,entry.v]);},IS_MAP?'entries':'values',!IS_MAP,true);setSpecies(NAME);}};}),(function(module,exports,__webpack_require__){"use strict";var strong=__webpack_require__(293);var validate=__webpack_require__(113);var SET='Set';module.exports=__webpack_require__(156)(SET,function(get){return function Set(){return get(this,arguments.length>0?arguments[0]:undefined);};},{add:function add(value){return strong.def(validate(this,SET),value=value===0?0:value,value);}},strong);}),(function(module,exports,__webpack_require__){"use strict";var each=__webpack_require__(66)(0);var redefine=__webpack_require__(49);var meta=__webpack_require__(80);var assign=__webpack_require__(274);var weak=__webpack_require__(296);var isObject=__webpack_require__(14);var fails=__webpack_require__(13);var validate=__webpack_require__(113);var WEAK_MAP='WeakMap';var getWeak=meta.getWeak;var isExtensible=Object.isExtensible;var uncaughtFrozenStore=weak.ufstore;var tmp={};var InternalMap;var wrapper=function(get){return function WeakMap(){return get(this,arguments.length>0?arguments[0]:undefined);};};var methods={get:function get(key){if(isObject(key)){var data=getWeak(key);if(data===true)return uncaughtFrozenStore(validate(this,WEAK_MAP)).get(key);return data?data[this._i]:undefined;}},set:function set(key,value){return weak.def(validate(this,WEAK_MAP),key,value);}};var $WeakMap=module.exports=__webpack_require__(156)(WEAK_MAP,wrapper,methods,weak,true,true);if(fails(function(){return new $WeakMap().set((Object.freeze||Object)(tmp),7).get(tmp)!=7;})){InternalMap=weak.getConstructor(wrapper,WEAK_MAP);assign(InternalMap.prototype,methods);meta.NEED=true;each(['delete','has','get','set'],function(key){var proto=$WeakMap.prototype;var method=proto[key];redefine(proto,key,function(a,b){if(isObject(a)&&!isExtensible(a)){if(!this._f)this._f=new InternalMap();var result=this._f[key](a,b);return key=='set'?this:result;}return method.call(this,a,b);});});}}),(function(module,exports,__webpack_require__){"use strict";var redefineAll=__webpack_require__(101);var getWeak=__webpack_require__(80).getWeak;var anObject=__webpack_require__(8);var isObject=__webpack_require__(14);var anInstance=__webpack_require__(99);var forOf=__webpack_require__(100);var createArrayMethod=__webpack_require__(66);var $has=__webpack_require__(51);var validate=__webpack_require__(113);var arrayFind=createArrayMethod(5);var arrayFindIndex=createArrayMethod(6);var id=0;var uncaughtFrozenStore=function(that){return that._l||(that._l=new UncaughtFrozenStore());};var UncaughtFrozenStore=function(){this.a=[];};var findUncaughtFrozen=function(store,key){return arrayFind(store.a,function(it){return it[0]===key;});};UncaughtFrozenStore.prototype={get:function(key){var entry=findUncaughtFrozen(this,key);if(entry)return entry[1];},has:function(key){return!!findUncaughtFrozen(this,key);},set:function(key,value){var entry=findUncaughtFrozen(this,key);if(entry)entry[1]=value;else this.a.push([key,value]);},'delete':function(key){var index=arrayFindIndex(this.a,function(it){return it[0]===key;});if(~index)this.a.splice(index,1);return!!~index;}};module.exports={getConstructor:function(wrapper,NAME,IS_MAP,ADDER){var C=wrapper(function(that,iterable){anInstance(that,C,NAME,'_i');that._t=NAME;that._i=id++;that._l=undefined;if(iterable!=undefined)forOf(iterable,IS_MAP,that[ADDER],that);});redefineAll(C.prototype,{'delete':function(key){if(!isObject(key))return false;var data=getWeak(key);if(data===true)return uncaughtFrozenStore(validate(this,NAME))['delete'](key);return data&&$has(data,this._i)&&delete data[this._i];},has:function has(key){if(!isObject(key))return false;var data=getWeak(key);if(data===true)return uncaughtFrozenStore(validate(this,NAME)).has(key);return data&&$has(data,this._i);}});return C;},def:function(that,key,value){var data=getWeak(anObject(key),true);if(data===true)uncaughtFrozenStore(that).set(key,value);else data[that._i]=value;return that;},ufstore:uncaughtFrozenStore};}),(function(module,exports,__webpack_require__){var toInteger=__webpack_require__(60);var toLength=__webpack_require__(22);module.exports=function(it){if(it===undefined)return 0;var number=toInteger(it);var length=toLength(number);if(number!==length)throw RangeError('Wrong length!');return length;};}),(function(module,exports,__webpack_require__){var gOPN=__webpack_require__(97);var gOPS=__webpack_require__(148);var anObject=__webpack_require__(8);var Reflect=__webpack_require__(11).Reflect;module.exports=Reflect&&Reflect.ownKeys||function ownKeys(it){var keys=gOPN.f(anObject(it));var getSymbols=gOPS.f;return getSymbols?keys.concat(getSymbols(it)):keys;};}),(function(module,exports,__webpack_require__){"use strict";var isArray=__webpack_require__(149);var isObject=__webpack_require__(14);var toLength=__webpack_require__(22);var ctx=__webpack_require__(58);var IS_CONCAT_SPREADABLE=__webpack_require__(19)('isConcatSpreadable');function flattenIntoArray(target,original,source,sourceLen,start,depth,mapper,thisArg){var targetIndex=start;var sourceIndex=0;var mapFn=mapper?ctx(mapper,thisArg,3):false;var element,spreadable;while(sourceIndex<sourceLen){if(sourceIndex in source){element=mapFn?mapFn(source[sourceIndex],sourceIndex,original):source[sourceIndex];spreadable=false;if(isObject(element)){spreadable=element[IS_CONCAT_SPREADABLE];spreadable=spreadable!==undefined?!!spreadable:isArray(element);}
if(spreadable&&depth>0){targetIndex=flattenIntoArray(target,original,element,toLength(element.length),targetIndex,depth-1)-1;}else{if(targetIndex>=0x1fffffffffffff)throw TypeError();target[targetIndex]=element;}
targetIndex++;}
sourceIndex++;}
return targetIndex;}
module.exports=flattenIntoArray;}),(function(module,exports,__webpack_require__){var toLength=__webpack_require__(22);var repeat=__webpack_require__(189);var defined=__webpack_require__(64);module.exports=function(that,maxLength,fillString,left){var S=String(defined(that));var stringLength=S.length;var fillStr=fillString===undefined?' ':String(fillString);var intMaxLength=toLength(maxLength);if(intMaxLength<=stringLength||fillStr=='')return S;var fillLen=intMaxLength-stringLength;var stringFiller=repeat.call(fillStr,Math.ceil(fillLen/fillStr.length));if(stringFiller.length>fillLen)stringFiller=stringFiller.slice(0,fillLen);return left?stringFiller+S:S+stringFiller;};}),(function(module,exports,__webpack_require__){var getKeys=__webpack_require__(94);var toIObject=__webpack_require__(52);var isEnum=__webpack_require__(124).f;module.exports=function(isEntries){return function(it){var O=toIObject(it);var keys=getKeys(O);var length=keys.length;var i=0;var result=[];var key;while(length>i)if(isEnum.call(O,key=keys[i++])){result.push(isEntries?[key,O[key]]:O[key]);}return result;};};}),(function(module,exports,__webpack_require__){var classof=__webpack_require__(110);var from=__webpack_require__(303);module.exports=function(NAME){return function toJSON(){if(classof(this)!=NAME)throw TypeError(NAME+"#toJSON isn't generic");return from(this);};};}),(function(module,exports,__webpack_require__){var forOf=__webpack_require__(100);module.exports=function(iter,ITERATOR){var result=[];forOf(iter,false,result.push,result,ITERATOR);return result;};}),(function(module,exports){module.exports=Math.scale||function scale(x,inLow,inHigh,outLow,outHigh){if(arguments.length===0||x!=x||inLow!=inLow||inHigh!=inHigh||outLow!=outLow||outHigh!=outHigh)return NaN;if(x===Infinity||x===-Infinity)return x;return(x-inLow)*(outHigh-outLow)/(inHigh-inLow)+outLow;};}),(function(module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return toString.call(arr)=='[object Array]';};}),(function(module,exports,__webpack_require__){var v1=__webpack_require__(642);var v4=__webpack_require__(161);var uuid=v4;uuid.v1=v1;uuid.v4=v4;module.exports=uuid;}),(function(module,exports){var getRandomValues=(typeof(crypto)!='undefined'&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto))||(typeof(msCrypto)!='undefined'&&typeof window.msCrypto.getRandomValues=='function'&&msCrypto.getRandomValues.bind(msCrypto));if(getRandomValues){var rnds8=new Uint8Array(16);module.exports=function whatwgRNG(){getRandomValues(rnds8);return rnds8;};}else{var rnds=new Array(16);module.exports=function mathRNG(){for(var i=0,r;i<16;i++){if((i&0x03)===0)r=Math.random()*0x100000000;rnds[i]=r>>>((i&0x03)<<3)&0xff;}
return rnds;};}}),(function(module,exports){var byteToHex=[];for(var i=0;i<256;++i){byteToHex[i]=(i+0x100).toString(16).substr(1);}
function bytesToUuid(buf,offset){var i=offset||0;var bth=byteToHex;return([bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],'-',bth[buf[i++]],bth[buf[i++]],'-',bth[buf[i++]],bth[buf[i++]],'-',bth[buf[i++]],bth[buf[i++]],'-',bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]]]).join('');}
module.exports=bytesToUuid;}),(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__["a"]=({"protocol":"WebDollar","name":"fallback nodes","nodes":[{"addr":["https://webd.5q.ro:3333"]},{"addr":["https://webdollar-vps1.ddns.net:80"]},{"addr":["https://node1.petreus.ro:443"]},{"addr":["https://node2.petreus.ro:443"]},{"addr":["https://node3.petreus.ro:443"]},{"addr":["https://node4.petreus.ro:443"]},{"addr":["https://node5.petreus.ro:443"]},{"addr":["https://node6.petreus.ro:443"]},{"addr":["https://node7.petreus.ro:443"]},{"addr":["https://node8.petreus.ro:443"]},{"addr":["https://node9.petreus.ro:443"]},{"addr":["https://node10.petreus.ro:443"]},{"addr":["https://node.timi.ro:443"]},{"addr":["https://node1.timi.ro:443"]},{"addr":["https://node2.timi.ro:443"]},{"addr":["https://node3.timi.ro:443"]},{"addr":["https://node4.timi.ro:443"]},{"addr":["https://node5.timi.ro:443"]},{"addr":["https://node6.timi.ro:443"]},{"addr":["https://node7.timi.ro:443"]},{"addr":["https://node8.timi.ro:443"]},{"addr":["https://node9.timi.ro:443"]},{"addr":["https://node10.timi.ro:443"]},{"addr":["https://node11.timi.ro:443"]},{"addr":["https://node12.timi.ro:443"]},{"addr":["https://node13.timi.ro:443"]},{"addr":["https://node14.timi.ro:443"]},{"addr":["https://node15.timi.ro:443"]},{"addr":["https://node16.timi.ro:443"]},{"addr":["https://node1.webdollarminingpool.com:443"]},{"addr":["https://node2.webdollarminingpool.com:443"]},{"addr":["https://node3.webdollarminingpool.com:443"]},{"addr":["https://node4.webdollarminingpool.com:443"]},{"addr":["https://node5.webdollarminingpool.com:443"]},{"addr":["https://node6.webdollarminingpool.com:443"]},{"addr":["https://node7.webdollarminingpool.com:443"]},{"addr":["https://node8.webdollarminingpool.com:443"]},{"addr":["https://node9.webdollarminingpool.com:443"]},{"addr":["https://node10.webdollarminingpool.com:443"]},{"addr":["https://node11.webdollarminingpool.com:443"]},{"addr":["https://node12.webdollarminingpool.com:443"]},{"addr":["https://node13.webdollarminingpool.com:443"]},{"addr":["https://node14.webdollarminingpool.com:443"]},{"addr":["https://node15.webdollarminingpool.com:443"]},{"addr":["https://falx.romeonet.ro:65001"]},{"addr":["https://romeonet.ddns.net:65101"]},{"addr":["https://cryptocoingb.ddns.net:8080"]},{"addr":["https://cryptocoingb.ddns.net:8081"]},],"nodes_testnet":[{"addr":["http://testnet1.hoste.ro:8000"]},{"addr":["http://testnet2.hoste.ro:8001"]},{"addr":["http://testnet2.hoste.ro:8002"]},{"addr":["http://86.126.138.61:2024"]},]});}),(function(module,exports,__webpack_require__){var basex=__webpack_require__(647)
var ALPHABET='123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'
module.exports=basex(ALPHABET)}),(function(module,exports,__webpack_require__){"use strict";var Buffer=__webpack_require__(4).Buffer
var Transform=__webpack_require__(67).Transform
var inherits=__webpack_require__(7)
function throwIfNotStringOrBuffer(val,prefix){if(!Buffer.isBuffer(val)&&typeof val!=='string'){throw new TypeError(prefix+' must be a string or a buffer')}}
function HashBase(blockSize){Transform.call(this)
this._block=Buffer.allocUnsafe(blockSize)
this._blockSize=blockSize
this._blockOffset=0
this._length=[0,0,0,0]
this._finalized=false}
inherits(HashBase,Transform)
HashBase.prototype._transform=function(chunk,encoding,callback){var error=null
try{this.update(chunk,encoding)}catch(err){error=err}
callback(error)}
HashBase.prototype._flush=function(callback){var error=null
try{this.push(this.digest())}catch(err){error=err}
callback(error)}
HashBase.prototype.update=function(data,encoding){throwIfNotStringOrBuffer(data,'Data')
if(this._finalized)throw new Error('Digest already called')
if(!Buffer.isBuffer(data))data=Buffer.from(data,encoding)
var block=this._block
var offset=0
while(this._blockOffset+data.length-offset>=this._blockSize){for(var i=this._blockOffset;i<this._blockSize;)block[i++]=data[offset++]
this._update()
this._blockOffset=0}
while(offset<data.length)block[this._blockOffset++]=data[offset++]
for(var j=0,carry=data.length*8;carry>0;++j){this._length[j]+=carry
carry=(this._length[j]/0x0100000000)|0
if(carry>0)this._length[j]-=0x0100000000*carry}
return this}
HashBase.prototype._update=function(){throw new Error('_update is not implemented')}
HashBase.prototype.digest=function(encoding){if(this._finalized)throw new Error('Digest already called')
this._finalized=true
var digest=this._digest()
if(encoding!==undefined)digest=digest.toString(encoding)
this._block.fill(0)
this._blockOffset=0
for(var i=0;i<4;++i)this._length[i]=0
return digest}
HashBase.prototype._digest=function(){throw new Error('_digest is not implemented')}
module.exports=HashBase}),(function(module,exports,__webpack_require__){"use strict";(function(global,process){var pna=__webpack_require__(162);module.exports=Readable;var isArray=__webpack_require__(305);var Duplex;Readable.ReadableState=ReadableState;var EE=__webpack_require__(104).EventEmitter;var EElistenerCount=function(emitter,type){return emitter.listeners(type).length;};var Stream=__webpack_require__(313);var Buffer=__webpack_require__(4).Buffer;var OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk);}
function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array;}
var util=__webpack_require__(114);util.inherits=__webpack_require__(7);var debugUtil=__webpack_require__(649);var debug=void 0;if(debugUtil&&debugUtil.debuglog){debug=debugUtil.debuglog('stream');}else{debug=function(){};}
var BufferList=__webpack_require__(650);var destroyImpl=__webpack_require__(314);var StringDecoder;util.inherits(Readable,Stream);var kProxyEvents=['error','close','destroy','pause','resume'];function prependListener(emitter,event,fn){if(typeof emitter.prependListener==='function')return emitter.prependListener(event,fn);if(!emitter._events||!emitter._events[event])emitter.on(event,fn);else if(isArray(emitter._events[event]))emitter._events[event].unshift(fn);else emitter._events[event]=[fn,emitter._events[event]];}
function ReadableState(options,stream){Duplex=Duplex||__webpack_require__(105);options=options||{};var isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode;if(isDuplex)this.objectMode=this.objectMode||!!options.readableObjectMode;var hwm=options.highWaterMark;var readableHwm=options.readableHighWaterMark;var defaultHwm=this.objectMode?16:16*1024;if(hwm||hwm===0)this.highWaterMark=hwm;else if(isDuplex&&(readableHwm||readableHwm===0))this.highWaterMark=readableHwm;else this.highWaterMark=defaultHwm;this.highWaterMark=Math.floor(this.highWaterMark);this.buffer=new BufferList();this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.destroyed=false;this.defaultEncoding=options.defaultEncoding||'utf8';this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(options.encoding){if(!StringDecoder)StringDecoder=__webpack_require__(210).StringDecoder;this.decoder=new StringDecoder(options.encoding);this.encoding=options.encoding;}}
function Readable(options){Duplex=Duplex||__webpack_require__(105);if(!(this instanceof Readable))return new Readable(options);this._readableState=new ReadableState(options,this);this.readable=true;if(options){if(typeof options.read==='function')this._read=options.read;if(typeof options.destroy==='function')this._destroy=options.destroy;}
Stream.call(this);}
Object.defineProperty(Readable.prototype,'destroyed',{get:function(){if(this._readableState===undefined){return false;}
return this._readableState.destroyed;},set:function(value){if(!this._readableState){return;}
this._readableState.destroyed=value;}});Readable.prototype.destroy=destroyImpl.destroy;Readable.prototype._undestroy=destroyImpl.undestroy;Readable.prototype._destroy=function(err,cb){this.push(null);cb(err);};Readable.prototype.push=function(chunk,encoding){var state=this._readableState;var skipChunkCheck;if(!state.objectMode){if(typeof chunk==='string'){encoding=encoding||state.defaultEncoding;if(encoding!==state.encoding){chunk=Buffer.from(chunk,encoding);encoding='';}
skipChunkCheck=true;}}else{skipChunkCheck=true;}
return readableAddChunk(this,chunk,encoding,false,skipChunkCheck);};Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,true,false);};function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){var state=stream._readableState;if(chunk===null){state.reading=false;onEofChunk(stream,state);}else{var er;if(!skipChunkCheck)er=chunkInvalid(state,chunk);if(er){stream.emit('error',er);}else if(state.objectMode||chunk&&chunk.length>0){if(typeof chunk!=='string'&&!state.objectMode&&Object.getPrototypeOf(chunk)!==Buffer.prototype){chunk=_uint8ArrayToBuffer(chunk);}
if(addToFront){if(state.endEmitted)stream.emit('error',new Error('stream.unshift() after end event'));else addChunk(stream,state,chunk,true);}else if(state.ended){stream.emit('error',new Error('stream.push() after EOF'));}else{state.reading=false;if(state.decoder&&!encoding){chunk=state.decoder.write(chunk);if(state.objectMode||chunk.length!==0)addChunk(stream,state,chunk,false);else maybeReadMore(stream,state);}else{addChunk(stream,state,chunk,false);}}}else if(!addToFront){state.reading=false;}}
return needMoreData(state);}
function addChunk(stream,state,chunk,addToFront){if(state.flowing&&state.length===0&&!state.sync){stream.emit('data',chunk);stream.read(0);}else{state.length+=state.objectMode?1:chunk.length;if(addToFront)state.buffer.unshift(chunk);else state.buffer.push(chunk);if(state.needReadable)emitReadable(stream);}
maybeReadMore(stream,state);}
function chunkInvalid(state,chunk){var er;if(!_isUint8Array(chunk)&&typeof chunk!=='string'&&chunk!==undefined&&!state.objectMode){er=new TypeError('Invalid non-string/buffer chunk');}
return er;}
function needMoreData(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||state.length===0);}
Readable.prototype.isPaused=function(){return this._readableState.flowing===false;};Readable.prototype.setEncoding=function(enc){if(!StringDecoder)StringDecoder=__webpack_require__(210).StringDecoder;this._readableState.decoder=new StringDecoder(enc);this._readableState.encoding=enc;return this;};var MAX_HWM=0x800000;function computeNewHighWaterMark(n){if(n>=MAX_HWM){n=MAX_HWM;}else{n--;n|=n>>>1;n|=n>>>2;n|=n>>>4;n|=n>>>8;n|=n>>>16;n++;}
return n;}
function howMuchToRead(n,state){if(n<=0||state.length===0&&state.ended)return 0;if(state.objectMode)return 1;if(n!==n){if(state.flowing&&state.length)return state.buffer.head.data.length;else return state.length;}
if(n>state.highWaterMark)state.highWaterMark=computeNewHighWaterMark(n);if(n<=state.length)return n;if(!state.ended){state.needReadable=true;return 0;}
return state.length;}
Readable.prototype.read=function(n){debug('read',n);n=parseInt(n,10);var state=this._readableState;var nOrig=n;if(n!==0)state.emittedReadable=false;if(n===0&&state.needReadable&&(state.length>=state.highWaterMark||state.ended)){debug('read: emitReadable',state.length,state.ended);if(state.length===0&&state.ended)endReadable(this);else emitReadable(this);return null;}
n=howMuchToRead(n,state);if(n===0&&state.ended){if(state.length===0)endReadable(this);return null;}
var doRead=state.needReadable;debug('need readable',doRead);if(state.length===0||state.length-n<state.highWaterMark){doRead=true;debug('length less than watermark',doRead);}
if(state.ended||state.reading){doRead=false;debug('reading or ended',doRead);}else if(doRead){debug('do read');state.reading=true;state.sync=true;if(state.length===0)state.needReadable=true;this._read(state.highWaterMark);state.sync=false;if(!state.reading)n=howMuchToRead(nOrig,state);}
var ret;if(n>0)ret=fromList(n,state);else ret=null;if(ret===null){state.needReadable=true;n=0;}else{state.length-=n;}
if(state.length===0){if(!state.ended)state.needReadable=true;if(nOrig!==n&&state.ended)endReadable(this);}
if(ret!==null)this.emit('data',ret);return ret;};function onEofChunk(stream,state){if(state.ended)return;if(state.decoder){var chunk=state.decoder.end();if(chunk&&chunk.length){state.buffer.push(chunk);state.length+=state.objectMode?1:chunk.length;}}
state.ended=true;emitReadable(stream);}
function emitReadable(stream){var state=stream._readableState;state.needReadable=false;if(!state.emittedReadable){debug('emitReadable',state.flowing);state.emittedReadable=true;if(state.sync)pna.nextTick(emitReadable_,stream);else emitReadable_(stream);}}
function emitReadable_(stream){debug('emit readable');stream.emit('readable');flow(stream);}
function maybeReadMore(stream,state){if(!state.readingMore){state.readingMore=true;pna.nextTick(maybeReadMore_,stream,state);}}
function maybeReadMore_(stream,state){var len=state.length;while(!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark){debug('maybeReadMore read 0');stream.read(0);if(len===state.length)
break;else len=state.length;}
state.readingMore=false;}
Readable.prototype._read=function(n){this.emit('error',new Error('_read() is not implemented'));};Readable.prototype.pipe=function(dest,pipeOpts){var src=this;var state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest);break;}
state.pipesCount+=1;debug('pipe count=%d opts=%j',state.pipesCount,pipeOpts);var doEnd=(!pipeOpts||pipeOpts.end!==false)&&dest!==process.stdout&&dest!==process.stderr;var endFn=doEnd?onend:unpipe;if(state.endEmitted)pna.nextTick(endFn);else src.once('end',endFn);dest.on('unpipe',onunpipe);function onunpipe(readable,unpipeInfo){debug('onunpipe');if(readable===src){if(unpipeInfo&&unpipeInfo.hasUnpiped===false){unpipeInfo.hasUnpiped=true;cleanup();}}}
function onend(){debug('onend');dest.end();}
var ondrain=pipeOnDrain(src);dest.on('drain',ondrain);var cleanedUp=false;function cleanup(){debug('cleanup');dest.removeListener('close',onclose);dest.removeListener('finish',onfinish);dest.removeListener('drain',ondrain);dest.removeListener('error',onerror);dest.removeListener('unpipe',onunpipe);src.removeListener('end',onend);src.removeListener('end',unpipe);src.removeListener('data',ondata);cleanedUp=true;if(state.awaitDrain&&(!dest._writableState||dest._writableState.needDrain))ondrain();}
var increasedAwaitDrain=false;src.on('data',ondata);function ondata(chunk){debug('ondata');increasedAwaitDrain=false;var ret=dest.write(chunk);if(false===ret&&!increasedAwaitDrain){if((state.pipesCount===1&&state.pipes===dest||state.pipesCount>1&&indexOf(state.pipes,dest)!==-1)&&!cleanedUp){debug('false write response, pause',src._readableState.awaitDrain);src._readableState.awaitDrain++;increasedAwaitDrain=true;}
src.pause();}}
function onerror(er){debug('onerror',er);unpipe();dest.removeListener('error',onerror);if(EElistenerCount(dest,'error')===0)dest.emit('error',er);}
prependListener(dest,'error',onerror);function onclose(){dest.removeListener('finish',onfinish);unpipe();}
dest.once('close',onclose);function onfinish(){debug('onfinish');dest.removeListener('close',onclose);unpipe();}
dest.once('finish',onfinish);function unpipe(){debug('unpipe');src.unpipe(dest);}
dest.emit('pipe',src);if(!state.flowing){debug('pipe resume');src.resume();}
return dest;};function pipeOnDrain(src){return function(){var state=src._readableState;debug('pipeOnDrain',state.awaitDrain);if(state.awaitDrain)state.awaitDrain--;if(state.awaitDrain===0&&EElistenerCount(src,'data')){state.flowing=true;flow(src);}};}
Readable.prototype.unpipe=function(dest){var state=this._readableState;var unpipeInfo={hasUnpiped:false};if(state.pipesCount===0)return this;if(state.pipesCount===1){if(dest&&dest!==state.pipes)return this;if(!dest)dest=state.pipes;state.pipes=null;state.pipesCount=0;state.flowing=false;if(dest)dest.emit('unpipe',this,unpipeInfo);return this;}
if(!dest){var dests=state.pipes;var len=state.pipesCount;state.pipes=null;state.pipesCount=0;state.flowing=false;for(var i=0;i<len;i++){dests[i].emit('unpipe',this,unpipeInfo);}return this;}
var index=indexOf(state.pipes,dest);if(index===-1)return this;state.pipes.splice(index,1);state.pipesCount-=1;if(state.pipesCount===1)state.pipes=state.pipes[0];dest.emit('unpipe',this,unpipeInfo);return this;};Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if(ev==='data'){if(this._readableState.flowing!==false)this.resume();}else if(ev==='readable'){var state=this._readableState;if(!state.endEmitted&&!state.readableListening){state.readableListening=state.needReadable=true;state.emittedReadable=false;if(!state.reading){pna.nextTick(nReadingNextTick,this);}else if(state.length){emitReadable(this);}}}
return res;};Readable.prototype.addListener=Readable.prototype.on;function nReadingNextTick(self){debug('readable nexttick read 0');self.read(0);}
Readable.prototype.resume=function(){var state=this._readableState;if(!state.flowing){debug('resume');state.flowing=true;resume(this,state);}
return this;};function resume(stream,state){if(!state.resumeScheduled){state.resumeScheduled=true;pna.nextTick(resume_,stream,state);}}
function resume_(stream,state){if(!state.reading){debug('resume read 0');stream.read(0);}
state.resumeScheduled=false;state.awaitDrain=0;stream.emit('resume');flow(stream);if(state.flowing&&!state.reading)stream.read(0);}
Readable.prototype.pause=function(){debug('call pause flowing=%j',this._readableState.flowing);if(false!==this._readableState.flowing){debug('pause');this._readableState.flowing=false;this.emit('pause');}
return this;};function flow(stream){var state=stream._readableState;debug('flow',state.flowing);while(state.flowing&&stream.read()!==null){}}
Readable.prototype.wrap=function(stream){var _this=this;var state=this._readableState;var paused=false;stream.on('end',function(){debug('wrapped end');if(state.decoder&&!state.ended){var chunk=state.decoder.end();if(chunk&&chunk.length)_this.push(chunk);}
_this.push(null);});stream.on('data',function(chunk){debug('wrapped data');if(state.decoder)chunk=state.decoder.write(chunk);if(state.objectMode&&(chunk===null||chunk===undefined))return;else if(!state.objectMode&&(!chunk||!chunk.length))return;var ret=_this.push(chunk);if(!ret){paused=true;stream.pause();}});for(var i in stream){if(this[i]===undefined&&typeof stream[i]==='function'){this[i]=function(method){return function(){return stream[method].apply(stream,arguments);};}(i);}}
for(var n=0;n<kProxyEvents.length;n++){stream.on(kProxyEvents[n],this.emit.bind(this,kProxyEvents[n]));}
this._read=function(n){debug('wrapped _read',n);if(paused){paused=false;stream.resume();}};return this;};Object.defineProperty(Readable.prototype,'readableHighWaterMark',{enumerable:false,get:function(){return this._readableState.highWaterMark;}});Readable._fromList=fromList;function fromList(n,state){if(state.length===0)return null;var ret;if(state.objectMode)ret=state.buffer.shift();else if(!n||n>=state.length){if(state.decoder)ret=state.buffer.join('');else if(state.buffer.length===1)ret=state.buffer.head.data;else ret=state.buffer.concat(state.length);state.buffer.clear();}else{ret=fromListPartial(n,state.buffer,state.decoder);}
return ret;}
function fromListPartial(n,list,hasStrings){var ret;if(n<list.head.data.length){ret=list.head.data.slice(0,n);list.head.data=list.head.data.slice(n);}else if(n===list.head.data.length){ret=list.shift();}else{ret=hasStrings?copyFromBufferString(n,list):copyFromBuffer(n,list);}
return ret;}
function copyFromBufferString(n,list){var p=list.head;var c=1;var ret=p.data;n-=ret.length;while(p=p.next){var str=p.data;var nb=n>str.length?str.length:n;if(nb===str.length)ret+=str;else ret+=str.slice(0,n);n-=nb;if(n===0){if(nb===str.length){++c;if(p.next)list.head=p.next;else list.head=list.tail=null;}else{list.head=p;p.data=str.slice(nb);}
break;}
++c;}
list.length-=c;return ret;}
function copyFromBuffer(n,list){var ret=Buffer.allocUnsafe(n);var p=list.head;var c=1;p.data.copy(ret);n-=p.data.length;while(p=p.next){var buf=p.data;var nb=n>buf.length?buf.length:n;buf.copy(ret,ret.length-n,0,nb);n-=nb;if(n===0){if(nb===buf.length){++c;if(p.next)list.head=p.next;else list.head=list.tail=null;}else{list.head=p;p.data=buf.slice(nb);}
break;}
++c;}
list.length-=c;return ret;}
function endReadable(stream){var state=stream._readableState;if(state.length>0)throw new Error('"endReadable()" called on non-empty stream');if(!state.endEmitted){state.ended=true;pna.nextTick(endReadableNT,state,stream);}}
function endReadableNT(state,stream){if(!state.endEmitted&&state.length===0){state.endEmitted=true;stream.readable=false;stream.emit('end');}}
function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++){if(xs[i]===x)return i;}
return-1;}}.call(exports,__webpack_require__(10),__webpack_require__(20)))}),(function(module,exports,__webpack_require__){module.exports=__webpack_require__(104).EventEmitter;}),(function(module,exports,__webpack_require__){"use strict";var pna=__webpack_require__(162);function destroy(err,cb){var _this=this;var readableDestroyed=this._readableState&&this._readableState.destroyed;var writableDestroyed=this._writableState&&this._writableState.destroyed;if(readableDestroyed||writableDestroyed){if(cb){cb(err);}else if(err&&(!this._writableState||!this._writableState.errorEmitted)){pna.nextTick(emitErrorNT,this,err);}
return this;}
if(this._readableState){this._readableState.destroyed=true;}
if(this._writableState){this._writableState.destroyed=true;}
this._destroy(err||null,function(err){if(!cb&&err){pna.nextTick(emitErrorNT,_this,err);if(_this._writableState){_this._writableState.errorEmitted=true;}}else if(cb){cb(err);}});return this;}
function undestroy(){if(this._readableState){this._readableState.destroyed=false;this._readableState.reading=false;this._readableState.ended=false;this._readableState.endEmitted=false;}
if(this._writableState){this._writableState.destroyed=false;this._writableState.ended=false;this._writableState.ending=false;this._writableState.finished=false;this._writableState.errorEmitted=false;}}
function emitErrorNT(self,err){self.emit('error',err);}
module.exports={destroy:destroy,undestroy:undestroy};}),(function(module,exports,__webpack_require__){"use strict";module.exports=Transform;var Duplex=__webpack_require__(105);var util=__webpack_require__(114);util.inherits=__webpack_require__(7);util.inherits(Transform,Duplex);function afterTransform(er,data){var ts=this._transformState;ts.transforming=false;var cb=ts.writecb;if(!cb){return this.emit('error',new Error('write callback called multiple times'));}
ts.writechunk=null;ts.writecb=null;if(data!=null)
this.push(data);cb(er);var rs=this._readableState;rs.reading=false;if(rs.needReadable||rs.length<rs.highWaterMark){this._read(rs.highWaterMark);}}
function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options);this._transformState={afterTransform:afterTransform.bind(this),needTransform:false,transforming:false,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=true;this._readableState.sync=false;if(options){if(typeof options.transform==='function')this._transform=options.transform;if(typeof options.flush==='function')this._flush=options.flush;}
this.on('prefinish',prefinish);}
function prefinish(){var _this=this;if(typeof this._flush==='function'){this._flush(function(er,data){done(_this,er,data);});}else{done(this,null,null);}}
Transform.prototype.push=function(chunk,encoding){this._transformState.needTransform=false;return Duplex.prototype.push.call(this,chunk,encoding);};Transform.prototype._transform=function(chunk,encoding,cb){throw new Error('_transform() is not implemented');};Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;ts.writecb=cb;ts.writechunk=chunk;ts.writeencoding=encoding;if(!ts.transforming){var rs=this._readableState;if(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)this._read(rs.highWaterMark);}};Transform.prototype._read=function(n){var ts=this._transformState;if(ts.writechunk!==null&&ts.writecb&&!ts.transforming){ts.transforming=true;this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform);}else{ts.needTransform=true;}};Transform.prototype._destroy=function(err,cb){var _this2=this;Duplex.prototype._destroy.call(this,err,function(err2){cb(err2);_this2.emit('close');});};function done(stream,er,data){if(er)return stream.emit('error',er);if(data!=null)
stream.push(data);if(stream._writableState.length)throw new Error('Calling transform done when ws.length != 0');if(stream._transformState.transforming)throw new Error('Calling transform done when still transforming');return stream.push(null);}}),(function(module,exports,__webpack_require__){var inherits=__webpack_require__(7)
var Hash=__webpack_require__(115)
var Buffer=__webpack_require__(4).Buffer
var K=[0x428A2F98,0x71374491,0xB5C0FBCF,0xE9B5DBA5,0x3956C25B,0x59F111F1,0x923F82A4,0xAB1C5ED5,0xD807AA98,0x12835B01,0x243185BE,0x550C7DC3,0x72BE5D74,0x80DEB1FE,0x9BDC06A7,0xC19BF174,0xE49B69C1,0xEFBE4786,0x0FC19DC6,0x240CA1CC,0x2DE92C6F,0x4A7484AA,0x5CB0A9DC,0x76F988DA,0x983E5152,0xA831C66D,0xB00327C8,0xBF597FC7,0xC6E00BF3,0xD5A79147,0x06CA6351,0x14292967,0x27B70A85,0x2E1B2138,0x4D2C6DFC,0x53380D13,0x650A7354,0x766A0ABB,0x81C2C92E,0x92722C85,0xA2BFE8A1,0xA81A664B,0xC24B8B70,0xC76C51A3,0xD192E819,0xD6990624,0xF40E3585,0x106AA070,0x19A4C116,0x1E376C08,0x2748774C,0x34B0BCB5,0x391C0CB3,0x4ED8AA4A,0x5B9CCA4F,0x682E6FF3,0x748F82EE,0x78A5636F,0x84C87814,0x8CC70208,0x90BEFFFA,0xA4506CEB,0xBEF9A3F7,0xC67178F2]
var W=new Array(64)
function Sha256(){this.init()
this._w=W
Hash.call(this,64,56)}
inherits(Sha256,Hash)
Sha256.prototype.init=function(){this._a=0x6a09e667
this._b=0xbb67ae85
this._c=0x3c6ef372
this._d=0xa54ff53a
this._e=0x510e527f
this._f=0x9b05688c
this._g=0x1f83d9ab
this._h=0x5be0cd19
return this}
function ch(x,y,z){return z^(x&(y^z))}
function maj(x,y,z){return(x&y)|(z&(x|y))}
function sigma0(x){return(x>>>2|x<<30)^(x>>>13|x<<19)^(x>>>22|x<<10)}
function sigma1(x){return(x>>>6|x<<26)^(x>>>11|x<<21)^(x>>>25|x<<7)}
function gamma0(x){return(x>>>7|x<<25)^(x>>>18|x<<14)^(x>>>3)}
function gamma1(x){return(x>>>17|x<<15)^(x>>>19|x<<13)^(x>>>10)}
Sha256.prototype._update=function(M){var W=this._w
var a=this._a|0
var b=this._b|0
var c=this._c|0
var d=this._d|0
var e=this._e|0
var f=this._f|0
var g=this._g|0
var h=this._h|0
for(var i=0;i<16;++i)W[i]=M.readInt32BE(i*4)
for(;i<64;++i)W[i]=(gamma1(W[i-2])+W[i-7]+gamma0(W[i-15])+W[i-16])|0
for(var j=0;j<64;++j){var T1=(h+sigma1(e)+ch(e,f,g)+K[j]+W[j])|0
var T2=(sigma0(a)+maj(a,b,c))|0
h=g
g=f
f=e
e=(d+T1)|0
d=c
c=b
b=a
a=(T1+T2)|0}
this._a=(a+this._a)|0
this._b=(b+this._b)|0
this._c=(c+this._c)|0
this._d=(d+this._d)|0
this._e=(e+this._e)|0
this._f=(f+this._f)|0
this._g=(g+this._g)|0
this._h=(h+this._h)|0}
Sha256.prototype._hash=function(){var H=Buffer.allocUnsafe(32)
H.writeInt32BE(this._a,0)
H.writeInt32BE(this._b,4)
H.writeInt32BE(this._c,8)
H.writeInt32BE(this._d,12)
H.writeInt32BE(this._e,16)
H.writeInt32BE(this._f,20)
H.writeInt32BE(this._g,24)
H.writeInt32BE(this._h,28)
return H}
module.exports=Sha256}),(function(module,exports,__webpack_require__){var inherits=__webpack_require__(7)
var Hash=__webpack_require__(115)
var Buffer=__webpack_require__(4).Buffer
var K=[0x428a2f98,0xd728ae22,0x71374491,0x23ef65cd,0xb5c0fbcf,0xec4d3b2f,0xe9b5dba5,0x8189dbbc,0x3956c25b,0xf348b538,0x59f111f1,0xb605d019,0x923f82a4,0xaf194f9b,0xab1c5ed5,0xda6d8118,0xd807aa98,0xa3030242,0x12835b01,0x45706fbe,0x243185be,0x4ee4b28c,0x550c7dc3,0xd5ffb4e2,0x72be5d74,0xf27b896f,0x80deb1fe,0x3b1696b1,0x9bdc06a7,0x25c71235,0xc19bf174,0xcf692694,0xe49b69c1,0x9ef14ad2,0xefbe4786,0x384f25e3,0x0fc19dc6,0x8b8cd5b5,0x240ca1cc,0x77ac9c65,0x2de92c6f,0x592b0275,0x4a7484aa,0x6ea6e483,0x5cb0a9dc,0xbd41fbd4,0x76f988da,0x831153b5,0x983e5152,0xee66dfab,0xa831c66d,0x2db43210,0xb00327c8,0x98fb213f,0xbf597fc7,0xbeef0ee4,0xc6e00bf3,0x3da88fc2,0xd5a79147,0x930aa725,0x06ca6351,0xe003826f,0x14292967,0x0a0e6e70,0x27b70a85,0x46d22ffc,0x2e1b2138,0x5c26c926,0x4d2c6dfc,0x5ac42aed,0x53380d13,0x9d95b3df,0x650a7354,0x8baf63de,0x766a0abb,0x3c77b2a8,0x81c2c92e,0x47edaee6,0x92722c85,0x1482353b,0xa2bfe8a1,0x4cf10364,0xa81a664b,0xbc423001,0xc24b8b70,0xd0f89791,0xc76c51a3,0x0654be30,0xd192e819,0xd6ef5218,0xd6990624,0x5565a910,0xf40e3585,0x5771202a,0x106aa070,0x32bbd1b8,0x19a4c116,0xb8d2d0c8,0x1e376c08,0x5141ab53,0x2748774c,0xdf8eeb99,0x34b0bcb5,0xe19b48a8,0x391c0cb3,0xc5c95a63,0x4ed8aa4a,0xe3418acb,0x5b9cca4f,0x7763e373,0x682e6ff3,0xd6b2b8a3,0x748f82ee,0x5defb2fc,0x78a5636f,0x43172f60,0x84c87814,0xa1f0ab72,0x8cc70208,0x1a6439ec,0x90befffa,0x23631e28,0xa4506ceb,0xde82bde9,0xbef9a3f7,0xb2c67915,0xc67178f2,0xe372532b,0xca273ece,0xea26619c,0xd186b8c7,0x21c0c207,0xeada7dd6,0xcde0eb1e,0xf57d4f7f,0xee6ed178,0x06f067aa,0x72176fba,0x0a637dc5,0xa2c898a6,0x113f9804,0xbef90dae,0x1b710b35,0x131c471b,0x28db77f5,0x23047d84,0x32caab7b,0x40c72493,0x3c9ebe0a,0x15c9bebc,0x431d67c4,0x9c100d4c,0x4cc5d4be,0xcb3e42b6,0x597f299c,0xfc657e2a,0x5fcb6fab,0x3ad6faec,0x6c44198c,0x4a475817]
var W=new Array(160)
function Sha512(){this.init()
this._w=W
Hash.call(this,128,112)}
inherits(Sha512,Hash)
Sha512.prototype.init=function(){this._ah=0x6a09e667
this._bh=0xbb67ae85
this._ch=0x3c6ef372
this._dh=0xa54ff53a
this._eh=0x510e527f
this._fh=0x9b05688c
this._gh=0x1f83d9ab
this._hh=0x5be0cd19
this._al=0xf3bcc908
this._bl=0x84caa73b
this._cl=0xfe94f82b
this._dl=0x5f1d36f1
this._el=0xade682d1
this._fl=0x2b3e6c1f
this._gl=0xfb41bd6b
this._hl=0x137e2179
return this}
function Ch(x,y,z){return z^(x&(y^z))}
function maj(x,y,z){return(x&y)|(z&(x|y))}
function sigma0(x,xl){return(x>>>28|xl<<4)^(xl>>>2|x<<30)^(xl>>>7|x<<25)}
function sigma1(x,xl){return(x>>>14|xl<<18)^(x>>>18|xl<<14)^(xl>>>9|x<<23)}
function Gamma0(x,xl){return(x>>>1|xl<<31)^(x>>>8|xl<<24)^(x>>>7)}
function Gamma0l(x,xl){return(x>>>1|xl<<31)^(x>>>8|xl<<24)^(x>>>7|xl<<25)}
function Gamma1(x,xl){return(x>>>19|xl<<13)^(xl>>>29|x<<3)^(x>>>6)}
function Gamma1l(x,xl){return(x>>>19|xl<<13)^(xl>>>29|x<<3)^(x>>>6|xl<<26)}
function getCarry(a,b){return(a>>>0)<(b>>>0)?1:0}
Sha512.prototype._update=function(M){var W=this._w
var ah=this._ah|0
var bh=this._bh|0
var ch=this._ch|0
var dh=this._dh|0
var eh=this._eh|0
var fh=this._fh|0
var gh=this._gh|0
var hh=this._hh|0
var al=this._al|0
var bl=this._bl|0
var cl=this._cl|0
var dl=this._dl|0
var el=this._el|0
var fl=this._fl|0
var gl=this._gl|0
var hl=this._hl|0
for(var i=0;i<32;i+=2){W[i]=M.readInt32BE(i*4)
W[i+1]=M.readInt32BE(i*4+4)}
for(;i<160;i+=2){var xh=W[i-15*2]
var xl=W[i-15*2+1]
var gamma0=Gamma0(xh,xl)
var gamma0l=Gamma0l(xl,xh)
xh=W[i-2*2]
xl=W[i-2*2+1]
var gamma1=Gamma1(xh,xl)
var gamma1l=Gamma1l(xl,xh)
var Wi7h=W[i-7*2]
var Wi7l=W[i-7*2+1]
var Wi16h=W[i-16*2]
var Wi16l=W[i-16*2+1]
var Wil=(gamma0l+Wi7l)|0
var Wih=(gamma0+Wi7h+getCarry(Wil,gamma0l))|0
Wil=(Wil+gamma1l)|0
Wih=(Wih+gamma1+getCarry(Wil,gamma1l))|0
Wil=(Wil+Wi16l)|0
Wih=(Wih+Wi16h+getCarry(Wil,Wi16l))|0
W[i]=Wih
W[i+1]=Wil}
for(var j=0;j<160;j+=2){Wih=W[j]
Wil=W[j+1]
var majh=maj(ah,bh,ch)
var majl=maj(al,bl,cl)
var sigma0h=sigma0(ah,al)
var sigma0l=sigma0(al,ah)
var sigma1h=sigma1(eh,el)
var sigma1l=sigma1(el,eh)
var Kih=K[j]
var Kil=K[j+1]
var chh=Ch(eh,fh,gh)
var chl=Ch(el,fl,gl)
var t1l=(hl+sigma1l)|0
var t1h=(hh+sigma1h+getCarry(t1l,hl))|0
t1l=(t1l+chl)|0
t1h=(t1h+chh+getCarry(t1l,chl))|0
t1l=(t1l+Kil)|0
t1h=(t1h+Kih+getCarry(t1l,Kil))|0
t1l=(t1l+Wil)|0
t1h=(t1h+Wih+getCarry(t1l,Wil))|0
var t2l=(sigma0l+majl)|0
var t2h=(sigma0h+majh+getCarry(t2l,sigma0l))|0
hh=gh
hl=gl
gh=fh
gl=fl
fh=eh
fl=el
el=(dl+t1l)|0
eh=(dh+t1h+getCarry(el,dl))|0
dh=ch
dl=cl
ch=bh
cl=bl
bh=ah
bl=al
al=(t1l+t2l)|0
ah=(t1h+t2h+getCarry(al,t1l))|0}
this._al=(this._al+al)|0
this._bl=(this._bl+bl)|0
this._cl=(this._cl+cl)|0
this._dl=(this._dl+dl)|0
this._el=(this._el+el)|0
this._fl=(this._fl+fl)|0
this._gl=(this._gl+gl)|0
this._hl=(this._hl+hl)|0
this._ah=(this._ah+ah+getCarry(this._al,al))|0
this._bh=(this._bh+bh+getCarry(this._bl,bl))|0
this._ch=(this._ch+ch+getCarry(this._cl,cl))|0
this._dh=(this._dh+dh+getCarry(this._dl,dl))|0
this._eh=(this._eh+eh+getCarry(this._el,el))|0
this._fh=(this._fh+fh+getCarry(this._fl,fl))|0
this._gh=(this._gh+gh+getCarry(this._gl,gl))|0
this._hh=(this._hh+hh+getCarry(this._hl,hl))|0}
Sha512.prototype._hash=function(){var H=Buffer.allocUnsafe(64)
function writeInt64BE(h,l,offset){H.writeInt32BE(h,offset)
H.writeInt32BE(l,offset+4)}
writeInt64BE(this._ah,this._al,0)
writeInt64BE(this._bh,this._bl,8)
writeInt64BE(this._ch,this._cl,16)
writeInt64BE(this._dh,this._dl,24)
writeInt64BE(this._eh,this._el,32)
writeInt64BE(this._fh,this._fl,40)
writeInt64BE(this._gh,this._gl,48)
writeInt64BE(this._hh,this._hl,56)
return H}
module.exports=Sha512}),(function(module,exports,__webpack_require__){var MD5=__webpack_require__(208)
module.exports=function(buffer){return new MD5().update(buffer).digest()}}),(function(module,exports){module.exports={"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}}),(function(module,exports,__webpack_require__){exports.pbkdf2=__webpack_require__(665)
exports.pbkdf2Sync=__webpack_require__(323)}),(function(module,exports,__webpack_require__){(function(Buffer){var MAX_ALLOC=Math.pow(2,30)-1
function checkBuffer(buf,name){if(typeof buf!=='string'&&!Buffer.isBuffer(buf)){throw new TypeError(name+' must be a buffer or string')}}
module.exports=function(password,salt,iterations,keylen){checkBuffer(password,'Password')
checkBuffer(salt,'Salt')
if(typeof iterations!=='number'){throw new TypeError('Iterations not a number')}
if(iterations<0){throw new TypeError('Bad iterations')}
if(typeof keylen!=='number'){throw new TypeError('Key length not a number')}
if(keylen<0||keylen>MAX_ALLOC||keylen!==keylen){throw new TypeError('Bad key length')}}}.call(exports,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){(function(process){var defaultEncoding
if(process.browser){defaultEncoding='utf-8'}else{var pVersionMajor=parseInt(process.version.split('.')[0].slice(1),10)
defaultEncoding=pVersionMajor>=6?'utf-8':'binary'}
module.exports=defaultEncoding}.call(exports,__webpack_require__(20)))}),(function(module,exports,__webpack_require__){var md5=__webpack_require__(318)
var RIPEMD160=__webpack_require__(211)
var sha=__webpack_require__(212)
var checkParameters=__webpack_require__(321)
var defaultEncoding=__webpack_require__(322)
var Buffer=__webpack_require__(4).Buffer
var ZEROS=Buffer.alloc(128)
var sizes={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20}
function Hmac(alg,key,saltLen){var hash=getDigest(alg)
var blocksize=(alg==='sha512'||alg==='sha384')?128:64
if(key.length>blocksize){key=hash(key)}else if(key.length<blocksize){key=Buffer.concat([key,ZEROS],blocksize)}
var ipad=Buffer.allocUnsafe(blocksize+sizes[alg])
var opad=Buffer.allocUnsafe(blocksize+sizes[alg])
for(var i=0;i<blocksize;i++){ipad[i]=key[i]^0x36
opad[i]=key[i]^0x5C}
var ipad1=Buffer.allocUnsafe(blocksize+saltLen+4)
ipad.copy(ipad1,0,0,blocksize)
this.ipad1=ipad1
this.ipad2=ipad
this.opad=opad
this.alg=alg
this.blocksize=blocksize
this.hash=hash
this.size=sizes[alg]}
Hmac.prototype.run=function(data,ipad){data.copy(ipad,this.blocksize)
var h=this.hash(ipad)
h.copy(this.opad,this.blocksize)
return this.hash(this.opad)}
function getDigest(alg){function shaFunc(data){return sha(alg).update(data).digest()}
function rmd160Func(data){return new RIPEMD160().update(data).digest()}
if(alg==='rmd160'||alg==='ripemd160')return rmd160Func
if(alg==='md5')return md5
return shaFunc}
function pbkdf2(password,salt,iterations,keylen,digest){checkParameters(password,salt,iterations,keylen)
if(!Buffer.isBuffer(password))password=Buffer.from(password,defaultEncoding)
if(!Buffer.isBuffer(salt))salt=Buffer.from(salt,defaultEncoding)
digest=digest||'sha1'
var hmac=new Hmac(digest,password,salt.length)
var DK=Buffer.allocUnsafe(keylen)
var block1=Buffer.allocUnsafe(salt.length+4)
salt.copy(block1,0,0,salt.length)
var destPos=0
var hLen=sizes[digest]
var l=Math.ceil(keylen/hLen)
for(var i=1;i<=l;i++){block1.writeUInt32BE(i,salt.length)
var T=hmac.run(block1,hmac.ipad1)
var U=T
for(var j=1;j<iterations;j++){U=hmac.run(U,hmac.ipad2)
for(var k=0;k<hLen;k++)T[k]^=U[k]}
T.copy(DK,destPos)
destPos+=hLen}
return DK}
module.exports=pbkdf2}),(function(module,exports,__webpack_require__){var xor=__webpack_require__(128)
var Buffer=__webpack_require__(4).Buffer
var incr32=__webpack_require__(325)
function getBlock(self){var out=self._cipher.encryptBlockRaw(self._prev)
incr32(self._prev)
return out}
var blockSize=16
exports.encrypt=function(self,chunk){var chunkNum=Math.ceil(chunk.length/blockSize)
var start=self._cache.length
self._cache=Buffer.concat([self._cache,Buffer.allocUnsafe(chunkNum*blockSize)])
for(var i=0;i<chunkNum;i++){var out=getBlock(self)
var offset=start+i*blockSize
self._cache.writeUInt32BE(out[0],offset+0)
self._cache.writeUInt32BE(out[1],offset+4)
self._cache.writeUInt32BE(out[2],offset+8)
self._cache.writeUInt32BE(out[3],offset+12)}
var pad=self._cache.slice(0,chunk.length)
self._cache=self._cache.slice(chunk.length)
return xor(chunk,pad)}}),(function(module,exports){function incr32(iv){var len=iv.length
var item
while(len--){item=iv.readUInt8(len)
if(item===255){iv.writeUInt8(0,len)}else{item++
iv.writeUInt8(item,len)
break}}}
module.exports=incr32}),(function(module,exports){module.exports={"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}}),(function(module,exports,__webpack_require__){var aes=__webpack_require__(165)
var Buffer=__webpack_require__(4).Buffer
var Transform=__webpack_require__(85)
var inherits=__webpack_require__(7)
var GHASH=__webpack_require__(680)
var xor=__webpack_require__(128)
var incr32=__webpack_require__(325)
function xorTest(a,b){var out=0
if(a.length!==b.length)out++
var len=Math.min(a.length,b.length)
for(var i=0;i<len;++i){out+=(a[i]^b[i])}
return out}
function calcIv(self,iv,ck){if(iv.length===12){self._finID=Buffer.concat([iv,Buffer.from([0,0,0,1])])
return Buffer.concat([iv,Buffer.from([0,0,0,2])])}
var ghash=new GHASH(ck)
var len=iv.length
var toPad=len%16
ghash.update(iv)
if(toPad){toPad=16-toPad
ghash.update(Buffer.alloc(toPad,0))}
ghash.update(Buffer.alloc(8,0))
var ivBits=len*8
var tail=Buffer.alloc(8)
tail.writeUIntBE(ivBits,0,8)
ghash.update(tail)
self._finID=ghash.state
var out=Buffer.from(self._finID)
incr32(out)
return out}
function StreamCipher(mode,key,iv,decrypt){Transform.call(this)
var h=Buffer.alloc(4,0)
this._cipher=new aes.AES(key)
var ck=this._cipher.encryptBlock(h)
this._ghash=new GHASH(ck)
iv=calcIv(this,iv,ck)
this._prev=Buffer.from(iv)
this._cache=Buffer.allocUnsafe(0)
this._secCache=Buffer.allocUnsafe(0)
this._decrypt=decrypt
this._alen=0
this._len=0
this._mode=mode
this._authTag=null
this._called=false}
inherits(StreamCipher,Transform)
StreamCipher.prototype._update=function(chunk){if(!this._called&&this._alen){var rump=16-(this._alen%16)
if(rump<16){rump=Buffer.alloc(rump,0)
this._ghash.update(rump)}}
this._called=true
var out=this._mode.encrypt(this,chunk)
if(this._decrypt){this._ghash.update(chunk)}else{this._ghash.update(out)}
this._len+=chunk.length
return out}
StreamCipher.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error('Unsupported state or unable to authenticate data')
var tag=xor(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID))
if(this._decrypt&&xorTest(tag,this._authTag))throw new Error('Unsupported state or unable to authenticate data')
this._authTag=tag
this._cipher.scrub()}
StreamCipher.prototype.getAuthTag=function getAuthTag(){if(this._decrypt||!Buffer.isBuffer(this._authTag))throw new Error('Attempting to get auth tag in unsupported state')
return this._authTag}
StreamCipher.prototype.setAuthTag=function setAuthTag(tag){if(!this._decrypt)throw new Error('Attempting to set auth tag in unsupported state')
this._authTag=tag}
StreamCipher.prototype.setAAD=function setAAD(buf){if(this._called)throw new Error('Attempting to set AAD in unsupported state')
this._ghash.update(buf)
this._alen+=buf.length}
module.exports=StreamCipher}),(function(module,exports,__webpack_require__){var aes=__webpack_require__(165)
var Buffer=__webpack_require__(4).Buffer
var Transform=__webpack_require__(85)
var inherits=__webpack_require__(7)
function StreamCipher(mode,key,iv,decrypt){Transform.call(this)
this._cipher=new aes.AES(key)
this._prev=Buffer.from(iv)
this._cache=Buffer.allocUnsafe(0)
this._secCache=Buffer.allocUnsafe(0)
this._decrypt=decrypt
this._mode=mode}
inherits(StreamCipher,Transform)
StreamCipher.prototype._update=function(chunk){return this._mode.encrypt(this,chunk,this._decrypt)}
StreamCipher.prototype._final=function(){this._cipher.scrub()}
module.exports=StreamCipher}),(function(module,exports,__webpack_require__){var randomBytes=__webpack_require__(102);module.exports=findPrime;findPrime.simpleSieve=simpleSieve;findPrime.fermatTest=fermatTest;var BN=__webpack_require__(29);var TWENTYFOUR=new BN(24);var MillerRabin=__webpack_require__(330);var millerRabin=new MillerRabin();var ONE=new BN(1);var TWO=new BN(2);var FIVE=new BN(5);var SIXTEEN=new BN(16);var EIGHT=new BN(8);var TEN=new BN(10);var THREE=new BN(3);var SEVEN=new BN(7);var ELEVEN=new BN(11);var FOUR=new BN(4);var TWELVE=new BN(12);var primes=null;function _getPrimes(){if(primes!==null)
return primes;var limit=0x100000;var res=[];res[0]=2;for(var i=1,k=3;k<limit;k+=2){var sqrt=Math.ceil(Math.sqrt(k));for(var j=0;j<i&&res[j]<=sqrt;j++)
if(k%res[j]===0)
break;if(i!==j&&res[j]<=sqrt)
continue;res[i++]=k;}
primes=res;return res;}
function simpleSieve(p){var primes=_getPrimes();for(var i=0;i<primes.length;i++)
if(p.modn(primes[i])===0){if(p.cmpn(primes[i])===0){return true;}else{return false;}}
return true;}
function fermatTest(p){var red=BN.mont(p);return TWO.toRed(red).redPow(p.subn(1)).fromRed().cmpn(1)===0;}
function findPrime(bits,gen){if(bits<16){if(gen===2||gen===5){return new BN([0x8c,0x7b]);}else{return new BN([0x8c,0x27]);}}
gen=new BN(gen);var num,n2;while(true){num=new BN(randomBytes(Math.ceil(bits/8)));while(num.bitLength()>bits){num.ishrn(1);}
if(num.isEven()){num.iadd(ONE);}
if(!num.testn(1)){num.iadd(TWO);}
if(!gen.cmp(TWO)){while(num.mod(TWENTYFOUR).cmp(ELEVEN)){num.iadd(FOUR);}}else if(!gen.cmp(FIVE)){while(num.mod(TEN).cmp(THREE)){num.iadd(FOUR);}}
n2=num.shrn(1);if(simpleSieve(n2)&&simpleSieve(num)&&fermatTest(n2)&&fermatTest(num)&&millerRabin.test(n2)&&millerRabin.test(num)){return num;}}}}),(function(module,exports,__webpack_require__){var bn=__webpack_require__(29);var brorand=__webpack_require__(331);function MillerRabin(rand){this.rand=rand||new brorand.Rand();}
module.exports=MillerRabin;MillerRabin.create=function create(rand){return new MillerRabin(rand);};MillerRabin.prototype._randbelow=function _randbelow(n){var len=n.bitLength();var min_bytes=Math.ceil(len/8);do
var a=new bn(this.rand.generate(min_bytes));while(a.cmp(n)>=0);return a;};MillerRabin.prototype._randrange=function _randrange(start,stop){var size=stop.sub(start);return start.add(this._randbelow(size));};MillerRabin.prototype.test=function test(n,k,cb){var len=n.bitLength();var red=bn.mont(n);var rone=new bn(1).toRed(red);if(!k)
k=Math.max(1,(len/48)|0);var n1=n.subn(1);for(var s=0;!n1.testn(s);s++){}
var d=n.shrn(s);var rn1=n1.toRed(red);var prime=true;for(;k>0;k--){var a=this._randrange(new bn(2),n1);if(cb)
cb(a);var x=a.toRed(red).redPow(d);if(x.cmp(rone)===0||x.cmp(rn1)===0)
continue;for(var i=1;i<s;i++){x=x.redSqr();if(x.cmp(rone)===0)
return false;if(x.cmp(rn1)===0)
break;}
if(i===s)
return false;}
return prime;};MillerRabin.prototype.getDivisor=function getDivisor(n,k){var len=n.bitLength();var red=bn.mont(n);var rone=new bn(1).toRed(red);if(!k)
k=Math.max(1,(len/48)|0);var n1=n.subn(1);for(var s=0;!n1.testn(s);s++){}
var d=n.shrn(s);var rn1=n1.toRed(red);for(;k>0;k--){var a=this._randrange(new bn(2),n1);var g=n.gcd(a);if(g.cmpn(1)!==0)
return g;var x=a.toRed(red).redPow(d);if(x.cmp(rone)===0||x.cmp(rn1)===0)
continue;for(var i=1;i<s;i++){x=x.redSqr();if(x.cmp(rone)===0)
return x.fromRed().subn(1).gcd(n);if(x.cmp(rn1)===0)
break;}
if(i===s){x=x.redSqr();return x.fromRed().subn(1).gcd(n);}}
return false;};}),(function(module,exports,__webpack_require__){var r;module.exports=function rand(len){if(!r)
r=new Rand(null);return r.generate(len);};function Rand(rand){this.rand=rand;}
module.exports.Rand=Rand;Rand.prototype.generate=function generate(len){return this._rand(len);};Rand.prototype._rand=function _rand(n){if(this.rand.getBytes)
return this.rand.getBytes(n);var res=new Uint8Array(n);for(var i=0;i<res.length;i++)
res[i]=this.rand.getByte();return res;};if(typeof self==='object'){if(self.crypto&&self.crypto.getRandomValues){Rand.prototype._rand=function _rand(n){var arr=new Uint8Array(n);self.crypto.getRandomValues(arr);return arr;};}else if(self.msCrypto&&self.msCrypto.getRandomValues){Rand.prototype._rand=function _rand(n){var arr=new Uint8Array(n);self.msCrypto.getRandomValues(arr);return arr;};}else if(typeof window==='object'){Rand.prototype._rand=function(){throw new Error('Not implemented yet');};}}else{try{var crypto=__webpack_require__(685);if(typeof crypto.randomBytes!=='function')
throw new Error('Not supported');Rand.prototype._rand=function _rand(n){return crypto.randomBytes(n);};}catch(e){}}}),(function(module,exports,__webpack_require__){"use strict";var utils=exports;function toArray(msg,enc){if(Array.isArray(msg))
return msg.slice();if(!msg)
return[];var res=[];if(typeof msg!=='string'){for(var i=0;i<msg.length;i++)
res[i]=msg[i]|0;return res;}
if(enc==='hex'){msg=msg.replace(/[^a-z0-9]+/ig,'');if(msg.length%2!==0)
msg='0'+msg;for(var i=0;i<msg.length;i+=2)
res.push(parseInt(msg[i]+msg[i+1],16));}else{for(var i=0;i<msg.length;i++){var c=msg.charCodeAt(i);var hi=c>>8;var lo=c&0xff;if(hi)
res.push(hi,lo);else
res.push(lo);}}
return res;}
utils.toArray=toArray;function zero2(word){if(word.length===1)
return '0'+word;else
return word;}
utils.zero2=zero2;function toHex(msg){var res='';for(var i=0;i<msg.length;i++)
res+=zero2(msg[i].toString(16));return res;}
utils.toHex=toHex;utils.encode=function encode(arr,enc){if(enc==='hex')
return toHex(arr);else
return arr;};}),(function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(68);var rotr32=utils.rotr32;function ft_1(s,x,y,z){if(s===0)
return ch32(x,y,z);if(s===1||s===3)
return p32(x,y,z);if(s===2)
return maj32(x,y,z);}
exports.ft_1=ft_1;function ch32(x,y,z){return(x&y)^((~x)&z);}
exports.ch32=ch32;function maj32(x,y,z){return(x&y)^(x&z)^(y&z);}
exports.maj32=maj32;function p32(x,y,z){return x^y^z;}
exports.p32=p32;function s0_256(x){return rotr32(x,2)^rotr32(x,13)^rotr32(x,22);}
exports.s0_256=s0_256;function s1_256(x){return rotr32(x,6)^rotr32(x,11)^rotr32(x,25);}
exports.s1_256=s1_256;function g0_256(x){return rotr32(x,7)^rotr32(x,18)^(x>>>3);}
exports.g0_256=g0_256;function g1_256(x){return rotr32(x,17)^rotr32(x,19)^(x>>>10);}
exports.g1_256=g1_256;}),(function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(68);var common=__webpack_require__(129);var shaCommon=__webpack_require__(333);var assert=__webpack_require__(55);var sum32=utils.sum32;var sum32_4=utils.sum32_4;var sum32_5=utils.sum32_5;var ch32=shaCommon.ch32;var maj32=shaCommon.maj32;var s0_256=shaCommon.s0_256;var s1_256=shaCommon.s1_256;var g0_256=shaCommon.g0_256;var g1_256=shaCommon.g1_256;var BlockHash=common.BlockHash;var sha256_K=[0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0x0fc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x06ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2];function SHA256(){if(!(this instanceof SHA256))
return new SHA256();BlockHash.call(this);this.h=[0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19];this.k=sha256_K;this.W=new Array(64);}
utils.inherits(SHA256,BlockHash);module.exports=SHA256;SHA256.blockSize=512;SHA256.outSize=256;SHA256.hmacStrength=192;SHA256.padLength=64;SHA256.prototype._update=function _update(msg,start){var W=this.W;for(var i=0;i<16;i++)
W[i]=msg[start+i];for(;i<W.length;i++)
W[i]=sum32_4(g1_256(W[i-2]),W[i-7],g0_256(W[i-15]),W[i-16]);var a=this.h[0];var b=this.h[1];var c=this.h[2];var d=this.h[3];var e=this.h[4];var f=this.h[5];var g=this.h[6];var h=this.h[7];assert(this.k.length===W.length);for(i=0;i<W.length;i++){var T1=sum32_5(h,s1_256(e),ch32(e,f,g),this.k[i],W[i]);var T2=sum32(s0_256(a),maj32(a,b,c));h=g;g=f;f=e;e=sum32(d,T1);d=c;c=b;b=a;a=sum32(T1,T2);}
this.h[0]=sum32(this.h[0],a);this.h[1]=sum32(this.h[1],b);this.h[2]=sum32(this.h[2],c);this.h[3]=sum32(this.h[3],d);this.h[4]=sum32(this.h[4],e);this.h[5]=sum32(this.h[5],f);this.h[6]=sum32(this.h[6],g);this.h[7]=sum32(this.h[7],h);};SHA256.prototype._digest=function digest(enc){if(enc==='hex')
return utils.toHex32(this.h,'big');else
return utils.split32(this.h,'big');};}),(function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(68);var common=__webpack_require__(129);var assert=__webpack_require__(55);var rotr64_hi=utils.rotr64_hi;var rotr64_lo=utils.rotr64_lo;var shr64_hi=utils.shr64_hi;var shr64_lo=utils.shr64_lo;var sum64=utils.sum64;var sum64_hi=utils.sum64_hi;var sum64_lo=utils.sum64_lo;var sum64_4_hi=utils.sum64_4_hi;var sum64_4_lo=utils.sum64_4_lo;var sum64_5_hi=utils.sum64_5_hi;var sum64_5_lo=utils.sum64_5_lo;var BlockHash=common.BlockHash;var sha512_K=[0x428a2f98,0xd728ae22,0x71374491,0x23ef65cd,0xb5c0fbcf,0xec4d3b2f,0xe9b5dba5,0x8189dbbc,0x3956c25b,0xf348b538,0x59f111f1,0xb605d019,0x923f82a4,0xaf194f9b,0xab1c5ed5,0xda6d8118,0xd807aa98,0xa3030242,0x12835b01,0x45706fbe,0x243185be,0x4ee4b28c,0x550c7dc3,0xd5ffb4e2,0x72be5d74,0xf27b896f,0x80deb1fe,0x3b1696b1,0x9bdc06a7,0x25c71235,0xc19bf174,0xcf692694,0xe49b69c1,0x9ef14ad2,0xefbe4786,0x384f25e3,0x0fc19dc6,0x8b8cd5b5,0x240ca1cc,0x77ac9c65,0x2de92c6f,0x592b0275,0x4a7484aa,0x6ea6e483,0x5cb0a9dc,0xbd41fbd4,0x76f988da,0x831153b5,0x983e5152,0xee66dfab,0xa831c66d,0x2db43210,0xb00327c8,0x98fb213f,0xbf597fc7,0xbeef0ee4,0xc6e00bf3,0x3da88fc2,0xd5a79147,0x930aa725,0x06ca6351,0xe003826f,0x14292967,0x0a0e6e70,0x27b70a85,0x46d22ffc,0x2e1b2138,0x5c26c926,0x4d2c6dfc,0x5ac42aed,0x53380d13,0x9d95b3df,0x650a7354,0x8baf63de,0x766a0abb,0x3c77b2a8,0x81c2c92e,0x47edaee6,0x92722c85,0x1482353b,0xa2bfe8a1,0x4cf10364,0xa81a664b,0xbc423001,0xc24b8b70,0xd0f89791,0xc76c51a3,0x0654be30,0xd192e819,0xd6ef5218,0xd6990624,0x5565a910,0xf40e3585,0x5771202a,0x106aa070,0x32bbd1b8,0x19a4c116,0xb8d2d0c8,0x1e376c08,0x5141ab53,0x2748774c,0xdf8eeb99,0x34b0bcb5,0xe19b48a8,0x391c0cb3,0xc5c95a63,0x4ed8aa4a,0xe3418acb,0x5b9cca4f,0x7763e373,0x682e6ff3,0xd6b2b8a3,0x748f82ee,0x5defb2fc,0x78a5636f,0x43172f60,0x84c87814,0xa1f0ab72,0x8cc70208,0x1a6439ec,0x90befffa,0x23631e28,0xa4506ceb,0xde82bde9,0xbef9a3f7,0xb2c67915,0xc67178f2,0xe372532b,0xca273ece,0xea26619c,0xd186b8c7,0x21c0c207,0xeada7dd6,0xcde0eb1e,0xf57d4f7f,0xee6ed178,0x06f067aa,0x72176fba,0x0a637dc5,0xa2c898a6,0x113f9804,0xbef90dae,0x1b710b35,0x131c471b,0x28db77f5,0x23047d84,0x32caab7b,0x40c72493,0x3c9ebe0a,0x15c9bebc,0x431d67c4,0x9c100d4c,0x4cc5d4be,0xcb3e42b6,0x597f299c,0xfc657e2a,0x5fcb6fab,0x3ad6faec,0x6c44198c,0x4a475817];function SHA512(){if(!(this instanceof SHA512))
return new SHA512();BlockHash.call(this);this.h=[0x6a09e667,0xf3bcc908,0xbb67ae85,0x84caa73b,0x3c6ef372,0xfe94f82b,0xa54ff53a,0x5f1d36f1,0x510e527f,0xade682d1,0x9b05688c,0x2b3e6c1f,0x1f83d9ab,0xfb41bd6b,0x5be0cd19,0x137e2179];this.k=sha512_K;this.W=new Array(160);}
utils.inherits(SHA512,BlockHash);module.exports=SHA512;SHA512.blockSize=1024;SHA512.outSize=512;SHA512.hmacStrength=192;SHA512.padLength=128;SHA512.prototype._prepareBlock=function _prepareBlock(msg,start){var W=this.W;for(var i=0;i<32;i++)
W[i]=msg[start+i];for(;i<W.length;i+=2){var c0_hi=g1_512_hi(W[i-4],W[i-3]);var c0_lo=g1_512_lo(W[i-4],W[i-3]);var c1_hi=W[i-14];var c1_lo=W[i-13];var c2_hi=g0_512_hi(W[i-30],W[i-29]);var c2_lo=g0_512_lo(W[i-30],W[i-29]);var c3_hi=W[i-32];var c3_lo=W[i-31];W[i]=sum64_4_hi(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo);W[i+1]=sum64_4_lo(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo);}};SHA512.prototype._update=function _update(msg,start){this._prepareBlock(msg,start);var W=this.W;var ah=this.h[0];var al=this.h[1];var bh=this.h[2];var bl=this.h[3];var ch=this.h[4];var cl=this.h[5];var dh=this.h[6];var dl=this.h[7];var eh=this.h[8];var el=this.h[9];var fh=this.h[10];var fl=this.h[11];var gh=this.h[12];var gl=this.h[13];var hh=this.h[14];var hl=this.h[15];assert(this.k.length===W.length);for(var i=0;i<W.length;i+=2){var c0_hi=hh;var c0_lo=hl;var c1_hi=s1_512_hi(eh,el);var c1_lo=s1_512_lo(eh,el);var c2_hi=ch64_hi(eh,el,fh,fl,gh,gl);var c2_lo=ch64_lo(eh,el,fh,fl,gh,gl);var c3_hi=this.k[i];var c3_lo=this.k[i+1];var c4_hi=W[i];var c4_lo=W[i+1];var T1_hi=sum64_5_hi(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo,c4_hi,c4_lo);var T1_lo=sum64_5_lo(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo,c4_hi,c4_lo);c0_hi=s0_512_hi(ah,al);c0_lo=s0_512_lo(ah,al);c1_hi=maj64_hi(ah,al,bh,bl,ch,cl);c1_lo=maj64_lo(ah,al,bh,bl,ch,cl);var T2_hi=sum64_hi(c0_hi,c0_lo,c1_hi,c1_lo);var T2_lo=sum64_lo(c0_hi,c0_lo,c1_hi,c1_lo);hh=gh;hl=gl;gh=fh;gl=fl;fh=eh;fl=el;eh=sum64_hi(dh,dl,T1_hi,T1_lo);el=sum64_lo(dl,dl,T1_hi,T1_lo);dh=ch;dl=cl;ch=bh;cl=bl;bh=ah;bl=al;ah=sum64_hi(T1_hi,T1_lo,T2_hi,T2_lo);al=sum64_lo(T1_hi,T1_lo,T2_hi,T2_lo);}
sum64(this.h,0,ah,al);sum64(this.h,2,bh,bl);sum64(this.h,4,ch,cl);sum64(this.h,6,dh,dl);sum64(this.h,8,eh,el);sum64(this.h,10,fh,fl);sum64(this.h,12,gh,gl);sum64(this.h,14,hh,hl);};SHA512.prototype._digest=function digest(enc){if(enc==='hex')
return utils.toHex32(this.h,'big');else
return utils.split32(this.h,'big');};function ch64_hi(xh,xl,yh,yl,zh){var r=(xh&yh)^((~xh)&zh);if(r<0)
r+=0x100000000;return r;}
function ch64_lo(xh,xl,yh,yl,zh,zl){var r=(xl&yl)^((~xl)&zl);if(r<0)
r+=0x100000000;return r;}
function maj64_hi(xh,xl,yh,yl,zh){var r=(xh&yh)^(xh&zh)^(yh&zh);if(r<0)
r+=0x100000000;return r;}
function maj64_lo(xh,xl,yh,yl,zh,zl){var r=(xl&yl)^(xl&zl)^(yl&zl);if(r<0)
r+=0x100000000;return r;}
function s0_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,28);var c1_hi=rotr64_hi(xl,xh,2);var c2_hi=rotr64_hi(xl,xh,7);var r=c0_hi^c1_hi^c2_hi;if(r<0)
r+=0x100000000;return r;}
function s0_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,28);var c1_lo=rotr64_lo(xl,xh,2);var c2_lo=rotr64_lo(xl,xh,7);var r=c0_lo^c1_lo^c2_lo;if(r<0)
r+=0x100000000;return r;}
function s1_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,14);var c1_hi=rotr64_hi(xh,xl,18);var c2_hi=rotr64_hi(xl,xh,9);var r=c0_hi^c1_hi^c2_hi;if(r<0)
r+=0x100000000;return r;}
function s1_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,14);var c1_lo=rotr64_lo(xh,xl,18);var c2_lo=rotr64_lo(xl,xh,9);var r=c0_lo^c1_lo^c2_lo;if(r<0)
r+=0x100000000;return r;}
function g0_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,1);var c1_hi=rotr64_hi(xh,xl,8);var c2_hi=shr64_hi(xh,xl,7);var r=c0_hi^c1_hi^c2_hi;if(r<0)
r+=0x100000000;return r;}
function g0_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,1);var c1_lo=rotr64_lo(xh,xl,8);var c2_lo=shr64_lo(xh,xl,7);var r=c0_lo^c1_lo^c2_lo;if(r<0)
r+=0x100000000;return r;}
function g1_512_hi(xh,xl){var c0_hi=rotr64_hi(xh,xl,19);var c1_hi=rotr64_hi(xl,xh,29);var c2_hi=shr64_hi(xh,xl,6);var r=c0_hi^c1_hi^c2_hi;if(r<0)
r+=0x100000000;return r;}
function g1_512_lo(xh,xl){var c0_lo=rotr64_lo(xh,xl,19);var c1_lo=rotr64_lo(xl,xh,29);var c2_lo=shr64_lo(xh,xl,6);var r=c0_lo^c1_lo^c2_lo;if(r<0)
r+=0x100000000;return r;}}),(function(module,exports,__webpack_require__){var inherits=__webpack_require__(7);var Reporter=__webpack_require__(131).Reporter;var Buffer=__webpack_require__(1).Buffer;function DecoderBuffer(base,options){Reporter.call(this,options);if(!Buffer.isBuffer(base)){this.error('Input not Buffer');return;}
this.base=base;this.offset=0;this.length=base.length;}
inherits(DecoderBuffer,Reporter);exports.DecoderBuffer=DecoderBuffer;DecoderBuffer.prototype.save=function save(){return{offset:this.offset,reporter:Reporter.prototype.save.call(this)};};DecoderBuffer.prototype.restore=function restore(save){var res=new DecoderBuffer(this.base);res.offset=save.offset;res.length=this.offset;this.offset=save.offset;Reporter.prototype.restore.call(this,save.reporter);return res;};DecoderBuffer.prototype.isEmpty=function isEmpty(){return this.offset===this.length;};DecoderBuffer.prototype.readUInt8=function readUInt8(fail){if(this.offset+1<=this.length)
return this.base.readUInt8(this.offset++,true);else
return this.error(fail||'DecoderBuffer overrun');}
DecoderBuffer.prototype.skip=function skip(bytes,fail){if(!(this.offset+bytes<=this.length))
return this.error(fail||'DecoderBuffer overrun');var res=new DecoderBuffer(this.base);res._reporterState=this._reporterState;res.offset=this.offset;res.length=this.offset+bytes;this.offset+=bytes;return res;}
DecoderBuffer.prototype.raw=function raw(save){return this.base.slice(save?save.offset:this.offset,this.length);}
function EncoderBuffer(value,reporter){if(Array.isArray(value)){this.length=0;this.value=value.map(function(item){if(!(item instanceof EncoderBuffer))
item=new EncoderBuffer(item,reporter);this.length+=item.length;return item;},this);}else if(typeof value==='number'){if(!(0<=value&&value<=0xff))
return reporter.error('non-byte EncoderBuffer value');this.value=value;this.length=1;}else if(typeof value==='string'){this.value=value;this.length=Buffer.byteLength(value);}else if(Buffer.isBuffer(value)){this.value=value;this.length=value.length;}else{return reporter.error('Unsupported type: '+typeof value);}}
exports.EncoderBuffer=EncoderBuffer;EncoderBuffer.prototype.join=function join(out,offset){if(!out)
out=new Buffer(this.length);if(!offset)
offset=0;if(this.length===0)
return out;if(Array.isArray(this.value)){this.value.forEach(function(item){item.join(out,offset);offset+=item.length;});}else{if(typeof this.value==='number')
out[offset]=this.value;else if(typeof this.value==='string')
out.write(this.value,offset);else if(Buffer.isBuffer(this.value))
this.value.copy(out,offset);offset+=this.length;}
return out;};}),(function(module,exports,__webpack_require__){var constants=exports;constants._reverse=function reverse(map){var res={};Object.keys(map).forEach(function(key){if((key|0)==key)
key=key|0;var value=map[key];res[value]=key;});return res;};constants.der=__webpack_require__(716);}),(function(module,exports,__webpack_require__){var inherits=__webpack_require__(7);var asn1=__webpack_require__(130);var base=asn1.base;var bignum=asn1.bignum;var der=asn1.constants.der;function DERDecoder(entity){this.enc='der';this.name=entity.name;this.entity=entity;this.tree=new DERNode();this.tree._init(entity.body);};module.exports=DERDecoder;DERDecoder.prototype.decode=function decode(data,options){if(!(data instanceof base.DecoderBuffer))
data=new base.DecoderBuffer(data,options);return this.tree._decode(data,options);};function DERNode(parent){base.Node.call(this,'der',parent);}
inherits(DERNode,base.Node);DERNode.prototype._peekTag=function peekTag(buffer,tag,any){if(buffer.isEmpty())
return false;var state=buffer.save();var decodedTag=derDecodeTag(buffer,'Failed to peek tag: "'+tag+'"');if(buffer.isError(decodedTag))
return decodedTag;buffer.restore(state);return decodedTag.tag===tag||decodedTag.tagStr===tag||(decodedTag.tagStr+'of')===tag||any;};DERNode.prototype._decodeTag=function decodeTag(buffer,tag,any){var decodedTag=derDecodeTag(buffer,'Failed to decode tag of "'+tag+'"');if(buffer.isError(decodedTag))
return decodedTag;var len=derDecodeLen(buffer,decodedTag.primitive,'Failed to get length of "'+tag+'"');if(buffer.isError(len))
return len;if(!any&&decodedTag.tag!==tag&&decodedTag.tagStr!==tag&&decodedTag.tagStr+'of'!==tag){return buffer.error('Failed to match tag: "'+tag+'"');}
if(decodedTag.primitive||len!==null)
return buffer.skip(len,'Failed to match body of: "'+tag+'"');var state=buffer.save();var res=this._skipUntilEnd(buffer,'Failed to skip indefinite length body: "'+this.tag+'"');if(buffer.isError(res))
return res;len=buffer.offset-state.offset;buffer.restore(state);return buffer.skip(len,'Failed to match body of: "'+tag+'"');};DERNode.prototype._skipUntilEnd=function skipUntilEnd(buffer,fail){while(true){var tag=derDecodeTag(buffer,fail);if(buffer.isError(tag))
return tag;var len=derDecodeLen(buffer,tag.primitive,fail);if(buffer.isError(len))
return len;var res;if(tag.primitive||len!==null)
res=buffer.skip(len)
else
res=this._skipUntilEnd(buffer,fail);if(buffer.isError(res))
return res;if(tag.tagStr==='end')
break;}};DERNode.prototype._decodeList=function decodeList(buffer,tag,decoder,options){var result=[];while(!buffer.isEmpty()){var possibleEnd=this._peekTag(buffer,'end');if(buffer.isError(possibleEnd))
return possibleEnd;var res=decoder.decode(buffer,'der',options);if(buffer.isError(res)&&possibleEnd)
break;result.push(res);}
return result;};DERNode.prototype._decodeStr=function decodeStr(buffer,tag){if(tag==='bitstr'){var unused=buffer.readUInt8();if(buffer.isError(unused))
return unused;return{unused:unused,data:buffer.raw()};}else if(tag==='bmpstr'){var raw=buffer.raw();if(raw.length%2===1)
return buffer.error('Decoding of string type: bmpstr length mismatch');var str='';for(var i=0;i<raw.length/2;i++){str+=String.fromCharCode(raw.readUInt16BE(i*2));}
return str;}else if(tag==='numstr'){var numstr=buffer.raw().toString('ascii');if(!this._isNumstr(numstr)){return buffer.error('Decoding of string type: '+
'numstr unsupported characters');}
return numstr;}else if(tag==='octstr'){return buffer.raw();}else if(tag==='objDesc'){return buffer.raw();}else if(tag==='printstr'){var printstr=buffer.raw().toString('ascii');if(!this._isPrintstr(printstr)){return buffer.error('Decoding of string type: '+
'printstr unsupported characters');}
return printstr;}else if(/str$/.test(tag)){return buffer.raw().toString();}else{return buffer.error('Decoding of string type: '+tag+' unsupported');}};DERNode.prototype._decodeObjid=function decodeObjid(buffer,values,relative){var result;var identifiers=[];var ident=0;while(!buffer.isEmpty()){var subident=buffer.readUInt8();ident<<=7;ident|=subident&0x7f;if((subident&0x80)===0){identifiers.push(ident);ident=0;}}
if(subident&0x80)
identifiers.push(ident);var first=(identifiers[0]/40)|0;var second=identifiers[0]%40;if(relative)
result=identifiers;else
result=[first,second].concat(identifiers.slice(1));if(values){var tmp=values[result.join(' ')];if(tmp===undefined)
tmp=values[result.join('.')];if(tmp!==undefined)
result=tmp;}
return result;};DERNode.prototype._decodeTime=function decodeTime(buffer,tag){var str=buffer.raw().toString();if(tag==='gentime'){var year=str.slice(0,4)|0;var mon=str.slice(4,6)|0;var day=str.slice(6,8)|0;var hour=str.slice(8,10)|0;var min=str.slice(10,12)|0;var sec=str.slice(12,14)|0;}else if(tag==='utctime'){var year=str.slice(0,2)|0;var mon=str.slice(2,4)|0;var day=str.slice(4,6)|0;var hour=str.slice(6,8)|0;var min=str.slice(8,10)|0;var sec=str.slice(10,12)|0;if(year<70)
year=2000+year;else
year=1900+year;}else{return buffer.error('Decoding '+tag+' time is not supported yet');}
return Date.UTC(year,mon-1,day,hour,min,sec,0);};DERNode.prototype._decodeNull=function decodeNull(buffer){return null;};DERNode.prototype._decodeBool=function decodeBool(buffer){var res=buffer.readUInt8();if(buffer.isError(res))
return res;else
return res!==0;};DERNode.prototype._decodeInt=function decodeInt(buffer,values){var raw=buffer.raw();var res=new bignum(raw);if(values)
res=values[res.toString(10)]||res;return res;};DERNode.prototype._use=function use(entity,obj){if(typeof entity==='function')
entity=entity(obj);return entity._getDecoder('der').tree;};function derDecodeTag(buf,fail){var tag=buf.readUInt8(fail);if(buf.isError(tag))
return tag;var cls=der.tagClass[tag>>6];var primitive=(tag&0x20)===0;if((tag&0x1f)===0x1f){var oct=tag;tag=0;while((oct&0x80)===0x80){oct=buf.readUInt8(fail);if(buf.isError(oct))
return oct;tag<<=7;tag|=oct&0x7f;}}else{tag&=0x1f;}
var tagStr=der.tag[tag];return{cls:cls,primitive:primitive,tag:tag,tagStr:tagStr};}
function derDecodeLen(buf,primitive,fail){var len=buf.readUInt8(fail);if(buf.isError(len))
return len;if(!primitive&&len===0x80)
return null;if((len&0x80)===0){return len;}
var num=len&0x7f;if(num>4)
return buf.error('length octect is too long');len=0;for(var i=0;i<num;i++){len<<=8;var j=buf.readUInt8(fail);if(buf.isError(j))
return j;len|=j;}
return len;}}),(function(module,exports,__webpack_require__){var inherits=__webpack_require__(7);var Buffer=__webpack_require__(1).Buffer;var asn1=__webpack_require__(130);var base=asn1.base;var der=asn1.constants.der;function DEREncoder(entity){this.enc='der';this.name=entity.name;this.entity=entity;this.tree=new DERNode();this.tree._init(entity.body);};module.exports=DEREncoder;DEREncoder.prototype.encode=function encode(data,reporter){return this.tree._encode(data,reporter).join();};function DERNode(parent){base.Node.call(this,'der',parent);}
inherits(DERNode,base.Node);DERNode.prototype._encodeComposite=function encodeComposite(tag,primitive,cls,content){var encodedTag=encodeTag(tag,primitive,cls,this.reporter);if(content.length<0x80){var header=new Buffer(2);header[0]=encodedTag;header[1]=content.length;return this._createEncoderBuffer([header,content]);}
var lenOctets=1;for(var i=content.length;i>=0x100;i>>=8)
lenOctets++;var header=new Buffer(1+1+lenOctets);header[0]=encodedTag;header[1]=0x80|lenOctets;for(var i=1+lenOctets,j=content.length;j>0;i--,j>>=8)
header[i]=j&0xff;return this._createEncoderBuffer([header,content]);};DERNode.prototype._encodeStr=function encodeStr(str,tag){if(tag==='bitstr'){return this._createEncoderBuffer([str.unused|0,str.data]);}else if(tag==='bmpstr'){var buf=new Buffer(str.length*2);for(var i=0;i<str.length;i++){buf.writeUInt16BE(str.charCodeAt(i),i*2);}
return this._createEncoderBuffer(buf);}else if(tag==='numstr'){if(!this._isNumstr(str)){return this.reporter.error('Encoding of string type: numstr supports '+
'only digits and space');}
return this._createEncoderBuffer(str);}else if(tag==='printstr'){if(!this._isPrintstr(str)){return this.reporter.error('Encoding of string type: printstr supports '+
'only latin upper and lower case letters, '+
'digits, space, apostrophe, left and rigth '+
'parenthesis, plus sign, comma, hyphen, '+
'dot, slash, colon, equal sign, '+
'question mark');}
return this._createEncoderBuffer(str);}else if(/str$/.test(tag)){return this._createEncoderBuffer(str);}else if(tag==='objDesc'){return this._createEncoderBuffer(str);}else{return this.reporter.error('Encoding of string type: '+tag+
' unsupported');}};DERNode.prototype._encodeObjid=function encodeObjid(id,values,relative){if(typeof id==='string'){if(!values)
return this.reporter.error('string objid given, but no values map found');if(!values.hasOwnProperty(id))
return this.reporter.error('objid not found in values map');id=values[id].split(/[\s\.]+/g);for(var i=0;i<id.length;i++)
id[i]|=0;}else if(Array.isArray(id)){id=id.slice();for(var i=0;i<id.length;i++)
id[i]|=0;}
if(!Array.isArray(id)){return this.reporter.error('objid() should be either array or string, '+
'got: '+JSON.stringify(id));}
if(!relative){if(id[1]>=40)
return this.reporter.error('Second objid identifier OOB');id.splice(0,2,id[0]*40+id[1]);}
var size=0;for(var i=0;i<id.length;i++){var ident=id[i];for(size++;ident>=0x80;ident>>=7)
size++;}
var objid=new Buffer(size);var offset=objid.length-1;for(var i=id.length-1;i>=0;i--){var ident=id[i];objid[offset--]=ident&0x7f;while((ident>>=7)>0)
objid[offset--]=0x80|(ident&0x7f);}
return this._createEncoderBuffer(objid);};function two(num){if(num<10)
return '0'+num;else
return num;}
DERNode.prototype._encodeTime=function encodeTime(time,tag){var str;var date=new Date(time);if(tag==='gentime'){str=[two(date.getFullYear()),two(date.getUTCMonth()+1),two(date.getUTCDate()),two(date.getUTCHours()),two(date.getUTCMinutes()),two(date.getUTCSeconds()),'Z'].join('');}else if(tag==='utctime'){str=[two(date.getFullYear()%100),two(date.getUTCMonth()+1),two(date.getUTCDate()),two(date.getUTCHours()),two(date.getUTCMinutes()),two(date.getUTCSeconds()),'Z'].join('');}else{this.reporter.error('Encoding '+tag+' time is not supported yet');}
return this._encodeStr(str,'octstr');};DERNode.prototype._encodeNull=function encodeNull(){return this._createEncoderBuffer('');};DERNode.prototype._encodeInt=function encodeInt(num,values){if(typeof num==='string'){if(!values)
return this.reporter.error('String int or enum given, but no values map');if(!values.hasOwnProperty(num)){return this.reporter.error('Values map doesn\'t contain: '+
JSON.stringify(num));}
num=values[num];}
if(typeof num!=='number'&&!Buffer.isBuffer(num)){var numArray=num.toArray();if(!num.sign&&numArray[0]&0x80){numArray.unshift(0);}
num=new Buffer(numArray);}
if(Buffer.isBuffer(num)){var size=num.length;if(num.length===0)
size++;var out=new Buffer(size);num.copy(out);if(num.length===0)
out[0]=0
return this._createEncoderBuffer(out);}
if(num<0x80)
return this._createEncoderBuffer(num);if(num<0x100)
return this._createEncoderBuffer([0,num]);var size=1;for(var i=num;i>=0x100;i>>=8)
size++;var out=new Array(size);for(var i=out.length-1;i>=0;i--){out[i]=num&0xff;num>>=8;}
if(out[0]&0x80){out.unshift(0);}
return this._createEncoderBuffer(new Buffer(out));};DERNode.prototype._encodeBool=function encodeBool(value){return this._createEncoderBuffer(value?0xff:0);};DERNode.prototype._use=function use(entity,obj){if(typeof entity==='function')
entity=entity(obj);return entity._getEncoder('der').tree;};DERNode.prototype._skipDefault=function skipDefault(dataBuffer,reporter,parent){var state=this._baseState;var i;if(state['default']===null)
return false;var data=dataBuffer.join();if(state.defaultBuffer===undefined)
state.defaultBuffer=this._encodeValue(state['default'],reporter,parent).join();if(data.length!==state.defaultBuffer.length)
return false;for(i=0;i<data.length;i++)
if(data[i]!==state.defaultBuffer[i])
return false;return true;};function encodeTag(tag,primitive,cls,reporter){var res;if(tag==='seqof')
tag='seq';else if(tag==='setof')
tag='set';if(der.tagByName.hasOwnProperty(tag))
res=der.tagByName[tag];else if(typeof tag==='number'&&(tag|0)===tag)
res=tag;else
return reporter.error('Unknown tag: '+tag);if(res>=0x1f)
return reporter.error('Multi-octet tag encoding unsupported');if(!primitive)
res|=0x20;res|=(der.tagClassByName[cls||'universal']<<6);return res;}}),(function(module,exports){module.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}}),(function(module,exports,__webpack_require__){var createHash=__webpack_require__(103)
var Buffer=__webpack_require__(4).Buffer
module.exports=function(seed,len){var t=Buffer.alloc(0)
var i=0
var c
while(t.length<len){c=i2ops(i++)
t=Buffer.concat([t,createHash('sha1').update(seed).update(c).digest()])}
return t.slice(0,len)}
function i2ops(c){var out=Buffer.allocUnsafe(4)
out.writeUInt32BE(c,0)
return out}}),(function(module,exports){module.exports=function xor(a,b){var len=a.length
var i=-1
while(++i<len){a[i]^=b[i]}
return a}}),(function(module,exports,__webpack_require__){var BN=__webpack_require__(29)
var Buffer=__webpack_require__(4).Buffer
function withPublic(paddedMsg,key){return Buffer.from(paddedMsg.toRed(BN.mont(key.modulus)).redPow(new BN(key.publicExponent)).fromRed().toArray())}
module.exports=withPublic}),(function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:true});(function(global,process){var __WEBPACK_IMPORTED_MODULE_0_argsarray__=__webpack_require__(744);var __WEBPACK_IMPORTED_MODULE_0_argsarray___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_argsarray__);var __WEBPACK_IMPORTED_MODULE_1_immediate__=__webpack_require__(745);var __WEBPACK_IMPORTED_MODULE_1_immediate___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_immediate__);var __WEBPACK_IMPORTED_MODULE_2_events__=__webpack_require__(104);var __WEBPACK_IMPORTED_MODULE_2_events___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_events__);var __WEBPACK_IMPORTED_MODULE_3_inherits__=__webpack_require__(7);var __WEBPACK_IMPORTED_MODULE_3_inherits___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_inherits__);var __WEBPACK_IMPORTED_MODULE_4_spark_md5__=__webpack_require__(746);var __WEBPACK_IMPORTED_MODULE_4_spark_md5___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_spark_md5__);var __WEBPACK_IMPORTED_MODULE_5_uuid__=__webpack_require__(747);var __WEBPACK_IMPORTED_MODULE_5_uuid___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_uuid__);var __WEBPACK_IMPORTED_MODULE_6_vuvuzela__=__webpack_require__(750);var __WEBPACK_IMPORTED_MODULE_6_vuvuzela___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_vuvuzela__);function isBinaryObject(object){return(typeof ArrayBuffer!=='undefined'&&object instanceof ArrayBuffer)||(typeof Blob!=='undefined'&&object instanceof Blob);}
function cloneArrayBuffer(buff){if(typeof buff.slice==='function'){return buff.slice(0);}
var target=new ArrayBuffer(buff.byteLength);var targetArray=new Uint8Array(target);var sourceArray=new Uint8Array(buff);targetArray.set(sourceArray);return target;}
function cloneBinaryObject(object){if(object instanceof ArrayBuffer){return cloneArrayBuffer(object);}
var size=object.size;var type=object.type;if(typeof object.slice==='function'){return object.slice(0,size,type);}
return object.webkitSlice(0,size,type);}
var funcToString=Function.prototype.toString;var objectCtorString=funcToString.call(Object);function isPlainObject(value){var proto=Object.getPrototypeOf(value);if(proto===null){return true;}
var Ctor=proto.constructor;return(typeof Ctor=='function'&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString);}
function clone(object){var newObject;var i;var len;if(!object||typeof object!=='object'){return object;}
if(Array.isArray(object)){newObject=[];for(i=0,len=object.length;i<len;i++){newObject[i]=clone(object[i]);}
return newObject;}
if(object instanceof Date){return object.toISOString();}
if(isBinaryObject(object)){return cloneBinaryObject(object);}
if(!isPlainObject(object)){return object;}
newObject={};for(i in object){if(Object.prototype.hasOwnProperty.call(object,i)){var value=clone(object[i]);if(typeof value!=='undefined'){newObject[i]=value;}}}
return newObject;}
function once(fun){var called=false;return __WEBPACK_IMPORTED_MODULE_0_argsarray___default()(function(args){if(called){throw new Error('once called more than once');}else{called=true;fun.apply(this,args);}});}
function toPromise(func){return __WEBPACK_IMPORTED_MODULE_0_argsarray___default()(function(args){args=clone(args);var self=this;var usedCB=(typeof args[args.length-1]==='function')?args.pop():false;var promise=new Promise(function(fulfill,reject){var resp;try{var callback=once(function(err,mesg){if(err){reject(err);}else{fulfill(mesg);}});args.push(callback);resp=func.apply(self,args);if(resp&&typeof resp.then==='function'){fulfill(resp);}}catch(e){reject(e);}});if(usedCB){promise.then(function(result){usedCB(null,result);},usedCB);}
return promise;});}
function logApiCall(self,name,args){if(self.constructor.listeners('debug').length){var logArgs=['api',self.name,name];for(var i=0;i<args.length-1;i++){logArgs.push(args[i]);}
self.constructor.emit('debug',logArgs);var origCallback=args[args.length-1];args[args.length-1]=function(err,res){var responseArgs=['api',self.name,name];responseArgs=responseArgs.concat(err?['error',err]:['success',res]);self.constructor.emit('debug',responseArgs);origCallback(err,res);};}}
function adapterFun(name,callback){return toPromise(__WEBPACK_IMPORTED_MODULE_0_argsarray___default()(function(args){if(this._closed){return Promise.reject(new Error('database is closed'));}
if(this._destroyed){return Promise.reject(new Error('database is destroyed'));}
var self=this;logApiCall(self,name,args);if(!this.taskqueue.isReady){return new Promise(function(fulfill,reject){self.taskqueue.addTask(function(failed){if(failed){reject(failed);}else{fulfill(self[name].apply(self,args));}});});}
return callback.apply(this,args);}));}
function mangle(key){return '$'+key;}
function unmangle(key){return key.substring(1);}
function Map$1(){this._store={};}
Map$1.prototype.get=function(key){var mangled=mangle(key);return this._store[mangled];};Map$1.prototype.set=function(key,value){var mangled=mangle(key);this._store[mangled]=value;return true;};Map$1.prototype.has=function(key){var mangled=mangle(key);return mangled in this._store;};Map$1.prototype.delete=function(key){var mangled=mangle(key);var res=mangled in this._store;delete this._store[mangled];return res;};Map$1.prototype.forEach=function(cb){var keys=Object.keys(this._store);for(var i=0,len=keys.length;i<len;i++){var key=keys[i];var value=this._store[key];key=unmangle(key);cb(value,key);}};Object.defineProperty(Map$1.prototype,'size',{get:function(){return Object.keys(this._store).length;}});function Set$1(array){this._store=new Map$1();if(array&&Array.isArray(array)){for(var i=0,len=array.length;i<len;i++){this.add(array[i]);}}}
Set$1.prototype.add=function(key){return this._store.set(key,true);};Set$1.prototype.has=function(key){return this._store.has(key);};Set$1.prototype.forEach=function(cb){this._store.forEach(function(value,key){cb(key);});};Object.defineProperty(Set$1.prototype,'size',{get:function(){return this._store.size;}});function supportsMapAndSet(){if(typeof Symbol==='undefined'||typeof Map==='undefined'||typeof Set==='undefined'){return false;}
var prop=Object.getOwnPropertyDescriptor(Map,Symbol.species);return prop&&'get'in prop&&Map[Symbol.species]===Map;}
var ExportedSet;var ExportedMap;{if(supportsMapAndSet()){ExportedSet=Set;ExportedMap=Map;}else{ExportedSet=Set$1;ExportedMap=Map$1;}}
function pick(obj,arr){var res={};for(var i=0,len=arr.length;i<len;i++){var prop=arr[i];if(prop in obj){res[prop]=obj[prop];}}
return res;}
var MAX_NUM_CONCURRENT_REQUESTS=6;function identityFunction(x){return x;}
function formatResultForOpenRevsGet(result){return[{ok:result}];}
function bulkGet(db,opts,callback){var requests=opts.docs;var requestsById=new ExportedMap();requests.forEach(function(request){if(requestsById.has(request.id)){requestsById.get(request.id).push(request);}else{requestsById.set(request.id,[request]);}});var numDocs=requestsById.size;var numDone=0;var perDocResults=new Array(numDocs);function collapseResultsAndFinish(){var results=[];perDocResults.forEach(function(res){res.docs.forEach(function(info){results.push({id:res.id,docs:[info]});});});callback(null,{results:results});}
function checkDone(){if(++numDone===numDocs){collapseResultsAndFinish();}}
function gotResult(docIndex,id,docs){perDocResults[docIndex]={id:id,docs:docs};checkDone();}
var allRequests=[];requestsById.forEach(function(value,key){allRequests.push(key);});var i=0;function nextBatch(){if(i>=allRequests.length){return;}
var upTo=Math.min(i+MAX_NUM_CONCURRENT_REQUESTS,allRequests.length);var batch=allRequests.slice(i,upTo);processBatch(batch,i);i+=batch.length;}
function processBatch(batch,offset){batch.forEach(function(docId,j){var docIdx=offset+j;var docRequests=requestsById.get(docId);var docOpts=pick(docRequests[0],['atts_since','attachments']);docOpts.open_revs=docRequests.map(function(request){return request.rev;});docOpts.open_revs=docOpts.open_revs.filter(identityFunction);var formatResult=identityFunction;if(docOpts.open_revs.length===0){delete docOpts.open_revs;formatResult=formatResultForOpenRevsGet;}
['revs','attachments','binary','ajax','latest'].forEach(function(param){if(param in opts){docOpts[param]=opts[param];}});db.get(docId,docOpts,function(err,res){var result;if(err){result=[{error:err}];}else{result=formatResult(res);}
gotResult(docIdx,docId,result);nextBatch();});});}
nextBatch();}
var hasLocal;try{localStorage.setItem('_pouch_check_localstorage',1);hasLocal=!!localStorage.getItem('_pouch_check_localstorage');}catch(e){hasLocal=false;}
function hasLocalStorage(){return hasLocal;}
__WEBPACK_IMPORTED_MODULE_3_inherits___default()(Changes,__WEBPACK_IMPORTED_MODULE_2_events__["EventEmitter"]);function attachBrowserEvents(self){if(hasLocalStorage()){addEventListener("storage",function(e){self.emit(e.key);});}}
function Changes(){__WEBPACK_IMPORTED_MODULE_2_events__["EventEmitter"].call(this);this._listeners={};attachBrowserEvents(this);}
Changes.prototype.addListener=function(dbName,id,db,opts){if(this._listeners[id]){return;}
var self=this;var inprogress=false;function eventFunction(){if(!self._listeners[id]){return;}
if(inprogress){inprogress='waiting';return;}
inprogress=true;var changesOpts=pick(opts,['style','include_docs','attachments','conflicts','filter','doc_ids','view','since','query_params','binary','return_docs']);function onError(){inprogress=false;}
db.changes(changesOpts).on('change',function(c){if(c.seq>opts.since&&!opts.cancelled){opts.since=c.seq;opts.onChange(c);}}).on('complete',function(){if(inprogress==='waiting'){__WEBPACK_IMPORTED_MODULE_1_immediate___default()(eventFunction);}
inprogress=false;}).on('error',onError);}
this._listeners[id]=eventFunction;this.on(dbName,eventFunction);};Changes.prototype.removeListener=function(dbName,id){if(!(id in this._listeners)){return;}
__WEBPACK_IMPORTED_MODULE_2_events__["EventEmitter"].prototype.removeListener.call(this,dbName,this._listeners[id]);delete this._listeners[id];};Changes.prototype.notifyLocalWindows=function(dbName){if(hasLocalStorage()){localStorage[dbName]=(localStorage[dbName]==="a")?"b":"a";}};Changes.prototype.notify=function(dbName){this.emit(dbName);this.notifyLocalWindows(dbName);};function guardedConsole(method){if(typeof console!=='undefined'&&typeof console[method]==='function'){var args=Array.prototype.slice.call(arguments,1);console[method].apply(console,args);}}
function randomNumber(min,max){var maxTimeout=600000;min=parseInt(min,10)||0;max=parseInt(max,10);if(max!==max||max<=min){max=(min||1)<<1;}else{max=max+1;}
if(max>maxTimeout){min=maxTimeout>>1;max=maxTimeout;}
var ratio=Math.random();var range=max-min;return~~(range*ratio+min);}
function defaultBackOff(min){var max=0;if(!min){max=2000;}
return randomNumber(min,max);}
function explainError(status,str){guardedConsole('info','The above '+status+' is totally normal. '+str);}
var assign;{if(typeof Object.assign==='function'){assign=Object.assign;}else{assign=function(target){var to=Object(target);for(var index=1;index<arguments.length;index++){var nextSource=arguments[index];if(nextSource!=null){for(var nextKey in nextSource){if(Object.prototype.hasOwnProperty.call(nextSource,nextKey)){to[nextKey]=nextSource[nextKey];}}}}
return to;};}}
var $inject_Object_assign=assign;__WEBPACK_IMPORTED_MODULE_3_inherits___default()(PouchError,Error);function PouchError(status,error,reason){Error.call(this,reason);this.status=status;this.name=error;this.message=reason;this.error=true;}
PouchError.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason});};var UNAUTHORIZED=new PouchError(401,'unauthorized',"Name or password is incorrect.");var MISSING_BULK_DOCS=new PouchError(400,'bad_request',"Missing JSON list of 'docs'");var MISSING_DOC=new PouchError(404,'not_found','missing');var REV_CONFLICT=new PouchError(409,'conflict','Document update conflict');var INVALID_ID=new PouchError(400,'bad_request','_id field must contain a string');var MISSING_ID=new PouchError(412,'missing_id','_id is required for puts');var RESERVED_ID=new PouchError(400,'bad_request','Only reserved document ids may start with underscore.');var NOT_OPEN=new PouchError(412,'precondition_failed','Database not open');var UNKNOWN_ERROR=new PouchError(500,'unknown_error','Database encountered an unknown error');var BAD_ARG=new PouchError(500,'badarg','Some query argument is invalid');var INVALID_REQUEST=new PouchError(400,'invalid_request','Request was invalid');var QUERY_PARSE_ERROR=new PouchError(400,'query_parse_error','Some query parameter is invalid');var DOC_VALIDATION=new PouchError(500,'doc_validation','Bad special document member');var BAD_REQUEST=new PouchError(400,'bad_request','Something wrong with the request');var NOT_AN_OBJECT=new PouchError(400,'bad_request','Document must be a JSON object');var DB_MISSING=new PouchError(404,'not_found','Database not found');var IDB_ERROR=new PouchError(500,'indexed_db_went_bad','unknown');var WSQ_ERROR=new PouchError(500,'web_sql_went_bad','unknown');var LDB_ERROR=new PouchError(500,'levelDB_went_went_bad','unknown');var FORBIDDEN=new PouchError(403,'forbidden','Forbidden by design doc validate_doc_update function');var INVALID_REV=new PouchError(400,'bad_request','Invalid rev format');var FILE_EXISTS=new PouchError(412,'file_exists','The database could not be created, the file already exists.');var MISSING_STUB=new PouchError(412,'missing_stub','A pre-existing attachment stub wasn\'t found');var INVALID_URL=new PouchError(413,'invalid_url','Provided URL is invalid');function createError(error,reason){function CustomPouchError(reason){for(var p in error){if(typeof error[p]!=='function'){this[p]=error[p];}}
if(reason!==undefined){this.reason=reason;}}
CustomPouchError.prototype=PouchError.prototype;return new CustomPouchError(reason);}
function generateErrorFromResponse(err){if(typeof err!=='object'){var data=err;err=UNKNOWN_ERROR;err.data=data;}
if('error'in err&&err.error==='conflict'){err.name='conflict';err.status=409;}
if(!('name'in err)){err.name=err.error||'unknown';}
if(!('status'in err)){err.status=500;}
if(!('message'in err)){err.message=err.message||err.reason;}
return err;}
function tryFilter(filter,doc,req){try{return!filter(doc,req);}catch(err){var msg='Filter function threw: '+err.toString();return createError(BAD_REQUEST,msg);}}
function filterChange(opts){var req={};var hasFilter=opts.filter&&typeof opts.filter==='function';req.query=opts.query_params;return function filter(change){if(!change.doc){change.doc={};}
var filterReturn=hasFilter&&tryFilter(opts.filter,change.doc,req);if(typeof filterReturn==='object'){return filterReturn;}
if(filterReturn){return false;}
if(!opts.include_docs){delete change.doc;}else if(!opts.attachments){for(var att in change.doc._attachments){if(change.doc._attachments.hasOwnProperty(att)){change.doc._attachments[att].stub=true;}}}
return true;};}
function flatten(arrs){var res=[];for(var i=0,len=arrs.length;i<len;i++){res=res.concat(arrs[i]);}
return res;}
function invalidIdError(id){var err;if(!id){err=createError(MISSING_ID);}else if(typeof id!=='string'){err=createError(INVALID_ID);}else if(/^_/.test(id)&&!(/^_(design|local)/).test(id)){err=createError(RESERVED_ID);}
if(err){throw err;}}
function isRemote(db){if(typeof db._remote==='boolean'){return db._remote;}
if(typeof db.type==='function'){guardedConsole('warn','db.type() is deprecated and will be removed in '+
'a future version of PouchDB');return db.type()==='http';}
return false;}
function listenerCount(ee,type){return 'listenerCount'in ee?ee.listenerCount(type):__WEBPACK_IMPORTED_MODULE_2_events__["EventEmitter"].listenerCount(ee,type);}
function parseDesignDocFunctionName(s){if(!s){return null;}
var parts=s.split('/');if(parts.length===2){return parts;}
if(parts.length===1){return[s,s];}
return null;}
function normalizeDesignDocFunctionName(s){var normalized=parseDesignDocFunctionName(s);return normalized?normalized.join('/'):null;}
var keys=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];var qName="queryKey";var qParser=/(?:^|&)([^&=]*)=?([^&]*)/g;var parser=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;function parseUri(str){var m=parser.exec(str);var uri={};var i=14;while(i--){var key=keys[i];var value=m[i]||"";var encoded=['user','password'].indexOf(key)!==-1;uri[key]=encoded?decodeURIComponent(value):value;}
uri[qName]={};uri[keys[12]].replace(qParser,function($0,$1,$2){if($1){uri[qName][$1]=$2;}});return uri;}
function scopeEval(source,scope){var keys=[];var values=[];for(var key in scope){if(scope.hasOwnProperty(key)){keys.push(key);values.push(scope[key]);}}
keys.push(source);return Function.apply(null,keys).apply(null,values);}
function upsert(db,docId,diffFun){return new Promise(function(fulfill,reject){db.get(docId,function(err,doc){if(err){if(err.status!==404){return reject(err);}
doc={};}
var docRev=doc._rev;var newDoc=diffFun(doc);if(!newDoc){return fulfill({updated:false,rev:docRev});}
newDoc._id=docId;newDoc._rev=docRev;fulfill(tryAndPut(db,newDoc,diffFun));});});}
function tryAndPut(db,doc,diffFun){return db.put(doc).then(function(res){return{updated:true,rev:res.rev};},function(err){if(err.status!==409){throw err;}
return upsert(db,doc._id,diffFun);});}
var thisAtob=function(str){return atob(str);};var thisBtoa=function(str){return btoa(str);};function createBlob(parts,properties){parts=parts||[];properties=properties||{};try{return new Blob(parts,properties);}catch(e){if(e.name!=="TypeError"){throw e;}
var Builder=typeof BlobBuilder!=='undefined'?BlobBuilder:typeof MSBlobBuilder!=='undefined'?MSBlobBuilder:typeof MozBlobBuilder!=='undefined'?MozBlobBuilder:WebKitBlobBuilder;var builder=new Builder();for(var i=0;i<parts.length;i+=1){builder.append(parts[i]);}
return builder.getBlob(properties.type);}}
function binaryStringToArrayBuffer(bin){var length=bin.length;var buf=new ArrayBuffer(length);var arr=new Uint8Array(buf);for(var i=0;i<length;i++){arr[i]=bin.charCodeAt(i);}
return buf;}
function binStringToBluffer(binString,type){return createBlob([binaryStringToArrayBuffer(binString)],{type:type});}
function b64ToBluffer(b64,type){return binStringToBluffer(thisAtob(b64),type);}
function arrayBufferToBinaryString(buffer){var binary='';var bytes=new Uint8Array(buffer);var length=bytes.byteLength;for(var i=0;i<length;i++){binary+=String.fromCharCode(bytes[i]);}
return binary;}
function readAsBinaryString(blob,callback){var reader=new FileReader();var hasBinaryString=typeof reader.readAsBinaryString==='function';reader.onloadend=function(e){var result=e.target.result||'';if(hasBinaryString){return callback(result);}
callback(arrayBufferToBinaryString(result));};if(hasBinaryString){reader.readAsBinaryString(blob);}else{reader.readAsArrayBuffer(blob);}}
function blobToBinaryString(blobOrBuffer,callback){readAsBinaryString(blobOrBuffer,function(bin){callback(bin);});}
function blobToBase64(blobOrBuffer,callback){blobToBinaryString(blobOrBuffer,function(base64){callback(thisBtoa(base64));});}
function readAsArrayBuffer(blob,callback){var reader=new FileReader();reader.onloadend=function(e){var result=e.target.result||new ArrayBuffer(0);callback(result);};reader.readAsArrayBuffer(blob);}
var setImmediateShim=global.setImmediate||global.setTimeout;var MD5_CHUNK_SIZE=32768;function rawToBase64(raw){return thisBtoa(raw);}
function sliceBlob(blob,start,end){if(blob.webkitSlice){return blob.webkitSlice(start,end);}
return blob.slice(start,end);}
function appendBlob(buffer,blob,start,end,callback){if(start>0||end<blob.size){blob=sliceBlob(blob,start,end);}
readAsArrayBuffer(blob,function(arrayBuffer){buffer.append(arrayBuffer);callback();});}
function appendString(buffer,string,start,end,callback){if(start>0||end<string.length){string=string.substring(start,end);}
buffer.appendBinary(string);callback();}
function binaryMd5(data,callback){var inputIsString=typeof data==='string';var len=inputIsString?data.length:data.size;var chunkSize=Math.min(MD5_CHUNK_SIZE,len);var chunks=Math.ceil(len/chunkSize);var currentChunk=0;var buffer=inputIsString?new __WEBPACK_IMPORTED_MODULE_4_spark_md5___default.a():new __WEBPACK_IMPORTED_MODULE_4_spark_md5___default.a.ArrayBuffer();var append=inputIsString?appendString:appendBlob;function next(){setImmediateShim(loadNextChunk);}
function done(){var raw=buffer.end(true);var base64=rawToBase64(raw);callback(base64);buffer.destroy();}
function loadNextChunk(){var start=currentChunk*chunkSize;var end=start+chunkSize;currentChunk++;if(currentChunk<chunks){append(buffer,data,start,end,next);}else{append(buffer,data,start,end,done);}}
loadNextChunk();}
function stringMd5(string){return __WEBPACK_IMPORTED_MODULE_4_spark_md5___default.a.hash(string);}
function rev$$1(doc,deterministic_revs){var clonedDoc=clone(doc);if(!deterministic_revs){return __WEBPACK_IMPORTED_MODULE_5_uuid___default.a.v4().replace(/-/g,'').toLowerCase();}
delete clonedDoc._rev_tree;return stringMd5(JSON.stringify(clonedDoc));}
var uuid=__WEBPACK_IMPORTED_MODULE_5_uuid___default.a.v4;function winningRev(metadata){var winningId;var winningPos;var winningDeleted;var toVisit=metadata.rev_tree.slice();var node;while((node=toVisit.pop())){var tree=node.ids;var branches=tree[2];var pos=node.pos;if(branches.length){for(var i=0,len=branches.length;i<len;i++){toVisit.push({pos:pos+1,ids:branches[i]});}
continue;}
var deleted=!!tree[1].deleted;var id=tree[0];if(!winningId||(winningDeleted!==deleted?winningDeleted:winningPos!==pos?winningPos<pos:winningId<id)){winningId=id;winningPos=pos;winningDeleted=deleted;}}
return winningPos+'-'+winningId;}
function traverseRevTree(revs,callback){var toVisit=revs.slice();var node;while((node=toVisit.pop())){var pos=node.pos;var tree=node.ids;var branches=tree[2];var newCtx=callback(branches.length===0,pos,tree[0],node.ctx,tree[1]);for(var i=0,len=branches.length;i<len;i++){toVisit.push({pos:pos+1,ids:branches[i],ctx:newCtx});}}}
function sortByPos(a,b){return a.pos-b.pos;}
function collectLeaves(revs){var leaves=[];traverseRevTree(revs,function(isLeaf,pos,id,acc,opts){if(isLeaf){leaves.push({rev:pos+"-"+id,pos:pos,opts:opts});}});leaves.sort(sortByPos).reverse();for(var i=0,len=leaves.length;i<len;i++){delete leaves[i].pos;}
return leaves;}
function collectConflicts(metadata){var win=winningRev(metadata);var leaves=collectLeaves(metadata.rev_tree);var conflicts=[];for(var i=0,len=leaves.length;i<len;i++){var leaf=leaves[i];if(leaf.rev!==win&&!leaf.opts.deleted){conflicts.push(leaf.rev);}}
return conflicts;}
function compactTree(metadata){var revs=[];traverseRevTree(metadata.rev_tree,function(isLeaf,pos,revHash,ctx,opts){if(opts.status==='available'&&!isLeaf){revs.push(pos+'-'+revHash);opts.status='missing';}});return revs;}
function rootToLeaf(revs){var paths=[];var toVisit=revs.slice();var node;while((node=toVisit.pop())){var pos=node.pos;var tree=node.ids;var id=tree[0];var opts=tree[1];var branches=tree[2];var isLeaf=branches.length===0;var history=node.history?node.history.slice():[];history.push({id:id,opts:opts});if(isLeaf){paths.push({pos:(pos+1-history.length),ids:history});}
for(var i=0,len=branches.length;i<len;i++){toVisit.push({pos:pos+1,ids:branches[i],history:history});}}
return paths.reverse();}
function sortByPos$1(a,b){return a.pos-b.pos;}
function binarySearch(arr,item,comparator){var low=0;var high=arr.length;var mid;while(low<high){mid=(low+high)>>>1;if(comparator(arr[mid],item)<0){low=mid+1;}else{high=mid;}}
return low;}
function insertSorted(arr,item,comparator){var idx=binarySearch(arr,item,comparator);arr.splice(idx,0,item);}
function pathToTree(path,numStemmed){var root;var leaf;for(var i=numStemmed,len=path.length;i<len;i++){var node=path[i];var currentLeaf=[node.id,node.opts,[]];if(leaf){leaf[2].push(currentLeaf);leaf=currentLeaf;}else{root=leaf=currentLeaf;}}
return root;}
function compareTree(a,b){return a[0]<b[0]?-1:1;}
function mergeTree(in_tree1,in_tree2){var queue=[{tree1:in_tree1,tree2:in_tree2}];var conflicts=false;while(queue.length>0){var item=queue.pop();var tree1=item.tree1;var tree2=item.tree2;if(tree1[1].status||tree2[1].status){tree1[1].status=(tree1[1].status==='available'||tree2[1].status==='available')?'available':'missing';}
for(var i=0;i<tree2[2].length;i++){if(!tree1[2][0]){conflicts='new_leaf';tree1[2][0]=tree2[2][i];continue;}
var merged=false;for(var j=0;j<tree1[2].length;j++){if(tree1[2][j][0]===tree2[2][i][0]){queue.push({tree1:tree1[2][j],tree2:tree2[2][i]});merged=true;}}
if(!merged){conflicts='new_branch';insertSorted(tree1[2],tree2[2][i],compareTree);}}}
return{conflicts:conflicts,tree:in_tree1};}
function doMerge(tree,path,dontExpand){var restree=[];var conflicts=false;var merged=false;var res;if(!tree.length){return{tree:[path],conflicts:'new_leaf'};}
for(var i=0,len=tree.length;i<len;i++){var branch=tree[i];if(branch.pos===path.pos&&branch.ids[0]===path.ids[0]){res=mergeTree(branch.ids,path.ids);restree.push({pos:branch.pos,ids:res.tree});conflicts=conflicts||res.conflicts;merged=true;}else if(dontExpand!==true){var t1=branch.pos<path.pos?branch:path;var t2=branch.pos<path.pos?path:branch;var diff=t2.pos-t1.pos;var candidateParents=[];var trees=[];trees.push({ids:t1.ids,diff:diff,parent:null,parentIdx:null});while(trees.length>0){var item=trees.pop();if(item.diff===0){if(item.ids[0]===t2.ids[0]){candidateParents.push(item);}
continue;}
var elements=item.ids[2];for(var j=0,elementsLen=elements.length;j<elementsLen;j++){trees.push({ids:elements[j],diff:item.diff-1,parent:item.ids,parentIdx:j});}}
var el=candidateParents[0];if(!el){restree.push(branch);}else{res=mergeTree(el.ids,t2.ids);el.parent[2][el.parentIdx]=res.tree;restree.push({pos:t1.pos,ids:t1.ids});conflicts=conflicts||res.conflicts;merged=true;}}else{restree.push(branch);}}
if(!merged){restree.push(path);}
restree.sort(sortByPos$1);return{tree:restree,conflicts:conflicts||'internal_node'};}
function stem(tree,depth){var paths=rootToLeaf(tree);var stemmedRevs;var result;for(var i=0,len=paths.length;i<len;i++){var path=paths[i];var stemmed=path.ids;var node;if(stemmed.length>depth){if(!stemmedRevs){stemmedRevs={};}
var numStemmed=stemmed.length-depth;node={pos:path.pos+numStemmed,ids:pathToTree(stemmed,numStemmed)};for(var s=0;s<numStemmed;s++){var rev=(path.pos+s)+'-'+stemmed[s].id;stemmedRevs[rev]=true;}}else{node={pos:path.pos,ids:pathToTree(stemmed,0)};}
if(result){result=doMerge(result,node,true).tree;}else{result=[node];}}
if(stemmedRevs){traverseRevTree(result,function(isLeaf,pos,revHash){delete stemmedRevs[pos+'-'+revHash];});}
return{tree:result,revs:stemmedRevs?Object.keys(stemmedRevs):[]};}
function merge(tree,path,depth){var newTree=doMerge(tree,path);var stemmed=stem(newTree.tree,depth);return{tree:stemmed.tree,stemmedRevs:stemmed.revs,conflicts:newTree.conflicts};}
function revExists(revs,rev){var toVisit=revs.slice();var splitRev=rev.split('-');var targetPos=parseInt(splitRev[0],10);var targetId=splitRev[1];var node;while((node=toVisit.pop())){if(node.pos===targetPos&&node.ids[0]===targetId){return true;}
var branches=node.ids[2];for(var i=0,len=branches.length;i<len;i++){toVisit.push({pos:node.pos+1,ids:branches[i]});}}
return false;}
function getTrees(node){return node.ids;}
function isDeleted(metadata,rev){if(!rev){rev=winningRev(metadata);}
var id=rev.substring(rev.indexOf('-')+1);var toVisit=metadata.rev_tree.map(getTrees);var tree;while((tree=toVisit.pop())){if(tree[0]===id){return!!tree[1].deleted;}
toVisit=toVisit.concat(tree[2]);}}
function isLocalId(id){return(/^_local/).test(id);}
function latest(rev,metadata){var toVisit=metadata.rev_tree.slice();var node;while((node=toVisit.pop())){var pos=node.pos;var tree=node.ids;var id=tree[0];var opts=tree[1];var branches=tree[2];var isLeaf=branches.length===0;var history=node.history?node.history.slice():[];history.push({id:id,pos:pos,opts:opts});if(isLeaf){for(var i=0,len=history.length;i<len;i++){var historyNode=history[i];var historyRev=historyNode.pos+'-'+historyNode.id;if(historyRev===rev){return pos+'-'+id;}}}
for(var j=0,l=branches.length;j<l;j++){toVisit.push({pos:pos+1,ids:branches[j],history:history});}}
throw new Error('Unable to resolve latest revision for id '+metadata.id+', rev '+rev);}
__WEBPACK_IMPORTED_MODULE_3_inherits___default()(Changes$1,__WEBPACK_IMPORTED_MODULE_2_events__["EventEmitter"]);function tryCatchInChangeListener(self,change,pending,lastSeq){try{self.emit('change',change,pending,lastSeq);}catch(e){guardedConsole('error','Error in .on("change", function):',e);}}
function Changes$1(db,opts,callback){__WEBPACK_IMPORTED_MODULE_2_events__["EventEmitter"].call(this);var self=this;this.db=db;opts=opts?clone(opts):{};var complete=opts.complete=once(function(err,resp){if(err){if(listenerCount(self,'error')>0){self.emit('error',err);}}else{self.emit('complete',resp);}
self.removeAllListeners();db.removeListener('destroyed',onDestroy);});if(callback){self.on('complete',function(resp){callback(null,resp);});self.on('error',callback);}
function onDestroy(){self.cancel();}
db.once('destroyed',onDestroy);opts.onChange=function(change,pending,lastSeq){if(self.isCancelled){return;}
tryCatchInChangeListener(self,change,pending,lastSeq);};var promise=new Promise(function(fulfill,reject){opts.complete=function(err,res){if(err){reject(err);}else{fulfill(res);}};});self.once('cancel',function(){db.removeListener('destroyed',onDestroy);opts.complete(null,{status:'cancelled'});});this.then=promise.then.bind(promise);this['catch']=promise['catch'].bind(promise);this.then(function(result){complete(null,result);},complete);if(!db.taskqueue.isReady){db.taskqueue.addTask(function(failed){if(failed){opts.complete(failed);}else if(self.isCancelled){self.emit('cancel');}else{self.validateChanges(opts);}});}else{self.validateChanges(opts);}}
Changes$1.prototype.cancel=function(){this.isCancelled=true;if(this.db.taskqueue.isReady){this.emit('cancel');}};function processChange(doc,metadata,opts){var changeList=[{rev:doc._rev}];if(opts.style==='all_docs'){changeList=collectLeaves(metadata.rev_tree).map(function(x){return{rev:x.rev};});}
var change={id:metadata.id,changes:changeList,doc:doc};if(isDeleted(metadata,doc._rev)){change.deleted=true;}
if(opts.conflicts){change.doc._conflicts=collectConflicts(metadata);if(!change.doc._conflicts.length){delete change.doc._conflicts;}}
return change;}
Changes$1.prototype.validateChanges=function(opts){var callback=opts.complete;var self=this;if(PouchDB._changesFilterPlugin){PouchDB._changesFilterPlugin.validate(opts,function(err){if(err){return callback(err);}
self.doChanges(opts);});}else{self.doChanges(opts);}};Changes$1.prototype.doChanges=function(opts){var self=this;var callback=opts.complete;opts=clone(opts);if('live'in opts&&!('continuous'in opts)){opts.continuous=opts.live;}
opts.processChange=processChange;if(opts.since==='latest'){opts.since='now';}
if(!opts.since){opts.since=0;}
if(opts.since==='now'){this.db.info().then(function(info){if(self.isCancelled){callback(null,{status:'cancelled'});return;}
opts.since=info.update_seq;self.doChanges(opts);},callback);return;}
if(PouchDB._changesFilterPlugin){PouchDB._changesFilterPlugin.normalize(opts);if(PouchDB._changesFilterPlugin.shouldFilter(this,opts)){return PouchDB._changesFilterPlugin.filter(this,opts);}}else{['doc_ids','filter','selector','view'].forEach(function(key){if(key in opts){guardedConsole('warn','The "'+key+'" option was passed in to changes/replicate, '+
'but pouchdb-changes-filter plugin is not installed, so it '+
'was ignored. Please install the plugin to enable filtering.');}});}
if(!('descending'in opts)){opts.descending=false;}
opts.limit=opts.limit===0?1:opts.limit;opts.complete=callback;var newPromise=this.db._changes(opts);if(newPromise&&typeof newPromise.cancel==='function'){var cancel=self.cancel;self.cancel=__WEBPACK_IMPORTED_MODULE_0_argsarray___default()(function(args){newPromise.cancel();cancel.apply(this,args);});}};function compare(left,right){return left<right?-1:left>right?1:0;}
function yankError(callback,docId){return function(err,results){if(err||(results[0]&&results[0].error)){err=err||results[0];err.docId=docId;callback(err);}else{callback(null,results.length?results[0]:results);}};}
function cleanDocs(docs){for(var i=0;i<docs.length;i++){var doc=docs[i];if(doc._deleted){delete doc._attachments;}else if(doc._attachments){var atts=Object.keys(doc._attachments);for(var j=0;j<atts.length;j++){var att=atts[j];doc._attachments[att]=pick(doc._attachments[att],['data','digest','content_type','length','revpos','stub']);}}}}
function compareByIdThenRev(a,b){var idCompare=compare(a._id,b._id);if(idCompare!==0){return idCompare;}
var aStart=a._revisions?a._revisions.start:0;var bStart=b._revisions?b._revisions.start:0;return compare(aStart,bStart);}
function computeHeight(revs){var height={};var edges=[];traverseRevTree(revs,function(isLeaf,pos,id,prnt){var rev=pos+"-"+id;if(isLeaf){height[rev]=0;}
if(prnt!==undefined){edges.push({from:prnt,to:rev});}
return rev;});edges.reverse();edges.forEach(function(edge){if(height[edge.from]===undefined){height[edge.from]=1+height[edge.to];}else{height[edge.from]=Math.min(height[edge.from],1+height[edge.to]);}});return height;}
function allDocsKeysParse(opts){var keys=('limit'in opts)?opts.keys.slice(opts.skip,opts.limit+opts.skip):(opts.skip>0)?opts.keys.slice(opts.skip):opts.keys;opts.keys=keys;opts.skip=0;delete opts.limit;if(opts.descending){keys.reverse();opts.descending=false;}}
function doNextCompaction(self){var task=self._compactionQueue[0];var opts=task.opts;var callback=task.callback;self.get('_local/compaction').catch(function(){return false;}).then(function(doc){if(doc&&doc.last_seq){opts.last_seq=doc.last_seq;}
self._compact(opts,function(err,res){if(err){callback(err);}else{callback(null,res);}
__WEBPACK_IMPORTED_MODULE_1_immediate___default()(function(){self._compactionQueue.shift();if(self._compactionQueue.length){doNextCompaction(self);}});});});}
function attachmentNameError(name){if(name.charAt(0)==='_'){return name+' is not a valid attachment name, attachment '+
'names cannot start with \'_\'';}
return false;}
__WEBPACK_IMPORTED_MODULE_3_inherits___default()(AbstractPouchDB,__WEBPACK_IMPORTED_MODULE_2_events__["EventEmitter"]);function AbstractPouchDB(){__WEBPACK_IMPORTED_MODULE_2_events__["EventEmitter"].call(this);for(var p in AbstractPouchDB.prototype){if(typeof this[p]==='function'){this[p]=this[p].bind(this);}}}
AbstractPouchDB.prototype.post=adapterFun('post',function(doc,opts,callback){if(typeof opts==='function'){callback=opts;opts={};}
if(typeof doc!=='object'||Array.isArray(doc)){return callback(createError(NOT_AN_OBJECT));}
this.bulkDocs({docs:[doc]},opts,yankError(callback,doc._id));});AbstractPouchDB.prototype.put=adapterFun('put',function(doc,opts,cb){if(typeof opts==='function'){cb=opts;opts={};}
if(typeof doc!=='object'||Array.isArray(doc)){return cb(createError(NOT_AN_OBJECT));}
invalidIdError(doc._id);if(isLocalId(doc._id)&&typeof this._putLocal==='function'){if(doc._deleted){return this._removeLocal(doc,cb);}else{return this._putLocal(doc,cb);}}
var self=this;if(opts.force&&doc._rev){transformForceOptionToNewEditsOption();putDoc(function(err){var result=err?null:{ok:true,id:doc._id,rev:doc._rev};cb(err,result);});}else{putDoc(cb);}
function transformForceOptionToNewEditsOption(){var parts=doc._rev.split('-');var oldRevId=parts[1];var oldRevNum=parseInt(parts[0],10);var newRevNum=oldRevNum+1;var newRevId=rev$$1();doc._revisions={start:newRevNum,ids:[newRevId,oldRevId]};doc._rev=newRevNum+'-'+newRevId;opts.new_edits=false;}
function putDoc(next){if(typeof self._put==='function'&&opts.new_edits!==false){self._put(doc,opts,next);}else{self.bulkDocs({docs:[doc]},opts,yankError(next,doc._id));}}});AbstractPouchDB.prototype.putAttachment=adapterFun('putAttachment',function(docId,attachmentId,rev,blob,type){var api=this;if(typeof type==='function'){type=blob;blob=rev;rev=null;}
if(typeof type==='undefined'){type=blob;blob=rev;rev=null;}
if(!type){guardedConsole('warn','Attachment',attachmentId,'on document',docId,'is missing content_type');}
function createAttachment(doc){var prevrevpos='_rev'in doc?parseInt(doc._rev,10):0;doc._attachments=doc._attachments||{};doc._attachments[attachmentId]={content_type:type,data:blob,revpos:++prevrevpos};return api.put(doc);}
return api.get(docId).then(function(doc){if(doc._rev!==rev){throw createError(REV_CONFLICT);}
return createAttachment(doc);},function(err){if(err.reason===MISSING_DOC.message){return createAttachment({_id:docId});}else{throw err;}});});AbstractPouchDB.prototype.removeAttachment=adapterFun('removeAttachment',function(docId,attachmentId,rev,callback){var self=this;self.get(docId,function(err,obj){if(err){callback(err);return;}
if(obj._rev!==rev){callback(createError(REV_CONFLICT));return;}
if(!obj._attachments){return callback();}
delete obj._attachments[attachmentId];if(Object.keys(obj._attachments).length===0){delete obj._attachments;}
self.put(obj,callback);});});AbstractPouchDB.prototype.remove=adapterFun('remove',function(docOrId,optsOrRev,opts,callback){var doc;if(typeof optsOrRev==='string'){doc={_id:docOrId,_rev:optsOrRev};if(typeof opts==='function'){callback=opts;opts={};}}else{doc=docOrId;if(typeof optsOrRev==='function'){callback=optsOrRev;opts={};}else{callback=opts;opts=optsOrRev;}}
opts=opts||{};opts.was_delete=true;var newDoc={_id:doc._id,_rev:(doc._rev||opts.rev)};newDoc._deleted=true;if(isLocalId(newDoc._id)&&typeof this._removeLocal==='function'){return this._removeLocal(doc,callback);}
this.bulkDocs({docs:[newDoc]},opts,yankError(callback,newDoc._id));});AbstractPouchDB.prototype.revsDiff=adapterFun('revsDiff',function(req,opts,callback){if(typeof opts==='function'){callback=opts;opts={};}
var ids=Object.keys(req);if(!ids.length){return callback(null,{});}
var count=0;var missing=new ExportedMap();function addToMissing(id,revId){if(!missing.has(id)){missing.set(id,{missing:[]});}
missing.get(id).missing.push(revId);}
function processDoc(id,rev_tree){var missingForId=req[id].slice(0);traverseRevTree(rev_tree,function(isLeaf,pos,revHash,ctx,opts){var rev=pos+'-'+revHash;var idx=missingForId.indexOf(rev);if(idx===-1){return;}
missingForId.splice(idx,1);if(opts.status!=='available'){addToMissing(id,rev);}});missingForId.forEach(function(rev){addToMissing(id,rev);});}
ids.map(function(id){this._getRevisionTree(id,function(err,rev_tree){if(err&&err.status===404&&err.message==='missing'){missing.set(id,{missing:req[id]});}else if(err){return callback(err);}else{processDoc(id,rev_tree);}
if(++count===ids.length){var missingObj={};missing.forEach(function(value,key){missingObj[key]=value;});return callback(null,missingObj);}});},this);});AbstractPouchDB.prototype.bulkGet=adapterFun('bulkGet',function(opts,callback){bulkGet(this,opts,callback);});AbstractPouchDB.prototype.compactDocument=adapterFun('compactDocument',function(docId,maxHeight,callback){var self=this;this._getRevisionTree(docId,function(err,revTree){if(err){return callback(err);}
var height=computeHeight(revTree);var candidates=[];var revs=[];Object.keys(height).forEach(function(rev){if(height[rev]>maxHeight){candidates.push(rev);}});traverseRevTree(revTree,function(isLeaf,pos,revHash,ctx,opts){var rev=pos+'-'+revHash;if(opts.status==='available'&&candidates.indexOf(rev)!==-1){revs.push(rev);}});self._doCompaction(docId,revs,callback);});});AbstractPouchDB.prototype.compact=adapterFun('compact',function(opts,callback){if(typeof opts==='function'){callback=opts;opts={};}
var self=this;opts=opts||{};self._compactionQueue=self._compactionQueue||[];self._compactionQueue.push({opts:opts,callback:callback});if(self._compactionQueue.length===1){doNextCompaction(self);}});AbstractPouchDB.prototype._compact=function(opts,callback){var self=this;var changesOpts={return_docs:false,last_seq:opts.last_seq||0};var promises=[];function onChange(row){promises.push(self.compactDocument(row.id,0));}
function onComplete(resp){var lastSeq=resp.last_seq;Promise.all(promises).then(function(){return upsert(self,'_local/compaction',function deltaFunc(doc){if(!doc.last_seq||doc.last_seq<lastSeq){doc.last_seq=lastSeq;return doc;}
return false;});}).then(function(){callback(null,{ok:true});}).catch(callback);}
self.changes(changesOpts).on('change',onChange).on('complete',onComplete).on('error',callback);};AbstractPouchDB.prototype.get=adapterFun('get',function(id,opts,cb){if(typeof opts==='function'){cb=opts;opts={};}
if(typeof id!=='string'){return cb(createError(INVALID_ID));}
if(isLocalId(id)&&typeof this._getLocal==='function'){return this._getLocal(id,cb);}
var leaves=[],self=this;function finishOpenRevs(){var result=[];var count=leaves.length;if(!count){return cb(null,result);}
leaves.forEach(function(leaf){self.get(id,{rev:leaf,revs:opts.revs,latest:opts.latest,attachments:opts.attachments,binary:opts.binary},function(err,doc){if(!err){var existing;for(var i=0,l=result.length;i<l;i++){if(result[i].ok&&result[i].ok._rev===doc._rev){existing=true;break;}}
if(!existing){result.push({ok:doc});}}else{result.push({missing:leaf});}
count--;if(!count){cb(null,result);}});});}
if(opts.open_revs){if(opts.open_revs==="all"){this._getRevisionTree(id,function(err,rev_tree){if(err){return cb(err);}
leaves=collectLeaves(rev_tree).map(function(leaf){return leaf.rev;});finishOpenRevs();});}else{if(Array.isArray(opts.open_revs)){leaves=opts.open_revs;for(var i=0;i<leaves.length;i++){var l=leaves[i];if(!(typeof(l)==="string"&&/^\d+-/.test(l))){return cb(createError(INVALID_REV));}}
finishOpenRevs();}else{return cb(createError(UNKNOWN_ERROR,'function_clause'));}}
return;}
return this._get(id,opts,function(err,result){if(err){err.docId=id;return cb(err);}
var doc=result.doc;var metadata=result.metadata;var ctx=result.ctx;if(opts.conflicts){var conflicts=collectConflicts(metadata);if(conflicts.length){doc._conflicts=conflicts;}}
if(isDeleted(metadata,doc._rev)){doc._deleted=true;}
if(opts.revs||opts.revs_info){var splittedRev=doc._rev.split('-');var revNo=parseInt(splittedRev[0],10);var revHash=splittedRev[1];var paths=rootToLeaf(metadata.rev_tree);var path=null;for(var i=0;i<paths.length;i++){var currentPath=paths[i];var hashIndex=currentPath.ids.map(function(x){return x.id;}).indexOf(revHash);var hashFoundAtRevPos=hashIndex===(revNo-1);if(hashFoundAtRevPos||(!path&&hashIndex!==-1)){path=currentPath;}}
var indexOfRev=path.ids.map(function(x){return x.id;}).indexOf(doc._rev.split('-')[1])+1;var howMany=path.ids.length-indexOfRev;path.ids.splice(indexOfRev,howMany);path.ids.reverse();if(opts.revs){doc._revisions={start:(path.pos+path.ids.length)-1,ids:path.ids.map(function(rev){return rev.id;})};}
if(opts.revs_info){var pos=path.pos+path.ids.length;doc._revs_info=path.ids.map(function(rev){pos--;return{rev:pos+'-'+rev.id,status:rev.opts.status};});}}
if(opts.attachments&&doc._attachments){var attachments=doc._attachments;var count=Object.keys(attachments).length;if(count===0){return cb(null,doc);}
Object.keys(attachments).forEach(function(key){this._getAttachment(doc._id,key,attachments[key],{rev:doc._rev,binary:opts.binary,ctx:ctx},function(err,data){var att=doc._attachments[key];att.data=data;delete att.stub;delete att.length;if(!--count){cb(null,doc);}});},self);}else{if(doc._attachments){for(var key in doc._attachments){if(doc._attachments.hasOwnProperty(key)){doc._attachments[key].stub=true;}}}
cb(null,doc);}});});AbstractPouchDB.prototype.getAttachment=adapterFun('getAttachment',function(docId,attachmentId,opts,callback){var self=this;if(opts instanceof Function){callback=opts;opts={};}
this._get(docId,opts,function(err,res){if(err){return callback(err);}
if(res.doc._attachments&&res.doc._attachments[attachmentId]){opts.ctx=res.ctx;opts.binary=true;self._getAttachment(docId,attachmentId,res.doc._attachments[attachmentId],opts,callback);}else{return callback(createError(MISSING_DOC));}});});AbstractPouchDB.prototype.allDocs=adapterFun('allDocs',function(opts,callback){if(typeof opts==='function'){callback=opts;opts={};}
opts.skip=typeof opts.skip!=='undefined'?opts.skip:0;if(opts.start_key){opts.startkey=opts.start_key;}
if(opts.end_key){opts.endkey=opts.end_key;}
if('keys'in opts){if(!Array.isArray(opts.keys)){return callback(new TypeError('options.keys must be an array'));}
var incompatibleOpt=['startkey','endkey','key'].filter(function(incompatibleOpt){return incompatibleOpt in opts;})[0];if(incompatibleOpt){callback(createError(QUERY_PARSE_ERROR,'Query parameter `'+incompatibleOpt+
'` is not compatible with multi-get'));return;}
if(!isRemote(this)){allDocsKeysParse(opts);if(opts.keys.length===0){return this._allDocs({limit:0},callback);}}}
return this._allDocs(opts,callback);});AbstractPouchDB.prototype.changes=function(opts,callback){if(typeof opts==='function'){callback=opts;opts={};}
opts=opts||{};opts.return_docs=('return_docs'in opts)?opts.return_docs:!opts.live;return new Changes$1(this,opts,callback);};AbstractPouchDB.prototype.close=adapterFun('close',function(callback){this._closed=true;this.emit('closed');return this._close(callback);});AbstractPouchDB.prototype.info=adapterFun('info',function(callback){var self=this;this._info(function(err,info){if(err){return callback(err);}
info.db_name=info.db_name||self.name;info.auto_compaction=!!(self.auto_compaction&&!isRemote(self));info.adapter=self.adapter;callback(null,info);});});AbstractPouchDB.prototype.id=adapterFun('id',function(callback){return this._id(callback);});AbstractPouchDB.prototype.type=function(){return(typeof this._type==='function')?this._type():this.adapter;};AbstractPouchDB.prototype.bulkDocs=adapterFun('bulkDocs',function(req,opts,callback){if(typeof opts==='function'){callback=opts;opts={};}
opts=opts||{};if(Array.isArray(req)){req={docs:req};}
if(!req||!req.docs||!Array.isArray(req.docs)){return callback(createError(MISSING_BULK_DOCS));}
for(var i=0;i<req.docs.length;++i){if(typeof req.docs[i]!=='object'||Array.isArray(req.docs[i])){return callback(createError(NOT_AN_OBJECT));}}
var attachmentError;req.docs.forEach(function(doc){if(doc._attachments){Object.keys(doc._attachments).forEach(function(name){attachmentError=attachmentError||attachmentNameError(name);if(!doc._attachments[name].content_type){guardedConsole('warn','Attachment',name,'on document',doc._id,'is missing content_type');}});}});if(attachmentError){return callback(createError(BAD_REQUEST,attachmentError));}
if(!('new_edits'in opts)){if('new_edits'in req){opts.new_edits=req.new_edits;}else{opts.new_edits=true;}}
var adapter=this;if(!opts.new_edits&&!isRemote(adapter)){req.docs.sort(compareByIdThenRev);}
cleanDocs(req.docs);var ids=req.docs.map(function(doc){return doc._id;});return this._bulkDocs(req,opts,function(err,res){if(err){return callback(err);}
if(!opts.new_edits){res=res.filter(function(x){return x.error;});}
if(!isRemote(adapter)){for(var i=0,l=res.length;i<l;i++){res[i].id=res[i].id||ids[i];}}
callback(null,res);});});AbstractPouchDB.prototype.registerDependentDatabase=adapterFun('registerDependentDatabase',function(dependentDb,callback){var depDB=new this.constructor(dependentDb,this.__opts);function diffFun(doc){doc.dependentDbs=doc.dependentDbs||{};if(doc.dependentDbs[dependentDb]){return false;}
doc.dependentDbs[dependentDb]=true;return doc;}
upsert(this,'_local/_pouch_dependentDbs',diffFun).then(function(){callback(null,{db:depDB});}).catch(callback);});AbstractPouchDB.prototype.destroy=adapterFun('destroy',function(opts,callback){if(typeof opts==='function'){callback=opts;opts={};}
var self=this;var usePrefix='use_prefix'in self?self.use_prefix:true;function destroyDb(){self._destroy(opts,function(err,resp){if(err){return callback(err);}
self._destroyed=true;self.emit('destroyed');callback(null,resp||{'ok':true});});}
if(isRemote(self)){return destroyDb();}
self.get('_local/_pouch_dependentDbs',function(err,localDoc){if(err){if(err.status!==404){return callback(err);}else{return destroyDb();}}
var dependentDbs=localDoc.dependentDbs;var PouchDB=self.constructor;var deletedMap=Object.keys(dependentDbs).map(function(name){var trueName=usePrefix?name.replace(new RegExp('^'+PouchDB.prefix),''):name;return new PouchDB(trueName,self.__opts).destroy();});Promise.all(deletedMap).then(destroyDb,callback);});});function TaskQueue(){this.isReady=false;this.failed=false;this.queue=[];}
TaskQueue.prototype.execute=function(){var fun;if(this.failed){while((fun=this.queue.shift())){fun(this.failed);}}else{while((fun=this.queue.shift())){fun();}}};TaskQueue.prototype.fail=function(err){this.failed=err;this.execute();};TaskQueue.prototype.ready=function(db){this.isReady=true;this.db=db;this.execute();};TaskQueue.prototype.addTask=function(fun){this.queue.push(fun);if(this.failed){this.execute();}};function parseAdapter(name,opts){var match=name.match(/([a-z-]*):\/\/(.*)/);if(match){return{name:/https?/.test(match[1])?match[1]+'://'+match[2]:match[2],adapter:match[1]};}
var adapters=PouchDB.adapters;var preferredAdapters=PouchDB.preferredAdapters;var prefix=PouchDB.prefix;var adapterName=opts.adapter;if(!adapterName){for(var i=0;i<preferredAdapters.length;++i){adapterName=preferredAdapters[i];if(adapterName==='idb'&&'websql'in adapters&&hasLocalStorage()&&localStorage['_pouch__websqldb_'+prefix+name]){guardedConsole('log','PouchDB is downgrading "'+name+'" to WebSQL to'+
' avoid data loss, because it was already opened with WebSQL.');continue;}
break;}}
var adapter=adapters[adapterName];var usePrefix=(adapter&&'use_prefix'in adapter)?adapter.use_prefix:true;return{name:usePrefix?(prefix+name):name,adapter:adapterName};}
function prepareForDestruction(self){function onDestroyed(from_constructor){self.removeListener('closed',onClosed);if(!from_constructor){self.constructor.emit('destroyed',self.name);}}
function onClosed(){self.removeListener('destroyed',onDestroyed);self.constructor.emit('unref',self);}
self.once('destroyed',onDestroyed);self.once('closed',onClosed);self.constructor.emit('ref',self);}
__WEBPACK_IMPORTED_MODULE_3_inherits___default()(PouchDB,AbstractPouchDB);function PouchDB(name,opts){if(!(this instanceof PouchDB)){return new PouchDB(name,opts);}
var self=this;opts=opts||{};if(name&&typeof name==='object'){opts=name;name=opts.name;delete opts.name;}
if(opts.deterministic_revs===undefined){opts.deterministic_revs=true;}
this.__opts=opts=clone(opts);self.auto_compaction=opts.auto_compaction;self.prefix=PouchDB.prefix;if(typeof name!=='string'){throw new Error('Missing/invalid DB name');}
var prefixedName=(opts.prefix||'')+name;var backend=parseAdapter(prefixedName,opts);opts.name=backend.name;opts.adapter=opts.adapter||backend.adapter;self.name=name;self._adapter=opts.adapter;PouchDB.emit('debug',['adapter','Picked adapter: ',opts.adapter]);if(!PouchDB.adapters[opts.adapter]||!PouchDB.adapters[opts.adapter].valid()){throw new Error('Invalid Adapter: '+opts.adapter);}
AbstractPouchDB.call(self);self.taskqueue=new TaskQueue();self.adapter=opts.adapter;PouchDB.adapters[opts.adapter].call(self,opts,function(err){if(err){return self.taskqueue.fail(err);}
prepareForDestruction(self);self.emit('created',self);PouchDB.emit('created',self.name);self.taskqueue.ready(self);});}
var a=(typeof AbortController!=='undefined')?AbortController:function(){return{abort:function(){}};};var f$1=fetch;var h=Headers;PouchDB.adapters={};PouchDB.preferredAdapters=[];PouchDB.prefix='_pouch_';var eventEmitter=new __WEBPACK_IMPORTED_MODULE_2_events__["EventEmitter"]();function setUpEventEmitter(Pouch){Object.keys(__WEBPACK_IMPORTED_MODULE_2_events__["EventEmitter"].prototype).forEach(function(key){if(typeof __WEBPACK_IMPORTED_MODULE_2_events__["EventEmitter"].prototype[key]==='function'){Pouch[key]=eventEmitter[key].bind(eventEmitter);}});var destructListeners=Pouch._destructionListeners=new ExportedMap();Pouch.on('ref',function onConstructorRef(db){if(!destructListeners.has(db.name)){destructListeners.set(db.name,[]);}
destructListeners.get(db.name).push(db);});Pouch.on('unref',function onConstructorUnref(db){if(!destructListeners.has(db.name)){return;}
var dbList=destructListeners.get(db.name);var pos=dbList.indexOf(db);if(pos<0){return;}
dbList.splice(pos,1);if(dbList.length>1){destructListeners.set(db.name,dbList);}else{destructListeners.delete(db.name);}});Pouch.on('destroyed',function onConstructorDestroyed(name){if(!destructListeners.has(name)){return;}
var dbList=destructListeners.get(name);destructListeners.delete(name);dbList.forEach(function(db){db.emit('destroyed',true);});});}
setUpEventEmitter(PouchDB);PouchDB.adapter=function(id,obj,addToPreferredAdapters){if(obj.valid()){PouchDB.adapters[id]=obj;if(addToPreferredAdapters){PouchDB.preferredAdapters.push(id);}}};PouchDB.plugin=function(obj){if(typeof obj==='function'){obj(PouchDB);}else if(typeof obj!=='object'||Object.keys(obj).length===0){throw new Error('Invalid plugin: got "'+obj+'", expected an object or a function');}else{Object.keys(obj).forEach(function(id){PouchDB.prototype[id]=obj[id];});}
if(this.__defaults){PouchDB.__defaults=$inject_Object_assign({},this.__defaults);}
return PouchDB;};PouchDB.defaults=function(defaultOpts){function PouchAlt(name,opts){if(!(this instanceof PouchAlt)){return new PouchAlt(name,opts);}
opts=opts||{};if(name&&typeof name==='object'){opts=name;name=opts.name;delete opts.name;}
opts=$inject_Object_assign({},PouchAlt.__defaults,opts);PouchDB.call(this,name,opts);}
__WEBPACK_IMPORTED_MODULE_3_inherits___default()(PouchAlt,PouchDB);PouchAlt.preferredAdapters=PouchDB.preferredAdapters.slice();Object.keys(PouchDB).forEach(function(key){if(!(key in PouchAlt)){PouchAlt[key]=PouchDB[key];}});PouchAlt.__defaults=$inject_Object_assign({},this.__defaults,defaultOpts);return PouchAlt;};PouchDB.fetch=function(url,opts){return f$1(url,opts);};var version="7.0.0";function getFieldFromDoc(doc,parsedField){var value=doc;for(var i=0,len=parsedField.length;i<len;i++){var key=parsedField[i];value=value[key];if(!value){break;}}
return value;}
function compare$1(left,right){return left<right?-1:left>right?1:0;}
function parseField(fieldName){var fields=[];var current='';for(var i=0,len=fieldName.length;i<len;i++){var ch=fieldName[i];if(ch==='.'){if(i>0&&fieldName[i-1]==='\\'){current=current.substring(0,current.length-1)+'.';}else{fields.push(current);current='';}}else{current+=ch;}}
fields.push(current);return fields;}
var combinationFields=['$or','$nor','$not'];function isCombinationalField(field){return combinationFields.indexOf(field)>-1;}
function getKey(obj){return Object.keys(obj)[0];}
function getValue(obj){return obj[getKey(obj)];}
function mergeAndedSelectors(selectors){var res={};selectors.forEach(function(selector){Object.keys(selector).forEach(function(field){var matcher=selector[field];if(typeof matcher!=='object'){matcher={$eq:matcher};}
if(isCombinationalField(field)){if(matcher instanceof Array){res[field]=matcher.map(function(m){return mergeAndedSelectors([m]);});}else{res[field]=mergeAndedSelectors([matcher]);}}else{var fieldMatchers=res[field]=res[field]||{};Object.keys(matcher).forEach(function(operator){var value=matcher[operator];if(operator==='$gt'||operator==='$gte'){return mergeGtGte(operator,value,fieldMatchers);}else if(operator==='$lt'||operator==='$lte'){return mergeLtLte(operator,value,fieldMatchers);}else if(operator==='$ne'){return mergeNe(value,fieldMatchers);}else if(operator==='$eq'){return mergeEq(value,fieldMatchers);}
fieldMatchers[operator]=value;});}});});return res;}
function mergeGtGte(operator,value,fieldMatchers){if(typeof fieldMatchers.$eq!=='undefined'){return;}
if(typeof fieldMatchers.$gte!=='undefined'){if(operator==='$gte'){if(value>fieldMatchers.$gte){fieldMatchers.$gte=value;}}else{if(value>=fieldMatchers.$gte){delete fieldMatchers.$gte;fieldMatchers.$gt=value;}}}else if(typeof fieldMatchers.$gt!=='undefined'){if(operator==='$gte'){if(value>fieldMatchers.$gt){delete fieldMatchers.$gt;fieldMatchers.$gte=value;}}else{if(value>fieldMatchers.$gt){fieldMatchers.$gt=value;}}}else{fieldMatchers[operator]=value;}}
function mergeLtLte(operator,value,fieldMatchers){if(typeof fieldMatchers.$eq!=='undefined'){return;}
if(typeof fieldMatchers.$lte!=='undefined'){if(operator==='$lte'){if(value<fieldMatchers.$lte){fieldMatchers.$lte=value;}}else{if(value<=fieldMatchers.$lte){delete fieldMatchers.$lte;fieldMatchers.$lt=value;}}}else if(typeof fieldMatchers.$lt!=='undefined'){if(operator==='$lte'){if(value<fieldMatchers.$lt){delete fieldMatchers.$lt;fieldMatchers.$lte=value;}}else{if(value<fieldMatchers.$lt){fieldMatchers.$lt=value;}}}else{fieldMatchers[operator]=value;}}
function mergeNe(value,fieldMatchers){if('$ne'in fieldMatchers){fieldMatchers.$ne.push(value);}else{fieldMatchers.$ne=[value];}}
function mergeEq(value,fieldMatchers){delete fieldMatchers.$gt;delete fieldMatchers.$gte;delete fieldMatchers.$lt;delete fieldMatchers.$lte;delete fieldMatchers.$ne;fieldMatchers.$eq=value;}
function massageSelector(input){var result=clone(input);var wasAnded=false;if('$and'in result){result=mergeAndedSelectors(result['$and']);wasAnded=true;}
['$or','$nor'].forEach(function(orOrNor){if(orOrNor in result){result[orOrNor].forEach(function(subSelector){var fields=Object.keys(subSelector);for(var i=0;i<fields.length;i++){var field=fields[i];var matcher=subSelector[field];if(typeof matcher!=='object'||matcher===null){subSelector[field]={$eq:matcher};}}});}});if('$not'in result){result['$not']=mergeAndedSelectors([result['$not']]);}
var fields=Object.keys(result);for(var i=0;i<fields.length;i++){var field=fields[i];var matcher=result[field];if(typeof matcher!=='object'||matcher===null){matcher={$eq:matcher};}else if('$ne'in matcher&&!wasAnded){matcher.$ne=[matcher.$ne];}
result[field]=matcher;}
return result;}
function pad(str,padWith,upToLength){var padding='';var targetLength=upToLength-str.length;while(padding.length<targetLength){padding+=padWith;}
return padding;}
function padLeft(str,padWith,upToLength){var padding=pad(str,padWith,upToLength);return padding+str;}
var MIN_MAGNITUDE=-324;var MAGNITUDE_DIGITS=3;var SEP='';function collate(a,b){if(a===b){return 0;}
a=normalizeKey(a);b=normalizeKey(b);var ai=collationIndex(a);var bi=collationIndex(b);if((ai-bi)!==0){return ai-bi;}
switch(typeof a){case 'number':return a-b;case 'boolean':return a<b?-1:1;case 'string':return stringCollate(a,b);}
return Array.isArray(a)?arrayCollate(a,b):objectCollate(a,b);}
function normalizeKey(key){switch(typeof key){case 'undefined':return null;case 'number':if(key===Infinity||key===-Infinity||isNaN(key)){return null;}
return key;case 'object':var origKey=key;if(Array.isArray(key)){var len=key.length;key=new Array(len);for(var i=0;i<len;i++){key[i]=normalizeKey(origKey[i]);}}else if(key instanceof Date){return key.toJSON();}else if(key!==null){key={};for(var k in origKey){if(origKey.hasOwnProperty(k)){var val=origKey[k];if(typeof val!=='undefined'){key[k]=normalizeKey(val);}}}}}
return key;}
function indexify(key){if(key!==null){switch(typeof key){case 'boolean':return key?1:0;case 'number':return numToIndexableString(key);case 'string':return key.replace(/\u0002/g,'\u0002\u0002').replace(/\u0001/g,'\u0001\u0002').replace(/\u0000/g,'\u0001\u0001');case 'object':var isArray=Array.isArray(key);var arr=isArray?key:Object.keys(key);var i=-1;var len=arr.length;var result='';if(isArray){while(++i<len){result+=toIndexableString(arr[i]);}}else{while(++i<len){var objKey=arr[i];result+=toIndexableString(objKey)+
toIndexableString(key[objKey]);}}
return result;}}
return '';}
function toIndexableString(key){var zero='\u0000';key=normalizeKey(key);return collationIndex(key)+SEP+indexify(key)+zero;}
function parseNumber(str,i){var originalIdx=i;var num;var zero=str[i]==='1';if(zero){num=0;i++;}else{var neg=str[i]==='0';i++;var numAsString='';var magAsString=str.substring(i,i+MAGNITUDE_DIGITS);var magnitude=parseInt(magAsString,10)+MIN_MAGNITUDE;if(neg){magnitude=-magnitude;}
i+=MAGNITUDE_DIGITS;while(true){var ch=str[i];if(ch==='\u0000'){break;}else{numAsString+=ch;}
i++;}
numAsString=numAsString.split('.');if(numAsString.length===1){num=parseInt(numAsString,10);}else{num=parseFloat(numAsString[0]+'.'+numAsString[1]);}
if(neg){num=num-10;}
if(magnitude!==0){num=parseFloat(num+'e'+magnitude);}}
return{num:num,length:i-originalIdx};}
function pop(stack,metaStack){var obj=stack.pop();if(metaStack.length){var lastMetaElement=metaStack[metaStack.length-1];if(obj===lastMetaElement.element){metaStack.pop();lastMetaElement=metaStack[metaStack.length-1];}
var element=lastMetaElement.element;var lastElementIndex=lastMetaElement.index;if(Array.isArray(element)){element.push(obj);}else if(lastElementIndex===stack.length-2){var key=stack.pop();element[key]=obj;}else{stack.push(obj);}}}
function parseIndexableString(str){var stack=[];var metaStack=[];var i=0;while(true){var collationIndex=str[i++];if(collationIndex==='\u0000'){if(stack.length===1){return stack.pop();}else{pop(stack,metaStack);continue;}}
switch(collationIndex){case '1':stack.push(null);break;case '2':stack.push(str[i]==='1');i++;break;case '3':var parsedNum=parseNumber(str,i);stack.push(parsedNum.num);i+=parsedNum.length;break;case '4':var parsedStr='';while(true){var ch=str[i];if(ch==='\u0000'){break;}
parsedStr+=ch;i++;}
parsedStr=parsedStr.replace(/\u0001\u0001/g,'\u0000').replace(/\u0001\u0002/g,'\u0001').replace(/\u0002\u0002/g,'\u0002');stack.push(parsedStr);break;case '5':var arrayElement={element:[],index:stack.length};stack.push(arrayElement.element);metaStack.push(arrayElement);break;case '6':var objElement={element:{},index:stack.length};stack.push(objElement.element);metaStack.push(objElement);break;default:throw new Error('bad collationIndex or unexpectedly reached end of input: '+
collationIndex);}}}
function arrayCollate(a,b){var len=Math.min(a.length,b.length);for(var i=0;i<len;i++){var sort=collate(a[i],b[i]);if(sort!==0){return sort;}}
return(a.length===b.length)?0:(a.length>b.length)?1:-1;}
function stringCollate(a,b){return(a===b)?0:((a>b)?1:-1);}
function objectCollate(a,b){var ak=Object.keys(a),bk=Object.keys(b);var len=Math.min(ak.length,bk.length);for(var i=0;i<len;i++){var sort=collate(ak[i],bk[i]);if(sort!==0){return sort;}
sort=collate(a[ak[i]],b[bk[i]]);if(sort!==0){return sort;}}
return(ak.length===bk.length)?0:(ak.length>bk.length)?1:-1;}
function collationIndex(x){var id=['boolean','number','string','object'];var idx=id.indexOf(typeof x);if(~idx){if(x===null){return 1;}
if(Array.isArray(x)){return 5;}
return idx<3?(idx+2):(idx+3);}
if(Array.isArray(x)){return 5;}}
function numToIndexableString(num){if(num===0){return '1';}
var expFormat=num.toExponential().split(/e\+?/);var magnitude=parseInt(expFormat[1],10);var neg=num<0;var result=neg?'0':'2';var magForComparison=((neg?-magnitude:magnitude)-MIN_MAGNITUDE);var magString=padLeft((magForComparison).toString(),'0',MAGNITUDE_DIGITS);result+=SEP+magString;var factor=Math.abs(parseFloat(expFormat[0]));if(neg){factor=10-factor;}
var factorStr=factor.toFixed(20);factorStr=factorStr.replace(/\.?0+$/,'');result+=SEP+factorStr;return result;}
function createFieldSorter(sort){function getFieldValuesAsArray(doc){return sort.map(function(sorting){var fieldName=getKey(sorting);var parsedField=parseField(fieldName);var docFieldValue=getFieldFromDoc(doc,parsedField);return docFieldValue;});}
return function(aRow,bRow){var aFieldValues=getFieldValuesAsArray(aRow.doc);var bFieldValues=getFieldValuesAsArray(bRow.doc);var collation=collate(aFieldValues,bFieldValues);if(collation!==0){return collation;}
return compare$1(aRow.doc._id,bRow.doc._id);};}
function filterInMemoryFields(rows,requestDef,inMemoryFields){rows=rows.filter(function(row){return rowFilter(row.doc,requestDef.selector,inMemoryFields);});if(requestDef.sort){var fieldSorter=createFieldSorter(requestDef.sort);rows=rows.sort(fieldSorter);if(typeof requestDef.sort[0]!=='string'&&getValue(requestDef.sort[0])==='desc'){rows=rows.reverse();}}
if('limit'in requestDef||'skip'in requestDef){var skip=requestDef.skip||0;var limit=('limit'in requestDef?requestDef.limit:rows.length)+skip;rows=rows.slice(skip,limit);}
return rows;}
function rowFilter(doc,selector,inMemoryFields){return inMemoryFields.every(function(field){var matcher=selector[field];var parsedField=parseField(field);var docFieldValue=getFieldFromDoc(doc,parsedField);if(isCombinationalField(field)){return matchCominationalSelector(field,matcher,doc);}
return matchSelector(matcher,doc,parsedField,docFieldValue);});}
function matchSelector(matcher,doc,parsedField,docFieldValue){if(!matcher){return true;}
return Object.keys(matcher).every(function(userOperator){var userValue=matcher[userOperator];return match(userOperator,doc,userValue,parsedField,docFieldValue);});}
function matchCominationalSelector(field,matcher,doc){if(field==='$or'){return matcher.some(function(orMatchers){return rowFilter(doc,orMatchers,Object.keys(orMatchers));});}
if(field==='$not'){return!rowFilter(doc,matcher,Object.keys(matcher));}
return!matcher.find(function(orMatchers){return rowFilter(doc,orMatchers,Object.keys(orMatchers));});}
function match(userOperator,doc,userValue,parsedField,docFieldValue){if(!matchers[userOperator]){throw new Error('unknown operator "'+userOperator+
'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, '+
'$nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');}
return matchers[userOperator](doc,userValue,parsedField,docFieldValue);}
function fieldExists(docFieldValue){return typeof docFieldValue!=='undefined'&&docFieldValue!==null;}
function fieldIsNotUndefined(docFieldValue){return typeof docFieldValue!=='undefined';}
function modField(docFieldValue,userValue){var divisor=userValue[0];var mod=userValue[1];if(divisor===0){throw new Error('Bad divisor, cannot divide by zero');}
if(parseInt(divisor,10)!==divisor){throw new Error('Divisor is not an integer');}
if(parseInt(mod,10)!==mod){throw new Error('Modulus is not an integer');}
if(parseInt(docFieldValue,10)!==docFieldValue){return false;}
return docFieldValue%divisor===mod;}
function arrayContainsValue(docFieldValue,userValue){return userValue.some(function(val){if(docFieldValue instanceof Array){return docFieldValue.indexOf(val)>-1;}
return docFieldValue===val;});}
function arrayContainsAllValues(docFieldValue,userValue){return userValue.every(function(val){return docFieldValue.indexOf(val)>-1;});}
function arraySize(docFieldValue,userValue){return docFieldValue.length===userValue;}
function regexMatch(docFieldValue,userValue){var re=new RegExp(userValue);return re.test(docFieldValue);}
function typeMatch(docFieldValue,userValue){switch(userValue){case 'null':return docFieldValue===null;case 'boolean':return typeof(docFieldValue)==='boolean';case 'number':return typeof(docFieldValue)==='number';case 'string':return typeof(docFieldValue)==='string';case 'array':return docFieldValue instanceof Array;case 'object':return({}).toString.call(docFieldValue)==='[object Object]';}
throw new Error(userValue+' not supported as a type.'+
'Please use one of object, string, array, number, boolean or null.');}
var matchers={'$elemMatch':function(doc,userValue,parsedField,docFieldValue){if(!Array.isArray(docFieldValue)){return false;}
if(docFieldValue.length===0){return false;}
if(typeof docFieldValue[0]==='object'){return docFieldValue.some(function(val){return rowFilter(val,userValue,Object.keys(userValue));});}
return docFieldValue.some(function(val){return matchSelector(userValue,doc,parsedField,val);});},'$allMatch':function(doc,userValue,parsedField,docFieldValue){if(!Array.isArray(docFieldValue)){return false;}
if(docFieldValue.length===0){return false;}
if(typeof docFieldValue[0]==='object'){return docFieldValue.every(function(val){return rowFilter(val,userValue,Object.keys(userValue));});}
return docFieldValue.every(function(val){return matchSelector(userValue,doc,parsedField,val);});},'$eq':function(doc,userValue,parsedField,docFieldValue){return fieldIsNotUndefined(docFieldValue)&&collate(docFieldValue,userValue)===0;},'$gte':function(doc,userValue,parsedField,docFieldValue){return fieldIsNotUndefined(docFieldValue)&&collate(docFieldValue,userValue)>=0;},'$gt':function(doc,userValue,parsedField,docFieldValue){return fieldIsNotUndefined(docFieldValue)&&collate(docFieldValue,userValue)>0;},'$lte':function(doc,userValue,parsedField,docFieldValue){return fieldIsNotUndefined(docFieldValue)&&collate(docFieldValue,userValue)<=0;},'$lt':function(doc,userValue,parsedField,docFieldValue){return fieldIsNotUndefined(docFieldValue)&&collate(docFieldValue,userValue)<0;},'$exists':function(doc,userValue,parsedField,docFieldValue){if(userValue){return fieldIsNotUndefined(docFieldValue);}
return!fieldIsNotUndefined(docFieldValue);},'$mod':function(doc,userValue,parsedField,docFieldValue){return fieldExists(docFieldValue)&&modField(docFieldValue,userValue);},'$ne':function(doc,userValue,parsedField,docFieldValue){return userValue.every(function(neValue){return collate(docFieldValue,neValue)!==0;});},'$in':function(doc,userValue,parsedField,docFieldValue){return fieldExists(docFieldValue)&&arrayContainsValue(docFieldValue,userValue);},'$nin':function(doc,userValue,parsedField,docFieldValue){return fieldExists(docFieldValue)&&!arrayContainsValue(docFieldValue,userValue);},'$size':function(doc,userValue,parsedField,docFieldValue){return fieldExists(docFieldValue)&&arraySize(docFieldValue,userValue);},'$all':function(doc,userValue,parsedField,docFieldValue){return Array.isArray(docFieldValue)&&arrayContainsAllValues(docFieldValue,userValue);},'$regex':function(doc,userValue,parsedField,docFieldValue){return fieldExists(docFieldValue)&&regexMatch(docFieldValue,userValue);},'$type':function(doc,userValue,parsedField,docFieldValue){return typeMatch(docFieldValue,userValue);}};function matchesSelector(doc,selector){if(typeof selector!=='object'){throw new Error('Selector error: expected a JSON object');}
selector=massageSelector(selector);var row={'doc':doc};var rowsMatched=filterInMemoryFields([row],{'selector':selector},Object.keys(selector));return rowsMatched&&rowsMatched.length===1;}
function evalFilter(input){return scopeEval('"use strict";\nreturn '+input+';',{});}
function evalView(input){var code=['return function(doc) {','  "use strict";','  var emitted = false;','  var emit = function (a, b) {','    emitted = true;','  };','  var view = '+input+';','  view(doc);','  if (emitted) {','    return true;','  }','};'].join('\n');return scopeEval(code,{});}
function validate(opts,callback){if(opts.selector){if(opts.filter&&opts.filter!=='_selector'){var filterName=typeof opts.filter==='string'?opts.filter:'function';return callback(new Error('selector invalid for filter "'+filterName+'"'));}}
callback();}
function normalize(opts){if(opts.view&&!opts.filter){opts.filter='_view';}
if(opts.selector&&!opts.filter){opts.filter='_selector';}
if(opts.filter&&typeof opts.filter==='string'){if(opts.filter==='_view'){opts.view=normalizeDesignDocFunctionName(opts.view);}else{opts.filter=normalizeDesignDocFunctionName(opts.filter);}}}
function shouldFilter(changesHandler,opts){return opts.filter&&typeof opts.filter==='string'&&!opts.doc_ids&&!isRemote(changesHandler.db);}
function filter(changesHandler,opts){var callback=opts.complete;if(opts.filter==='_view'){if(!opts.view||typeof opts.view!=='string'){var err=createError(BAD_REQUEST,'`view` filter parameter not found or invalid.');return callback(err);}
var viewName=parseDesignDocFunctionName(opts.view);changesHandler.db.get('_design/'+viewName[0],function(err,ddoc){if(changesHandler.isCancelled){return callback(null,{status:'cancelled'});}
if(err){return callback(generateErrorFromResponse(err));}
var mapFun=ddoc&&ddoc.views&&ddoc.views[viewName[1]]&&ddoc.views[viewName[1]].map;if(!mapFun){return callback(createError(MISSING_DOC,(ddoc.views?'missing json key: '+viewName[1]:'missing json key: views')));}
opts.filter=evalView(mapFun);changesHandler.doChanges(opts);});}else if(opts.selector){opts.filter=function(doc){return matchesSelector(doc,opts.selector);};changesHandler.doChanges(opts);}else{var filterName=parseDesignDocFunctionName(opts.filter);changesHandler.db.get('_design/'+filterName[0],function(err,ddoc){if(changesHandler.isCancelled){return callback(null,{status:'cancelled'});}
if(err){return callback(generateErrorFromResponse(err));}
var filterFun=ddoc&&ddoc.filters&&ddoc.filters[filterName[1]];if(!filterFun){return callback(createError(MISSING_DOC,((ddoc&&ddoc.filters)?'missing json key: '+filterName[1]:'missing json key: filters')));}
opts.filter=evalFilter(filterFun);changesHandler.doChanges(opts);});}}
function applyChangesFilterPlugin(PouchDB){PouchDB._changesFilterPlugin={validate:validate,normalize:normalize,shouldFilter:shouldFilter,filter:filter};}
PouchDB.plugin(applyChangesFilterPlugin);PouchDB.version=version;function toObject(array){return array.reduce(function(obj,item){obj[item]=true;return obj;},{});}
var reservedWords=toObject(['_id','_rev','_attachments','_deleted','_revisions','_revs_info','_conflicts','_deleted_conflicts','_local_seq','_rev_tree','_replication_id','_replication_state','_replication_state_time','_replication_state_reason','_replication_stats','_removed']);var dataWords=toObject(['_attachments','_replication_id','_replication_state','_replication_state_time','_replication_state_reason','_replication_stats']);function parseRevisionInfo(rev){if(!/^\d+-./.test(rev)){return createError(INVALID_REV);}
var idx=rev.indexOf('-');var left=rev.substring(0,idx);var right=rev.substring(idx+1);return{prefix:parseInt(left,10),id:right};}
function makeRevTreeFromRevisions(revisions,opts){var pos=revisions.start-revisions.ids.length+1;var revisionIds=revisions.ids;var ids=[revisionIds[0],opts,[]];for(var i=1,len=revisionIds.length;i<len;i++){ids=[revisionIds[i],{status:'missing'},[ids]];}
return[{pos:pos,ids:ids}];}
function parseDoc(doc,newEdits,dbOpts){if(!dbOpts){dbOpts={deterministic_revs:true};}
var nRevNum;var newRevId;var revInfo;var opts={status:'available'};if(doc._deleted){opts.deleted=true;}
if(newEdits){if(!doc._id){doc._id=uuid();}
newRevId=rev$$1(doc,dbOpts.deterministic_revs);if(doc._rev){revInfo=parseRevisionInfo(doc._rev);if(revInfo.error){return revInfo;}
doc._rev_tree=[{pos:revInfo.prefix,ids:[revInfo.id,{status:'missing'},[[newRevId,opts,[]]]]}];nRevNum=revInfo.prefix+1;}else{doc._rev_tree=[{pos:1,ids:[newRevId,opts,[]]}];nRevNum=1;}}else{if(doc._revisions){doc._rev_tree=makeRevTreeFromRevisions(doc._revisions,opts);nRevNum=doc._revisions.start;newRevId=doc._revisions.ids[0];}
if(!doc._rev_tree){revInfo=parseRevisionInfo(doc._rev);if(revInfo.error){return revInfo;}
nRevNum=revInfo.prefix;newRevId=revInfo.id;doc._rev_tree=[{pos:nRevNum,ids:[newRevId,opts,[]]}];}}
invalidIdError(doc._id);doc._rev=nRevNum+'-'+newRevId;var result={metadata:{},data:{}};for(var key in doc){if(Object.prototype.hasOwnProperty.call(doc,key)){var specialKey=key[0]==='_';if(specialKey&&!reservedWords[key]){var error=createError(DOC_VALIDATION,key);error.message=DOC_VALIDATION.message+': '+key;throw error;}else if(specialKey&&!dataWords[key]){result.metadata[key.slice(1)]=doc[key];}else{result.data[key]=doc[key];}}}
return result;}
function parseBase64(data){try{return thisAtob(data);}catch(e){var err=createError(BAD_ARG,'Attachment is not a valid base64 string');return{error:err};}}
function preprocessString(att,blobType,callback){var asBinary=parseBase64(att.data);if(asBinary.error){return callback(asBinary.error);}
att.length=asBinary.length;if(blobType==='blob'){att.data=binStringToBluffer(asBinary,att.content_type);}else if(blobType==='base64'){att.data=thisBtoa(asBinary);}else{att.data=asBinary;}
binaryMd5(asBinary,function(result){att.digest='md5-'+result;callback();});}
function preprocessBlob(att,blobType,callback){binaryMd5(att.data,function(md5){att.digest='md5-'+md5;att.length=att.data.size||att.data.length||0;if(blobType==='binary'){blobToBinaryString(att.data,function(binString){att.data=binString;callback();});}else if(blobType==='base64'){blobToBase64(att.data,function(b64){att.data=b64;callback();});}else{callback();}});}
function preprocessAttachment(att,blobType,callback){if(att.stub){return callback();}
if(typeof att.data==='string'){preprocessString(att,blobType,callback);}else{preprocessBlob(att,blobType,callback);}}
function preprocessAttachments(docInfos,blobType,callback){if(!docInfos.length){return callback();}
var docv=0;var overallErr;docInfos.forEach(function(docInfo){var attachments=docInfo.data&&docInfo.data._attachments?Object.keys(docInfo.data._attachments):[];var recv=0;if(!attachments.length){return done();}
function processedAttachment(err){overallErr=err;recv++;if(recv===attachments.length){done();}}
for(var key in docInfo.data._attachments){if(docInfo.data._attachments.hasOwnProperty(key)){preprocessAttachment(docInfo.data._attachments[key],blobType,processedAttachment);}}});function done(){docv++;if(docInfos.length===docv){if(overallErr){callback(overallErr);}else{callback();}}}}
function updateDoc(revLimit,prev,docInfo,results,i,cb,writeDoc,newEdits){if(revExists(prev.rev_tree,docInfo.metadata.rev)&&!newEdits){results[i]=docInfo;return cb();}
var previousWinningRev=prev.winningRev||winningRev(prev);var previouslyDeleted='deleted'in prev?prev.deleted:isDeleted(prev,previousWinningRev);var deleted='deleted'in docInfo.metadata?docInfo.metadata.deleted:isDeleted(docInfo.metadata);var isRoot=/^1-/.test(docInfo.metadata.rev);if(previouslyDeleted&&!deleted&&newEdits&&isRoot){var newDoc=docInfo.data;newDoc._rev=previousWinningRev;newDoc._id=docInfo.metadata.id;docInfo=parseDoc(newDoc,newEdits);}
var merged=merge(prev.rev_tree,docInfo.metadata.rev_tree[0],revLimit);var inConflict=newEdits&&(((previouslyDeleted&&deleted&&merged.conflicts!=='new_leaf')||(!previouslyDeleted&&merged.conflicts!=='new_leaf')||(previouslyDeleted&&!deleted&&merged.conflicts==='new_branch')));if(inConflict){var err=createError(REV_CONFLICT);results[i]=err;return cb();}
var newRev=docInfo.metadata.rev;docInfo.metadata.rev_tree=merged.tree;docInfo.stemmedRevs=merged.stemmedRevs||[];if(prev.rev_map){docInfo.metadata.rev_map=prev.rev_map;}
var winningRev$$1=winningRev(docInfo.metadata);var winningRevIsDeleted=isDeleted(docInfo.metadata,winningRev$$1);var delta=(previouslyDeleted===winningRevIsDeleted)?0:previouslyDeleted<winningRevIsDeleted?-1:1;var newRevIsDeleted;if(newRev===winningRev$$1){newRevIsDeleted=winningRevIsDeleted;}else{newRevIsDeleted=isDeleted(docInfo.metadata,newRev);}
writeDoc(docInfo,winningRev$$1,winningRevIsDeleted,newRevIsDeleted,true,delta,i,cb);}
function rootIsMissing(docInfo){return docInfo.metadata.rev_tree[0].ids[1].status==='missing';}
function processDocs(revLimit,docInfos,api,fetchedDocs,tx,results,writeDoc,opts,overallCallback){revLimit=revLimit||1000;function insertDoc(docInfo,resultsIdx,callback){var winningRev$$1=winningRev(docInfo.metadata);var deleted=isDeleted(docInfo.metadata,winningRev$$1);if('was_delete'in opts&&deleted){results[resultsIdx]=createError(MISSING_DOC,'deleted');return callback();}
var inConflict=newEdits&&rootIsMissing(docInfo);if(inConflict){var err=createError(REV_CONFLICT);results[resultsIdx]=err;return callback();}
var delta=deleted?0:1;writeDoc(docInfo,winningRev$$1,deleted,deleted,false,delta,resultsIdx,callback);}
var newEdits=opts.new_edits;var idsToDocs=new ExportedMap();var docsDone=0;var docsToDo=docInfos.length;function checkAllDocsDone(){if(++docsDone===docsToDo&&overallCallback){overallCallback();}}
docInfos.forEach(function(currentDoc,resultsIdx){if(currentDoc._id&&isLocalId(currentDoc._id)){var fun=currentDoc._deleted?'_removeLocal':'_putLocal';api[fun](currentDoc,{ctx:tx},function(err,res){results[resultsIdx]=err||res;checkAllDocsDone();});return;}
var id=currentDoc.metadata.id;if(idsToDocs.has(id)){docsToDo--;idsToDocs.get(id).push([currentDoc,resultsIdx]);}else{idsToDocs.set(id,[[currentDoc,resultsIdx]]);}});idsToDocs.forEach(function(docs,id){var numDone=0;function docWritten(){if(++numDone<docs.length){nextDoc();}else{checkAllDocsDone();}}
function nextDoc(){var value=docs[numDone];var currentDoc=value[0];var resultsIdx=value[1];if(fetchedDocs.has(id)){updateDoc(revLimit,fetchedDocs.get(id),currentDoc,results,resultsIdx,docWritten,writeDoc,newEdits);}else{var merged=merge([],currentDoc.metadata.rev_tree[0],revLimit);currentDoc.metadata.rev_tree=merged.tree;currentDoc.stemmedRevs=merged.stemmedRevs||[];insertDoc(currentDoc,resultsIdx,docWritten);}}
nextDoc();});}
var ADAPTER_VERSION=5;var DOC_STORE='document-store';var BY_SEQ_STORE='by-sequence';var ATTACH_STORE='attach-store';var ATTACH_AND_SEQ_STORE='attach-seq-store';var META_STORE='meta-store';var LOCAL_STORE='local-store';var DETECT_BLOB_SUPPORT_STORE='detect-blob-support';function safeJsonParse(str){try{return JSON.parse(str);}catch(e){return __WEBPACK_IMPORTED_MODULE_6_vuvuzela___default.a.parse(str);}}
function safeJsonStringify(json){try{return JSON.stringify(json);}catch(e){return __WEBPACK_IMPORTED_MODULE_6_vuvuzela___default.a.stringify(json);}}
function idbError(callback){return function(evt){var message='unknown_error';if(evt.target&&evt.target.error){message=evt.target.error.name||evt.target.error.message;}
callback(createError(IDB_ERROR,message,evt.type));};}
function encodeMetadata(metadata,winningRev,deleted){return{data:safeJsonStringify(metadata),winningRev:winningRev,deletedOrLocal:deleted?'1':'0',seq:metadata.seq,id:metadata.id};}
function decodeMetadata(storedObject){if(!storedObject){return null;}
var metadata=safeJsonParse(storedObject.data);metadata.winningRev=storedObject.winningRev;metadata.deleted=storedObject.deletedOrLocal==='1';metadata.seq=storedObject.seq;return metadata;}
function decodeDoc(doc){if(!doc){return doc;}
var idx=doc._doc_id_rev.lastIndexOf(':');doc._id=doc._doc_id_rev.substring(0,idx-1);doc._rev=doc._doc_id_rev.substring(idx+1);delete doc._doc_id_rev;return doc;}
function readBlobData(body,type,asBlob,callback){if(asBlob){if(!body){callback(createBlob([''],{type:type}));}else if(typeof body!=='string'){callback(body);}else{callback(b64ToBluffer(body,type));}}else{if(!body){callback('');}else if(typeof body!=='string'){readAsBinaryString(body,function(binary){callback(thisBtoa(binary));});}else{callback(body);}}}
function fetchAttachmentsIfNecessary(doc,opts,txn,cb){var attachments=Object.keys(doc._attachments||{});if(!attachments.length){return cb&&cb();}
var numDone=0;function checkDone(){if(++numDone===attachments.length&&cb){cb();}}
function fetchAttachment(doc,att){var attObj=doc._attachments[att];var digest=attObj.digest;var req=txn.objectStore(ATTACH_STORE).get(digest);req.onsuccess=function(e){attObj.body=e.target.result.body;checkDone();};}
attachments.forEach(function(att){if(opts.attachments&&opts.include_docs){fetchAttachment(doc,att);}else{doc._attachments[att].stub=true;checkDone();}});}
function postProcessAttachments(results,asBlob){return Promise.all(results.map(function(row){if(row.doc&&row.doc._attachments){var attNames=Object.keys(row.doc._attachments);return Promise.all(attNames.map(function(att){var attObj=row.doc._attachments[att];if(!('body'in attObj)){return;}
var body=attObj.body;var type=attObj.content_type;return new Promise(function(resolve){readBlobData(body,type,asBlob,function(data){row.doc._attachments[att]=$inject_Object_assign(pick(attObj,['digest','content_type']),{data:data});resolve();});});}));}}));}
function compactRevs(revs,docId,txn){var possiblyOrphanedDigests=[];var seqStore=txn.objectStore(BY_SEQ_STORE);var attStore=txn.objectStore(ATTACH_STORE);var attAndSeqStore=txn.objectStore(ATTACH_AND_SEQ_STORE);var count=revs.length;function checkDone(){count--;if(!count){deleteOrphanedAttachments();}}
function deleteOrphanedAttachments(){if(!possiblyOrphanedDigests.length){return;}
possiblyOrphanedDigests.forEach(function(digest){var countReq=attAndSeqStore.index('digestSeq').count(IDBKeyRange.bound(digest+'::',digest+'::\uffff',false,false));countReq.onsuccess=function(e){var count=e.target.result;if(!count){attStore.delete(digest);}};});}
revs.forEach(function(rev){var index=seqStore.index('_doc_id_rev');var key=docId+"::"+rev;index.getKey(key).onsuccess=function(e){var seq=e.target.result;if(typeof seq!=='number'){return checkDone();}
seqStore.delete(seq);var cursor=attAndSeqStore.index('seq').openCursor(IDBKeyRange.only(seq));cursor.onsuccess=function(event){var cursor=event.target.result;if(cursor){var digest=cursor.value.digestSeq.split('::')[0];possiblyOrphanedDigests.push(digest);attAndSeqStore.delete(cursor.primaryKey);cursor.continue();}else{checkDone();}};};});}
function openTransactionSafely(idb,stores,mode){try{return{txn:idb.transaction(stores,mode)};}catch(err){return{error:err};}}
var changesHandler=new Changes();function idbBulkDocs(dbOpts,req,opts,api,idb,callback){var docInfos=req.docs;var txn;var docStore;var bySeqStore;var attachStore;var attachAndSeqStore;var metaStore;var docInfoError;var metaDoc;for(var i=0,len=docInfos.length;i<len;i++){var doc=docInfos[i];if(doc._id&&isLocalId(doc._id)){continue;}
doc=docInfos[i]=parseDoc(doc,opts.new_edits,dbOpts);if(doc.error&&!docInfoError){docInfoError=doc;}}
if(docInfoError){return callback(docInfoError);}
var allDocsProcessed=false;var docCountDelta=0;var results=new Array(docInfos.length);var fetchedDocs=new ExportedMap();var preconditionErrored=false;var blobType=api._meta.blobSupport?'blob':'base64';preprocessAttachments(docInfos,blobType,function(err){if(err){return callback(err);}
startTransaction();});function startTransaction(){var stores=[DOC_STORE,BY_SEQ_STORE,ATTACH_STORE,LOCAL_STORE,ATTACH_AND_SEQ_STORE,META_STORE];var txnResult=openTransactionSafely(idb,stores,'readwrite');if(txnResult.error){return callback(txnResult.error);}
txn=txnResult.txn;txn.onabort=idbError(callback);txn.ontimeout=idbError(callback);txn.oncomplete=complete;docStore=txn.objectStore(DOC_STORE);bySeqStore=txn.objectStore(BY_SEQ_STORE);attachStore=txn.objectStore(ATTACH_STORE);attachAndSeqStore=txn.objectStore(ATTACH_AND_SEQ_STORE);metaStore=txn.objectStore(META_STORE);metaStore.get(META_STORE).onsuccess=function(e){metaDoc=e.target.result;updateDocCountIfReady();};verifyAttachments(function(err){if(err){preconditionErrored=true;return callback(err);}
fetchExistingDocs();});}
function onAllDocsProcessed(){allDocsProcessed=true;updateDocCountIfReady();}
function idbProcessDocs(){processDocs(dbOpts.revs_limit,docInfos,api,fetchedDocs,txn,results,writeDoc,opts,onAllDocsProcessed);}
function updateDocCountIfReady(){if(!metaDoc||!allDocsProcessed){return;}
metaDoc.docCount+=docCountDelta;metaStore.put(metaDoc);}
function fetchExistingDocs(){if(!docInfos.length){return;}
var numFetched=0;function checkDone(){if(++numFetched===docInfos.length){idbProcessDocs();}}
function readMetadata(event){var metadata=decodeMetadata(event.target.result);if(metadata){fetchedDocs.set(metadata.id,metadata);}
checkDone();}
for(var i=0,len=docInfos.length;i<len;i++){var docInfo=docInfos[i];if(docInfo._id&&isLocalId(docInfo._id)){checkDone();continue;}
var req=docStore.get(docInfo.metadata.id);req.onsuccess=readMetadata;}}
function complete(){if(preconditionErrored){return;}
changesHandler.notify(api._meta.name);callback(null,results);}
function verifyAttachment(digest,callback){var req=attachStore.get(digest);req.onsuccess=function(e){if(!e.target.result){var err=createError(MISSING_STUB,'unknown stub attachment with digest '+
digest);err.status=412;callback(err);}else{callback();}};}
function verifyAttachments(finish){var digests=[];docInfos.forEach(function(docInfo){if(docInfo.data&&docInfo.data._attachments){Object.keys(docInfo.data._attachments).forEach(function(filename){var att=docInfo.data._attachments[filename];if(att.stub){digests.push(att.digest);}});}});if(!digests.length){return finish();}
var numDone=0;var err;function checkDone(){if(++numDone===digests.length){finish(err);}}
digests.forEach(function(digest){verifyAttachment(digest,function(attErr){if(attErr&&!err){err=attErr;}
checkDone();});});}
function writeDoc(docInfo,winningRev$$1,winningRevIsDeleted,newRevIsDeleted,isUpdate,delta,resultsIdx,callback){docInfo.metadata.winningRev=winningRev$$1;docInfo.metadata.deleted=winningRevIsDeleted;var doc=docInfo.data;doc._id=docInfo.metadata.id;doc._rev=docInfo.metadata.rev;if(newRevIsDeleted){doc._deleted=true;}
var hasAttachments=doc._attachments&&Object.keys(doc._attachments).length;if(hasAttachments){return writeAttachments(docInfo,winningRev$$1,winningRevIsDeleted,isUpdate,resultsIdx,callback);}
docCountDelta+=delta;updateDocCountIfReady();finishDoc(docInfo,winningRev$$1,winningRevIsDeleted,isUpdate,resultsIdx,callback);}
function finishDoc(docInfo,winningRev$$1,winningRevIsDeleted,isUpdate,resultsIdx,callback){var doc=docInfo.data;var metadata=docInfo.metadata;doc._doc_id_rev=metadata.id+'::'+metadata.rev;delete doc._id;delete doc._rev;function afterPutDoc(e){var revsToDelete=docInfo.stemmedRevs||[];if(isUpdate&&api.auto_compaction){revsToDelete=revsToDelete.concat(compactTree(docInfo.metadata));}
if(revsToDelete&&revsToDelete.length){compactRevs(revsToDelete,docInfo.metadata.id,txn);}
metadata.seq=e.target.result;var metadataToStore=encodeMetadata(metadata,winningRev$$1,winningRevIsDeleted);var metaDataReq=docStore.put(metadataToStore);metaDataReq.onsuccess=afterPutMetadata;}
function afterPutDocError(e){e.preventDefault();e.stopPropagation();var index=bySeqStore.index('_doc_id_rev');var getKeyReq=index.getKey(doc._doc_id_rev);getKeyReq.onsuccess=function(e){var putReq=bySeqStore.put(doc,e.target.result);putReq.onsuccess=afterPutDoc;};}
function afterPutMetadata(){results[resultsIdx]={ok:true,id:metadata.id,rev:metadata.rev};fetchedDocs.set(docInfo.metadata.id,docInfo.metadata);insertAttachmentMappings(docInfo,metadata.seq,callback);}
var putReq=bySeqStore.put(doc);putReq.onsuccess=afterPutDoc;putReq.onerror=afterPutDocError;}
function writeAttachments(docInfo,winningRev$$1,winningRevIsDeleted,isUpdate,resultsIdx,callback){var doc=docInfo.data;var numDone=0;var attachments=Object.keys(doc._attachments);function collectResults(){if(numDone===attachments.length){finishDoc(docInfo,winningRev$$1,winningRevIsDeleted,isUpdate,resultsIdx,callback);}}
function attachmentSaved(){numDone++;collectResults();}
attachments.forEach(function(key){var att=docInfo.data._attachments[key];if(!att.stub){var data=att.data;delete att.data;att.revpos=parseInt(winningRev$$1,10);var digest=att.digest;saveAttachment(digest,data,attachmentSaved);}else{numDone++;collectResults();}});}
function insertAttachmentMappings(docInfo,seq,callback){var attsAdded=0;var attsToAdd=Object.keys(docInfo.data._attachments||{});if(!attsToAdd.length){return callback();}
function checkDone(){if(++attsAdded===attsToAdd.length){callback();}}
function add(att){var digest=docInfo.data._attachments[att].digest;var req=attachAndSeqStore.put({seq:seq,digestSeq:digest+'::'+seq});req.onsuccess=checkDone;req.onerror=function(e){e.preventDefault();e.stopPropagation();checkDone();};}
for(var i=0;i<attsToAdd.length;i++){add(attsToAdd[i]);}}
function saveAttachment(digest,data,callback){var getKeyReq=attachStore.count(digest);getKeyReq.onsuccess=function(e){var count=e.target.result;if(count){return callback();}
var newAtt={digest:digest,body:data};var putReq=attachStore.put(newAtt);putReq.onsuccess=callback;};}}
function runBatchedCursor(objectStore,keyRange,descending,batchSize,onBatch){if(batchSize===-1){batchSize=1000;}
var useGetAll=typeof objectStore.getAll==='function'&&typeof objectStore.getAllKeys==='function'&&batchSize>1&&!descending;var keysBatch;var valuesBatch;var pseudoCursor;function onGetAll(e){valuesBatch=e.target.result;if(keysBatch){onBatch(keysBatch,valuesBatch,pseudoCursor);}}
function onGetAllKeys(e){keysBatch=e.target.result;if(valuesBatch){onBatch(keysBatch,valuesBatch,pseudoCursor);}}
function continuePseudoCursor(){if(!keysBatch.length){return onBatch();}
var lastKey=keysBatch[keysBatch.length-1];var newKeyRange;if(keyRange&&keyRange.upper){try{newKeyRange=IDBKeyRange.bound(lastKey,keyRange.upper,true,keyRange.upperOpen);}catch(e){if(e.name==="DataError"&&e.code===0){return onBatch();}}}else{newKeyRange=IDBKeyRange.lowerBound(lastKey,true);}
keyRange=newKeyRange;keysBatch=null;valuesBatch=null;objectStore.getAll(keyRange,batchSize).onsuccess=onGetAll;objectStore.getAllKeys(keyRange,batchSize).onsuccess=onGetAllKeys;}
function onCursor(e){var cursor=e.target.result;if(!cursor){return onBatch();}
onBatch([cursor.key],[cursor.value],cursor);}
if(useGetAll){pseudoCursor={"continue":continuePseudoCursor};objectStore.getAll(keyRange,batchSize).onsuccess=onGetAll;objectStore.getAllKeys(keyRange,batchSize).onsuccess=onGetAllKeys;}else if(descending){objectStore.openCursor(keyRange,'prev').onsuccess=onCursor;}else{objectStore.openCursor(keyRange).onsuccess=onCursor;}}
function getAll(objectStore,keyRange,onSuccess){if(typeof objectStore.getAll==='function'){objectStore.getAll(keyRange).onsuccess=onSuccess;return;}
var values=[];function onCursor(e){var cursor=e.target.result;if(cursor){values.push(cursor.value);cursor.continue();}else{onSuccess({target:{result:values}});}}
objectStore.openCursor(keyRange).onsuccess=onCursor;}
function allDocsKeys(keys,docStore,onBatch){var valuesBatch=new Array(keys.length);var count=0;keys.forEach(function(key,index){docStore.get(key).onsuccess=function(event){if(event.target.result){valuesBatch[index]=event.target.result;}else{valuesBatch[index]={key:key,error:'not_found'};}
count++;if(count===keys.length){onBatch(keys,valuesBatch,{});}};});}
function createKeyRange(start,end,inclusiveEnd,key,descending){try{if(start&&end){if(descending){return IDBKeyRange.bound(end,start,!inclusiveEnd,false);}else{return IDBKeyRange.bound(start,end,false,!inclusiveEnd);}}else if(start){if(descending){return IDBKeyRange.upperBound(start);}else{return IDBKeyRange.lowerBound(start);}}else if(end){if(descending){return IDBKeyRange.lowerBound(end,!inclusiveEnd);}else{return IDBKeyRange.upperBound(end,!inclusiveEnd);}}else if(key){return IDBKeyRange.only(key);}}catch(e){return{error:e};}
return null;}
function idbAllDocs(opts,idb,callback){var start='startkey'in opts?opts.startkey:false;var end='endkey'in opts?opts.endkey:false;var key='key'in opts?opts.key:false;var keys='keys'in opts?opts.keys:false;var skip=opts.skip||0;var limit=typeof opts.limit==='number'?opts.limit:-1;var inclusiveEnd=opts.inclusive_end!==false;var keyRange;var keyRangeError;if(!keys){keyRange=createKeyRange(start,end,inclusiveEnd,key,opts.descending);keyRangeError=keyRange&&keyRange.error;if(keyRangeError&&!(keyRangeError.name==="DataError"&&keyRangeError.code===0)){return callback(createError(IDB_ERROR,keyRangeError.name,keyRangeError.message));}}
var stores=[DOC_STORE,BY_SEQ_STORE,META_STORE];if(opts.attachments){stores.push(ATTACH_STORE);}
var txnResult=openTransactionSafely(idb,stores,'readonly');if(txnResult.error){return callback(txnResult.error);}
var txn=txnResult.txn;txn.oncomplete=onTxnComplete;txn.onabort=idbError(callback);var docStore=txn.objectStore(DOC_STORE);var seqStore=txn.objectStore(BY_SEQ_STORE);var metaStore=txn.objectStore(META_STORE);var docIdRevIndex=seqStore.index('_doc_id_rev');var results=[];var docCount;var updateSeq;metaStore.get(META_STORE).onsuccess=function(e){docCount=e.target.result.docCount;};if(opts.update_seq){getMaxUpdateSeq(seqStore,function(e){if(e.target.result&&e.target.result.length>0){updateSeq=e.target.result[0];}});}
function getMaxUpdateSeq(objectStore,onSuccess){function onCursor(e){var cursor=e.target.result;var maxKey=undefined;if(cursor&&cursor.key){maxKey=cursor.key;}
return onSuccess({target:{result:[maxKey]}});}
objectStore.openCursor(null,'prev').onsuccess=onCursor;}
function fetchDocAsynchronously(metadata,row,winningRev$$1){var key=metadata.id+"::"+winningRev$$1;docIdRevIndex.get(key).onsuccess=function onGetDoc(e){row.doc=decodeDoc(e.target.result)||{};if(opts.conflicts){var conflicts=collectConflicts(metadata);if(conflicts.length){row.doc._conflicts=conflicts;}}
fetchAttachmentsIfNecessary(row.doc,opts,txn);};}
function allDocsInner(winningRev$$1,metadata){var row={id:metadata.id,key:metadata.id,value:{rev:winningRev$$1}};var deleted=metadata.deleted;if(deleted){if(keys){results.push(row);row.value.deleted=true;row.doc=null;}}else if(skip--<=0){results.push(row);if(opts.include_docs){fetchDocAsynchronously(metadata,row,winningRev$$1);}}}
function processBatch(batchValues){for(var i=0,len=batchValues.length;i<len;i++){if(results.length===limit){break;}
var batchValue=batchValues[i];if(batchValue.error&&keys){results.push(batchValue);continue;}
var metadata=decodeMetadata(batchValue);var winningRev$$1=metadata.winningRev;allDocsInner(winningRev$$1,metadata);}}
function onBatch(batchKeys,batchValues,cursor){if(!cursor){return;}
processBatch(batchValues);if(results.length<limit){cursor.continue();}}
function onGetAll(e){var values=e.target.result;if(opts.descending){values=values.reverse();}
processBatch(values);}
function onResultsReady(){var returnVal={total_rows:docCount,offset:opts.skip,rows:results};if(opts.update_seq&&updateSeq!==undefined){returnVal.update_seq=updateSeq;}
callback(null,returnVal);}
function onTxnComplete(){if(opts.attachments){postProcessAttachments(results,opts.binary).then(onResultsReady);}else{onResultsReady();}}
if(keyRangeError||limit===0){return;}
if(keys){return allDocsKeys(opts.keys,docStore,onBatch);}
if(limit===-1){return getAll(docStore,keyRange,onGetAll);}
runBatchedCursor(docStore,keyRange,opts.descending,limit+skip,onBatch);}
function checkBlobSupport(txn){return new Promise(function(resolve){var blob$$1=createBlob(['']);var req=txn.objectStore(DETECT_BLOB_SUPPORT_STORE).put(blob$$1,'key');req.onsuccess=function(){var matchedChrome=navigator.userAgent.match(/Chrome\/(\d+)/);var matchedEdge=navigator.userAgent.match(/Edge\//);resolve(matchedEdge||!matchedChrome||parseInt(matchedChrome[1],10)>=43);};req.onerror=txn.onabort=function(e){e.preventDefault();e.stopPropagation();resolve(false);};}).catch(function(){return false;});}
function countDocs(txn,cb){var index=txn.objectStore(DOC_STORE).index('deletedOrLocal');index.count(IDBKeyRange.only('0')).onsuccess=function(e){cb(e.target.result);};}
var running=false;var queue=[];function tryCode(fun,err,res,PouchDB){try{fun(err,res);}catch(err){PouchDB.emit('error',err);}}
function applyNext(){if(running||!queue.length){return;}
running=true;queue.shift()();}
function enqueueTask(action,callback,PouchDB){queue.push(function runAction(){action(function runCallback(err,res){tryCode(callback,err,res,PouchDB);running=false;__WEBPACK_IMPORTED_MODULE_1_immediate___default()(function runNext(){applyNext(PouchDB);});});});applyNext();}
function changes(opts,api,dbName,idb){opts=clone(opts);if(opts.continuous){var id=dbName+':'+uuid();changesHandler.addListener(dbName,id,api,opts);changesHandler.notify(dbName);return{cancel:function(){changesHandler.removeListener(dbName,id);}};}
var docIds=opts.doc_ids&&new ExportedSet(opts.doc_ids);opts.since=opts.since||0;var lastSeq=opts.since;var limit='limit'in opts?opts.limit:-1;if(limit===0){limit=1;}
var results=[];var numResults=0;var filter=filterChange(opts);var docIdsToMetadata=new ExportedMap();var txn;var bySeqStore;var docStore;var docIdRevIndex;function onBatch(batchKeys,batchValues,cursor){if(!cursor||!batchKeys.length){return;}
var winningDocs=new Array(batchKeys.length);var metadatas=new Array(batchKeys.length);function processMetadataAndWinningDoc(metadata,winningDoc){var change=opts.processChange(winningDoc,metadata,opts);lastSeq=change.seq=metadata.seq;var filtered=filter(change);if(typeof filtered==='object'){return Promise.reject(filtered);}
if(!filtered){return Promise.resolve();}
numResults++;if(opts.return_docs){results.push(change);}
if(opts.attachments&&opts.include_docs){return new Promise(function(resolve){fetchAttachmentsIfNecessary(winningDoc,opts,txn,function(){postProcessAttachments([change],opts.binary).then(function(){resolve(change);});});});}else{return Promise.resolve(change);}}
function onBatchDone(){var promises=[];for(var i=0,len=winningDocs.length;i<len;i++){if(numResults===limit){break;}
var winningDoc=winningDocs[i];if(!winningDoc){continue;}
var metadata=metadatas[i];promises.push(processMetadataAndWinningDoc(metadata,winningDoc));}
Promise.all(promises).then(function(changes){for(var i=0,len=changes.length;i<len;i++){if(changes[i]){opts.onChange(changes[i]);}}}).catch(opts.complete);if(numResults!==limit){cursor.continue();}}
var numDone=0;batchValues.forEach(function(value,i){var doc=decodeDoc(value);var seq=batchKeys[i];fetchWinningDocAndMetadata(doc,seq,function(metadata,winningDoc){metadatas[i]=metadata;winningDocs[i]=winningDoc;if(++numDone===batchKeys.length){onBatchDone();}});});}
function onGetMetadata(doc,seq,metadata,cb){if(metadata.seq!==seq){return cb();}
if(metadata.winningRev===doc._rev){return cb(metadata,doc);}
var docIdRev=doc._id+'::'+metadata.winningRev;var req=docIdRevIndex.get(docIdRev);req.onsuccess=function(e){cb(metadata,decodeDoc(e.target.result));};}
function fetchWinningDocAndMetadata(doc,seq,cb){if(docIds&&!docIds.has(doc._id)){return cb();}
var metadata=docIdsToMetadata.get(doc._id);if(metadata){return onGetMetadata(doc,seq,metadata,cb);}
docStore.get(doc._id).onsuccess=function(e){metadata=decodeMetadata(e.target.result);docIdsToMetadata.set(doc._id,metadata);onGetMetadata(doc,seq,metadata,cb);};}
function finish(){opts.complete(null,{results:results,last_seq:lastSeq});}
function onTxnComplete(){if(!opts.continuous&&opts.attachments){postProcessAttachments(results).then(finish);}else{finish();}}
var objectStores=[DOC_STORE,BY_SEQ_STORE];if(opts.attachments){objectStores.push(ATTACH_STORE);}
var txnResult=openTransactionSafely(idb,objectStores,'readonly');if(txnResult.error){return opts.complete(txnResult.error);}
txn=txnResult.txn;txn.onabort=idbError(opts.complete);txn.oncomplete=onTxnComplete;bySeqStore=txn.objectStore(BY_SEQ_STORE);docStore=txn.objectStore(DOC_STORE);docIdRevIndex=bySeqStore.index('_doc_id_rev');var keyRange=(opts.since&&!opts.descending)?IDBKeyRange.lowerBound(opts.since,true):null;runBatchedCursor(bySeqStore,keyRange,opts.descending,limit,onBatch);}
var cachedDBs=new ExportedMap();var blobSupportPromise;var openReqList=new ExportedMap();function IdbPouch(opts,callback){var api=this;enqueueTask(function(thisCallback){init(api,opts,thisCallback);},callback,api.constructor);}
function init(api,opts,callback){var dbName=opts.name;var idb=null;api._meta=null;function createSchema(db){var docStore=db.createObjectStore(DOC_STORE,{keyPath:'id'});db.createObjectStore(BY_SEQ_STORE,{autoIncrement:true}).createIndex('_doc_id_rev','_doc_id_rev',{unique:true});db.createObjectStore(ATTACH_STORE,{keyPath:'digest'});db.createObjectStore(META_STORE,{keyPath:'id',autoIncrement:false});db.createObjectStore(DETECT_BLOB_SUPPORT_STORE);docStore.createIndex('deletedOrLocal','deletedOrLocal',{unique:false});db.createObjectStore(LOCAL_STORE,{keyPath:'_id'});var attAndSeqStore=db.createObjectStore(ATTACH_AND_SEQ_STORE,{autoIncrement:true});attAndSeqStore.createIndex('seq','seq');attAndSeqStore.createIndex('digestSeq','digestSeq',{unique:true});}
function addDeletedOrLocalIndex(txn,callback){var docStore=txn.objectStore(DOC_STORE);docStore.createIndex('deletedOrLocal','deletedOrLocal',{unique:false});docStore.openCursor().onsuccess=function(event){var cursor=event.target.result;if(cursor){var metadata=cursor.value;var deleted=isDeleted(metadata);metadata.deletedOrLocal=deleted?"1":"0";docStore.put(metadata);cursor.continue();}else{callback();}};}
function createLocalStoreSchema(db){db.createObjectStore(LOCAL_STORE,{keyPath:'_id'}).createIndex('_doc_id_rev','_doc_id_rev',{unique:true});}
function migrateLocalStore(txn,cb){var localStore=txn.objectStore(LOCAL_STORE);var docStore=txn.objectStore(DOC_STORE);var seqStore=txn.objectStore(BY_SEQ_STORE);var cursor=docStore.openCursor();cursor.onsuccess=function(event){var cursor=event.target.result;if(cursor){var metadata=cursor.value;var docId=metadata.id;var local=isLocalId(docId);var rev=winningRev(metadata);if(local){var docIdRev=docId+"::"+rev;var start=docId+"::";var end=docId+"::~";var index=seqStore.index('_doc_id_rev');var range=IDBKeyRange.bound(start,end,false,false);var seqCursor=index.openCursor(range);seqCursor.onsuccess=function(e){seqCursor=e.target.result;if(!seqCursor){docStore.delete(cursor.primaryKey);cursor.continue();}else{var data=seqCursor.value;if(data._doc_id_rev===docIdRev){localStore.put(data);}
seqStore.delete(seqCursor.primaryKey);seqCursor.continue();}};}else{cursor.continue();}}else if(cb){cb();}};}
function addAttachAndSeqStore(db){var attAndSeqStore=db.createObjectStore(ATTACH_AND_SEQ_STORE,{autoIncrement:true});attAndSeqStore.createIndex('seq','seq');attAndSeqStore.createIndex('digestSeq','digestSeq',{unique:true});}
function migrateAttsAndSeqs(txn,callback){var seqStore=txn.objectStore(BY_SEQ_STORE);var attStore=txn.objectStore(ATTACH_STORE);var attAndSeqStore=txn.objectStore(ATTACH_AND_SEQ_STORE);var req=attStore.count();req.onsuccess=function(e){var count=e.target.result;if(!count){return callback();}
seqStore.openCursor().onsuccess=function(e){var cursor=e.target.result;if(!cursor){return callback();}
var doc=cursor.value;var seq=cursor.primaryKey;var atts=Object.keys(doc._attachments||{});var digestMap={};for(var j=0;j<atts.length;j++){var att=doc._attachments[atts[j]];digestMap[att.digest]=true;}
var digests=Object.keys(digestMap);for(j=0;j<digests.length;j++){var digest=digests[j];attAndSeqStore.put({seq:seq,digestSeq:digest+'::'+seq});}
cursor.continue();};};}
function migrateMetadata(txn){function decodeMetadataCompat(storedObject){if(!storedObject.data){storedObject.deleted=storedObject.deletedOrLocal==='1';return storedObject;}
return decodeMetadata(storedObject);}
var bySeqStore=txn.objectStore(BY_SEQ_STORE);var docStore=txn.objectStore(DOC_STORE);var cursor=docStore.openCursor();cursor.onsuccess=function(e){var cursor=e.target.result;if(!cursor){return;}
var metadata=decodeMetadataCompat(cursor.value);metadata.winningRev=metadata.winningRev||winningRev(metadata);function fetchMetadataSeq(){var start=metadata.id+'::';var end=metadata.id+'::\uffff';var req=bySeqStore.index('_doc_id_rev').openCursor(IDBKeyRange.bound(start,end));var metadataSeq=0;req.onsuccess=function(e){var cursor=e.target.result;if(!cursor){metadata.seq=metadataSeq;return onGetMetadataSeq();}
var seq=cursor.primaryKey;if(seq>metadataSeq){metadataSeq=seq;}
cursor.continue();};}
function onGetMetadataSeq(){var metadataToStore=encodeMetadata(metadata,metadata.winningRev,metadata.deleted);var req=docStore.put(metadataToStore);req.onsuccess=function(){cursor.continue();};}
if(metadata.seq){return onGetMetadataSeq();}
fetchMetadataSeq();};}
api._remote=false;api.type=function(){return 'idb';};api._id=toPromise(function(callback){callback(null,api._meta.instanceId);});api._bulkDocs=function idb_bulkDocs(req,reqOpts,callback){idbBulkDocs(opts,req,reqOpts,api,idb,callback);};api._get=function idb_get(id,opts,callback){var doc;var metadata;var err;var txn=opts.ctx;if(!txn){var txnResult=openTransactionSafely(idb,[DOC_STORE,BY_SEQ_STORE,ATTACH_STORE],'readonly');if(txnResult.error){return callback(txnResult.error);}
txn=txnResult.txn;}
function finish(){callback(err,{doc:doc,metadata:metadata,ctx:txn});}
txn.objectStore(DOC_STORE).get(id).onsuccess=function(e){metadata=decodeMetadata(e.target.result);if(!metadata){err=createError(MISSING_DOC,'missing');return finish();}
var rev;if(!opts.rev){rev=metadata.winningRev;var deleted=isDeleted(metadata);if(deleted){err=createError(MISSING_DOC,"deleted");return finish();}}else{rev=opts.latest?latest(opts.rev,metadata):opts.rev;}
var objectStore=txn.objectStore(BY_SEQ_STORE);var key=metadata.id+'::'+rev;objectStore.index('_doc_id_rev').get(key).onsuccess=function(e){doc=e.target.result;if(doc){doc=decodeDoc(doc);}
if(!doc){err=createError(MISSING_DOC,'missing');return finish();}
finish();};};};api._getAttachment=function(docId,attachId,attachment,opts,callback){var txn;if(opts.ctx){txn=opts.ctx;}else{var txnResult=openTransactionSafely(idb,[DOC_STORE,BY_SEQ_STORE,ATTACH_STORE],'readonly');if(txnResult.error){return callback(txnResult.error);}
txn=txnResult.txn;}
var digest=attachment.digest;var type=attachment.content_type;txn.objectStore(ATTACH_STORE).get(digest).onsuccess=function(e){var body=e.target.result.body;readBlobData(body,type,opts.binary,function(blobData){callback(null,blobData);});};};api._info=function idb_info(callback){var updateSeq;var docCount;var txnResult=openTransactionSafely(idb,[META_STORE,BY_SEQ_STORE],'readonly');if(txnResult.error){return callback(txnResult.error);}
var txn=txnResult.txn;txn.objectStore(META_STORE).get(META_STORE).onsuccess=function(e){docCount=e.target.result.docCount;};txn.objectStore(BY_SEQ_STORE).openCursor(null,'prev').onsuccess=function(e){var cursor=e.target.result;updateSeq=cursor?cursor.key:0;};txn.oncomplete=function(){callback(null,{doc_count:docCount,update_seq:updateSeq,idb_attachment_format:(api._meta.blobSupport?'binary':'base64')});};};api._allDocs=function idb_allDocs(opts,callback){idbAllDocs(opts,idb,callback);};api._changes=function idbChanges(opts){return changes(opts,api,dbName,idb);};api._close=function(callback){idb.close();cachedDBs.delete(dbName);callback();};api._getRevisionTree=function(docId,callback){var txnResult=openTransactionSafely(idb,[DOC_STORE],'readonly');if(txnResult.error){return callback(txnResult.error);}
var txn=txnResult.txn;var req=txn.objectStore(DOC_STORE).get(docId);req.onsuccess=function(event){var doc=decodeMetadata(event.target.result);if(!doc){callback(createError(MISSING_DOC));}else{callback(null,doc.rev_tree);}};};api._doCompaction=function(docId,revs,callback){var stores=[DOC_STORE,BY_SEQ_STORE,ATTACH_STORE,ATTACH_AND_SEQ_STORE];var txnResult=openTransactionSafely(idb,stores,'readwrite');if(txnResult.error){return callback(txnResult.error);}
var txn=txnResult.txn;var docStore=txn.objectStore(DOC_STORE);docStore.get(docId).onsuccess=function(event){var metadata=decodeMetadata(event.target.result);traverseRevTree(metadata.rev_tree,function(isLeaf,pos,revHash,ctx,opts){var rev=pos+'-'+revHash;if(revs.indexOf(rev)!==-1){opts.status='missing';}});compactRevs(revs,docId,txn);var winningRev$$1=metadata.winningRev;var deleted=metadata.deleted;txn.objectStore(DOC_STORE).put(encodeMetadata(metadata,winningRev$$1,deleted));};txn.onabort=idbError(callback);txn.oncomplete=function(){callback();};};api._getLocal=function(id,callback){var txnResult=openTransactionSafely(idb,[LOCAL_STORE],'readonly');if(txnResult.error){return callback(txnResult.error);}
var tx=txnResult.txn;var req=tx.objectStore(LOCAL_STORE).get(id);req.onerror=idbError(callback);req.onsuccess=function(e){var doc=e.target.result;if(!doc){callback(createError(MISSING_DOC));}else{delete doc['_doc_id_rev'];callback(null,doc);}};};api._putLocal=function(doc,opts,callback){if(typeof opts==='function'){callback=opts;opts={};}
delete doc._revisions;var oldRev=doc._rev;var id=doc._id;if(!oldRev){doc._rev='0-1';}else{doc._rev='0-'+(parseInt(oldRev.split('-')[1],10)+1);}
var tx=opts.ctx;var ret;if(!tx){var txnResult=openTransactionSafely(idb,[LOCAL_STORE],'readwrite');if(txnResult.error){return callback(txnResult.error);}
tx=txnResult.txn;tx.onerror=idbError(callback);tx.oncomplete=function(){if(ret){callback(null,ret);}};}
var oStore=tx.objectStore(LOCAL_STORE);var req;if(oldRev){req=oStore.get(id);req.onsuccess=function(e){var oldDoc=e.target.result;if(!oldDoc||oldDoc._rev!==oldRev){callback(createError(REV_CONFLICT));}else{var req=oStore.put(doc);req.onsuccess=function(){ret={ok:true,id:doc._id,rev:doc._rev};if(opts.ctx){callback(null,ret);}};}};}else{req=oStore.add(doc);req.onerror=function(e){callback(createError(REV_CONFLICT));e.preventDefault();e.stopPropagation();};req.onsuccess=function(){ret={ok:true,id:doc._id,rev:doc._rev};if(opts.ctx){callback(null,ret);}};}};api._removeLocal=function(doc,opts,callback){if(typeof opts==='function'){callback=opts;opts={};}
var tx=opts.ctx;if(!tx){var txnResult=openTransactionSafely(idb,[LOCAL_STORE],'readwrite');if(txnResult.error){return callback(txnResult.error);}
tx=txnResult.txn;tx.oncomplete=function(){if(ret){callback(null,ret);}};}
var ret;var id=doc._id;var oStore=tx.objectStore(LOCAL_STORE);var req=oStore.get(id);req.onerror=idbError(callback);req.onsuccess=function(e){var oldDoc=e.target.result;if(!oldDoc||oldDoc._rev!==doc._rev){callback(createError(MISSING_DOC));}else{oStore.delete(id);ret={ok:true,id:id,rev:'0-0'};if(opts.ctx){callback(null,ret);}}};};api._destroy=function(opts,callback){changesHandler.removeAllListeners(dbName);var openReq=openReqList.get(dbName);if(openReq&&openReq.result){openReq.result.close();cachedDBs.delete(dbName);}
var req=indexedDB.deleteDatabase(dbName);req.onsuccess=function(){openReqList.delete(dbName);if(hasLocalStorage()&&(dbName in localStorage)){delete localStorage[dbName];}
callback(null,{'ok':true});};req.onerror=idbError(callback);};var cached=cachedDBs.get(dbName);if(cached){idb=cached.idb;api._meta=cached.global;return __WEBPACK_IMPORTED_MODULE_1_immediate___default()(function(){callback(null,api);});}
var req=indexedDB.open(dbName,ADAPTER_VERSION);openReqList.set(dbName,req);req.onupgradeneeded=function(e){var db=e.target.result;if(e.oldVersion<1){return createSchema(db);}
var txn=e.currentTarget.transaction;if(e.oldVersion<3){createLocalStoreSchema(db);}
if(e.oldVersion<4){addAttachAndSeqStore(db);}
var migrations=[addDeletedOrLocalIndex,migrateLocalStore,migrateAttsAndSeqs,migrateMetadata];var i=e.oldVersion;function next(){var migration=migrations[i-1];i++;if(migration){migration(txn,next);}}
next();};req.onsuccess=function(e){idb=e.target.result;idb.onversionchange=function(){idb.close();cachedDBs.delete(dbName);};idb.onabort=function(e){guardedConsole('error','Database has a global failure',e.target.error);idb.close();cachedDBs.delete(dbName);};var txn=idb.transaction([META_STORE,DETECT_BLOB_SUPPORT_STORE,DOC_STORE],'readwrite');var storedMetaDoc=false;var metaDoc;var docCount;var blobSupport;var instanceId;function completeSetup(){if(typeof blobSupport==='undefined'||!storedMetaDoc){return;}
api._meta={name:dbName,instanceId:instanceId,blobSupport:blobSupport};cachedDBs.set(dbName,{idb:idb,global:api._meta});callback(null,api);}
function storeMetaDocIfReady(){if(typeof docCount==='undefined'||typeof metaDoc==='undefined'){return;}
var instanceKey=dbName+'_id';if(instanceKey in metaDoc){instanceId=metaDoc[instanceKey];}else{metaDoc[instanceKey]=instanceId=uuid();}
metaDoc.docCount=docCount;txn.objectStore(META_STORE).put(metaDoc);}
txn.objectStore(META_STORE).get(META_STORE).onsuccess=function(e){metaDoc=e.target.result||{id:META_STORE};storeMetaDocIfReady();};countDocs(txn,function(count){docCount=count;storeMetaDocIfReady();});if(!blobSupportPromise){blobSupportPromise=checkBlobSupport(txn);}
blobSupportPromise.then(function(val){blobSupport=val;completeSetup();});txn.oncomplete=function(){storedMetaDoc=true;completeSetup();};txn.onabort=idbError(callback);};req.onerror=function(){var msg='Failed to open indexedDB, are you in private browsing mode?';guardedConsole('error',msg);callback(createError(IDB_ERROR,msg));};}
IdbPouch.valid=function(){try{return typeof indexedDB!=='undefined'&&typeof IDBKeyRange!=='undefined';}catch(e){return false;}};function IDBPouch(PouchDB){PouchDB.adapter('idb',IdbPouch,true);}
function pool(promiseFactories,limit){return new Promise(function(resolve,reject){var running=0;var current=0;var done=0;var len=promiseFactories.length;var err;function runNext(){running++;promiseFactories[current++]().then(onSuccess,onError);}
function doNext(){if(++done===len){if(err){reject(err);}else{resolve();}}else{runNextBatch();}}
function onSuccess(){running--;doNext();}
function onError(thisErr){running--;err=err||thisErr;doNext();}
function runNextBatch(){while(running<limit&&current<len){runNext();}}
runNextBatch();});}
var CHANGES_BATCH_SIZE=25;var MAX_SIMULTANEOUS_REVS=50;var CHANGES_TIMEOUT_BUFFER=5000;var DEFAULT_HEARTBEAT=10000;var supportsBulkGetMap={};function readAttachmentsAsBlobOrBuffer(row){var doc=row.doc||row.ok;var atts=doc._attachments;if(!atts){return;}
Object.keys(atts).forEach(function(filename){var att=atts[filename];att.data=b64ToBluffer(att.data,att.content_type);});}
function encodeDocId(id){if(/^_design/.test(id)){return '_design/'+encodeURIComponent(id.slice(8));}
if(/^_local/.test(id)){return '_local/'+encodeURIComponent(id.slice(7));}
return encodeURIComponent(id);}
function preprocessAttachments$1(doc){if(!doc._attachments||!Object.keys(doc._attachments)){return Promise.resolve();}
return Promise.all(Object.keys(doc._attachments).map(function(key){var attachment=doc._attachments[key];if(attachment.data&&typeof attachment.data!=='string'){return new Promise(function(resolve){blobToBase64(attachment.data,resolve);}).then(function(b64){attachment.data=b64;});}}));}
function hasUrlPrefix(opts){if(!opts.prefix){return false;}
var protocol=parseUri(opts.prefix).protocol;return protocol==='http'||protocol==='https';}
function getHost(name,opts){if(hasUrlPrefix(opts)){var dbName=opts.name.substr(opts.prefix.length);var prefix=opts.prefix.replace(/\/?$/,'/');name=prefix+encodeURIComponent(dbName);}
var uri=parseUri(name);if(uri.user||uri.password){uri.auth={username:uri.user,password:uri.password};}
var parts=uri.path.replace(/(^\/|\/$)/g,'').split('/');uri.db=parts.pop();if(uri.db.indexOf('%')===-1){uri.db=encodeURIComponent(uri.db);}
uri.path=parts.join('/');return uri;}
function genDBUrl(opts,path){return genUrl(opts,opts.db+'/'+path);}
function genUrl(opts,path){var pathDel=!opts.path?'':'/';return opts.protocol+'://'+opts.host+
(opts.port?(':'+opts.port):'')+
'/'+opts.path+pathDel+path;}
function paramsToStr(params){return '?'+Object.keys(params).map(function(k){return k+'='+encodeURIComponent(params[k]);}).join('&');}
function shouldCacheBust(opts){var ua=(typeof navigator!=='undefined'&&navigator.userAgent)?navigator.userAgent.toLowerCase():'';var isIE=ua.indexOf('msie')!==-1;var isTrident=ua.indexOf('trident')!==-1;var isEdge=ua.indexOf('edge')!==-1;var isGET=!('method'in opts)||opts.method==='GET';return(isIE||isTrident||isEdge)&&isGET;}
function HttpPouch(opts,callback){var api=this;var host=getHost(opts.name,opts);var dbUrl=genDBUrl(host,'');opts=clone(opts);var ourFetch=function(url,options){options=options||{};options.headers=options.headers||new h();if(opts.auth||host.auth){var nAuth=opts.auth||host.auth;var str=nAuth.username+':'+nAuth.password;var token=thisBtoa(unescape(encodeURIComponent(str)));options.headers.set('Authorization','Basic '+token);}
var headers=opts.headers||{};Object.keys(headers).forEach(function(key){options.headers.append(key,headers[key]);});if(shouldCacheBust(options)){url+=(url.indexOf('?')===-1?'?':'&')+'_nonce='+Date.now();}
var fetchFun=opts.fetch||f$1;return fetchFun(url,options);};function adapterFun$$1(name,fun){return adapterFun(name,__WEBPACK_IMPORTED_MODULE_0_argsarray___default()(function(args){setup().then(function(){return fun.apply(this,args);}).catch(function(e){var callback=args.pop();callback(e);});})).bind(api);}
function fetchJSON(url,options,callback){var result={};options=options||{};options.headers=options.headers||new h();if(!options.headers.get('Content-Type')){options.headers.set('Content-Type','application/json');}
if(!options.headers.get('Accept')){options.headers.set('Accept','application/json');}
return ourFetch(url,options).then(function(response){result.ok=response.ok;result.status=response.status;return response.json();}).then(function(json){result.data=json;if(!result.ok){result.data.status=result.status;var err=generateErrorFromResponse(result.data);if(callback){return callback(err);}else{throw err;}}
if(Array.isArray(result.data)){result.data=result.data.map(function(v){if(v.error||v.missing){return generateErrorFromResponse(v);}else{return v;}});}
if(callback){callback(null,result.data);}else{return result;}});}
var setupPromise;function setup(){if(opts.skip_setup){return Promise.resolve();}
if(setupPromise){return setupPromise;}
setupPromise=fetchJSON(dbUrl).catch(function(err){if(err&&err.status&&err.status===404){explainError(404,'PouchDB is just detecting if the remote exists.');return fetchJSON(dbUrl,{method:'PUT'});}else{return Promise.reject(err);}}).catch(function(err){if(err&&err.status&&err.status===412){return true;}
return Promise.reject(err);});setupPromise.catch(function(){setupPromise=null;});return setupPromise;}
__WEBPACK_IMPORTED_MODULE_1_immediate___default()(function(){callback(null,api);});api._remote=true;api.type=function(){return 'http';};api.id=adapterFun$$1('id',function(callback){ourFetch(genUrl(host,'')).then(function(response){return response.json();}).then(function(result){var uuid$$1=(result&&result.uuid)?(result.uuid+host.db):genDBUrl(host,'');callback(null,uuid$$1);}).catch(function(err){callback(err);});});api.compact=adapterFun$$1('compact',function(opts,callback){if(typeof opts==='function'){callback=opts;opts={};}
opts=clone(opts);fetchJSON(genDBUrl(host,'_compact'),{method:'POST'}).then(function(){function ping(){api.info(function(err,res){if(res&&!res.compact_running){callback(null,{ok:true});}else{setTimeout(ping,opts.interval||200);}});}
ping();});});api.bulkGet=adapterFun('bulkGet',function(opts,callback){var self=this;function doBulkGet(cb){var params={};if(opts.revs){params.revs=true;}
if(opts.attachments){params.attachments=true;}
if(opts.latest){params.latest=true;}
fetchJSON(genDBUrl(host,'_bulk_get'+paramsToStr(params)),{method:'POST',body:JSON.stringify({docs:opts.docs})}).then(function(result){if(opts.attachments&&opts.binary){result.data.results.forEach(function(res){res.docs.forEach(readAttachmentsAsBlobOrBuffer);});}
cb(null,result.data);}).catch(cb);}
function doBulkGetShim(){var batchSize=MAX_SIMULTANEOUS_REVS;var numBatches=Math.ceil(opts.docs.length/batchSize);var numDone=0;var results=new Array(numBatches);function onResult(batchNum){return function(err,res){results[batchNum]=res.results;if(++numDone===numBatches){callback(null,{results:flatten(results)});}};}
for(var i=0;i<numBatches;i++){var subOpts=pick(opts,['revs','attachments','binary','latest']);subOpts.docs=opts.docs.slice(i*batchSize,Math.min(opts.docs.length,(i+1)*batchSize));bulkGet(self,subOpts,onResult(i));}}
var dbUrl=genUrl(host,'');var supportsBulkGet=supportsBulkGetMap[dbUrl];if(typeof supportsBulkGet!=='boolean'){doBulkGet(function(err,res){if(err){supportsBulkGetMap[dbUrl]=false;explainError(err.status,'PouchDB is just detecting if the remote '+
'supports the _bulk_get API.');doBulkGetShim();}else{supportsBulkGetMap[dbUrl]=true;callback(null,res);}});}else if(supportsBulkGet){doBulkGet(callback);}else{doBulkGetShim();}});api._info=function(callback){setup().then(function(){return ourFetch(genDBUrl(host,''));}).then(function(response){return response.json();}).then(function(info){info.host=genDBUrl(host,'');callback(null,info);}).catch(callback);};api.fetch=function(path,options){return setup().then(function(){return ourFetch(genDBUrl(host,path),options);});};api.get=adapterFun$$1('get',function(id,opts,callback){if(typeof opts==='function'){callback=opts;opts={};}
opts=clone(opts);var params={};if(opts.revs){params.revs=true;}
if(opts.revs_info){params.revs_info=true;}
if(opts.latest){params.latest=true;}
if(opts.open_revs){if(opts.open_revs!=="all"){opts.open_revs=JSON.stringify(opts.open_revs);}
params.open_revs=opts.open_revs;}
if(opts.rev){params.rev=opts.rev;}
if(opts.conflicts){params.conflicts=opts.conflicts;}
if(opts.update_seq){params.update_seq=opts.update_seq;}
id=encodeDocId(id);function fetchAttachments(doc){var atts=doc._attachments;var filenames=atts&&Object.keys(atts);if(!atts||!filenames.length){return;}
function fetchData(filename){var att=atts[filename];var path=encodeDocId(doc._id)+'/'+encodeAttachmentId(filename)+
'?rev='+doc._rev;return ourFetch(genDBUrl(host,path)).then(function(response){if(typeof process!=='undefined'&&!process.browser){return response.buffer();}else{return response.blob();}}).then(function(blob){if(opts.binary){if(typeof process!=='undefined'&&!process.browser){blob.type=att.content_type;}
return blob;}
return new Promise(function(resolve){blobToBase64(blob,resolve);});}).then(function(data){delete att.stub;delete att.length;att.data=data;});}
var promiseFactories=filenames.map(function(filename){return function(){return fetchData(filename);};});return pool(promiseFactories,5);}
function fetchAllAttachments(docOrDocs){if(Array.isArray(docOrDocs)){return Promise.all(docOrDocs.map(function(doc){if(doc.ok){return fetchAttachments(doc.ok);}}));}
return fetchAttachments(docOrDocs);}
var url=genDBUrl(host,id+paramsToStr(params));fetchJSON(url).then(function(res){return Promise.resolve().then(function(){if(opts.attachments){return fetchAllAttachments(res.data);}}).then(function(){callback(null,res.data);});}).catch(function(e){e.docId=id;callback(e);});});api.remove=adapterFun$$1('remove',function(docOrId,optsOrRev,opts,cb){var doc;if(typeof optsOrRev==='string'){doc={_id:docOrId,_rev:optsOrRev};if(typeof opts==='function'){cb=opts;opts={};}}else{doc=docOrId;if(typeof optsOrRev==='function'){cb=optsOrRev;opts={};}else{cb=opts;opts=optsOrRev;}}
var rev=(doc._rev||opts.rev);var url=genDBUrl(host,encodeDocId(doc._id))+'?rev='+rev;fetchJSON(url,{method:'DELETE'},cb).catch(cb);});function encodeAttachmentId(attachmentId){return attachmentId.split("/").map(encodeURIComponent).join("/");}
api.getAttachment=adapterFun$$1('getAttachment',function(docId,attachmentId,opts,callback){if(typeof opts==='function'){callback=opts;opts={};}
var params=opts.rev?('?rev='+opts.rev):'';var url=genDBUrl(host,encodeDocId(docId))+'/'+
encodeAttachmentId(attachmentId)+params;var contentType;ourFetch(url,{method:'GET'}).then(function(response){contentType=response.headers.get('content-type');if(!response.ok){throw response;}else{if(typeof process!=='undefined'&&!process.browser){return response.buffer();}else{return response.blob();}}}).then(function(blob){if(typeof process!=='undefined'&&!process.browser){blob.type=contentType;}
callback(null,blob);}).catch(function(err){callback(err);});});api.removeAttachment=adapterFun$$1('removeAttachment',function(docId,attachmentId,rev,callback){var url=genDBUrl(host,encodeDocId(docId)+'/'+
encodeAttachmentId(attachmentId))+'?rev='+rev;fetchJSON(url,{method:'DELETE'},callback).catch(callback);});api.putAttachment=adapterFun$$1('putAttachment',function(docId,attachmentId,rev,blob,type,callback){if(typeof type==='function'){callback=type;type=blob;blob=rev;rev=null;}
var id=encodeDocId(docId)+'/'+encodeAttachmentId(attachmentId);var url=genDBUrl(host,id);if(rev){url+='?rev='+rev;}
if(typeof blob==='string'){var binary;try{binary=thisAtob(blob);}catch(err){return callback(createError(BAD_ARG,'Attachment is not a valid base64 string'));}
blob=binary?binStringToBluffer(binary,type):'';}
fetchJSON(url,{headers:new h({'Content-Type':type}),method:'PUT',body:blob},callback).catch(callback);});api._bulkDocs=function(req,opts,callback){req.new_edits=opts.new_edits;setup().then(function(){return Promise.all(req.docs.map(preprocessAttachments$1));}).then(function(){return fetchJSON(genDBUrl(host,'_bulk_docs'),{method:'POST',body:JSON.stringify(req)},callback);}).catch(callback);};api._put=function(doc,opts,callback){setup().then(function(){return preprocessAttachments$1(doc);}).then(function(){return fetchJSON(genDBUrl(host,encodeDocId(doc._id)),{method:'PUT',body:JSON.stringify(doc)});}).then(function(result){callback(null,result.data);}).catch(function(err){err.docId=doc&&doc._id;callback(err);});};api.allDocs=adapterFun$$1('allDocs',function(opts,callback){if(typeof opts==='function'){callback=opts;opts={};}
opts=clone(opts);var params={};var body;var method='GET';if(opts.conflicts){params.conflicts=true;}
if(opts.update_seq){params.update_seq=true;}
if(opts.descending){params.descending=true;}
if(opts.include_docs){params.include_docs=true;}
if(opts.attachments){params.attachments=true;}
if(opts.key){params.key=JSON.stringify(opts.key);}
if(opts.start_key){opts.startkey=opts.start_key;}
if(opts.startkey){params.startkey=JSON.stringify(opts.startkey);}
if(opts.end_key){opts.endkey=opts.end_key;}
if(opts.endkey){params.endkey=JSON.stringify(opts.endkey);}
if(typeof opts.inclusive_end!=='undefined'){params.inclusive_end=!!opts.inclusive_end;}
if(typeof opts.limit!=='undefined'){params.limit=opts.limit;}
if(typeof opts.skip!=='undefined'){params.skip=opts.skip;}
var paramStr=paramsToStr(params);if(typeof opts.keys!=='undefined'){method='POST';body={keys:opts.keys};}
fetchJSON(genDBUrl(host,'_all_docs'+paramStr),{method:method,body:JSON.stringify(body)}).then(function(result){if(opts.include_docs&&opts.attachments&&opts.binary){result.data.rows.forEach(readAttachmentsAsBlobOrBuffer);}
callback(null,result.data);}).catch(callback);});api._changes=function(opts){var batchSize='batch_size'in opts?opts.batch_size:CHANGES_BATCH_SIZE;opts=clone(opts);if(opts.continuous&&!('heartbeat'in opts)){opts.heartbeat=DEFAULT_HEARTBEAT;}
var requestTimeout=('timeout'in opts)?opts.timeout:30*1000;if('timeout'in opts&&opts.timeout&&(requestTimeout-opts.timeout)<CHANGES_TIMEOUT_BUFFER){requestTimeout=opts.timeout+CHANGES_TIMEOUT_BUFFER;}
if('heartbeat'in opts&&opts.heartbeat&&(requestTimeout-opts.heartbeat)<CHANGES_TIMEOUT_BUFFER){requestTimeout=opts.heartbeat+CHANGES_TIMEOUT_BUFFER;}
var params={};if('timeout'in opts&&opts.timeout){params.timeout=opts.timeout;}
var limit=(typeof opts.limit!=='undefined')?opts.limit:false;var leftToFetch=limit;if(opts.style){params.style=opts.style;}
if(opts.include_docs||opts.filter&&typeof opts.filter==='function'){params.include_docs=true;}
if(opts.attachments){params.attachments=true;}
if(opts.continuous){params.feed='longpoll';}
if(opts.seq_interval){params.seq_interval=opts.seq_interval;}
if(opts.conflicts){params.conflicts=true;}
if(opts.descending){params.descending=true;}
if(opts.update_seq){params.update_seq=true;}
if('heartbeat'in opts){if(opts.heartbeat){params.heartbeat=opts.heartbeat;}}
if(opts.filter&&typeof opts.filter==='string'){params.filter=opts.filter;}
if(opts.view&&typeof opts.view==='string'){params.filter='_view';params.view=opts.view;}
if(opts.query_params&&typeof opts.query_params==='object'){for(var param_name in opts.query_params){if(opts.query_params.hasOwnProperty(param_name)){params[param_name]=opts.query_params[param_name];}}}
var method='GET';var body;if(opts.doc_ids){params.filter='_doc_ids';method='POST';body={doc_ids:opts.doc_ids};}
else if(opts.selector){params.filter='_selector';method='POST';body={selector:opts.selector};}
var controller=new a();var lastFetchedSeq;var fetchData=function(since,callback){if(opts.aborted){return;}
params.since=since;if(typeof params.since==="object"){params.since=JSON.stringify(params.since);}
if(opts.descending){if(limit){params.limit=leftToFetch;}}else{params.limit=(!limit||leftToFetch>batchSize)?batchSize:leftToFetch;}
var url=genDBUrl(host,'_changes'+paramsToStr(params));var fetchOpts={signal:controller.signal,method:method,body:JSON.stringify(body)};lastFetchedSeq=since;if(opts.aborted){return;}
setup().then(function(){return fetchJSON(url,fetchOpts,callback);}).catch(callback);};var results={results:[]};var fetched=function(err,res){if(opts.aborted){return;}
var raw_results_length=0;if(res&&res.results){raw_results_length=res.results.length;results.last_seq=res.last_seq;var pending=null;var lastSeq=null;if(typeof res.pending==='number'){pending=res.pending;}
if(typeof results.last_seq==='string'||typeof results.last_seq==='number'){lastSeq=results.last_seq;}
var req={};req.query=opts.query_params;res.results=res.results.filter(function(c){leftToFetch--;var ret=filterChange(opts)(c);if(ret){if(opts.include_docs&&opts.attachments&&opts.binary){readAttachmentsAsBlobOrBuffer(c);}
if(opts.return_docs){results.results.push(c);}
opts.onChange(c,pending,lastSeq);}
return ret;});}else if(err){opts.aborted=true;opts.complete(err);return;}
if(res&&res.last_seq){lastFetchedSeq=res.last_seq;}
var finished=(limit&&leftToFetch<=0)||(res&&raw_results_length<batchSize)||(opts.descending);if((opts.continuous&&!(limit&&leftToFetch<=0))||!finished){__WEBPACK_IMPORTED_MODULE_1_immediate___default()(function(){fetchData(lastFetchedSeq,fetched);});}else{opts.complete(null,results);}};fetchData(opts.since||0,fetched);return{cancel:function(){opts.aborted=true;controller.abort();}};};api.revsDiff=adapterFun$$1('revsDiff',function(req,opts,callback){if(typeof opts==='function'){callback=opts;opts={};}
fetchJSON(genDBUrl(host,'_revs_diff'),{method:'POST',body:JSON.stringify(req)},callback).catch(callback);});api._close=function(callback){callback();};api._destroy=function(options,callback){fetchJSON(genDBUrl(host,''),{method:'DELETE'}).then(function(json){callback(null,json);}).catch(function(err){if(err.status===404){callback(null,{ok:true});}else{callback(err);}});};}
HttpPouch.valid=function(){return true;};function HttpPouch$1(PouchDB){PouchDB.adapter('http',HttpPouch,false);PouchDB.adapter('https',HttpPouch,false);}
function QueryParseError(message){this.status=400;this.name='query_parse_error';this.message=message;this.error=true;try{Error.captureStackTrace(this,QueryParseError);}catch(e){}}
__WEBPACK_IMPORTED_MODULE_3_inherits___default()(QueryParseError,Error);function NotFoundError(message){this.status=404;this.name='not_found';this.message=message;this.error=true;try{Error.captureStackTrace(this,NotFoundError);}catch(e){}}
__WEBPACK_IMPORTED_MODULE_3_inherits___default()(NotFoundError,Error);function BuiltInError(message){this.status=500;this.name='invalid_value';this.message=message;this.error=true;try{Error.captureStackTrace(this,BuiltInError);}catch(e){}}
__WEBPACK_IMPORTED_MODULE_3_inherits___default()(BuiltInError,Error);function promisedCallback(promise,callback){if(callback){promise.then(function(res){__WEBPACK_IMPORTED_MODULE_1_immediate___default()(function(){callback(null,res);});},function(reason){__WEBPACK_IMPORTED_MODULE_1_immediate___default()(function(){callback(reason);});});}
return promise;}
function callbackify(fun){return __WEBPACK_IMPORTED_MODULE_0_argsarray___default()(function(args){var cb=args.pop();var promise=fun.apply(this,args);if(typeof cb==='function'){promisedCallback(promise,cb);}
return promise;});}
function fin(promise,finalPromiseFactory){return promise.then(function(res){return finalPromiseFactory().then(function(){return res;});},function(reason){return finalPromiseFactory().then(function(){throw reason;});});}
function sequentialize(queue,promiseFactory){return function(){var args=arguments;var that=this;return queue.add(function(){return promiseFactory.apply(that,args);});};}
function uniq(arr){var theSet=new ExportedSet(arr);var result=new Array(theSet.size);var index=-1;theSet.forEach(function(value){result[++index]=value;});return result;}
function mapToKeysArray(map){var result=new Array(map.size);var index=-1;map.forEach(function(value,key){result[++index]=key;});return result;}
function createBuiltInError(name){var message='builtin '+name+
' function requires map values to be numbers'+
' or number arrays';return new BuiltInError(message);}
function sum(values){var result=0;for(var i=0,len=values.length;i<len;i++){var num=values[i];if(typeof num!=='number'){if(Array.isArray(num)){result=typeof result==='number'?[result]:result;for(var j=0,jLen=num.length;j<jLen;j++){var jNum=num[j];if(typeof jNum!=='number'){throw createBuiltInError('_sum');}else if(typeof result[j]==='undefined'){result.push(jNum);}else{result[j]+=jNum;}}}else{throw createBuiltInError('_sum');}}else if(typeof result==='number'){result+=num;}else{result[0]+=num;}}
return result;}
var log=guardedConsole.bind(null,'log');var isArray=Array.isArray;var toJSON=JSON.parse;function evalFunctionWithEval(func,emit){return scopeEval("return ("+func.replace(/;\s*$/,"")+");",{emit:emit,sum:sum,log:log,isArray:isArray,toJSON:toJSON});}
function TaskQueue$1(){this.promise=new Promise(function(fulfill){fulfill();});}
TaskQueue$1.prototype.add=function(promiseFactory){this.promise=this.promise.catch(function(){}).then(function(){return promiseFactory();});return this.promise;};TaskQueue$1.prototype.finish=function(){return this.promise;};function stringify(input){if(!input){return 'undefined';}
switch(typeof input){case 'function':return input.toString();case 'string':return input.toString();default:return JSON.stringify(input);}}
function createViewSignature(mapFun,reduceFun){return stringify(mapFun)+stringify(reduceFun)+'undefined';}
function createView(sourceDB,viewName,mapFun,reduceFun,temporary,localDocName){var viewSignature=createViewSignature(mapFun,reduceFun);var cachedViews;if(!temporary){cachedViews=sourceDB._cachedViews=sourceDB._cachedViews||{};if(cachedViews[viewSignature]){return cachedViews[viewSignature];}}
var promiseForView=sourceDB.info().then(function(info){var depDbName=info.db_name+'-mrview-'+
(temporary?'temp':stringMd5(viewSignature));function diffFunction(doc){doc.views=doc.views||{};var fullViewName=viewName;if(fullViewName.indexOf('/')===-1){fullViewName=viewName+'/'+viewName;}
var depDbs=doc.views[fullViewName]=doc.views[fullViewName]||{};if(depDbs[depDbName]){return;}
depDbs[depDbName]=true;return doc;}
return upsert(sourceDB,'_local/'+localDocName,diffFunction).then(function(){return sourceDB.registerDependentDatabase(depDbName).then(function(res){var db=res.db;db.auto_compaction=true;var view={name:depDbName,db:db,sourceDB:sourceDB,adapter:sourceDB.adapter,mapFun:mapFun,reduceFun:reduceFun};return view.db.get('_local/lastSeq').catch(function(err){if(err.status!==404){throw err;}}).then(function(lastSeqDoc){view.seq=lastSeqDoc?lastSeqDoc.seq:0;if(cachedViews){view.db.once('destroyed',function(){delete cachedViews[viewSignature];});}
return view;});});});});if(cachedViews){cachedViews[viewSignature]=promiseForView;}
return promiseForView;}
var persistentQueues={};var tempViewQueue=new TaskQueue$1();var CHANGES_BATCH_SIZE$1=50;function parseViewName(name){return name.indexOf('/')===-1?[name,name]:name.split('/');}
function isGenOne(changes){return changes.length===1&&/^1-/.test(changes[0].rev);}
function emitError(db,e){try{db.emit('error',e);}catch(err){guardedConsole('error','The user\'s map/reduce function threw an uncaught error.\n'+
'You can debug this error by doing:\n'+
'myDatabase.on(\'error\', function (err) { debugger; });\n'+
'Please double-check your map/reduce function.');guardedConsole('error',e);}}
function createAbstractMapReduce(localDocName,mapper,reducer,ddocValidator){function tryMap(db,fun,doc){try{fun(doc);}catch(e){emitError(db,e);}}
function tryReduce(db,fun,keys,values,rereduce){try{return{output:fun(keys,values,rereduce)};}catch(e){emitError(db,e);return{error:e};}}
function sortByKeyThenValue(x,y){var keyCompare=collate(x.key,y.key);return keyCompare!==0?keyCompare:collate(x.value,y.value);}
function sliceResults(results,limit,skip){skip=skip||0;if(typeof limit==='number'){return results.slice(skip,limit+skip);}else if(skip>0){return results.slice(skip);}
return results;}
function rowToDocId(row){var val=row.value;var docId=(val&&typeof val==='object'&&val._id)||row.id;return docId;}
function readAttachmentsAsBlobOrBuffer(res){res.rows.forEach(function(row){var atts=row.doc&&row.doc._attachments;if(!atts){return;}
Object.keys(atts).forEach(function(filename){var att=atts[filename];atts[filename].data=b64ToBluffer(att.data,att.content_type);});});}
function postprocessAttachments(opts){return function(res){if(opts.include_docs&&opts.attachments&&opts.binary){readAttachmentsAsBlobOrBuffer(res);}
return res;};}
function addHttpParam(paramName,opts,params,asJson){var val=opts[paramName];if(typeof val!=='undefined'){if(asJson){val=encodeURIComponent(JSON.stringify(val));}
params.push(paramName+'='+val);}}
function coerceInteger(integerCandidate){if(typeof integerCandidate!=='undefined'){var asNumber=Number(integerCandidate);if(!isNaN(asNumber)&&asNumber===parseInt(integerCandidate,10)){return asNumber;}else{return integerCandidate;}}}
function coerceOptions(opts){opts.group_level=coerceInteger(opts.group_level);opts.limit=coerceInteger(opts.limit);opts.skip=coerceInteger(opts.skip);return opts;}
function checkPositiveInteger(number){if(number){if(typeof number!=='number'){return new QueryParseError('Invalid value for integer: "'+
number+'"');}
if(number<0){return new QueryParseError('Invalid value for positive integer: '+
'"'+number+'"');}}}
function checkQueryParseError(options,fun){var startkeyName=options.descending?'endkey':'startkey';var endkeyName=options.descending?'startkey':'endkey';if(typeof options[startkeyName]!=='undefined'&&typeof options[endkeyName]!=='undefined'&&collate(options[startkeyName],options[endkeyName])>0){throw new QueryParseError('No rows can match your key range, '+
'reverse your start_key and end_key or set {descending : true}');}else if(fun.reduce&&options.reduce!==false){if(options.include_docs){throw new QueryParseError('{include_docs:true} is invalid for reduce');}else if(options.keys&&options.keys.length>1&&!options.group&&!options.group_level){throw new QueryParseError('Multi-key fetches for reduce views must use '+
'{group: true}');}}
['group_level','limit','skip'].forEach(function(optionName){var error=checkPositiveInteger(options[optionName]);if(error){throw error;}});}
function httpQuery(db,fun,opts){var params=[];var body;var method='GET';var ok,status;addHttpParam('reduce',opts,params);addHttpParam('include_docs',opts,params);addHttpParam('attachments',opts,params);addHttpParam('limit',opts,params);addHttpParam('descending',opts,params);addHttpParam('group',opts,params);addHttpParam('group_level',opts,params);addHttpParam('skip',opts,params);addHttpParam('stale',opts,params);addHttpParam('conflicts',opts,params);addHttpParam('startkey',opts,params,true);addHttpParam('start_key',opts,params,true);addHttpParam('endkey',opts,params,true);addHttpParam('end_key',opts,params,true);addHttpParam('inclusive_end',opts,params);addHttpParam('key',opts,params,true);addHttpParam('update_seq',opts,params);params=params.join('&');params=params===''?'':'?'+params;if(typeof opts.keys!=='undefined'){var MAX_URL_LENGTH=2000;var keysAsString='keys='+encodeURIComponent(JSON.stringify(opts.keys));if(keysAsString.length+params.length+1<=MAX_URL_LENGTH){params+=(params[0]==='?'?'&':'?')+keysAsString;}else{method='POST';if(typeof fun==='string'){body={keys:opts.keys};}else{fun.keys=opts.keys;}}}
if(typeof fun==='string'){var parts=parseViewName(fun);return db.fetch('_design/'+parts[0]+'/_view/'+parts[1]+params,{headers:new h({'Content-Type':'application/json'}),method:method,body:JSON.stringify(body)}).then(function(response){ok=response.ok;status=response.status;return response.json();}).then(function(result){if(!ok){result.status=status;throw generateErrorFromResponse(result);}
result.rows.forEach(function(row){if(row.value&&row.value.error&&row.value.error==="builtin_reduce_error"){throw new Error(row.reason);}});return result;}).then(postprocessAttachments(opts));}
body=body||{};Object.keys(fun).forEach(function(key){if(Array.isArray(fun[key])){body[key]=fun[key];}else{body[key]=fun[key].toString();}});return db.fetch('_temp_view'+params,{headers:new h({'Content-Type':'application/json'}),method:'POST',body:JSON.stringify(body)}).then(function(response){ok=response.ok;status=response.status;return response.json();}).then(function(result){if(!ok){result.status=status;throw generateErrorFromResponse(result);}
return result;}).then(postprocessAttachments(opts));}
function customQuery(db,fun,opts){return new Promise(function(resolve,reject){db._query(fun,opts,function(err,res){if(err){return reject(err);}
resolve(res);});});}
function customViewCleanup(db){return new Promise(function(resolve,reject){db._viewCleanup(function(err,res){if(err){return reject(err);}
resolve(res);});});}
function defaultsTo(value){return function(reason){if(reason.status===404){return value;}else{throw reason;}};}
function getDocsToPersist(docId,view,docIdsToChangesAndEmits){var metaDocId='_local/doc_'+docId;var defaultMetaDoc={_id:metaDocId,keys:[]};var docData=docIdsToChangesAndEmits.get(docId);var indexableKeysToKeyValues=docData[0];var changes=docData[1];function getMetaDoc(){if(isGenOne(changes)){return Promise.resolve(defaultMetaDoc);}
return view.db.get(metaDocId).catch(defaultsTo(defaultMetaDoc));}
function getKeyValueDocs(metaDoc){if(!metaDoc.keys.length){return Promise.resolve({rows:[]});}
return view.db.allDocs({keys:metaDoc.keys,include_docs:true});}
function processKeyValueDocs(metaDoc,kvDocsRes){var kvDocs=[];var oldKeys=new ExportedSet();for(var i=0,len=kvDocsRes.rows.length;i<len;i++){var row=kvDocsRes.rows[i];var doc=row.doc;if(!doc){continue;}
kvDocs.push(doc);oldKeys.add(doc._id);doc._deleted=!indexableKeysToKeyValues.has(doc._id);if(!doc._deleted){var keyValue=indexableKeysToKeyValues.get(doc._id);if('value'in keyValue){doc.value=keyValue.value;}}}
var newKeys=mapToKeysArray(indexableKeysToKeyValues);newKeys.forEach(function(key){if(!oldKeys.has(key)){var kvDoc={_id:key};var keyValue=indexableKeysToKeyValues.get(key);if('value'in keyValue){kvDoc.value=keyValue.value;}
kvDocs.push(kvDoc);}});metaDoc.keys=uniq(newKeys.concat(metaDoc.keys));kvDocs.push(metaDoc);return kvDocs;}
return getMetaDoc().then(function(metaDoc){return getKeyValueDocs(metaDoc).then(function(kvDocsRes){return processKeyValueDocs(metaDoc,kvDocsRes);});});}
function saveKeyValues(view,docIdsToChangesAndEmits,seq){var seqDocId='_local/lastSeq';return view.db.get(seqDocId).catch(defaultsTo({_id:seqDocId,seq:0})).then(function(lastSeqDoc){var docIds=mapToKeysArray(docIdsToChangesAndEmits);return Promise.all(docIds.map(function(docId){return getDocsToPersist(docId,view,docIdsToChangesAndEmits);})).then(function(listOfDocsToPersist){var docsToPersist=flatten(listOfDocsToPersist);lastSeqDoc.seq=seq;docsToPersist.push(lastSeqDoc);return view.db.bulkDocs({docs:docsToPersist});});});}
function getQueue(view){var viewName=typeof view==='string'?view:view.name;var queue=persistentQueues[viewName];if(!queue){queue=persistentQueues[viewName]=new TaskQueue$1();}
return queue;}
function updateView(view){return sequentialize(getQueue(view),function(){return updateViewInQueue(view);})();}
function updateViewInQueue(view){var mapResults;var doc;function emit(key,value){var output={id:doc._id,key:normalizeKey(key)};if(typeof value!=='undefined'&&value!==null){output.value=normalizeKey(value);}
mapResults.push(output);}
var mapFun=mapper(view.mapFun,emit);var currentSeq=view.seq||0;function processChange(docIdsToChangesAndEmits,seq){return function(){return saveKeyValues(view,docIdsToChangesAndEmits,seq);};}
var queue=new TaskQueue$1();function processNextBatch(){return view.sourceDB.changes({return_docs:true,conflicts:true,include_docs:true,style:'all_docs',since:currentSeq,limit:CHANGES_BATCH_SIZE$1}).then(processBatch);}
function processBatch(response){var results=response.results;if(!results.length){return;}
var docIdsToChangesAndEmits=createDocIdsToChangesAndEmits(results);queue.add(processChange(docIdsToChangesAndEmits,currentSeq));if(results.length<CHANGES_BATCH_SIZE$1){return;}
return processNextBatch();}
function createDocIdsToChangesAndEmits(results){var docIdsToChangesAndEmits=new ExportedMap();for(var i=0,len=results.length;i<len;i++){var change=results[i];if(change.doc._id[0]!=='_'){mapResults=[];doc=change.doc;if(!doc._deleted){tryMap(view.sourceDB,mapFun,doc);}
mapResults.sort(sortByKeyThenValue);var indexableKeysToKeyValues=createIndexableKeysToKeyValues(mapResults);docIdsToChangesAndEmits.set(change.doc._id,[indexableKeysToKeyValues,change.changes]);}
currentSeq=change.seq;}
return docIdsToChangesAndEmits;}
function createIndexableKeysToKeyValues(mapResults){var indexableKeysToKeyValues=new ExportedMap();var lastKey;for(var i=0,len=mapResults.length;i<len;i++){var emittedKeyValue=mapResults[i];var complexKey=[emittedKeyValue.key,emittedKeyValue.id];if(i>0&&collate(emittedKeyValue.key,lastKey)===0){complexKey.push(i);}
indexableKeysToKeyValues.set(toIndexableString(complexKey),emittedKeyValue);lastKey=emittedKeyValue.key;}
return indexableKeysToKeyValues;}
return processNextBatch().then(function(){return queue.finish();}).then(function(){view.seq=currentSeq;});}
function reduceView(view,results,options){if(options.group_level===0){delete options.group_level;}
var shouldGroup=options.group||options.group_level;var reduceFun=reducer(view.reduceFun);var groups=[];var lvl=isNaN(options.group_level)?Number.POSITIVE_INFINITY:options.group_level;results.forEach(function(e){var last=groups[groups.length-1];var groupKey=shouldGroup?e.key:null;if(shouldGroup&&Array.isArray(groupKey)){groupKey=groupKey.slice(0,lvl);}
if(last&&collate(last.groupKey,groupKey)===0){last.keys.push([e.key,e.id]);last.values.push(e.value);return;}
groups.push({keys:[[e.key,e.id]],values:[e.value],groupKey:groupKey});});results=[];for(var i=0,len=groups.length;i<len;i++){var e=groups[i];var reduceTry=tryReduce(view.sourceDB,reduceFun,e.keys,e.values,false);if(reduceTry.error&&reduceTry.error instanceof BuiltInError){throw reduceTry.error;}
results.push({value:reduceTry.error?null:reduceTry.output,key:e.groupKey});}
return{rows:sliceResults(results,options.limit,options.skip)};}
function queryView(view,opts){return sequentialize(getQueue(view),function(){return queryViewInQueue(view,opts);})();}
function queryViewInQueue(view,opts){var totalRows;var shouldReduce=view.reduceFun&&opts.reduce!==false;var skip=opts.skip||0;if(typeof opts.keys!=='undefined'&&!opts.keys.length){opts.limit=0;delete opts.keys;}
function fetchFromView(viewOpts){viewOpts.include_docs=true;return view.db.allDocs(viewOpts).then(function(res){totalRows=res.total_rows;return res.rows.map(function(result){if('value'in result.doc&&typeof result.doc.value==='object'&&result.doc.value!==null){var keys=Object.keys(result.doc.value).sort();var expectedKeys=['id','key','value'];if(!(keys<expectedKeys||keys>expectedKeys)){return result.doc.value;}}
var parsedKeyAndDocId=parseIndexableString(result.doc._id);return{key:parsedKeyAndDocId[0],id:parsedKeyAndDocId[1],value:('value'in result.doc?result.doc.value:null)};});});}
function onMapResultsReady(rows){var finalResults;if(shouldReduce){finalResults=reduceView(view,rows,opts);}else{finalResults={total_rows:totalRows,offset:skip,rows:rows};}
if(opts.update_seq){finalResults.update_seq=view.seq;}
if(opts.include_docs){var docIds=uniq(rows.map(rowToDocId));return view.sourceDB.allDocs({keys:docIds,include_docs:true,conflicts:opts.conflicts,attachments:opts.attachments,binary:opts.binary}).then(function(allDocsRes){var docIdsToDocs=new ExportedMap();allDocsRes.rows.forEach(function(row){docIdsToDocs.set(row.id,row.doc);});rows.forEach(function(row){var docId=rowToDocId(row);var doc=docIdsToDocs.get(docId);if(doc){row.doc=doc;}});return finalResults;});}else{return finalResults;}}
if(typeof opts.keys!=='undefined'){var keys=opts.keys;var fetchPromises=keys.map(function(key){var viewOpts={startkey:toIndexableString([key]),endkey:toIndexableString([key,{}])};if(opts.update_seq){viewOpts.update_seq=true;}
return fetchFromView(viewOpts);});return Promise.all(fetchPromises).then(flatten).then(onMapResultsReady);}else{var viewOpts={descending:opts.descending};if(opts.update_seq){viewOpts.update_seq=true;}
var startkey;var endkey;if('start_key'in opts){startkey=opts.start_key;}
if('startkey'in opts){startkey=opts.startkey;}
if('end_key'in opts){endkey=opts.end_key;}
if('endkey'in opts){endkey=opts.endkey;}
if(typeof startkey!=='undefined'){viewOpts.startkey=opts.descending?toIndexableString([startkey,{}]):toIndexableString([startkey]);}
if(typeof endkey!=='undefined'){var inclusiveEnd=opts.inclusive_end!==false;if(opts.descending){inclusiveEnd=!inclusiveEnd;}
viewOpts.endkey=toIndexableString(inclusiveEnd?[endkey,{}]:[endkey]);}
if(typeof opts.key!=='undefined'){var keyStart=toIndexableString([opts.key]);var keyEnd=toIndexableString([opts.key,{}]);if(viewOpts.descending){viewOpts.endkey=keyStart;viewOpts.startkey=keyEnd;}else{viewOpts.startkey=keyStart;viewOpts.endkey=keyEnd;}}
if(!shouldReduce){if(typeof opts.limit==='number'){viewOpts.limit=opts.limit;}
viewOpts.skip=skip;}
return fetchFromView(viewOpts).then(onMapResultsReady);}}
function httpViewCleanup(db){return db.fetch('_view_cleanup',{headers:new h({'Content-Type':'application/json'}),method:'POST'}).then(function(response){return response.json();});}
function localViewCleanup(db){return db.get('_local/'+localDocName).then(function(metaDoc){var docsToViews=new ExportedMap();Object.keys(metaDoc.views).forEach(function(fullViewName){var parts=parseViewName(fullViewName);var designDocName='_design/'+parts[0];var viewName=parts[1];var views=docsToViews.get(designDocName);if(!views){views=new ExportedSet();docsToViews.set(designDocName,views);}
views.add(viewName);});var opts={keys:mapToKeysArray(docsToViews),include_docs:true};return db.allDocs(opts).then(function(res){var viewsToStatus={};res.rows.forEach(function(row){var ddocName=row.key.substring(8);docsToViews.get(row.key).forEach(function(viewName){var fullViewName=ddocName+'/'+viewName;if(!metaDoc.views[fullViewName]){fullViewName=viewName;}
var viewDBNames=Object.keys(metaDoc.views[fullViewName]);var statusIsGood=row.doc&&row.doc.views&&row.doc.views[viewName];viewDBNames.forEach(function(viewDBName){viewsToStatus[viewDBName]=viewsToStatus[viewDBName]||statusIsGood;});});});var dbsToDelete=Object.keys(viewsToStatus).filter(function(viewDBName){return!viewsToStatus[viewDBName];});var destroyPromises=dbsToDelete.map(function(viewDBName){return sequentialize(getQueue(viewDBName),function(){return new db.constructor(viewDBName,db.__opts).destroy();})();});return Promise.all(destroyPromises).then(function(){return{ok:true};});});},defaultsTo({ok:true}));}
function queryPromised(db,fun,opts){if(typeof db._query==='function'){return customQuery(db,fun,opts);}
if(isRemote(db)){return httpQuery(db,fun,opts);}
if(typeof fun!=='string'){checkQueryParseError(opts,fun);tempViewQueue.add(function(){var createViewPromise=createView(db,'temp_view/temp_view',fun.map,fun.reduce,true,localDocName);return createViewPromise.then(function(view){return fin(updateView(view).then(function(){return queryView(view,opts);}),function(){return view.db.destroy();});});});return tempViewQueue.finish();}else{var fullViewName=fun;var parts=parseViewName(fullViewName);var designDocName=parts[0];var viewName=parts[1];return db.get('_design/'+designDocName).then(function(doc){var fun=doc.views&&doc.views[viewName];if(!fun){throw new NotFoundError('ddoc '+doc._id+' has no view named '+
viewName);}
ddocValidator(doc,viewName);checkQueryParseError(opts,fun);var createViewPromise=createView(db,fullViewName,fun.map,fun.reduce,false,localDocName);return createViewPromise.then(function(view){if(opts.stale==='ok'||opts.stale==='update_after'){if(opts.stale==='update_after'){__WEBPACK_IMPORTED_MODULE_1_immediate___default()(function(){updateView(view);});}
return queryView(view,opts);}else{return updateView(view).then(function(){return queryView(view,opts);});}});});}}
function abstractQuery(fun,opts,callback){var db=this;if(typeof opts==='function'){callback=opts;opts={};}
opts=opts?coerceOptions(opts):{};if(typeof fun==='function'){fun={map:fun};}
var promise=Promise.resolve().then(function(){return queryPromised(db,fun,opts);});promisedCallback(promise,callback);return promise;}
var abstractViewCleanup=callbackify(function(){var db=this;if(typeof db._viewCleanup==='function'){return customViewCleanup(db);}
if(isRemote(db)){return httpViewCleanup(db);}
return localViewCleanup(db);});return{query:abstractQuery,viewCleanup:abstractViewCleanup};}
var builtInReduce={_sum:function(keys,values){return sum(values);},_count:function(keys,values){return values.length;},_stats:function(keys,values){function sumsqr(values){var _sumsqr=0;for(var i=0,len=values.length;i<len;i++){var num=values[i];_sumsqr+=(num*num);}
return _sumsqr;}
return{sum:sum(values),min:Math.min.apply(null,values),max:Math.max.apply(null,values),count:values.length,sumsqr:sumsqr(values)};}};function getBuiltIn(reduceFunString){if(/^_sum/.test(reduceFunString)){return builtInReduce._sum;}else if(/^_count/.test(reduceFunString)){return builtInReduce._count;}else if(/^_stats/.test(reduceFunString)){return builtInReduce._stats;}else if(/^_/.test(reduceFunString)){throw new Error(reduceFunString+' is not a supported reduce function.');}}
function mapper(mapFun,emit){if(typeof mapFun==="function"&&mapFun.length===2){var origMap=mapFun;return function(doc){return origMap(doc,emit);};}else{return evalFunctionWithEval(mapFun.toString(),emit);}}
function reducer(reduceFun){var reduceFunString=reduceFun.toString();var builtIn=getBuiltIn(reduceFunString);if(builtIn){return builtIn;}else{return evalFunctionWithEval(reduceFunString);}}
function ddocValidator(ddoc,viewName){var fun=ddoc.views&&ddoc.views[viewName];if(typeof fun.map!=='string'){throw new NotFoundError('ddoc '+ddoc._id+' has no string view named '+
viewName+', instead found object of type: '+typeof fun.map);}}
var localDocName='mrviews';var abstract=createAbstractMapReduce(localDocName,mapper,reducer,ddocValidator);function query(fun,opts,callback){return abstract.query.call(this,fun,opts,callback);}
function viewCleanup(callback){return abstract.viewCleanup.call(this,callback);}
var mapreduce={query:query,viewCleanup:viewCleanup};function isGenOne$1(rev){return /^1-/.test(rev);}
function fileHasChanged(localDoc,remoteDoc,filename){return!localDoc._attachments||!localDoc._attachments[filename]||localDoc._attachments[filename].digest!==remoteDoc._attachments[filename].digest;}
function getDocAttachments(db,doc){var filenames=Object.keys(doc._attachments);return Promise.all(filenames.map(function(filename){return db.getAttachment(doc._id,filename,{rev:doc._rev});}));}
function getDocAttachmentsFromTargetOrSource(target,src,doc){var doCheckForLocalAttachments=isRemote(src)&&!isRemote(target);var filenames=Object.keys(doc._attachments);if(!doCheckForLocalAttachments){return getDocAttachments(src,doc);}
return target.get(doc._id).then(function(localDoc){return Promise.all(filenames.map(function(filename){if(fileHasChanged(localDoc,doc,filename)){return src.getAttachment(doc._id,filename);}
return target.getAttachment(localDoc._id,filename);}));}).catch(function(error){if(error.status!==404){throw error;}
return getDocAttachments(src,doc);});}
function createBulkGetOpts(diffs){var requests=[];Object.keys(diffs).forEach(function(id){var missingRevs=diffs[id].missing;missingRevs.forEach(function(missingRev){requests.push({id:id,rev:missingRev});});});return{docs:requests,revs:true,latest:true};}
function getDocs(src,target,diffs,state){diffs=clone(diffs);var resultDocs=[],ok=true;function getAllDocs(){var bulkGetOpts=createBulkGetOpts(diffs);if(!bulkGetOpts.docs.length){return;}
return src.bulkGet(bulkGetOpts).then(function(bulkGetResponse){if(state.cancelled){throw new Error('cancelled');}
return Promise.all(bulkGetResponse.results.map(function(bulkGetInfo){return Promise.all(bulkGetInfo.docs.map(function(doc){var remoteDoc=doc.ok;if(doc.error){ok=false;}
if(!remoteDoc||!remoteDoc._attachments){return remoteDoc;}
return getDocAttachmentsFromTargetOrSource(target,src,remoteDoc).then(function(attachments){var filenames=Object.keys(remoteDoc._attachments);attachments.forEach(function(attachment,i){var att=remoteDoc._attachments[filenames[i]];delete att.stub;delete att.length;att.data=attachment;});return remoteDoc;});}));})).then(function(results){resultDocs=resultDocs.concat(flatten(results).filter(Boolean));});});}
function hasAttachments(doc){return doc._attachments&&Object.keys(doc._attachments).length>0;}
function hasConflicts(doc){return doc._conflicts&&doc._conflicts.length>0;}
function fetchRevisionOneDocs(ids){return src.allDocs({keys:ids,include_docs:true,conflicts:true}).then(function(res){if(state.cancelled){throw new Error('cancelled');}
res.rows.forEach(function(row){if(row.deleted||!row.doc||!isGenOne$1(row.value.rev)||hasAttachments(row.doc)||hasConflicts(row.doc)){return;}
if(row.doc._conflicts){delete row.doc._conflicts;}
resultDocs.push(row.doc);delete diffs[row.id];});});}
function getRevisionOneDocs(){var ids=Object.keys(diffs).filter(function(id){var missing=diffs[id].missing;return missing.length===1&&isGenOne$1(missing[0]);});if(ids.length>0){return fetchRevisionOneDocs(ids);}}
function returnResult(){return{ok:ok,docs:resultDocs};}
return Promise.resolve().then(getRevisionOneDocs).then(getAllDocs).then(returnResult);}
var CHECKPOINT_VERSION=1;var REPLICATOR="pouchdb";var CHECKPOINT_HISTORY_SIZE=5;var LOWEST_SEQ=0;function updateCheckpoint(db,id,checkpoint,session,returnValue){return db.get(id).catch(function(err){if(err.status===404){if(db.adapter==='http'||db.adapter==='https'){explainError(404,'PouchDB is just checking if a remote checkpoint exists.');}
return{session_id:session,_id:id,history:[],replicator:REPLICATOR,version:CHECKPOINT_VERSION};}
throw err;}).then(function(doc){if(returnValue.cancelled){return;}
if(doc.last_seq===checkpoint){return;}
doc.history=(doc.history||[]).filter(function(item){return item.session_id!==session;});doc.history.unshift({last_seq:checkpoint,session_id:session});doc.history=doc.history.slice(0,CHECKPOINT_HISTORY_SIZE);doc.version=CHECKPOINT_VERSION;doc.replicator=REPLICATOR;doc.session_id=session;doc.last_seq=checkpoint;return db.put(doc).catch(function(err){if(err.status===409){return updateCheckpoint(db,id,checkpoint,session,returnValue);}
throw err;});});}
function Checkpointer(src,target,id,returnValue,opts){this.src=src;this.target=target;this.id=id;this.returnValue=returnValue;this.opts=opts||{};}
Checkpointer.prototype.writeCheckpoint=function(checkpoint,session){var self=this;return this.updateTarget(checkpoint,session).then(function(){return self.updateSource(checkpoint,session);});};Checkpointer.prototype.updateTarget=function(checkpoint,session){if(this.opts.writeTargetCheckpoint){return updateCheckpoint(this.target,this.id,checkpoint,session,this.returnValue);}else{return Promise.resolve(true);}};Checkpointer.prototype.updateSource=function(checkpoint,session){if(this.opts.writeSourceCheckpoint){var self=this;return updateCheckpoint(this.src,this.id,checkpoint,session,this.returnValue).catch(function(err){if(isForbiddenError(err)){self.opts.writeSourceCheckpoint=false;return true;}
throw err;});}else{return Promise.resolve(true);}};var comparisons={"undefined":function(targetDoc,sourceDoc){if(collate(targetDoc.last_seq,sourceDoc.last_seq)===0){return sourceDoc.last_seq;}
return 0;},"1":function(targetDoc,sourceDoc){return compareReplicationLogs(sourceDoc,targetDoc).last_seq;}};Checkpointer.prototype.getCheckpoint=function(){var self=this;if(self.opts&&self.opts.writeSourceCheckpoint&&!self.opts.writeTargetCheckpoint){return self.src.get(self.id).then(function(sourceDoc){return sourceDoc.last_seq||LOWEST_SEQ;}).catch(function(err){if(err.status!==404){throw err;}
return LOWEST_SEQ;});}
return self.target.get(self.id).then(function(targetDoc){if(self.opts&&self.opts.writeTargetCheckpoint&&!self.opts.writeSourceCheckpoint){return targetDoc.last_seq||LOWEST_SEQ;}
return self.src.get(self.id).then(function(sourceDoc){if(targetDoc.version!==sourceDoc.version){return LOWEST_SEQ;}
var version;if(targetDoc.version){version=targetDoc.version.toString();}else{version="undefined";}
if(version in comparisons){return comparisons[version](targetDoc,sourceDoc);}
return LOWEST_SEQ;},function(err){if(err.status===404&&targetDoc.last_seq){return self.src.put({_id:self.id,last_seq:LOWEST_SEQ}).then(function(){return LOWEST_SEQ;},function(err){if(isForbiddenError(err)){self.opts.writeSourceCheckpoint=false;return targetDoc.last_seq;}
return LOWEST_SEQ;});}
throw err;});}).catch(function(err){if(err.status!==404){throw err;}
return LOWEST_SEQ;});};function compareReplicationLogs(srcDoc,tgtDoc){if(srcDoc.session_id===tgtDoc.session_id){return{last_seq:srcDoc.last_seq,history:srcDoc.history};}
return compareReplicationHistory(srcDoc.history,tgtDoc.history);}
function compareReplicationHistory(sourceHistory,targetHistory){var S=sourceHistory[0];var sourceRest=sourceHistory.slice(1);var T=targetHistory[0];var targetRest=targetHistory.slice(1);if(!S||targetHistory.length===0){return{last_seq:LOWEST_SEQ,history:[]};}
var sourceId=S.session_id;if(hasSessionId(sourceId,targetHistory)){return{last_seq:S.last_seq,history:sourceHistory};}
var targetId=T.session_id;if(hasSessionId(targetId,sourceRest)){return{last_seq:T.last_seq,history:targetRest};}
return compareReplicationHistory(sourceRest,targetRest);}
function hasSessionId(sessionId,history){var props=history[0];var rest=history.slice(1);if(!sessionId||history.length===0){return false;}
if(sessionId===props.session_id){return true;}
return hasSessionId(sessionId,rest);}
function isForbiddenError(err){return typeof err.status==='number'&&Math.floor(err.status/100)===4;}
var STARTING_BACK_OFF=0;function backOff(opts,returnValue,error,callback){if(opts.retry===false){returnValue.emit('error',error);returnValue.removeAllListeners();return;}
if(typeof opts.back_off_function!=='function'){opts.back_off_function=defaultBackOff;}
returnValue.emit('requestError',error);if(returnValue.state==='active'||returnValue.state==='pending'){returnValue.emit('paused',error);returnValue.state='stopped';var backOffSet=function backoffTimeSet(){opts.current_back_off=STARTING_BACK_OFF;};var removeBackOffSetter=function removeBackOffTimeSet(){returnValue.removeListener('active',backOffSet);};returnValue.once('paused',removeBackOffSetter);returnValue.once('active',backOffSet);}
opts.current_back_off=opts.current_back_off||STARTING_BACK_OFF;opts.current_back_off=opts.back_off_function(opts.current_back_off);setTimeout(callback,opts.current_back_off);}
function sortObjectPropertiesByKey(queryParams){return Object.keys(queryParams).sort(collate).reduce(function(result,key){result[key]=queryParams[key];return result;},{});}
function generateReplicationId(src,target,opts){var docIds=opts.doc_ids?opts.doc_ids.sort(collate):'';var filterFun=opts.filter?opts.filter.toString():'';var queryParams='';var filterViewName='';var selector='';if(opts.selector){selector=JSON.stringify(opts.selector);}
if(opts.filter&&opts.query_params){queryParams=JSON.stringify(sortObjectPropertiesByKey(opts.query_params));}
if(opts.filter&&opts.filter==='_view'){filterViewName=opts.view.toString();}
return Promise.all([src.id(),target.id()]).then(function(res){var queryData=res[0]+res[1]+filterFun+filterViewName+
queryParams+docIds+selector;return new Promise(function(resolve){binaryMd5(queryData,resolve);});}).then(function(md5sum){md5sum=md5sum.replace(/\//g,'.').replace(/\+/g,'_');return '_local/'+md5sum;});}
function replicate(src,target,opts,returnValue,result){var batches=[];var currentBatch;var pendingBatch={seq:0,changes:[],docs:[]};var writingCheckpoint=false;var changesCompleted=false;var replicationCompleted=false;var last_seq=0;var continuous=opts.continuous||opts.live||false;var batch_size=opts.batch_size||100;var batches_limit=opts.batches_limit||10;var changesPending=false;var doc_ids=opts.doc_ids;var selector=opts.selector;var repId;var checkpointer;var changedDocs=[];var session=uuid();result=result||{ok:true,start_time:new Date().toISOString(),docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var changesOpts={};returnValue.ready(src,target);function initCheckpointer(){if(checkpointer){return Promise.resolve();}
return generateReplicationId(src,target,opts).then(function(res){repId=res;var checkpointOpts={};if(opts.checkpoint===false){checkpointOpts={writeSourceCheckpoint:false,writeTargetCheckpoint:false};}else if(opts.checkpoint==='source'){checkpointOpts={writeSourceCheckpoint:true,writeTargetCheckpoint:false};}else if(opts.checkpoint==='target'){checkpointOpts={writeSourceCheckpoint:false,writeTargetCheckpoint:true};}else{checkpointOpts={writeSourceCheckpoint:true,writeTargetCheckpoint:true};}
checkpointer=new Checkpointer(src,target,repId,returnValue,checkpointOpts);});}
function writeDocs(){changedDocs=[];if(currentBatch.docs.length===0){return;}
var docs=currentBatch.docs;var bulkOpts={timeout:opts.timeout};return target.bulkDocs({docs:docs,new_edits:false},bulkOpts).then(function(res){if(returnValue.cancelled){completeReplication();throw new Error('cancelled');}
var errorsById=Object.create(null);res.forEach(function(res){if(res.error){errorsById[res.id]=res;}});var errorsNo=Object.keys(errorsById).length;result.doc_write_failures+=errorsNo;result.docs_written+=docs.length-errorsNo;docs.forEach(function(doc){var error=errorsById[doc._id];if(error){result.errors.push(error);var errorName=(error.name||'').toLowerCase();if(errorName==='unauthorized'||errorName==='forbidden'){returnValue.emit('denied',clone(error));}else{throw error;}}else{changedDocs.push(doc);}});},function(err){result.doc_write_failures+=docs.length;throw err;});}
function finishBatch(){if(currentBatch.error){throw new Error('There was a problem getting docs.');}
result.last_seq=last_seq=currentBatch.seq;var outResult=clone(result);if(changedDocs.length){outResult.docs=changedDocs;if(typeof currentBatch.pending==='number'){outResult.pending=currentBatch.pending;delete currentBatch.pending;}
returnValue.emit('change',outResult);}
writingCheckpoint=true;return checkpointer.writeCheckpoint(currentBatch.seq,session).then(function(){writingCheckpoint=false;if(returnValue.cancelled){completeReplication();throw new Error('cancelled');}
currentBatch=undefined;getChanges();}).catch(function(err){onCheckpointError(err);throw err;});}
function getDiffs(){var diff={};currentBatch.changes.forEach(function(change){if(change.id==="_user/"){return;}
diff[change.id]=change.changes.map(function(x){return x.rev;});});return target.revsDiff(diff).then(function(diffs){if(returnValue.cancelled){completeReplication();throw new Error('cancelled');}
currentBatch.diffs=diffs;});}
function getBatchDocs(){return getDocs(src,target,currentBatch.diffs,returnValue).then(function(got){currentBatch.error=!got.ok;got.docs.forEach(function(doc){delete currentBatch.diffs[doc._id];result.docs_read++;currentBatch.docs.push(doc);});});}
function startNextBatch(){if(returnValue.cancelled||currentBatch){return;}
if(batches.length===0){processPendingBatch(true);return;}
currentBatch=batches.shift();getDiffs().then(getBatchDocs).then(writeDocs).then(finishBatch).then(startNextBatch).catch(function(err){abortReplication('batch processing terminated with error',err);});}
function processPendingBatch(immediate){if(pendingBatch.changes.length===0){if(batches.length===0&&!currentBatch){if((continuous&&changesOpts.live)||changesCompleted){returnValue.state='pending';returnValue.emit('paused');}
if(changesCompleted){completeReplication();}}
return;}
if(immediate||changesCompleted||pendingBatch.changes.length>=batch_size){batches.push(pendingBatch);pendingBatch={seq:0,changes:[],docs:[]};if(returnValue.state==='pending'||returnValue.state==='stopped'){returnValue.state='active';returnValue.emit('active');}
startNextBatch();}}
function abortReplication(reason,err){if(replicationCompleted){return;}
if(!err.message){err.message=reason;}
result.ok=false;result.status='aborting';batches=[];pendingBatch={seq:0,changes:[],docs:[]};completeReplication(err);}
function completeReplication(fatalError){if(replicationCompleted){return;}
if(returnValue.cancelled){result.status='cancelled';if(writingCheckpoint){return;}}
result.status=result.status||'complete';result.end_time=new Date().toISOString();result.last_seq=last_seq;replicationCompleted=true;if(fatalError){fatalError=createError(fatalError);fatalError.result=result;var errorName=(fatalError.name||'').toLowerCase();if(errorName==='unauthorized'||errorName==='forbidden'){returnValue.emit('error',fatalError);returnValue.removeAllListeners();}else{backOff(opts,returnValue,fatalError,function(){replicate(src,target,opts,returnValue);});}}else{returnValue.emit('complete',result);returnValue.removeAllListeners();}}
function onChange(change,pending,lastSeq){if(returnValue.cancelled){return completeReplication();}
if(typeof pending==='number'){pendingBatch.pending=pending;}
var filter=filterChange(opts)(change);if(!filter){return;}
pendingBatch.seq=change.seq||lastSeq;pendingBatch.changes.push(change);__WEBPACK_IMPORTED_MODULE_1_immediate___default()(function(){processPendingBatch(batches.length===0&&changesOpts.live);});}
function onChangesComplete(changes){changesPending=false;if(returnValue.cancelled){return completeReplication();}
if(changes.results.length>0){changesOpts.since=changes.results[changes.results.length-1].seq;getChanges();processPendingBatch(true);}else{var complete=function(){if(continuous){changesOpts.live=true;getChanges();}else{changesCompleted=true;}
processPendingBatch(true);};if(!currentBatch&&changes.results.length===0){writingCheckpoint=true;checkpointer.writeCheckpoint(changes.last_seq,session).then(function(){writingCheckpoint=false;result.last_seq=last_seq=changes.last_seq;complete();}).catch(onCheckpointError);}else{complete();}}}
function onChangesError(err){changesPending=false;if(returnValue.cancelled){return completeReplication();}
abortReplication('changes rejected',err);}
function getChanges(){if(!(!changesPending&&!changesCompleted&&batches.length<batches_limit)){return;}
changesPending=true;function abortChanges(){changes.cancel();}
function removeListener(){returnValue.removeListener('cancel',abortChanges);}
if(returnValue._changes){returnValue.removeListener('cancel',returnValue._abortChanges);returnValue._changes.cancel();}
returnValue.once('cancel',abortChanges);var changes=src.changes(changesOpts).on('change',onChange);changes.then(removeListener,removeListener);changes.then(onChangesComplete).catch(onChangesError);if(opts.retry){returnValue._changes=changes;returnValue._abortChanges=abortChanges;}}
function startChanges(){initCheckpointer().then(function(){if(returnValue.cancelled){completeReplication();return;}
return checkpointer.getCheckpoint().then(function(checkpoint){last_seq=checkpoint;changesOpts={since:last_seq,limit:batch_size,batch_size:batch_size,style:'all_docs',doc_ids:doc_ids,selector:selector,return_docs:true};if(opts.filter){if(typeof opts.filter!=='string'){changesOpts.include_docs=true;}else{changesOpts.filter=opts.filter;}}
if('heartbeat'in opts){changesOpts.heartbeat=opts.heartbeat;}
if('timeout'in opts){changesOpts.timeout=opts.timeout;}
if(opts.query_params){changesOpts.query_params=opts.query_params;}
if(opts.view){changesOpts.view=opts.view;}
getChanges();});}).catch(function(err){abortReplication('getCheckpoint rejected with ',err);});}
function onCheckpointError(err){writingCheckpoint=false;abortReplication('writeCheckpoint completed with error',err);}
if(returnValue.cancelled){completeReplication();return;}
if(!returnValue._addedListeners){returnValue.once('cancel',completeReplication);if(typeof opts.complete==='function'){returnValue.once('error',opts.complete);returnValue.once('complete',function(result){opts.complete(null,result);});}
returnValue._addedListeners=true;}
if(typeof opts.since==='undefined'){startChanges();}else{initCheckpointer().then(function(){writingCheckpoint=true;return checkpointer.writeCheckpoint(opts.since,session);}).then(function(){writingCheckpoint=false;if(returnValue.cancelled){completeReplication();return;}
last_seq=opts.since;startChanges();}).catch(onCheckpointError);}}
__WEBPACK_IMPORTED_MODULE_3_inherits___default()(Replication,__WEBPACK_IMPORTED_MODULE_2_events__["EventEmitter"]);function Replication(){__WEBPACK_IMPORTED_MODULE_2_events__["EventEmitter"].call(this);this.cancelled=false;this.state='pending';var self=this;var promise=new Promise(function(fulfill,reject){self.once('complete',fulfill);self.once('error',reject);});self.then=function(resolve,reject){return promise.then(resolve,reject);};self.catch=function(reject){return promise.catch(reject);};self.catch(function(){});}
Replication.prototype.cancel=function(){this.cancelled=true;this.state='cancelled';this.emit('cancel');};Replication.prototype.ready=function(src,target){var self=this;if(self._readyCalled){return;}
self._readyCalled=true;function onDestroy(){self.cancel();}
src.once('destroyed',onDestroy);target.once('destroyed',onDestroy);function cleanup(){src.removeListener('destroyed',onDestroy);target.removeListener('destroyed',onDestroy);}
self.once('complete',cleanup);};function toPouch(db,opts){var PouchConstructor=opts.PouchConstructor;if(typeof db==='string'){return new PouchConstructor(db,opts);}else{return db;}}
function replicateWrapper(src,target,opts,callback){if(typeof opts==='function'){callback=opts;opts={};}
if(typeof opts==='undefined'){opts={};}
if(opts.doc_ids&&!Array.isArray(opts.doc_ids)){throw createError(BAD_REQUEST,"`doc_ids` filter parameter is not a list.");}
opts.complete=callback;opts=clone(opts);opts.continuous=opts.continuous||opts.live;opts.retry=('retry'in opts)?opts.retry:false;opts.PouchConstructor=opts.PouchConstructor||this;var replicateRet=new Replication(opts);var srcPouch=toPouch(src,opts);var targetPouch=toPouch(target,opts);replicate(srcPouch,targetPouch,opts,replicateRet);return replicateRet;}
__WEBPACK_IMPORTED_MODULE_3_inherits___default()(Sync,__WEBPACK_IMPORTED_MODULE_2_events__["EventEmitter"]);function sync(src,target,opts,callback){if(typeof opts==='function'){callback=opts;opts={};}
if(typeof opts==='undefined'){opts={};}
opts=clone(opts);opts.PouchConstructor=opts.PouchConstructor||this;src=toPouch(src,opts);target=toPouch(target,opts);return new Sync(src,target,opts,callback);}
function Sync(src,target,opts,callback){var self=this;this.canceled=false;var optsPush=opts.push?$inject_Object_assign({},opts,opts.push):opts;var optsPull=opts.pull?$inject_Object_assign({},opts,opts.pull):opts;this.push=replicateWrapper(src,target,optsPush);this.pull=replicateWrapper(target,src,optsPull);this.pushPaused=true;this.pullPaused=true;function pullChange(change){self.emit('change',{direction:'pull',change:change});}
function pushChange(change){self.emit('change',{direction:'push',change:change});}
function pushDenied(doc){self.emit('denied',{direction:'push',doc:doc});}
function pullDenied(doc){self.emit('denied',{direction:'pull',doc:doc});}
function pushPaused(){self.pushPaused=true;if(self.pullPaused){self.emit('paused');}}
function pullPaused(){self.pullPaused=true;if(self.pushPaused){self.emit('paused');}}
function pushActive(){self.pushPaused=false;if(self.pullPaused){self.emit('active',{direction:'push'});}}
function pullActive(){self.pullPaused=false;if(self.pushPaused){self.emit('active',{direction:'pull'});}}
var removed={};function removeAll(type){return function(event,func){var isChange=event==='change'&&(func===pullChange||func===pushChange);var isDenied=event==='denied'&&(func===pullDenied||func===pushDenied);var isPaused=event==='paused'&&(func===pullPaused||func===pushPaused);var isActive=event==='active'&&(func===pullActive||func===pushActive);if(isChange||isDenied||isPaused||isActive){if(!(event in removed)){removed[event]={};}
removed[event][type]=true;if(Object.keys(removed[event]).length===2){self.removeAllListeners(event);}}};}
if(opts.live){this.push.on('complete',self.pull.cancel.bind(self.pull));this.pull.on('complete',self.push.cancel.bind(self.push));}
function addOneListener(ee,event,listener){if(ee.listeners(event).indexOf(listener)==-1){ee.on(event,listener);}}
this.on('newListener',function(event){if(event==='change'){addOneListener(self.pull,'change',pullChange);addOneListener(self.push,'change',pushChange);}else if(event==='denied'){addOneListener(self.pull,'denied',pullDenied);addOneListener(self.push,'denied',pushDenied);}else if(event==='active'){addOneListener(self.pull,'active',pullActive);addOneListener(self.push,'active',pushActive);}else if(event==='paused'){addOneListener(self.pull,'paused',pullPaused);addOneListener(self.push,'paused',pushPaused);}});this.on('removeListener',function(event){if(event==='change'){self.pull.removeListener('change',pullChange);self.push.removeListener('change',pushChange);}else if(event==='denied'){self.pull.removeListener('denied',pullDenied);self.push.removeListener('denied',pushDenied);}else if(event==='active'){self.pull.removeListener('active',pullActive);self.push.removeListener('active',pushActive);}else if(event==='paused'){self.pull.removeListener('paused',pullPaused);self.push.removeListener('paused',pushPaused);}});this.pull.on('removeListener',removeAll('pull'));this.push.on('removeListener',removeAll('push'));var promise=Promise.all([this.push,this.pull]).then(function(resp){var out={push:resp[0],pull:resp[1]};self.emit('complete',out);if(callback){callback(null,out);}
self.removeAllListeners();return out;},function(err){self.cancel();if(callback){callback(err);}else{self.emit('error',err);}
self.removeAllListeners();if(callback){throw err;}});this.then=function(success,err){return promise.then(success,err);};this.catch=function(err){return promise.catch(err);};}
Sync.prototype.cancel=function(){if(!this.canceled){this.canceled=true;this.push.cancel();this.pull.cancel();}};function replication(PouchDB){PouchDB.replicate=replicateWrapper;PouchDB.sync=sync;Object.defineProperty(PouchDB.prototype,'replicate',{get:function(){var self=this;if(typeof this.replicateMethods==='undefined'){this.replicateMethods={from:function(other,opts,callback){return self.constructor.replicate(other,self,opts,callback);},to:function(other,opts,callback){return self.constructor.replicate(self,other,opts,callback);}};}
return this.replicateMethods;}});PouchDB.prototype.sync=function(dbName,opts,callback){return this.constructor.sync(this,dbName,opts,callback);};}
PouchDB.plugin(IDBPouch).plugin(HttpPouch$1).plugin(mapreduce).plugin(replication);__webpack_exports__["default"]=(PouchDB);}.call(__webpack_exports__,__webpack_require__(10),__webpack_require__(20)))}),(function(module,exports){var getRandomValues=(typeof(crypto)!='undefined'&&crypto.getRandomValues.bind(crypto))||(typeof(msCrypto)!='undefined'&&msCrypto.getRandomValues.bind(msCrypto));if(getRandomValues){var rnds8=new Uint8Array(16);module.exports=function whatwgRNG(){getRandomValues(rnds8);return rnds8;};}else{var rnds=new Array(16);module.exports=function mathRNG(){for(var i=0,r;i<16;i++){if((i&0x03)===0)r=Math.random()*0x100000000;rnds[i]=r>>>((i&0x03)<<3)&0xff;}
return rnds;};}}),(function(module,exports){var byteToHex=[];for(var i=0;i<256;++i){byteToHex[i]=(i+0x100).toString(16).substr(1);}
function bytesToUuid(buf,offset){var i=offset||0;var bth=byteToHex;return bth[buf[i++]]+bth[buf[i++]]+
bth[buf[i++]]+bth[buf[i++]]+'-'+
bth[buf[i++]]+bth[buf[i++]]+'-'+
bth[buf[i++]]+bth[buf[i++]]+'-'+
bth[buf[i++]]+bth[buf[i++]]+'-'+
bth[buf[i++]]+bth[buf[i++]]+
bth[buf[i++]]+bth[buf[i++]]+
bth[buf[i++]]+bth[buf[i++]];}
module.exports=bytesToUuid;}),(function(module,exports,__webpack_require__){var Buffer=__webpack_require__(4).Buffer
function check(buffer){if(buffer.length<8)return false
if(buffer.length>72)return false
if(buffer[0]!==0x30)return false
if(buffer[1]!==buffer.length-2)return false
if(buffer[2]!==0x02)return false
var lenR=buffer[3]
if(lenR===0)return false
if(5+lenR>=buffer.length)return false
if(buffer[4+lenR]!==0x02)return false
var lenS=buffer[5+lenR]
if(lenS===0)return false
if((6+lenR+lenS)!==buffer.length)return false
if(buffer[4]&0x80)return false
if(lenR>1&&(buffer[4]===0x00)&&!(buffer[5]&0x80))return false
if(buffer[lenR+6]&0x80)return false
if(lenS>1&&(buffer[lenR+6]===0x00)&&!(buffer[lenR+7]&0x80))return false
return true}
function decode(buffer){if(buffer.length<8)throw new Error('DER sequence length is too short')
if(buffer.length>72)throw new Error('DER sequence length is too long')
if(buffer[0]!==0x30)throw new Error('Expected DER sequence')
if(buffer[1]!==buffer.length-2)throw new Error('DER sequence length is invalid')
if(buffer[2]!==0x02)throw new Error('Expected DER integer')
var lenR=buffer[3]
if(lenR===0)throw new Error('R length is zero')
if(5+lenR>=buffer.length)throw new Error('R length is too long')
if(buffer[4+lenR]!==0x02)throw new Error('Expected DER integer (2)')
var lenS=buffer[5+lenR]
if(lenS===0)throw new Error('S length is zero')
if((6+lenR+lenS)!==buffer.length)throw new Error('S length is invalid')
if(buffer[4]&0x80)throw new Error('R value is negative')
if(lenR>1&&(buffer[4]===0x00)&&!(buffer[5]&0x80))throw new Error('R value excessively padded')
if(buffer[lenR+6]&0x80)throw new Error('S value is negative')
if(lenS>1&&(buffer[lenR+6]===0x00)&&!(buffer[lenR+7]&0x80))throw new Error('S value excessively padded')
return{r:buffer.slice(4,4+lenR),s:buffer.slice(6+lenR)}}
function encode(r,s){var lenR=r.length
var lenS=s.length
if(lenR===0)throw new Error('R length is zero')
if(lenS===0)throw new Error('S length is zero')
if(lenR>33)throw new Error('R length is too long')
if(lenS>33)throw new Error('S length is too long')
if(r[0]&0x80)throw new Error('R value is negative')
if(s[0]&0x80)throw new Error('S value is negative')
if(lenR>1&&(r[0]===0x00)&&!(r[1]&0x80))throw new Error('R value excessively padded')
if(lenS>1&&(s[0]===0x00)&&!(s[1]&0x80))throw new Error('S value excessively padded')
var signature=Buffer.allocUnsafe(6+lenR+lenS)
signature[0]=0x30
signature[1]=signature.length-2
signature[2]=0x02
signature[3]=r.length
r.copy(signature,4)
signature[4+lenR]=0x02
signature[5+lenR]=s.length
s.copy(signature,6+lenR)
return signature}
module.exports={check:check,decode:decode,encode:encode}}),(function(module,exports,__webpack_require__){var OPS=__webpack_require__(43)
function encodingLength(i){return i<OPS.OP_PUSHDATA1?1:i<=0xff?2:i<=0xffff?3:5}
function encode(buffer,number,offset){var size=encodingLength(number)
if(size===1){buffer.writeUInt8(number,offset)}else if(size===2){buffer.writeUInt8(OPS.OP_PUSHDATA1,offset)
buffer.writeUInt8(number,offset+1)}else if(size===3){buffer.writeUInt8(OPS.OP_PUSHDATA2,offset)
buffer.writeUInt16LE(number,offset+1)}else{buffer.writeUInt8(OPS.OP_PUSHDATA4,offset)
buffer.writeUInt32LE(number,offset+1)}
return size}
function decode(buffer,offset){var opcode=buffer.readUInt8(offset)
var number,size
if(opcode<OPS.OP_PUSHDATA1){number=opcode
size=1}else if(opcode===OPS.OP_PUSHDATA1){if(offset+2>buffer.length)return null
number=buffer.readUInt8(offset+1)
size=2}else if(opcode===OPS.OP_PUSHDATA2){if(offset+3>buffer.length)return null
number=buffer.readUInt16LE(offset+1)
size=3}else{if(offset+5>buffer.length)return null
if(opcode!==OPS.OP_PUSHDATA4)throw new Error('Unexpected opcode')
number=buffer.readUInt32LE(offset+1)
size=5}
return{opcode:opcode,number:number,size:size}}
module.exports={encodingLength:encodingLength,encode:encode,decode:decode}}),(function(module,exports,__webpack_require__){var native=__webpack_require__(219)
function getTypeName(fn){return fn.name||fn.toString().match(/function (.*?)\s*\(/)[1]}
function getValueTypeName(value){return native.Nil(value)?'':getTypeName(value.constructor)}
function getValue(value){if(native.Function(value))return ''
if(native.String(value))return JSON.stringify(value)
if(value&&native.Object(value))return ''
return value}
function captureStackTrace(e,t){if(Error.captureStackTrace){Error.captureStackTrace(e,t)}}
function tfJSON(type){if(native.Function(type))return type.toJSON?type.toJSON():getTypeName(type)
if(native.Array(type))return 'Array'
if(type&&native.Object(type))return 'Object'
return type!==undefined?type:''}
function tfErrorString(type,value,valueTypeName){var valueJson=getValue(value)
return 'Expected '+tfJSON(type)+', got'+
(valueTypeName!==''?' '+valueTypeName:'')+
(valueJson!==''?' '+valueJson:'')}
function TfTypeError(type,value,valueTypeName){valueTypeName=valueTypeName||getValueTypeName(value)
this.message=tfErrorString(type,value,valueTypeName)
captureStackTrace(this,TfTypeError)
this.__type=type
this.__value=value
this.__valueTypeName=valueTypeName}
TfTypeError.prototype=Object.create(Error.prototype)
TfTypeError.prototype.constructor=TfTypeError
function tfPropertyErrorString(type,label,name,value,valueTypeName){var description='" of type '
if(label==='key')description='" with key type '
return tfErrorString('property "'+tfJSON(name)+description+tfJSON(type),value,valueTypeName)}
function TfPropertyTypeError(type,property,label,value,valueTypeName){if(type){valueTypeName=valueTypeName||getValueTypeName(value)
this.message=tfPropertyErrorString(type,label,property,value,valueTypeName)}else{this.message='Unexpected property "'+property+'"'}
captureStackTrace(this,TfTypeError)
this.__label=label
this.__property=property
this.__type=type
this.__value=value
this.__valueTypeName=valueTypeName}
TfPropertyTypeError.prototype=Object.create(Error.prototype)
TfPropertyTypeError.prototype.constructor=TfTypeError
function tfCustomError(expected,actual){return new TfTypeError(expected,{},actual)}
function tfSubError(e,property,label){if(e instanceof TfPropertyTypeError){property=property+'.'+e.__property
e=new TfPropertyTypeError(e.__type,property,e.__label,e.__value,e.__valueTypeName)}else if(e instanceof TfTypeError){e=new TfPropertyTypeError(e.__type,property,label,e.__value,e.__valueTypeName)}
captureStackTrace(e)
return e}
module.exports={TfTypeError:TfTypeError,TfPropertyTypeError:TfPropertyTypeError,tfCustomError:tfCustomError,tfSubError:tfSubError,tfJSON:tfJSON,getValueTypeName:getValueTypeName}}),(function(module,exports,__webpack_require__){var Buffer=__webpack_require__(4).Buffer
function decode(buffer,maxLength,minimal){maxLength=maxLength||4
minimal=minimal===undefined?true:minimal
var length=buffer.length
if(length===0)return 0
if(length>maxLength)throw new TypeError('Script number overflow')
if(minimal){if((buffer[length-1]&0x7f)===0){if(length<=1||(buffer[length-2]&0x80)===0)throw new Error('Non-minimally encoded script number')}}
if(length===5){var a=buffer.readUInt32LE(0)
var b=buffer.readUInt8(4)
if(b&0x80)return-(((b&~0x80)*0x100000000)+a)
return(b*0x100000000)+a}
var result=0
for(var i=0;i<length;++i){result|=buffer[i]<<(8*i)}
if(buffer[length-1]&0x80)return-(result&~(0x80<<(8*(length-1))))
return result}
function scriptNumSize(i){return i>0x7fffffff?5:i>0x7fffff?4:i>0x7fff?3:i>0x7f?2:i>0x00?1:0}
function encode(number){var value=Math.abs(number)
var size=scriptNumSize(value)
var buffer=Buffer.allocUnsafe(size)
var negative=number<0
for(var i=0;i<size;++i){buffer.writeUInt8(value&0xff,i)
value>>=8}
if(buffer[size-1]&0x80){buffer.writeUInt8(negative?0x80:0x00,size-1)}else if(negative){buffer[size-1]|=0x80}
return buffer}
module.exports={decode:decode,encode:encode}}),(function(module,exports,__webpack_require__){var bscript=__webpack_require__(31)
var types=__webpack_require__(37)
var typeforce=__webpack_require__(23)
var OPS=__webpack_require__(43)
var OP_INT_BASE=OPS.OP_RESERVED
function check(script,allowIncomplete){var chunks=bscript.decompile(script)
if(chunks.length<4)return false
if(chunks[chunks.length-1]!==OPS.OP_CHECKMULTISIG)return false
if(!types.Number(chunks[0]))return false
if(!types.Number(chunks[chunks.length-2]))return false
var m=chunks[0]-OP_INT_BASE
var n=chunks[chunks.length-2]-OP_INT_BASE
if(m<=0)return false
if(n>16)return false
if(m>n)return false
if(n!==chunks.length-3)return false
if(allowIncomplete)return true
var keys=chunks.slice(1,-2)
return keys.every(bscript.isCanonicalPubKey)}
check.toJSON=function(){return 'multi-sig output'}
function encode(m,pubKeys){typeforce({m:types.Number,pubKeys:[bscript.isCanonicalPubKey]},{m:m,pubKeys:pubKeys})
var n=pubKeys.length
if(n<m)throw new TypeError('Not enough pubKeys provided')
return bscript.compile([].concat(OP_INT_BASE+m,pubKeys,OP_INT_BASE+n,OPS.OP_CHECKMULTISIG))}
function decode(buffer,allowIncomplete){var chunks=bscript.decompile(buffer)
typeforce(check,chunks,allowIncomplete)
return{m:chunks[0]-OP_INT_BASE,pubKeys:chunks.slice(1,-2)}}
module.exports={check:check,decode:decode,encode:encode}}),(function(module,exports,__webpack_require__){var bscript=__webpack_require__(31)
var types=__webpack_require__(37)
var typeforce=__webpack_require__(23)
var OPS=__webpack_require__(43)
function check(script){var buffer=bscript.compile(script)
return buffer.length===22&&buffer[0]===OPS.OP_0&&buffer[1]===0x14}
check.toJSON=function(){return 'Witness pubKeyHash output'}
function encode(pubKeyHash){typeforce(types.Hash160bit,pubKeyHash)
return bscript.compile([OPS.OP_0,pubKeyHash])}
function decode(buffer){typeforce(check,buffer)
return buffer.slice(2)}
module.exports={check:check,decode:decode,encode:encode}}),(function(module,exports,__webpack_require__){var bscript=__webpack_require__(31)
var types=__webpack_require__(37)
var typeforce=__webpack_require__(23)
var OPS=__webpack_require__(43)
function check(script){var buffer=bscript.compile(script)
return buffer.length===34&&buffer[0]===OPS.OP_0&&buffer[1]===0x20}
check.toJSON=function(){return 'Witness scriptHash output'}
function encode(scriptHash){typeforce(types.Hash256bit,scriptHash)
return bscript.compile([OPS.OP_0,scriptHash])}
function decode(buffer){typeforce(check,buffer)
return buffer.slice(2)}
module.exports={check:check,decode:decode,encode:encode}}),(function(module,exports,__webpack_require__){var pushdata=__webpack_require__(348)
var varuint=__webpack_require__(224)
function verifuint(value,max){if(typeof value!=='number')throw new Error('cannot write a non-number as a number')
if(value<0)throw new Error('specified a negative value for writing an unsigned value')
if(value>max)throw new Error('RangeError: value out of range')
if(Math.floor(value)!==value)throw new Error('value has a fractional component')}
function readUInt64LE(buffer,offset){var a=buffer.readUInt32LE(offset)
var b=buffer.readUInt32LE(offset+4)
b*=0x100000000
verifuint(b+a,0x001fffffffffffff)
return b+a}
function writeUInt64LE(buffer,value,offset){verifuint(value,0x001fffffffffffff)
buffer.writeInt32LE(value&-1,offset)
buffer.writeUInt32LE(Math.floor(value/0x100000000),offset+4)
return offset+8}
function readVarInt(buffer,offset){var result=varuint.decode(buffer,offset)
return{number:result,size:varuint.decode.bytes}}
function writeVarInt(buffer,number,offset){varuint.encode(number,buffer,offset)
return varuint.encode.bytes}
module.exports={pushDataSize:pushdata.encodingLength,readPushDataInt:pushdata.decode,readUInt64LE:readUInt64LE,readVarInt:readVarInt,varIntBuffer:varuint.encode,varIntSize:varuint.encodingLength,writePushDataInt:pushdata.encode,writeUInt64LE:writeUInt64LE,writeVarInt:writeVarInt}}),(function(module,exports,__webpack_require__){function BigInteger(a,b,c){if(!(this instanceof BigInteger))
return new BigInteger(a,b,c)
if(a!=null){if("number"==typeof a)this.fromNumber(a,b,c)
else if(b==null&&"string"!=typeof a)this.fromString(a,256)
else this.fromString(a,b)}}
var proto=BigInteger.prototype
proto.__bigi=__webpack_require__(775).version
BigInteger.isBigInteger=function(obj,check_ver){return obj&&obj.__bigi&&(!check_ver||obj.__bigi===proto.__bigi)}
var dbits
function am1(i,x,w,j,c,n){while(--n>=0){var v=x*this[i++]+w[j]+c
c=Math.floor(v/0x4000000)
w[j++]=v&0x3ffffff}
return c}
function am2(i,x,w,j,c,n){var xl=x&0x7fff,xh=x>>15
while(--n>=0){var l=this[i]&0x7fff
var h=this[i++]>>15
var m=xh*l+h*xl
l=xl*l+((m&0x7fff)<<15)+w[j]+(c&0x3fffffff)
c=(l>>>30)+(m>>>15)+xh*h+(c>>>30)
w[j++]=l&0x3fffffff}
return c}
function am3(i,x,w,j,c,n){var xl=x&0x3fff,xh=x>>14
while(--n>=0){var l=this[i]&0x3fff
var h=this[i++]>>14
var m=xh*l+h*xl
l=xl*l+((m&0x3fff)<<14)+w[j]+c
c=(l>>28)+(m>>14)+xh*h
w[j++]=l&0xfffffff}
return c}
BigInteger.prototype.am=am1
dbits=26
BigInteger.prototype.DB=dbits
BigInteger.prototype.DM=((1<<dbits)-1)
var DV=BigInteger.prototype.DV=(1<<dbits)
var BI_FP=52
BigInteger.prototype.FV=Math.pow(2,BI_FP)
BigInteger.prototype.F1=BI_FP-dbits
BigInteger.prototype.F2=2*dbits-BI_FP
var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz"
var BI_RC=new Array()
var rr,vv
rr="0".charCodeAt(0)
for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv
rr="a".charCodeAt(0)
for(vv=10;vv<36;++vv)BI_RC[rr++]=vv
rr="A".charCodeAt(0)
for(vv=10;vv<36;++vv)BI_RC[rr++]=vv
function int2char(n){return BI_RM.charAt(n)}
function intAt(s,i){var c=BI_RC[s.charCodeAt(i)]
return(c==null)?-1:c}
function bnpCopyTo(r){for(var i=this.t-1;i>=0;--i)r[i]=this[i]
r.t=this.t
r.s=this.s}
function bnpFromInt(x){this.t=1
this.s=(x<0)?-1:0
if(x>0)this[0]=x
else if(x<-1)this[0]=x+DV
else this.t=0}
function nbv(i){var r=new BigInteger()
r.fromInt(i)
return r}
function bnpFromString(s,b){var self=this
var k
if(b==16)k=4
else if(b==8)k=3
else if(b==256)k=8;else if(b==2)k=1
else if(b==32)k=5
else if(b==4)k=2
else{self.fromRadix(s,b)
return}
self.t=0
self.s=0
var i=s.length,mi=false,sh=0
while(--i>=0){var x=(k==8)?s[i]&0xff:intAt(s,i)
if(x<0){if(s.charAt(i)=="-")mi=true
continue}
mi=false
if(sh==0)
self[self.t++]=x
else if(sh+k>self.DB){self[self.t-1]|=(x&((1<<(self.DB-sh))-1))<<sh
self[self.t++]=(x>>(self.DB-sh))}else
self[self.t-1]|=x<<sh
sh+=k
if(sh>=self.DB)sh-=self.DB}
if(k==8&&(s[0]&0x80)!=0){self.s=-1
if(sh>0)self[self.t-1]|=((1<<(self.DB-sh))-1)<<sh}
self.clamp()
if(mi)BigInteger.ZERO.subTo(self,self)}
function bnpClamp(){var c=this.s&this.DM
while(this.t>0&&this[this.t-1]==c)--this.t}
function bnToString(b){var self=this
if(self.s<0)return "-"+self.negate().toString(b)
var k
if(b==16)k=4
else if(b==8)k=3
else if(b==2)k=1
else if(b==32)k=5
else if(b==4)k=2
else return self.toRadix(b)
var km=(1<<k)-1,d,m=false,r="",i=self.t
var p=self.DB-(i*self.DB)%k
if(i-->0){if(p<self.DB&&(d=self[i]>>p)>0){m=true
r=int2char(d)}
while(i>=0){if(p<k){d=(self[i]&((1<<p)-1))<<(k-p)
d|=self[--i]>>(p+=self.DB-k)}else{d=(self[i]>>(p-=k))&km
if(p<=0){p+=self.DB
--i}}
if(d>0)m=true
if(m)r+=int2char(d)}}
return m?r:"0"}
function bnNegate(){var r=new BigInteger()
BigInteger.ZERO.subTo(this,r)
return r}
function bnAbs(){return(this.s<0)?this.negate():this}
function bnCompareTo(a){var r=this.s-a.s
if(r!=0)return r
var i=this.t
r=i-a.t
if(r!=0)return(this.s<0)?-r:r
while(--i>=0)
if((r=this[i]-a[i])!=0)return r
return 0}
function nbits(x){var r=1,t
if((t=x>>>16)!=0){x=t
r+=16}
if((t=x>>8)!=0){x=t
r+=8}
if((t=x>>4)!=0){x=t
r+=4}
if((t=x>>2)!=0){x=t
r+=2}
if((t=x>>1)!=0){x=t
r+=1}
return r}
function bnBitLength(){if(this.t<=0)return 0
return this.DB*(this.t-1)+nbits(this[this.t-1]^(this.s&this.DM))}
function bnByteLength(){return this.bitLength()>>3}
function bnpDLShiftTo(n,r){var i
for(i=this.t-1;i>=0;--i)r[i+n]=this[i]
for(i=n-1;i>=0;--i)r[i]=0
r.t=this.t+n
r.s=this.s}
function bnpDRShiftTo(n,r){for(var i=n;i<this.t;++i)r[i-n]=this[i]
r.t=Math.max(this.t-n,0)
r.s=this.s}
function bnpLShiftTo(n,r){var self=this
var bs=n%self.DB
var cbs=self.DB-bs
var bm=(1<<cbs)-1
var ds=Math.floor(n/self.DB),c=(self.s<<bs)&self.DM,i
for(i=self.t-1;i>=0;--i){r[i+ds+1]=(self[i]>>cbs)|c
c=(self[i]&bm)<<bs}
for(i=ds-1;i>=0;--i)r[i]=0
r[ds]=c
r.t=self.t+ds+1
r.s=self.s
r.clamp()}
function bnpRShiftTo(n,r){var self=this
r.s=self.s
var ds=Math.floor(n/self.DB)
if(ds>=self.t){r.t=0
return}
var bs=n%self.DB
var cbs=self.DB-bs
var bm=(1<<bs)-1
r[0]=self[ds]>>bs
for(var i=ds+1;i<self.t;++i){r[i-ds-1]|=(self[i]&bm)<<cbs
r[i-ds]=self[i]>>bs}
if(bs>0)r[self.t-ds-1]|=(self.s&bm)<<cbs
r.t=self.t-ds
r.clamp()}
function bnpSubTo(a,r){var self=this
var i=0,c=0,m=Math.min(a.t,self.t)
while(i<m){c+=self[i]-a[i]
r[i++]=c&self.DM
c>>=self.DB}
if(a.t<self.t){c-=a.s
while(i<self.t){c+=self[i]
r[i++]=c&self.DM
c>>=self.DB}
c+=self.s}else{c+=self.s
while(i<a.t){c-=a[i]
r[i++]=c&self.DM
c>>=self.DB}
c-=a.s}
r.s=(c<0)?-1:0
if(c<-1)r[i++]=self.DV+c
else if(c>0)r[i++]=c
r.t=i
r.clamp()}
function bnpMultiplyTo(a,r){var x=this.abs(),y=a.abs()
var i=x.t
r.t=i+y.t
while(--i>=0)r[i]=0
for(i=0;i<y.t;++i)r[i+x.t]=x.am(0,y[i],r,i,0,x.t)
r.s=0
r.clamp()
if(this.s!=a.s)BigInteger.ZERO.subTo(r,r)}
function bnpSquareTo(r){var x=this.abs()
var i=r.t=2*x.t
while(--i>=0)r[i]=0
for(i=0;i<x.t-1;++i){var c=x.am(i,x[i],r,2*i,0,1)
if((r[i+x.t]+=x.am(i+1,2*x[i],r,2*i+1,c,x.t-i-1))>=x.DV){r[i+x.t]-=x.DV
r[i+x.t+1]=1}}
if(r.t>0)r[r.t-1]+=x.am(i,x[i],r,2*i,0,1)
r.s=0
r.clamp()}
function bnpDivRemTo(m,q,r){var self=this
var pm=m.abs()
if(pm.t<=0)return
var pt=self.abs()
if(pt.t<pm.t){if(q!=null)q.fromInt(0)
if(r!=null)self.copyTo(r)
return}
if(r==null)r=new BigInteger()
var y=new BigInteger(),ts=self.s,ms=m.s
var nsh=self.DB-nbits(pm[pm.t-1]);if(nsh>0){pm.lShiftTo(nsh,y)
pt.lShiftTo(nsh,r)}else{pm.copyTo(y)
pt.copyTo(r)}
var ys=y.t
var y0=y[ys-1]
if(y0==0)return
var yt=y0*(1<<self.F1)+((ys>1)?y[ys-2]>>self.F2:0)
var d1=self.FV/yt,d2=(1<<self.F1)/yt,e=1<<self.F2
var i=r.t,j=i-ys,t=(q==null)?new BigInteger():q
y.dlShiftTo(j,t)
if(r.compareTo(t)>=0){r[r.t++]=1
r.subTo(t,r)}
BigInteger.ONE.dlShiftTo(ys,t)
t.subTo(y,y);while(y.t<ys)y[y.t++]=0
while(--j>=0){var qd=(r[--i]==y0)?self.DM:Math.floor(r[i]*d1+(r[i-1]+e)*d2)
if((r[i]+=y.am(0,qd,r,j,0,ys))<qd){y.dlShiftTo(j,t)
r.subTo(t,r)
while(r[i]<--qd)r.subTo(t,r)}}
if(q!=null){r.drShiftTo(ys,q)
if(ts!=ms)BigInteger.ZERO.subTo(q,q)}
r.t=ys
r.clamp()
if(nsh>0)r.rShiftTo(nsh,r);if(ts<0)BigInteger.ZERO.subTo(r,r)}
function bnMod(a){var r=new BigInteger()
this.abs().divRemTo(a,null,r)
if(this.s<0&&r.compareTo(BigInteger.ZERO)>0)a.subTo(r,r)
return r}
function Classic(m){this.m=m}
function cConvert(x){if(x.s<0||x.compareTo(this.m)>=0)return x.mod(this.m)
else return x}
function cRevert(x){return x}
function cReduce(x){x.divRemTo(this.m,null,x)}
function cMulTo(x,y,r){x.multiplyTo(y,r)
this.reduce(r)}
function cSqrTo(x,r){x.squareTo(r)
this.reduce(r)}
Classic.prototype.convert=cConvert
Classic.prototype.revert=cRevert
Classic.prototype.reduce=cReduce
Classic.prototype.mulTo=cMulTo
Classic.prototype.sqrTo=cSqrTo
function bnpInvDigit(){if(this.t<1)return 0
var x=this[0]
if((x&1)==0)return 0
var y=x&3;y=(y*(2-(x&0xf)*y))&0xf;y=(y*(2-(x&0xff)*y))&0xff;y=(y*(2-(((x&0xffff)*y)&0xffff)))&0xffff;y=(y*(2-x*y%this.DV))%this.DV;return(y>0)?this.DV-y:-y}
function Montgomery(m){this.m=m
this.mp=m.invDigit()
this.mpl=this.mp&0x7fff
this.mph=this.mp>>15
this.um=(1<<(m.DB-15))-1
this.mt2=2*m.t}
function montConvert(x){var r=new BigInteger()
x.abs().dlShiftTo(this.m.t,r)
r.divRemTo(this.m,null,r)
if(x.s<0&&r.compareTo(BigInteger.ZERO)>0)this.m.subTo(r,r)
return r}
function montRevert(x){var r=new BigInteger()
x.copyTo(r)
this.reduce(r)
return r}
function montReduce(x){while(x.t<=this.mt2)
x[x.t++]=0
for(var i=0;i<this.m.t;++i){var j=x[i]&0x7fff
var u0=(j*this.mpl+(((j*this.mph+(x[i]>>15)*this.mpl)&this.um)<<15))&x.DM
j=i+this.m.t
x[j]+=this.m.am(0,u0,x,i,0,this.m.t)
while(x[j]>=x.DV){x[j]-=x.DV
x[++j]++}}
x.clamp()
x.drShiftTo(this.m.t,x)
if(x.compareTo(this.m)>=0)x.subTo(this.m,x)}
function montSqrTo(x,r){x.squareTo(r)
this.reduce(r)}
function montMulTo(x,y,r){x.multiplyTo(y,r)
this.reduce(r)}
Montgomery.prototype.convert=montConvert
Montgomery.prototype.revert=montRevert
Montgomery.prototype.reduce=montReduce
Montgomery.prototype.mulTo=montMulTo
Montgomery.prototype.sqrTo=montSqrTo
function bnpIsEven(){return((this.t>0)?(this[0]&1):this.s)==0}
function bnpExp(e,z){if(e>0xffffffff||e<1)return BigInteger.ONE
var r=new BigInteger(),r2=new BigInteger(),g=z.convert(this),i=nbits(e)-1
g.copyTo(r)
while(--i>=0){z.sqrTo(r,r2)
if((e&(1<<i))>0)z.mulTo(r2,g,r)
else{var t=r
r=r2
r2=t}}
return z.revert(r)}
function bnModPowInt(e,m){var z
if(e<256||m.isEven())z=new Classic(m)
else z=new Montgomery(m)
return this.exp(e,z)}
proto.copyTo=bnpCopyTo
proto.fromInt=bnpFromInt
proto.fromString=bnpFromString
proto.clamp=bnpClamp
proto.dlShiftTo=bnpDLShiftTo
proto.drShiftTo=bnpDRShiftTo
proto.lShiftTo=bnpLShiftTo
proto.rShiftTo=bnpRShiftTo
proto.subTo=bnpSubTo
proto.multiplyTo=bnpMultiplyTo
proto.squareTo=bnpSquareTo
proto.divRemTo=bnpDivRemTo
proto.invDigit=bnpInvDigit
proto.isEven=bnpIsEven
proto.exp=bnpExp
proto.toString=bnToString
proto.negate=bnNegate
proto.abs=bnAbs
proto.compareTo=bnCompareTo
proto.bitLength=bnBitLength
proto.byteLength=bnByteLength
proto.mod=bnMod
proto.modPowInt=bnModPowInt
function bnClone(){var r=new BigInteger()
this.copyTo(r)
return r}
function bnIntValue(){if(this.s<0){if(this.t==1)return this[0]-this.DV
else if(this.t==0)return-1}else if(this.t==1)return this[0]
else if(this.t==0)return 0
return((this[1]&((1<<(32-this.DB))-1))<<this.DB)|this[0]}
function bnByteValue(){return(this.t==0)?this.s:(this[0]<<24)>>24}
function bnShortValue(){return(this.t==0)?this.s:(this[0]<<16)>>16}
function bnpChunkSize(r){return Math.floor(Math.LN2*this.DB/Math.log(r))}
function bnSigNum(){if(this.s<0)return-1
else if(this.t<=0||(this.t==1&&this[0]<=0))return 0
else return 1}
function bnpToRadix(b){if(b==null)b=10
if(this.signum()==0||b<2||b>36)return "0"
var cs=this.chunkSize(b)
var a=Math.pow(b,cs)
var d=nbv(a),y=new BigInteger(),z=new BigInteger(),r=""
this.divRemTo(d,y,z)
while(y.signum()>0){r=(a+z.intValue()).toString(b).substr(1)+r
y.divRemTo(d,y,z)}
return z.intValue().toString(b)+r}
function bnpFromRadix(s,b){var self=this
self.fromInt(0)
if(b==null)b=10
var cs=self.chunkSize(b)
var d=Math.pow(b,cs),mi=false,j=0,w=0
for(var i=0;i<s.length;++i){var x=intAt(s,i)
if(x<0){if(s.charAt(i)=="-"&&self.signum()==0)mi=true
continue}
w=b*w+x
if(++j>=cs){self.dMultiply(d)
self.dAddOffset(w,0)
j=0
w=0}}
if(j>0){self.dMultiply(Math.pow(b,j))
self.dAddOffset(w,0)}
if(mi)BigInteger.ZERO.subTo(self,self)}
function bnpFromNumber(a,b,c){var self=this
if("number"==typeof b){if(a<2)self.fromInt(1)
else{self.fromNumber(a,c)
if(!self.testBit(a-1))
self.bitwiseTo(BigInteger.ONE.shiftLeft(a-1),op_or,self)
if(self.isEven())self.dAddOffset(1,0);while(!self.isProbablePrime(b)){self.dAddOffset(2,0)
if(self.bitLength()>a)self.subTo(BigInteger.ONE.shiftLeft(a-1),self)}}}else{var x=new Array(),t=a&7
x.length=(a>>3)+1
b.nextBytes(x)
if(t>0)x[0]&=((1<<t)-1)
else x[0]=0
self.fromString(x,256)}}
function bnToByteArray(){var self=this
var i=self.t,r=new Array()
r[0]=self.s
var p=self.DB-(i*self.DB)%8,d,k=0
if(i-->0){if(p<self.DB&&(d=self[i]>>p)!=(self.s&self.DM)>>p)
r[k++]=d|(self.s<<(self.DB-p))
while(i>=0){if(p<8){d=(self[i]&((1<<p)-1))<<(8-p)
d|=self[--i]>>(p+=self.DB-8)}else{d=(self[i]>>(p-=8))&0xff
if(p<=0){p+=self.DB
--i}}
if((d&0x80)!=0)d|=-256
if(k===0&&(self.s&0x80)!=(d&0x80))++k
if(k>0||d!=self.s)r[k++]=d}}
return r}
function bnEquals(a){return(this.compareTo(a)==0)}
function bnMin(a){return(this.compareTo(a)<0)?this:a}
function bnMax(a){return(this.compareTo(a)>0)?this:a}
function bnpBitwiseTo(a,op,r){var self=this
var i,f,m=Math.min(a.t,self.t)
for(i=0;i<m;++i)r[i]=op(self[i],a[i])
if(a.t<self.t){f=a.s&self.DM
for(i=m;i<self.t;++i)r[i]=op(self[i],f)
r.t=self.t}else{f=self.s&self.DM
for(i=m;i<a.t;++i)r[i]=op(f,a[i])
r.t=a.t}
r.s=op(self.s,a.s)
r.clamp()}
function op_and(x,y){return x&y}
function bnAnd(a){var r=new BigInteger()
this.bitwiseTo(a,op_and,r)
return r}
function op_or(x,y){return x|y}
function bnOr(a){var r=new BigInteger()
this.bitwiseTo(a,op_or,r)
return r}
function op_xor(x,y){return x^y}
function bnXor(a){var r=new BigInteger()
this.bitwiseTo(a,op_xor,r)
return r}
function op_andnot(x,y){return x&~y}
function bnAndNot(a){var r=new BigInteger()
this.bitwiseTo(a,op_andnot,r)
return r}
function bnNot(){var r=new BigInteger()
for(var i=0;i<this.t;++i)r[i]=this.DM&~this[i]
r.t=this.t
r.s=~this.s
return r}
function bnShiftLeft(n){var r=new BigInteger()
if(n<0)this.rShiftTo(-n,r)
else this.lShiftTo(n,r)
return r}
function bnShiftRight(n){var r=new BigInteger()
if(n<0)this.lShiftTo(-n,r)
else this.rShiftTo(n,r)
return r}
function lbit(x){if(x==0)return-1
var r=0
if((x&0xffff)==0){x>>=16
r+=16}
if((x&0xff)==0){x>>=8
r+=8}
if((x&0xf)==0){x>>=4
r+=4}
if((x&3)==0){x>>=2
r+=2}
if((x&1)==0)++r
return r}
function bnGetLowestSetBit(){for(var i=0;i<this.t;++i)
if(this[i]!=0)return i*this.DB+lbit(this[i])
if(this.s<0)return this.t*this.DB
return-1}
function cbit(x){var r=0
while(x!=0){x&=x-1
++r}
return r}
function bnBitCount(){var r=0,x=this.s&this.DM
for(var i=0;i<this.t;++i)r+=cbit(this[i]^x)
return r}
function bnTestBit(n){var j=Math.floor(n/this.DB)
if(j>=this.t)return(this.s!=0)
return((this[j]&(1<<(n%this.DB)))!=0)}
function bnpChangeBit(n,op){var r=BigInteger.ONE.shiftLeft(n)
this.bitwiseTo(r,op,r)
return r}
function bnSetBit(n){return this.changeBit(n,op_or)}
function bnClearBit(n){return this.changeBit(n,op_andnot)}
function bnFlipBit(n){return this.changeBit(n,op_xor)}
function bnpAddTo(a,r){var self=this
var i=0,c=0,m=Math.min(a.t,self.t)
while(i<m){c+=self[i]+a[i]
r[i++]=c&self.DM
c>>=self.DB}
if(a.t<self.t){c+=a.s
while(i<self.t){c+=self[i]
r[i++]=c&self.DM
c>>=self.DB}
c+=self.s}else{c+=self.s
while(i<a.t){c+=a[i]
r[i++]=c&self.DM
c>>=self.DB}
c+=a.s}
r.s=(c<0)?-1:0
if(c>0)r[i++]=c
else if(c<-1)r[i++]=self.DV+c
r.t=i
r.clamp()}
function bnAdd(a){var r=new BigInteger()
this.addTo(a,r)
return r}
function bnSubtract(a){var r=new BigInteger()
this.subTo(a,r)
return r}
function bnMultiply(a){var r=new BigInteger()
this.multiplyTo(a,r)
return r}
function bnSquare(){var r=new BigInteger()
this.squareTo(r)
return r}
function bnDivide(a){var r=new BigInteger()
this.divRemTo(a,r,null)
return r}
function bnRemainder(a){var r=new BigInteger()
this.divRemTo(a,null,r)
return r}
function bnDivideAndRemainder(a){var q=new BigInteger(),r=new BigInteger()
this.divRemTo(a,q,r)
return new Array(q,r)}
function bnpDMultiply(n){this[this.t]=this.am(0,n-1,this,0,0,this.t)
++this.t
this.clamp()}
function bnpDAddOffset(n,w){if(n==0)return
while(this.t<=w)this[this.t++]=0
this[w]+=n
while(this[w]>=this.DV){this[w]-=this.DV
if(++w>=this.t)this[this.t++]=0
++this[w]}}
function NullExp(){}
function nNop(x){return x}
function nMulTo(x,y,r){x.multiplyTo(y,r)}
function nSqrTo(x,r){x.squareTo(r)}
NullExp.prototype.convert=nNop
NullExp.prototype.revert=nNop
NullExp.prototype.mulTo=nMulTo
NullExp.prototype.sqrTo=nSqrTo
function bnPow(e){return this.exp(e,new NullExp())}
function bnpMultiplyLowerTo(a,n,r){var i=Math.min(this.t+a.t,n)
r.s=0;r.t=i
while(i>0)r[--i]=0
var j
for(j=r.t-this.t;i<j;++i)r[i+this.t]=this.am(0,a[i],r,i,0,this.t)
for(j=Math.min(a.t,n);i<j;++i)this.am(0,a[i],r,i,0,n-i)
r.clamp()}
function bnpMultiplyUpperTo(a,n,r){--n
var i=r.t=this.t+a.t-n
r.s=0;while(--i>=0)r[i]=0
for(i=Math.max(n-this.t,0);i<a.t;++i)
r[this.t+i-n]=this.am(n-i,a[i],r,0,0,this.t+i-n)
r.clamp()
r.drShiftTo(1,r)}
function Barrett(m){this.r2=new BigInteger()
this.q3=new BigInteger()
BigInteger.ONE.dlShiftTo(2*m.t,this.r2)
this.mu=this.r2.divide(m)
this.m=m}
function barrettConvert(x){if(x.s<0||x.t>2*this.m.t)return x.mod(this.m)
else if(x.compareTo(this.m)<0)return x
else{var r=new BigInteger()
x.copyTo(r)
this.reduce(r)
return r}}
function barrettRevert(x){return x}
function barrettReduce(x){var self=this
x.drShiftTo(self.m.t-1,self.r2)
if(x.t>self.m.t+1){x.t=self.m.t+1
x.clamp()}
self.mu.multiplyUpperTo(self.r2,self.m.t+1,self.q3)
self.m.multiplyLowerTo(self.q3,self.m.t+1,self.r2)
while(x.compareTo(self.r2)<0)x.dAddOffset(1,self.m.t+1)
x.subTo(self.r2,x)
while(x.compareTo(self.m)>=0)x.subTo(self.m,x)}
function barrettSqrTo(x,r){x.squareTo(r)
this.reduce(r)}
function barrettMulTo(x,y,r){x.multiplyTo(y,r)
this.reduce(r)}
Barrett.prototype.convert=barrettConvert
Barrett.prototype.revert=barrettRevert
Barrett.prototype.reduce=barrettReduce
Barrett.prototype.mulTo=barrettMulTo
Barrett.prototype.sqrTo=barrettSqrTo
function bnModPow(e,m){var i=e.bitLength(),k,r=nbv(1),z
if(i<=0)return r
else if(i<18)k=1
else if(i<48)k=3
else if(i<144)k=4
else if(i<768)k=5
else k=6
if(i<8)
z=new Classic(m)
else if(m.isEven())
z=new Barrett(m)
else
z=new Montgomery(m)
var g=new Array(),n=3,k1=k-1,km=(1<<k)-1
g[1]=z.convert(this)
if(k>1){var g2=new BigInteger()
z.sqrTo(g[1],g2)
while(n<=km){g[n]=new BigInteger()
z.mulTo(g2,g[n-2],g[n])
n+=2}}
var j=e.t-1,w,is1=true,r2=new BigInteger(),t
i=nbits(e[j])-1
while(j>=0){if(i>=k1)w=(e[j]>>(i-k1))&km
else{w=(e[j]&((1<<(i+1))-1))<<(k1-i)
if(j>0)w|=e[j-1]>>(this.DB+i-k1)}
n=k
while((w&1)==0){w>>=1
--n}
if((i-=n)<0){i+=this.DB
--j}
if(is1){g[w].copyTo(r)
is1=false}else{while(n>1){z.sqrTo(r,r2)
z.sqrTo(r2,r)
n-=2}
if(n>0)z.sqrTo(r,r2)
else{t=r
r=r2
r2=t}
z.mulTo(r2,g[w],r)}
while(j>=0&&(e[j]&(1<<i))==0){z.sqrTo(r,r2)
t=r
r=r2
r2=t
if(--i<0){i=this.DB-1
--j}}}
return z.revert(r)}
function bnGCD(a){var x=(this.s<0)?this.negate():this.clone()
var y=(a.s<0)?a.negate():a.clone()
if(x.compareTo(y)<0){var t=x
x=y
y=t}
var i=x.getLowestSetBit(),g=y.getLowestSetBit()
if(g<0)return x
if(i<g)g=i
if(g>0){x.rShiftTo(g,x)
y.rShiftTo(g,y)}
while(x.signum()>0){if((i=x.getLowestSetBit())>0)x.rShiftTo(i,x)
if((i=y.getLowestSetBit())>0)y.rShiftTo(i,y)
if(x.compareTo(y)>=0){x.subTo(y,x)
x.rShiftTo(1,x)}else{y.subTo(x,y)
y.rShiftTo(1,y)}}
if(g>0)y.lShiftTo(g,y)
return y}
function bnpModInt(n){if(n<=0)return 0
var d=this.DV%n,r=(this.s<0)?n-1:0
if(this.t>0)
if(d==0)r=this[0]%n
else
for(var i=this.t-1;i>=0;--i)r=(d*r+this[i])%n
return r}
function bnModInverse(m){var ac=m.isEven()
if(this.signum()===0)throw new Error('division by zero')
if((this.isEven()&&ac)||m.signum()==0)return BigInteger.ZERO
var u=m.clone(),v=this.clone()
var a=nbv(1),b=nbv(0),c=nbv(0),d=nbv(1)
while(u.signum()!=0){while(u.isEven()){u.rShiftTo(1,u)
if(ac){if(!a.isEven()||!b.isEven()){a.addTo(this,a)
b.subTo(m,b)}
a.rShiftTo(1,a)}else if(!b.isEven())b.subTo(m,b)
b.rShiftTo(1,b)}
while(v.isEven()){v.rShiftTo(1,v)
if(ac){if(!c.isEven()||!d.isEven()){c.addTo(this,c)
d.subTo(m,d)}
c.rShiftTo(1,c)}else if(!d.isEven())d.subTo(m,d)
d.rShiftTo(1,d)}
if(u.compareTo(v)>=0){u.subTo(v,u)
if(ac)a.subTo(c,a)
b.subTo(d,b)}else{v.subTo(u,v)
if(ac)c.subTo(a,c)
d.subTo(b,d)}}
if(v.compareTo(BigInteger.ONE)!=0)return BigInteger.ZERO
while(d.compareTo(m)>=0)d.subTo(m,d)
while(d.signum()<0)d.addTo(m,d)
return d}
var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997]
var lplim=(1<<26)/lowprimes[lowprimes.length-1]
function bnIsProbablePrime(t){var i,x=this.abs()
if(x.t==1&&x[0]<=lowprimes[lowprimes.length-1]){for(i=0;i<lowprimes.length;++i)
if(x[0]==lowprimes[i])return true
return false}
if(x.isEven())return false
i=1
while(i<lowprimes.length){var m=lowprimes[i],j=i+1
while(j<lowprimes.length&&m<lplim)m*=lowprimes[j++]
m=x.modInt(m)
while(i<j)if(m%lowprimes[i++]==0)return false}
return x.millerRabin(t)}
function bnpMillerRabin(t){var n1=this.subtract(BigInteger.ONE)
var k=n1.getLowestSetBit()
if(k<=0)return false
var r=n1.shiftRight(k)
t=(t+1)>>1
if(t>lowprimes.length)t=lowprimes.length
var a=new BigInteger(null)
var j,bases=[]
for(var i=0;i<t;++i){for(;;){j=lowprimes[Math.floor(Math.random()*lowprimes.length)]
if(bases.indexOf(j)==-1)break}
bases.push(j)
a.fromInt(j)
var y=a.modPow(r,this)
if(y.compareTo(BigInteger.ONE)!=0&&y.compareTo(n1)!=0){var j=1
while(j++<k&&y.compareTo(n1)!=0){y=y.modPowInt(2,this)
if(y.compareTo(BigInteger.ONE)==0)return false}
if(y.compareTo(n1)!=0)return false}}
return true}
proto.chunkSize=bnpChunkSize
proto.toRadix=bnpToRadix
proto.fromRadix=bnpFromRadix
proto.fromNumber=bnpFromNumber
proto.bitwiseTo=bnpBitwiseTo
proto.changeBit=bnpChangeBit
proto.addTo=bnpAddTo
proto.dMultiply=bnpDMultiply
proto.dAddOffset=bnpDAddOffset
proto.multiplyLowerTo=bnpMultiplyLowerTo
proto.multiplyUpperTo=bnpMultiplyUpperTo
proto.modInt=bnpModInt
proto.millerRabin=bnpMillerRabin
proto.clone=bnClone
proto.intValue=bnIntValue
proto.byteValue=bnByteValue
proto.shortValue=bnShortValue
proto.signum=bnSigNum
proto.toByteArray=bnToByteArray
proto.equals=bnEquals
proto.min=bnMin
proto.max=bnMax
proto.and=bnAnd
proto.or=bnOr
proto.xor=bnXor
proto.andNot=bnAndNot
proto.not=bnNot
proto.shiftLeft=bnShiftLeft
proto.shiftRight=bnShiftRight
proto.getLowestSetBit=bnGetLowestSetBit
proto.bitCount=bnBitCount
proto.testBit=bnTestBit
proto.setBit=bnSetBit
proto.clearBit=bnClearBit
proto.flipBit=bnFlipBit
proto.add=bnAdd
proto.subtract=bnSubtract
proto.multiply=bnMultiply
proto.divide=bnDivide
proto.remainder=bnRemainder
proto.divideAndRemainder=bnDivideAndRemainder
proto.modPow=bnModPow
proto.modInverse=bnModInverse
proto.pow=bnPow
proto.gcd=bnGCD
proto.isProbablePrime=bnIsProbablePrime
proto.square=bnSquare
BigInteger.ZERO=nbv(0)
BigInteger.ONE=nbv(1)
BigInteger.valueOf=nbv
module.exports=BigInteger}),(function(module,exports,__webpack_require__){var assert=__webpack_require__(71)
var Buffer=__webpack_require__(4).Buffer
var BigInteger=__webpack_require__(87)
var THREE=BigInteger.valueOf(3)
function Point(curve,x,y,z){assert.notStrictEqual(z,undefined,'Missing Z coordinate')
this.curve=curve
this.x=x
this.y=y
this.z=z
this._zInv=null
this.compressed=true}
Object.defineProperty(Point.prototype,'zInv',{get:function(){if(this._zInv===null){this._zInv=this.z.modInverse(this.curve.p)}
return this._zInv}})
Object.defineProperty(Point.prototype,'affineX',{get:function(){return this.x.multiply(this.zInv).mod(this.curve.p)}})
Object.defineProperty(Point.prototype,'affineY',{get:function(){return this.y.multiply(this.zInv).mod(this.curve.p)}})
Point.fromAffine=function(curve,x,y){return new Point(curve,x,y,BigInteger.ONE)}
Point.prototype.equals=function(other){if(other===this)return true
if(this.curve.isInfinity(this))return this.curve.isInfinity(other)
if(this.curve.isInfinity(other))return this.curve.isInfinity(this)
var u=other.y.multiply(this.z).subtract(this.y.multiply(other.z)).mod(this.curve.p)
if(u.signum()!==0)return false
var v=other.x.multiply(this.z).subtract(this.x.multiply(other.z)).mod(this.curve.p)
return v.signum()===0}
Point.prototype.negate=function(){var y=this.curve.p.subtract(this.y)
return new Point(this.curve,this.x,y,this.z)}
Point.prototype.add=function(b){if(this.curve.isInfinity(this))return b
if(this.curve.isInfinity(b))return this
var x1=this.x
var y1=this.y
var x2=b.x
var y2=b.y
var u=y2.multiply(this.z).subtract(y1.multiply(b.z)).mod(this.curve.p)
var v=x2.multiply(this.z).subtract(x1.multiply(b.z)).mod(this.curve.p)
if(v.signum()===0){if(u.signum()===0){return this.twice()}
return this.curve.infinity}
var v2=v.square()
var v3=v2.multiply(v)
var x1v2=x1.multiply(v2)
var zu2=u.square().multiply(this.z)
var x3=zu2.subtract(x1v2.shiftLeft(1)).multiply(b.z).subtract(v3).multiply(v).mod(this.curve.p)
var y3=x1v2.multiply(THREE).multiply(u).subtract(y1.multiply(v3)).subtract(zu2.multiply(u)).multiply(b.z).add(u.multiply(v3)).mod(this.curve.p)
var z3=v3.multiply(this.z).multiply(b.z).mod(this.curve.p)
return new Point(this.curve,x3,y3,z3)}
Point.prototype.twice=function(){if(this.curve.isInfinity(this))return this
if(this.y.signum()===0)return this.curve.infinity
var x1=this.x
var y1=this.y
var y1z1=y1.multiply(this.z).mod(this.curve.p)
var y1sqz1=y1z1.multiply(y1).mod(this.curve.p)
var a=this.curve.a
var w=x1.square().multiply(THREE)
if(a.signum()!==0){w=w.add(this.z.square().multiply(a))}
w=w.mod(this.curve.p)
var x3=w.square().subtract(x1.shiftLeft(3).multiply(y1sqz1)).shiftLeft(1).multiply(y1z1).mod(this.curve.p)
var y3=w.multiply(THREE).multiply(x1).subtract(y1sqz1.shiftLeft(1)).shiftLeft(2).multiply(y1sqz1).subtract(w.pow(3)).mod(this.curve.p)
var z3=y1z1.pow(3).shiftLeft(3).mod(this.curve.p)
return new Point(this.curve,x3,y3,z3)}
Point.prototype.multiply=function(k){if(this.curve.isInfinity(this))return this
if(k.signum()===0)return this.curve.infinity
var e=k
var h=e.multiply(THREE)
var neg=this.negate()
var R=this
for(var i=h.bitLength()-2;i>0;--i){var hBit=h.testBit(i)
var eBit=e.testBit(i)
R=R.twice()
if(hBit!==eBit){R=R.add(hBit?this:neg)}}
return R}
Point.prototype.multiplyTwo=function(j,x,k){var i=Math.max(j.bitLength(),k.bitLength())-1
var R=this.curve.infinity
var both=this.add(x)
while(i>=0){var jBit=j.testBit(i)
var kBit=k.testBit(i)
R=R.twice()
if(jBit){if(kBit){R=R.add(both)}else{R=R.add(this)}}else if(kBit){R=R.add(x)}
--i}
return R}
Point.prototype.getEncoded=function(compressed){if(compressed==null)compressed=this.compressed
if(this.curve.isInfinity(this))return Buffer.alloc(1,0)
var x=this.affineX
var y=this.affineY
var byteLength=this.curve.pLength
var buffer
if(compressed){buffer=Buffer.allocUnsafe(1+byteLength)
buffer.writeUInt8(y.isEven()?0x02:0x03,0)}else{buffer=Buffer.allocUnsafe(1+byteLength+byteLength)
buffer.writeUInt8(0x04,0)
y.toBuffer(byteLength).copy(buffer,1+byteLength)}
x.toBuffer(byteLength).copy(buffer,1)
return buffer}
Point.decodeFrom=function(curve,buffer){var type=buffer.readUInt8(0)
var compressed=(type!==4)
var byteLength=Math.floor((curve.p.bitLength()+7)/8)
var x=BigInteger.fromBuffer(buffer.slice(1,1+byteLength))
var Q
if(compressed){assert.equal(buffer.length,byteLength+1,'Invalid sequence length')
assert(type===0x02||type===0x03,'Invalid sequence tag')
var isOdd=(type===0x03)
Q=curve.pointFromX(isOdd,x)}else{assert.equal(buffer.length,1+byteLength+byteLength,'Invalid sequence length')
var y=BigInteger.fromBuffer(buffer.slice(1+byteLength))
Q=Point.fromAffine(curve,x,y)}
Q.compressed=compressed
return Q}
Point.prototype.toString=function(){if(this.curve.isInfinity(this))return '(INFINITY)'
return '('+this.affineX.toString()+','+this.affineY.toString()+')'}
module.exports=Point}),(function(module,exports,__webpack_require__){var assert=__webpack_require__(71)
var BigInteger=__webpack_require__(87)
var Point=__webpack_require__(356)
function Curve(p,a,b,Gx,Gy,n,h){this.p=p
this.a=a
this.b=b
this.G=Point.fromAffine(this,Gx,Gy)
this.n=n
this.h=h
this.infinity=new Point(this,null,null,BigInteger.ZERO)
this.pOverFour=p.add(BigInteger.ONE).shiftRight(2)
this.pLength=Math.floor((this.p.bitLength()+7)/8)}
Curve.prototype.pointFromX=function(isOdd,x){var alpha=x.pow(3).add(this.a.multiply(x)).add(this.b).mod(this.p)
var beta=alpha.modPow(this.pOverFour,this.p)
var y=beta
if(beta.isEven()^!isOdd){y=this.p.subtract(y)}
return Point.fromAffine(this,x,y)}
Curve.prototype.isInfinity=function(Q){if(Q===this.infinity)return true
return Q.z.signum()===0&&Q.y.signum()!==0}
Curve.prototype.isOnCurve=function(Q){if(this.isInfinity(Q))return true
var x=Q.affineX
var y=Q.affineY
var a=this.a
var b=this.b
var p=this.p
if(x.signum()<0||x.compareTo(p)>=0)return false
if(y.signum()<0||y.compareTo(p)>=0)return false
var lhs=y.square().mod(p)
var rhs=x.pow(3).add(a.multiply(x)).add(b).mod(p)
return lhs.equals(rhs)}
Curve.prototype.validate=function(Q){assert(!this.isInfinity(Q),'Point is at infinity')
assert(this.isOnCurve(Q),'Point is not on the curve')
var nQ=Q.multiply(this.n)
assert(this.isInfinity(nQ),'Point is not a scalar multiple of G')
return true}
module.exports=Curve}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_1_node_lists_types_Connection_Type__=__webpack_require__(47);var __WEBPACK_IMPORTED_MODULE_2_common_events_Status_Events__=__webpack_require__(12);var __WEBPACK_IMPORTED_MODULE_3_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_4_node_lists_types_Node_Consensus_Type__=__webpack_require__(44);class NanoWalletProtocol{constructor(){this._allowConsensus=true;this._sockets=[];__WEBPACK_IMPORTED_MODULE_2_common_events_Status_Events__["a"].on('wallet/address-changes',(address)=>{this.virtualizeAddress(address.address);});__WEBPACK_IMPORTED_MODULE_3_node_lists_Nodes_List__["a"].emitter.on("nodes-list/disconnected",(nodesListObject)=>{this._disconnectSocked(nodesListObject.socket)});if(this._allowConsensus)
this.initializeNanoProtocol();}
initializeNanoProtocolWallet(wallet){wallet.emitter.on('wallet/address-changes',(address)=>{this.virtualizeAddress(address);});}
async initializeNanoProtocol(){for(let i=0;i<__WEBPACK_IMPORTED_MODULE_3_node_lists_Nodes_List__["a"].nodes.length;i++)
await this._initializeSocket(__WEBPACK_IMPORTED_MODULE_3_node_lists_Nodes_List__["a"].nodes[i].socket);if(!this._emitterOn){__WEBPACK_IMPORTED_MODULE_3_node_lists_Nodes_List__["a"].emitter.on("nodes-list/connected",(nodesListObject)=>this._initializeSocket(nodesListObject.socket));this._emitterOn=true;}}
async _initializeSocket(socket){if(!this._allowConsensus&&__WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__["a"].agent.consensus)
return true;if([__WEBPACK_IMPORTED_MODULE_4_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_SERVER,__WEBPACK_IMPORTED_MODULE_4_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_POOL].indexOf(socket.node.protocol.nodeConsensusType)<0)return;if(socket.node.protocol.nano!==undefined&&socket.node.protocol.nano.nanoInitialized===true)return;socket.node.protocol.nano={nanoInitialized:true,};let trySubscribe=async(trials)=>{let answer=await socket.node.sendRequestWaitOnce("api/start-subscribers",{},"answer",5000);if(answer!==null&&answer.result){socket.node.protocol.nano.subscribedStarted=true;await this.virtualizeWallet(socket);return true;}
if(trials>0)
return await trySubscribe(trials-1);};await trySubscribe(10);}
virtualizeWallet(socket){if(!this._allowConsensus&&__WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__["a"].agent.consensus)
return true;this._sockets.push(socket);for(let i=0;i<__WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__["a"].Wallet.addresses.length;i++)
this.virtualizeAddress(__WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__["a"].Wallet.addresses[i].address,[socket]);}
_subscribeAddress(socket,address){return new Promise(async(resolve)=>{let trials=5;socket.node.on("api/subscribe/address/balances/answer/"+address,(data)=>{if(!this._allowConsensus&&__WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__["a"].agent.consensus)
return true;if(!data||!data.result)return false;trials=0;let prevVal=__WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__["a"].AccountantTree.getBalance(address);if(!prevVal)prevVal=0;let currentVal;if(!data.balances)currentVal=0;else currentVal=data.balances["0x01"];try{__WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__["a"].AccountantTree.updateAccount(address,currentVal-prevVal,undefined,undefined,true);}catch(exception){}
let prevNonce=__WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__["a"].AccountantTree.getAccountNonce(address);if(!prevNonce)prevNonce=0;let currentNonce=data.nonce;if(!currentNonce)currentNonce=0;try{__WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__["a"].AccountantTree.updateAccountNonce(address,currentNonce-prevNonce,undefined,undefined,true);}catch(exception){}
trials=0;resolve(true);});while(trials>0){let answer=await socket.node.sendRequestWaitOnce("api/subscribe/address/balances",{address:address},undefined,5000);if(answer&&answer.result){resolve(true);return;}
trials--;}});}
_subscribeTransactions(socket,address){return new Promise(async(resolve)=>{let trials=5;socket.node.on("api/subscribe/address/transactions/answer/"+address,async(data)=>{if(!this._allowConsensus&&__WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__["a"].agent.consensus)
return true;if(!data||!data.result)return false;trials=0;let done;for(let k in data.transactions){let transaction=data.transactions[k];let from=transaction.from;from.addresses.forEach(address=>{address.amountPrev=__WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__["a"].AccountantTree.getAccountNonce(address.address);if(address.amountPrev===null)address.amountPrev=0;let currentVal=parseInt(address.amount);try{__WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__["a"].AccountantTree.updateAccount(address.address,currentVal-address.amountPrev,undefined,undefined,true);}catch(exception){}});transaction.noncePrev=__WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__["a"].AccountantTree.getAccountNonce(address);if(transaction.noncePrev===null)transaction.noncePrev=0;let currentNonce=transaction.nonce;if(currentNonce===null)currentNonce=0;try{__WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__["a"].AccountantTree.updateAccountNonce(transaction.from.addresses[0].address,currentNonce-transaction.noncePrev,undefined,undefined,true);}catch(exception){}
let tx=null;if(transaction)tx=await __WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__["a"].Transactions._createTransaction(transaction.from,transaction.to,transaction.nonce,transaction.timeLock,transaction.version,undefined);let foundTx=__WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__["a"].Transactions.pendingQueue.findPendingTransaction(transaction.txId);if(!foundTx){await __WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__["a"].Transactions.pendingQueue.includePendingTransaction(tx,"all");foundTx=transaction;}
tx._confirmed=transaction.confirmed;try{let currentNonce=__WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__["a"].AccountantTree.getAccountNonce(address);if(currentNonce===null)currentNonce=0;__WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__["a"].AccountantTree.updateAccountNonce(transaction.from.addresses[0].address,transaction.noncePrev-currentNonce,undefined,undefined,true);from.addresses.forEach(address=>{let currentVal=__WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__["a"].AccountantTree.getBalance(address.address);if(currentVal===null)currentVal=0;__WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__["a"].AccountantTree.updateAccount(address.address,address.amountPrev-currentVal,undefined,undefined,true);});}catch(exception){}
done=true;}
if(done)
resolve(true);});while(trials>0){let answer=await socket.node.sendRequestWaitOnce("api/subscribe/address/transactions",{address:address},undefined,5000);if(typeof answer==="object"&&answer!==null&&answer.result){resolve(true);return;}
trials--;}});}
virtualizeAddress(address,sockets){if(sockets===undefined)sockets=this._sockets;for(let i=0;i<sockets.length;i++){this._subscribeAddress(sockets[i],address);this._subscribeTransactions(sockets[i],address);}}
_disconnectSocked(socket){for(let i=this._sockets.length-1;i>=0;i--)
if(this._sockets[i]===socket){this._sockets.splice(i,1);}}}
__webpack_exports__["a"]=(new NanoWalletProtocol());}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var rp=__webpack_require__(360);class DownloadHelper{async downloadFile(address,timeout=10000){try{address=address.replace('::ffff:','');let data=await rp({uri:address,headers:{'User-Agent':'Request-Promise'},json:true,timeout:timeout});if(data)return data;}
catch(exception){if(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].DEBUG)
console.error("DownloadHelper::downloadFile ERROR downloading list: ",address);}
return null;}
async downloadMultipleFiles(addresses,timeout=5000){if(!Array.isArray(addresses))
addresses=[addresses];return new Promise(async(resolve)=>{let list=[];for(let i=0;i<addresses.length;i++){let answer=await this.downloadFile(addresses[i],timeout);if(answer)
list.push(answer);}
if(list.length===0)return resolve();return resolve(list);})}}
__webpack_exports__["a"]=(new DownloadHelper());}),(function(module,exports,__webpack_require__){"use strict";(function(module){var Bluebird=__webpack_require__(785).getNewLibraryCopy(),configure=__webpack_require__(786),stealthyRequire=__webpack_require__(796);try{var request=stealthyRequire(__webpack_require__.c,function(){return __webpack_require__(797);},function(){__webpack_require__(366);},module);}catch(err){var EOL=__webpack_require__(394).EOL;console.error(EOL+'###'+EOL+'### The "request" library is not installed automatically anymore.'+EOL+'### But required by "request-promise".'+EOL+'###'+EOL+'### npm install request --save'+EOL+'###'+EOL);throw err;}
Bluebird.config({cancellation:true});configure({request:request,PromiseImpl:Bluebird,expose:['then','catch','finally','cancel','promise'],constructorMixin:function(resolve,reject,onCancel){var self=this;onCancel(function(){self.abort();});}});request.bindCLS=function RP$bindCLS(){throw new Error('CLS support was dropped. To get it back read: https://github.com/request/request-promise/wiki/Getting-Back-Support-for-Continuation-Local-Storage');};module.exports=request;}.call(exports,__webpack_require__(83)(module)))}),(function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(362),isObject=__webpack_require__(793);var asyncTag='[object AsyncFunction]',funcTag='[object Function]',genTag='[object GeneratorFunction]',proxyTag='[object Proxy]';function isFunction(value){if(!isObject(value)){return false;}
var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag;}
module.exports=isFunction;}),(function(module,exports,__webpack_require__){var Symbol=__webpack_require__(363),getRawTag=__webpack_require__(791),objectToString=__webpack_require__(792);var nullTag='[object Null]',undefinedTag='[object Undefined]';var symToStringTag=Symbol?Symbol.toStringTag:undefined;function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag;}
return(symToStringTag&&symToStringTag in Object(value))?getRawTag(value):objectToString(value);}
module.exports=baseGetTag;}),(function(module,exports,__webpack_require__){var root=__webpack_require__(789);var Symbol=root.Symbol;module.exports=Symbol;}),(function(module,exports){var isArray=Array.isArray;module.exports=isArray;}),(function(module,exports,__webpack_require__){"use strict";var tough=__webpack_require__(366)
var Cookie=tough.Cookie
var CookieJar=tough.CookieJar
exports.parse=function(str){if(str&&str.uri){str=str.uri}
if(typeof str!=='string'){throw new Error('The cookie function only accepts STRING as param')}
return Cookie.parse(str,{loose:true})}
function RequestJar(store){var self=this
self._jar=new CookieJar(store,{looseMode:true})}
RequestJar.prototype.setCookie=function(cookieOrStr,uri,options){var self=this
return self._jar.setCookieSync(cookieOrStr,uri,options||{})}
RequestJar.prototype.getCookieString=function(uri){var self=this
return self._jar.getCookieStringSync(uri)}
RequestJar.prototype.getCookies=function(uri){var self=this
return self._jar.getCookiesSync(uri)}
exports.jar=function(store){return new RequestJar(store)}}),(function(module,exports,__webpack_require__){"use strict";/*!
* Copyright (c) 2015, Salesforce.com, Inc.
* All rights reserved.
*
* Redistribution and use in source and binary forms, with or without
* modification, are permitted provided that the following conditions are met:
*
* 1. Redistributions of source code must retain the above copyright notice,
* this list of conditions and the following disclaimer.
*
* 2. Redistributions in binary form must reproduce the above copyright notice,
* this list of conditions and the following disclaimer in the documentation
* and/or other materials provided with the distribution.
*
* 3. Neither the name of Salesforce.com nor the names of its contributors may
* be used to endorse or promote products derived from this software without
* specific prior written permission.
*
* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
* AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
* IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
* ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
* LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
* CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
* SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
* INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
* CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
* ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
* POSSIBILITY OF SUCH DAMAGE.
*/var net=__webpack_require__(62);var urlParse=__webpack_require__(77).parse;var util=__webpack_require__(25);var pubsuffix=__webpack_require__(367);var Store=__webpack_require__(368).Store;var MemoryCookieStore=__webpack_require__(803).MemoryCookieStore;var pathMatch=__webpack_require__(370).pathMatch;var VERSION=__webpack_require__(804).version;var punycode;try{punycode=__webpack_require__(236);}catch(e){console.warn("tough-cookie: can't load punycode; won't use punycode for domain normalization");}
var COOKIE_OCTETS=/^[\x21\x23-\x2B\x2D-\x3A\x3C-\x5B\x5D-\x7E]+$/;var CONTROL_CHARS=/[\x00-\x1F]/;var TERMINATORS=['\n','\r','\0'];var PATH_VALUE=/[\x20-\x3A\x3C-\x7E]+/;var DATE_DELIM=/[\x09\x20-\x2F\x3B-\x40\x5B-\x60\x7B-\x7E]/;var MONTH_TO_NUM={jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11};var NUM_TO_MONTH=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];var NUM_TO_DAY=['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];var MAX_TIME=2147483647000;var MIN_TIME=0;function parseDigits(token,minDigits,maxDigits,trailingOK){var count=0;while(count<token.length){var c=token.charCodeAt(count);if(c<=0x2F||c>=0x3A){break;}
count++;}
if(count<minDigits||count>maxDigits){return null;}
if(!trailingOK&&count!=token.length){return null;}
return parseInt(token.substr(0,count),10);}
function parseTime(token){var parts=token.split(':');var result=[0,0,0];if(parts.length!==3){return null;}
for(var i=0;i<3;i++){var trailingOK=(i==2);var num=parseDigits(parts[i],1,2,trailingOK);if(num===null){return null;}
result[i]=num;}
return result;}
function parseMonth(token){token=String(token).substr(0,3).toLowerCase();var num=MONTH_TO_NUM[token];return num>=0?num:null;}
function parseDate(str){if(!str){return;}
var tokens=str.split(DATE_DELIM);if(!tokens){return;}
var hour=null;var minute=null;var second=null;var dayOfMonth=null;var month=null;var year=null;for(var i=0;i<tokens.length;i++){var token=tokens[i].trim();if(!token.length){continue;}
var result;if(second===null){result=parseTime(token);if(result){hour=result[0];minute=result[1];second=result[2];continue;}}
if(dayOfMonth===null){result=parseDigits(token,1,2,true);if(result!==null){dayOfMonth=result;continue;}}
if(month===null){result=parseMonth(token);if(result!==null){month=result;continue;}}
if(year===null){result=parseDigits(token,2,4,true);if(result!==null){year=result;if(year>=70&&year<=99){year+=1900;}else if(year>=0&&year<=69){year+=2000;}}}}
if(dayOfMonth===null||month===null||year===null||second===null||dayOfMonth<1||dayOfMonth>31||year<1601||hour>23||minute>59||second>59){return;}
return new Date(Date.UTC(year,month,dayOfMonth,hour,minute,second));}
function formatDate(date){var d=date.getUTCDate();d=d>=10?d:'0'+d;var h=date.getUTCHours();h=h>=10?h:'0'+h;var m=date.getUTCMinutes();m=m>=10?m:'0'+m;var s=date.getUTCSeconds();s=s>=10?s:'0'+s;return NUM_TO_DAY[date.getUTCDay()]+', '+
d+' '+NUM_TO_MONTH[date.getUTCMonth()]+' '+date.getUTCFullYear()+' '+
h+':'+m+':'+s+' GMT';}
function canonicalDomain(str){if(str==null){return null;}
str=str.trim().replace(/^\./,'');if(punycode&&/[^\u0001-\u007f]/.test(str)){str=punycode.toASCII(str);}
return str.toLowerCase();}
function domainMatch(str,domStr,canonicalize){if(str==null||domStr==null){return null;}
if(canonicalize!==false){str=canonicalDomain(str);domStr=canonicalDomain(domStr);}
if(str==domStr){return true;}
if(net.isIP(str)){return false;}
var idx=str.indexOf(domStr);if(idx<=0){return false;}
if(str.length!==domStr.length+idx){return false;}
if(str.substr(idx-1,1)!=='.'){return false;}
return true;}
function defaultPath(path){if(!path||path.substr(0,1)!=="/"){return "/";}
if(path==="/"){return path;}
var rightSlash=path.lastIndexOf("/");if(rightSlash===0){return "/";}
return path.slice(0,rightSlash);}
function trimTerminator(str){for(var t=0;t<TERMINATORS.length;t++){var terminatorIdx=str.indexOf(TERMINATORS[t]);if(terminatorIdx!==-1){str=str.substr(0,terminatorIdx);}}
return str;}
function parseCookiePair(cookiePair,looseMode){cookiePair=trimTerminator(cookiePair);var firstEq=cookiePair.indexOf('=');if(looseMode){if(firstEq===0){cookiePair=cookiePair.substr(1);firstEq=cookiePair.indexOf('=');}}else{if(firstEq<=0){return;}}
var cookieName,cookieValue;if(firstEq<=0){cookieName="";cookieValue=cookiePair.trim();}else{cookieName=cookiePair.substr(0,firstEq).trim();cookieValue=cookiePair.substr(firstEq+1).trim();}
if(CONTROL_CHARS.test(cookieName)||CONTROL_CHARS.test(cookieValue)){return;}
var c=new Cookie();c.key=cookieName;c.value=cookieValue;return c;}
function parse(str,options){if(!options||typeof options!=='object'){options={};}
str=str.trim();var firstSemi=str.indexOf(';');var cookiePair=(firstSemi===-1)?str:str.substr(0,firstSemi);var c=parseCookiePair(cookiePair,!!options.loose);if(!c){return;}
if(firstSemi===-1){return c;}
var unparsed=str.slice(firstSemi+1).trim();if(unparsed.length===0){return c;}
var cookie_avs=unparsed.split(';');while(cookie_avs.length){var av=cookie_avs.shift().trim();if(av.length===0){continue;}
var av_sep=av.indexOf('=');var av_key,av_value;if(av_sep===-1){av_key=av;av_value=null;}else{av_key=av.substr(0,av_sep);av_value=av.substr(av_sep+1);}
av_key=av_key.trim().toLowerCase();if(av_value){av_value=av_value.trim();}
switch(av_key){case 'expires':if(av_value){var exp=parseDate(av_value);if(exp){c.expires=exp;}}
break;case 'max-age':if(av_value){if(/^-?[0-9]+$/.test(av_value)){var delta=parseInt(av_value,10);c.setMaxAge(delta);}}
break;case 'domain':if(av_value){var domain=av_value.trim().replace(/^\./,'');if(domain){c.domain=domain.toLowerCase();}}
break;case 'path':c.path=av_value&&av_value[0]==="/"?av_value:null;break;case 'secure':c.secure=true;break;case 'httponly':c.httpOnly=true;break;default:c.extensions=c.extensions||[];c.extensions.push(av);break;}}
return c;}
function jsonParse(str){var obj;try{obj=JSON.parse(str);}catch(e){return e;}
return obj;}
function fromJSON(str){if(!str){return null;}
var obj;if(typeof str==='string'){obj=jsonParse(str);if(obj instanceof Error){return null;}}else{obj=str;}
var c=new Cookie();for(var i=0;i<Cookie.serializableProperties.length;i++){var prop=Cookie.serializableProperties[i];if(obj[prop]===undefined||obj[prop]===Cookie.prototype[prop])
{continue;}
if(prop==='expires'||prop==='creation'||prop==='lastAccessed')
{if(obj[prop]===null){c[prop]=null;}else{c[prop]=obj[prop]=="Infinity"?"Infinity":new Date(obj[prop]);}}else{c[prop]=obj[prop];}}
return c;}
function cookieCompare(a,b){var cmp=0;var aPathLen=a.path?a.path.length:0;var bPathLen=b.path?b.path.length:0;cmp=bPathLen-aPathLen;if(cmp!==0){return cmp;}
var aTime=a.creation?a.creation.getTime():MAX_TIME;var bTime=b.creation?b.creation.getTime():MAX_TIME;cmp=aTime-bTime;if(cmp!==0){return cmp;}
cmp=a.creationIndex-b.creationIndex;return cmp;}
function permutePath(path){if(path==='/'){return['/'];}
if(path.lastIndexOf('/')===path.length-1){path=path.substr(0,path.length-1);}
var permutations=[path];while(path.length>1){var lindex=path.lastIndexOf('/');if(lindex===0){break;}
path=path.substr(0,lindex);permutations.push(path);}
permutations.push('/');return permutations;}
function getCookieContext(url){if(url instanceof Object){return url;}
try{url=decodeURI(url);}
catch(err){}
return urlParse(url);}
function Cookie(options){options=options||{};Object.keys(options).forEach(function(prop){if(Cookie.prototype.hasOwnProperty(prop)&&Cookie.prototype[prop]!==options[prop]&&prop.substr(0,1)!=='_')
{this[prop]=options[prop];}},this);this.creation=this.creation||new Date();Object.defineProperty(this,'creationIndex',{configurable:false,enumerable:false,writable:true,value:++Cookie.cookiesCreated});}
Cookie.cookiesCreated=0;Cookie.parse=parse;Cookie.fromJSON=fromJSON;Cookie.prototype.key="";Cookie.prototype.value="";Cookie.prototype.expires="Infinity";Cookie.prototype.maxAge=null;Cookie.prototype.domain=null;Cookie.prototype.path=null;Cookie.prototype.secure=false;Cookie.prototype.httpOnly=false;Cookie.prototype.extensions=null;Cookie.prototype.hostOnly=null;Cookie.prototype.pathIsDefault=null;Cookie.prototype.creation=null;Cookie.prototype.lastAccessed=null;Object.defineProperty(Cookie.prototype,'creationIndex',{configurable:true,enumerable:false,writable:true,value:0});Cookie.serializableProperties=Object.keys(Cookie.prototype).filter(function(prop){return!(Cookie.prototype[prop]instanceof Function||prop==='creationIndex'||prop.substr(0,1)==='_');});Cookie.prototype.inspect=function inspect(){var now=Date.now();return 'Cookie="'+this.toString()+
'; hostOnly='+(this.hostOnly!=null?this.hostOnly:'?')+
'; aAge='+(this.lastAccessed?(now-this.lastAccessed.getTime())+'ms':'?')+
'; cAge='+(this.creation?(now-this.creation.getTime())+'ms':'?')+
'"';};if(util.inspect.custom){Cookie.prototype[util.inspect.custom]=Cookie.prototype.inspect;}
Cookie.prototype.toJSON=function(){var obj={};var props=Cookie.serializableProperties;for(var i=0;i<props.length;i++){var prop=props[i];if(this[prop]===Cookie.prototype[prop]){continue;}
if(prop==='expires'||prop==='creation'||prop==='lastAccessed')
{if(this[prop]===null){obj[prop]=null;}else{obj[prop]=this[prop]=="Infinity"?"Infinity":this[prop].toISOString();}}else if(prop==='maxAge'){if(this[prop]!==null){obj[prop]=(this[prop]==Infinity||this[prop]==-Infinity)?this[prop].toString():this[prop];}}else{if(this[prop]!==Cookie.prototype[prop]){obj[prop]=this[prop];}}}
return obj;};Cookie.prototype.clone=function(){return fromJSON(this.toJSON());};Cookie.prototype.validate=function validate(){if(!COOKIE_OCTETS.test(this.value)){return false;}
if(this.expires!=Infinity&&!(this.expires instanceof Date)&&!parseDate(this.expires)){return false;}
if(this.maxAge!=null&&this.maxAge<=0){return false;}
if(this.path!=null&&!PATH_VALUE.test(this.path)){return false;}
var cdomain=this.cdomain();if(cdomain){if(cdomain.match(/\.$/)){return false;}
var suffix=pubsuffix.getPublicSuffix(cdomain);if(suffix==null){return false;}}
return true;};Cookie.prototype.setExpires=function setExpires(exp){if(exp instanceof Date){this.expires=exp;}else{this.expires=parseDate(exp)||"Infinity";}};Cookie.prototype.setMaxAge=function setMaxAge(age){if(age===Infinity||age===-Infinity){this.maxAge=age.toString();}else{this.maxAge=age;}};Cookie.prototype.cookieString=function cookieString(){var val=this.value;if(val==null){val='';}
if(this.key===''){return val;}
return this.key+'='+val;};Cookie.prototype.toString=function toString(){var str=this.cookieString();if(this.expires!=Infinity){if(this.expires instanceof Date){str+='; Expires='+formatDate(this.expires);}else{str+='; Expires='+this.expires;}}
if(this.maxAge!=null&&this.maxAge!=Infinity){str+='; Max-Age='+this.maxAge;}
if(this.domain&&!this.hostOnly){str+='; Domain='+this.domain;}
if(this.path){str+='; Path='+this.path;}
if(this.secure){str+='; Secure';}
if(this.httpOnly){str+='; HttpOnly';}
if(this.extensions){this.extensions.forEach(function(ext){str+='; '+ext;});}
return str;};Cookie.prototype.TTL=function TTL(now){if(this.maxAge!=null){return this.maxAge<=0?0:this.maxAge*1000;}
var expires=this.expires;if(expires!=Infinity){if(!(expires instanceof Date)){expires=parseDate(expires)||Infinity;}
if(expires==Infinity){return Infinity;}
return expires.getTime()-(now||Date.now());}
return Infinity;};Cookie.prototype.expiryTime=function expiryTime(now){if(this.maxAge!=null){var relativeTo=now||this.creation||new Date();var age=(this.maxAge<=0)?-Infinity:this.maxAge*1000;return relativeTo.getTime()+age;}
if(this.expires==Infinity){return Infinity;}
return this.expires.getTime();};Cookie.prototype.expiryDate=function expiryDate(now){var millisec=this.expiryTime(now);if(millisec==Infinity){return new Date(MAX_TIME);}else if(millisec==-Infinity){return new Date(MIN_TIME);}else{return new Date(millisec);}};Cookie.prototype.isPersistent=function isPersistent(){return(this.maxAge!=null||this.expires!=Infinity);};Cookie.prototype.cdomain=Cookie.prototype.canonicalizedDomain=function canonicalizedDomain(){if(this.domain==null){return null;}
return canonicalDomain(this.domain);};function CookieJar(store,options){if(typeof options==="boolean"){options={rejectPublicSuffixes:options};}else if(options==null){options={};}
if(options.rejectPublicSuffixes!=null){this.rejectPublicSuffixes=options.rejectPublicSuffixes;}
if(options.looseMode!=null){this.enableLooseMode=options.looseMode;}
if(!store){store=new MemoryCookieStore();}
this.store=store;}
CookieJar.prototype.store=null;CookieJar.prototype.rejectPublicSuffixes=true;CookieJar.prototype.enableLooseMode=false;var CAN_BE_SYNC=[];CAN_BE_SYNC.push('setCookie');CookieJar.prototype.setCookie=function(cookie,url,options,cb){var err;var context=getCookieContext(url);if(options instanceof Function){cb=options;options={};}
var host=canonicalDomain(context.hostname);var loose=this.enableLooseMode;if(options.loose!=null){loose=options.loose;}
if(!(cookie instanceof Cookie)){cookie=Cookie.parse(cookie,{loose:loose});}
if(!cookie){err=new Error("Cookie failed to parse");return cb(options.ignoreError?null:err);}
var now=options.now||new Date();if(this.rejectPublicSuffixes&&cookie.domain){var suffix=pubsuffix.getPublicSuffix(cookie.cdomain());if(suffix==null){err=new Error("Cookie has domain set to a public suffix");return cb(options.ignoreError?null:err);}}
if(cookie.domain){if(!domainMatch(host,cookie.cdomain(),false)){err=new Error("Cookie not in this host's domain. Cookie:"+cookie.cdomain()+" Request:"+host);return cb(options.ignoreError?null:err);}
if(cookie.hostOnly==null){cookie.hostOnly=false;}}else{cookie.hostOnly=true;cookie.domain=host;}
if(!cookie.path||cookie.path[0]!=='/'){cookie.path=defaultPath(context.pathname);cookie.pathIsDefault=true;}
if(options.http===false&&cookie.httpOnly){err=new Error("Cookie is HttpOnly and this isn't an HTTP API");return cb(options.ignoreError?null:err);}
var store=this.store;if(!store.updateCookie){store.updateCookie=function(oldCookie,newCookie,cb){this.putCookie(newCookie,cb);};}
function withCookie(err,oldCookie){if(err){return cb(err);}
var next=function(err){if(err){return cb(err);}else{cb(null,cookie);}};if(oldCookie){if(options.http===false&&oldCookie.httpOnly){err=new Error("old Cookie is HttpOnly and this isn't an HTTP API");return cb(options.ignoreError?null:err);}
cookie.creation=oldCookie.creation;cookie.creationIndex=oldCookie.creationIndex;cookie.lastAccessed=now;store.updateCookie(oldCookie,cookie,next);}else{cookie.creation=cookie.lastAccessed=now;store.putCookie(cookie,next);}}
store.findCookie(cookie.domain,cookie.path,cookie.key,withCookie);};CAN_BE_SYNC.push('getCookies');CookieJar.prototype.getCookies=function(url,options,cb){var context=getCookieContext(url);if(options instanceof Function){cb=options;options={};}
var host=canonicalDomain(context.hostname);var path=context.pathname||'/';var secure=options.secure;if(secure==null&&context.protocol&&(context.protocol=='https:'||context.protocol=='wss:'))
{secure=true;}
var http=options.http;if(http==null){http=true;}
var now=options.now||Date.now();var expireCheck=options.expire!==false;var allPaths=!!options.allPaths;var store=this.store;function matchingCookie(c){if(c.hostOnly){if(c.domain!=host){return false;}}else{if(!domainMatch(host,c.domain,false)){return false;}}
if(!allPaths&&!pathMatch(path,c.path)){return false;}
if(c.secure&&!secure){return false;}
if(c.httpOnly&&!http){return false;}
if(expireCheck&&c.expiryTime()<=now){store.removeCookie(c.domain,c.path,c.key,function(){});return false;}
return true;}
store.findCookies(host,allPaths?null:path,function(err,cookies){if(err){return cb(err);}
cookies=cookies.filter(matchingCookie);if(options.sort!==false){cookies=cookies.sort(cookieCompare);}
var now=new Date();cookies.forEach(function(c){c.lastAccessed=now;});cb(null,cookies);});};CAN_BE_SYNC.push('getCookieString');CookieJar.prototype.getCookieString=function(){var args=Array.prototype.slice.call(arguments,0);var cb=args.pop();var next=function(err,cookies){if(err){cb(err);}else{cb(null,cookies.sort(cookieCompare).map(function(c){return c.cookieString();}).join('; '));}};args.push(next);this.getCookies.apply(this,args);};CAN_BE_SYNC.push('getSetCookieStrings');CookieJar.prototype.getSetCookieStrings=function(){var args=Array.prototype.slice.call(arguments,0);var cb=args.pop();var next=function(err,cookies){if(err){cb(err);}else{cb(null,cookies.map(function(c){return c.toString();}));}};args.push(next);this.getCookies.apply(this,args);};CAN_BE_SYNC.push('serialize');CookieJar.prototype.serialize=function(cb){var type=this.store.constructor.name;if(type==='Object'){type=null;}
var serialized={version:'tough-cookie@'+VERSION,storeType:type,rejectPublicSuffixes:!!this.rejectPublicSuffixes,cookies:[]};if(!(this.store.getAllCookies&&typeof this.store.getAllCookies==='function'))
{return cb(new Error('store does not support getAllCookies and cannot be serialized'));}
this.store.getAllCookies(function(err,cookies){if(err){return cb(err);}
serialized.cookies=cookies.map(function(cookie){cookie=(cookie instanceof Cookie)?cookie.toJSON():cookie;delete cookie.creationIndex;return cookie;});return cb(null,serialized);});};CookieJar.prototype.toJSON=function(){return this.serializeSync();};CAN_BE_SYNC.push('_importCookies');CookieJar.prototype._importCookies=function(serialized,cb){var jar=this;var cookies=serialized.cookies;if(!cookies||!Array.isArray(cookies)){return cb(new Error('serialized jar has no cookies array'));}
cookies=cookies.slice();function putNext(err){if(err){return cb(err);}
if(!cookies.length){return cb(err,jar);}
var cookie;try{cookie=fromJSON(cookies.shift());}catch(e){return cb(e);}
if(cookie===null){return putNext(null);}
jar.store.putCookie(cookie,putNext);}
putNext();};CookieJar.deserialize=function(strOrObj,store,cb){if(arguments.length!==3){cb=store;store=null;}
var serialized;if(typeof strOrObj==='string'){serialized=jsonParse(strOrObj);if(serialized instanceof Error){return cb(serialized);}}else{serialized=strOrObj;}
var jar=new CookieJar(store,serialized.rejectPublicSuffixes);jar._importCookies(serialized,function(err){if(err){return cb(err);}
cb(null,jar);});};CookieJar.deserializeSync=function(strOrObj,store){var serialized=typeof strOrObj==='string'?JSON.parse(strOrObj):strOrObj;var jar=new CookieJar(store,serialized.rejectPublicSuffixes);if(!jar.store.synchronous){throw new Error('CookieJar store is not synchronous; use async API instead.');}
jar._importCookiesSync(serialized);return jar;};CookieJar.fromJSON=CookieJar.deserializeSync;CAN_BE_SYNC.push('clone');CookieJar.prototype.clone=function(newStore,cb){if(arguments.length===1){cb=newStore;newStore=null;}
this.serialize(function(err,serialized){if(err){return cb(err);}
CookieJar.deserialize(newStore,serialized,cb);});};function syncWrap(method){return function(){if(!this.store.synchronous){throw new Error('CookieJar store is not synchronous; use async API instead.');}
var args=Array.prototype.slice.call(arguments);var syncErr,syncResult;args.push(function syncCb(err,result){syncErr=err;syncResult=result;});this[method].apply(this,args);if(syncErr){throw syncErr;}
return syncResult;};}
CAN_BE_SYNC.forEach(function(method){CookieJar.prototype[method+'Sync']=syncWrap(method);});exports.CookieJar=CookieJar;exports.Cookie=Cookie;exports.Store=Store;exports.MemoryCookieStore=MemoryCookieStore;exports.parseDate=parseDate;exports.formatDate=formatDate;exports.parse=parse;exports.fromJSON=fromJSON;exports.domainMatch=domainMatch;exports.defaultPath=defaultPath;exports.pathMatch=pathMatch;exports.getPublicSuffix=pubsuffix.getPublicSuffix;exports.cookieCompare=cookieCompare;exports.permuteDomain=__webpack_require__(369).permuteDomain;exports.permutePath=permutePath;exports.canonicalDomain=canonicalDomain;}),(function(module,exports,__webpack_require__){"use strict";/*!
* Copyright (c) 2018, Salesforce.com, Inc.
* All rights reserved.
*
* Redistribution and use in source and binary forms, with or without
* modification, are permitted provided that the following conditions are met:
*
* 1. Redistributions of source code must retain the above copyright notice,
* this list of conditions and the following disclaimer.
*
* 2. Redistributions in binary form must reproduce the above copyright notice,
* this list of conditions and the following disclaimer in the documentation
* and/or other materials provided with the distribution.
*
* 3. Neither the name of Salesforce.com nor the names of its contributors may
* be used to endorse or promote products derived from this software without
* specific prior written permission.
*
* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
* AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
* IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
* ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
* LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
* CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
* SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
* INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
* CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
* ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
* POSSIBILITY OF SUCH DAMAGE.
*/var psl=__webpack_require__(801);function getPublicSuffix(domain){return psl.get(domain);}
exports.getPublicSuffix=getPublicSuffix;}),(function(module,exports,__webpack_require__){"use strict";/*!
* Copyright (c) 2015, Salesforce.com, Inc.
* All rights reserved.
*
* Redistribution and use in source and binary forms, with or without
* modification, are permitted provided that the following conditions are met:
*
* 1. Redistributions of source code must retain the above copyright notice,
* this list of conditions and the following disclaimer.
*
* 2. Redistributions in binary form must reproduce the above copyright notice,
* this list of conditions and the following disclaimer in the documentation
* and/or other materials provided with the distribution.
*
* 3. Neither the name of Salesforce.com nor the names of its contributors may
* be used to endorse or promote products derived from this software without
* specific prior written permission.
*
* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
* AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
* IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
* ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
* LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
* CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
* SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
* INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
* CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
* ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
* POSSIBILITY OF SUCH DAMAGE.
*/function Store(){}
exports.Store=Store;Store.prototype.synchronous=false;Store.prototype.findCookie=function(domain,path,key,cb){throw new Error('findCookie is not implemented');};Store.prototype.findCookies=function(domain,path,cb){throw new Error('findCookies is not implemented');};Store.prototype.putCookie=function(cookie,cb){throw new Error('putCookie is not implemented');};Store.prototype.updateCookie=function(oldCookie,newCookie,cb){throw new Error('updateCookie is not implemented');};Store.prototype.removeCookie=function(domain,path,key,cb){throw new Error('removeCookie is not implemented');};Store.prototype.removeCookies=function(domain,path,cb){throw new Error('removeCookies is not implemented');};Store.prototype.getAllCookies=function(cb){throw new Error('getAllCookies is not implemented (therefore jar cannot be serialized)');};}),(function(module,exports,__webpack_require__){"use strict";/*!
* Copyright (c) 2015, Salesforce.com, Inc.
* All rights reserved.
*
* Redistribution and use in source and binary forms, with or without
* modification, are permitted provided that the following conditions are met:
*
* 1. Redistributions of source code must retain the above copyright notice,
* this list of conditions and the following disclaimer.
*
* 2. Redistributions in binary form must reproduce the above copyright notice,
* this list of conditions and the following disclaimer in the documentation
* and/or other materials provided with the distribution.
*
* 3. Neither the name of Salesforce.com nor the names of its contributors may
* be used to endorse or promote products derived from this software without
* specific prior written permission.
*
* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
* AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
* IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
* ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
* LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
* CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
* SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
* INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
* CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
* ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
* POSSIBILITY OF SUCH DAMAGE.
*/var pubsuffix=__webpack_require__(367);function permuteDomain(domain){var pubSuf=pubsuffix.getPublicSuffix(domain);if(!pubSuf){return null;}
if(pubSuf==domain){return[domain];}
var prefix=domain.slice(0,-(pubSuf.length+1));var parts=prefix.split('.').reverse();var cur=pubSuf;var permutations=[cur];while(parts.length){cur=parts.shift()+'.'+cur;permutations.push(cur);}
return permutations;}
exports.permuteDomain=permuteDomain;}),(function(module,exports,__webpack_require__){"use strict";/*!
* Copyright (c) 2015, Salesforce.com, Inc.
* All rights reserved.
*
* Redistribution and use in source and binary forms, with or without
* modification, are permitted provided that the following conditions are met:
*
* 1. Redistributions of source code must retain the above copyright notice,
* this list of conditions and the following disclaimer.
*
* 2. Redistributions in binary form must reproduce the above copyright notice,
* this list of conditions and the following disclaimer in the documentation
* and/or other materials provided with the distribution.
*
* 3. Neither the name of Salesforce.com nor the names of its contributors may
* be used to endorse or promote products derived from this software without
* specific prior written permission.
*
* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
* AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
* IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
* ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
* LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
* CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
* SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
* INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
* CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
* ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
* POSSIBILITY OF SUCH DAMAGE.
*/function pathMatch(reqPath,cookiePath){if(cookiePath===reqPath){return true;}
var idx=reqPath.indexOf(cookiePath);if(idx===0){if(cookiePath.substr(-1)==="/"){return true;}
if(reqPath.substr(cookiePath.length,1)==="/"){return true;}}
return false;}
exports.pathMatch=pathMatch;}),(function(module,exports,__webpack_require__){(function(global){exports.fetch=isFunction(global.fetch)&&isFunction(global.ReadableStream)
exports.writableStream=isFunction(global.WritableStream)
exports.abortController=isFunction(global.AbortController)
exports.blobConstructor=false
try{new Blob([new ArrayBuffer(1)])
exports.blobConstructor=true}catch(e){}
var xhr
function getXHR(){if(xhr!==undefined)return xhr
if(global.XMLHttpRequest){xhr=new global.XMLHttpRequest()
try{xhr.open('GET',global.XDomainRequest?'/':'https://example.com')}catch(e){xhr=null}}else{xhr=null}
return xhr}
function checkTypeSupport(type){var xhr=getXHR()
if(!xhr)return false
try{xhr.responseType=type
return xhr.responseType===type}catch(e){}
return false}
var haveArrayBuffer=typeof global.ArrayBuffer!=='undefined'
var haveSlice=haveArrayBuffer&&isFunction(global.ArrayBuffer.prototype.slice)
exports.arraybuffer=exports.fetch||(haveArrayBuffer&&checkTypeSupport('arraybuffer'))
exports.msstream=!exports.fetch&&haveSlice&&checkTypeSupport('ms-stream')
exports.mozchunkedarraybuffer=!exports.fetch&&haveArrayBuffer&&checkTypeSupport('moz-chunked-arraybuffer')
exports.overrideMimeType=exports.fetch||(getXHR()?isFunction(getXHR().overrideMimeType):false)
exports.vbArray=isFunction(global.VBArray)
function isFunction(value){return typeof value==='function'}
xhr=null}.call(exports,__webpack_require__(10)))}),(function(module,exports,__webpack_require__){(function(process,Buffer,global){var capability=__webpack_require__(371)
var inherits=__webpack_require__(7)
var stream=__webpack_require__(127)
var rStates=exports.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4}
var IncomingMessage=exports.IncomingMessage=function(xhr,response,mode,fetchTimer){var self=this
stream.Readable.call(self)
self._mode=mode
self.headers={}
self.rawHeaders=[]
self.trailers={}
self.rawTrailers=[]
self.on('end',function(){process.nextTick(function(){self.emit('close')})})
if(mode==='fetch'){self._fetchResponse=response
self.url=response.url
self.statusCode=response.status
self.statusMessage=response.statusText
response.headers.forEach(function(header,key){self.headers[key.toLowerCase()]=header
self.rawHeaders.push(key,header)})
if(capability.writableStream){var writable=new WritableStream({write:function(chunk){return new Promise(function(resolve,reject){if(self._destroyed){reject()}else if(self.push(new Buffer(chunk))){resolve()}else{self._resumeFetch=resolve}})},close:function(){global.clearTimeout(fetchTimer)
if(!self._destroyed)
self.push(null)},abort:function(err){if(!self._destroyed)
self.emit('error',err)}})
try{response.body.pipeTo(writable).catch(function(err){global.clearTimeout(fetchTimer)
if(!self._destroyed)
self.emit('error',err)})
return}catch(e){}}
var reader=response.body.getReader()
function read(){reader.read().then(function(result){if(self._destroyed)
return
if(result.done){global.clearTimeout(fetchTimer)
self.push(null)
return}
self.push(new Buffer(result.value))
read()}).catch(function(err){global.clearTimeout(fetchTimer)
if(!self._destroyed)
self.emit('error',err)})}
read()}else{self._xhr=xhr
self._pos=0
self.url=xhr.responseURL
self.statusCode=xhr.status
self.statusMessage=xhr.statusText
var headers=xhr.getAllResponseHeaders().split(/\r?\n/)
headers.forEach(function(header){var matches=header.match(/^([^:]+):\s*(.*)/)
if(matches){var key=matches[1].toLowerCase()
if(key==='set-cookie'){if(self.headers[key]===undefined){self.headers[key]=[]}
self.headers[key].push(matches[2])}else if(self.headers[key]!==undefined){self.headers[key]+=', '+matches[2]}else{self.headers[key]=matches[2]}
self.rawHeaders.push(matches[1],matches[2])}})
self._charset='x-user-defined'
if(!capability.overrideMimeType){var mimeType=self.rawHeaders['mime-type']
if(mimeType){var charsetMatch=mimeType.match(/;\s*charset=([^;])(;|$)/)
if(charsetMatch){self._charset=charsetMatch[1].toLowerCase()}}
if(!self._charset)
self._charset='utf-8'}}}
inherits(IncomingMessage,stream.Readable)
IncomingMessage.prototype._read=function(){var self=this
var resolve=self._resumeFetch
if(resolve){self._resumeFetch=null
resolve()}}
IncomingMessage.prototype._onXHRProgress=function(){var self=this
var xhr=self._xhr
var response=null
switch(self._mode){case 'text:vbarray':if(xhr.readyState!==rStates.DONE)
break
try{response=new global.VBArray(xhr.responseBody).toArray()}catch(e){}
if(response!==null){self.push(new Buffer(response))
break}
case 'text':try{response=xhr.responseText}catch(e){self._mode='text:vbarray'
break}
if(response.length>self._pos){var newData=response.substr(self._pos)
if(self._charset==='x-user-defined'){var buffer=new Buffer(newData.length)
for(var i=0;i<newData.length;i++)
buffer[i]=newData.charCodeAt(i)&0xff
self.push(buffer)}else{self.push(newData,self._charset)}
self._pos=response.length}
break
case 'arraybuffer':if(xhr.readyState!==rStates.DONE||!xhr.response)
break
response=xhr.response
self.push(new Buffer(new Uint8Array(response)))
break
case 'moz-chunked-arraybuffer':response=xhr.response
if(xhr.readyState!==rStates.LOADING||!response)
break
self.push(new Buffer(new Uint8Array(response)))
break
case 'ms-stream':response=xhr.response
if(xhr.readyState!==rStates.LOADING)
break
var reader=new global.MSStreamReader()
reader.onprogress=function(){if(reader.result.byteLength>self._pos){self.push(new Buffer(new Uint8Array(reader.result.slice(self._pos))))
self._pos=reader.result.byteLength}}
reader.onload=function(){self.push(null)}
reader.readAsArrayBuffer(response)
break}
if(self._xhr.readyState===rStates.DONE&&self._mode!=='ms-stream'){self.push(null)}}}.call(exports,__webpack_require__(20),__webpack_require__(1).Buffer,__webpack_require__(10)))}),(function(module,exports,__webpack_require__){"use strict";(function(process){var Buffer=__webpack_require__(1).Buffer;var Transform=__webpack_require__(67).Transform;var binding=__webpack_require__(811);var util=__webpack_require__(25);var assert=__webpack_require__(71).ok;var kMaxLength=__webpack_require__(1).kMaxLength;var kRangeErrorMessage='Cannot create final Buffer. It would be larger '+'than 0x'+kMaxLength.toString(16)+' bytes';binding.Z_MIN_WINDOWBITS=8;binding.Z_MAX_WINDOWBITS=15;binding.Z_DEFAULT_WINDOWBITS=15;binding.Z_MIN_CHUNK=64;binding.Z_MAX_CHUNK=Infinity;binding.Z_DEFAULT_CHUNK=16*1024;binding.Z_MIN_MEMLEVEL=1;binding.Z_MAX_MEMLEVEL=9;binding.Z_DEFAULT_MEMLEVEL=8;binding.Z_MIN_LEVEL=-1;binding.Z_MAX_LEVEL=9;binding.Z_DEFAULT_LEVEL=binding.Z_DEFAULT_COMPRESSION;var bkeys=Object.keys(binding);for(var bk=0;bk<bkeys.length;bk++){var bkey=bkeys[bk];if(bkey.match(/^Z/)){Object.defineProperty(exports,bkey,{enumerable:true,value:binding[bkey],writable:false});}}
var codes={Z_OK:binding.Z_OK,Z_STREAM_END:binding.Z_STREAM_END,Z_NEED_DICT:binding.Z_NEED_DICT,Z_ERRNO:binding.Z_ERRNO,Z_STREAM_ERROR:binding.Z_STREAM_ERROR,Z_DATA_ERROR:binding.Z_DATA_ERROR,Z_MEM_ERROR:binding.Z_MEM_ERROR,Z_BUF_ERROR:binding.Z_BUF_ERROR,Z_VERSION_ERROR:binding.Z_VERSION_ERROR};var ckeys=Object.keys(codes);for(var ck=0;ck<ckeys.length;ck++){var ckey=ckeys[ck];codes[codes[ckey]]=ckey;}
Object.defineProperty(exports,'codes',{enumerable:true,value:Object.freeze(codes),writable:false});exports.Deflate=Deflate;exports.Inflate=Inflate;exports.Gzip=Gzip;exports.Gunzip=Gunzip;exports.DeflateRaw=DeflateRaw;exports.InflateRaw=InflateRaw;exports.Unzip=Unzip;exports.createDeflate=function(o){return new Deflate(o);};exports.createInflate=function(o){return new Inflate(o);};exports.createDeflateRaw=function(o){return new DeflateRaw(o);};exports.createInflateRaw=function(o){return new InflateRaw(o);};exports.createGzip=function(o){return new Gzip(o);};exports.createGunzip=function(o){return new Gunzip(o);};exports.createUnzip=function(o){return new Unzip(o);};exports.deflate=function(buffer,opts,callback){if(typeof opts==='function'){callback=opts;opts={};}
return zlibBuffer(new Deflate(opts),buffer,callback);};exports.deflateSync=function(buffer,opts){return zlibBufferSync(new Deflate(opts),buffer);};exports.gzip=function(buffer,opts,callback){if(typeof opts==='function'){callback=opts;opts={};}
return zlibBuffer(new Gzip(opts),buffer,callback);};exports.gzipSync=function(buffer,opts){return zlibBufferSync(new Gzip(opts),buffer);};exports.deflateRaw=function(buffer,opts,callback){if(typeof opts==='function'){callback=opts;opts={};}
return zlibBuffer(new DeflateRaw(opts),buffer,callback);};exports.deflateRawSync=function(buffer,opts){return zlibBufferSync(new DeflateRaw(opts),buffer);};exports.unzip=function(buffer,opts,callback){if(typeof opts==='function'){callback=opts;opts={};}
return zlibBuffer(new Unzip(opts),buffer,callback);};exports.unzipSync=function(buffer,opts){return zlibBufferSync(new Unzip(opts),buffer);};exports.inflate=function(buffer,opts,callback){if(typeof opts==='function'){callback=opts;opts={};}
return zlibBuffer(new Inflate(opts),buffer,callback);};exports.inflateSync=function(buffer,opts){return zlibBufferSync(new Inflate(opts),buffer);};exports.gunzip=function(buffer,opts,callback){if(typeof opts==='function'){callback=opts;opts={};}
return zlibBuffer(new Gunzip(opts),buffer,callback);};exports.gunzipSync=function(buffer,opts){return zlibBufferSync(new Gunzip(opts),buffer);};exports.inflateRaw=function(buffer,opts,callback){if(typeof opts==='function'){callback=opts;opts={};}
return zlibBuffer(new InflateRaw(opts),buffer,callback);};exports.inflateRawSync=function(buffer,opts){return zlibBufferSync(new InflateRaw(opts),buffer);};function zlibBuffer(engine,buffer,callback){var buffers=[];var nread=0;engine.on('error',onError);engine.on('end',onEnd);engine.end(buffer);flow();function flow(){var chunk;while(null!==(chunk=engine.read())){buffers.push(chunk);nread+=chunk.length;}
engine.once('readable',flow);}
function onError(err){engine.removeListener('end',onEnd);engine.removeListener('readable',flow);callback(err);}
function onEnd(){var buf;var err=null;if(nread>=kMaxLength){err=new RangeError(kRangeErrorMessage);}else{buf=Buffer.concat(buffers,nread);}
buffers=[];engine.close();callback(err,buf);}}
function zlibBufferSync(engine,buffer){if(typeof buffer==='string')buffer=Buffer.from(buffer);if(!Buffer.isBuffer(buffer))throw new TypeError('Not a string or buffer');var flushFlag=engine._finishFlushFlag;return engine._processChunk(buffer,flushFlag);}
function Deflate(opts){if(!(this instanceof Deflate))return new Deflate(opts);Zlib.call(this,opts,binding.DEFLATE);}
function Inflate(opts){if(!(this instanceof Inflate))return new Inflate(opts);Zlib.call(this,opts,binding.INFLATE);}
function Gzip(opts){if(!(this instanceof Gzip))return new Gzip(opts);Zlib.call(this,opts,binding.GZIP);}
function Gunzip(opts){if(!(this instanceof Gunzip))return new Gunzip(opts);Zlib.call(this,opts,binding.GUNZIP);}
function DeflateRaw(opts){if(!(this instanceof DeflateRaw))return new DeflateRaw(opts);Zlib.call(this,opts,binding.DEFLATERAW);}
function InflateRaw(opts){if(!(this instanceof InflateRaw))return new InflateRaw(opts);Zlib.call(this,opts,binding.INFLATERAW);}
function Unzip(opts){if(!(this instanceof Unzip))return new Unzip(opts);Zlib.call(this,opts,binding.UNZIP);}
function isValidFlushFlag(flag){return flag===binding.Z_NO_FLUSH||flag===binding.Z_PARTIAL_FLUSH||flag===binding.Z_SYNC_FLUSH||flag===binding.Z_FULL_FLUSH||flag===binding.Z_FINISH||flag===binding.Z_BLOCK;}
function Zlib(opts,mode){var _this=this;this._opts=opts=opts||{};this._chunkSize=opts.chunkSize||exports.Z_DEFAULT_CHUNK;Transform.call(this,opts);if(opts.flush&&!isValidFlushFlag(opts.flush)){throw new Error('Invalid flush flag: '+opts.flush);}
if(opts.finishFlush&&!isValidFlushFlag(opts.finishFlush)){throw new Error('Invalid flush flag: '+opts.finishFlush);}
this._flushFlag=opts.flush||binding.Z_NO_FLUSH;this._finishFlushFlag=typeof opts.finishFlush!=='undefined'?opts.finishFlush:binding.Z_FINISH;if(opts.chunkSize){if(opts.chunkSize<exports.Z_MIN_CHUNK||opts.chunkSize>exports.Z_MAX_CHUNK){throw new Error('Invalid chunk size: '+opts.chunkSize);}}
if(opts.windowBits){if(opts.windowBits<exports.Z_MIN_WINDOWBITS||opts.windowBits>exports.Z_MAX_WINDOWBITS){throw new Error('Invalid windowBits: '+opts.windowBits);}}
if(opts.level){if(opts.level<exports.Z_MIN_LEVEL||opts.level>exports.Z_MAX_LEVEL){throw new Error('Invalid compression level: '+opts.level);}}
if(opts.memLevel){if(opts.memLevel<exports.Z_MIN_MEMLEVEL||opts.memLevel>exports.Z_MAX_MEMLEVEL){throw new Error('Invalid memLevel: '+opts.memLevel);}}
if(opts.strategy){if(opts.strategy!=exports.Z_FILTERED&&opts.strategy!=exports.Z_HUFFMAN_ONLY&&opts.strategy!=exports.Z_RLE&&opts.strategy!=exports.Z_FIXED&&opts.strategy!=exports.Z_DEFAULT_STRATEGY){throw new Error('Invalid strategy: '+opts.strategy);}}
if(opts.dictionary){if(!Buffer.isBuffer(opts.dictionary)){throw new Error('Invalid dictionary: it should be a Buffer instance');}}
this._handle=new binding.Zlib(mode);var self=this;this._hadError=false;this._handle.onerror=function(message,errno){_close(self);self._hadError=true;var error=new Error(message);error.errno=errno;error.code=exports.codes[errno];self.emit('error',error);};var level=exports.Z_DEFAULT_COMPRESSION;if(typeof opts.level==='number')level=opts.level;var strategy=exports.Z_DEFAULT_STRATEGY;if(typeof opts.strategy==='number')strategy=opts.strategy;this._handle.init(opts.windowBits||exports.Z_DEFAULT_WINDOWBITS,level,opts.memLevel||exports.Z_DEFAULT_MEMLEVEL,strategy,opts.dictionary);this._buffer=Buffer.allocUnsafe(this._chunkSize);this._offset=0;this._level=level;this._strategy=strategy;this.once('end',this.close);Object.defineProperty(this,'_closed',{get:function(){return!_this._handle;},configurable:true,enumerable:true});}
util.inherits(Zlib,Transform);Zlib.prototype.params=function(level,strategy,callback){if(level<exports.Z_MIN_LEVEL||level>exports.Z_MAX_LEVEL){throw new RangeError('Invalid compression level: '+level);}
if(strategy!=exports.Z_FILTERED&&strategy!=exports.Z_HUFFMAN_ONLY&&strategy!=exports.Z_RLE&&strategy!=exports.Z_FIXED&&strategy!=exports.Z_DEFAULT_STRATEGY){throw new TypeError('Invalid strategy: '+strategy);}
if(this._level!==level||this._strategy!==strategy){var self=this;this.flush(binding.Z_SYNC_FLUSH,function(){assert(self._handle,'zlib binding closed');self._handle.params(level,strategy);if(!self._hadError){self._level=level;self._strategy=strategy;if(callback)callback();}});}else{process.nextTick(callback);}};Zlib.prototype.reset=function(){assert(this._handle,'zlib binding closed');return this._handle.reset();};Zlib.prototype._flush=function(callback){this._transform(Buffer.alloc(0),'',callback);};Zlib.prototype.flush=function(kind,callback){var _this2=this;var ws=this._writableState;if(typeof kind==='function'||kind===undefined&&!callback){callback=kind;kind=binding.Z_FULL_FLUSH;}
if(ws.ended){if(callback)process.nextTick(callback);}else if(ws.ending){if(callback)this.once('end',callback);}else if(ws.needDrain){if(callback){this.once('drain',function(){return _this2.flush(kind,callback);});}}else{this._flushFlag=kind;this.write(Buffer.alloc(0),'',callback);}};Zlib.prototype.close=function(callback){_close(this,callback);process.nextTick(emitCloseNT,this);};function _close(engine,callback){if(callback)process.nextTick(callback);if(!engine._handle)return;engine._handle.close();engine._handle=null;}
function emitCloseNT(self){self.emit('close');}
Zlib.prototype._transform=function(chunk,encoding,cb){var flushFlag;var ws=this._writableState;var ending=ws.ending||ws.ended;var last=ending&&(!chunk||ws.length===chunk.length);if(chunk!==null&&!Buffer.isBuffer(chunk))return cb(new Error('invalid input'));if(!this._handle)return cb(new Error('zlib binding closed'));if(last)flushFlag=this._finishFlushFlag;else{flushFlag=this._flushFlag;if(chunk.length>=ws.length){this._flushFlag=this._opts.flush||binding.Z_NO_FLUSH;}}
this._processChunk(chunk,flushFlag,cb);};Zlib.prototype._processChunk=function(chunk,flushFlag,cb){var availInBefore=chunk&&chunk.length;var availOutBefore=this._chunkSize-this._offset;var inOff=0;var self=this;var async=typeof cb==='function';if(!async){var buffers=[];var nread=0;var error;this.on('error',function(er){error=er;});assert(this._handle,'zlib binding closed');do{var res=this._handle.writeSync(flushFlag,chunk,inOff,availInBefore,this._buffer,this._offset,availOutBefore);}while(!this._hadError&&callback(res[0],res[1]));if(this._hadError){throw error;}
if(nread>=kMaxLength){_close(this);throw new RangeError(kRangeErrorMessage);}
var buf=Buffer.concat(buffers,nread);_close(this);return buf;}
assert(this._handle,'zlib binding closed');var req=this._handle.write(flushFlag,chunk,inOff,availInBefore,this._buffer,this._offset,availOutBefore);req.buffer=chunk;req.callback=callback;function callback(availInAfter,availOutAfter){if(this){this.buffer=null;this.callback=null;}
if(self._hadError)return;var have=availOutBefore-availOutAfter;assert(have>=0,'have should not go down');if(have>0){var out=self._buffer.slice(self._offset,self._offset+have);self._offset+=have;if(async){self.push(out);}else{buffers.push(out);nread+=out.length;}}
if(availOutAfter===0||self._offset>=self._chunkSize){availOutBefore=self._chunkSize;self._offset=0;self._buffer=Buffer.allocUnsafe(self._chunkSize);}
if(availOutAfter===0){inOff+=availInBefore-availInAfter;availInBefore=availInAfter;if(!async)return true;var newReq=self._handle.write(flushFlag,chunk,inOff,availInBefore,self._buffer,self._offset,self._chunkSize);newReq.callback=callback;newReq.buffer=chunk;return;}
if(!async)return false;cb();}};util.inherits(Deflate,Zlib);util.inherits(Inflate,Zlib);util.inherits(Gzip,Zlib);util.inherits(Gunzip,Zlib);util.inherits(DeflateRaw,Zlib);util.inherits(InflateRaw,Zlib);util.inherits(Unzip,Zlib);}.call(exports,__webpack_require__(20)))}),(function(module,exports,__webpack_require__){"use strict";function adler32(adler,buf,len,pos){var s1=(adler&0xffff)|0,s2=((adler>>>16)&0xffff)|0,n=0;while(len!==0){n=len>2000?2000:len;len-=n;do{s1=(s1+buf[pos++])|0;s2=(s2+s1)|0;}while(--n);s1%=65521;s2%=65521;}
return(s1|(s2<<16))|0;}
module.exports=adler32;}),(function(module,exports,__webpack_require__){"use strict";function makeTable(){var c,table=[];for(var n=0;n<256;n++){c=n;for(var k=0;k<8;k++){c=((c&1)?(0xEDB88320^(c>>>1)):(c>>>1));}
table[n]=c;}
return table;}
var crcTable=makeTable();function crc32(crc,buf,len,pos){var t=crcTable,end=pos+len;crc^=-1;for(var i=pos;i<end;i++){crc=(crc>>>8)^t[(crc^buf[i])&0xFF];}
return(crc^(-1));}
module.exports=crc32;}),(function(module,exports,__webpack_require__){module.exports={Verifier:Verifier,Signer:Signer};var nacl=__webpack_require__(173);var stream=__webpack_require__(67);var util=__webpack_require__(25);var assert=__webpack_require__(15);var Buffer=__webpack_require__(21).Buffer;var Signature=__webpack_require__(78);function Verifier(key,hashAlgo){if(hashAlgo.toLowerCase()!=='sha512')
throw(new Error('ED25519 only supports the use of '+
'SHA-512 hashes'));this.key=key;this.chunks=[];stream.Writable.call(this,{});}
util.inherits(Verifier,stream.Writable);Verifier.prototype._write=function(chunk,enc,cb){this.chunks.push(chunk);cb();};Verifier.prototype.update=function(chunk){if(typeof(chunk)==='string')
chunk=Buffer.from(chunk,'binary');this.chunks.push(chunk);};Verifier.prototype.verify=function(signature,fmt){var sig;if(Signature.isSignature(signature,[2,0])){if(signature.type!=='ed25519')
return(false);sig=signature.toBuffer('raw');}else if(typeof(signature)==='string'){sig=Buffer.from(signature,'base64');}else if(Signature.isSignature(signature,[1,0])){throw(new Error('signature was created by too old '+
'a version of sshpk and cannot be verified'));}
assert.buffer(sig);return(nacl.sign.detached.verify(new Uint8Array(Buffer.concat(this.chunks)),new Uint8Array(sig),new Uint8Array(this.key.part.A.data)));};function Signer(key,hashAlgo){if(hashAlgo.toLowerCase()!=='sha512')
throw(new Error('ED25519 only supports the use of '+
'SHA-512 hashes'));this.key=key;this.chunks=[];stream.Writable.call(this,{});}
util.inherits(Signer,stream.Writable);Signer.prototype._write=function(chunk,enc,cb){this.chunks.push(chunk);cb();};Signer.prototype.update=function(chunk){if(typeof(chunk)==='string')
chunk=Buffer.from(chunk,'binary');this.chunks.push(chunk);};Signer.prototype.sign=function(){var sig=nacl.sign.detached(new Uint8Array(Buffer.concat(this.chunks)),new Uint8Array(Buffer.concat([this.key.part.k.data,this.key.part.A.data])));var sigBuf=Buffer.from(sig);var sigObj=Signature.parse(sigBuf,'ed25519','raw');sigObj.hashAlgorithm='sha512';return(sigObj);};}),(function(module,exports,__webpack_require__){module.exports={read:read,write:write};var assert=__webpack_require__(15);var Buffer=__webpack_require__(21).Buffer;var utils=__webpack_require__(34);var Key=__webpack_require__(33);var PrivateKey=__webpack_require__(38);var pem=__webpack_require__(88);var ssh=__webpack_require__(379);var rfc4253=__webpack_require__(89);var dnssec=__webpack_require__(244);var putty=__webpack_require__(380);var DNSSEC_PRIVKEY_HEADER_PREFIX='Private-key-format: v1';function read(buf,options){if(typeof(buf)==='string'){if(buf.trim().match(/^[-]+[ ]*BEGIN/))
return(pem.read(buf,options));if(buf.match(/^\s*ssh-[a-z]/))
return(ssh.read(buf,options));if(buf.match(/^\s*ecdsa-/))
return(ssh.read(buf,options));if(buf.match(/^putty-user-key-file-2:/i))
return(putty.read(buf,options));if(findDNSSECHeader(buf))
return(dnssec.read(buf,options));buf=Buffer.from(buf,'binary');}else{assert.buffer(buf);if(findPEMHeader(buf))
return(pem.read(buf,options));if(findSSHHeader(buf))
return(ssh.read(buf,options));if(findPuTTYHeader(buf))
return(putty.read(buf,options));if(findDNSSECHeader(buf))
return(dnssec.read(buf,options));}
if(buf.readUInt32BE(0)<buf.length)
return(rfc4253.read(buf,options));throw(new Error('Failed to auto-detect format of key'));}
function findPuTTYHeader(buf){var offset=0;while(offset<buf.length&&(buf[offset]===32||buf[offset]===10||buf[offset]===9))
++offset;if(offset+22<=buf.length&&buf.slice(offset,offset+22).toString('ascii').toLowerCase()==='putty-user-key-file-2:')
return(true);return(false);}
function findSSHHeader(buf){var offset=0;while(offset<buf.length&&(buf[offset]===32||buf[offset]===10||buf[offset]===9))
++offset;if(offset+4<=buf.length&&buf.slice(offset,offset+4).toString('ascii')==='ssh-')
return(true);if(offset+6<=buf.length&&buf.slice(offset,offset+6).toString('ascii')==='ecdsa-')
return(true);return(false);}
function findPEMHeader(buf){var offset=0;while(offset<buf.length&&(buf[offset]===32||buf[offset]===10))
++offset;if(buf[offset]!==45)
return(false);while(offset<buf.length&&(buf[offset]===45))
++offset;while(offset<buf.length&&(buf[offset]===32))
++offset;if(offset+5>buf.length||buf.slice(offset,offset+5).toString('ascii')!=='BEGIN')
return(false);return(true);}
function findDNSSECHeader(buf){if(buf.length<=DNSSEC_PRIVKEY_HEADER_PREFIX.length)
return(false);var headerCheck=buf.slice(0,DNSSEC_PRIVKEY_HEADER_PREFIX.length);if(headerCheck.toString('ascii')===DNSSEC_PRIVKEY_HEADER_PREFIX)
return(true);if(typeof(buf)!=='string'){buf=buf.toString('ascii');}
var lines=buf.split('\n');var line=0;while(lines[line].match(/^\;/))
line++;if(lines[line].toString('ascii').match(/\. IN KEY /))
return(true);if(lines[line].toString('ascii').match(/\. IN DNSKEY /))
return(true);return(false);}
function write(key,options){throw(new Error('"auto" format cannot be used for writing'));}}),(function(module,exports,__webpack_require__){"use strict";var crypto_hash_sha512=__webpack_require__(831).lowlevel.crypto_hash;var BLF_J=0;var Blowfish=function(){this.S=[new Uint32Array([0xd1310ba6,0x98dfb5ac,0x2ffd72db,0xd01adfb7,0xb8e1afed,0x6a267e96,0xba7c9045,0xf12c7f99,0x24a19947,0xb3916cf7,0x0801f2e2,0x858efc16,0x636920d8,0x71574e69,0xa458fea3,0xf4933d7e,0x0d95748f,0x728eb658,0x718bcd58,0x82154aee,0x7b54a41d,0xc25a59b5,0x9c30d539,0x2af26013,0xc5d1b023,0x286085f0,0xca417918,0xb8db38ef,0x8e79dcb0,0x603a180e,0x6c9e0e8b,0xb01e8a3e,0xd71577c1,0xbd314b27,0x78af2fda,0x55605c60,0xe65525f3,0xaa55ab94,0x57489862,0x63e81440,0x55ca396a,0x2aab10b6,0xb4cc5c34,0x1141e8ce,0xa15486af,0x7c72e993,0xb3ee1411,0x636fbc2a,0x2ba9c55d,0x741831f6,0xce5c3e16,0x9b87931e,0xafd6ba33,0x6c24cf5c,0x7a325381,0x28958677,0x3b8f4898,0x6b4bb9af,0xc4bfe81b,0x66282193,0x61d809cc,0xfb21a991,0x487cac60,0x5dec8032,0xef845d5d,0xe98575b1,0xdc262302,0xeb651b88,0x23893e81,0xd396acc5,0x0f6d6ff3,0x83f44239,0x2e0b4482,0xa4842004,0x69c8f04a,0x9e1f9b5e,0x21c66842,0xf6e96c9a,0x670c9c61,0xabd388f0,0x6a51a0d2,0xd8542f68,0x960fa728,0xab5133a3,0x6eef0b6c,0x137a3be4,0xba3bf050,0x7efb2a98,0xa1f1651d,0x39af0176,0x66ca593e,0x82430e88,0x8cee8619,0x456f9fb4,0x7d84a5c3,0x3b8b5ebe,0xe06f75d8,0x85c12073,0x401a449f,0x56c16aa6,0x4ed3aa62,0x363f7706,0x1bfedf72,0x429b023d,0x37d0d724,0xd00a1248,0xdb0fead3,0x49f1c09b,0x075372c9,0x80991b7b,0x25d479d8,0xf6e8def7,0xe3fe501a,0xb6794c3b,0x976ce0bd,0x04c006ba,0xc1a94fb6,0x409f60c4,0x5e5c9ec2,0x196a2463,0x68fb6faf,0x3e6c53b5,0x1339b2eb,0x3b52ec6f,0x6dfc511f,0x9b30952c,0xcc814544,0xaf5ebd09,0xbee3d004,0xde334afd,0x660f2807,0x192e4bb3,0xc0cba857,0x45c8740f,0xd20b5f39,0xb9d3fbdb,0x5579c0bd,0x1a60320a,0xd6a100c6,0x402c7279,0x679f25fe,0xfb1fa3cc,0x8ea5e9f8,0xdb3222f8,0x3c7516df,0xfd616b15,0x2f501ec8,0xad0552ab,0x323db5fa,0xfd238760,0x53317b48,0x3e00df82,0x9e5c57bb,0xca6f8ca0,0x1a87562e,0xdf1769db,0xd542a8f6,0x287effc3,0xac6732c6,0x8c4f5573,0x695b27b0,0xbbca58c8,0xe1ffa35d,0xb8f011a0,0x10fa3d98,0xfd2183b8,0x4afcb56c,0x2dd1d35b,0x9a53e479,0xb6f84565,0xd28e49bc,0x4bfb9790,0xe1ddf2da,0xa4cb7e33,0x62fb1341,0xcee4c6e8,0xef20cada,0x36774c01,0xd07e9efe,0x2bf11fb4,0x95dbda4d,0xae909198,0xeaad8e71,0x6b93d5a0,0xd08ed1d0,0xafc725e0,0x8e3c5b2f,0x8e7594b7,0x8ff6e2fb,0xf2122b64,0x8888b812,0x900df01c,0x4fad5ea0,0x688fc31c,0xd1cff191,0xb3a8c1ad,0x2f2f2218,0xbe0e1777,0xea752dfe,0x8b021fa1,0xe5a0cc0f,0xb56f74e8,0x18acf3d6,0xce89e299,0xb4a84fe0,0xfd13e0b7,0x7cc43b81,0xd2ada8d9,0x165fa266,0x80957705,0x93cc7314,0x211a1477,0xe6ad2065,0x77b5fa86,0xc75442f5,0xfb9d35cf,0xebcdaf0c,0x7b3e89a0,0xd6411bd3,0xae1e7e49,0x00250e2d,0x2071b35e,0x226800bb,0x57b8e0af,0x2464369b,0xf009b91e,0x5563911d,0x59dfa6aa,0x78c14389,0xd95a537f,0x207d5ba2,0x02e5b9c5,0x83260376,0x6295cfa9,0x11c81968,0x4e734a41,0xb3472dca,0x7b14a94a,0x1b510052,0x9a532915,0xd60f573f,0xbc9bc6e4,0x2b60a476,0x81e67400,0x08ba6fb5,0x571be91f,0xf296ec6b,0x2a0dd915,0xb6636521,0xe7b9f9b6,0xff34052e,0xc5855664,0x53b02d5d,0xa99f8fa1,0x08ba4799,0x6e85076a]),new Uint32Array([0x4b7a70e9,0xb5b32944,0xdb75092e,0xc4192623,0xad6ea6b0,0x49a7df7d,0x9cee60b8,0x8fedb266,0xecaa8c71,0x699a17ff,0x5664526c,0xc2b19ee1,0x193602a5,0x75094c29,0xa0591340,0xe4183a3e,0x3f54989a,0x5b429d65,0x6b8fe4d6,0x99f73fd6,0xa1d29c07,0xefe830f5,0x4d2d38e6,0xf0255dc1,0x4cdd2086,0x8470eb26,0x6382e9c6,0x021ecc5e,0x09686b3f,0x3ebaefc9,0x3c971814,0x6b6a70a1,0x687f3584,0x52a0e286,0xb79c5305,0xaa500737,0x3e07841c,0x7fdeae5c,0x8e7d44ec,0x5716f2b8,0xb03ada37,0xf0500c0d,0xf01c1f04,0x0200b3ff,0xae0cf51a,0x3cb574b2,0x25837a58,0xdc0921bd,0xd19113f9,0x7ca92ff6,0x94324773,0x22f54701,0x3ae5e581,0x37c2dadc,0xc8b57634,0x9af3dda7,0xa9446146,0x0fd0030e,0xecc8c73e,0xa4751e41,0xe238cd99,0x3bea0e2f,0x3280bba1,0x183eb331,0x4e548b38,0x4f6db908,0x6f420d03,0xf60a04bf,0x2cb81290,0x24977c79,0x5679b072,0xbcaf89af,0xde9a771f,0xd9930810,0xb38bae12,0xdccf3f2e,0x5512721f,0x2e6b7124,0x501adde6,0x9f84cd87,0x7a584718,0x7408da17,0xbc9f9abc,0xe94b7d8c,0xec7aec3a,0xdb851dfa,0x63094366,0xc464c3d2,0xef1c1847,0x3215d908,0xdd433b37,0x24c2ba16,0x12a14d43,0x2a65c451,0x50940002,0x133ae4dd,0x71dff89e,0x10314e55,0x81ac77d6,0x5f11199b,0x043556f1,0xd7a3c76b,0x3c11183b,0x5924a509,0xf28fe6ed,0x97f1fbfa,0x9ebabf2c,0x1e153c6e,0x86e34570,0xeae96fb1,0x860e5e0a,0x5a3e2ab3,0x771fe71c,0x4e3d06fa,0x2965dcb9,0x99e71d0f,0x803e89d6,0x5266c825,0x2e4cc978,0x9c10b36a,0xc6150eba,0x94e2ea78,0xa5fc3c53,0x1e0a2df4,0xf2f74ea7,0x361d2b3d,0x1939260f,0x19c27960,0x5223a708,0xf71312b6,0xebadfe6e,0xeac31f66,0xe3bc4595,0xa67bc883,0xb17f37d1,0x018cff28,0xc332ddef,0xbe6c5aa5,0x65582185,0x68ab9802,0xeecea50f,0xdb2f953b,0x2aef7dad,0x5b6e2f84,0x1521b628,0x29076170,0xecdd4775,0x619f1510,0x13cca830,0xeb61bd96,0x0334fe1e,0xaa0363cf,0xb5735c90,0x4c70a239,0xd59e9e0b,0xcbaade14,0xeecc86bc,0x60622ca7,0x9cab5cab,0xb2f3846e,0x648b1eaf,0x19bdf0ca,0xa02369b9,0x655abb50,0x40685a32,0x3c2ab4b3,0x319ee9d5,0xc021b8f7,0x9b540b19,0x875fa099,0x95f7997e,0x623d7da8,0xf837889a,0x97e32d77,0x11ed935f,0x16681281,0x0e358829,0xc7e61fd6,0x96dedfa1,0x7858ba99,0x57f584a5,0x1b227263,0x9b83c3ff,0x1ac24696,0xcdb30aeb,0x532e3054,0x8fd948e4,0x6dbc3128,0x58ebf2ef,0x34c6ffea,0xfe28ed61,0xee7c3c73,0x5d4a14d9,0xe864b7e3,0x42105d14,0x203e13e0,0x45eee2b6,0xa3aaabea,0xdb6c4f15,0xfacb4fd0,0xc742f442,0xef6abbb5,0x654f3b1d,0x41cd2105,0xd81e799e,0x86854dc7,0xe44b476a,0x3d816250,0xcf62a1f2,0x5b8d2646,0xfc8883a0,0xc1c7b6a3,0x7f1524c3,0x69cb7492,0x47848a0b,0x5692b285,0x095bbf00,0xad19489d,0x1462b174,0x23820e00,0x58428d2a,0x0c55f5ea,0x1dadf43e,0x233f7061,0x3372f092,0x8d937e41,0xd65fecf1,0x6c223bdb,0x7cde3759,0xcbee7460,0x4085f2a7,0xce77326e,0xa6078084,0x19f8509e,0xe8efd855,0x61d99735,0xa969a7aa,0xc50c06c2,0x5a04abfc,0x800bcadc,0x9e447a2e,0xc3453484,0xfdd56705,0x0e1e9ec9,0xdb73dbd3,0x105588cd,0x675fda79,0xe3674340,0xc5c43465,0x713e38d8,0x3d28f89e,0xf16dff20,0x153e21e7,0x8fb03d4a,0xe6e39f2b,0xdb83adf7]),new Uint32Array([0xe93d5a68,0x948140f7,0xf64c261c,0x94692934,0x411520f7,0x7602d4f7,0xbcf46b2e,0xd4a20068,0xd4082471,0x3320f46a,0x43b7d4b7,0x500061af,0x1e39f62e,0x97244546,0x14214f74,0xbf8b8840,0x4d95fc1d,0x96b591af,0x70f4ddd3,0x66a02f45,0xbfbc09ec,0x03bd9785,0x7fac6dd0,0x31cb8504,0x96eb27b3,0x55fd3941,0xda2547e6,0xabca0a9a,0x28507825,0x530429f4,0x0a2c86da,0xe9b66dfb,0x68dc1462,0xd7486900,0x680ec0a4,0x27a18dee,0x4f3ffea2,0xe887ad8c,0xb58ce006,0x7af4d6b6,0xaace1e7c,0xd3375fec,0xce78a399,0x406b2a42,0x20fe9e35,0xd9f385b9,0xee39d7ab,0x3b124e8b,0x1dc9faf7,0x4b6d1856,0x26a36631,0xeae397b2,0x3a6efa74,0xdd5b4332,0x6841e7f7,0xca7820fb,0xfb0af54e,0xd8feb397,0x454056ac,0xba489527,0x55533a3a,0x20838d87,0xfe6ba9b7,0xd096954b,0x55a867bc,0xa1159a58,0xcca92963,0x99e1db33,0xa62a4a56,0x3f3125f9,0x5ef47e1c,0x9029317c,0xfdf8e802,0x04272f70,0x80bb155c,0x05282ce3,0x95c11548,0xe4c66d22,0x48c1133f,0xc70f86dc,0x07f9c9ee,0x41041f0f,0x404779a4,0x5d886e17,0x325f51eb,0xd59bc0d1,0xf2bcc18f,0x41113564,0x257b7834,0x602a9c60,0xdff8e8a3,0x1f636c1b,0x0e12b4c2,0x02e1329e,0xaf664fd1,0xcad18115,0x6b2395e0,0x333e92e1,0x3b240b62,0xeebeb922,0x85b2a20e,0xe6ba0d99,0xde720c8c,0x2da2f728,0xd0127845,0x95b794fd,0x647d0862,0xe7ccf5f0,0x5449a36f,0x877d48fa,0xc39dfd27,0xf33e8d1e,0x0a476341,0x992eff74,0x3a6f6eab,0xf4f8fd37,0xa812dc60,0xa1ebddf8,0x991be14c,0xdb6e6b0d,0xc67b5510,0x6d672c37,0x2765d43b,0xdcd0e804,0xf1290dc7,0xcc00ffa3,0xb5390f92,0x690fed0b,0x667b9ffb,0xcedb7d9c,0xa091cf0b,0xd9155ea3,0xbb132f88,0x515bad24,0x7b9479bf,0x763bd6eb,0x37392eb3,0xcc115979,0x8026e297,0xf42e312d,0x6842ada7,0xc66a2b3b,0x12754ccc,0x782ef11c,0x6a124237,0xb79251e7,0x06a1bbe6,0x4bfb6350,0x1a6b1018,0x11caedfa,0x3d25bdd8,0xe2e1c3c9,0x44421659,0x0a121386,0xd90cec6e,0xd5abea2a,0x64af674e,0xda86a85f,0xbebfe988,0x64e4c3fe,0x9dbc8057,0xf0f7c086,0x60787bf8,0x6003604d,0xd1fd8346,0xf6381fb0,0x7745ae04,0xd736fccc,0x83426b33,0xf01eab71,0xb0804187,0x3c005e5f,0x77a057be,0xbde8ae24,0x55464299,0xbf582e61,0x4e58f48f,0xf2ddfda2,0xf474ef38,0x8789bdc2,0x5366f9c3,0xc8b38e74,0xb475f255,0x46fcd9b9,0x7aeb2661,0x8b1ddf84,0x846a0e79,0x915f95e2,0x466e598e,0x20b45770,0x8cd55591,0xc902de4c,0xb90bace1,0xbb8205d0,0x11a86248,0x7574a99e,0xb77f19b6,0xe0a9dc09,0x662d09a1,0xc4324633,0xe85a1f02,0x09f0be8c,0x4a99a025,0x1d6efe10,0x1ab93d1d,0x0ba5a4df,0xa186f20f,0x2868f169,0xdcb7da83,0x573906fe,0xa1e2ce9b,0x4fcd7f52,0x50115e01,0xa70683fa,0xa002b5c4,0x0de6d027,0x9af88c27,0x773f8641,0xc3604c06,0x61a806b5,0xf0177a28,0xc0f586e0,0x006058aa,0x30dc7d62,0x11e69ed7,0x2338ea63,0x53c2dd94,0xc2c21634,0xbbcbee56,0x90bcb6de,0xebfc7da1,0xce591d76,0x6f05e409,0x4b7c0188,0x39720a3d,0x7c927c24,0x86e3725f,0x724d9db9,0x1ac15bb4,0xd39eb8fc,0xed545578,0x08fca5b5,0xd83d7cd3,0x4dad0fc4,0x1e50ef5e,0xb161e6f8,0xa28514d9,0x6c51133c,0x6fd5c7e7,0x56e14ec4,0x362abfce,0xddc6c837,0xd79a3234,0x92638212,0x670efa8e,0x406000e0]),new Uint32Array([0x3a39ce37,0xd3faf5cf,0xabc27737,0x5ac52d1b,0x5cb0679e,0x4fa33742,0xd3822740,0x99bc9bbe,0xd5118e9d,0xbf0f7315,0xd62d1c7e,0xc700c47b,0xb78c1b6b,0x21a19045,0xb26eb1be,0x6a366eb4,0x5748ab2f,0xbc946e79,0xc6a376d2,0x6549c2c8,0x530ff8ee,0x468dde7d,0xd5730a1d,0x4cd04dc6,0x2939bbdb,0xa9ba4650,0xac9526e8,0xbe5ee304,0xa1fad5f0,0x6a2d519a,0x63ef8ce2,0x9a86ee22,0xc089c2b8,0x43242ef6,0xa51e03aa,0x9cf2d0a4,0x83c061ba,0x9be96a4d,0x8fe51550,0xba645bd6,0x2826a2f9,0xa73a3ae1,0x4ba99586,0xef5562e9,0xc72fefd3,0xf752f7da,0x3f046f69,0x77fa0a59,0x80e4a915,0x87b08601,0x9b09e6ad,0x3b3ee593,0xe990fd5a,0x9e34d797,0x2cf0b7d9,0x022b8b51,0x96d5ac3a,0x017da67d,0xd1cf3ed6,0x7c7d2d28,0x1f9f25cf,0xadf2b89b,0x5ad6b472,0x5a88f54c,0xe029ac71,0xe019a5e6,0x47b0acfd,0xed93fa9b,0xe8d3c48d,0x283b57cc,0xf8d56629,0x79132e28,0x785f0191,0xed756055,0xf7960e44,0xe3d35e8c,0x15056dd4,0x88f46dba,0x03a16125,0x0564f0bd,0xc3eb9e15,0x3c9057a2,0x97271aec,0xa93a072a,0x1b3f6d9b,0x1e6321f5,0xf59c66fb,0x26dcf319,0x7533d928,0xb155fdf5,0x03563482,0x8aba3cbb,0x28517711,0xc20ad9f8,0xabcc5167,0xccad925f,0x4de81751,0x3830dc8e,0x379d5862,0x9320f991,0xea7a90c2,0xfb3e7bce,0x5121ce64,0x774fbe32,0xa8b6e37e,0xc3293d46,0x48de5369,0x6413e680,0xa2ae0810,0xdd6db224,0x69852dfd,0x09072166,0xb39a460a,0x6445c0dd,0x586cdecf,0x1c20c8ae,0x5bbef7dd,0x1b588d40,0xccd2017f,0x6bb4e3bb,0xdda26a7e,0x3a59ff45,0x3e350a44,0xbcb4cdd5,0x72eacea8,0xfa6484bb,0x8d6612ae,0xbf3c6f47,0xd29be463,0x542f5d9e,0xaec2771b,0xf64e6370,0x740e0d8d,0xe75b1357,0xf8721671,0xaf537d5d,0x4040cb08,0x4eb4e2cc,0x34d2466a,0x0115af84,0xe1b00428,0x95983a1d,0x06b89fb4,0xce6ea048,0x6f3f3b82,0x3520ab82,0x011a1d4b,0x277227f8,0x611560b1,0xe7933fdc,0xbb3a792b,0x344525bd,0xa08839e1,0x51ce794b,0x2f32c9b7,0xa01fbac9,0xe01cc87e,0xbcc7d1f6,0xcf0111c3,0xa1e8aac7,0x1a908749,0xd44fbd9a,0xd0dadecb,0xd50ada38,0x0339c32a,0xc6913667,0x8df9317c,0xe0b12b4f,0xf79e59b7,0x43f5bb3a,0xf2d519ff,0x27d9459c,0xbf97222c,0x15e6fc2a,0x0f91fc71,0x9b941525,0xfae59361,0xceb69ceb,0xc2a86459,0x12baa8d1,0xb6c1075e,0xe3056a0c,0x10d25065,0xcb03a442,0xe0ec6e0e,0x1698db3b,0x4c98a0be,0x3278e964,0x9f1f9532,0xe0d392df,0xd3a0342b,0x8971f21e,0x1b0a7441,0x4ba3348c,0xc5be7120,0xc37632d8,0xdf359f8d,0x9b992f2e,0xe60b6f47,0x0fe3f11d,0xe54cda54,0x1edad891,0xce6279cf,0xcd3e7e6f,0x1618b166,0xfd2c1d05,0x848fd2c5,0xf6fb2299,0xf523f357,0xa6327623,0x93a83531,0x56cccd02,0xacf08162,0x5a75ebb5,0x6e163697,0x88d273cc,0xde966292,0x81b949d0,0x4c50901b,0x71c65614,0xe6c6c7bd,0x327a140a,0x45e1d006,0xc3f27b9a,0xc9aa53fd,0x62a80f00,0xbb25bfe2,0x35bdd2f6,0x71126905,0xb2040222,0xb6cbcf7c,0xcd769c2b,0x53113ec0,0x1640e3d3,0x38abbd60,0x2547adf0,0xba38209c,0xf746ce76,0x77afa1c5,0x20756060,0x85cbfe4e,0x8ae88dd8,0x7aaaf9b0,0x4cf9aa7e,0x1948c25c,0x02fb8a8c,0x01c36ae4,0xd6ebe1f9,0x90d4f869,0xa65cdea0,0x3f09252d,0xc208e69f,0xb74e6132,0xce77e25b,0x578fdfe3,0x3ac372e6])];this.P=new Uint32Array([0x243f6a88,0x85a308d3,0x13198a2e,0x03707344,0xa4093822,0x299f31d0,0x082efa98,0xec4e6c89,0x452821e6,0x38d01377,0xbe5466cf,0x34e90c6c,0xc0ac29b7,0xc97c50dd,0x3f84d5b5,0xb5470917,0x9216d5d9,0x8979fb1b]);};function F(S,x8,i){return(((S[0][x8[i+3]]+
S[1][x8[i+2]])^S[2][x8[i+1]])+
S[3][x8[i]]);};Blowfish.prototype.encipher=function(x,x8){if(x8===undefined){x8=new Uint8Array(x.buffer);if(x.byteOffset!==0)
x8=x8.subarray(x.byteOffset);}
x[0]^=this.P[0];for(var i=1;i<16;i+=2){x[1]^=F(this.S,x8,0)^this.P[i];x[0]^=F(this.S,x8,4)^this.P[i+1];}
var t=x[0];x[0]=x[1]^this.P[17];x[1]=t;};Blowfish.prototype.decipher=function(x){var x8=new Uint8Array(x.buffer);if(x.byteOffset!==0)
x8=x8.subarray(x.byteOffset);x[0]^=this.P[17];for(var i=16;i>0;i-=2){x[1]^=F(this.S,x8,0)^this.P[i];x[0]^=F(this.S,x8,4)^this.P[i-1];}
var t=x[0];x[0]=x[1]^this.P[0];x[1]=t;};function stream2word(data,databytes){var i,temp=0;for(i=0;i<4;i++,BLF_J++){if(BLF_J>=databytes)BLF_J=0;temp=(temp<<8)|data[BLF_J];}
return temp;};Blowfish.prototype.expand0state=function(key,keybytes){var d=new Uint32Array(2),i,k;var d8=new Uint8Array(d.buffer);for(i=0,BLF_J=0;i<18;i++){this.P[i]^=stream2word(key,keybytes);}
BLF_J=0;for(i=0;i<18;i+=2){this.encipher(d,d8);this.P[i]=d[0];this.P[i+1]=d[1];}
for(i=0;i<4;i++){for(k=0;k<256;k+=2){this.encipher(d,d8);this.S[i][k]=d[0];this.S[i][k+1]=d[1];}}};Blowfish.prototype.expandstate=function(data,databytes,key,keybytes){var d=new Uint32Array(2),i,k;for(i=0,BLF_J=0;i<18;i++){this.P[i]^=stream2word(key,keybytes);}
for(i=0,BLF_J=0;i<18;i+=2){d[0]^=stream2word(data,databytes);d[1]^=stream2word(data,databytes);this.encipher(d);this.P[i]=d[0];this.P[i+1]=d[1];}
for(i=0;i<4;i++){for(k=0;k<256;k+=2){d[0]^=stream2word(data,databytes);d[1]^=stream2word(data,databytes);this.encipher(d);this.S[i][k]=d[0];this.S[i][k+1]=d[1];}}
BLF_J=0;};Blowfish.prototype.enc=function(data,blocks){for(var i=0;i<blocks;i++){this.encipher(data.subarray(i*2));}};Blowfish.prototype.dec=function(data,blocks){for(var i=0;i<blocks;i++){this.decipher(data.subarray(i*2));}};var BCRYPT_BLOCKS=8,BCRYPT_HASHSIZE=32;function bcrypt_hash(sha2pass,sha2salt,out){var state=new Blowfish(),cdata=new Uint32Array(BCRYPT_BLOCKS),i,ciphertext=new Uint8Array([79,120,121,99,104,114,111,109,97,116,105,99,66,108,111,119,102,105,115,104,83,119,97,116,68,121,110,97,109,105,116,101]);state.expandstate(sha2salt,64,sha2pass,64);for(i=0;i<64;i++){state.expand0state(sha2salt,64);state.expand0state(sha2pass,64);}
for(i=0;i<BCRYPT_BLOCKS;i++)
cdata[i]=stream2word(ciphertext,ciphertext.byteLength);for(i=0;i<64;i++)
state.enc(cdata,cdata.byteLength/8);for(i=0;i<BCRYPT_BLOCKS;i++){out[4*i+3]=cdata[i]>>>24;out[4*i+2]=cdata[i]>>>16;out[4*i+1]=cdata[i]>>>8;out[4*i+0]=cdata[i];}};function bcrypt_pbkdf(pass,passlen,salt,saltlen,key,keylen,rounds){var sha2pass=new Uint8Array(64),sha2salt=new Uint8Array(64),out=new Uint8Array(BCRYPT_HASHSIZE),tmpout=new Uint8Array(BCRYPT_HASHSIZE),countsalt=new Uint8Array(saltlen+4),i,j,amt,stride,dest,count,origkeylen=keylen;if(rounds<1)
return-1;if(passlen===0||saltlen===0||keylen===0||keylen>(out.byteLength*out.byteLength)||saltlen>(1<<20))
return-1;stride=Math.floor((keylen+out.byteLength-1)/out.byteLength);amt=Math.floor((keylen+stride-1)/stride);for(i=0;i<saltlen;i++)
countsalt[i]=salt[i];crypto_hash_sha512(sha2pass,pass,passlen);for(count=1;keylen>0;count++){countsalt[saltlen+0]=count>>>24;countsalt[saltlen+1]=count>>>16;countsalt[saltlen+2]=count>>>8;countsalt[saltlen+3]=count;crypto_hash_sha512(sha2salt,countsalt,saltlen+4);bcrypt_hash(sha2pass,sha2salt,tmpout);for(i=out.byteLength;i--;)
out[i]=tmpout[i];for(i=1;i<rounds;i++){crypto_hash_sha512(sha2salt,tmpout,tmpout.byteLength);bcrypt_hash(sha2pass,sha2salt,tmpout);for(j=0;j<out.byteLength;j++)
out[j]^=tmpout[j];}
amt=Math.min(amt,keylen);for(i=0;i<amt;i++){dest=i*stride+(count-1);if(dest>=origkeylen)
break;key[dest]=out[i];}
keylen-=i;}
return 0;};module.exports={BLOCKS:BCRYPT_BLOCKS,HASHSIZE:BCRYPT_HASHSIZE,hash:bcrypt_hash,pbkdf:bcrypt_pbkdf};}),(function(module,exports,__webpack_require__){module.exports={read:read,write:write};var assert=__webpack_require__(15);var Buffer=__webpack_require__(21).Buffer;var rfc4253=__webpack_require__(89);var utils=__webpack_require__(34);var Key=__webpack_require__(33);var PrivateKey=__webpack_require__(38);var sshpriv=__webpack_require__(174);var SSHKEY_RE=/^([a-z0-9-]+)[ \t]+([a-zA-Z0-9+\/]+[=]*)([ \t]+([^ \t][^\n]*[\n]*)?)?$/;var SSHKEY_RE2=/^([a-z0-9-]+)[ \t\n]+([a-zA-Z0-9+\/][a-zA-Z0-9+\/ \t\n=]*)([^a-zA-Z0-9+\/ \t\n=].*)?$/;function read(buf,options){if(typeof(buf)!=='string'){assert.buffer(buf,'buf');buf=buf.toString('ascii');}
var trimmed=buf.trim().replace(/[\\\r]/g,'');var m=trimmed.match(SSHKEY_RE);if(!m)
m=trimmed.match(SSHKEY_RE2);assert.ok(m,'key must match regex');var type=rfc4253.algToKeyType(m[1]);var kbuf=Buffer.from(m[2],'base64');var key;var ret={};if(m[4]){try{key=rfc4253.read(kbuf);}catch(e){m=trimmed.match(SSHKEY_RE2);assert.ok(m,'key must match regex');kbuf=Buffer.from(m[2],'base64');key=rfc4253.readInternal(ret,'public',kbuf);}}else{key=rfc4253.readInternal(ret,'public',kbuf);}
assert.strictEqual(type,key.type);if(m[4]&&m[4].length>0){key.comment=m[4];}else if(ret.consumed){var data=m[2]+(m[3]?m[3]:'');var realOffset=Math.ceil(ret.consumed/3)*4;data=data.slice(0,realOffset-2).replace(/[^a-zA-Z0-9+\/=]/g,'')+
data.slice(realOffset-2);var padding=ret.consumed%3;if(padding>0&&data.slice(realOffset-1,realOffset)!=='=')
realOffset--;while(data.slice(realOffset,realOffset+1)==='=')
realOffset++;var trailer=data.slice(realOffset);trailer=trailer.replace(/[\r\n]/g,' ').replace(/^\s+/,'');if(trailer.match(/^[a-zA-Z0-9]/))
key.comment=trailer;}
return(key);}
function write(key,options){assert.object(key);if(!Key.isKey(key))
throw(new Error('Must be a public key'));var parts=[];var alg=rfc4253.keyTypeToAlg(key);parts.push(alg);var buf=rfc4253.write(key);parts.push(buf.toString('base64'));if(key.comment)
parts.push(key.comment);return(Buffer.from(parts.join(' ')));}}),(function(module,exports,__webpack_require__){module.exports={read:read,write:write};var assert=__webpack_require__(15);var Buffer=__webpack_require__(21).Buffer;var rfc4253=__webpack_require__(89);var Key=__webpack_require__(33);var errors=__webpack_require__(72);function read(buf,options){var lines=buf.toString('ascii').split(/[\r\n]+/);var found=false;var parts;var si=0;while(si<lines.length){parts=splitHeader(lines[si++]);if(parts&&parts[0].toLowerCase()==='putty-user-key-file-2'){found=true;break;}}
if(!found){throw(new Error('No PuTTY format first line found'));}
var alg=parts[1];parts=splitHeader(lines[si++]);assert.equal(parts[0].toLowerCase(),'encryption');parts=splitHeader(lines[si++]);assert.equal(parts[0].toLowerCase(),'comment');var comment=parts[1];parts=splitHeader(lines[si++]);assert.equal(parts[0].toLowerCase(),'public-lines');var publicLines=parseInt(parts[1],10);if(!isFinite(publicLines)||publicLines<0||publicLines>lines.length){throw(new Error('Invalid public-lines count'));}
var publicBuf=Buffer.from(lines.slice(si,si+publicLines).join(''),'base64');var keyType=rfc4253.algToKeyType(alg);var key=rfc4253.read(publicBuf);if(key.type!==keyType){throw(new Error('Outer key algorithm mismatch'));}
key.comment=comment;return(key);}
function splitHeader(line){var idx=line.indexOf(':');if(idx===-1)
return(null);var header=line.slice(0,idx);++idx;while(line[idx]===' ')
++idx;var rest=line.slice(idx);return([header,rest]);}
function write(key,options){assert.object(key);if(!Key.isKey(key))
throw(new Error('Must be a public key'));var alg=rfc4253.keyTypeToAlg(key);var buf=rfc4253.write(key);var comment=key.comment||'';var b64=buf.toString('base64');var lines=wrap(b64,64);lines.unshift('Public-Lines: '+lines.length);lines.unshift('Comment: '+comment);lines.unshift('Encryption: none');lines.unshift('PuTTY-User-Key-File-2: '+alg);return(Buffer.from(lines.join('\n')+'\n'));}
function wrap(txt,len){var lines=[];var pos=0;while(pos<txt.length){lines.push(txt.slice(pos,pos+64));pos+=64;}
return(lines);}}),(function(module,exports,__webpack_require__){module.exports={read:read,verify:verify,sign:sign,signAsync:signAsync,write:write};var assert=__webpack_require__(15);var asn1=__webpack_require__(79);var Buffer=__webpack_require__(21).Buffer;var algs=__webpack_require__(41);var utils=__webpack_require__(34);var Key=__webpack_require__(33);var PrivateKey=__webpack_require__(38);var pem=__webpack_require__(88);var Identity=__webpack_require__(139);var Signature=__webpack_require__(78);var Certificate=__webpack_require__(138);var pkcs8=__webpack_require__(137);function readMPInt(der,nm){assert.strictEqual(der.peek(),asn1.Ber.Integer,nm+' is not an Integer');return(utils.mpNormalize(der.readString(asn1.Ber.Integer,true)));}
function verify(cert,key){var sig=cert.signatures.x509;assert.object(sig,'x509 signature');var algParts=sig.algo.split('-');if(algParts[0]!==key.type)
return(false);var blob=sig.cache;if(blob===undefined){var der=new asn1.BerWriter();writeTBSCert(cert,der);blob=der.buffer;}
var verifier=key.createVerify(algParts[1]);verifier.write(blob);return(verifier.verify(sig.signature));}
function Local(i){return(asn1.Ber.Context|asn1.Ber.Constructor|i);}
function Context(i){return(asn1.Ber.Context|i);}
var SIGN_ALGS={'rsa-md5':'1.2.840.113549.1.1.4','rsa-sha1':'1.2.840.113549.1.1.5','rsa-sha256':'1.2.840.113549.1.1.11','rsa-sha384':'1.2.840.113549.1.1.12','rsa-sha512':'1.2.840.113549.1.1.13','dsa-sha1':'1.2.840.10040.4.3','dsa-sha256':'2.16.840.1.101.3.4.3.2','ecdsa-sha1':'1.2.840.10045.4.1','ecdsa-sha256':'1.2.840.10045.4.3.2','ecdsa-sha384':'1.2.840.10045.4.3.3','ecdsa-sha512':'1.2.840.10045.4.3.4','ed25519-sha512':'1.3.101.112'};Object.keys(SIGN_ALGS).forEach(function(k){SIGN_ALGS[SIGN_ALGS[k]]=k;});SIGN_ALGS['1.3.14.3.2.3']='rsa-md5';SIGN_ALGS['1.3.14.3.2.29']='rsa-sha1';var EXTS={'issuerKeyId':'2.5.29.35','altName':'2.5.29.17','basicConstraints':'2.5.29.19','keyUsage':'2.5.29.15','extKeyUsage':'2.5.29.37'};function read(buf,options){if(typeof(buf)==='string'){buf=Buffer.from(buf,'binary');}
assert.buffer(buf,'buf');var der=new asn1.BerReader(buf);der.readSequence();if(Math.abs(der.length-der.remain)>1){throw(new Error('DER sequence does not contain whole byte '+
'stream'));}
var tbsStart=der.offset;der.readSequence();var sigOffset=der.offset+der.length;var tbsEnd=sigOffset;if(der.peek()===Local(0)){der.readSequence(Local(0));var version=der.readInt();assert.ok(version<=3,'only x.509 versions up to v3 supported');}
var cert={};cert.signatures={};var sig=(cert.signatures.x509={});sig.extras={};cert.serial=readMPInt(der,'serial');der.readSequence();var after=der.offset+der.length;var certAlgOid=der.readOID();var certAlg=SIGN_ALGS[certAlgOid];if(certAlg===undefined)
throw(new Error('unknown signature algorithm '+certAlgOid));der._offset=after;cert.issuer=Identity.parseAsn1(der);der.readSequence();cert.validFrom=readDate(der);cert.validUntil=readDate(der);cert.subjects=[Identity.parseAsn1(der)];der.readSequence();after=der.offset+der.length;cert.subjectKey=pkcs8.readPkcs8(undefined,'public',der);der._offset=after;if(der.peek()===Local(1)){der.readSequence(Local(1));sig.extras.issuerUniqueID=buf.slice(der.offset,der.offset+der.length);der._offset+=der.length;}
if(der.peek()===Local(2)){der.readSequence(Local(2));sig.extras.subjectUniqueID=buf.slice(der.offset,der.offset+der.length);der._offset+=der.length;}
if(der.peek()===Local(3)){der.readSequence(Local(3));var extEnd=der.offset+der.length;der.readSequence();while(der.offset<extEnd)
readExtension(cert,buf,der);assert.strictEqual(der.offset,extEnd);}
assert.strictEqual(der.offset,sigOffset);der.readSequence();after=der.offset+der.length;var sigAlgOid=der.readOID();var sigAlg=SIGN_ALGS[sigAlgOid];if(sigAlg===undefined)
throw(new Error('unknown signature algorithm '+sigAlgOid));der._offset=after;var sigData=der.readString(asn1.Ber.BitString,true);if(sigData[0]===0)
sigData=sigData.slice(1);var algParts=sigAlg.split('-');sig.signature=Signature.parse(sigData,algParts[0],'asn1');sig.signature.hashAlgorithm=algParts[1];sig.algo=sigAlg;sig.cache=buf.slice(tbsStart,tbsEnd);return(new Certificate(cert));}
function readDate(der){if(der.peek()===asn1.Ber.UTCTime){return(utcTimeToDate(der.readString(asn1.Ber.UTCTime)));}else if(der.peek()===asn1.Ber.GeneralizedTime){return(gTimeToDate(der.readString(asn1.Ber.GeneralizedTime)));}else{throw(new Error('Unsupported date format'));}}
var ALTNAME={OtherName:Local(0),RFC822Name:Context(1),DNSName:Context(2),X400Address:Local(3),DirectoryName:Local(4),EDIPartyName:Local(5),URI:Context(6),IPAddress:Context(7),OID:Context(8)};var EXTPURPOSE={'serverAuth':'1.3.6.1.5.5.7.3.1','clientAuth':'1.3.6.1.5.5.7.3.2','codeSigning':'1.3.6.1.5.5.7.3.3','joyentDocker':'1.3.6.1.4.1.38678.1.4.1','joyentCmon':'1.3.6.1.4.1.38678.1.4.2'};var EXTPURPOSE_REV={};Object.keys(EXTPURPOSE).forEach(function(k){EXTPURPOSE_REV[EXTPURPOSE[k]]=k;});var KEYUSEBITS=['signature','identity','keyEncryption','encryption','keyAgreement','ca','crl'];function readExtension(cert,buf,der){der.readSequence();var after=der.offset+der.length;var extId=der.readOID();var id;var sig=cert.signatures.x509;if(!sig.extras.exts)
sig.extras.exts=[];var critical;if(der.peek()===asn1.Ber.Boolean)
critical=der.readBoolean();switch(extId){case(EXTS.basicConstraints):der.readSequence(asn1.Ber.OctetString);der.readSequence();var bcEnd=der.offset+der.length;var ca=false;if(der.peek()===asn1.Ber.Boolean)
ca=der.readBoolean();if(cert.purposes===undefined)
cert.purposes=[];if(ca===true)
cert.purposes.push('ca');var bc={oid:extId,critical:critical};if(der.offset<bcEnd&&der.peek()===asn1.Ber.Integer)
bc.pathLen=der.readInt();sig.extras.exts.push(bc);break;case(EXTS.extKeyUsage):der.readSequence(asn1.Ber.OctetString);der.readSequence();if(cert.purposes===undefined)
cert.purposes=[];var ekEnd=der.offset+der.length;while(der.offset<ekEnd){var oid=der.readOID();cert.purposes.push(EXTPURPOSE_REV[oid]||oid);}
if(cert.purposes.indexOf('serverAuth')!==-1&&cert.purposes.indexOf('clientAuth')===-1){cert.subjects.forEach(function(ide){if(ide.type!=='host'){ide.type='host';ide.hostname=ide.uid||ide.email||ide.components[0].value;}});}else if(cert.purposes.indexOf('clientAuth')!==-1&&cert.purposes.indexOf('serverAuth')===-1){cert.subjects.forEach(function(ide){if(ide.type!=='user'){ide.type='user';ide.uid=ide.hostname||ide.email||ide.components[0].value;}});}
sig.extras.exts.push({oid:extId,critical:critical});break;case(EXTS.keyUsage):der.readSequence(asn1.Ber.OctetString);var bits=der.readString(asn1.Ber.BitString,true);var setBits=readBitField(bits,KEYUSEBITS);setBits.forEach(function(bit){if(cert.purposes===undefined)
cert.purposes=[];if(cert.purposes.indexOf(bit)===-1)
cert.purposes.push(bit);});sig.extras.exts.push({oid:extId,critical:critical,bits:bits});break;case(EXTS.altName):der.readSequence(asn1.Ber.OctetString);der.readSequence();var aeEnd=der.offset+der.length;while(der.offset<aeEnd){switch(der.peek()){case ALTNAME.OtherName:case ALTNAME.EDIPartyName:der.readSequence();der._offset+=der.length;break;case ALTNAME.OID:der.readOID(ALTNAME.OID);break;case ALTNAME.RFC822Name:var email=der.readString(ALTNAME.RFC822Name);id=Identity.forEmail(email);if(!cert.subjects[0].equals(id))
cert.subjects.push(id);break;case ALTNAME.DirectoryName:der.readSequence(ALTNAME.DirectoryName);id=Identity.parseAsn1(der);if(!cert.subjects[0].equals(id))
cert.subjects.push(id);break;case ALTNAME.DNSName:var host=der.readString(ALTNAME.DNSName);id=Identity.forHost(host);if(!cert.subjects[0].equals(id))
cert.subjects.push(id);break;default:der.readString(der.peek());break;}}
sig.extras.exts.push({oid:extId,critical:critical});break;default:sig.extras.exts.push({oid:extId,critical:critical,data:der.readString(asn1.Ber.OctetString,true)});break;}
der._offset=after;}
var UTCTIME_RE=/^([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})?Z$/;function utcTimeToDate(t){var m=t.match(UTCTIME_RE);assert.ok(m,'timestamps must be in UTC');var d=new Date();var thisYear=d.getUTCFullYear();var century=Math.floor(thisYear/100)*100;var year=parseInt(m[1],10);if(thisYear%100<50&&year>=60)
year+=(century-1);else
year+=century;d.setUTCFullYear(year,parseInt(m[2],10)-1,parseInt(m[3],10));d.setUTCHours(parseInt(m[4],10),parseInt(m[5],10));if(m[6]&&m[6].length>0)
d.setUTCSeconds(parseInt(m[6],10));return(d);}
var GTIME_RE=/^([0-9]{4})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})?Z$/;function gTimeToDate(t){var m=t.match(GTIME_RE);assert.ok(m);var d=new Date();d.setUTCFullYear(parseInt(m[1],10),parseInt(m[2],10)-1,parseInt(m[3],10));d.setUTCHours(parseInt(m[4],10),parseInt(m[5],10));if(m[6]&&m[6].length>0)
d.setUTCSeconds(parseInt(m[6],10));return(d);}
function zeroPad(n){var s=''+n;while(s.length<2)
s='0'+s;return(s);}
function dateToUTCTime(d){var s='';s+=zeroPad(d.getUTCFullYear()%100);s+=zeroPad(d.getUTCMonth()+1);s+=zeroPad(d.getUTCDate());s+=zeroPad(d.getUTCHours());s+=zeroPad(d.getUTCMinutes());s+=zeroPad(d.getUTCSeconds());s+='Z';return(s);}
function sign(cert,key){if(cert.signatures.x509===undefined)
cert.signatures.x509={};var sig=cert.signatures.x509;sig.algo=key.type+'-'+key.defaultHashAlgorithm();if(SIGN_ALGS[sig.algo]===undefined)
return(false);var der=new asn1.BerWriter();writeTBSCert(cert,der);var blob=der.buffer;sig.cache=blob;var signer=key.createSign();signer.write(blob);cert.signatures.x509.signature=signer.sign();return(true);}
function signAsync(cert,signer,done){if(cert.signatures.x509===undefined)
cert.signatures.x509={};var sig=cert.signatures.x509;var der=new asn1.BerWriter();writeTBSCert(cert,der);var blob=der.buffer;sig.cache=blob;signer(blob,function(err,signature){if(err){done(err);return;}
sig.algo=signature.type+'-'+signature.hashAlgorithm;if(SIGN_ALGS[sig.algo]===undefined){done(new Error('Invalid signing algorithm "'+
sig.algo+'"'));return;}
sig.signature=signature;done();});}
function write(cert,options){var sig=cert.signatures.x509;assert.object(sig,'x509 signature');var der=new asn1.BerWriter();der.startSequence();if(sig.cache){der._ensure(sig.cache.length);sig.cache.copy(der._buf,der._offset);der._offset+=sig.cache.length;}else{writeTBSCert(cert,der);}
der.startSequence();der.writeOID(SIGN_ALGS[sig.algo]);if(sig.algo.match(/^rsa-/))
der.writeNull();der.endSequence();var sigData=sig.signature.toBuffer('asn1');var data=Buffer.alloc(sigData.length+1);data[0]=0;sigData.copy(data,1);der.writeBuffer(data,asn1.Ber.BitString);der.endSequence();return(der.buffer);}
function writeTBSCert(cert,der){var sig=cert.signatures.x509;assert.object(sig,'x509 signature');der.startSequence();der.startSequence(Local(0));der.writeInt(2);der.endSequence();der.writeBuffer(utils.mpNormalize(cert.serial),asn1.Ber.Integer);der.startSequence();der.writeOID(SIGN_ALGS[sig.algo]);if(sig.algo.match(/^rsa-/))
der.writeNull();der.endSequence();cert.issuer.toAsn1(der);der.startSequence();der.writeString(dateToUTCTime(cert.validFrom),asn1.Ber.UTCTime);der.writeString(dateToUTCTime(cert.validUntil),asn1.Ber.UTCTime);der.endSequence();var subject=cert.subjects[0];var altNames=cert.subjects.slice(1);subject.toAsn1(der);pkcs8.writePkcs8(der,cert.subjectKey);if(sig.extras&&sig.extras.issuerUniqueID){der.writeBuffer(sig.extras.issuerUniqueID,Local(1));}
if(sig.extras&&sig.extras.subjectUniqueID){der.writeBuffer(sig.extras.subjectUniqueID,Local(2));}
if(altNames.length>0||subject.type==='host'||(cert.purposes!==undefined&&cert.purposes.length>0)||(sig.extras&&sig.extras.exts)){der.startSequence(Local(3));der.startSequence();var exts=[];if(cert.purposes!==undefined&&cert.purposes.length>0){exts.push({oid:EXTS.basicConstraints,critical:true});exts.push({oid:EXTS.keyUsage,critical:true});exts.push({oid:EXTS.extKeyUsage,critical:true});}
exts.push({oid:EXTS.altName});if(sig.extras&&sig.extras.exts)
exts=sig.extras.exts;for(var i=0;i<exts.length;++i){der.startSequence();der.writeOID(exts[i].oid);if(exts[i].critical!==undefined)
der.writeBoolean(exts[i].critical);if(exts[i].oid===EXTS.altName){der.startSequence(asn1.Ber.OctetString);der.startSequence();if(subject.type==='host'){der.writeString(subject.hostname,Context(2));}
for(var j=0;j<altNames.length;++j){if(altNames[j].type==='host'){der.writeString(altNames[j].hostname,ALTNAME.DNSName);}else if(altNames[j].type==='email'){der.writeString(altNames[j].email,ALTNAME.RFC822Name);}else{der.startSequence(ALTNAME.DirectoryName);altNames[j].toAsn1(der);der.endSequence();}}
der.endSequence();der.endSequence();}else if(exts[i].oid===EXTS.basicConstraints){der.startSequence(asn1.Ber.OctetString);der.startSequence();var ca=(cert.purposes.indexOf('ca')!==-1);var pathLen=exts[i].pathLen;der.writeBoolean(ca);if(pathLen!==undefined)
der.writeInt(pathLen);der.endSequence();der.endSequence();}else if(exts[i].oid===EXTS.extKeyUsage){der.startSequence(asn1.Ber.OctetString);der.startSequence();cert.purposes.forEach(function(purpose){if(purpose==='ca')
return;if(KEYUSEBITS.indexOf(purpose)!==-1)
return;var oid=purpose;if(EXTPURPOSE[purpose]!==undefined)
oid=EXTPURPOSE[purpose];der.writeOID(oid);});der.endSequence();der.endSequence();}else if(exts[i].oid===EXTS.keyUsage){der.startSequence(asn1.Ber.OctetString);if(exts[i].bits!==undefined){der.writeBuffer(exts[i].bits,asn1.Ber.BitString);}else{var bits=writeBitField(cert.purposes,KEYUSEBITS);der.writeBuffer(bits,asn1.Ber.BitString);}
der.endSequence();}else{der.writeBuffer(exts[i].data,asn1.Ber.OctetString);}
der.endSequence();}
der.endSequence();der.endSequence();}
der.endSequence();}
function readBitField(bits,bitIndex){var bitLen=8*(bits.length-1)-bits[0];var setBits={};for(var i=0;i<bitLen;++i){var byteN=1+Math.floor(i/8);var bit=7-(i%8);var mask=1<<bit;var bitVal=((bits[byteN]&mask)!==0);var name=bitIndex[i];if(bitVal&&typeof(name)==='string'){setBits[name]=true;}}
return(Object.keys(setBits));}
function writeBitField(setBits,bitIndex){var bitLen=bitIndex.length;var blen=Math.ceil(bitLen/8);var unused=blen*8-bitLen;var bits=Buffer.alloc(1+blen);bits[0]=unused;for(var i=0;i<bitLen;++i){var byteN=1+Math.floor(i/8);var bit=7-(i%8);var mask=1<<bit;var name=bitIndex[i];if(name===undefined)
continue;var bitVal=(setBits.indexOf(name)!==-1);if(bitVal){bits[byteN]|=mask;}}
return(bits);}}),(function(module,exports,__webpack_require__){(function(process){var mod_assert=__webpack_require__(71);var mod_util=__webpack_require__(25);exports.sprintf=jsSprintf;exports.printf=jsPrintf;exports.fprintf=jsFprintf;function jsSprintf(fmt)
{var regex=['([^%]*)','%','([\'\\-+ #0]*?)','([1-9]\\d*)?','(\\.([1-9]\\d*))?','[lhjztL]*?','([diouxXfFeEgGaAcCsSp%jr])'].join('');var re=new RegExp(regex);var args=Array.prototype.slice.call(arguments,1);var flags,width,precision,conversion;var left,pad,sign,arg,match;var ret='';var argn=1;mod_assert.equal('string',typeof(fmt));while((match=re.exec(fmt))!==null){ret+=match[1];fmt=fmt.substring(match[0].length);flags=match[2]||'';width=match[3]||0;precision=match[4]||'';conversion=match[6];left=false;sign=false;pad=' ';if(conversion=='%'){ret+='%';continue;}
if(args.length===0)
throw(new Error('too few args to sprintf'));arg=args.shift();argn++;if(flags.match(/[\' #]/))
throw(new Error('unsupported flags: '+flags));if(precision.length>0)
throw(new Error('non-zero precision not supported'));if(flags.match(/-/))
left=true;if(flags.match(/0/))
pad='0';if(flags.match(/\+/))
sign=true;switch(conversion){case 's':if(arg===undefined||arg===null)
throw(new Error('argument '+argn+
': attempted to print undefined or null '+
'as a string'));ret+=doPad(pad,width,left,arg.toString());break;case 'd':arg=Math.floor(arg);case 'f':sign=sign&&arg>0?'+':'';ret+=sign+doPad(pad,width,left,arg.toString());break;case 'x':ret+=doPad(pad,width,left,arg.toString(16));break;case 'j':if(width===0)
width=10;ret+=mod_util.inspect(arg,false,width);break;case 'r':ret+=dumpException(arg);break;default:throw(new Error('unsupported conversion: '+
conversion));}}
ret+=fmt;return(ret);}
function jsPrintf(){var args=Array.prototype.slice.call(arguments);args.unshift(process.stdout);jsFprintf.apply(null,args);}
function jsFprintf(stream){var args=Array.prototype.slice.call(arguments,1);return(stream.write(jsSprintf.apply(this,args)));}
function doPad(chr,width,left,str)
{var ret=str;while(ret.length<width){if(left)
ret+=chr;else
ret=chr+ret;}
return(ret);}
function dumpException(ex)
{var ret;if(!(ex instanceof Error))
throw(new Error(jsSprintf('invalid type for %%r: %j',ex)));ret='EXCEPTION: '+ex.constructor.name+': '+ex.stack;if(ex.cause&&typeof(ex.cause)==='function'){var cex=ex.cause();if(cex){ret+='\nCaused by: '+dumpException(cex);}}
return(ret);}}.call(exports,__webpack_require__(20)))}),(function(module,exports,__webpack_require__){var stream=__webpack_require__(67)
function isStream(obj){return obj instanceof stream.Stream}
function isReadable(obj){return isStream(obj)&&typeof obj._read=='function'&&typeof obj._readableState=='object'}
function isWritable(obj){return isStream(obj)&&typeof obj._write=='function'&&typeof obj._writableState=='object'}
function isDuplex(obj){return isReadable(obj)&&isWritable(obj)}
module.exports=isStream
module.exports.isReadable=isReadable
module.exports.isWritable=isWritable
module.exports.isDuplex=isDuplex}),(function(module,exports,__webpack_require__){"use strict";var stringify=__webpack_require__(849);var parse=__webpack_require__(850);var formats=__webpack_require__(386);module.exports={formats:formats,parse:parse,stringify:stringify};}),(function(module,exports,__webpack_require__){"use strict";var has=Object.prototype.hasOwnProperty;var hexTable=(function(){var array=[];for(var i=0;i<256;++i){array.push('%'+((i<16?'0':'')+i.toString(16)).toUpperCase());}
return array;}());var compactQueue=function compactQueue(queue){var obj;while(queue.length){var item=queue.pop();obj=item.obj[item.prop];if(Array.isArray(obj)){var compacted=[];for(var j=0;j<obj.length;++j){if(typeof obj[j]!=='undefined'){compacted.push(obj[j]);}}
item.obj[item.prop]=compacted;}}
return obj;};var arrayToObject=function arrayToObject(source,options){var obj=options&&options.plainObjects?Object.create(null):{};for(var i=0;i<source.length;++i){if(typeof source[i]!=='undefined'){obj[i]=source[i];}}
return obj;};var merge=function merge(target,source,options){if(!source){return target;}
if(typeof source!=='object'){if(Array.isArray(target)){target.push(source);}else if(typeof target==='object'){if(options.plainObjects||options.allowPrototypes||!has.call(Object.prototype,source)){target[source]=true;}}else{return[target,source];}
return target;}
if(typeof target!=='object'){return[target].concat(source);}
var mergeTarget=target;if(Array.isArray(target)&&!Array.isArray(source)){mergeTarget=arrayToObject(target,options);}
if(Array.isArray(target)&&Array.isArray(source)){source.forEach(function(item,i){if(has.call(target,i)){if(target[i]&&typeof target[i]==='object'){target[i]=merge(target[i],item,options);}else{target.push(item);}}else{target[i]=item;}});return target;}
return Object.keys(source).reduce(function(acc,key){var value=source[key];if(has.call(acc,key)){acc[key]=merge(acc[key],value,options);}else{acc[key]=value;}
return acc;},mergeTarget);};var assign=function assignSingleSource(target,source){return Object.keys(source).reduce(function(acc,key){acc[key]=source[key];return acc;},target);};var decode=function(str){try{return decodeURIComponent(str.replace(/\+/g,' '));}catch(e){return str;}};var encode=function encode(str){if(str.length===0){return str;}
var string=typeof str==='string'?str:String(str);var out='';for(var i=0;i<string.length;++i){var c=string.charCodeAt(i);if(c===0x2D||c===0x2E||c===0x5F||c===0x7E||(c>=0x30&&c<=0x39)||(c>=0x41&&c<=0x5A)||(c>=0x61&&c<=0x7A)){out+=string.charAt(i);continue;}
if(c<0x80){out=out+hexTable[c];continue;}
if(c<0x800){out=out+(hexTable[0xC0|(c>>6)]+hexTable[0x80|(c&0x3F)]);continue;}
if(c<0xD800||c>=0xE000){out=out+(hexTable[0xE0|(c>>12)]+hexTable[0x80|((c>>6)&0x3F)]+hexTable[0x80|(c&0x3F)]);continue;}
i+=1;c=0x10000+(((c&0x3FF)<<10)|(string.charCodeAt(i)&0x3FF));out+=hexTable[0xF0|(c>>18)]
+hexTable[0x80|((c>>12)&0x3F)]
+hexTable[0x80|((c>>6)&0x3F)]
+hexTable[0x80|(c&0x3F)];}
return out;};var compact=function compact(value){var queue=[{obj:{o:value},prop:'o'}];var refs=[];for(var i=0;i<queue.length;++i){var item=queue[i];var obj=item.obj[item.prop];var keys=Object.keys(obj);for(var j=0;j<keys.length;++j){var key=keys[j];var val=obj[key];if(typeof val==='object'&&val!==null&&refs.indexOf(val)===-1){queue.push({obj:obj,prop:key});refs.push(val);}}}
return compactQueue(queue);};var isRegExp=function isRegExp(obj){return Object.prototype.toString.call(obj)==='[object RegExp]';};var isBuffer=function isBuffer(obj){if(obj===null||typeof obj==='undefined'){return false;}
return!!(obj.constructor&&obj.constructor.isBuffer&&obj.constructor.isBuffer(obj));};module.exports={arrayToObject:arrayToObject,assign:assign,compact:compact,decode:decode,encode:encode,isBuffer:isBuffer,isRegExp:isRegExp,merge:merge};}),(function(module,exports,__webpack_require__){"use strict";var replace=String.prototype.replace;var percentTwenties=/%20/g;module.exports={'default':'RFC3986',formatters:{RFC1738:function(value){return replace.call(value,percentTwenties,'+');},RFC3986:function(value){return value;}},RFC1738:'RFC1738',RFC3986:'RFC3986'};}),(function(module,exports,__webpack_require__){"use strict";var util=__webpack_require__(117);module.exports=SchemaObject;function SchemaObject(obj){util.copy(obj,this);}}),(function(module,exports,__webpack_require__){"use strict";module.exports=function(data,opts){if(!opts)opts={};if(typeof opts==='function')opts={cmp:opts};var cycles=(typeof opts.cycles==='boolean')?opts.cycles:false;var cmp=opts.cmp&&(function(f){return function(node){return function(a,b){var aobj={key:a,value:node[a]};var bobj={key:b,value:node[b]};return f(aobj,bobj);};};})(opts.cmp);var seen=[];return(function stringify(node){if(node&&node.toJSON&&typeof node.toJSON==='function'){node=node.toJSON();}
if(node===undefined)return;if(typeof node=='number')return isFinite(node)?''+node:'null';if(typeof node!=='object')return JSON.stringify(node);var i,out;if(Array.isArray(node)){out='[';for(i=0;i<node.length;i++){if(i)out+=',';out+=stringify(node[i])||'null';}
return out+']';}
if(node===null)return 'null';if(seen.indexOf(node)!==-1){if(cycles)return JSON.stringify('__cycle__');throw new TypeError('Converting circular structure to JSON');}
var seenIndex=seen.push(node)-1;var keys=Object.keys(node).sort(cmp&&cmp(node));out='';for(i=0;i<keys.length;i++){var key=keys[i];var value=stringify(node[key]);if(!value)continue;if(out)out+=',';out+=JSON.stringify(key)+':'+value;}
seen.splice(seenIndex,1);return '{'+out+'}';})(data);};}),(function(module,exports,__webpack_require__){"use strict";module.exports=function generate_validate(it,$keyword,$ruleType){var out='';var $async=it.schema.$async===true,$refKeywords=it.util.schemaHasRulesExcept(it.schema,it.RULES.all,'$ref'),$id=it.self._getId(it.schema);if(it.isTop){out+=' var validate = ';if($async){it.async=true;out+='async ';}
out+='function(data, dataPath, parentData, parentDataProperty, rootData) { \'use strict\'; ';if($id&&(it.opts.sourceCode||it.opts.processCode)){out+=' '+('/\*# sourceURL='+$id+' */')+' ';}}
if(typeof it.schema=='boolean'||!($refKeywords||it.schema.$ref)){var $keyword='false schema';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data='data'+($dataLvl||'');var $valid='valid'+$lvl;if(it.schema===false){if(it.isTop){$breakOnError=true;}else{out+=' var '+($valid)+' = false; ';}
var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+($errorKeyword||'false schema')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: {} ';if(it.opts.messages!==false){out+=' , message: \'boolean schema is false\' ';}
if(it.opts.verbose){out+=' , schema: false , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+(__err)+']); ';}else{out+=' validate.errors = ['+(__err)+']; return false; ';}}else{out+=' var err = '+(__err)+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}}else{if(it.isTop){if($async){out+=' return data; ';}else{out+=' validate.errors = null; return true; ';}}else{out+=' var '+($valid)+' = true; ';}}
if(it.isTop){out+=' }; return validate; ';}
return out;}
if(it.isTop){var $top=it.isTop,$lvl=it.level=0,$dataLvl=it.dataLevel=0,$data='data';it.rootId=it.resolve.fullPath(it.self._getId(it.root.schema));it.baseId=it.baseId||it.rootId;delete it.isTop;it.dataPathArr=[undefined];out+=' var vErrors = null; ';out+=' var errors = 0;     ';out+=' if (rootData === undefined) rootData = data; ';}else{var $lvl=it.level,$dataLvl=it.dataLevel,$data='data'+($dataLvl||'');if($id)it.baseId=it.resolve.url(it.baseId,$id);if($async&&!it.async)throw new Error('async schema in sync schema');out+=' var errs_'+($lvl)+' = errors;';}
var $valid='valid'+$lvl,$breakOnError=!it.opts.allErrors,$closingBraces1='',$closingBraces2='';var $errorKeyword;var $typeSchema=it.schema.type,$typeIsArray=Array.isArray($typeSchema);if($typeSchema&&it.opts.nullable&&it.schema.nullable===true){if($typeIsArray){if($typeSchema.indexOf('null')==-1)$typeSchema=$typeSchema.concat('null');}else if($typeSchema!='null'){$typeSchema=[$typeSchema,'null'];$typeIsArray=true;}}
if($typeIsArray&&$typeSchema.length==1){$typeSchema=$typeSchema[0];$typeIsArray=false;}
if(it.schema.$ref&&$refKeywords){if(it.opts.extendRefs=='fail'){throw new Error('$ref: validation keywords used in schema at path "'+it.errSchemaPath+'" (see option extendRefs)');}else if(it.opts.extendRefs!==true){$refKeywords=false;it.logger.warn('$ref: keywords ignored in schema at path "'+it.errSchemaPath+'"');}}
if(it.schema.$comment&&it.opts.$comment){out+=' '+(it.RULES.all.$comment.code(it,'$comment'));}
if($typeSchema){if(it.opts.coerceTypes){var $coerceToTypes=it.util.coerceToTypes(it.opts.coerceTypes,$typeSchema);}
var $rulesGroup=it.RULES.types[$typeSchema];if($coerceToTypes||$typeIsArray||$rulesGroup===true||($rulesGroup&&!$shouldUseGroup($rulesGroup))){var $schemaPath=it.schemaPath+'.type',$errSchemaPath=it.errSchemaPath+'/type';var $schemaPath=it.schemaPath+'.type',$errSchemaPath=it.errSchemaPath+'/type',$method=$typeIsArray?'checkDataTypes':'checkDataType';out+=' if ('+(it.util[$method]($typeSchema,$data,true))+') { ';if($coerceToTypes){var $dataType='dataType'+$lvl,$coerced='coerced'+$lvl;out+=' var '+($dataType)+' = typeof '+($data)+'; ';if(it.opts.coerceTypes=='array'){out+=' if ('+($dataType)+' == \'object\' && Array.isArray('+($data)+')) '+($dataType)+' = \'array\'; ';}
out+=' var '+($coerced)+' = undefined; ';var $bracesCoercion='';var arr1=$coerceToTypes;if(arr1){var $type,$i=-1,l1=arr1.length-1;while($i<l1){$type=arr1[$i+=1];if($i){out+=' if ('+($coerced)+' === undefined) { ';$bracesCoercion+='}';}
if(it.opts.coerceTypes=='array'&&$type!='array'){out+=' if ('+($dataType)+' == \'array\' && '+($data)+'.length == 1) { '+($coerced)+' = '+($data)+' = '+($data)+'[0]; '+($dataType)+' = typeof '+($data)+';  } ';}
if($type=='string'){out+=' if ('+($dataType)+' == \'number\' || '+($dataType)+' == \'boolean\') '+($coerced)+' = \'\' + '+($data)+'; else if ('+($data)+' === null) '+($coerced)+' = \'\'; ';}else if($type=='number'||$type=='integer'){out+=' if ('+($dataType)+' == \'boolean\' || '+($data)+' === null || ('+($dataType)+' == \'string\' && '+($data)+' && '+($data)+' == +'+($data)+' ';if($type=='integer'){out+=' && !('+($data)+' % 1)';}
out+=')) '+($coerced)+' = +'+($data)+'; ';}else if($type=='boolean'){out+=' if ('+($data)+' === \'false\' || '+($data)+' === 0 || '+($data)+' === null) '+($coerced)+' = false; else if ('+($data)+' === \'true\' || '+($data)+' === 1) '+($coerced)+' = true; ';}else if($type=='null'){out+=' if ('+($data)+' === \'\' || '+($data)+' === 0 || '+($data)+' === false) '+($coerced)+' = null; ';}else if(it.opts.coerceTypes=='array'&&$type=='array'){out+=' if ('+($dataType)+' == \'string\' || '+($dataType)+' == \'number\' || '+($dataType)+' == \'boolean\' || '+($data)+' == null) '+($coerced)+' = ['+($data)+']; ';}}}
out+=' '+($bracesCoercion)+' if ('+($coerced)+' === undefined) {   ';var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+($errorKeyword||'type')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: { type: \'';if($typeIsArray){out+=''+($typeSchema.join(","));}else{out+=''+($typeSchema);}
out+='\' } ';if(it.opts.messages!==false){out+=' , message: \'should be ';if($typeIsArray){out+=''+($typeSchema.join(","));}else{out+=''+($typeSchema);}
out+='\' ';}
if(it.opts.verbose){out+=' , schema: validate.schema'+($schemaPath)+' , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+(__err)+']); ';}else{out+=' validate.errors = ['+(__err)+']; return false; ';}}else{out+=' var err = '+(__err)+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}
out+=' } else {  ';var $parentData=$dataLvl?'data'+(($dataLvl-1)||''):'parentData',$parentDataProperty=$dataLvl?it.dataPathArr[$dataLvl]:'parentDataProperty';out+=' '+($data)+' = '+($coerced)+'; ';if(!$dataLvl){out+='if ('+($parentData)+' !== undefined)';}
out+=' '+($parentData)+'['+($parentDataProperty)+'] = '+($coerced)+'; } ';}else{var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+($errorKeyword||'type')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: { type: \'';if($typeIsArray){out+=''+($typeSchema.join(","));}else{out+=''+($typeSchema);}
out+='\' } ';if(it.opts.messages!==false){out+=' , message: \'should be ';if($typeIsArray){out+=''+($typeSchema.join(","));}else{out+=''+($typeSchema);}
out+='\' ';}
if(it.opts.verbose){out+=' , schema: validate.schema'+($schemaPath)+' , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+(__err)+']); ';}else{out+=' validate.errors = ['+(__err)+']; return false; ';}}else{out+=' var err = '+(__err)+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}}
out+=' } ';}}
if(it.schema.$ref&&!$refKeywords){out+=' '+(it.RULES.all.$ref.code(it,'$ref'))+' ';if($breakOnError){out+=' } if (errors === ';if($top){out+='0';}else{out+='errs_'+($lvl);}
out+=') { ';$closingBraces2+='}';}}else{var arr2=it.RULES;if(arr2){var $rulesGroup,i2=-1,l2=arr2.length-1;while(i2<l2){$rulesGroup=arr2[i2+=1];if($shouldUseGroup($rulesGroup)){if($rulesGroup.type){out+=' if ('+(it.util.checkDataType($rulesGroup.type,$data))+') { ';}
if(it.opts.useDefaults&&!it.compositeRule){if($rulesGroup.type=='object'&&it.schema.properties){var $schema=it.schema.properties,$schemaKeys=Object.keys($schema);var arr3=$schemaKeys;if(arr3){var $propertyKey,i3=-1,l3=arr3.length-1;while(i3<l3){$propertyKey=arr3[i3+=1];var $sch=$schema[$propertyKey];if($sch.default!==undefined){var $passData=$data+it.util.getProperty($propertyKey);out+='  if ('+($passData)+' === undefined ';if(it.opts.useDefaults=='empty'){out+=' || '+($passData)+' === null || '+($passData)+' === \'\' ';}
out+=' ) '+($passData)+' = ';if(it.opts.useDefaults=='shared'){out+=' '+(it.useDefault($sch.default))+' ';}else{out+=' '+(JSON.stringify($sch.default))+' ';}
out+='; ';}}}}else if($rulesGroup.type=='array'&&Array.isArray(it.schema.items)){var arr4=it.schema.items;if(arr4){var $sch,$i=-1,l4=arr4.length-1;while($i<l4){$sch=arr4[$i+=1];if($sch.default!==undefined){var $passData=$data+'['+$i+']';out+='  if ('+($passData)+' === undefined ';if(it.opts.useDefaults=='empty'){out+=' || '+($passData)+' === null || '+($passData)+' === \'\' ';}
out+=' ) '+($passData)+' = ';if(it.opts.useDefaults=='shared'){out+=' '+(it.useDefault($sch.default))+' ';}else{out+=' '+(JSON.stringify($sch.default))+' ';}
out+='; ';}}}}}
var arr5=$rulesGroup.rules;if(arr5){var $rule,i5=-1,l5=arr5.length-1;while(i5<l5){$rule=arr5[i5+=1];if($shouldUseRule($rule)){var $code=$rule.code(it,$rule.keyword,$rulesGroup.type);if($code){out+=' '+($code)+' ';if($breakOnError){$closingBraces1+='}';}}}}}
if($breakOnError){out+=' '+($closingBraces1)+' ';$closingBraces1='';}
if($rulesGroup.type){out+=' } ';if($typeSchema&&$typeSchema===$rulesGroup.type&&!$coerceToTypes){out+=' else { ';var $schemaPath=it.schemaPath+'.type',$errSchemaPath=it.errSchemaPath+'/type';var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+($errorKeyword||'type')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: { type: \'';if($typeIsArray){out+=''+($typeSchema.join(","));}else{out+=''+($typeSchema);}
out+='\' } ';if(it.opts.messages!==false){out+=' , message: \'should be ';if($typeIsArray){out+=''+($typeSchema.join(","));}else{out+=''+($typeSchema);}
out+='\' ';}
if(it.opts.verbose){out+=' , schema: validate.schema'+($schemaPath)+' , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+(__err)+']); ';}else{out+=' validate.errors = ['+(__err)+']; return false; ';}}else{out+=' var err = '+(__err)+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}
out+=' } ';}}
if($breakOnError){out+=' if (errors === ';if($top){out+='0';}else{out+='errs_'+($lvl);}
out+=') { ';$closingBraces2+='}';}}}}}
if($breakOnError){out+=' '+($closingBraces2)+' ';}
if($top){if($async){out+=' if (errors === 0) return data;           ';out+=' else throw new ValidationError(vErrors); ';}else{out+=' validate.errors = vErrors; ';out+=' return errors === 0;       ';}
out+=' }; return validate;';}else{out+=' var '+($valid)+' = errors === errs_'+($lvl)+';';}
out=it.util.cleanUpCode(out);if($top){out=it.util.finalCleanUpCode(out,$async);}
function $shouldUseGroup($rulesGroup){var rules=$rulesGroup.rules;for(var i=0;i<rules.length;i++)
if($shouldUseRule(rules[i]))return true;}
function $shouldUseRule($rule){return it.schema[$rule.keyword]!==undefined||($rule.implements&&$ruleImplementsSomeKeyword($rule));}
function $ruleImplementsSomeKeyword($rule){var impl=$rule.implements;for(var i=0;i<impl.length;i++)
if(it.schema[impl[i]]!==undefined)return true;}
return out;}}),(function(module,exports,__webpack_require__){"use strict";module.exports=function generate__limit(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data='data'+($dataLvl||'');var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=' var schema'+($lvl)+' = '+(it.util.getData($schema.$data,$dataLvl,it.dataPathArr))+'; ';$schemaValue='schema'+$lvl;}else{$schemaValue=$schema;}
var $isMax=$keyword=='maximum',$exclusiveKeyword=$isMax?'exclusiveMaximum':'exclusiveMinimum',$schemaExcl=it.schema[$exclusiveKeyword],$isDataExcl=it.opts.$data&&$schemaExcl&&$schemaExcl.$data,$op=$isMax?'<':'>',$notOp=$isMax?'>':'<',$errorKeyword=undefined;if($isDataExcl){var $schemaValueExcl=it.util.getData($schemaExcl.$data,$dataLvl,it.dataPathArr),$exclusive='exclusive'+$lvl,$exclType='exclType'+$lvl,$exclIsNumber='exclIsNumber'+$lvl,$opExpr='op'+$lvl,$opStr='\' + '+$opExpr+' + \'';out+=' var schemaExcl'+($lvl)+' = '+($schemaValueExcl)+'; ';$schemaValueExcl='schemaExcl'+$lvl;out+=' var '+($exclusive)+'; var '+($exclType)+' = typeof '+($schemaValueExcl)+'; if ('+($exclType)+' != \'boolean\' && '+($exclType)+' != \'undefined\' && '+($exclType)+' != \'number\') { ';var $errorKeyword=$exclusiveKeyword;var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+($errorKeyword||'_exclusiveLimit')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: {} ';if(it.opts.messages!==false){out+=' , message: \''+($exclusiveKeyword)+' should be boolean\' ';}
if(it.opts.verbose){out+=' , schema: validate.schema'+($schemaPath)+' , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+(__err)+']); ';}else{out+=' validate.errors = ['+(__err)+']; return false; ';}}else{out+=' var err = '+(__err)+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}
out+=' } else if ( ';if($isData){out+=' ('+($schemaValue)+' !== undefined && typeof '+($schemaValue)+' != \'number\') || ';}
out+=' '+($exclType)+' == \'number\' ? ( ('+($exclusive)+' = '+($schemaValue)+' === undefined || '+($schemaValueExcl)+' '+($op)+'= '+($schemaValue)+') ? '+($data)+' '+($notOp)+'= '+($schemaValueExcl)+' : '+($data)+' '+($notOp)+' '+($schemaValue)+' ) : ( ('+($exclusive)+' = '+($schemaValueExcl)+' === true) ? '+($data)+' '+($notOp)+'= '+($schemaValue)+' : '+($data)+' '+($notOp)+' '+($schemaValue)+' ) || '+($data)+' !== '+($data)+') { var op'+($lvl)+' = '+($exclusive)+' ? \''+($op)+'\' : \''+($op)+'=\'; ';if($schema===undefined){$errorKeyword=$exclusiveKeyword;$errSchemaPath=it.errSchemaPath+'/'+$exclusiveKeyword;$schemaValue=$schemaValueExcl;$isData=$isDataExcl;}}else{var $exclIsNumber=typeof $schemaExcl=='number',$opStr=$op;if($exclIsNumber&&$isData){var $opExpr='\''+$opStr+'\'';out+=' if ( ';if($isData){out+=' ('+($schemaValue)+' !== undefined && typeof '+($schemaValue)+' != \'number\') || ';}
out+=' ( '+($schemaValue)+' === undefined || '+($schemaExcl)+' '+($op)+'= '+($schemaValue)+' ? '+($data)+' '+($notOp)+'= '+($schemaExcl)+' : '+($data)+' '+($notOp)+' '+($schemaValue)+' ) || '+($data)+' !== '+($data)+') { ';}else{if($exclIsNumber&&$schema===undefined){$exclusive=true;$errorKeyword=$exclusiveKeyword;$errSchemaPath=it.errSchemaPath+'/'+$exclusiveKeyword;$schemaValue=$schemaExcl;$notOp+='=';}else{if($exclIsNumber)$schemaValue=Math[$isMax?'min':'max']($schemaExcl,$schema);if($schemaExcl===($exclIsNumber?$schemaValue:true)){$exclusive=true;$errorKeyword=$exclusiveKeyword;$errSchemaPath=it.errSchemaPath+'/'+$exclusiveKeyword;$notOp+='=';}else{$exclusive=false;$opStr+='=';}}
var $opExpr='\''+$opStr+'\'';out+=' if ( ';if($isData){out+=' ('+($schemaValue)+' !== undefined && typeof '+($schemaValue)+' != \'number\') || ';}
out+=' '+($data)+' '+($notOp)+' '+($schemaValue)+' || '+($data)+' !== '+($data)+') { ';}}
$errorKeyword=$errorKeyword||$keyword;var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+($errorKeyword||'_limit')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: { comparison: '+($opExpr)+', limit: '+($schemaValue)+', exclusive: '+($exclusive)+' } ';if(it.opts.messages!==false){out+=' , message: \'should be '+($opStr)+' ';if($isData){out+='\' + '+($schemaValue);}else{out+=''+($schemaValue)+'\'';}}
if(it.opts.verbose){out+=' , schema:  ';if($isData){out+='validate.schema'+($schemaPath);}else{out+=''+($schema);}
out+='         , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+(__err)+']); ';}else{out+=' validate.errors = ['+(__err)+']; return false; ';}}else{out+=' var err = '+(__err)+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}
out+=' } ';if($breakOnError){out+=' else { ';}
return out;}}),(function(module,exports,__webpack_require__){"use strict";module.exports=function generate__limitItems(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data='data'+($dataLvl||'');var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=' var schema'+($lvl)+' = '+(it.util.getData($schema.$data,$dataLvl,it.dataPathArr))+'; ';$schemaValue='schema'+$lvl;}else{$schemaValue=$schema;}
var $op=$keyword=='maxItems'?'>':'<';out+='if ( ';if($isData){out+=' ('+($schemaValue)+' !== undefined && typeof '+($schemaValue)+' != \'number\') || ';}
out+=' '+($data)+'.length '+($op)+' '+($schemaValue)+') { ';var $errorKeyword=$keyword;var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+($errorKeyword||'_limitItems')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: { limit: '+($schemaValue)+' } ';if(it.opts.messages!==false){out+=' , message: \'should NOT have ';if($keyword=='maxItems'){out+='more';}else{out+='fewer';}
out+=' than ';if($isData){out+='\' + '+($schemaValue)+' + \'';}else{out+=''+($schema);}
out+=' items\' ';}
if(it.opts.verbose){out+=' , schema:  ';if($isData){out+='validate.schema'+($schemaPath);}else{out+=''+($schema);}
out+='         , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+(__err)+']); ';}else{out+=' validate.errors = ['+(__err)+']; return false; ';}}else{out+=' var err = '+(__err)+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}
out+='} ';if($breakOnError){out+=' else { ';}
return out;}}),(function(module,exports,__webpack_require__){"use strict";module.exports=function generate__limitLength(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data='data'+($dataLvl||'');var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=' var schema'+($lvl)+' = '+(it.util.getData($schema.$data,$dataLvl,it.dataPathArr))+'; ';$schemaValue='schema'+$lvl;}else{$schemaValue=$schema;}
var $op=$keyword=='maxLength'?'>':'<';out+='if ( ';if($isData){out+=' ('+($schemaValue)+' !== undefined && typeof '+($schemaValue)+' != \'number\') || ';}
if(it.opts.unicode===false){out+=' '+($data)+'.length ';}else{out+=' ucs2length('+($data)+') ';}
out+=' '+($op)+' '+($schemaValue)+') { ';var $errorKeyword=$keyword;var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+($errorKeyword||'_limitLength')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: { limit: '+($schemaValue)+' } ';if(it.opts.messages!==false){out+=' , message: \'should NOT be ';if($keyword=='maxLength'){out+='longer';}else{out+='shorter';}
out+=' than ';if($isData){out+='\' + '+($schemaValue)+' + \'';}else{out+=''+($schema);}
out+=' characters\' ';}
if(it.opts.verbose){out+=' , schema:  ';if($isData){out+='validate.schema'+($schemaPath);}else{out+=''+($schema);}
out+='         , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+(__err)+']); ';}else{out+=' validate.errors = ['+(__err)+']; return false; ';}}else{out+=' var err = '+(__err)+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}
out+='} ';if($breakOnError){out+=' else { ';}
return out;}}),(function(module,exports,__webpack_require__){"use strict";module.exports=function generate__limitProperties(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data='data'+($dataLvl||'');var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=' var schema'+($lvl)+' = '+(it.util.getData($schema.$data,$dataLvl,it.dataPathArr))+'; ';$schemaValue='schema'+$lvl;}else{$schemaValue=$schema;}
var $op=$keyword=='maxProperties'?'>':'<';out+='if ( ';if($isData){out+=' ('+($schemaValue)+' !== undefined && typeof '+($schemaValue)+' != \'number\') || ';}
out+=' Object.keys('+($data)+').length '+($op)+' '+($schemaValue)+') { ';var $errorKeyword=$keyword;var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+($errorKeyword||'_limitProperties')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: { limit: '+($schemaValue)+' } ';if(it.opts.messages!==false){out+=' , message: \'should NOT have ';if($keyword=='maxProperties'){out+='more';}else{out+='fewer';}
out+=' than ';if($isData){out+='\' + '+($schemaValue)+' + \'';}else{out+=''+($schema);}
out+=' properties\' ';}
if(it.opts.verbose){out+=' , schema:  ';if($isData){out+='validate.schema'+($schemaPath);}else{out+=''+($schema);}
out+='         , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+(__err)+']); ';}else{out+=' validate.errors = ['+(__err)+']; return false; ';}}else{out+=' var err = '+(__err)+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}
out+='} ';if($breakOnError){out+=' else { ';}
return out;}}),(function(module,exports){exports.endianness=function(){return 'LE'};exports.hostname=function(){if(typeof location!=='undefined'){return location.hostname}
else return '';};exports.loadavg=function(){return[]};exports.uptime=function(){return 0};exports.freemem=function(){return Number.MAX_VALUE;};exports.totalmem=function(){return Number.MAX_VALUE;};exports.cpus=function(){return[]};exports.type=function(){return 'Browser'};exports.release=function(){if(typeof navigator!=='undefined'){return navigator.appVersion;}
return '';};exports.networkInterfaces=exports.getNetworkInterfaces=function(){return{}};exports.arch=function(){return 'javascript'};exports.platform=function(){return 'browser'};exports.tmpdir=exports.tmpDir=function(){return '/tmp';};exports.EOL='\n';exports.homedir=function(){return '/'};}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_1_node_lists_types_Node_Type__=__webpack_require__(35);var __WEBPACK_IMPORTED_MODULE_2_node_lists_types_Node_Consensus_Type__=__webpack_require__(44);var __WEBPACK_IMPORTED_MODULE_3_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_4_main_blockchain_Blockchain__=__webpack_require__(5);const MAX_NUMBER_OF_BACKED_BY_FULL_NODE=30;const MAX_NUMBER_OF_BACKED_BY_LIGHT_NODE=3;class NodesWaitlistObject{constructor(sckAddresses,nodeType,nodeConsensusType,level,backedBy,connected=false,socket=null){this.sckAddresses=sckAddresses;this.socket=socket;this.connected=false;this.blocked=false;this.blockedLastTime=0;this.checked=false;if(backedBy==="fallback")
this.isFallback=true;else
this.isFallback=false;this.backedByConnected=0;this.backedBy=[];this.pushBackedBy(backedBy,connected);this.connecting=false;this.errorTrials=0;this.lastTimeChecked=0;this.failsChecking=0;this.level=level||0;if(nodeType===undefined)nodeType=__WEBPACK_IMPORTED_MODULE_1_node_lists_types_Node_Type__["a"].NODE_TERMINAL;this.nodeType=nodeType;this.nodeConsensusType=nodeConsensusType||__WEBPACK_IMPORTED_MODULE_2_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_PEER;}
refreshLastTimeChecked(){this.lastTimeChecked=new Date().getTime();}
checkLastTimeChecked(timeTryReconnectAgain){let time=new Date().getTime();if((time-this.lastTimeChecked)>=timeTryReconnectAgain+this.errorTrials*(3000+Math.random()*8000))
return true;return false;}
socketConnected(socket){this.errorTrials=0;this.socket=socket;}
socketErrorConnected(){if(__WEBPACK_IMPORTED_MODULE_4_main_blockchain_Blockchain__["a"].MinerPoolManagement.minerPoolStarted&&[__WEBPACK_IMPORTED_MODULE_2_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_POOL,__WEBPACK_IMPORTED_MODULE_2_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_SERVER,__WEBPACK_IMPORTED_MODULE_2_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_SERVER_FOR_MINER,__WEBPACK_IMPORTED_MODULE_2_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_SERVER_FOR_POOL].indexOf(this.nodeConsensusType)>=0){this.errorTrials=0;return;}
this.errorTrials++;if(this.isFallback===true){if(true)
this.errorTrials=Math.min(this.errorTrials,3+Math.floor(Math.random()*2));else
this.errorTrials=Math.min(this.errorTrials,4+Math.floor(Math.random()*5));}}
checkIsConnected(){for(let i=0;i<this.sckAddresses.length;i++){let socket=__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].searchNodeSocketByAddress(this.sckAddresses[i],'all',{"ip":true,"uuid":true});if(socket)return socket;}
return null;}
toString(){let text="";for(let i=0;i<this.sckAddresses.length;i++)
text+=this.sckAddresses[i].toString()+"   ";return text;}
resetWaitlistNode(){this.lastTimeChecked=0;this.errorTrials=0;}
toJSON(){let obj={a:this.sckAddresses[0].getAddress(true,true),t:this.nodeType,ct:this.nodeConsensusType,};if(this.connected)obj.c=this.connected;return obj;}
pushBackedBy(sckAddress,connected){if(sckAddress&&typeof sckAddress==="object"&&sckAddress.node&&sckAddress.node.sckAddress)
sckAddress=sckAddress.node.sckAddress;for(let i=0;i<this.backedBy.length;i++)
if(this.backedBy[i].sckAddress===sckAddress){if(this.backedBy[i].connected!==connected){this.backedBy[i].connected=connected;if(connected)this.backedByConnected++;else this.backedByConnected--;}
return false;}
let max;if(this.nodeType===__WEBPACK_IMPORTED_MODULE_1_node_lists_types_Node_Type__["a"].NODE_WEB_PEER)
max=MAX_NUMBER_OF_BACKED_BY_LIGHT_NODE;else if(this.nodeType===__WEBPACK_IMPORTED_MODULE_1_node_lists_types_Node_Type__["a"].NODE_TERMINAL)
max=MAX_NUMBER_OF_BACKED_BY_FULL_NODE;if(this.backedBy.length<max){this.backedBy.push({socket:sckAddress,connected:connected,});if(connected)this.backedByConnected++;}}
removeBackedBy(sckAddress){for(let i=0;i<this.backedBy.length;i++)
if(this.backedBy[i].sckAddress===sckAddress){if(this.backedBy[i].connected)
this.backedByConnected--;this.backedBy.splice(i,1);return;}}
findBackedBy(sckAddress){for(let i=0;i<this.backedBy.length;i++)
if(this.backedBy[i].sckAddress===sckAddress)
return true;return null;}
sortingScore(){if(this.isFallback===true)return 1000000-this.errorTrials*100;let score=200+Math.random()*100;score+=(this.connected?50000:0);if(this.backedBy.length>0){score+=10*this.backedBy.length;score+=100*this.backedByConnected;}
if(this.sckAddresses[0].SSL)
score+=80000;if(this.socket){let socket=this.socket;if(socket.hasOwnProperty("socket"))socket=socket.socket;if(!socket.node.protocol.blocks)score-=300;else{let diff=Math.abs(__WEBPACK_IMPORTED_MODULE_4_main_blockchain_Blockchain__["a"].blockchain.blocks.length-socket.node.protocol.blocks);if(diff<=2)score+=10000;else
if(diff<=5)score+=5000;else
if(diff<=10)score+=1000;else
if(diff<=30)score+=100;else
if(diff>=30)score-=3000-diff;}}
score-=this.errorTrials*100;return score;}}
__webpack_exports__["a"]=(NodesWaitlistObject);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process){var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1__Mini_Blockchain__=__webpack_require__(397);var __WEBPACK_IMPORTED_MODULE_2__state_Mini_Blockchain_Accountant_Tree__=__webpack_require__(407);var __WEBPACK_IMPORTED_MODULE_3_consts_global__=__webpack_require__(45);var __WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__=__webpack_require__(18);class MiniBlockchainAdvanced extends __WEBPACK_IMPORTED_MODULE_1__Mini_Blockchain__["a"]{constructor(agent){super(agent);this._miniBlockchainSaveBlocks=0;}
async _loadBlockchain(){if(true)
return true;try{if(Object({"MINING_POOL_STATUS":undefined}).FORCE_LOAD!==undefined)throw "load blockchain simple";if(await this.prover.provesCalculated._loadProvesCalculated()===false)
throw "load blockchain simple";if(await this.accountantTree.loadMiniAccountant(undefined,0,true,"accountantTree")===false)
throw "load blockchain simple";if(await this.blocks.readBlockchainLength()===false)
throw "load blockchain simple";__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].info("============================================================================",__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.SAVING_MANAGER);__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].info("============================================================================",__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.SAVING_MANAGER);__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].info("                              Blockchain Virtualized "+this.blocks.length,__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.SAVING_MANAGER);__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].info("============================================================================",__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.SAVING_MANAGER);__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].info("============================================================================",__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.SAVING_MANAGER);let chainHash=await this.db.get("blockChainHash"+0);if(!chainHash){console.error("============================================================================");console.error("For Virtualized branch, you need to download a new blockchainDB3 because it is no longer compatible with your version");console.error("============================================================================");process.exit();}
if(this.blocks.length>100&&await this.transactions.checkVirtualizedTxId("6a81930823e659286cfffe592172c0f054d0e2a4760d0d51770ffab440d00bfa")===null){console.error("============================================================================");console.error("For Transactions branch, you need to download a new blockchainDB3 because it is no longer compatible with your version");console.error("============================================================================");process.exit();}}catch(exception){this.accountantTree.clear();__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].error("Virtualzied Blockchain couldn't be loaded",__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.SAVING_MANAGER,exception);if(exception==="load blockchain simple")
await this.inheritBlockchain.prototype._loadBlockchain.call(this);}
this._miniBlockchainSaveBlocks=this.blocks.length;return true;}
async saveMiniBlockchain(setGlobalVariable=true,useSemaphore=true){if(setGlobalVariable)
__WEBPACK_IMPORTED_MODULE_3_consts_global__["a"].MINIBLOCKCHAIN_ADVANCED_SAVED=false;try{let save=async()=>{let length=this.blocks.length;let serialization=this.accountantTree.serializeMiniAccountant(true,);if(this._miniBlockchainSaveBlocks>=length)return false;__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].info('Accountant Tree Saving ',__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.SAVING_MANAGER);console.info("accountant tree",this.accountantTree.root.hash.toString("hex"));console.info("accountant tree",this.accountantTree.root.edges.length);if(!(await this.accountantTree.saveMiniAccountant(true,"accountantTree",serialization)))
throw{message:"saveMiniAccountant couldn't be saved"};if(!(await this.blocks.saveBlockchainLength(length)))
throw{message:"save blockchain length couldn't be saved"};if(!(await this.prover.provesCalculated._saveProvesCalculated()))
throw{message:"save proves calculated couldn't be saved"};this._miniBlockchainSaveBlocks=length;return true;};if(useSemaphore){if(!(await this.semaphoreProcessing.processSempahoreCallback(save)))throw{message:"Saving was not done"};}else
if(!(await save()))throw{message:"Saving was not done"};__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].info('Accountant Tree Saved Successfully '+this.blocks.length,__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.SAVING_MANAGER);}catch(exception){__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].error('Accountant Tree Saving raised an error ',__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.SAVING_MANAGER,exception);}
if(setGlobalVariable)
__WEBPACK_IMPORTED_MODULE_3_consts_global__["a"].MINIBLOCKCHAIN_ADVANCED_SAVED=true;}}
__webpack_exports__["a"]=(MiniBlockchainAdvanced);}.call(__webpack_exports__,__webpack_require__(20)))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1_common_blockchain_ppow_blockchain_blockchain_PPoW_Blockchain__=__webpack_require__(923);var __WEBPACK_IMPORTED_MODULE_2_common_blockchain_interface_blockchain_blockchain_Interface_Blockchain__=__webpack_require__(398);var __WEBPACK_IMPORTED_MODULE_3__state_Mini_Blockchain_Accountant_Tree__=__webpack_require__(407);var __WEBPACK_IMPORTED_MODULE_4__blocks_Mini_Blockchain_Block__=__webpack_require__(965);var __WEBPACK_IMPORTED_MODULE_5__blocks_Mini_Blockchain_Block_Data__=__webpack_require__(968);var __WEBPACK_IMPORTED_MODULE_6_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Block_Creator__=__webpack_require__(249);var __WEBPACK_IMPORTED_MODULE_7__transactions_Mini_Blockchain_Transactions__=__webpack_require__(970);var __WEBPACK_IMPORTED_MODULE_8_common_utils_Revert_Actions_Revert_Actions__=__webpack_require__(118);var __WEBPACK_IMPORTED_MODULE_9_consts_global__=__webpack_require__(45);var __WEBPACK_IMPORTED_MODULE_10__blocks_Mini_Blockchain_Blocks__=__webpack_require__(971);let inheritBlockchain;if(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].POPOW_PARAMS.ACTIVATED)
inheritBlockchain=__WEBPACK_IMPORTED_MODULE_1_common_blockchain_ppow_blockchain_blockchain_PPoW_Blockchain__["a"];else
inheritBlockchain=__WEBPACK_IMPORTED_MODULE_2_common_blockchain_interface_blockchain_blockchain_Interface_Blockchain__["a"];class MiniBlockchain extends inheritBlockchain{constructor(agent){super(agent);this.accountantTree=new __WEBPACK_IMPORTED_MODULE_3__state_Mini_Blockchain_Accountant_Tree__["a"](this.db);this.inheritBlockchain=inheritBlockchain;}
_createBlockchainElements(){this.blocks=new __WEBPACK_IMPORTED_MODULE_10__blocks_Mini_Blockchain_Blocks__["a"](this,this.db);this.transactions=new __WEBPACK_IMPORTED_MODULE_7__transactions_Mini_Blockchain_Transactions__["a"](this);this.blockCreator=new __WEBPACK_IMPORTED_MODULE_6_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Block_Creator__["a"](this,this.db,__WEBPACK_IMPORTED_MODULE_4__blocks_Mini_Blockchain_Block__["a"],__WEBPACK_IMPORTED_MODULE_5__blocks_Mini_Blockchain_Block_Data__["a"]);}
async simulateNewBlock(block,revertAutomatically,revertActions,callback,showUpdate=true){if(!block)throw{message:"block is undefined"};if(!revertActions)revertActions=new __WEBPACK_IMPORTED_MODULE_8_common_utils_Revert_Actions_Revert_Actions__["a"](this);revertActions.push({name:"breakpoint"});let revertException=false;try{if(!block.blockValidation.blockValidationType['skip-mini-blockchain-simulation']){let result=this.accountantTree.updateAccount(block.data.minerAddress,block.reward,undefined,revertActions,showUpdate);if(!result)throw{message:"reward couldn't be set to the minerAddress"};if(await block.data.transactions.validateTransactions(block.height,block.blockValidation.blockValidationType)===false)
throw{message:"Validate Transactions is wrong"};if(block.blockValidation.blockValidationType['skip-validation-transactions-from-values']!==true){block.blockValidation.blockValidationType['skip-validation-transactions-from-values']=true;revertActions.push({name:"revert-skip-validation-transactions-from-values",block:block,value:true});}
if(!block.data.transactions.processBlockDataTransactions(block,+1,revertActions,showUpdate))
throw{message:"Process Block Data Transactions failed"};}
if(await callback()===false)
throw{message:"couldn't process the InterfaceBlockchain.prototype.includeBlockchainBlock"};}catch(ex){revertException=true;console.error("MiniBlockchain simulateNewBlock 1 raised an exception at blockHeight",ex,block?block.height:-1,ex,block?block.toJSON():'');}
let result=true;try{if(revertException||revertAutomatically){await revertActions.revertOperations();if(revertException)return false;}}catch(exception){console.log("MiniBlockchain Reverting Error raised an exception",exception);result=false;}
revertActions.clearUntilBreakpoint();return result;}
async includeBlockchainBlock(...args){let myArgs=args;if(await this.simulateNewBlock(args[0],false,args[4],()=>inheritBlockchain.prototype.includeBlockchainBlock.apply(this,myArgs),args[5])===false)throw{message:"Error includeBlockchainBlock MiniBlockchain "};return true;}
getBalances(address){return this.accountantTree.getBalances(address);}}
__webpack_exports__["a"]=(MiniBlockchain);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Block__=__webpack_require__(107);var __WEBPACK_IMPORTED_MODULE_1_common_blockchain_global_Blockchain_Genesis__=__webpack_require__(16);var __WEBPACK_IMPORTED_MODULE_2_common_blockchain_global_Blockchain_Mining_Reward__=__webpack_require__(56);var __WEBPACK_IMPORTED_MODULE_3_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_4_consts_global__=__webpack_require__(45);var __WEBPACK_IMPORTED_MODULE_5_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_6_common_blockchain_interface_blockchain_blocks_validation_Interface_Blockchain_Block_Validation__=__webpack_require__(140);var __WEBPACK_IMPORTED_MODULE_7_common_utils_Revert_Actions_Revert_Actions__=__webpack_require__(118);var __WEBPACK_IMPORTED_MODULE_8__Interface_Blockchain_Basic__=__webpack_require__(925);var __WEBPACK_IMPORTED_MODULE_9__blocks_hard_forks_Interface_Blockchain_Hard_Forks__=__webpack_require__(955);var __WEBPACK_IMPORTED_MODULE_10_common_utils_logging_Log__=__webpack_require__(18);class InterfaceBlockchain extends __WEBPACK_IMPORTED_MODULE_8__Interface_Blockchain_Basic__["a"]{constructor(agent){super(agent);this.hardForks=new __WEBPACK_IMPORTED_MODULE_9__blocks_hard_forks_Interface_Blockchain_Hard_Forks__["a"](this);}
async validateBlockchain(){for(let i=this.blocks.blocksStartingPoint;i<this.blocks.length;i++){let block=await this.blocks.getBlock(i);if(await this.validateBlockchainBlock(block)===false)
return false;}
return true;}
async simulateNewBlock(block,revertAutomatically,revertActions,callback,showUpdate=true){return await callback();}
async _blockIncluded(block){}
async includeBlockchainBlock(block,resetMining,socketsAvoidBroadcast,saveBlock=true,revertActions,showUpdate){if(!block.reward)block.reward=__WEBPACK_IMPORTED_MODULE_2_common_blockchain_global_Blockchain_Mining_Reward__["a"].getReward(block.height);if(!block.blockValidation)
block.blockValidation=this.createBlockValidation();else{block.blockValidation.getBlockCallBack=this.getBlock.bind(this);block.blockValidation.getDifficultyCallback=this.getDifficultyTarget.bind(this);block.blockValidation.getTimeStampCallback=this.getTimeStamp.bind(this);block.blockValidation.getHashCallback=this.getHash.bind(this);block.blockValidation.getChainHashCallback=this.getChainHash.bind(this);}
if(!(await this.validateBlockchainBlock(block)))
return false;if(block.height!==this.blocks.length)
throw{message:'height of a new block is not good... ',height:block.height,blocksLength:this.blocks.length};if(!block.blockValidation.blockValidationType['skip-accountant-tree-validation']&&block.height===__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.WALLET_RECOVERY-1)
await this.hardForks.revertAllTransactions("WEBD$gC9h7iFUURqhGUL23U@7Ccyb@X$2BCCpSH$",150940,revertActions,18674877890000,"WEBD$gDZwjjD7ZE5+AE+44ITr8yo5E2aXYT3mEH$");await this._blockIncluded(block);await this.blocks.addBlock(block,revertActions,saveBlock,showUpdate,socketsAvoidBroadcast);await this._onBlockCreated(block,saveBlock);if(resetMining&&this.mining)
this.mining.resetMining();return true;}
_onBlockCreated(block,saveBlock){if(!block.blockValidation.blockValidationType["skip-recalculating-hash-rate"])
this.blocks.recalculateNetworkHashRate();}
async validateBlockchainBlock(block){if(block instanceof __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Block__["a"]===false)
throw{message:'block is not an instance of InterfaceBlockchainBlock ',height:block.height};if(block.height===0)
__WEBPACK_IMPORTED_MODULE_1_common_blockchain_global_Blockchain_Genesis__["a"].validateGenesis(block);if(!block.blockValidation)
block.blockValidation=this.createBlockValidation();if(!(await block.validateBlock(block.height)))
throw{message:'block validation failed'};if(!block.blockValidation.blockValidationType['skip-difficulty-recalculation'])
await block.calculateDifficultyTarget();return true;}
async getBlock(height=this.blocks.length-1){if(height===-1)return __WEBPACK_IMPORTED_MODULE_1_common_blockchain_global_Blockchain_Genesis__["a"];if(height>=this.blocks.length)throw{message:"getBlock invalid height ",height:height,blocksLength:this.blocks.length};let block=await this.blocks.loadingManager.getBlock(height);if(!block)throw{message:"getBlock invalid data height",height:height,blocksLength:this.blocks.length};return block;}
async getBlockByHash(sHash){try{const nBlockNumber=await this.blocks.db.get('blockHashInversed'+sHash);if(typeof nBlockNumber==='number'){return await this.getBlock(nBlockNumber);}
return null;}
catch(e){return null;}}
async getDifficultyTarget(height=this.blocks.length-1,POSRecalculation=true){if(height===-1)return __WEBPACK_IMPORTED_MODULE_1_common_blockchain_global_Blockchain_Genesis__["a"].difficultyTarget;if(height===__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.POS_ACTIVATION-1)return __WEBPACK_IMPORTED_MODULE_1_common_blockchain_global_Blockchain_Genesis__["a"].difficultyTargetPOS;if(POSRecalculation&&height>=__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.POS_ACTIVATION-1){if(height%30===29)height=height-10;else if(height%30===19)height=height-20;}
if(height>=this.blocks.length)throw{message:"getDifficultyTarget invalid height ",height:height,blocksLength:this.blocks.length};let difficulty=await this.blocks.loadingManager.getBlockDifficulty(height);if(!difficulty)
throw{message:"getDifficultyTarget invalid",height:height,blocksLength:this.blocks.length};return difficulty;}
async getTimeStamp(height=this.blocks.length-1){if(height<=-1)return __WEBPACK_IMPORTED_MODULE_1_common_blockchain_global_Blockchain_Genesis__["a"].timeStamp;if(height>=this.blocks.length)throw{message:"getTimeStamp invalid height ",height:height};let timeStamp=await this.blocks.loadingManager.getBlockTimestamp(height);if(!timeStamp)throw{message:"getTimeStamp invalid height ",height:height};return timeStamp;}
async getHash(height=this.blocks.length-1){if(height===-1)return __WEBPACK_IMPORTED_MODULE_1_common_blockchain_global_Blockchain_Genesis__["a"].hashPrev;if(height>=this.blocks.length)throw{message:"getHash invalid height",height:height};let hash=await this.blocks.loadingManager.getBlockHash(height);if(!hash)throw{message:"getHash invalid height ",height:height};return hash;}
async getChainHash(height=this.blocks.length-1){if(height===-1)return __WEBPACK_IMPORTED_MODULE_1_common_blockchain_global_Blockchain_Genesis__["a"].hash;if(height>=this.blocks.length)
throw{message:"getChainHash invalid height",height:height};let chainHash=await this.blocks.loadingManager.getBlockChainHash(height);if(!chainHash)
throw{message:"getChainHash invalid height ",height:height};return chainHash;}
async saveBlockchain(startingHeight=this.blocks.blocksStartingPoint,endingHeight=this.blocks.length){if(true)
return true;__WEBPACK_IMPORTED_MODULE_4_consts_global__["a"].INTERFACE_BLOCKCHAIN_SAVED=false;for(let i=startingHeight;i<endingHeight;i++){let block=await this.getBlock(i);if(block)
this.blocks.savingManager.addBlockToSave(block);}
console.warn("Saving Blockchain. Starting from ",startingHeight,endingHeight);console.warn("Successfully saving blocks ",startingHeight,endingHeight);__WEBPACK_IMPORTED_MODULE_4_consts_global__["a"].INTERFACE_BLOCKCHAIN_SAVED=true;return true;}
async _loadBlockchain(startingPoint=0,numBlocks){if(true)
return true;if(!numBlocks){numBlocks=await this.blocks.loadingManager.readBlockchainLength();await this.blocks.clearBlocks();this.accountantTree.clear();}
__WEBPACK_IMPORTED_MODULE_4_consts_global__["a"].INTERFACE_BLOCKCHAIN_LOADING=true;let answer=true;let revertActions=new __WEBPACK_IMPORTED_MODULE_7_common_utils_Revert_Actions_Revert_Actions__["a"](this);try{let index;try{for(index=startingPoint;index<numBlocks;++index){let block=await this._loadBlock(index,undefined,revertActions);if(index>0&&index%50000===0)
await this.db.restart();if(index>0&&index%10000===0)
await this.blocks.savingManager.saveBlockchain();}
console.info("Loading Complete");await this.blocks.savingManager.saveBlockchain();await this.db.restart();}catch(exception){console.error("Error loading block",index,exception);}}catch(exception){if(this.accountantTree)
__WEBPACK_IMPORTED_MODULE_10_common_utils_logging_Log__["a"].error("serializeMiniAccountantTreeERRROR",__WEBPACK_IMPORTED_MODULE_10_common_utils_logging_Log__["a"].LOG_TYPE.SAVING_MANAGER,this.accountantTree.serializeMiniAccountant().toString("hex"));__WEBPACK_IMPORTED_MODULE_10_common_utils_logging_Log__["a"].error("serializeMiniAccountantTreeERRROR",__WEBPACK_IMPORTED_MODULE_10_common_utils_logging_Log__["a"].LOG_TYPE.SAVING_MANAGER,this.blocks.length-1);__WEBPACK_IMPORTED_MODULE_10_common_utils_logging_Log__["a"].error("blockchain.load raised an exception",__WEBPACK_IMPORTED_MODULE_10_common_utils_logging_Log__["a"].LOG_TYPE.SAVING_MANAGER,exception);answer=false}
__WEBPACK_IMPORTED_MODULE_4_consts_global__["a"].INTERFACE_BLOCKCHAIN_LOADING=false;return answer;}
async _loadBlock(index,blockValidation,revertActions){if(!blockValidation)
blockValidation=this.createBlockValidation();revertActions.push({name:"breakpoint"});let block=await this.blockCreator._createBlockNew(index,blockValidation,undefined,undefined,[]);try{if(await block.loadBlock()===false)
throw{message:"no block to load was found"};if(await this.includeBlockchainBlock(block,undefined,"all",false,revertActions,false)){if(index%100===0)
console.warn("blockchain loaded successfully index ",index);}
else{console.error("blockchain is invalid at index "+index);throw{message:"blockchain is invalid at index ",height:index};}}catch(exception){console.error("blockchain LOADING stopped at "+index,exception);await revertActions.revertOperations("breakpoint");throw exception;}
await block.saveBlockDifficulty();await block.saveBlockHash();await block.saveBlockHashInversed();await block.saveBlockChainHash();await block.saveBlockTimestamp();await block.saveChainWork();for(const transaction of block.data.transactions.transactions)
await block.data.transactions.saveVirtualizedTxId(transaction.txId,block.height);return block;}
async removeBlockchain(index){await this.blocks.spliceBlocks(index,true);await this.blocks.saveBlockchainLength();return true;}
createBlockValidation(){return new __WEBPACK_IMPORTED_MODULE_6_common_blockchain_interface_blockchain_blocks_validation_Interface_Blockchain_Block_Validation__["a"](this.getBlock.bind(this),this.getDifficultyTarget.bind(this),this.getTimeStamp.bind(this),this.getHash.bind(this),this.getChainHash.bind(this),{});}
async saveBlockchainTerminated(){if(true)
return true;await this.blocks.savingManager.saveAllBlocks();}}
__webpack_exports__["a"]=(InterfaceBlockchain);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1__pending_Transactions_Pending_Queue__=__webpack_require__(926);var __WEBPACK_IMPORTED_MODULE_2__transaction_Interface_Blockchain_Transaction__=__webpack_require__(400);var __WEBPACK_IMPORTED_MODULE_3_common_satoshmindb_Interface_SatoshminDB__=__webpack_require__(69);var __WEBPACK_IMPORTED_MODULE_4__wizard_Interface_Blockchain_Transactions_Wizard__=__webpack_require__(251);var __WEBPACK_IMPORTED_MODULE_5__Interface_Blockchain_Transactions_Events__=__webpack_require__(933);class InterfaceBlockchainTransactions extends __WEBPACK_IMPORTED_MODULE_5__Interface_Blockchain_Transactions_Events__["a"]{constructor(blockchain,wallet){super(blockchain);this.wallet=wallet;let db=new __WEBPACK_IMPORTED_MODULE_3_common_satoshmindb_Interface_SatoshminDB__["a"](__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].DATABASE_NAMES.TRANSACTIONS_DATABASE);this.pendingQueue=new __WEBPACK_IMPORTED_MODULE_1__pending_Transactions_Pending_Queue__["a"](this,blockchain,db);this.wizard=new __WEBPACK_IMPORTED_MODULE_4__wizard_Interface_Blockchain_Transactions_Wizard__["a"](this,blockchain,wallet);}
async checkVirtualizedTxId(txId){if(Buffer.isBuffer(txId))txId=txId.toString('hex');try{return this.blockchain.db.get('transactionID-'+txId);}
catch(err){console.error('ERROR on saving TxId: '+txId,err);}}
_createTransaction(from,to,nonce,timeLock,version,txId,validateFrom,validateTo,validateNonce,validateTimeLock,validateVersion,validateTxId){return new __WEBPACK_IMPORTED_MODULE_2__transaction_Interface_Blockchain_Transaction__["a"](this.blockchain,from,to,nonce,timeLock,txId,validateFrom,validateTo,validateNonce,validateTimeLock,validateVersion,validateTxId);}
_createTransactionFromBuffer(buffer,offset=0){let transaction=this._createTransaction(undefined,undefined,0,0xFFFFFFFF,0x00,new Buffer(32),false,false,false,false,false,false);offset=transaction.deserializeTransaction(buffer,offset);return{transaction:transaction,offset:offset};}
setWallet(newWallet){this.wallet=newWallet;this.wizard.wallet=newWallet;}}
__webpack_exports__["a"]=(InterfaceBlockchainTransactions);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0__Interface_Blockchain_Transaction_From__=__webpack_require__(401);var __WEBPACK_IMPORTED_MODULE_1__Interface_Blockchain_Transaction_To__=__webpack_require__(402);var __WEBPACK_IMPORTED_MODULE_2_common_crypto_WebDollar_Crypto__=__webpack_require__(28);var __WEBPACK_IMPORTED_MODULE_3_common_crypto_WebDollar_Crypto_Data__=__webpack_require__(106);var __WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_5_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_6_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_7_common_utils_coins_WebDollar_Coins__=__webpack_require__(32);var __WEBPACK_IMPORTED_MODULE_8__wizard_Interface_Blockchain_Transactions_Wizard__=__webpack_require__(251);var __WEBPACK_IMPORTED_MODULE_9__addresses_Interface_Blockchain_Address_Helper__=__webpack_require__(17);class InterfaceBlockchainTransaction{constructor(blockchain,from,to,nonce,timeLock,version,txId,validateFrom=true,validateTo=true,validateNonce=true,validateTimeLock=true,validateVersion=true,validateTxId=true){this.blockchain=blockchain;this.from=null;this.to=null;this._confirmed=false;if(validateTimeLock)
if(!timeLock)
this.timeLock=blockchain.blocks.length-1;else
this.timeLock=timeLock;if(validateVersion)
if(!version){if(this.timeLock<__WEBPACK_IMPORTED_MODULE_6_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.TRANSACTIONS_BUG_2_BYTES)version=0x00;else
if(this.timeLock>=__WEBPACK_IMPORTED_MODULE_6_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.TRANSACTIONS_BUG_2_BYTES&&this.timeLock<__WEBPACK_IMPORTED_MODULE_6_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.TRANSACTIONS_OPTIMIZATION)version=0x01;else version=0x02;}
this.version=version;try{if(!(from instanceof __WEBPACK_IMPORTED_MODULE_0__Interface_Blockchain_Transaction_From__["a"]))
from=this._createTransactionFrom(from);this.from=from;}catch(exception){console.error("Transaction From Error",exception);throw typeof exception==="string"?"Transaction From Error "+exception:exception;}
try{if(!(to instanceof __WEBPACK_IMPORTED_MODULE_1__Interface_Blockchain_Transaction_To__["a"]))
to=this._createTransactionTo(to);this.to=to;}catch(exception){console.error("Transaction To Error",exception);throw typeof exception==="string"?"Transaction To Error "+exception:exception;}
if(validateNonce)
if(!nonce)
nonce=this._computeNonce();if(validateVersion)
if(version===0x00)nonce=nonce%0x100;else if(version>=0x01)nonce=nonce%0X10000;this.nonce=nonce;try{if(validateFrom)
this.from.validateFrom();}catch(exception){console.error("Transaction From Error 2",exception);throw typeof exception==="string"?"Transaction From Error "+exception:exception;}
try{if(validateTo)
this.to.validateTo();}catch(exception){console.error("Transaction To Error2",exception);throw typeof exception==="string"?"Transaction To Error "+exception:exception;}
if(validateTxId)
if(!txId.equals(this.txId))
throw{message:"TxId is invalid"};}
_createTransactionFrom(from){return new __WEBPACK_IMPORTED_MODULE_0__Interface_Blockchain_Transaction_From__["a"](this,from);}
_createTransactionTo(to){return new __WEBPACK_IMPORTED_MODULE_1__Interface_Blockchain_Transaction_To__["a"](this,to);}
_computeNonce(){return Math.floor(Math.random()*0xFF);}
_computeTxId(){return __WEBPACK_IMPORTED_MODULE_2_common_crypto_WebDollar_Crypto__["a"].SHA256(__WEBPACK_IMPORTED_MODULE_2_common_crypto_WebDollar_Crypto__["a"].SHA256(this.serializeTransaction()));}
get txId(){if(!this._txId)
this._txId=this._computeTxId();return this._txId;}
setTransactionAddressFrom(address,currency){this.from=this.from.setFrom(address,currency);}
setTransactionAddressesTo(addresses,fee){this.to=this.to.setTo(addresses,fee);}
validateTransactionOnce(blockHeight,blockValidationType={}){if(!blockHeight)blockHeight=this.blockchain.blocks.length-1;if(typeof this.nonce!=='number')throw{message:'nonce is empty',nonce:this.nonce};if(typeof this.version!=="number")throw{message:'version is empty',version:this.version};if(typeof this.timeLock!=="number")throw{message:'timeLock is empty',timeLock:this.timeLock};if(this.timeLock<__WEBPACK_IMPORTED_MODULE_6_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.TRANSACTIONS_BUG_2_BYTES&&this.version!==0x00)throw{message:"version is invalid",version:this.version};if(blockHeight<__WEBPACK_IMPORTED_MODULE_6_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.TRANSACTIONS_BUG_2_BYTES&&this.version!==0x00)throw{message:"version is invalid",version:this.version};if(blockHeight!==153065&&blockHeight!==154939&&blockHeight!==163636&&blockHeight!==165207&&blockHeight!==185767&&blockHeight!==185769){if(this.timeLock>=__WEBPACK_IMPORTED_MODULE_6_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.TRANSACTIONS_BUG_2_BYTES&&this.timeLock<__WEBPACK_IMPORTED_MODULE_6_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.TRANSACTIONS_OPTIMIZATION&&this.version!==0x01)throw{message:"version is invalid",version:this.version};if(this.timeLock>=__WEBPACK_IMPORTED_MODULE_6_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.TRANSACTIONS_OPTIMIZATION&&this.version!==0x02)throw{message:"version is invalid",version:this.version};if(blockHeight>=__WEBPACK_IMPORTED_MODULE_6_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.TRANSACTIONS_BUG_2_BYTES&&blockHeight<__WEBPACK_IMPORTED_MODULE_6_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.TRANSACTIONS_OPTIMIZATION&&this.version!==0x01)throw{message:"version is invalid",version:this.version};if(blockHeight>=__WEBPACK_IMPORTED_MODULE_6_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.TRANSACTIONS_OPTIMIZATION&&this.version!==0x02)throw{message:"version is invalid",version:this.version};}
if(this.nonce>0xFFFF)throw{message:"nonce is invalid",nonce:this.nonce};if(this.timeLock>0xFFFFFF||this.timeLock<0)throw{message:"version is invalid",version:this.version};if(blockHeight!==-1){if(this.timeLock!==0&&blockHeight<this.timeLock)throw{message:"blockHeight < timeLock",timeLock:this.timeLock,blockHeight:blockHeight};if(this.timeLock!==0&&this.timeLock-blockHeight>100)throw{message:"timeLock - blockHeight < 100",timeLock:this.timeLock};}
let txId=this._computeTxId();if(!__WEBPACK_IMPORTED_MODULE_5_common_utils_BufferExtended__["a"].safeCompare(txId,this.txId))throw{message:"txid don't match"};if(!this.from)
throw{message:'Transaction Validation Invalid: From was not specified',from:this.from};if(!this.to)
throw{message:'Transaction Validation Invalid: To was not specified',to:this.to};this.from.validateFrom();this.to.validateTo();if(!this.validateIdenticalAddresses(this.from.addresses))return false;if(!this.validateIdenticalAddresses(this.to.addresses))return false;let inputSum=this.from.calculateInputSum();let outputSum=this.to.calculateOutputSum();if(!__WEBPACK_IMPORTED_MODULE_7_common_utils_coins_WebDollar_Coins__["a"].validateCoinsNumber(inputSum))
throw{message:"Transaction inputSum is invalid",inputSum:inputSum};if(!__WEBPACK_IMPORTED_MODULE_7_common_utils_coins_WebDollar_Coins__["a"].validateCoinsNumber(outputSum))
throw{message:"Transaction outputSum is invalid",inputSum:outputSum};if(inputSum<outputSum)
throw{message:"Transaction Validation Input is smaller than Output",input:inputSum,output:outputSum};if(!this.validateTransactionEveryTime(blockHeight,blockValidationType))
return false;return true;}
validateTransactionEveryTime(blockHeight,blockValidationType={}){if(!this.blockchain)throw{message:"blockchain is empty"};if(!blockValidationType||!blockValidationType['skip-validation-transactions-from-values']){if(!blockHeight)blockHeight=this.blockchain.blocks.length-1;if(this.timeLock!==0&&blockHeight<this.timeLock)throw{message:"blockHeight < timeLock",timeLock:this.timeLock};if(!this._validateNonce(blockValidationType))throw{message:"Nonce is invalid"};return this.from.validateFromEnoughMoney(blockValidationType);}
return true;}
isTransactionOK(avoidValidatingSignature=false,showDebug=true,blockValidationType={}){if(!avoidValidatingSignature)
this.validateTransactionOnce(undefined,{'skip-validation-transactions-from-values':true});try{blockValidationType["take-transactions-list-in-consideration"]={validation:true};this.validateTransactionEveryTime(undefined,blockValidationType);}catch(exception){return false;}
return true;}
serializeFromForSigning(unencodedAddress){return this.from.serializeForSigning(unencodedAddress);}
serializeTransaction(rewrite=false){if(!this._serializated||rewrite)
this._serializated=this._serializeTransaction();return this._serializated;}
_serializeTransaction(){let array=[__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].serializeNumber1Byte(this.version),this.version===0x00?__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].serializeNumber1Byte(this.nonce):__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].serializeNumber2Bytes(this.nonce),__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].serializeNumber3Bytes(this.timeLock),this.from.serializeFrom(),this.to.serializeTo(),];return Buffer.concat(array);}
deserializeTransaction(buffer,offset=0,returnTransaction=false){if(!Buffer.isBuffer(buffer))
buffer=__WEBPACK_IMPORTED_MODULE_3_common_crypto_WebDollar_Crypto_Data__["a"].createWebDollarCryptoData(buffer).buffer;try{this.version=__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].deserializeNumber1Bytes(buffer,offset);offset+=1;if(this.version===0x00){this.nonce=__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].deserializeNumber1Bytes(buffer,offset);offset+=1;}else if(this.version>=0x01){this.nonce=__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].deserializeNumber2Bytes(buffer,offset);offset+=2;}
this.timeLock=__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].deserializeNumber3Bytes(buffer,offset);offset+=3;offset=this.from.deserializeFrom(buffer,offset);offset=this.to.deserializeTo(buffer,offset);}catch(exception){console.error("error deserializing a transaction ",exception);throw exception;}
return offset;}
toString(){}
toJSON(dontIncludeTxId){let result={from:this.from.toJSON(),to:this.to.toJSON(),nonce:this.nonce,version:this.version,timeLock:this.timeLock,confirmed:this.confirmed,};if(!dontIncludeTxId)
result.txId=this.txId.toString("hex");return result;}
_preProcessTransaction(multiplicationFactor=1,revertActions,showUpdate){return true;}
processTransaction(multiplicationFactor=1,minerAddress,revertActions,showUpdate){if(multiplicationFactor===1){if(!this._preProcessTransaction(multiplicationFactor,revertActions,showUpdate))return false;if(!this.from.processTransactionFrom(multiplicationFactor,revertActions,showUpdate))return false;if(!this.to.processTransactionTo(multiplicationFactor,revertActions,showUpdate))return false;if(this._processTransactionFees(multiplicationFactor,minerAddress,revertActions,showUpdate)===null)return false;}else if(multiplicationFactor===-1){if(this._processTransactionFees(multiplicationFactor,minerAddress,revertActions,showUpdate)===null)return false;if(!this.to.processTransactionTo(multiplicationFactor,revertActions,showUpdate))return false;if(!this.from.processTransactionFrom(multiplicationFactor,revertActions,showUpdate))return false;if(!this._preProcessTransaction(multiplicationFactor,revertActions,showUpdate))return false;}else
throw{message:"multiplicationFactor is illegal"};return true;}
_processTransactionFees(){let inputSum=this.from.calculateInputSum();let outputSum=this.to.calculateOutputSum();let diffInFees=inputSum-outputSum;if(!__WEBPACK_IMPORTED_MODULE_7_common_utils_coins_WebDollar_Coins__["a"].validateCoinsNumber(diffInFees))
throw{message:"Fees are invalid"};if(diffInFees<0)throw{message:"Fee is illegal"};return{fees:diffInFees,currencyTokenId:this.from.currencyTokenId};}
_validateNonce(blockValidation){return true;}
get confirmed(){return this._confirmed;}
set confirmed(newValue){if(this._confirmed!==newValue)
this._confirmed=newValue;this.blockchain.transactions.emitTransactionChangeEvent(this,false,newValue);}
get fee(){let inputSum=this.from.calculateInputSum();let outputSum=this.to.calculateOutputSum();return inputSum-outputSum;}
validateIdenticalAddresses(addresses){let check={};for(let i=0;i<addresses.length;i++){let addr=addresses[i].unencodedAddress.toString("hex");if(!check[addr])check[addr]=true;else throw{message:"address has identical inputs",address:__WEBPACK_IMPORTED_MODULE_9__addresses_Interface_Blockchain_Address_Helper__["a"].generateAddressWIF(addresses[i].unencodedAddress,false,true)};}
return true;}}
__webpack_exports__["a"]=(InterfaceBlockchainTransaction);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_2_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_3_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__=__webpack_require__(17);var __WEBPACK_IMPORTED_MODULE_4_common_crypto_ed25519__=__webpack_require__(75);var __WEBPACK_IMPORTED_MODULE_5_common_utils_coins_WebDollar_Coins__=__webpack_require__(32);class InterfaceBlockchainTransactionFrom{constructor(transaction,addresses,currencyTokenId){this.transaction=transaction;this.setFrom(addresses,currencyTokenId);}
setFrom(addresses,currencyTokenId){if(!addresses)return false;if(addresses&&typeof addresses==="object"&&!currencyTokenId&&addresses.addresses&&addresses.hasOwnProperty("currencyTokenId")){addresses=addresses.addresses;currencyTokenId=addresses.currencyTokenId;}
if(!Array.isArray(addresses))
addresses=[addresses];for(let fromObject of addresses){if(fromObject.unencodedAddress){if(typeof fromObject.unencodedAddress==="object"&&fromObject.unencodedAddress.unencodedAddress)
fromObject.unencodedAddress=fromObject.unencodedAddress.unencodedAddress;fromObject.unencodedAddress=__WEBPACK_IMPORTED_MODULE_3_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].getUnencodedAddressFromWIF(fromObject.unencodedAddress);}else if(fromObject.address){fromObject.unencodedAddress=__WEBPACK_IMPORTED_MODULE_3_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].getUnencodedAddressFromWIF(fromObject.address);}
if(typeof fromObject.publicKey==="string")
fromObject.publicKey=new Buffer(fromObject.publicKey,"hex");if(typeof fromObject.signature==="string")
fromObject.signature=new Buffer(fromObject.signature,"hex");if(!fromObject.signature)
fromObject.signature=new Buffer(__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].TRANSACTIONS.SIGNATURE_SCHNORR.LENGTH);if(typeof fromObject.amount==="string")
fromObject.amount=parseInt(fromObject.amount);}
for(let fromObject of addresses){if(!fromObject.unencodedAddress)
fromObject.unencodedAddress=__WEBPACK_IMPORTED_MODULE_3_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"]._generateUnencodedAddressFromPublicKey(fromObject.publicKey,false);}
if(!currencyTokenId){currencyTokenId=new Buffer(__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.WEBD_TOKEN.LENGTH);currencyTokenId[0]=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.WEBD_TOKEN.VALUE;}
this.addresses=addresses;this.currencyTokenId=currencyTokenId;}
toJSON(){let addresses=[];this.addresses.forEach((address)=>{addresses.push({address:__WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].toBase(__WEBPACK_IMPORTED_MODULE_3_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].generateAddressWIF(address.unencodedAddress)),publicKey:address.publicKey.toString("hex"),signature:address.signature.toString("hex"),amount:address.amount,})});return{addresses:addresses,currencyTokenId:this.currencyTokenId.toString("hex"),}}
validateFrom(){if(this.addresses.length===0)
throw{message:"From.addresses is empty",addresses:this.addresses};if(this.addresses.length>=256)throw{message:"Too many inputs. Max 256"};if(!this.currencyTokenId||this.currencyTokenId===null)throw{message:'From.currency is not specified',currencyTokenId:this.currencyTokenId};if(!Buffer.isBuffer(this.currencyTokenId))
throw{message:'To.currencyTokenId is not a buffer',currencyTokenId:this.currencyTokenId};if(!(this.currencyTokenId.length===__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.WEBD_TOKEN.LENGTH||this.currencyTokenId.length===__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.OTHER_TOKENS.LENGTH))
throw{message:"To.currencyTokenId is not valid",currencyTokenId:this.currencyTokenId};let index=-1;for(let fromObject of this.addresses){index++;if(!fromObject.publicKey)
throw{message:'From.address.publicKey '+index+' is not specified',address:fromObject,index:index};if(!fromObject.unencodedAddress)
fromObject.unencodedAddress=__WEBPACK_IMPORTED_MODULE_3_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"]._generateUnencodedAddressFromPublicKey(fromObject.publicKey);if(!fromObject.unencodedAddress)
throw{message:'From.address.unencodedAddress is not specified',address:fromObject,index:index};if(!__WEBPACK_IMPORTED_MODULE_3_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].getUnencodedAddressFromWIF(fromObject.unencodedAddress))
throw{message:"From.address.unencodedAddress is not a valid address",address:fromObject,index:index};if(!Buffer.isBuffer(fromObject.unencodedAddress)||fromObject.unencodedAddress.length!==__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH)
throw{message:"From.address.unencodedAddress "+index+" is not a buffer",address:fromObject,index:index};if(!Buffer.isBuffer(fromObject.publicKey)||fromObject.publicKey.length!==__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].ADDRESSES.PUBLIC_KEY.LENGTH)
throw{message:"From.address.publicAddress "+index+" is not a buffer",address:fromObject,index:index};if(!__WEBPACK_IMPORTED_MODULE_3_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"]._generateUnencodedAddressFromPublicKey(fromObject.publicKey).equals(fromObject.unencodedAddress))
throw{message:"From.address.unencodedAddress "+index+" doesn't match the publicKey",address:fromObject,index:index};if(!__WEBPACK_IMPORTED_MODULE_5_common_utils_coins_WebDollar_Coins__["a"].validateCoinsNumber(fromObject.amount))
throw{message:'From.Object Amount is not specified',amount:fromObject.amount,index:index};if(fromObject.amount<=0)
throw{message:"Amount is an invalid number",amount:fromObject.amount,index:index};}
this.validateSignatures();return true;}
calculateInputSum(){let inputValues=[],inputSum=0;for(let i=0;i<this.addresses.length;i++){inputValues.push(this.addresses[i].amount);inputSum+=this.addresses[i].amount;}
return inputSum;}
findAddressIndex(unencodedAddress){unencodedAddress=__WEBPACK_IMPORTED_MODULE_3_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].getUnencodedAddressFromWIF(unencodedAddress);for(let i=0;i<this.addresses.length;i++)
if(__WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].safeCompare(this.addresses[i].unencodedAddress,unencodedAddress))
return i;return-1;}
serializeForSigning(unencodedAddress){let position;if(typeof unencodedAddress==="number")
position=unencodedAddress;else
position=this.findAddressIndex(unencodedAddress);if(position<0||position>this.addresses.length)
throw{message:"address was not found"};let array=[__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeNumber1Byte(this.transaction.version),this.transaction.version>=0x02?__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeNumber2Bytes(this.transaction.nonce):__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeNumber1Byte(this.transaction.nonce),__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeNumber3Bytes(this.transaction.timeLock),__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeToFixedBuffer(__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH,this.addresses[position].unencodedAddress),__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeToFixedBuffer(__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].ADDRESSES.PUBLIC_KEY.LENGTH,this.addresses[position].publicKey)];if(this.transaction.version>=0x02){array.push(this.addresses[0].publicKey);array.push(__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeNumber1Byte(this.addresses.length));array.push(__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeNumber7Bytes(this.addresses[position].amount));}
array.push(this.transaction.to.serializeTo());return Buffer.concat(array);}
validateSignatures(){let index=-1;for(let fromObject of this.addresses){index++;if(!fromObject.signature)
throw{message:'From.address.signature is not specified',address:fromObject,index:index};if(!Buffer.isBuffer(fromObject.signature)||fromObject.signature.length!==__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].TRANSACTIONS.SIGNATURE_SCHNORR.LENGTH)
throw{message:"From.address.signature "+index+" is not a buffer",address:fromObject,index:index};if(!__WEBPACK_IMPORTED_MODULE_4_common_crypto_ed25519__["a"].verify(fromObject.signature,this.serializeForSigning(index),fromObject.publicKey))
throw{message:"From.address.signature "+index+" is not correct",address:fromObject,index:index};if(!__WEBPACK_IMPORTED_MODULE_3_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"]._generateUnencodedAddressFromPublicKey(fromObject.publicKey).equals(fromObject.unencodedAddress))
throw{message:"From.address.publicKey "+index+" doesn't match address",address:fromObject,index:index};}
return true;}
serializeFrom(){let array=[];array.push(__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeNumber1Byte(this.addresses.length));for(let i=0;i<this.addresses.length;i++){if(this.transaction.version<=0x01)
array.push(__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeToFixedBuffer(__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH,this.addresses[i].unencodedAddress));array.push(__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeToFixedBuffer(__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].ADDRESSES.PUBLIC_KEY.LENGTH,this.addresses[i].publicKey));array.push(__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeToFixedBuffer(__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].TRANSACTIONS.SIGNATURE_SCHNORR.LENGTH,this.addresses[i].signature));array.push(__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeNumber7Bytes(this.addresses[i].amount));}
array.push(__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeNumber1Byte(this.currencyTokenId.length));array.push(this.currencyTokenId);return Buffer.concat(array);}
deserializeFrom(buffer,offset){this.addresses=[];try{let length=__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].deserializeNumber1Bytes(buffer,offset);offset+=1;for(let i=0;i<length;i++){let address={};if(this.transaction.version<=0x01){address.unencodedAddress=__WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].substr(buffer,offset,__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH);offset+=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH;}
address.publicKey=__WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].substr(buffer,offset,__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].ADDRESSES.PUBLIC_KEY.LENGTH);offset+=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].ADDRESSES.PUBLIC_KEY.LENGTH;if(this.transaction.version>0x01)
address.unencodedAddress=__WEBPACK_IMPORTED_MODULE_3_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"]._generateUnencodedAddressFromPublicKey(address.publicKey,false);address.signature=__WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].substr(buffer,offset,__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].TRANSACTIONS.SIGNATURE_SCHNORR.LENGTH);offset+=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].TRANSACTIONS.SIGNATURE_SCHNORR.LENGTH;address.amount=__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].deserializeNumber7Bytes(buffer,offset);offset+=7;this.addresses.push(address);}
let currencyLength=__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].deserializeNumber1Bytes(buffer,offset,);offset+=1;this.currencyTokenId=__WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].substr(buffer,offset,currencyLength);offset+=currencyLength;}catch(exception){console.error("error deserializing a transaction FROM ",exception);throw exception;}
return offset;}
processTransactionFrom(multiplicationFactor=1,revertActions){}}
__webpack_exports__["a"]=(InterfaceBlockchainTransactionFrom);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_2_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_3_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__=__webpack_require__(17);var __WEBPACK_IMPORTED_MODULE_4_common_utils_coins_WebDollar_Coins__=__webpack_require__(32);class InterfaceBlockchainTransactionTo{constructor(transaction,addresses){this.transaction=transaction;this.setTo(addresses);}
setTo(addresses){if(!addresses)return false;if(addresses&&typeof addresses==="object"&&addresses.addresses)
addresses=addresses.addresses;if(!Array.isArray(addresses))
addresses=[addresses];for(let i=0;i<addresses.length;i++){if(addresses[i].unencodedAddress){if(typeof addresses[i].unencodedAddress==="object"&&addresses[i].unencodedAddress.unencodedAddress)
addresses[i].unencodedAddress=addresses[i].unencodedAddress.unencodedAddress;addresses[i].unencodedAddress=__WEBPACK_IMPORTED_MODULE_3_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].getUnencodedAddressFromWIF(addresses[i].unencodedAddress);}else
if(addresses[i].address){addresses[i].unencodedAddress=__WEBPACK_IMPORTED_MODULE_3_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].getUnencodedAddressFromWIF(addresses[i].address);}
if(typeof addresses[i].amount==="string")
addresses[i].amount=parseInt(addresses[i].amount);}
this.addresses=addresses;}
toJSON(){let addresses=[];for(let address of this.addresses){addresses.push({address:__WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].toBase(__WEBPACK_IMPORTED_MODULE_3_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].generateAddressWIF(address.unencodedAddress)),amount:address.amount.toString(),})}
return{addresses:addresses,}}
validateTo(){if(this.addresses.length===0)throw{message:'To is empty Array'};if(this.addresses.length>=256)throw{message:"Too many inputs. Max 256"};let index=-1;for(let toObject of this.addresses){index++;if(!toObject.unencodedAddress||!Buffer.isBuffer(toObject.unencodedAddress))
throw{message:'To.Object Address is not specified',address:toObject,index:index};if(!__WEBPACK_IMPORTED_MODULE_4_common_utils_coins_WebDollar_Coins__["a"].validateCoinsNumber(toObject.amount))
throw{message:'To.Object Amount is not specified',address:toObject,index:index};if(toObject.amount<=0)
throw{message:"To.Object Amount is an invalid number",address:toObject,index:index};for(let i=0;i<this.transaction.from.addresses.length;i++)
if(__WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].safeCompare(this.transaction.from.addresses[i].unencodedAddress,toObject.unencodedAddress))
throw{message:"To.Object Address is included in the input and it should not be included in output ",address:toObject}}
return true;}
calculateOutputSum(){let outputValues=[],outputSum=0;for(let i=0;i<this.addresses.length;i++){outputValues.push(this.addresses[i].amount);outputSum+=this.addresses[i].amount;}
return outputSum;}
serializeTo(){let addressesBuffer=[];addressesBuffer.push(__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeNumber1Byte(this.addresses.length));for(let i=0;i<this.addresses.length;i++){addressesBuffer.push(__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeToFixedBuffer(__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH,this.addresses[i].unencodedAddress));addressesBuffer.push(__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeNumber7Bytes(this.addresses[i].amount));}
return Buffer.concat(addressesBuffer);}
deserializeTo(buffer,offset){try{this.addresses=[];let length=__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].deserializeNumber1Bytes(buffer,offset);offset+=1;for(let i=0;i<length;i++){let address={};address.unencodedAddress=__WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].substr(buffer,offset,__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH);offset+=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH;address.amount=__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].deserializeNumber7Bytes(buffer,offset);offset+=7;this.addresses.push(address);}
return offset;}catch(exception){console.error("error deserializing a transaction TO ",exception);throw exception;}}
processTransactionTo(multiplicationFactor=1,revertActions){}}
__webpack_exports__["a"]=(InterfaceBlockchainTransactionTo);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_consts_global__=__webpack_require__(45);class SemaphoreProcessing{constructor(processingSemaphoreInterval=50){this._list=[];this.processingSemaphoreInterval=processingSemaphoreInterval;this.processing=false;setTimeout(this._processingSemaphoreList.bind(this),this.processingSemaphoreInterval);}
processSempahoreCallback(callback){return new Promise((resolve)=>{this._list.push({callback:callback,resolver:resolve});});}
async _processingSemaphoreList(){if(this._list.length>0){this.processing=true;__WEBPACK_IMPORTED_MODULE_0_consts_global__["a"].SEMAPHORE_PROCESS_DONE=false;let answer=false;try{answer=await this._list[0].callback();}catch(ex){console.error("error processingSemaphoreList !!!!!!!!!!!!!!!!!!!!!!!!",ex);}
try{let resolver=this._list[0].resolver;this._list.splice(0,1);await resolver(answer);}catch(ex){console.error("error processingSemaphoreList RESOLVER !!!!!!!!!!!!!!!!!!!!!!!!",ex);}
this.processing=false;__WEBPACK_IMPORTED_MODULE_0_consts_global__["a"].SEMAPHORE_PROCESS_DONE=true;}
setTimeout(this._processingSemaphoreList.bind(this),this.processingSemaphoreInterval);}}
__webpack_exports__["a"]=(SemaphoreProcessing);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1_common_events_Status_Events__=__webpack_require__(12);var __WEBPACK_IMPORTED_MODULE_2_src_common_blockchain_global_Blockchain_Genesis__=__webpack_require__(16);var __WEBPACK_IMPORTED_MODULE_3_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_4__blocks_Interface_Blockchain_Block_Timestamp__=__webpack_require__(935);var __WEBPACK_IMPORTED_MODULE_5__crypto_WebDollar_Crypto__=__webpack_require__(28);var __WEBPACK_IMPORTED_MODULE_6_common_blockchain_utils_saving_manager_Saving_Manager__=__webpack_require__(936);var __WEBPACK_IMPORTED_MODULE_7_common_blockchain_utils_loading_manager_Loading_Manager__=__webpack_require__(937);var __WEBPACK_IMPORTED_MODULE_8__utils_logging_Log__=__webpack_require__(18);var __WEBPACK_IMPORTED_MODULE_9__sockets_protocol_propagation_Node_Blockchain_Propagation__=__webpack_require__(119);const BigInteger=__webpack_require__(36);const BigNumber=__webpack_require__(84);class InterfaceBlockchainBlocks{constructor(blockchain,db){this.blockchain=blockchain;this.db=db;this.blocksStartingPoint=0;this._length=0;this.chainWork=BigInteger(0);this.chainWorkSerialized=new Buffer(0);this._networkHashRate=0;this.timestampBlocks=new __WEBPACK_IMPORTED_MODULE_4__blocks_Interface_Blockchain_Block_Timestamp__["a"](blockchain);this.savingManager=new __WEBPACK_IMPORTED_MODULE_6_common_blockchain_utils_saving_manager_Saving_Manager__["a"](this.blockchain);this.loadingManager=new __WEBPACK_IMPORTED_MODULE_7_common_blockchain_utils_loading_manager_Loading_Manager__["a"](this.blockchain,this.savingManager);this.last=undefined;this.first=undefined;}
async addBlock(block,revertActions,saveBlock,showUpdate=true,socketsAvoidBroadcast){this.savingManager.addBlockToSave(block);await this.emitBlockInserted(block);__WEBPACK_IMPORTED_MODULE_9__sockets_protocol_propagation_Node_Blockchain_Propagation__["a"].propagateBlock(block,socketsAvoidBroadcast);await this.setLength(this.length+1);if(revertActions)
revertActions.push({name:"block-added",height:this.length-1});if(showUpdate)
this.emitBlockCountChanged();}
async emitBlockInserted(block){__WEBPACK_IMPORTED_MODULE_1_common_events_Status_Events__["a"].emit("blockchain/block-inserted",block?block:await this.last);}
emitBlockCountChanged(){__WEBPACK_IMPORTED_MODULE_1_common_events_Status_Events__["a"].emit("blockchain/blocks-count-changed",this._length);}
async spliceBlocks(after,showUpdate=true){await this.setLength(after);if(showUpdate)
this.emitBlockCountChanged();}
async clearBlocks(){return this.spliceBlocks(0,true);}
get endingPosition(){return this.length;}
async recalculateNetworkHashRate(){let MaxTarget=__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.BLOCKS_MAX_TARGET;let diff;let SumDiffPoS=new BigNumber(0);let SumDiffPoW=new BigNumber(0);let last,first;for(let i=Math.max(this.blockchain.blocks.blocksStartingPoint,Math.max(0,this.blockchain.blocks.endingPosition-__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.DIFFICULTY.NO_BLOCKS*3));i<this.blockchain.blocks.endingPosition;i++){let block=await this.blockchain.getBlock(i);if(i<0)continue;diff=MaxTarget.dividedBy(new BigNumber("0x"+block.difficultyTarget.toString("hex")));if(__WEBPACK_IMPORTED_MODULE_2_src_common_blockchain_global_Blockchain_Genesis__["a"].isPoSActivated(block.height))
SumDiffPoS=SumDiffPoS.plus(diff);else
SumDiffPoW=SumDiffPoW.plus(diff);if(!first)first=i;last=i;}
let how_much_it_took_to_mine_X_Blocks=await this.blockchain.getTimeStamp(last)-await this.blockchain.getTimeStamp(first);let answer;if(__WEBPACK_IMPORTED_MODULE_2_src_common_blockchain_global_Blockchain_Genesis__["a"].isPoSActivated(this.blockchain.blocks.length-1))
answer=SumDiffPoS.dividedToIntegerBy(new BigNumber(how_much_it_took_to_mine_X_Blocks.toString())).toFixed(13);else
answer=SumDiffPoW.dividedToIntegerBy(new BigNumber(how_much_it_took_to_mine_X_Blocks.toString())).toFixed(13);this.networkHashRate=parseFloat(answer);return parseFloat(answer);}
set networkHashRate(newValue){this._networkHashRate=newValue;__WEBPACK_IMPORTED_MODULE_1_common_events_Status_Events__["a"].emit("blockchain/new-network-hash-rate",this._networkHashRate);}
get networkHashRate(){return this._networkHashRate;}
async setLength(newValue){this._length=newValue;this.chainWork=await this.loadingManager.getChainWork(newValue-1);this.chainWorkSerialized=__WEBPACK_IMPORTED_MODULE_3_common_utils_Serialization__["a"].serializeBigInteger(this.chainWork);this.last=await this.loadingManager.getBlock(newValue-1);}
get length(){return this._length;}
async readBlockchainLength(){let length=await this.loadingManager.readBlockchainLength();if(!length)return false;await this.setLength(length);}
async saveBlockchainLength(length=this.length){return this.savingManager.saveBlockchainLength(length);}}
__webpack_exports__["a"]=(InterfaceBlockchainBlocks);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__Blockchain_Network_Adjusted_Time__=__webpack_require__(949);var __WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_2_common_blockchain_global_Blockchain_Genesis__=__webpack_require__(16);class BlockchainTimestamp{constructor(){this._networkAdjustedTime=new __WEBPACK_IMPORTED_MODULE_0__Blockchain_Network_Adjusted_Time__["a"](this);}
get networkAdjustedTime(){return this._networkAdjustedTime.networkAdjustedTime;}
get timeUTC(){return Math.floor(new Date().getTime()/1000);}
get time(){return new Date();}
get localTime(){let offset=new Date().getTimezoneOffset();return offset;}
_initializeNewSocket(socket){}
_sendUTC(socket){try{socket.node.sendRequest("timestamp/request-timeUTC/answer",{result:true,timeUTC:this.timeUTC});}catch(exception){console.error("error sending the UTC time",exception);}}}
__webpack_exports__["a"]=(BlockchainTimestamp);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_crypto_WebDollar_Crypto__=__webpack_require__(28);var __WEBPACK_IMPORTED_MODULE_1_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_2_common_utils_GZip__=__webpack_require__(176);class PPoWBlockchainProofBasic{constructor(blockchain,blocks){this.date=new Date();this.blockchain=blockchain;this.blocks=blocks;this.blocksIndex={};this.hash=undefined;this.proofSerialized=undefined;}
async getProofHeaders(starting,length){let list=[];for(let i=starting;i<Math.min(starting+length,this.blocks.length);i++){try{let block=await this.blockchain.getBlock(i);list.push(block.getBlockHeader());}catch(exception){console.error("Failed to retrieve block ",i,exception);try{console.error("Failed to retrieve block ",this.blocks[i]?this.blocks[i].toJSON():'block is null');}catch(exception){}}}
return list;}
async calculateProofSerialized(){let list=[];for(let i=0;i<this.blocks.length;i++){let block=await this.blockchain.getBlock(this.blocks[i]+1);list.push(this.serializeProof(block.getBlockHeader()));}
this.proofSerialized=Buffer.concat(list);return this.proofSerialized;}
async calculateProofGzip(){this.proofGzip=await __WEBPACK_IMPORTED_MODULE_2_common_utils_GZip__["a"].zip(this.proofSerialized);return this.proofGzip;}
validateProof(startingPoint=0){if(!Array.isArray(this.blocks))
throw{message:"proof blocks is invalid"};for(let i=startingPoint;i<this.blocks.length;++i)
if(!this.blocks[i]._validateInterlink())
throw{message:"validate Interlink Failed"};return true;}
validateProofLastElements(lastElements){return this.validateProof(this.blocks.length-lastElements);}
hasBlock(height){for(let i=0;i<this.blocks.length;i++)
if(this.blocks[i]===height)
return this.blocks[i];return null;}
equalsProofs(proofHash){if(typeof proofHash==="object"&&proofHash.hasOwnProperty("hash"))proofHash=proofHash.hash;if(proofHash.equals(this.hash))
return true;return false;}
async calculateProofHash(){let buffers=[];for(let i=0;i<this.blocks.length;i++)
buffers.push(await this.blockchain.getDifficultyTarget(this.blocks[i]));let buffer=Buffer.concat(buffers);this.hash=__WEBPACK_IMPORTED_MODULE_0_common_crypto_WebDollar_Crypto__["a"].SHA256(buffer);return this.hash;}
get lastProofBlock(){return this.blocks[this.blocks.length-1];}
validatesLastBlock(){if(this.blocks.length<=0||this.blocks.length<=__WEBPACK_IMPORTED_MODULE_1_consts_const_global__["a"].POPOW_PARAMS.m)return false;try{return true;}catch(exception){}}
findBlockByHeight(height){for(let i=0;i<this.blocks.length;i++)
if(this.blocks[i].height===height){return this.blocks[i];}
return null;}
push(block){if(this.blocksIndex[block]===block)
return;this.blocks.push(block);this.blocksIndex[block]=block;}}
__webpack_exports__["a"]=(PPoWBlockchainProofBasic);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_global_Blockchain_Mining_Reward__=__webpack_require__(56);var __WEBPACK_IMPORTED_MODULE_1_common_trees_radix_tree_merkle_tree_Interface_Merkle_Radix_Tree__=__webpack_require__(408);var __WEBPACK_IMPORTED_MODULE_2__Mini_Blockchain_Accountant_Tree_Node__=__webpack_require__(963);var __WEBPACK_IMPORTED_MODULE_3_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_4_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__=__webpack_require__(17);var __WEBPACK_IMPORTED_MODULE_5_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_6__Mini_Blockchain_Accountant_Tree_Events__=__webpack_require__(964);var __WEBPACK_IMPORTED_MODULE_7_common_utils_coins_WebDollar_Coins__=__webpack_require__(32);var __WEBPACK_IMPORTED_MODULE_8_main_blockchain_Blockchain__=__webpack_require__(5);class MiniBlockchainAccountantTree extends __WEBPACK_IMPORTED_MODULE_6__Mini_Blockchain_Accountant_Tree_Events__["a"]{createRoot(){this.root=new __WEBPACK_IMPORTED_MODULE_2__Mini_Blockchain_Accountant_Tree_Node__["a"](null,null,[],null);this.root.autoMerklify=true;this.root.deleteEmptyAddresses=false;this.root.root=this.root;}
updateAccount(address,value,tokenId,revertActions,showUpdate=true){if(!tokenId){tokenId=new Buffer(__WEBPACK_IMPORTED_MODULE_5_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.WEBD_TOKEN.LENGTH);tokenId[0]=__WEBPACK_IMPORTED_MODULE_5_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.WEBD_TOKEN.VALUE;}
address=__WEBPACK_IMPORTED_MODULE_4_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].getUnencodedAddressFromWIF(address);if(!address)
throw{message:"Your address is invalid",address:address};let node=this.search(address).node;if(!node)node=this.add(address,{balances:[]});if(!node.isLeaf()){this.delete(address);throw{message:"couldn't updateAccount because node is not leaf",address:address};}
let resultUpdate=node.updateBalanceToken(value,tokenId);if(revertActions)revertActions.push({name:"revert-updateAccount",address:address,value:value,tokenId:tokenId,showUpdate:showUpdate,});if(tokenId.length===__WEBPACK_IMPORTED_MODULE_5_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.WEBD_TOKEN.LENGTH&&tokenId[0]===__WEBPACK_IMPORTED_MODULE_5_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.WEBD_TOKEN.VALUE){this.root.total+=value;if(showUpdate)
this.emitter.emit("accountant-tree/root/total",this.root.total.toString());}
if(showUpdate)
this.emitBalanceChangeEvent(address,(resultUpdate?node.getBalances.bind(node):null),(resultUpdate?node.nonce:null));if(!node.hasBalances()){if(this.root.deleteEmptyAddresses||this.getAccountNonce(address)===0){this.delete(address);return null;}}
node._changedNode();return resultUpdate;}
updateAccountNonce(address,nonceChange,revertActions,showUpdate){address=__WEBPACK_IMPORTED_MODULE_4_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].getUnencodedAddressFromWIF(address);if(!address)throw{message:"Your address is invalid",address:address};let node=this.search(address).node;if(!node)throw{message:"Address was not found",address:address};if(!node.isLeaf())
throw{message:"couldn't updateAccountNonce because node is not leaf",address:address};node.nonce+=nonceChange;if(revertActions)revertActions.push({name:"revert-updateAccountNonce",address:address,nonceChange:nonceChange,showUpdate:showUpdate,});if(!Number.isInteger(node.nonce))throw{message:"nonce is invalid",nonce:node.nonce};node.nonce=node.nonce%0x10000;if(node.nonce<0)node.nonce=node.nonce+0x10000;if(node.nonce===0&&!node.hasBalances(address)){this.delete(address);return null;}
node._changedNode();return node.nonce;}
listBalances(address){address=__WEBPACK_IMPORTED_MODULE_4_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].getUnencodedAddressFromWIF(address);if(!address)
throw{message:"Your address is invalid",address:address};let node=this.search(address).node;if(!node)throw{message:"address not found",address:address};if(!node.isLeaf())throw{message:"couldn't list because input is not a leaf node"};return node.getBalances();}
getBalance(address,tokenId){address=__WEBPACK_IMPORTED_MODULE_4_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].getUnencodedAddressFromWIF(address);if(!address)throw{message:"Your address is invalid",address:address};let node=this.search(address).node;if(!node)return null;if(!node.isLeaf())
return null;return node.getBalance(tokenId);}
getAccountNonce(address){address=__WEBPACK_IMPORTED_MODULE_4_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].getUnencodedAddressFromWIF(address);if(address===null)throw{message:"getAccountNonce - Your address is invalid",address:address};let node=this.search(address).node;if(!node)
return null;return node.nonce;}
serializeMiniAccountant(includeHashes=true,sleepNodes){return this._serializeTree(includeHashes,sleepNodes);}
deserializeMiniAccountant(buffer,offset,includeHashes=true){return this._deserializeTree(buffer,offset,includeHashes);}
async saveMiniAccountant(includeHashes,name,serialization,timeout){return await this.saveTree(name||"accountantTree",includeHashes,serialization,timeout);}
async loadMiniAccountant(buffer,offset,includeHashes,name="accountantTree",showUpdate=true){try{let result=await this.loadTree(name,buffer,offset,includeHashes);if(showUpdate)
this.emitBalancesChanges();return result!==false;}catch(exception){console.error("loadMiniAccountant error",exception)
return false;}}
calculateNodeCoins(tokenId,node){if(!tokenId){tokenId=new Buffer(__WEBPACK_IMPORTED_MODULE_5_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.WEBD_TOKEN.LENGTH);tokenId[0]=__WEBPACK_IMPORTED_MODULE_5_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.WEBD_TOKEN.VALUE;}
if(!node)node=this.root;if(node===this.root&&!__WEBPACK_IMPORTED_MODULE_8_main_blockchain_Blockchain__["a"].blockchain.agent.consensus){return __WEBPACK_IMPORTED_MODULE_0_common_blockchain_global_Blockchain_Mining_Reward__["a"].getSumReward(__WEBPACK_IMPORTED_MODULE_8_main_blockchain_Blockchain__["a"].blockchain.blocks.length-1);}
let sum=node.getBalance(tokenId);for(let i=0;i<node.edges.length;i++)
if(node.edges[i].targetNode)
sum+=this.calculateNodeCoins(tokenId,node.edges[i].targetNode);return sum;}
printAccountantTree(){let list=this.getAccountantTreeList();let obj={};for(let i=0;i<list.length;i++){console.info(i,list[i].address,list[i].balance/__WEBPACK_IMPORTED_MODULE_7_common_utils_coins_WebDollar_Coins__["a"].WEBD);obj[list[i].address]=list[i].balance/__WEBPACK_IMPORTED_MODULE_7_common_utils_coins_WebDollar_Coins__["a"].WEBD;}
console.log(JSON.stringify(obj));return list;}
getAccountantTreeList(){let list=[];list=this.root.getAccountantTreeList(list,false,true,2000);return list;}
clear(){this.root.destroyNode();this.createRoot();}}
__webpack_exports__["a"]=(MiniBlockchainAccountantTree);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__Interface_Radix_Tree__=__webpack_require__(961);var __WEBPACK_IMPORTED_MODULE_1__Interface_Merkle_Radix_Tree_Node__=__webpack_require__(412);var __WEBPACK_IMPORTED_MODULE_2_common_trees_merkle_tree_Interface_Merkle_Tree__=__webpack_require__(962);class InterfaceRadixMerkleTree extends __WEBPACK_IMPORTED_MODULE_0__Interface_Radix_Tree__["a"]{createRoot(){this.root=new __WEBPACK_IMPORTED_MODULE_1__Interface_Merkle_Radix_Tree_Node__["a"](null,null,[],null);this.root.autoMerklify=true;this.root.root=this.root;}
_deserializeTree(buffer,offset,includeHashes){return __WEBPACK_IMPORTED_MODULE_2_common_trees_merkle_tree_Interface_Merkle_Tree__["a"].prototype._deserializeTree.apply(this,arguments);}
matches(tree){return __WEBPACK_IMPORTED_MODULE_2_common_trees_merkle_tree_Interface_Merkle_Tree__["a"].prototype.matches.call(this,tree);}}
__webpack_exports__["a"]=(InterfaceRadixMerkleTree);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_trees_Interface_Tree_Node__=__webpack_require__(143);var __WEBPACK_IMPORTED_MODULE_1__Interface_Radix_Tree_Edge__=__webpack_require__(410);var __WEBPACK_IMPORTED_MODULE_2_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_3_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_4_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__=__webpack_require__(5);class InterfaceRadixTreeNode extends __WEBPACK_IMPORTED_MODULE_0_common_trees_Interface_Tree_Node__["a"]{constructor(root,parent,edges,value){super(root,parent,edges,value);}
serializeNode(includeEdges){try{let buffers=[];buffers.push(this.serializeNodeData.apply(this,arguments));if(includeEdges){buffers.push(__WEBPACK_IMPORTED_MODULE_2_common_utils_Serialization__["a"].serializeNumber2Bytes(this.edges.length));for(let i=0;i<this.edges.length;i++){buffers.push(__WEBPACK_IMPORTED_MODULE_2_common_utils_Serialization__["a"].serializeNumber1Byte(this.edges[i].label.length));buffers.push(this.edges[i].label);buffers.push(this.edges[i].targetNode.serializeNode.apply(this.edges[i].targetNode,arguments));}}
return Buffer.concat(buffers);}catch(exception){console.log("Error serializing InterfaceRadixTreeNode",exception)
throw exception;}}
deserializeNode(buffer,offset,includeEdges,includeHashes){try{offset=this.deserializeNodeData.apply(this,arguments);if(includeEdges){let length;length=__WEBPACK_IMPORTED_MODULE_2_common_utils_Serialization__["a"].deserializeNumber2Bytes(buffer,offset);offset+=2;for(let i=0;i<length;i++){let valueLength=buffer[offset];offset+=1;let label=__WEBPACK_IMPORTED_MODULE_3_common_utils_BufferExtended__["a"].substr(buffer,offset,valueLength);offset+=valueLength;let targetNode=this.createNewNode();this.edgesPush(this.root.createNewEdge(label,targetNode));arguments[1]=offset;offset=targetNode.deserializeNode.apply(targetNode,arguments);}}
return offset;}catch(exception){console.log("Error deserializing Interface Radix Tree",exception);throw exception;}}
_setNodeValue(value){this.value=value;}
createNewEdge(label,node){return new __WEBPACK_IMPORTED_MODULE_1__Interface_Radix_Tree_Edge__["a"](label,node);}}
__webpack_exports__["a"]=(InterfaceRadixTreeNode);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_trees_Interface_Tree_Edge__=__webpack_require__(254);var __WEBPACK_IMPORTED_MODULE_1_common_trees_Interface_Tree_Node__=__webpack_require__(143);var __WEBPACK_IMPORTED_MODULE_2__utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_3_common_utils_BufferExtended__=__webpack_require__(3);class InterfaceRadixTreeEdge extends __WEBPACK_IMPORTED_MODULE_0_common_trees_Interface_Tree_Edge__["a"]{constructor(label,targetNode){if(targetNode instanceof __WEBPACK_IMPORTED_MODULE_1_common_trees_Interface_Tree_Node__["a"]===false)
throw{message:"Target Node is not a Radix Node"};super(targetNode);this.label=label;}
serializeEdge(){return Buffer.concat([__WEBPACK_IMPORTED_MODULE_2__utils_Serialization__["a"].serializeNumber1Byte(this.label.length),this.label,this.targetNode.serializeNode()]);}
deserializeEdge(buffer,offset,createNewNode){let labelLength=__WEBPACK_IMPORTED_MODULE_2__utils_Serialization__["a"].deserializeNumber1Bytes(buffer,offset);offset+=1;this.label=__WEBPACK_IMPORTED_MODULE_3_common_utils_BufferExtended__["a"].substr(buffer,offset,labelLength);let node=createNewNode();offset=node.deserializeNode(buffer,offset,true);return offset;}}
__webpack_exports__["a"]=(InterfaceRadixTreeEdge);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0__Interface_Tree_Edge__=__webpack_require__(254);var __WEBPACK_IMPORTED_MODULE_1__Interface_Tree_Node__=__webpack_require__(143);var __WEBPACK_IMPORTED_MODULE_2_common_crypto_WebDollar_Crypto_Data__=__webpack_require__(106);var __WEBPACK_IMPORTED_MODULE_3_common_utils_BufferExtended__=__webpack_require__(3);class InterfaceTree{constructor(db){this.db=db;this.root=undefined;this.createRoot();}
destroyTree(){this.db=undefined;this.root.destroyNode();delete this.root;}
createRoot(){this.root=new __WEBPACK_IMPORTED_MODULE_1__Interface_Tree_Node__["a"](null,null,[],null);this.root.root=this.root;}
validateRoot(){if(!this.root)
throw{message:"root is invalid"};return this.root.validateCompleteTreeNode.apply(this.root,arguments);}
add(data,parent){if(!Buffer.isBuffer(data))
data=__WEBPACK_IMPORTED_MODULE_2_common_crypto_WebDollar_Crypto_Data__["a"].createWebDollarCryptoData(data).buffer
if(!parent)parent=this.root;let node=this.root.createNewNode(parent,[],data)
parent.edgesPush(this.root.createNewEdge(node));node._changedNode();return node;}
delete(value){if(!Buffer.isBuffer(value))
value=__WEBPACK_IMPORTED_MODULE_2_common_crypto_WebDollar_Crypto_Data__["a"].createWebDollarCryptoData(value).buffer
if(value.length===0)
throw{message:'No input to be deleted',value};let searchResult=this.search(value);if(!searchResult.node)
return false;let node=searchResult.node;node.value=null;let deleted=false;let nodeParent=node.parent;while(nodeParent!==null&&nodeParent!==undefined&&node.value===null){for(let i=0;i<nodeParent.edges.length;i++)
if(nodeParent.edges[i].targetNode===node){nodeParent.edges.splice(i,1);deleted=true;break;}
if(node.edges.length>0)
for(let i=0;i<node.edges.length;i++){nodeParent.edgesPush(this.root.createNewEdge(node.edges[i].targetNode))
node.edges[i].targetNode.parent=nodeParent;}
node.edges=[];node.destroyNode();if(nodeParent.edges.length===0&&nodeParent.value===null)
node=nodeParent;else break;nodeParent=node.parent;}
if(deleted){if(!nodeParent)
nodeParent=this.root;nodeParent._changedNode(nodeParent)
return true;}
return false;}
search(value,node){if(!value)
return null;if(!node)
node=this.root;if(!Buffer.isBuffer(value))
value=__WEBPACK_IMPORTED_MODULE_2_common_crypto_WebDollar_Crypto_Data__["a"].createWebDollarCryptoData(value).buffer;if(node.value!==undefined&&node.value!==null&&__WEBPACK_IMPORTED_MODULE_3_common_utils_BufferExtended__["a"].safeCompare(node.value,value)){return{result:true,node:node,value:node.value}}
for(let i=0;i<node.edges.length;i++){let result=this.search(value,node.edges[i].targetNode);if(result.result!==false)
return result;}
return{result:false,node:null,value:null}}
levelSearch(node,level){if(node===undefined)
node=this.root;if(level===undefined)
level=0;let queue=[{node:node,level:level}];let result=[];let i=0;while(i<queue.length){let node=queue[i].node;let level=queue[i].level;if(!result[level])result[level]=[];result[level].push(node)
for(let j=0;j<node.edges.length;j++)
if(node.edges[j].targetNode!==null){queue.push({node:node.edges[j].targetNode,level:level+1})}
i++;}
return result;}
BFS(node,level){let searchResult=this.levelSearch(node,level);let BFSResult=[];for(let i=0;i<searchResult.length;i++)
for(let j=0;j<searchResult[i].length;j++)
BFSResult.push(searchResult[i][j]);return BFSResult;}
validateParentsAndChildrenEdges(node,parent){if(node===undefined)
node=this.root;if(parent===undefined)
parent=null;if(node!==this.root&&node.parent!==parent)
return false;for(let i=0;i<node.edges.length;i++){if(node.edges[i].targetNode.parent!==node)
return false;if(!this.validateParentsAndChildrenEdges(node.edges[i].targetNode,node))
return false;}
let nodeLevel=-1,parentLevel=-2;let bfs=this.BFS();for(let i=0;i<bfs.length;i++)
for(let j=0;j<bfs[i].length;j++)
if(bfs[i][j]===node)
nodeLevel=i;else if(bfs[i][j]===parent)
parentLevel=i;if(node!==this.root&&parentLevel!==nodeLevel-1)
return false;return true;}
printLevelSearch(){let result=this.levelSearch();console.log("BFS Levels",result.length);for(let i=0;i<result.length;i++){let data=[];let hasHashses=false;for(let node of result[i]){let value=node.value===null?'null':node.value;let sum=node.sum===null?'null':node.sum;let edges=[];let hash=null;for(let edge of node.edges){edges.push(edge.label!==undefined?edge.label.toString():'')}
if(node.hash)
hash=node.hash;let dataObject={id:node.id,parentId:(node.parent!==null?node.parent.id:-666),value:value,sum:sum,edges:edges};if(hash){dataObject.hash=hash;hasHashses=true;}
data.push(dataObject);}
let dataString="values { ";data.forEach((element)=>{dataString+=" { "
try{dataString+="id: "+element.id+" parentId: "+element.parentId+"   ";if(Buffer.isBuffer(element.value))
dataString+=element.value.toString();else
if(typeof element.value==="object")
dataString+=JSON.stringify(element.value);else
dataString+=" null";}catch(exception){dataString+="invalid";console.error("interface tree to json, exception",exception,element.value);}
dataString+=" , ";try{if(element.sum!=='null'&&element.sum!==undefined){dataString+=" , sum: ";if(Buffer.isBuffer(element.sum))
dataString+=element.sum.toString();else
if(typeof element.sum==="object")
dataString+=JSON.stringify(element.sum);else
dataString+=element.sum;}}catch(exception){dataString+="invalid";console.log("interface tree to json, exception",exception,element.sum);}
dataString+=" , ";dataString+=element.edges.toString()+"} | ";});if(hasHashses){dataString+="} hashes { ";data.forEach((element)=>{dataString+=element.hash.toString("hex")+" | ";});}
console.log("BFS Level: ",i,"count",result[i].length,dataString)}}
cloneTree(){let cloneRoot=Object.assign(Object.create(Object.getPrototypeOf(this.root)),this.root);return cloneRoot;}
_serializeTree(includeHashes,sleepNodes){return this.root.serializeNode(true,includeHashes,sleepNodes);}
_deserializeTree(buffer,offset,includeHashes){this.root.destroyNode();this.createRoot();if(buffer.length<=1)return true;return this.root.deserializeNode(buffer,offset,true,includeHashes);}
toJSON(){}
toString(){}
async saveTree(key,includeHashes,serialization,timeout){if(!serialization)
serialization=this._serializeTree(includeHashes);return await this.db.save(key,serialization,timeout);}
async loadTree(key,buffer,offset=0,includeHashes){if(!buffer)
buffer=await this.db.get(key);if(!Buffer.isBuffer(buffer))throw{message:"InterfaceTree - buffer is not Buffer"};return this._deserializeTree(buffer,offset,includeHashes);}
matches(tree){let result=this.validateRoot();result=result&&tree.validateRoot();return result;}}
__webpack_exports__["a"]=(InterfaceTree);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_trees_radix_tree_Interface_Radix_Tree_Node__=__webpack_require__(409);var __WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_3_common_trees_merkle_tree_Interface_Merkle_Tree_Node__=__webpack_require__(413);class InterfaceMerkleRadixTreeNode extends __WEBPACK_IMPORTED_MODULE_0_common_trees_radix_tree_Interface_Radix_Tree_Node__["a"]{constructor(root,parent,edges,value,hash){super(root,parent,edges,value);this.hash=hash;}
serializeNodeDataHash(includeHashes){if(includeHashes)
return this.hash;else return null;}
serializeNodeData(includeEdges,includeHashes){let list=[];let hash=this.serializeNodeDataHash(includeHashes);if(hash)
list.push(hash);list.push(__WEBPACK_IMPORTED_MODULE_0_common_trees_radix_tree_Interface_Radix_Tree_Node__["a"].prototype.serializeNodeData.apply(this,arguments));return Buffer.concat(list);}
deserializeNodeDataHash(buffer,offset=0,includeHashes){if(includeHashes){this.hash=__WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__["a"].substr(buffer,offset,32);offset+=32;}
return offset;}
deserializeNodeData(buffer,offset,includeEdges,includeHashes){offset=this.deserializeNodeDataHash.call(this,buffer,offset,includeHashes);arguments[1]=offset;offset=__WEBPACK_IMPORTED_MODULE_0_common_trees_radix_tree_Interface_Radix_Tree_Node__["a"].prototype.deserializeNodeData.apply(this,arguments);return offset;}
validateTreeNode(){if(!__WEBPACK_IMPORTED_MODULE_0_common_trees_radix_tree_Interface_Radix_Tree_Node__["a"].prototype.validateTreeNode.apply(this,arguments))return false;if(!__WEBPACK_IMPORTED_MODULE_3_common_trees_merkle_tree_Interface_Merkle_Tree_Node__["a"].prototype.validateTreeNode.apply(this,arguments))return false;return true;}
_getValueToHash(){return this.serializeNode();}
_changedNode(){__WEBPACK_IMPORTED_MODULE_3_common_trees_merkle_tree_Interface_Merkle_Tree_Node__["a"].prototype._changedNode.call(this);__WEBPACK_IMPORTED_MODULE_0_common_trees_radix_tree_Interface_Radix_Tree_Node__["a"].prototype._changedNode.call(this);return true;}
_validateHash(){return __WEBPACK_IMPORTED_MODULE_3_common_trees_merkle_tree_Interface_Merkle_Tree_Node__["a"].prototype._validateHash.call(this);}
_computeHash(){return __WEBPACK_IMPORTED_MODULE_3_common_trees_merkle_tree_Interface_Merkle_Tree_Node__["a"].prototype._computeHash.call(this);}
_refreshHash(forced){return __WEBPACK_IMPORTED_MODULE_3_common_trees_merkle_tree_Interface_Merkle_Tree_Node__["a"].prototype._refreshHash.call(this,forced);}
_calculateHashTree(){for(let i=0;i<this.edges.length;i++)
this.edges[i].targetNode._calculateHashTree();this._computeHash(true);}}
__webpack_exports__["a"]=(InterfaceMerkleRadixTreeNode);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_trees_Interface_Tree_Node__=__webpack_require__(143);var __WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_2_common_crypto_WebDollar_Crypto_Data__=__webpack_require__(106);var __WEBPACK_IMPORTED_MODULE_3_common_crypto_WebDollar_Crypto__=__webpack_require__(28);class InterfaceMerkleTreeNode extends __WEBPACK_IMPORTED_MODULE_0_common_trees_Interface_Tree_Node__["a"]{constructor(root,parent,edges,value,hash){super(root,parent,edges,value);if(!hash)hash=new Buffer(32);this.hash=hash;}
serializeNodeData(){return Buffer.concat([this.hash,__WEBPACK_IMPORTED_MODULE_0_common_trees_Interface_Tree_Node__["a"].prototype.serializeNodeData.apply(this,arguments),]);}
deserializeNodeData(buffer,offset){this.hash=__WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__["a"].substr(buffer,offset,32);offset+=32;arguments[1]=offset;offset=__WEBPACK_IMPORTED_MODULE_0_common_trees_Interface_Tree_Node__["a"].prototype.deserializeNodeData.apply(this,arguments);return offset;}
_changedNode(){if(this.root.autoMerklify)
this._refreshHash(true);}
validateTreeNode(validateMerkleTree){if(!__WEBPACK_IMPORTED_MODULE_0_common_trees_Interface_Tree_Node__["a"].prototype.validateTreeNode.apply(this,arguments))return false;if(!this.hash||!Buffer.isBuffer(this.hash)||this.hash.length!==32)throw{message:"hash is not a Buffer(32)"}
if(validateMerkleTree)
return this._validateHash();return true;}
_validateHash(){if(!this.hash)return false;let initialHash=this.hash;this._computeHash();if(!initialHash&&this.hash)return false;if(this.hash.length!==initialHash.length||initialHash.length!==32)return false;if(!this.hash.equals(initialHash))return false;return true;}
_getValueToHash(){if(Buffer.isBuffer(this.value))
return this.value;else
return __WEBPACK_IMPORTED_MODULE_2_common_crypto_WebDollar_Crypto_Data__["a"].createWebDollarCryptoData(this.value,true).buffer;}
_computeHash(){if(this===this.root&&this.edges.length===0){this.hash=new Buffer(32);return this.hash;}
let valueToHash=this._getValueToHash();if(this.edges.length===0){if(this.value===null)
throw{message:"Leaf nodes has not value"};if(!this.isLeaf())
throw{message:"Node is not leaf"};this.hash=__WEBPACK_IMPORTED_MODULE_3_common_crypto_WebDollar_Crypto__["a"].SHA256(__WEBPACK_IMPORTED_MODULE_3_common_crypto_WebDollar_Crypto__["a"].SHA256(valueToHash))}else
if(this.edges.length>0){let hashConcat=[];for(let i=0;i<this.edges.length;i++){if(!this.edges[i].targetNode.hash)
this.edges[i].targetNode._computeHash();if(i===0)
hashConcat.push(new Buffer(this.edges[i].targetNode.hash));else
hashConcat.push(this.edges[i].targetNode.hash);}
if(hashConcat.length===0)
throw{message:"Empty node with invalid hash"};hashConcat=Buffer.concat(hashConcat);this.hash=__WEBPACK_IMPORTED_MODULE_3_common_crypto_WebDollar_Crypto__["a"].SHA256(__WEBPACK_IMPORTED_MODULE_3_common_crypto_WebDollar_Crypto__["a"].SHA256(Buffer.concat([valueToHash,hashConcat])));return this.hash;}
return this.hash;}
_refreshHash(forced){let result=false;let hashAlreadyComputed=false;if(!forced){hashAlreadyComputed=true;result=this._validateHash();}
if(!result){result=true;if(!hashAlreadyComputed)
this._computeHash();if(this.root!==this){if(!this.parent)
throw{message:"Couldn't compute hash because Node parent is empty"};result=result&&this.parent._refreshHash(true);}}
return result;}}
__webpack_exports__["a"]=(InterfaceMerkleTreeNode);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:true});var __WEBPACK_IMPORTED_MODULE_0__Interface_Blockchain_Mining_Workers__=__webpack_require__(975);var __WEBPACK_IMPORTED_MODULE_1_webworkify_webpack__=__webpack_require__(980);var __WEBPACK_IMPORTED_MODULE_1_webworkify_webpack___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_webworkify_webpack__);class InterfaceBlockchainBrowserMining extends __WEBPACK_IMPORTED_MODULE_0__Interface_Blockchain_Mining_Workers__["a"]{_getWorker(){let code=(981);return __WEBPACK_IMPORTED_MODULE_1_webworkify_webpack___default()(code);}}
__webpack_exports__["default"]=(InterfaceBlockchainBrowserMining);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_agents_Interface_Blockchain_Agent_Full_Node__=__webpack_require__(255);var __WEBPACK_IMPORTED_MODULE_1__protocol_PPoW_Blockchain_Protocol__=__webpack_require__(266);class PPoWBlockchainAgentFullNode extends __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_agents_Interface_Blockchain_Agent_Full_Node__["a"]{_newProtocol(){this.protocol=new __WEBPACK_IMPORTED_MODULE_1__protocol_PPoW_Blockchain_Protocol__["a"](this.blockchain,this);}}
__webpack_exports__["a"]=(PPoWBlockchainAgentFullNode);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_utils_bans_BansList__=__webpack_require__(120);var __WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__=__webpack_require__(9);const BigInteger=__webpack_require__(36);class InterfaceBlockchainProtocolForksManager{constructor(blockchain,protocol){this.blockchain=blockchain;this.protocol=protocol;this.processForksQueue();}
async newForkTip(socket,forkChainLength,forkChainStartingPoint,forkLastBlockChainHash,forkProof,forkChainWork){try{if(!this.blockchain.agent.consensus)return;if(typeof forkChainLength!=="number")throw "forkChainLength is not a number";if(typeof forkChainStartingPoint!=="number")throw "newChainStartingPoint is not a number";if(forkChainLength<0)throw "Incorrect new Chain";if(forkChainStartingPoint>forkChainLength)throw "Incorrect newChainStartingPoint";if(forkChainStartingPoint<0)throw "Incorrect2 newChainStartingPoint";if(forkChainStartingPoint>this.blockchain.blocks.length)throw{message:"Incorrect3 newChainStartingPoint",newChainStartingPoint:forkChainStartingPoint,blocks:this.blockchain.blocks.length};if(forkChainWork)
forkChainWork=__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].deserializeBigInteger(forkChainWork);else
forkChainWork=new BigInteger(0);if((forkChainWork.greater(0)&&forkChainWork.equals(this.blockchain.blocks.chainWork)&&(!this.blockchain.agent.light||(this.blockchain.agent.light&&(!forkProof||!this.blockchain.proofPi.validatesLastBlock()))))){socket.node.protocol.blocks=forkChainLength;return false;}
if((forkChainWork.greater(0)&&forkChainWork.lesser(this.blockchain.blocks.chainWork))&&(!this.blockchain.agent.light||(this.blockchain.agent.light&&(!forkProof||!this.blockchain.proofPi.validatesLastBlock())))){socket.node.protocol.blocks=forkChainLength;socket.node.protocol.sendLastBlock();console.log("Error ForkTip 2");return false;}
if((forkChainWork.greater(0)&&forkChainWork.lesser(this.blockchain.blocks.chainWork))&&(!this.blockchain.agent.light||(this.blockchain.agent.light&&(!forkProof||!this.blockchain.proofPi.validatesLastBlock())))){socket.node.protocol.blocks=forkChainLength;socket.node.protocol.sendLastBlock();console.log("Error ForkTip 3");return false;}
if(forkChainWork.equals(0))
throw{message:"forkChainWork is zero"};let answer=await this.protocol.forkSolver.discoverFork(socket,forkChainLength,forkChainStartingPoint,forkLastBlockChainHash,forkProof,forkChainWork);if(answer.result){socket.node.protocol.blocks=forkChainLength;if(!answer.fork)
return answer.fork.forkPromise;}
return false;}catch(exception){if(exception.message==="Your blockchain is smaller than mine"&&Math.random()<0.2)
console.warn(exception);return false;}}
async processForksQueue(){let bestFork;try{bestFork=await this._getBestFork();}catch(exception){console.error("processForksQueue error getting bestFork",exception);let forkError=exception.fork;this.blockchain.forksAdministrator.deleteFork(forkError);}
if(bestFork){try{let answer=await this.protocol.forkSolver._solveFork(bestFork);if(!answer)
throw{message:"Fork couldn't be solved"}}catch(exception){try{console.error("processForksQueue returned an error",exception);let bIncludeBan=true;if(this.blockchain.agent.light){if(["fork is something new","discoverAndProcessFork - fork already found by socket","same proof, but your blockchain is smaller than mine","Your proof is worst than mine because you have the same block","fork proof was already downloaded","You gave me a block which I already have have the same block"].indexOf(exception.message)>=0)
bIncludeBan=false;}else{if(["You gave me a block which I already have have the same block"].indexOf(exception.message)>=0)
bIncludeBan=false;}
if(bIncludeBan){let socket=bestFork.getSocket();console.warn("NEW BAN",socket?socket.node.sckAddress.toString():'',exception.message);__WEBPACK_IMPORTED_MODULE_0_common_utils_bans_BansList__["a"].addBan(bestFork.getSocket(),180000,exception.message);}}catch(exception){}}
this.blockchain.forksAdministrator.deleteFork(bestFork);}
setTimeout(this.processForksQueue.bind(this),200);}
_getBestFork(){let bestFork,fork;try{for(let i=0;i<this.blockchain.forksAdministrator.forks.length;i++)
if(this.blockchain.forksAdministrator.forks[i].forkReady){fork=this.blockchain.forksAdministrator.forks[i];if(!bestFork||bestFork.forkChainLength<fork.forkChainLength)
bestFork=fork;}}catch(exception){console.error("_getBestFork returned an exception",exception);throw{message:exception,fork:fork.toJSON()}}
return bestFork;}}
__webpack_exports__["a"]=(InterfaceBlockchainProtocolForksManager);}),(function(module,exports){var re=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;var parts=['source','protocol','authority','userInfo','user','password','host','port','relative','path','directory','file','query','anchor'];module.exports=function parseuri(str){var src=str,b=str.indexOf('['),e=str.indexOf(']');if(b!=-1&&e!=-1){str=str.substring(0,b)+str.substring(b,e).replace(/:/g,';')+str.substring(e,str.length);}
var m=re.exec(str||''),uri={},i=14;while(i--){uri[parts[i]]=m[i]||'';}
if(b!=-1&&e!=-1){uri.source=src;uri.host=uri.host.substring(1,uri.host.length-1).replace(/;/g,':');uri.authority=uri.authority.replace('[','').replace(']','').replace(/;/g,':');uri.ipv6uri=true;}
return uri;};}),(function(module,exports,__webpack_require__){(function(global){module.exports=isBuf;function isBuf(obj){return(global.Buffer&&global.Buffer.isBuffer(obj))||(global.ArrayBuffer&&obj instanceof ArrayBuffer);}}.call(exports,__webpack_require__(10)))}),(function(module,exports,__webpack_require__){var eio=__webpack_require__(998);var Socket=__webpack_require__(424);var Emitter=__webpack_require__(144);var parser=__webpack_require__(259);var on=__webpack_require__(425);var bind=__webpack_require__(426);var debug=__webpack_require__(91)('socket.io-client:manager');var indexOf=__webpack_require__(218);var Backoff=__webpack_require__(1015);var has=Object.prototype.hasOwnProperty;module.exports=Manager;function Manager(uri,opts){if(!(this instanceof Manager))return new Manager(uri,opts);if(uri&&('object'===typeof uri)){opts=uri;uri=undefined;}
opts=opts||{};opts.path=opts.path||'/socket.io';this.nsps={};this.subs=[];this.opts=opts;this.reconnection(opts.reconnection!==false);this.reconnectionAttempts(opts.reconnectionAttempts||Infinity);this.reconnectionDelay(opts.reconnectionDelay||1000);this.reconnectionDelayMax(opts.reconnectionDelayMax||5000);this.randomizationFactor(opts.randomizationFactor||0.5);this.backoff=new Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==opts.timeout?20000:opts.timeout);this.readyState='closed';this.uri=uri;this.connecting=[];this.lastPing=null;this.encoding=false;this.packetBuffer=[];this.encoder=new parser.Encoder();this.decoder=new parser.Decoder();this.autoConnect=opts.autoConnect!==false;if(this.autoConnect)this.open();}
Manager.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var nsp in this.nsps){if(has.call(this.nsps,nsp)){this.nsps[nsp].emit.apply(this.nsps[nsp],arguments);}}};Manager.prototype.updateSocketIds=function(){for(var nsp in this.nsps){if(has.call(this.nsps,nsp)){this.nsps[nsp].id=this.engine.id;}}};Emitter(Manager.prototype);Manager.prototype.reconnection=function(v){if(!arguments.length)return this._reconnection;this._reconnection=!!v;return this;};Manager.prototype.reconnectionAttempts=function(v){if(!arguments.length)return this._reconnectionAttempts;this._reconnectionAttempts=v;return this;};Manager.prototype.reconnectionDelay=function(v){if(!arguments.length)return this._reconnectionDelay;this._reconnectionDelay=v;this.backoff&&this.backoff.setMin(v);return this;};Manager.prototype.randomizationFactor=function(v){if(!arguments.length)return this._randomizationFactor;this._randomizationFactor=v;this.backoff&&this.backoff.setJitter(v);return this;};Manager.prototype.reconnectionDelayMax=function(v){if(!arguments.length)return this._reconnectionDelayMax;this._reconnectionDelayMax=v;this.backoff&&this.backoff.setMax(v);return this;};Manager.prototype.timeout=function(v){if(!arguments.length)return this._timeout;this._timeout=v;return this;};Manager.prototype.maybeReconnectOnOpen=function(){if(!this.reconnecting&&this._reconnection&&this.backoff.attempts===0){this.reconnect();}};Manager.prototype.open=Manager.prototype.connect=function(fn,opts){debug('readyState %s',this.readyState);if(~this.readyState.indexOf('open'))return this;debug('opening %s',this.uri);this.engine=eio(this.uri,this.opts);var socket=this.engine;var self=this;this.readyState='opening';this.skipReconnect=false;var openSub=on(socket,'open',function(){self.onopen();fn&&fn();});var errorSub=on(socket,'error',function(data){debug('connect_error');self.cleanup();self.readyState='closed';self.emitAll('connect_error',data);if(fn){var err=new Error('Connection error');err.data=data;fn(err);}else{self.maybeReconnectOnOpen();}});if(false!==this._timeout){var timeout=this._timeout;debug('connect attempt will timeout after %d',timeout);var timer=setTimeout(function(){debug('connect attempt timed out after %d',timeout);openSub.destroy();socket.close();socket.emit('error','timeout');self.emitAll('connect_timeout',timeout);},timeout);this.subs.push({destroy:function(){clearTimeout(timer);}});}
this.subs.push(openSub);this.subs.push(errorSub);return this;};Manager.prototype.onopen=function(){debug('open');this.cleanup();this.readyState='open';this.emit('open');var socket=this.engine;this.subs.push(on(socket,'data',bind(this,'ondata')));this.subs.push(on(socket,'ping',bind(this,'onping')));this.subs.push(on(socket,'pong',bind(this,'onpong')));this.subs.push(on(socket,'error',bind(this,'onerror')));this.subs.push(on(socket,'close',bind(this,'onclose')));this.subs.push(on(this.decoder,'decoded',bind(this,'ondecoded')));};Manager.prototype.onping=function(){this.lastPing=new Date();this.emitAll('ping');};Manager.prototype.onpong=function(){this.emitAll('pong',new Date()-this.lastPing);};Manager.prototype.ondata=function(data){this.decoder.add(data);};Manager.prototype.ondecoded=function(packet){this.emit('packet',packet);};Manager.prototype.onerror=function(err){debug('error',err);this.emitAll('error',err);};Manager.prototype.socket=function(nsp,opts){var socket=this.nsps[nsp];if(!socket){socket=new Socket(this,nsp,opts);this.nsps[nsp]=socket;var self=this;socket.on('connecting',onConnecting);socket.on('connect',function(){socket.id=self.engine.id;});if(this.autoConnect){onConnecting();}}
function onConnecting(){if(!~indexOf(self.connecting,socket)){self.connecting.push(socket);}}
return socket;};Manager.prototype.destroy=function(socket){var index=indexOf(this.connecting,socket);if(~index)this.connecting.splice(index,1);if(this.connecting.length)return;this.close();};Manager.prototype.packet=function(packet){debug('writing packet %j',packet);var self=this;if(packet.query&&packet.type===0)packet.nsp+='?'+packet.query;if(!self.encoding){self.encoding=true;this.encoder.encode(packet,function(encodedPackets){for(var i=0;i<encodedPackets.length;i++){self.engine.write(encodedPackets[i],packet.options);}
self.encoding=false;self.processPacketQueue();});}else{self.packetBuffer.push(packet);}};Manager.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var pack=this.packetBuffer.shift();this.packet(pack);}};Manager.prototype.cleanup=function(){debug('cleanup');var subsLength=this.subs.length;for(var i=0;i<subsLength;i++){var sub=this.subs.shift();sub.destroy();}
this.packetBuffer=[];this.encoding=false;this.lastPing=null;this.decoder.destroy();};Manager.prototype.close=Manager.prototype.disconnect=function(){debug('disconnect');this.skipReconnect=true;this.reconnecting=false;if('opening'===this.readyState){this.cleanup();}
this.backoff.reset();this.readyState='closed';if(this.engine)this.engine.close();};Manager.prototype.onclose=function(reason){debug('onclose');this.cleanup();this.backoff.reset();this.readyState='closed';this.emit('close',reason);if(this._reconnection&&!this.skipReconnect){this.reconnect();}};Manager.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var self=this;if(this.backoff.attempts>=this._reconnectionAttempts){debug('reconnect failed');this.backoff.reset();this.emitAll('reconnect_failed');this.reconnecting=false;}else{var delay=this.backoff.duration();debug('will wait %dms before reconnect attempt',delay);this.reconnecting=true;var timer=setTimeout(function(){if(self.skipReconnect)return;debug('attempting reconnect');self.emitAll('reconnect_attempt',self.backoff.attempts);self.emitAll('reconnecting',self.backoff.attempts);if(self.skipReconnect)return;self.open(function(err){if(err){debug('reconnect attempt error');self.reconnecting=false;self.reconnect();self.emitAll('reconnect_error',err.data);}else{debug('reconnect success');self.onreconnect();}});},delay);this.subs.push({destroy:function(){clearTimeout(timer);}});}};Manager.prototype.onreconnect=function(){var attempt=this.backoff.attempts;this.reconnecting=false;this.backoff.reset();this.updateSocketIds();this.emitAll('reconnect',attempt);};}),(function(module,exports,__webpack_require__){(function(global){var XMLHttpRequest=__webpack_require__(260);var XHR=__webpack_require__(1002);var JSONP=__webpack_require__(1010);var websocket=__webpack_require__(1011);exports.polling=polling;exports.websocket=websocket;function polling(opts){var xhr;var xd=false;var xs=false;var jsonp=false!==opts.jsonp;if(global.location){var isSSL='https:'===location.protocol;var port=location.port;if(!port){port=isSSL?443:80;}
xd=opts.hostname!==location.hostname||port!==opts.port;xs=opts.secure!==isSSL;}
opts.xdomain=xd;opts.xscheme=xs;xhr=new XMLHttpRequest(opts);if('open'in xhr&&!opts.forceJSONP){return new XHR(opts);}else{if(!jsonp)throw new Error('JSONP disabled');return new JSONP(opts);}}}.call(exports,__webpack_require__(10)))}),(function(module,exports,__webpack_require__){var Transport=__webpack_require__(261);var parseqs=__webpack_require__(262);var parser=__webpack_require__(121);var inherit=__webpack_require__(179);var yeast=__webpack_require__(423);var debug=__webpack_require__(91)('engine.io-client:polling');module.exports=Polling;var hasXHR2=(function(){var XMLHttpRequest=__webpack_require__(260);var xhr=new XMLHttpRequest({xdomain:false});return null!=xhr.responseType;})();function Polling(opts){var forceBase64=(opts&&opts.forceBase64);if(!hasXHR2||forceBase64){this.supportsBinary=false;}
Transport.call(this,opts);}
inherit(Polling,Transport);Polling.prototype.name='polling';Polling.prototype.doOpen=function(){this.poll();};Polling.prototype.pause=function(onPause){var self=this;this.readyState='pausing';function pause(){debug('paused');self.readyState='paused';onPause();}
if(this.polling||!this.writable){var total=0;if(this.polling){debug('we are currently polling - waiting to pause');total++;this.once('pollComplete',function(){debug('pre-pause polling complete');--total||pause();});}
if(!this.writable){debug('we are currently writing - waiting to pause');total++;this.once('drain',function(){debug('pre-pause writing complete');--total||pause();});}}else{pause();}};Polling.prototype.poll=function(){debug('polling');this.polling=true;this.doPoll();this.emit('poll');};Polling.prototype.onData=function(data){var self=this;debug('polling got data %s',data);var callback=function(packet,index,total){if('opening'===self.readyState){self.onOpen();}
if('close'===packet.type){self.onClose();return false;}
self.onPacket(packet);};parser.decodePayload(data,this.socket.binaryType,callback);if('closed'!==this.readyState){this.polling=false;this.emit('pollComplete');if('open'===this.readyState){this.poll();}else{debug('ignoring poll - transport state "%s"',this.readyState);}}};Polling.prototype.doClose=function(){var self=this;function close(){debug('writing close packet');self.write([{type:'close'}]);}
if('open'===this.readyState){debug('transport open - closing');close();}else{debug('transport not open - deferring close');this.once('open',close);}};Polling.prototype.write=function(packets){var self=this;this.writable=false;var callbackfn=function(){self.writable=true;self.emit('drain');};parser.encodePayload(packets,this.supportsBinary,function(data){self.doWrite(data,callbackfn);});};Polling.prototype.uri=function(){var query=this.query||{};var schema=this.secure?'https':'http';var port='';if(false!==this.timestampRequests){query[this.timestampParam]=yeast();}
if(!this.supportsBinary&&!query.sid){query.b64=1;}
query=parseqs.encode(query);if(this.port&&(('https'===schema&&Number(this.port)!==443)||('http'===schema&&Number(this.port)!==80))){port=':'+this.port;}
if(query.length){query='?'+query;}
var ipv6=this.hostname.indexOf(':')!==-1;return schema+'://'+(ipv6?'['+this.hostname+']':this.hostname)+port+this.path+query;};}),(function(module,exports,__webpack_require__){(function(global){var isArray=__webpack_require__(1004);module.exports=hasBinary;function hasBinary(data){function _hasBinary(obj){if(!obj)return false;if((global.Buffer&&global.Buffer.isBuffer&&global.Buffer.isBuffer(obj))||(global.ArrayBuffer&&obj instanceof ArrayBuffer)||(global.Blob&&obj instanceof Blob)||(global.File&&obj instanceof File)){return true;}
if(isArray(obj)){for(var i=0;i<obj.length;i++){if(_hasBinary(obj[i])){return true;}}}else if(obj&&'object'==typeof obj){if(obj.toJSON&&'function'==typeof obj.toJSON){obj=obj.toJSON();}
for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)&&_hasBinary(obj[key])){return true;}}}
return false;}
return _hasBinary(data);}}.call(exports,__webpack_require__(10)))}),(function(module,exports,__webpack_require__){"use strict";var alphabet='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split(''),length=64,map={},seed=0,i=0,prev;function encode(num){var encoded='';do{encoded=alphabet[num%length]+encoded;num=Math.floor(num/length);}while(num>0);return encoded;}
function decode(str){var decoded=0;for(i=0;i<str.length;i++){decoded=decoded*length+map[str.charAt(i)];}
return decoded;}
function yeast(){var now=encode(+new Date());if(now!==prev)return seed=0,prev=now;return now+'.'+encode(seed++);}
for(;i<length;i++)map[alphabet[i]]=i;yeast.encode=encode;yeast.decode=decode;module.exports=yeast;}),(function(module,exports,__webpack_require__){var parser=__webpack_require__(259);var Emitter=__webpack_require__(144);var toArray=__webpack_require__(1014);var on=__webpack_require__(425);var bind=__webpack_require__(426);var debug=__webpack_require__(91)('socket.io-client:socket');var hasBin=__webpack_require__(422);module.exports=exports=Socket;var events={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1};var emit=Emitter.prototype.emit;function Socket(io,nsp,opts){this.io=io;this.nsp=nsp;this.json=this;this.ids=0;this.acks={};this.receiveBuffer=[];this.sendBuffer=[];this.connected=false;this.disconnected=true;if(opts&&opts.query){this.query=opts.query;}
if(this.io.autoConnect)this.open();}
Emitter(Socket.prototype);Socket.prototype.subEvents=function(){if(this.subs)return;var io=this.io;this.subs=[on(io,'open',bind(this,'onopen')),on(io,'packet',bind(this,'onpacket')),on(io,'close',bind(this,'onclose'))];};Socket.prototype.open=Socket.prototype.connect=function(){if(this.connected)return this;this.subEvents();this.io.open();if('open'===this.io.readyState)this.onopen();this.emit('connecting');return this;};Socket.prototype.send=function(){var args=toArray(arguments);args.unshift('message');this.emit.apply(this,args);return this;};Socket.prototype.emit=function(ev){if(events.hasOwnProperty(ev)){emit.apply(this,arguments);return this;}
var args=toArray(arguments);var parserType=parser.EVENT;if(hasBin(args)){parserType=parser.BINARY_EVENT;}
var packet={type:parserType,data:args};packet.options={};packet.options.compress=!this.flags||false!==this.flags.compress;if('function'===typeof args[args.length-1]){debug('emitting packet with ack id %d',this.ids);this.acks[this.ids]=args.pop();packet.id=this.ids++;}
if(this.connected){this.packet(packet);}else{this.sendBuffer.push(packet);}
delete this.flags;return this;};Socket.prototype.packet=function(packet){packet.nsp=this.nsp;this.io.packet(packet);};Socket.prototype.onopen=function(){debug('transport is open - connecting');if('/'!==this.nsp){if(this.query){this.packet({type:parser.CONNECT,query:this.query});}else{this.packet({type:parser.CONNECT});}}};Socket.prototype.onclose=function(reason){debug('close (%s)',reason);this.connected=false;this.disconnected=true;delete this.id;this.emit('disconnect',reason);};Socket.prototype.onpacket=function(packet){if(packet.nsp!==this.nsp)return;switch(packet.type){case parser.CONNECT:this.onconnect();break;case parser.EVENT:this.onevent(packet);break;case parser.BINARY_EVENT:this.onevent(packet);break;case parser.ACK:this.onack(packet);break;case parser.BINARY_ACK:this.onack(packet);break;case parser.DISCONNECT:this.ondisconnect();break;case parser.ERROR:this.emit('error',packet.data);break;}};Socket.prototype.onevent=function(packet){var args=packet.data||[];debug('emitting event %j',args);if(null!=packet.id){debug('attaching ack callback to event');args.push(this.ack(packet.id));}
if(this.connected){emit.apply(this,args);}else{this.receiveBuffer.push(args);}};Socket.prototype.ack=function(id){var self=this;var sent=false;return function(){if(sent)return;sent=true;var args=toArray(arguments);debug('sending ack %j',args);var type=hasBin(args)?parser.BINARY_ACK:parser.ACK;self.packet({type:type,id:id,data:args});};};Socket.prototype.onack=function(packet){var ack=this.acks[packet.id];if('function'===typeof ack){debug('calling ack %s with %j',packet.id,packet.data);ack.apply(this,packet.data);delete this.acks[packet.id];}else{debug('bad ack %s',packet.id);}};Socket.prototype.onconnect=function(){this.connected=true;this.disconnected=false;this.emit('connect');this.emitBuffered();};Socket.prototype.emitBuffered=function(){var i;for(i=0;i<this.receiveBuffer.length;i++){emit.apply(this,this.receiveBuffer[i]);}
this.receiveBuffer=[];for(i=0;i<this.sendBuffer.length;i++){this.packet(this.sendBuffer[i]);}
this.sendBuffer=[];};Socket.prototype.ondisconnect=function(){debug('server disconnect (%s)',this.nsp);this.destroy();this.onclose('io server disconnect');};Socket.prototype.destroy=function(){if(this.subs){for(var i=0;i<this.subs.length;i++){this.subs[i].destroy();}
this.subs=null;}
this.io.destroy(this);};Socket.prototype.close=Socket.prototype.disconnect=function(){if(this.connected){debug('performing disconnect (%s)',this.nsp);this.packet({type:parser.DISCONNECT});}
this.destroy();if(this.connected){this.onclose('io client disconnect');}
return this;};Socket.prototype.compress=function(compress){this.flags=this.flags||{};this.flags.compress=compress;return this;};}),(function(module,exports){module.exports=on;function on(obj,ev,fn){obj.on(ev,fn);return{destroy:function(){obj.removeListener(ev,fn);}};}}),(function(module,exports){var slice=[].slice;module.exports=function(obj,fn){if('string'==typeof fn)fn=obj[fn];if('function'!=typeof fn)throw new Error('bind() requires a function');var args=slice.call(arguments,2);return function(){return fn.apply(obj,args.concat(slice.call(arguments)));}};}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_sockets_protocol_extend_socket_Node_Protocol__=__webpack_require__(141);var __WEBPACK_IMPORTED_MODULE_1_common_sockets_protocol_Node_Propagation_Protocol__=__webpack_require__(263);var __WEBPACK_IMPORTED_MODULE_2_common_sockets_protocol_signaling_server_Node_Signaling_Server_Protocol__=__webpack_require__(428);var __WEBPACK_IMPORTED_MODULE_3_common_sockets_protocol_signaling_client_Node_Signaling_Client_Protocol__=__webpack_require__(264);var __WEBPACK_IMPORTED_MODULE_4_common_sockets_protocol_extend_socket_Socket_Address__=__webpack_require__(76);var __WEBPACK_IMPORTED_MODULE_5__Socket_Protocol__=__webpack_require__(1021);var __WEBPACK_IMPORTED_MODULE_6_consts_global__=__webpack_require__(45);var __WEBPACK_IMPORTED_MODULE_7_consts_const_global__=__webpack_require__(2);class SocketExtend{extendSocket(socket,address,port,uuid,level){socket.latency=0;socket.level=level;socket.node={level:level,};socket.node.getSocket=()=>socket;socket.node.on=(name,callback)=>socket.on(name,async(data)=>{if(__WEBPACK_IMPORTED_MODULE_6_consts_global__["a"].TERMINATED)return;try{__WEBPACK_IMPORTED_MODULE_5__Socket_Protocol__["a"]._processBufferArray(data);let answer=await callback(data);return answer;}catch(exception){if(__WEBPACK_IMPORTED_MODULE_7_consts_const_global__["a"].DEBUG)
console.log("socket.on raised an error",exception);}});socket.node.once=(name,callback)=>socket.once(name,async(data)=>{if(__WEBPACK_IMPORTED_MODULE_6_consts_global__["a"].TERMINATED)return;try{__WEBPACK_IMPORTED_MODULE_5__Socket_Protocol__["a"]._processBufferArray(data);let answer=await callback(data);return answer;}catch(exception){if(__WEBPACK_IMPORTED_MODULE_7_consts_const_global__["a"].DEBUG)
console.log("socket.on raised an error",exception);}});socket.node.sckAddress=__WEBPACK_IMPORTED_MODULE_4_common_sockets_protocol_extend_socket_Socket_Address__["a"].createSocketAddress(address,port,uuid);if(socket.webRTC)
socket.node.sendRequest=__WEBPACK_IMPORTED_MODULE_5__Socket_Protocol__["a"].prototype.sendRequestWebPeer.bind(socket);else
socket.node.sendRequest=__WEBPACK_IMPORTED_MODULE_5__Socket_Protocol__["a"].prototype.sendRequestSocket.bind(socket);socket.node.sendRequestWaitOnce=__WEBPACK_IMPORTED_MODULE_5__Socket_Protocol__["a"].prototype.sendRequestWaitOnce.bind(socket);socket.node.protocol={};socket.node.protocol.helloValidated=false;socket.node.protocol.blocks=0;socket.node.protocol.blocksPrevious=0;socket.node.protocol.justSendHello=__WEBPACK_IMPORTED_MODULE_0_common_sockets_protocol_extend_socket_Node_Protocol__["a"].prototype.justSendHello.bind(socket);socket.node.protocol.processHello=__WEBPACK_IMPORTED_MODULE_0_common_sockets_protocol_extend_socket_Node_Protocol__["a"].prototype.processHello.bind(socket);socket.node.protocol.sendLastBlock=__WEBPACK_IMPORTED_MODULE_0_common_sockets_protocol_extend_socket_Node_Protocol__["a"].prototype.sendLastBlock.bind(socket);socket.node.protocol.penalty={};socket.node.protocol.calculateLatency=__WEBPACK_IMPORTED_MODULE_0_common_sockets_protocol_extend_socket_Node_Protocol__["a"].prototype.calculateLatency.bind(socket);socket.node.on("ping",()=>socket.node.sendRequest("ping/pong",'r'));socket.node.protocol.propagation={};socket.node.protocol.propagation.initializePropagation=()=>__WEBPACK_IMPORTED_MODULE_1_common_sockets_protocol_Node_Propagation_Protocol__["a"].initializeSocketForPropagation(socket);socket.node.protocol.signaling={};socket.node.protocol.signaling.server={};socket.node.protocol.signaling.server.initializeSignalingServerService=()=>__WEBPACK_IMPORTED_MODULE_2_common_sockets_protocol_signaling_server_Node_Signaling_Server_Protocol__["a"].initializeSignalingServerService(socket);socket.node.protocol.signaling.client={};socket.node.protocol.signaling.client.initializeSignalingClientService=()=>__WEBPACK_IMPORTED_MODULE_3_common_sockets_protocol_signaling_client_Node_Signaling_Client_Protocol__["a"].initializeSignalingClientService(socket,);socket.node.protocol.agent={};socket.node.protocol.agent.startedAgentDone=false;__WEBPACK_IMPORTED_MODULE_1_common_sockets_protocol_Node_Propagation_Protocol__["a"].initializeNodesPropagation(socket);}}
__webpack_exports__["a"]=(new SocketExtend());}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_2__signaling_server_room_Signaling_Server_Room_List__=__webpack_require__(429);var __WEBPACK_IMPORTED_MODULE_3__signaling_server_room_Signaling_Server_Room_Connection_Object__=__webpack_require__(430);var __WEBPACK_IMPORTED_MODULE_4__signaling_server_service_Node_Signaling_Server_Service__=__webpack_require__(1017);class NodeSignalingServerProtocol{constructor(){console.log("NodeSignalingServerProtocol constructor");__WEBPACK_IMPORTED_MODULE_4__signaling_server_service_Node_Signaling_Server_Service__["a"].startConnectingWebPeers();}
initializeSignalingServerService(socket){socket.node.on("signals/server/register/accept-web-peer-connections",(data)=>{let acceptWebPeers=false;if(typeof data.acceptWebPeers==="boolean")acceptWebPeers=data.acceptWebPeers;__WEBPACK_IMPORTED_MODULE_4__signaling_server_service_Node_Signaling_Server_Service__["a"].registerSocketForSignaling(socket,acceptWebPeers);});socket.node.on("signals/server/connections/established-connection-was-dropped",(data)=>{let connection=__WEBPACK_IMPORTED_MODULE_2__signaling_server_room_Signaling_Server_Room_List__["a"].searchSignalingServerRoomConnectionById(data.connectionId);if(!connection){connection.status=__WEBPACK_IMPORTED_MODULE_3__signaling_server_room_Signaling_Server_Room_Connection_Object__["a"].ConnectionStatus.peerConnectionNotEstablished;let waitlist=__WEBPACK_IMPORTED_MODULE_4__signaling_server_service_Node_Signaling_Server_Service__["a"].searchNodeSignalingServerWaitlist(socket);if(waitlist)waitlist.acceptWebPeers=true;}});socket.node.on("signals/server/connections/was-established-successfully",(data)=>{if(!data.connectionId){let connection=__WEBPACK_IMPORTED_MODULE_2__signaling_server_room_Signaling_Server_Room_List__["a"].searchSignalingServerRoomConnectionById(data.connectionId);if(connection)connection.status=__WEBPACK_IMPORTED_MODULE_3__signaling_server_room_Signaling_Server_Room_Connection_Object__["a"].ConnectionStatus.peerConnectionEstablished;}});socket.node.on("signals/server/connections/error-establishing-connection",(data)=>{if(!data.connectionId){let connection=__WEBPACK_IMPORTED_MODULE_2__signaling_server_room_Signaling_Server_Room_List__["a"].searchSignalingServerRoomConnectionById(data.connectionId);if(!connection)connection.status=__WEBPACK_IMPORTED_MODULE_3__signaling_server_room_Signaling_Server_Room_Connection_Object__["a"].ConnectionStatus.peerConnectionError;}});this._initializeClient1(socket);this._initializeClient2(socket);}
_initializeClient1(client1){client1.node.on("signals/client/initiator/generate-initiator-signal/answer",(initiatorAnswer)=>{let connection=__WEBPACK_IMPORTED_MODULE_2__signaling_server_room_Signaling_Server_Room_List__["a"].searchSignalingServerRoomConnectionById(initiatorAnswer.connectionId);if(!connection){console.error("signals/client/initiator/generate-initiator-signal/answer connection is null");return;}
if(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].DEBUG)console.warn("WEBRTC SERVER 1_1",connection.id);if(initiatorAnswer===null||initiatorAnswer.initiatorSignal===undefined)
connection.status=__WEBPACK_IMPORTED_MODULE_3__signaling_server_room_Signaling_Server_Room_Connection_Object__["a"].ConnectionStatus.peerConnectionError;else if(initiatorAnswer.accepted===false&&initiatorAnswer.message==="Already connected")
connection.status=__WEBPACK_IMPORTED_MODULE_3__signaling_server_room_Signaling_Server_Room_Connection_Object__["a"].ConnectionStatus.peerConnectionAlreadyConnected;else if(initiatorAnswer.accepted===false&&initiatorAnswer.message==="I can't accept WebPeers anymore")
this._clientIsNotAcceptingAnymoreWebPeers(client1,connection);else if(initiatorAnswer.accepted===true){connection.status=__WEBPACK_IMPORTED_MODULE_3__signaling_server_room_Signaling_Server_Room_Connection_Object__["a"].ConnectionStatus.answerSignalGenerating;connection.initiatorSignal=initiatorAnswer.initiatorSignal;connection.client2.node.sendRequest("signals/client/answer/receive-initiator-signal",{connectionId:connection.id,initiatorSignal:connection.initiatorSignal,remoteAddress:connection.client1.node.sckAddress.getAddress(false),remoteUUID:connection.client1.node.sckAddress.uuid,});}});client1.on("signals/client/initiator/join-answer-signal/answer",(result)=>{try{let connection=__WEBPACK_IMPORTED_MODULE_2__signaling_server_room_Signaling_Server_Room_List__["a"].searchSignalingServerRoomConnectionById(result.connectionId);if(connection===undefined){console.error("signals/client/initiator/join-answer-signal/answer connection is empty",result.connectionId);return;}
if(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].DEBUG)console.warn("WEBRTC SERVER 1_2",connection.id);if(result===null||result===undefined)
connection.status=__WEBPACK_IMPORTED_MODULE_3__signaling_server_room_Signaling_Server_Room_Connection_Object__["a"].ConnectionStatus.peerConnectionError;else if(result.established===false&&result.message==="Already connected")
connection.status=__WEBPACK_IMPORTED_MODULE_3__signaling_server_room_Signaling_Server_Room_Connection_Object__["a"].ConnectionStatus.peerConnectionAlreadyConnected;else if(result.established===false&&result.message==="I can't accept WebPeers anymore")
this._clientIsNotAcceptingAnymoreWebPeers(client1,connection);else
connection.status=__WEBPACK_IMPORTED_MODULE_3__signaling_server_room_Signaling_Server_Room_Connection_Object__["a"].ConnectionStatus.peerConnectionEstablished;}catch(exception){console.error("signals/client/initiator/join-answer-signal/answer exception",exception,result);}});client1.node.on("signals/server/new-initiator-ice-candidate",async(iceCandidate)=>{let connection=__WEBPACK_IMPORTED_MODULE_2__signaling_server_room_Signaling_Server_Room_List__["a"].searchSignalingServerRoomConnectionById(iceCandidate.connectionId);if(!connection){console.error("signals/server/new-answer-ice-candidate connection is empty",iceCandidate.connectionId);return;}
if(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].DEBUG)console.warn("WEBRTC SERVER 1_3",connection.id);connection.client2.node.sendRequest("signals/client/answer/receive-ice-candidate",{connectionId:connection.id,initiatorSignal:connection.initiatorSignal,iceCandidate:iceCandidate,remoteAddress:connection.client1.node.sckAddress.getAddress(false),remoteUUID:connection.client1.node.sckAddress.uuid,});});client1.node.on("signals/client/initiator/receive-ice-candidate/answer",async(answer)=>{let connection=__WEBPACK_IMPORTED_MODULE_2__signaling_server_room_Signaling_Server_Room_List__["a"].searchSignalingServerRoomConnectionById(answer.connectionId);if(!connection){console.error("signals/server/new-answer-ice-candidate connection is empty",answer.connectionId);return;}
if(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].DEBUG)console.warn("WEBRTC SERVER 1_4",connection.id);if(answer===null||answer===undefined)
connection.status=__WEBPACK_IMPORTED_MODULE_3__signaling_server_room_Signaling_Server_Room_Connection_Object__["a"].ConnectionStatus.peerConnectionError;else if(answer.established===false&&answer.message==="I can't accept WebPeers anymore")
this._clientIsNotAcceptingAnymoreWebPeers(client1,connection);});}
_initializeClient2(client2){client2.node.on("signals/client/answer/receive-initiator-signal/answer",(answer)=>{let connection=__WEBPACK_IMPORTED_MODULE_2__signaling_server_room_Signaling_Server_Room_List__["a"].searchSignalingServerRoomConnectionById(answer.connectionId);if(!connection){console.error("signals/client/answer/receive-initiator-signal/answer connection is empty",answer.connectionId);return;}
if(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].DEBUG)console.warn("WEBRTC SERVER 2_1",connection.id);if(answer===null||answer===undefined||answer.answerSignal===undefined)
connection.status=__WEBPACK_IMPORTED_MODULE_3__signaling_server_room_Signaling_Server_Room_Connection_Object__["a"].ConnectionStatus.peerConnectionError;else if(answer.accepted===false&&answer.message==="Already connected")
connection.status=__WEBPACK_IMPORTED_MODULE_3__signaling_server_room_Signaling_Server_Room_Connection_Object__["a"].ConnectionStatus.peerConnectionAlreadyConnected;else if(answer.accepted===false&&answer.message==="I can't accept WebPeers anymore")
this._clientIsNotAcceptingAnymoreWebPeers(client2,connection);else if(answer.accepted===true){connection.status=__WEBPACK_IMPORTED_MODULE_3__signaling_server_room_Signaling_Server_Room_Connection_Object__["a"].ConnectionStatus.peerConnectionEstablishing;connection.client1.node.sendRequest("signals/client/initiator/join-answer-signal",{connectionId:connection.id,initiatorSignal:answer.initiatorSignal,answerSignal:answer.answerSignal,remoteAddress:connection.client2.node.sckAddress.getAddress(false),remoteUUID:connection.client2.node.sckAddress.uuid,});}});client2.node.on("signals/server/new-answer-ice-candidate",async(iceCandidate)=>{let connection=__WEBPACK_IMPORTED_MODULE_2__signaling_server_room_Signaling_Server_Room_List__["a"].searchSignalingServerRoomConnectionById(iceCandidate.connectionId);if(!connection){console.error("signals/server/new-answer-ice-candidate connection is empty",iceCandidate.connectionId);return;}
if(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].DEBUG)console.warn("WEBRTC SERVER 2_2",connection.id);if(iceCandidate===null||iceCandidate===undefined)
connection.status=__WEBPACK_IMPORTED_MODULE_3__signaling_server_room_Signaling_Server_Room_Connection_Object__["a"].ConnectionStatus.peerConnectionError;connection.client1.node.sendRequest("signals/client/initiator/receive-ice-candidate",{connectionId:connection.id,initiatorSignal:connection.initiatorSignal,iceCandidate:iceCandidate,remoteAddress:connection.client2.node.sckAddress.getAddress(false),remoteUUID:connection.client2.node.sckAddress.uuid,});});client2.node.on("signals/server/new-initiator-ice-candidate/answer",async(answer)=>{let connection=__WEBPACK_IMPORTED_MODULE_2__signaling_server_room_Signaling_Server_Room_List__["a"].searchSignalingServerRoomConnectionById(answer.connectionId);if(!connection){console.error("signals/server/new-initiator-ice-candidate/answer",answer.connectionId);return;}
if(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].DEBUG)console.warn("WEBRTC SERVER 2_3",connection.id);if(answer===null||answer===undefined)
connection.status=__WEBPACK_IMPORTED_MODULE_3__signaling_server_room_Signaling_Server_Room_Connection_Object__["a"].ConnectionStatus.peerConnectionError;else if(answer.established===false&&answer.message==="I can't accept WebPeers anymore")
this._clientIsNotAcceptingAnymoreWebPeers(client2,connection);});}
connectWebPeer(client1,client2){try{if(client1===null||client2===null)return false;let previousEstablishedConnection=__WEBPACK_IMPORTED_MODULE_2__signaling_server_room_Signaling_Server_Room_List__["a"].searchSignalingServerRoomConnection(client1,client2);if(previousEstablishedConnection===undefined||(previousEstablishedConnection.checkLastTimeChecked(10*1000)&&[__WEBPACK_IMPORTED_MODULE_3__signaling_server_room_Signaling_Server_Room_Connection_Object__["a"].ConnectionStatus.peerConnectionNotEstablished].indexOf(previousEstablishedConnection.status)!==-1)||(previousEstablishedConnection.checkLastTimeChecked(10*1000)&&[__WEBPACK_IMPORTED_MODULE_3__signaling_server_room_Signaling_Server_Room_Connection_Object__["a"].ConnectionStatus.peerConnectionError].indexOf(previousEstablishedConnection.status)!==-1)){let connection=__WEBPACK_IMPORTED_MODULE_2__signaling_server_room_Signaling_Server_Room_List__["a"].registerSignalingServerRoomConnection(client1,client2,__WEBPACK_IMPORTED_MODULE_3__signaling_server_room_Signaling_Server_Room_Connection_Object__["a"].ConnectionStatus.initiatorSignalGenerating);client1.node.sendRequest("signals/client/initiator/generate-initiator-signal",{connectionId:connection.id,remoteAddress:client2.node.sckAddress.getAddress(false),remoteUUID:client2.node.sckAddress.uuid,});}}catch(exception){console.error("connectWebPeer exception ",exception);}}
_clientIsNotAcceptingAnymoreWebPeers(client,connection){__WEBPACK_IMPORTED_MODULE_2__signaling_server_room_Signaling_Server_Room_List__["a"].removeServerRoomConnection(connection);client.acceptWebPeers=false;}}
__webpack_exports__["a"]=(new NodeSignalingServerProtocol());}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_sockets_protocol_extend_socket_Socket_Address__=__webpack_require__(76);var __WEBPACK_IMPORTED_MODULE_1__Signaling_Server_Room_Connection_Object__=__webpack_require__(430);var __WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_3_node_lists_types_Connection_Type__=__webpack_require__(47);var __WEBPACK_IMPORTED_MODULE_4_node_lists_types_Node_Type__=__webpack_require__(35);class SignalingServerRoomList{constructor(){console.log("SignalingRoomList constructor");this.list={};__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].emitter.on("nodes-list/disconnected",(result)=>{this._disconnectedNode(result)});}
getConnectionUuid(client1,client2){if(client2.uuid<client1.uuid)
return client2.node.sckAddress.uuid+"_"+client1.node.sckAddress.uuid;return client1.node.sckAddress.uuid+"_"+client2.node.sckAddress.uuid;}
registerSignalingServerRoomConnection(client1,client2,status){if(client1===null||client2===null)
return null;let connection=this.searchSignalingServerRoomConnection(client1,client2);if(connection===undefined){let roomConnectionObject=new __WEBPACK_IMPORTED_MODULE_1__Signaling_Server_Room_Connection_Object__["a"](client1,client2,status,this.getConnectionUuid(client1,client2));this.list[roomConnectionObject.id]=roomConnectionObject;return roomConnectionObject;}else{connection.status=status;}
return connection;}
searchSignalingServerRoomConnection(client1,client2){let uuid=this.getConnectionUuid(client1,client2);return this.list[uuid];}
searchSignalingServerRoomConnectionById(uuid){return this.list[uuid];}
_disconnectedNode(nodesListObject){if([__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Connection_Type__["a"].CONNECTION_SERVER_SOCKET,__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Connection_Type__["a"].CONNECTION_WEBRTC].indexOf(nodesListObject.connectionType)<0)return;for(let key in this.list)
if(this.list[key].client1===nodesListObject.socket||this.list[key].client2===nodesListObject.socket){this.list[key].client1=undefined;this.list[key].client2=undefined;this.list[key]=undefined;delete this.list[key];}}
removeServerRoomConnection(connection){for(let key in this.list)
if(this.list[key].id===connection.id){this.list[key]=undefined;delete this.list[key];}}}
__webpack_exports__["a"]=(new SignalingServerRoomList());}),(function(module,__webpack_exports__,__webpack_require__){"use strict";let ConnectionStatus={initiatorSignalGenerating:0,initiatorSignalGenerated:1,answerSignalGenerating:2,answerSignalGenerated:3,peerConnectionEstablishing:4,peerConnectionEstablished:5,peerConnectionNotEstablished:6,peerConnectionAlreadyConnected:44,peerConnectionError:66,};class SignalingServerRoomConnectionObject{constructor(client1,client2,status,id){this.client1=client1;this.client2=client2;this._status=status;this.id=id;this.errorTrials=0;this.established=false;this.lastTimeChecked=0;this.lastTimeConnected=0;}
checkLastTimeChecked(timeTryReconnectAgain){let time=new Date().getTime();if((time-this.lastTimeChecked)>=(timeTryReconnectAgain+this.errorTrials*2000))
return true;return false;}
set status(newValue){this._status=newValue;if(newValue===ConnectionStatus.peerConnectionEstablished){this.errorTrials=0;this.lastTimeConnected=new Date().getTime();this.lastTimeChecked=new Date().getTime();}
else
if([ConnectionStatus.peerConnectionNotEstablished,ConnectionStatus.peerConnectionError].indexOf(newValue)!==-1){this.errorTrials++;this.lastTimeChecked=new Date().getTime();}}
get status(){return this._status;}}
SignalingServerRoomConnectionObject.ConnectionStatus=ConnectionStatus;__webpack_exports__["a"]=(SignalingServerRoomConnectionObject);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1__signaling_client_list_signaling_client_list__=__webpack_require__(265);var __WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_3_main_blockchain_Blockchain__=__webpack_require__(5);class NodeSignalingClientService{constructor(){this.serversList=[];__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].emitter.on("nodes-list/disconnected",async(nodesListObject)=>{await this._desinitializeNode(nodesListObject.socket);});}
_desinitializeNode(socket){for(let i=0;i<this.serversList.length;i++)
if(this.serversList[i].socket.node.sckAddress.uuid===socket.node.sckAddress.uuid){this.serversList[i].socket=undefined;this.serversList.splice(i,1);return;}}
subscribeSignalingServer(socket){this.serversList.push({socket:socket});this._askSignalingServer(socket);}
askRandomSignalingServerToConnect(){let index=Math.floor(Math.random()*this.serversList.length);this._askSignalingServer(this.serversList[index].socket);}
_askSignalingServer(socket){if(!__WEBPACK_IMPORTED_MODULE_3_main_blockchain_Blockchain__["a"].Agent.consensus)
return;socket.node.sendRequest("signals/server/register/accept-web-peer-connections",{acceptWebPeers:__WEBPACK_IMPORTED_MODULE_1__signaling_client_list_signaling_client_list__["a"].connected.length<__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].SETTINGS.PARAMS.CONNECTIONS.BROWSER.WEBRTC.MAXIMUM_CONNECTIONS});}}
__webpack_exports__["a"]=(new NodeSignalingClientService());}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__Interface_Blockchain_Agent__=__webpack_require__(256);var __WEBPACK_IMPORTED_MODULE_1_main_blockchain_Blockchain__=__webpack_require__(5);let NodeExpress;if(false){NodeExpress=require('node/sockets/node-server/express/Node-Express').default;}
class InterfaceBlockchainAgentMinerPool extends __WEBPACK_IMPORTED_MODULE_0__Interface_Blockchain_Agent__["a"]{_determineSynchronizedSlaves(){return __WEBPACK_IMPORTED_MODULE_0__Interface_Blockchain_Agent__["a"].prototype._determineSynchronizedSlaves.call(this)&&!__WEBPACK_IMPORTED_MODULE_1_main_blockchain_Blockchain__["a"].isPoolActivated&&!__WEBPACK_IMPORTED_MODULE_1_main_blockchain_Blockchain__["a"].MinerPoolManagement.minerPoolStarted;}}
__webpack_exports__["a"]=(InterfaceBlockchainAgentMinerPool);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__Interface_Blockchain_Agent__=__webpack_require__(256);var __WEBPACK_IMPORTED_MODULE_1__protocol_Interface_Blockchain_Protocol__=__webpack_require__(177);var __WEBPACK_IMPORTED_MODULE_2__Interface_Blockchain_Agent_Miner_Pool__=__webpack_require__(432);class InterfaceBlockchainAgentBlockHeaders extends __WEBPACK_IMPORTED_MODULE_2__Interface_Blockchain_Agent_Miner_Pool__["a"]{_initializeProtocol(){this.protocol.initialize(["acceptBlockHeaders"]);}}
__webpack_exports__["a"]=(InterfaceBlockchainAgentBlockHeaders);}),(function(module,exports,__webpack_require__){var html4=__webpack_require__(1040);var URI=__webpack_require__(1041);if('I'.toLowerCase()!=='i'){throw 'I/i problem';}
var html=(function(html4){var parseCssDeclarations,sanitizeCssProperty,cssSchema;if('undefined'!==typeof window){parseCssDeclarations=window['parseCssDeclarations'];sanitizeCssProperty=window['sanitizeCssProperty'];cssSchema=window['cssSchema'];}
var ENTITIES={'lt':'<','LT':'<','gt':'>','GT':'>','amp':'&','AMP':'&','quot':'"','apos':'\'','nbsp':'\u00a0'};var decimalEscapeRe=/^#(\d+)$/;var hexEscapeRe=/^#x([0-9A-Fa-f]+)$/;var safeEntityNameRe=/^[A-Za-z][A-za-z0-9]+$/;var entityLookupElement=('undefined'!==typeof window&&window['document'])?window['document'].createElement('textarea'):null;function lookupEntity(name){if(ENTITIES.hasOwnProperty(name)){return ENTITIES[name];}
var m=name.match(decimalEscapeRe);if(m){return String.fromCharCode(parseInt(m[1],10));}else if(!!(m=name.match(hexEscapeRe))){return String.fromCharCode(parseInt(m[1],16));}else if(entityLookupElement&&safeEntityNameRe.test(name)){entityLookupElement.innerHTML='&'+name+';';var text=entityLookupElement.textContent;ENTITIES[name]=text;return text;}else{return '&'+name+';';}}
function decodeOneEntity(_,name){return lookupEntity(name);}
var nulRe=/\0/g;function stripNULs(s){return s.replace(nulRe,'');}
var ENTITY_RE_1=/&(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/g;var ENTITY_RE_2=/^(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/;function unescapeEntities(s){if(s){return s.replace(ENTITY_RE_1,decodeOneEntity);}
else{return s;}}
var ampRe=/&/g;var looseAmpRe=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi;var ltRe=/[<]/g;var gtRe=/>/g;var quotRe=/\"/g;function escapeAttrib(s){if(s){return(''+s).replace(ampRe,'&amp;').replace(ltRe,'&lt;').replace(gtRe,'&gt;').replace(quotRe,'&#34;');}
else{return s;}}
function normalizeRCData(rcdata){if(rcdata){return rcdata.replace(looseAmpRe,'&amp;$1').replace(ltRe,'&lt;').replace(gtRe,'&gt;');}
else{return rcdata;}}
var ATTR_RE=new RegExp('^\\s*'+
'([-.:\\w]+)'+
'(?:'+('\\s*(=)\\s*'+
'('+('(\")[^\"]*(\"|$)'+
'|'+
'(\')[^\']*(\'|$)'+
'|'+
'(?=[a-z][-\\w]*\\s*=)'+
'|'+
'[^\"\'\\s]*')+
')')+
')?','i');var splitWillCapture=('a,b'.split(/(,)/).length===3);var EFLAGS_TEXT=html4.eflags['CDATA']|html4.eflags['RCDATA'];function makeSaxParser(handler){var hcopy={cdata:handler.cdata||handler['cdata'],comment:handler.comment||handler['comment'],endDoc:handler.endDoc||handler['endDoc'],endTag:handler.endTag||handler['endTag'],pcdata:handler.pcdata||handler['pcdata'],rcdata:handler.rcdata||handler['rcdata'],startDoc:handler.startDoc||handler['startDoc'],startTag:handler.startTag||handler['startTag']};return function(htmlText,param){return parse(htmlText,hcopy,param);};}
var continuationMarker={};function parse(htmlText,handler,param){var m,p,tagName;var parts=htmlSplit(htmlText);var state={noMoreGT:false,noMoreEndComments:false};parseCPS(handler,parts,0,state,param);}
function continuationMaker(h,parts,initial,state,param){return function(){parseCPS(h,parts,initial,state,param);};}
function parseCPS(h,parts,initial,state,param){try{if(h.startDoc&&initial==0){h.startDoc(param);}
var m,p,tagName;for(var pos=initial,end=parts.length;pos<end;){var current=parts[pos++];var next=parts[pos];switch(current){case '&':if(ENTITY_RE_2.test(next)){if(h.pcdata){h.pcdata('&'+next,param,continuationMarker,continuationMaker(h,parts,pos,state,param));}
pos++;}else{if(h.pcdata){h.pcdata("&amp;",param,continuationMarker,continuationMaker(h,parts,pos,state,param));}}
break;case '<\/':if((m=/^([-\w:]+)[^\'\"]*/.exec(next))){if(m[0].length===next.length&&parts[pos+1]==='>'){pos+=2;tagName=m[1].toLowerCase();if(h.endTag){h.endTag(tagName,param,continuationMarker,continuationMaker(h,parts,pos,state,param));}}else{pos=parseEndTag(parts,pos,h,param,continuationMarker,state);}}else{if(h.pcdata){h.pcdata('&lt;/',param,continuationMarker,continuationMaker(h,parts,pos,state,param));}}
break;case '<':if(m=/^([-\w:]+)\s*\/?/.exec(next)){if(m[0].length===next.length&&parts[pos+1]==='>'){pos+=2;tagName=m[1].toLowerCase();if(h.startTag){h.startTag(tagName,[],param,continuationMarker,continuationMaker(h,parts,pos,state,param));}
var eflags=html4.ELEMENTS[tagName];if(eflags&EFLAGS_TEXT){var tag={name:tagName,next:pos,eflags:eflags};pos=parseText(parts,tag,h,param,continuationMarker,state);}}else{pos=parseStartTag(parts,pos,h,param,continuationMarker,state);}}else{if(h.pcdata){h.pcdata('&lt;',param,continuationMarker,continuationMaker(h,parts,pos,state,param));}}
break;case '<\!--':if(!state.noMoreEndComments){for(p=pos+1;p<end;p++){if(parts[p]==='>'&&/--$/.test(parts[p-1])){break;}}
if(p<end){if(h.comment){var comment=parts.slice(pos,p).join('');h.comment(comment.substr(0,comment.length-2),param,continuationMarker,continuationMaker(h,parts,p+1,state,param));}
pos=p+1;}else{state.noMoreEndComments=true;}}
if(state.noMoreEndComments){if(h.pcdata){h.pcdata('&lt;!--',param,continuationMarker,continuationMaker(h,parts,pos,state,param));}}
break;case '<\!':if(!/^\w/.test(next)){if(h.pcdata){h.pcdata('&lt;!',param,continuationMarker,continuationMaker(h,parts,pos,state,param));}}else{if(!state.noMoreGT){for(p=pos+1;p<end;p++){if(parts[p]==='>'){break;}}
if(p<end){pos=p+1;}else{state.noMoreGT=true;}}
if(state.noMoreGT){if(h.pcdata){h.pcdata('&lt;!',param,continuationMarker,continuationMaker(h,parts,pos,state,param));}}}
break;case '<?':if(!state.noMoreGT){for(p=pos+1;p<end;p++){if(parts[p]==='>'){break;}}
if(p<end){pos=p+1;}else{state.noMoreGT=true;}}
if(state.noMoreGT){if(h.pcdata){h.pcdata('&lt;?',param,continuationMarker,continuationMaker(h,parts,pos,state,param));}}
break;case '>':if(h.pcdata){h.pcdata("&gt;",param,continuationMarker,continuationMaker(h,parts,pos,state,param));}
break;case '':break;default:if(h.pcdata){h.pcdata(current,param,continuationMarker,continuationMaker(h,parts,pos,state,param));}
break;}}
if(h.endDoc){h.endDoc(param);}}catch(e){if(e!==continuationMarker){throw e;}}}
function htmlSplit(str){var re=/(<\/|<\!--|<[!?]|[&<>])/g;str+='';if(splitWillCapture){return str.split(re);}else{var parts=[];var lastPos=0;var m;while((m=re.exec(str))!==null){parts.push(str.substring(lastPos,m.index));parts.push(m[0]);lastPos=m.index+m[0].length;}
parts.push(str.substring(lastPos));return parts;}}
function parseEndTag(parts,pos,h,param,continuationMarker,state){var tag=parseTagAndAttrs(parts,pos);if(!tag){return parts.length;}
if(h.endTag){h.endTag(tag.name,param,continuationMarker,continuationMaker(h,parts,pos,state,param));}
return tag.next;}
function parseStartTag(parts,pos,h,param,continuationMarker,state){var tag=parseTagAndAttrs(parts,pos);if(!tag){return parts.length;}
if(h.startTag){h.startTag(tag.name,tag.attrs,param,continuationMarker,continuationMaker(h,parts,tag.next,state,param));}
if(tag.eflags&EFLAGS_TEXT){return parseText(parts,tag,h,param,continuationMarker,state);}else{return tag.next;}}
var endTagRe={};function parseText(parts,tag,h,param,continuationMarker,state){var end=parts.length;if(!endTagRe.hasOwnProperty(tag.name)){endTagRe[tag.name]=new RegExp('^'+tag.name+'(?:[\\s\\/]|$)','i');}
var re=endTagRe[tag.name];var first=tag.next;var p=tag.next+1;for(;p<end;p++){if(parts[p-1]==='<\/'&&re.test(parts[p])){break;}}
if(p<end){p-=1;}
var buf=parts.slice(first,p).join('');if(tag.eflags&html4.eflags['CDATA']){if(h.cdata){h.cdata(buf,param,continuationMarker,continuationMaker(h,parts,p,state,param));}}else if(tag.eflags&html4.eflags['RCDATA']){if(h.rcdata){h.rcdata(normalizeRCData(buf),param,continuationMarker,continuationMaker(h,parts,p,state,param));}}else{throw new Error('bug');}
return p;}
function parseTagAndAttrs(parts,pos){var m=/^([-\w:]+)/.exec(parts[pos]);var tag={};tag.name=m[1].toLowerCase();tag.eflags=html4.ELEMENTS[tag.name];var buf=parts[pos].substr(m[0].length);var p=pos+1;var end=parts.length;for(;p<end;p++){if(parts[p]==='>'){break;}
buf+=parts[p];}
if(end<=p){return void 0;}
var attrs=[];while(buf!==''){m=ATTR_RE.exec(buf);if(!m){buf=buf.replace(/^[\s\S][^a-z\s]*/,'');}else if((m[4]&&!m[5])||(m[6]&&!m[7])){var quote=m[4]||m[6];var sawQuote=false;var abuf=[buf,parts[p++]];for(;p<end;p++){if(sawQuote){if(parts[p]==='>'){break;}}else if(0<=parts[p].indexOf(quote)){sawQuote=true;}
abuf.push(parts[p]);}
if(end<=p){break;}
buf=abuf.join('');continue;}else{var aName=m[1].toLowerCase();var aValue=m[2]?decodeValue(m[3]):'';attrs.push(aName,aValue);buf=buf.substr(m[0].length);}}
tag.attrs=attrs;tag.next=p+1;return tag;}
function decodeValue(v){var q=v.charCodeAt(0);if(q===0x22||q===0x27){v=v.substr(1,v.length-2);}
return unescapeEntities(stripNULs(v));}
function makeHtmlSanitizer(tagPolicy){var stack;var ignoring;var emit=function(text,out){if(!ignoring){out.push(text);}};return makeSaxParser({'startDoc':function(_){stack=[];ignoring=false;},'startTag':function(tagNameOrig,attribs,out){if(ignoring){return;}
if(!html4.ELEMENTS.hasOwnProperty(tagNameOrig)){return;}
var eflagsOrig=html4.ELEMENTS[tagNameOrig];if(eflagsOrig&html4.eflags['FOLDABLE']){return;}
var decision=tagPolicy(tagNameOrig,attribs);if(!decision){ignoring=!(eflagsOrig&html4.eflags['EMPTY']);return;}else if(typeof decision!=='object'){throw new Error('tagPolicy did not return object (old API?)');}
if('attribs'in decision){attribs=decision['attribs'];}else{throw new Error('tagPolicy gave no attribs');}
var eflagsRep;var tagNameRep;if('tagName'in decision){tagNameRep=decision['tagName'];eflagsRep=html4.ELEMENTS[tagNameRep];}else{tagNameRep=tagNameOrig;eflagsRep=eflagsOrig;}
if(eflagsOrig&html4.eflags['OPTIONAL_ENDTAG']){var onStack=stack[stack.length-1];if(onStack&&onStack.orig===tagNameOrig&&(onStack.rep!==tagNameRep||tagNameOrig!==tagNameRep)){out.push('<\/',onStack.rep,'>');}}
if(!(eflagsOrig&html4.eflags['EMPTY'])){stack.push({orig:tagNameOrig,rep:tagNameRep});}
out.push('<',tagNameRep);for(var i=0,n=attribs.length;i<n;i+=2){var attribName=attribs[i],value=attribs[i+1];if(value!==null&&value!==void 0){out.push(' ',attribName,'="',escapeAttrib(value),'"');}}
out.push('>');if((eflagsOrig&html4.eflags['EMPTY'])&&!(eflagsRep&html4.eflags['EMPTY'])){out.push('<\/',tagNameRep,'>');}},'endTag':function(tagName,out){if(ignoring){ignoring=false;return;}
if(!html4.ELEMENTS.hasOwnProperty(tagName)){return;}
var eflags=html4.ELEMENTS[tagName];if(!(eflags&(html4.eflags['EMPTY']|html4.eflags['FOLDABLE']))){var index;if(eflags&html4.eflags['OPTIONAL_ENDTAG']){for(index=stack.length;--index>=0;){var stackElOrigTag=stack[index].orig;if(stackElOrigTag===tagName){break;}
if(!(html4.ELEMENTS[stackElOrigTag]&html4.eflags['OPTIONAL_ENDTAG'])){return;}}}else{for(index=stack.length;--index>=0;){if(stack[index].orig===tagName){break;}}}
if(index<0){return;}
for(var i=stack.length;--i>index;){var stackElRepTag=stack[i].rep;if(!(html4.ELEMENTS[stackElRepTag]&html4.eflags['OPTIONAL_ENDTAG'])){out.push('<\/',stackElRepTag,'>');}}
if(index<stack.length){tagName=stack[index].rep;}
stack.length=index;out.push('<\/',tagName,'>');}},'pcdata':emit,'rcdata':emit,'cdata':emit,'endDoc':function(out){for(;stack.length;stack.length--){out.push('<\/',stack[stack.length-1].rep,'>');}}});}
var ALLOWED_URI_SCHEMES=/^(?:https?|mailto)$/i;function safeUri(uri,effect,ltype,hints,naiveUriRewriter){if(!naiveUriRewriter){return null;}
try{var parsed=URI.parse(''+uri);if(parsed){if(!parsed.hasScheme()||ALLOWED_URI_SCHEMES.test(parsed.getScheme())){var safe=naiveUriRewriter(parsed,effect,ltype,hints);return safe?safe.toString():null;}}}catch(e){return null;}
return null;}
function log(logger,tagName,attribName,oldValue,newValue){if(!attribName){logger(tagName+" removed",{change:"removed",tagName:tagName});}
if(oldValue!==newValue){var changed="changed";if(oldValue&&!newValue){changed="removed";}else if(!oldValue&&newValue){changed="added";}
logger(tagName+"."+attribName+" "+changed,{change:changed,tagName:tagName,attribName:attribName,oldValue:oldValue,newValue:newValue});}}
function lookupAttribute(map,tagName,attribName){var attribKey;attribKey=tagName+'::'+attribName;if(map.hasOwnProperty(attribKey)){return map[attribKey];}
attribKey='*::'+attribName;if(map.hasOwnProperty(attribKey)){return map[attribKey];}
return void 0;}
function getAttributeType(tagName,attribName){return lookupAttribute(html4.ATTRIBS,tagName,attribName);}
function getLoaderType(tagName,attribName){return lookupAttribute(html4.LOADERTYPES,tagName,attribName);}
function getUriEffect(tagName,attribName){return lookupAttribute(html4.URIEFFECTS,tagName,attribName);}
function sanitizeAttribs(tagName,attribs,opt_naiveUriRewriter,opt_nmTokenPolicy,opt_logger){for(var i=0;i<attribs.length;i+=2){var attribName=attribs[i];var value=attribs[i+1];var oldValue=value;var atype=null,attribKey;if((attribKey=tagName+'::'+attribName,html4.ATTRIBS.hasOwnProperty(attribKey))||(attribKey='*::'+attribName,html4.ATTRIBS.hasOwnProperty(attribKey))){atype=html4.ATTRIBS[attribKey];}
if(atype!==null){switch(atype){case html4.atype['NONE']:break;case html4.atype['SCRIPT']:value=null;if(opt_logger){log(opt_logger,tagName,attribName,oldValue,value);}
break;case html4.atype['STYLE']:if('undefined'===typeof parseCssDeclarations){value=null;if(opt_logger){log(opt_logger,tagName,attribName,oldValue,value);}
break;}
var sanitizedDeclarations=[];parseCssDeclarations(value,{'declaration':function(property,tokens){var normProp=property.toLowerCase();sanitizeCssProperty(normProp,tokens,opt_naiveUriRewriter?function(url){return safeUri(url,html4.ueffects.SAME_DOCUMENT,html4.ltypes.SANDBOXED,{"TYPE":"CSS","CSS_PROP":normProp},opt_naiveUriRewriter);}:null);if(tokens.length){sanitizedDeclarations.push(normProp+': '+tokens.join(' '));}}});value=sanitizedDeclarations.length>0?sanitizedDeclarations.join(' ; '):null;if(opt_logger){log(opt_logger,tagName,attribName,oldValue,value);}
break;case html4.atype['ID']:case html4.atype['IDREF']:case html4.atype['IDREFS']:case html4.atype['GLOBAL_NAME']:case html4.atype['LOCAL_NAME']:case html4.atype['CLASSES']:value=opt_nmTokenPolicy?opt_nmTokenPolicy(value):value;if(opt_logger){log(opt_logger,tagName,attribName,oldValue,value);}
break;case html4.atype['URI']:value=safeUri(value,getUriEffect(tagName,attribName),getLoaderType(tagName,attribName),{"TYPE":"MARKUP","XML_ATTR":attribName,"XML_TAG":tagName},opt_naiveUriRewriter);if(opt_logger){log(opt_logger,tagName,attribName,oldValue,value);}
break;case html4.atype['URI_FRAGMENT']:if(value&&'#'===value.charAt(0)){value=value.substring(1);value=opt_nmTokenPolicy?opt_nmTokenPolicy(value):value;if(value!==null&&value!==void 0){value='#'+value;}}else{value=null;}
if(opt_logger){log(opt_logger,tagName,attribName,oldValue,value);}
break;default:value=null;if(opt_logger){log(opt_logger,tagName,attribName,oldValue,value);}
break;}}else{value=null;if(opt_logger){log(opt_logger,tagName,attribName,oldValue,value);}}
attribs[i+1]=value;}
return attribs;}
function makeTagPolicy(opt_naiveUriRewriter,opt_nmTokenPolicy,opt_logger){return function(tagName,attribs){if(!(html4.ELEMENTS[tagName]&html4.eflags['UNSAFE'])){return{'attribs':sanitizeAttribs(tagName,attribs,opt_naiveUriRewriter,opt_nmTokenPolicy,opt_logger)};}else{if(opt_logger){log(opt_logger,tagName,undefined,undefined,undefined);}}};}
function sanitizeWithPolicy(inputHtml,tagPolicy){var outputArray=[];makeHtmlSanitizer(tagPolicy)(inputHtml,outputArray);return outputArray.join('');}
function sanitize(inputHtml,opt_naiveUriRewriter,opt_nmTokenPolicy,opt_logger){var tagPolicy=makeTagPolicy(opt_naiveUriRewriter,opt_nmTokenPolicy,opt_logger);return sanitizeWithPolicy(inputHtml,tagPolicy);}
var html={};html.escapeAttrib=html['escapeAttrib']=escapeAttrib;html.makeHtmlSanitizer=html['makeHtmlSanitizer']=makeHtmlSanitizer;html.makeSaxParser=html['makeSaxParser']=makeSaxParser;html.makeTagPolicy=html['makeTagPolicy']=makeTagPolicy;html.normalizeRCData=html['normalizeRCData']=normalizeRCData;html.sanitize=html['sanitize']=sanitize;html.sanitizeAttribs=html['sanitizeAttribs']=sanitizeAttribs;html.sanitizeWithPolicy=html['sanitizeWithPolicy']=sanitizeWithPolicy;html.unescapeEntities=html['unescapeEntities']=unescapeEntities;return html;})(html4);var html_sanitize=html['sanitize'];if(typeof window!=='undefined'){window['html']=html;window['html_sanitize']=html_sanitize;}
var Sanitizer={};Sanitizer.escapeAttrib=html.escapeAttrib;Sanitizer.makeHtmlSanitizer=html.makeHtmlSanitizer;Sanitizer.makeSaxParser=html.makeSaxParser;Sanitizer.makeTagPolicy=html.makeTagPolicy;Sanitizer.normalizeRCData=html.normalizeRCData
Sanitizer.sanitizeAttribs=html.sanitizeAttribs
Sanitizer.sanitizeWithPolicy=html.sanitizeWithPolicy
Sanitizer.unescapeEntities=html.unescapeEntities
Sanitizer.escape=html.escapeAttrib;Sanitizer.sanitize=function(inputHtml,opt_naiveUriRewriter,opt_nmTokenPolicy,opt_logger){if(typeof(inputHtml)==="string"){inputHtml=inputHtml.replace(/<([a-zA-Z]+)([^>]*)\/>/g,'<$1$2></$1>');}
if(inputHtml){return html.sanitize(inputHtml,opt_naiveUriRewriter,opt_nmTokenPolicy,opt_logger);}
else{return inputHtml;}}
if(true){if(typeof module!=='undefined'&&module.exports){exports=module.exports=Sanitizer;}
exports.Sanitizer=Sanitizer;}else{this.Sanitizer=Sanitizer;}}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1_node_lists_waitlist_Nodes_Waitlist__=__webpack_require__(39);var __WEBPACK_IMPORTED_MODULE_2_node_lists_waitlist_Nodes_Waitlist_Object__=__webpack_require__(395);var __WEBPACK_IMPORTED_MODULE_3_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_4__fallbacks_fallback_object__=__webpack_require__(1071);var __WEBPACK_IMPORTED_MODULE_5__fallbacks_fallback_nodes_list__=__webpack_require__(309);var __WEBPACK_IMPORTED_MODULE_6_node_lists_types_Node_Type__=__webpack_require__(35);var __WEBPACK_IMPORTED_MODULE_7_node_lists_types_Node_Consensus_Type__=__webpack_require__(44);var rp=__webpack_require__(360);class NodeDiscoveryService{constructor(){console.log("NodeDiscover constructor");this.fallbackLists=[];for(let i=0;i<this.fallbackLists.length;i++)
this.fallbackLists[i]=new __WEBPACK_IMPORTED_MODULE_4__fallbacks_fallback_object__["a"](this.fallbackLists[i]);}
startDiscovery(){this.processFallbackNodes(__WEBPACK_IMPORTED_MODULE_5__fallbacks_fallback_nodes_list__["a"]);this._discoverFallbackNodes(true);}
async _discoverFallbackNodes(setTimeOut){if(__WEBPACK_IMPORTED_MODULE_3_node_lists_Nodes_List__["a"].nodes!==null&&__WEBPACK_IMPORTED_MODULE_3_node_lists_Nodes_List__["a"].nodes.length<5){for(let i=0;i<this.fallbackLists.length;i++)
if(this.fallbackLists[i].checked===false&&this.fallbackLists[i].checkLastTimeChecked(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].SETTINGS.PARAMS.FALLBACK_INTERVAL))
{let answer=await this._downloadFallBackList(this.fallbackLists[i]);if(answer!==null)
return await this.processFallbackNodes(answer)}}
if(setTimeOut===true)
setTimeout(()=>{return this._discoverFallbackNodes(setTimeOut)},3000)}
async _downloadFallBackList(fallbackItem){fallbackItem.refreshLastTimeChecked();let url=fallbackItem.url;try{let response=await rp({method:'get',timeout:10000,uri:url,headers:{"Access-Control-Allow-Origin":"*",'Accept':'application/json','Content-Type':'application/json','User-Agent':'Request-Promise'},json:true,});fallbackItem.checked=true;return response.data;}
catch(Exception){console.error("ERROR downloading list: ",url,Exception);fallbackItem.errorTrials++;}
return null;}
async processFallbackNodes(data){try{if(typeof data==='string'){try{data=JSON.parse(data);}catch(exception){console.error("Error processFallbackNodes String",data,exception);}}
if((typeof data==='object')&&(data!==null)){let nodes=[];let name='';if((data.hasOwnProperty('protocol'))&&(data['protocol']===__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].SETTINGS.NODE.PROTOCOL)){name=data.name||'';nodes=data.nodes||[];if(Array.isArray(nodes)){let marked=[];for(let i=0;i<nodes.length;i++){let pos=Math.floor(Math.random()*nodes.length);while(marked[pos]!==undefined)
pos=Math.floor(Math.random()*nodes.length);marked[pos]=true;let nodeAddress='',nodePort=undefined,nodeType=__WEBPACK_IMPORTED_MODULE_6_node_lists_types_Node_Type__["a"].NODE_TERMINAL;if(typeof nodes[pos]==="object"){nodeAddress=nodes[pos].addr||'';nodePort=nodes[pos].port;}else{nodeAddress=nodes[pos];}
await __WEBPACK_IMPORTED_MODULE_1_node_lists_waitlist_Nodes_Waitlist__["a"].addNewNodeToWaitlist(nodeAddress,nodePort,nodeType,__WEBPACK_IMPORTED_MODULE_7_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_PEER,false,1,"fallback");}}}
return nodes;}}catch(exception){console.log("error processing fallback list processFallbackNodes",data,exception);}
return null;}}
__webpack_exports__["a"]=(new NodeDiscoveryService());}),(function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:true});var __WEBPACK_IMPORTED_MODULE_0__index_js__=__webpack_require__(437);var __WEBPACK_IMPORTED_MODULE_0__index_js___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__index_js__);var __WEBPACK_IMPORTED_MODULE_1_consts_global_js__=__webpack_require__(45);var __WEBPACK_IMPORTED_MODULE_2__termination__=__webpack_require__(1078);console.log("BROWSER MODE");__WEBPACK_IMPORTED_MODULE_0__index_js__["Blockchain"].createBlockchain("light-node",()=>{},()=>{__WEBPACK_IMPORTED_MODULE_0__index_js__["Node"].NodeClientsService.startService();__WEBPACK_IMPORTED_MODULE_0__index_js__["Node"].NodeWebPeersService.startService();});window.onbeforeunload=()=>{Object(__WEBPACK_IMPORTED_MODULE_2__termination__["a"])(__WEBPACK_IMPORTED_MODULE_0__index_js__["Blockchain"]);};}),(function(module,exports,__webpack_require__){(function(global){if((typeof window!=='undefined'&&!window._babelPolyfill)||(typeof global!=='undefined'&&!global._babelPolyfill)){__webpack_require__(438)}
if(false){require('console-warn');require('console-info');require('console-error');}
console.log("");console.log("");console.log("");console.warn("Node WebDollar");console.log("");console.log("");console.log("");let Main=__webpack_require__(639).default;let exportObject=Main;module.exports=exportObject;let isBrowser=typeof global.window!=="undefined";if(typeof global.window!=='undefined')
global.window.WebDollar=exportObject;if(typeof window!=='undefined')
window.WebDollar=exportObject;console.log("Node WebDollar End");}.call(exports,__webpack_require__(10)))}),(function(module,exports,__webpack_require__){"use strict";(function(global){__webpack_require__(439);__webpack_require__(635);__webpack_require__(636);if(global._babelPolyfill){throw new Error("only one instance of babel-polyfill is allowed");}
global._babelPolyfill=true;var DEFINE_PROPERTY="defineProperty";function define(O,key,value){O[key]||Object[DEFINE_PROPERTY](O,key,{writable:true,configurable:true,value:value});}
define(String.prototype,"padLeft","".padStart);define(String.prototype,"padRight","".padEnd);"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(key){[][key]&&define(Array,key,Function.call.bind([][key]));});}.call(exports,__webpack_require__(10)))}),(function(module,exports,__webpack_require__){__webpack_require__(440);__webpack_require__(442);__webpack_require__(443);__webpack_require__(444);__webpack_require__(445);__webpack_require__(446);__webpack_require__(447);__webpack_require__(448);__webpack_require__(449);__webpack_require__(450);__webpack_require__(451);__webpack_require__(452);__webpack_require__(453);__webpack_require__(454);__webpack_require__(455);__webpack_require__(456);__webpack_require__(457);__webpack_require__(458);__webpack_require__(459);__webpack_require__(460);__webpack_require__(461);__webpack_require__(462);__webpack_require__(463);__webpack_require__(464);__webpack_require__(465);__webpack_require__(466);__webpack_require__(467);__webpack_require__(468);__webpack_require__(469);__webpack_require__(470);__webpack_require__(471);__webpack_require__(472);__webpack_require__(473);__webpack_require__(474);__webpack_require__(475);__webpack_require__(476);__webpack_require__(477);__webpack_require__(478);__webpack_require__(479);__webpack_require__(480);__webpack_require__(481);__webpack_require__(482);__webpack_require__(483);__webpack_require__(484);__webpack_require__(485);__webpack_require__(486);__webpack_require__(487);__webpack_require__(488);__webpack_require__(489);__webpack_require__(490);__webpack_require__(491);__webpack_require__(492);__webpack_require__(493);__webpack_require__(494);__webpack_require__(495);__webpack_require__(496);__webpack_require__(497);__webpack_require__(498);__webpack_require__(499);__webpack_require__(500);__webpack_require__(501);__webpack_require__(502);__webpack_require__(503);__webpack_require__(504);__webpack_require__(505);__webpack_require__(506);__webpack_require__(507);__webpack_require__(508);__webpack_require__(509);__webpack_require__(510);__webpack_require__(511);__webpack_require__(512);__webpack_require__(513);__webpack_require__(514);__webpack_require__(515);__webpack_require__(516);__webpack_require__(517);__webpack_require__(519);__webpack_require__(520);__webpack_require__(522);__webpack_require__(523);__webpack_require__(524);__webpack_require__(525);__webpack_require__(526);__webpack_require__(527);__webpack_require__(528);__webpack_require__(530);__webpack_require__(531);__webpack_require__(532);__webpack_require__(533);__webpack_require__(534);__webpack_require__(535);__webpack_require__(536);__webpack_require__(537);__webpack_require__(538);__webpack_require__(539);__webpack_require__(540);__webpack_require__(541);__webpack_require__(542);__webpack_require__(201);__webpack_require__(543);__webpack_require__(288);__webpack_require__(544);__webpack_require__(289);__webpack_require__(545);__webpack_require__(546);__webpack_require__(547);__webpack_require__(548);__webpack_require__(549);__webpack_require__(292);__webpack_require__(294);__webpack_require__(295);__webpack_require__(550);__webpack_require__(551);__webpack_require__(552);__webpack_require__(553);__webpack_require__(554);__webpack_require__(555);__webpack_require__(556);__webpack_require__(557);__webpack_require__(558);__webpack_require__(559);__webpack_require__(560);__webpack_require__(561);__webpack_require__(562);__webpack_require__(563);__webpack_require__(564);__webpack_require__(565);__webpack_require__(566);__webpack_require__(567);__webpack_require__(568);__webpack_require__(569);__webpack_require__(570);__webpack_require__(571);__webpack_require__(572);__webpack_require__(573);__webpack_require__(574);__webpack_require__(575);__webpack_require__(576);__webpack_require__(577);__webpack_require__(578);__webpack_require__(579);__webpack_require__(580);__webpack_require__(581);__webpack_require__(582);__webpack_require__(583);__webpack_require__(584);__webpack_require__(585);__webpack_require__(586);__webpack_require__(587);__webpack_require__(588);__webpack_require__(589);__webpack_require__(590);__webpack_require__(591);__webpack_require__(592);__webpack_require__(593);__webpack_require__(594);__webpack_require__(595);__webpack_require__(596);__webpack_require__(597);__webpack_require__(598);__webpack_require__(599);__webpack_require__(600);__webpack_require__(601);__webpack_require__(602);__webpack_require__(603);__webpack_require__(604);__webpack_require__(605);__webpack_require__(606);__webpack_require__(607);__webpack_require__(608);__webpack_require__(609);__webpack_require__(610);__webpack_require__(611);__webpack_require__(612);__webpack_require__(613);__webpack_require__(614);__webpack_require__(615);__webpack_require__(616);__webpack_require__(617);__webpack_require__(618);__webpack_require__(619);__webpack_require__(620);__webpack_require__(621);__webpack_require__(622);__webpack_require__(623);__webpack_require__(624);__webpack_require__(625);__webpack_require__(626);__webpack_require__(627);__webpack_require__(628);__webpack_require__(629);__webpack_require__(630);__webpack_require__(631);__webpack_require__(632);__webpack_require__(633);__webpack_require__(634);module.exports=__webpack_require__(57);}),(function(module,exports,__webpack_require__){"use strict";var global=__webpack_require__(11);var has=__webpack_require__(51);var DESCRIPTORS=__webpack_require__(26);var $export=__webpack_require__(0);var redefine=__webpack_require__(49);var META=__webpack_require__(80).KEY;var $fails=__webpack_require__(13);var shared=__webpack_require__(146);var setToStringTag=__webpack_require__(109);var uid=__webpack_require__(93);var wks=__webpack_require__(19);var wksExt=__webpack_require__(270);var wksDefine=__webpack_require__(182);var enumKeys=__webpack_require__(441);var isArray=__webpack_require__(149);var anObject=__webpack_require__(8);var isObject=__webpack_require__(14);var toIObject=__webpack_require__(52);var toPrimitive=__webpack_require__(63);var createDesc=__webpack_require__(92);var _create=__webpack_require__(96);var gOPNExt=__webpack_require__(273);var $GOPD=__webpack_require__(53);var $DP=__webpack_require__(27);var $keys=__webpack_require__(94);var gOPD=$GOPD.f;var dP=$DP.f;var gOPN=gOPNExt.f;var $Symbol=global.Symbol;var $JSON=global.JSON;var _stringify=$JSON&&$JSON.stringify;var PROTOTYPE='prototype';var HIDDEN=wks('_hidden');var TO_PRIMITIVE=wks('toPrimitive');var isEnum={}.propertyIsEnumerable;var SymbolRegistry=shared('symbol-registry');var AllSymbols=shared('symbols');var OPSymbols=shared('op-symbols');var ObjectProto=Object[PROTOTYPE];var USE_NATIVE=typeof $Symbol=='function';var QObject=global.QObject;var setter=!QObject||!QObject[PROTOTYPE]||!QObject[PROTOTYPE].findChild;var setSymbolDesc=DESCRIPTORS&&$fails(function(){return _create(dP({},'a',{get:function(){return dP(this,'a',{value:7}).a;}})).a!=7;})?function(it,key,D){var protoDesc=gOPD(ObjectProto,key);if(protoDesc)delete ObjectProto[key];dP(it,key,D);if(protoDesc&&it!==ObjectProto)dP(ObjectProto,key,protoDesc);}:dP;var wrap=function(tag){var sym=AllSymbols[tag]=_create($Symbol[PROTOTYPE]);sym._k=tag;return sym;};var isSymbol=USE_NATIVE&&typeof $Symbol.iterator=='symbol'?function(it){return typeof it=='symbol';}:function(it){return it instanceof $Symbol;};var $defineProperty=function defineProperty(it,key,D){if(it===ObjectProto)$defineProperty(OPSymbols,key,D);anObject(it);key=toPrimitive(key,true);anObject(D);if(has(AllSymbols,key)){if(!D.enumerable){if(!has(it,HIDDEN))dP(it,HIDDEN,createDesc(1,{}));it[HIDDEN][key]=true;}else{if(has(it,HIDDEN)&&it[HIDDEN][key])it[HIDDEN][key]=false;D=_create(D,{enumerable:createDesc(0,false)});}return setSymbolDesc(it,key,D);}return dP(it,key,D);};var $defineProperties=function defineProperties(it,P){anObject(it);var keys=enumKeys(P=toIObject(P));var i=0;var l=keys.length;var key;while(l>i)$defineProperty(it,key=keys[i++],P[key]);return it;};var $create=function create(it,P){return P===undefined?_create(it):$defineProperties(_create(it),P);};var $propertyIsEnumerable=function propertyIsEnumerable(key){var E=isEnum.call(this,key=toPrimitive(key,true));if(this===ObjectProto&&has(AllSymbols,key)&&!has(OPSymbols,key))return false;return E||!has(this,key)||!has(AllSymbols,key)||has(this,HIDDEN)&&this[HIDDEN][key]?E:true;};var $getOwnPropertyDescriptor=function getOwnPropertyDescriptor(it,key){it=toIObject(it);key=toPrimitive(key,true);if(it===ObjectProto&&has(AllSymbols,key)&&!has(OPSymbols,key))return;var D=gOPD(it,key);if(D&&has(AllSymbols,key)&&!(has(it,HIDDEN)&&it[HIDDEN][key]))D.enumerable=true;return D;};var $getOwnPropertyNames=function getOwnPropertyNames(it){var names=gOPN(toIObject(it));var result=[];var i=0;var key;while(names.length>i){if(!has(AllSymbols,key=names[i++])&&key!=HIDDEN&&key!=META)result.push(key);}return result;};var $getOwnPropertySymbols=function getOwnPropertySymbols(it){var IS_OP=it===ObjectProto;var names=gOPN(IS_OP?OPSymbols:toIObject(it));var result=[];var i=0;var key;while(names.length>i){if(has(AllSymbols,key=names[i++])&&(IS_OP?has(ObjectProto,key):true))result.push(AllSymbols[key]);}return result;};if(!USE_NATIVE){$Symbol=function Symbol(){if(this instanceof $Symbol)throw TypeError('Symbol is not a constructor!');var tag=uid(arguments.length>0?arguments[0]:undefined);var $set=function(value){if(this===ObjectProto)$set.call(OPSymbols,value);if(has(this,HIDDEN)&&has(this[HIDDEN],tag))this[HIDDEN][tag]=false;setSymbolDesc(this,tag,createDesc(1,value));};if(DESCRIPTORS&&setter)setSymbolDesc(ObjectProto,tag,{configurable:true,set:$set});return wrap(tag);};redefine($Symbol[PROTOTYPE],'toString',function toString(){return this._k;});$GOPD.f=$getOwnPropertyDescriptor;$DP.f=$defineProperty;__webpack_require__(97).f=gOPNExt.f=$getOwnPropertyNames;__webpack_require__(124).f=$propertyIsEnumerable;__webpack_require__(148).f=$getOwnPropertySymbols;if(DESCRIPTORS&&!__webpack_require__(81)){redefine(ObjectProto,'propertyIsEnumerable',$propertyIsEnumerable,true);}
wksExt.f=function(name){return wrap(wks(name));};}
$export($export.G+$export.W+$export.F*!USE_NATIVE,{Symbol:$Symbol});for(var es6Symbols=('hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables').split(','),j=0;es6Symbols.length>j;)wks(es6Symbols[j++]);for(var wellKnownSymbols=$keys(wks.store),k=0;wellKnownSymbols.length>k;)wksDefine(wellKnownSymbols[k++]);$export($export.S+$export.F*!USE_NATIVE,'Symbol',{'for':function(key){return has(SymbolRegistry,key+='')?SymbolRegistry[key]:SymbolRegistry[key]=$Symbol(key);},keyFor:function keyFor(sym){if(!isSymbol(sym))throw TypeError(sym+' is not a symbol!');for(var key in SymbolRegistry)if(SymbolRegistry[key]===sym)return key;},useSetter:function(){setter=true;},useSimple:function(){setter=false;}});$export($export.S+$export.F*!USE_NATIVE,'Object',{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor,getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols});$JSON&&$export($export.S+$export.F*(!USE_NATIVE||$fails(function(){var S=$Symbol();return _stringify([S])!='[null]'||_stringify({a:S})!='{}'||_stringify(Object(S))!='{}';})),'JSON',{stringify:function stringify(it){var args=[it];var i=1;var replacer,$replacer;while(arguments.length>i)args.push(arguments[i++]);$replacer=replacer=args[1];if(!isObject(replacer)&&it===undefined||isSymbol(it))return;if(!isArray(replacer))replacer=function(key,value){if(typeof $replacer=='function')value=$replacer.call(this,key,value);if(!isSymbol(value))return value;};args[1]=replacer;return _stringify.apply($JSON,args);}});$Symbol[PROTOTYPE][TO_PRIMITIVE]||__webpack_require__(48)($Symbol[PROTOTYPE],TO_PRIMITIVE,$Symbol[PROTOTYPE].valueOf);setToStringTag($Symbol,'Symbol');setToStringTag(Math,'Math',true);setToStringTag(global.JSON,'JSON',true);}),(function(module,exports,__webpack_require__){var getKeys=__webpack_require__(94);var gOPS=__webpack_require__(148);var pIE=__webpack_require__(124);module.exports=function(it){var result=getKeys(it);var getSymbols=gOPS.f;if(getSymbols){var symbols=getSymbols(it);var isEnum=pIE.f;var i=0;var key;while(symbols.length>i)if(isEnum.call(it,key=symbols[i++]))result.push(key);}return result;};}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S,'Object',{create:__webpack_require__(96)});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S+$export.F*!__webpack_require__(26),'Object',{defineProperty:__webpack_require__(27).f});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S+$export.F*!__webpack_require__(26),'Object',{defineProperties:__webpack_require__(272)});}),(function(module,exports,__webpack_require__){var toIObject=__webpack_require__(52);var $getOwnPropertyDescriptor=__webpack_require__(53).f;__webpack_require__(65)('getOwnPropertyDescriptor',function(){return function getOwnPropertyDescriptor(it,key){return $getOwnPropertyDescriptor(toIObject(it),key);};});}),(function(module,exports,__webpack_require__){var toObject=__webpack_require__(30);var $getPrototypeOf=__webpack_require__(54);__webpack_require__(65)('getPrototypeOf',function(){return function getPrototypeOf(it){return $getPrototypeOf(toObject(it));};});}),(function(module,exports,__webpack_require__){var toObject=__webpack_require__(30);var $keys=__webpack_require__(94);__webpack_require__(65)('keys',function(){return function keys(it){return $keys(toObject(it));};});}),(function(module,exports,__webpack_require__){__webpack_require__(65)('getOwnPropertyNames',function(){return __webpack_require__(273).f;});}),(function(module,exports,__webpack_require__){var isObject=__webpack_require__(14);var meta=__webpack_require__(80).onFreeze;__webpack_require__(65)('freeze',function($freeze){return function freeze(it){return $freeze&&isObject(it)?$freeze(meta(it)):it;};});}),(function(module,exports,__webpack_require__){var isObject=__webpack_require__(14);var meta=__webpack_require__(80).onFreeze;__webpack_require__(65)('seal',function($seal){return function seal(it){return $seal&&isObject(it)?$seal(meta(it)):it;};});}),(function(module,exports,__webpack_require__){var isObject=__webpack_require__(14);var meta=__webpack_require__(80).onFreeze;__webpack_require__(65)('preventExtensions',function($preventExtensions){return function preventExtensions(it){return $preventExtensions&&isObject(it)?$preventExtensions(meta(it)):it;};});}),(function(module,exports,__webpack_require__){var isObject=__webpack_require__(14);__webpack_require__(65)('isFrozen',function($isFrozen){return function isFrozen(it){return isObject(it)?$isFrozen?$isFrozen(it):false:true;};});}),(function(module,exports,__webpack_require__){var isObject=__webpack_require__(14);__webpack_require__(65)('isSealed',function($isSealed){return function isSealed(it){return isObject(it)?$isSealed?$isSealed(it):false:true;};});}),(function(module,exports,__webpack_require__){var isObject=__webpack_require__(14);__webpack_require__(65)('isExtensible',function($isExtensible){return function isExtensible(it){return isObject(it)?$isExtensible?$isExtensible(it):true:false;};});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S+$export.F,'Object',{assign:__webpack_require__(274)});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S,'Object',{is:__webpack_require__(275)});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S,'Object',{setPrototypeOf:__webpack_require__(186).set});}),(function(module,exports,__webpack_require__){"use strict";var classof=__webpack_require__(110);var test={};test[__webpack_require__(19)('toStringTag')]='z';if(test+''!='[object z]'){__webpack_require__(49)(Object.prototype,'toString',function toString(){return '[object '+classof(this)+']';},true);}}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.P,'Function',{bind:__webpack_require__(276)});}),(function(module,exports,__webpack_require__){var dP=__webpack_require__(27).f;var FProto=Function.prototype;var nameRE=/^\s*function ([^ (]*)/;var NAME='name';NAME in FProto||__webpack_require__(26)&&dP(FProto,NAME,{configurable:true,get:function(){try{return(''+this).match(nameRE)[1];}catch(e){return '';}}});}),(function(module,exports,__webpack_require__){"use strict";var isObject=__webpack_require__(14);var getPrototypeOf=__webpack_require__(54);var HAS_INSTANCE=__webpack_require__(19)('hasInstance');var FunctionProto=Function.prototype;if(!(HAS_INSTANCE in FunctionProto))__webpack_require__(27).f(FunctionProto,HAS_INSTANCE,{value:function(O){if(typeof this!='function'||!isObject(O))return false;if(!isObject(this.prototype))return O instanceof this;while(O=getPrototypeOf(O))if(this.prototype===O)return true;return false;}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var $parseInt=__webpack_require__(278);$export($export.G+$export.F*(parseInt!=$parseInt),{parseInt:$parseInt});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var $parseFloat=__webpack_require__(279);$export($export.G+$export.F*(parseFloat!=$parseFloat),{parseFloat:$parseFloat});}),(function(module,exports,__webpack_require__){"use strict";var global=__webpack_require__(11);var has=__webpack_require__(51);var cof=__webpack_require__(59);var inheritIfRequired=__webpack_require__(188);var toPrimitive=__webpack_require__(63);var fails=__webpack_require__(13);var gOPN=__webpack_require__(97).f;var gOPD=__webpack_require__(53).f;var dP=__webpack_require__(27).f;var $trim=__webpack_require__(111).trim;var NUMBER='Number';var $Number=global[NUMBER];var Base=$Number;var proto=$Number.prototype;var BROKEN_COF=cof(__webpack_require__(96)(proto))==NUMBER;var TRIM='trim'in String.prototype;var toNumber=function(argument){var it=toPrimitive(argument,false);if(typeof it=='string'&&it.length>2){it=TRIM?it.trim():$trim(it,3);var first=it.charCodeAt(0);var third,radix,maxCode;if(first===43||first===45){third=it.charCodeAt(2);if(third===88||third===120)return NaN;}else if(first===48){switch(it.charCodeAt(1)){case 66:case 98:radix=2;maxCode=49;break;case 79:case 111:radix=8;maxCode=55;break;default:return+it;}
for(var digits=it.slice(2),i=0,l=digits.length,code;i<l;i++){code=digits.charCodeAt(i);if(code<48||code>maxCode)return NaN;}return parseInt(digits,radix);}}return+it;};if(!$Number(' 0o1')||!$Number('0b1')||$Number('+0x1')){$Number=function Number(value){var it=arguments.length<1?0:value;var that=this;return that instanceof $Number&&(BROKEN_COF?fails(function(){proto.valueOf.call(that);}):cof(that)!=NUMBER)?inheritIfRequired(new Base(toNumber(it)),that,$Number):toNumber(it);};for(var keys=__webpack_require__(26)?gOPN(Base):('MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,'+
'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,'+
'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger').split(','),j=0,key;keys.length>j;j++){if(has(Base,key=keys[j])&&!has($Number,key)){dP($Number,key,gOPD(Base,key));}}
$Number.prototype=proto;proto.constructor=$Number;__webpack_require__(49)(global,NUMBER,$Number);}}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var toInteger=__webpack_require__(60);var aNumberValue=__webpack_require__(280);var repeat=__webpack_require__(189);var $toFixed=1.0.toFixed;var floor=Math.floor;var data=[0,0,0,0,0,0];var ERROR='Number.toFixed: incorrect invocation!';var ZERO='0';var multiply=function(n,c){var i=-1;var c2=c;while(++i<6){c2+=n*data[i];data[i]=c2%1e7;c2=floor(c2/1e7);}};var divide=function(n){var i=6;var c=0;while(--i>=0){c+=data[i];data[i]=floor(c/n);c=(c%n)*1e7;}};var numToString=function(){var i=6;var s='';while(--i>=0){if(s!==''||i===0||data[i]!==0){var t=String(data[i]);s=s===''?t:s+repeat.call(ZERO,7-t.length)+t;}}return s;};var pow=function(x,n,acc){return n===0?acc:n%2===1?pow(x,n-1,acc*x):pow(x*x,n/2,acc);};var log=function(x){var n=0;var x2=x;while(x2>=4096){n+=12;x2/=4096;}
while(x2>=2){n+=1;x2/=2;}return n;};$export($export.P+$export.F*(!!$toFixed&&(0.00008.toFixed(3)!=='0.000'||0.9.toFixed(0)!=='1'||1.255.toFixed(2)!=='1.25'||1000000000000000128.0.toFixed(0)!=='1000000000000000128')||!__webpack_require__(13)(function(){$toFixed.call({});})),'Number',{toFixed:function toFixed(fractionDigits){var x=aNumberValue(this,ERROR);var f=toInteger(fractionDigits);var s='';var m=ZERO;var e,z,j,k;if(f<0||f>20)throw RangeError(ERROR);if(x!=x)return 'NaN';if(x<=-1e21||x>=1e21)return String(x);if(x<0){s='-';x=-x;}
if(x>1e-21){e=log(x*pow(2,69,1))-69;z=e<0?x*pow(2,-e,1):x/pow(2,e,1);z*=0x10000000000000;e=52-e;if(e>0){multiply(0,z);j=f;while(j>=7){multiply(1e7,0);j-=7;}
multiply(pow(10,j,1),0);j=e-1;while(j>=23){divide(1<<23);j-=23;}
divide(1<<j);multiply(1,1);divide(2);m=numToString();}else{multiply(0,z);multiply(1<<-e,0);m=numToString()+repeat.call(ZERO,f);}}
if(f>0){k=m.length;m=s+(k<=f?'0.'+repeat.call(ZERO,f-k)+m:m.slice(0,k-f)+'.'+m.slice(k-f));}else{m=s+m;}return m;}});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var $fails=__webpack_require__(13);var aNumberValue=__webpack_require__(280);var $toPrecision=1.0.toPrecision;$export($export.P+$export.F*($fails(function(){return $toPrecision.call(1,undefined)!=='1';})||!$fails(function(){$toPrecision.call({});})),'Number',{toPrecision:function toPrecision(precision){var that=aNumberValue(this,'Number#toPrecision: incorrect invocation!');return precision===undefined?$toPrecision.call(that):$toPrecision.call(that,precision);}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S,'Number',{EPSILON:Math.pow(2,-52)});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var _isFinite=__webpack_require__(11).isFinite;$export($export.S,'Number',{isFinite:function isFinite(it){return typeof it=='number'&&_isFinite(it);}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S,'Number',{isInteger:__webpack_require__(281)});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S,'Number',{isNaN:function isNaN(number){return number!=number;}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var isInteger=__webpack_require__(281);var abs=Math.abs;$export($export.S,'Number',{isSafeInteger:function isSafeInteger(number){return isInteger(number)&&abs(number)<=0x1fffffffffffff;}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S,'Number',{MAX_SAFE_INTEGER:0x1fffffffffffff});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S,'Number',{MIN_SAFE_INTEGER:-0x1fffffffffffff});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var $parseFloat=__webpack_require__(279);$export($export.S+$export.F*(Number.parseFloat!=$parseFloat),'Number',{parseFloat:$parseFloat});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var $parseInt=__webpack_require__(278);$export($export.S+$export.F*(Number.parseInt!=$parseInt),'Number',{parseInt:$parseInt});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var log1p=__webpack_require__(282);var sqrt=Math.sqrt;var $acosh=Math.acosh;$export($export.S+$export.F*!($acosh&&Math.floor($acosh(Number.MAX_VALUE))==710&&$acosh(Infinity)==Infinity),'Math',{acosh:function acosh(x){return(x=+x)<1?NaN:x>94906265.62425156?Math.log(x)+Math.LN2:log1p(x-1+sqrt(x-1)*sqrt(x+1));}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var $asinh=Math.asinh;function asinh(x){return!isFinite(x=+x)||x==0?x:x<0?-asinh(-x):Math.log(x+Math.sqrt(x*x+1));}
$export($export.S+$export.F*!($asinh&&1/$asinh(0)>0),'Math',{asinh:asinh});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var $atanh=Math.atanh;$export($export.S+$export.F*!($atanh&&1/$atanh(-0)<0),'Math',{atanh:function atanh(x){return(x=+x)==0?x:Math.log((1+x)/(1-x))/2;}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var sign=__webpack_require__(190);$export($export.S,'Math',{cbrt:function cbrt(x){return sign(x=+x)*Math.pow(Math.abs(x),1/3);}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S,'Math',{clz32:function clz32(x){return(x>>>=0)?31-Math.floor(Math.log(x+0.5)*Math.LOG2E):32;}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var exp=Math.exp;$export($export.S,'Math',{cosh:function cosh(x){return(exp(x=+x)+exp(-x))/2;}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var $expm1=__webpack_require__(191);$export($export.S+$export.F*($expm1!=Math.expm1),'Math',{expm1:$expm1});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S,'Math',{fround:__webpack_require__(283)});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var abs=Math.abs;$export($export.S,'Math',{hypot:function hypot(value1,value2){var sum=0;var i=0;var aLen=arguments.length;var larg=0;var arg,div;while(i<aLen){arg=abs(arguments[i++]);if(larg<arg){div=larg/arg;sum=sum*div*div+1;larg=arg;}else if(arg>0){div=arg/larg;sum+=div*div;}else sum+=arg;}
return larg===Infinity?Infinity:larg*Math.sqrt(sum);}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var $imul=Math.imul;$export($export.S+$export.F*__webpack_require__(13)(function(){return $imul(0xffffffff,5)!=-5||$imul.length!=2;}),'Math',{imul:function imul(x,y){var UINT16=0xffff;var xn=+x;var yn=+y;var xl=UINT16&xn;var yl=UINT16&yn;return 0|xl*yl+((UINT16&xn>>>16)*yl+xl*(UINT16&yn>>>16)<<16>>>0);}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S,'Math',{log10:function log10(x){return Math.log(x)*Math.LOG10E;}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S,'Math',{log1p:__webpack_require__(282)});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S,'Math',{log2:function log2(x){return Math.log(x)/Math.LN2;}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S,'Math',{sign:__webpack_require__(190)});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var expm1=__webpack_require__(191);var exp=Math.exp;$export($export.S+$export.F*__webpack_require__(13)(function(){return!Math.sinh(-2e-17)!=-2e-17;}),'Math',{sinh:function sinh(x){return Math.abs(x=+x)<1?(expm1(x)-expm1(-x))/2:(exp(x-1)-exp(-x-1))*(Math.E/2);}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var expm1=__webpack_require__(191);var exp=Math.exp;$export($export.S,'Math',{tanh:function tanh(x){var a=expm1(x=+x);var b=expm1(-x);return a==Infinity?1:b==Infinity?-1:(a-b)/(exp(x)+exp(-x));}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S,'Math',{trunc:function trunc(it){return(it>0?Math.floor:Math.ceil)(it);}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var toAbsoluteIndex=__webpack_require__(95);var fromCharCode=String.fromCharCode;var $fromCodePoint=String.fromCodePoint;$export($export.S+$export.F*(!!$fromCodePoint&&$fromCodePoint.length!=1),'String',{fromCodePoint:function fromCodePoint(x){var res=[];var aLen=arguments.length;var i=0;var code;while(aLen>i){code=+arguments[i++];if(toAbsoluteIndex(code,0x10ffff)!==code)throw RangeError(code+' is not a valid code point');res.push(code<0x10000?fromCharCode(code):fromCharCode(((code-=0x10000)>>10)+0xd800,code%0x400+0xdc00));}return res.join('');}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var toIObject=__webpack_require__(52);var toLength=__webpack_require__(22);$export($export.S,'String',{raw:function raw(callSite){var tpl=toIObject(callSite.raw);var len=toLength(tpl.length);var aLen=arguments.length;var res=[];var i=0;while(len>i){res.push(String(tpl[i++]));if(i<aLen)res.push(String(arguments[i]));}return res.join('');}});}),(function(module,exports,__webpack_require__){"use strict";__webpack_require__(111)('trim',function($trim){return function trim(){return $trim(this,3);};});}),(function(module,exports,__webpack_require__){"use strict";var $at=__webpack_require__(150)(true);__webpack_require__(192)(String,'String',function(iterated){this._t=String(iterated);this._i=0;},function(){var O=this._t;var index=this._i;var point;if(index>=O.length)return{value:undefined,done:true};point=$at(O,index);this._i+=point.length;return{value:point,done:false};});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var $at=__webpack_require__(150)(false);$export($export.P,'String',{codePointAt:function codePointAt(pos){return $at(this,pos);}});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var toLength=__webpack_require__(22);var context=__webpack_require__(194);var ENDS_WITH='endsWith';var $endsWith=''[ENDS_WITH];$export($export.P+$export.F*__webpack_require__(195)(ENDS_WITH),'String',{endsWith:function endsWith(searchString){var that=context(this,searchString,ENDS_WITH);var endPosition=arguments.length>1?arguments[1]:undefined;var len=toLength(that.length);var end=endPosition===undefined?len:Math.min(toLength(endPosition),len);var search=String(searchString);return $endsWith?$endsWith.call(that,search,end):that.slice(end-search.length,end)===search;}});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var context=__webpack_require__(194);var INCLUDES='includes';$export($export.P+$export.F*__webpack_require__(195)(INCLUDES),'String',{includes:function includes(searchString){return!!~context(this,searchString,INCLUDES).indexOf(searchString,arguments.length>1?arguments[1]:undefined);}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.P,'String',{repeat:__webpack_require__(189)});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var toLength=__webpack_require__(22);var context=__webpack_require__(194);var STARTS_WITH='startsWith';var $startsWith=''[STARTS_WITH];$export($export.P+$export.F*__webpack_require__(195)(STARTS_WITH),'String',{startsWith:function startsWith(searchString){var that=context(this,searchString,STARTS_WITH);var index=toLength(Math.min(arguments.length>1?arguments[1]:undefined,that.length));var search=String(searchString);return $startsWith?$startsWith.call(that,search,index):that.slice(index,index+search.length)===search;}});}),(function(module,exports,__webpack_require__){"use strict";__webpack_require__(50)('anchor',function(createHTML){return function anchor(name){return createHTML(this,'a','name',name);};});}),(function(module,exports,__webpack_require__){"use strict";__webpack_require__(50)('big',function(createHTML){return function big(){return createHTML(this,'big','','');};});}),(function(module,exports,__webpack_require__){"use strict";__webpack_require__(50)('blink',function(createHTML){return function blink(){return createHTML(this,'blink','','');};});}),(function(module,exports,__webpack_require__){"use strict";__webpack_require__(50)('bold',function(createHTML){return function bold(){return createHTML(this,'b','','');};});}),(function(module,exports,__webpack_require__){"use strict";__webpack_require__(50)('fixed',function(createHTML){return function fixed(){return createHTML(this,'tt','','');};});}),(function(module,exports,__webpack_require__){"use strict";__webpack_require__(50)('fontcolor',function(createHTML){return function fontcolor(color){return createHTML(this,'font','color',color);};});}),(function(module,exports,__webpack_require__){"use strict";__webpack_require__(50)('fontsize',function(createHTML){return function fontsize(size){return createHTML(this,'font','size',size);};});}),(function(module,exports,__webpack_require__){"use strict";__webpack_require__(50)('italics',function(createHTML){return function italics(){return createHTML(this,'i','','');};});}),(function(module,exports,__webpack_require__){"use strict";__webpack_require__(50)('link',function(createHTML){return function link(url){return createHTML(this,'a','href',url);};});}),(function(module,exports,__webpack_require__){"use strict";__webpack_require__(50)('small',function(createHTML){return function small(){return createHTML(this,'small','','');};});}),(function(module,exports,__webpack_require__){"use strict";__webpack_require__(50)('strike',function(createHTML){return function strike(){return createHTML(this,'strike','','');};});}),(function(module,exports,__webpack_require__){"use strict";__webpack_require__(50)('sub',function(createHTML){return function sub(){return createHTML(this,'sub','','');};});}),(function(module,exports,__webpack_require__){"use strict";__webpack_require__(50)('sup',function(createHTML){return function sup(){return createHTML(this,'sup','','');};});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S,'Date',{now:function(){return new Date().getTime();}});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var toObject=__webpack_require__(30);var toPrimitive=__webpack_require__(63);$export($export.P+$export.F*__webpack_require__(13)(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1;}})!==1;}),'Date',{toJSON:function toJSON(key){var O=toObject(this);var pv=toPrimitive(O);return typeof pv=='number'&&!isFinite(pv)?null:O.toISOString();}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var toISOString=__webpack_require__(518);$export($export.P+$export.F*(Date.prototype.toISOString!==toISOString),'Date',{toISOString:toISOString});}),(function(module,exports,__webpack_require__){"use strict";var fails=__webpack_require__(13);var getTime=Date.prototype.getTime;var $toISOString=Date.prototype.toISOString;var lz=function(num){return num>9?num:'0'+num;};module.exports=(fails(function(){return $toISOString.call(new Date(-5e13-1))!='0385-07-25T07:06:39.999Z';})||!fails(function(){$toISOString.call(new Date(NaN));}))?function toISOString(){if(!isFinite(getTime.call(this)))throw RangeError('Invalid time value');var d=this;var y=d.getUTCFullYear();var m=d.getUTCMilliseconds();var s=y<0?'-':y>9999?'+':'';return s+('00000'+Math.abs(y)).slice(s?-6:-4)+
'-'+lz(d.getUTCMonth()+1)+'-'+lz(d.getUTCDate())+
'T'+lz(d.getUTCHours())+':'+lz(d.getUTCMinutes())+
':'+lz(d.getUTCSeconds())+'.'+(m>99?m:'0'+lz(m))+'Z';}:$toISOString;}),(function(module,exports,__webpack_require__){var DateProto=Date.prototype;var INVALID_DATE='Invalid Date';var TO_STRING='toString';var $toString=DateProto[TO_STRING];var getTime=DateProto.getTime;if(new Date(NaN)+''!=INVALID_DATE){__webpack_require__(49)(DateProto,TO_STRING,function toString(){var value=getTime.call(this);return value===value?$toString.call(this):INVALID_DATE;});}}),(function(module,exports,__webpack_require__){var TO_PRIMITIVE=__webpack_require__(19)('toPrimitive');var proto=Date.prototype;if(!(TO_PRIMITIVE in proto))__webpack_require__(48)(proto,TO_PRIMITIVE,__webpack_require__(521));}),(function(module,exports,__webpack_require__){"use strict";var anObject=__webpack_require__(8);var toPrimitive=__webpack_require__(63);var NUMBER='number';module.exports=function(hint){if(hint!=='string'&&hint!==NUMBER&&hint!=='default')throw TypeError('Incorrect hint');return toPrimitive(anObject(this),hint!=NUMBER);};}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S,'Array',{isArray:__webpack_require__(149)});}),(function(module,exports,__webpack_require__){"use strict";var ctx=__webpack_require__(58);var $export=__webpack_require__(0);var toObject=__webpack_require__(30);var call=__webpack_require__(284);var isArrayIter=__webpack_require__(196);var toLength=__webpack_require__(22);var createProperty=__webpack_require__(197);var getIterFn=__webpack_require__(198);$export($export.S+$export.F*!__webpack_require__(152)(function(iter){Array.from(iter);}),'Array',{from:function from(arrayLike){var O=toObject(arrayLike);var C=typeof this=='function'?this:Array;var aLen=arguments.length;var mapfn=aLen>1?arguments[1]:undefined;var mapping=mapfn!==undefined;var index=0;var iterFn=getIterFn(O);var length,result,step,iterator;if(mapping)mapfn=ctx(mapfn,aLen>2?arguments[2]:undefined,2);if(iterFn!=undefined&&!(C==Array&&isArrayIter(iterFn))){for(iterator=iterFn.call(O),result=new C();!(step=iterator.next()).done;index++){createProperty(result,index,mapping?call(iterator,mapfn,[step.value,index],true):step.value);}}else{length=toLength(O.length);for(result=new C(length);length>index;index++){createProperty(result,index,mapping?mapfn(O[index],index):O[index]);}}
result.length=index;return result;}});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var createProperty=__webpack_require__(197);$export($export.S+$export.F*__webpack_require__(13)(function(){function F(){}
return!(Array.of.call(F)instanceof F);}),'Array',{of:function of(){var index=0;var aLen=arguments.length;var result=new(typeof this=='function'?this:Array)(aLen);while(aLen>index)createProperty(result,index,arguments[index++]);result.length=aLen;return result;}});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var toIObject=__webpack_require__(52);var arrayJoin=[].join;$export($export.P+$export.F*(__webpack_require__(123)!=Object||!__webpack_require__(61)(arrayJoin)),'Array',{join:function join(separator){return arrayJoin.call(toIObject(this),separator===undefined?',':separator);}});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var html=__webpack_require__(185);var cof=__webpack_require__(59);var toAbsoluteIndex=__webpack_require__(95);var toLength=__webpack_require__(22);var arraySlice=[].slice;$export($export.P+$export.F*__webpack_require__(13)(function(){if(html)arraySlice.call(html);}),'Array',{slice:function slice(begin,end){var len=toLength(this.length);var klass=cof(this);end=end===undefined?len:end;if(klass=='Array')return arraySlice.call(this,begin,end);var start=toAbsoluteIndex(begin,len);var upTo=toAbsoluteIndex(end,len);var size=toLength(upTo-start);var cloned=new Array(size);var i=0;for(;i<size;i++)cloned[i]=klass=='String'?this.charAt(start+i):this[start+i];return cloned;}});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var aFunction=__webpack_require__(42);var toObject=__webpack_require__(30);var fails=__webpack_require__(13);var $sort=[].sort;var test=[1,2,3];$export($export.P+$export.F*(fails(function(){test.sort(undefined);})||!fails(function(){test.sort(null);})||!__webpack_require__(61)($sort)),'Array',{sort:function sort(comparefn){return comparefn===undefined?$sort.call(toObject(this)):$sort.call(toObject(this),aFunction(comparefn));}});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var $forEach=__webpack_require__(66)(0);var STRICT=__webpack_require__(61)([].forEach,true);$export($export.P+$export.F*!STRICT,'Array',{forEach:function forEach(callbackfn){return $forEach(this,callbackfn,arguments[1]);}});}),(function(module,exports,__webpack_require__){var isObject=__webpack_require__(14);var isArray=__webpack_require__(149);var SPECIES=__webpack_require__(19)('species');module.exports=function(original){var C;if(isArray(original)){C=original.constructor;if(typeof C=='function'&&(C===Array||isArray(C.prototype)))C=undefined;if(isObject(C)){C=C[SPECIES];if(C===null)C=undefined;}}return C===undefined?Array:C;};}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var $map=__webpack_require__(66)(1);$export($export.P+$export.F*!__webpack_require__(61)([].map,true),'Array',{map:function map(callbackfn){return $map(this,callbackfn,arguments[1]);}});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var $filter=__webpack_require__(66)(2);$export($export.P+$export.F*!__webpack_require__(61)([].filter,true),'Array',{filter:function filter(callbackfn){return $filter(this,callbackfn,arguments[1]);}});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var $some=__webpack_require__(66)(3);$export($export.P+$export.F*!__webpack_require__(61)([].some,true),'Array',{some:function some(callbackfn){return $some(this,callbackfn,arguments[1]);}});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var $every=__webpack_require__(66)(4);$export($export.P+$export.F*!__webpack_require__(61)([].every,true),'Array',{every:function every(callbackfn){return $every(this,callbackfn,arguments[1]);}});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var $reduce=__webpack_require__(285);$export($export.P+$export.F*!__webpack_require__(61)([].reduce,true),'Array',{reduce:function reduce(callbackfn){return $reduce(this,callbackfn,arguments.length,arguments[1],false);}});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var $reduce=__webpack_require__(285);$export($export.P+$export.F*!__webpack_require__(61)([].reduceRight,true),'Array',{reduceRight:function reduceRight(callbackfn){return $reduce(this,callbackfn,arguments.length,arguments[1],true);}});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var $indexOf=__webpack_require__(147)(false);var $native=[].indexOf;var NEGATIVE_ZERO=!!$native&&1/[1].indexOf(1,-0)<0;$export($export.P+$export.F*(NEGATIVE_ZERO||!__webpack_require__(61)($native)),'Array',{indexOf:function indexOf(searchElement){return NEGATIVE_ZERO?$native.apply(this,arguments)||0:$indexOf(this,searchElement,arguments[1]);}});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var toIObject=__webpack_require__(52);var toInteger=__webpack_require__(60);var toLength=__webpack_require__(22);var $native=[].lastIndexOf;var NEGATIVE_ZERO=!!$native&&1/[1].lastIndexOf(1,-0)<0;$export($export.P+$export.F*(NEGATIVE_ZERO||!__webpack_require__(61)($native)),'Array',{lastIndexOf:function lastIndexOf(searchElement){if(NEGATIVE_ZERO)return $native.apply(this,arguments)||0;var O=toIObject(this);var length=toLength(O.length);var index=length-1;if(arguments.length>1)index=Math.min(index,toInteger(arguments[1]));if(index<0)index=length+index;for(;index>=0;index--)if(index in O)if(O[index]===searchElement)return index||0;return-1;}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.P,'Array',{copyWithin:__webpack_require__(286)});__webpack_require__(82)('copyWithin');}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.P,'Array',{fill:__webpack_require__(200)});__webpack_require__(82)('fill');}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var $find=__webpack_require__(66)(5);var KEY='find';var forced=true;if(KEY in[])Array(1)[KEY](function(){forced=false;});$export($export.P+$export.F*forced,'Array',{find:function find(callbackfn){return $find(this,callbackfn,arguments.length>1?arguments[1]:undefined);}});__webpack_require__(82)(KEY);}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var $find=__webpack_require__(66)(6);var KEY='findIndex';var forced=true;if(KEY in[])Array(1)[KEY](function(){forced=false;});$export($export.P+$export.F*forced,'Array',{findIndex:function findIndex(callbackfn){return $find(this,callbackfn,arguments.length>1?arguments[1]:undefined);}});__webpack_require__(82)(KEY);}),(function(module,exports,__webpack_require__){__webpack_require__(98)('Array');}),(function(module,exports,__webpack_require__){var global=__webpack_require__(11);var inheritIfRequired=__webpack_require__(188);var dP=__webpack_require__(27).f;var gOPN=__webpack_require__(97).f;var isRegExp=__webpack_require__(151);var $flags=__webpack_require__(125);var $RegExp=global.RegExp;var Base=$RegExp;var proto=$RegExp.prototype;var re1=/a/g;var re2=/a/g;var CORRECT_NEW=new $RegExp(re1)!==re1;if(__webpack_require__(26)&&(!CORRECT_NEW||__webpack_require__(13)(function(){re2[__webpack_require__(19)('match')]=false;return $RegExp(re1)!=re1||$RegExp(re2)==re2||$RegExp(re1,'i')!='/a/i';}))){$RegExp=function RegExp(p,f){var tiRE=this instanceof $RegExp;var piRE=isRegExp(p);var fiU=f===undefined;return!tiRE&&piRE&&p.constructor===$RegExp&&fiU?p:inheritIfRequired(CORRECT_NEW?new Base(piRE&&!fiU?p.source:p,f):Base((piRE=p instanceof $RegExp)?p.source:p,piRE&&fiU?$flags.call(p):f),tiRE?this:proto,$RegExp);};var proxy=function(key){key in $RegExp||dP($RegExp,key,{configurable:true,get:function(){return Base[key];},set:function(it){Base[key]=it;}});};for(var keys=gOPN(Base),i=0;keys.length>i;)proxy(keys[i++]);proto.constructor=$RegExp;$RegExp.prototype=proto;__webpack_require__(49)(global,'RegExp',$RegExp);}
__webpack_require__(98)('RegExp');}),(function(module,exports,__webpack_require__){"use strict";__webpack_require__(289);var anObject=__webpack_require__(8);var $flags=__webpack_require__(125);var DESCRIPTORS=__webpack_require__(26);var TO_STRING='toString';var $toString=/./[TO_STRING];var define=function(fn){__webpack_require__(49)(RegExp.prototype,TO_STRING,fn,true);};if(__webpack_require__(13)(function(){return $toString.call({source:'a',flags:'b'})!='/a/b';})){define(function toString(){var R=anObject(this);return '/'.concat(R.source,'/','flags'in R?R.flags:!DESCRIPTORS&&R instanceof RegExp?$flags.call(R):undefined);});}else if($toString.name!=TO_STRING){define(function toString(){return $toString.call(this);});}}),(function(module,exports,__webpack_require__){"use strict";var anObject=__webpack_require__(8);var toLength=__webpack_require__(22);var advanceStringIndex=__webpack_require__(203);var regExpExec=__webpack_require__(153);__webpack_require__(154)('match',1,function(defined,MATCH,$match,maybeCallNative){return[function match(regexp){var O=defined(this);var fn=regexp==undefined?undefined:regexp[MATCH];return fn!==undefined?fn.call(regexp,O):new RegExp(regexp)[MATCH](String(O));},function(regexp){var res=maybeCallNative($match,regexp,this);if(res.done)return res.value;var rx=anObject(regexp);var S=String(this);if(!rx.global)return regExpExec(rx,S);var fullUnicode=rx.unicode;rx.lastIndex=0;var A=[];var n=0;var result;while((result=regExpExec(rx,S))!==null){var matchStr=String(result[0]);A[n]=matchStr;if(matchStr==='')rx.lastIndex=advanceStringIndex(S,toLength(rx.lastIndex),fullUnicode);n++;}
return n===0?null:A;}];});}),(function(module,exports,__webpack_require__){"use strict";var anObject=__webpack_require__(8);var toObject=__webpack_require__(30);var toLength=__webpack_require__(22);var toInteger=__webpack_require__(60);var advanceStringIndex=__webpack_require__(203);var regExpExec=__webpack_require__(153);var max=Math.max;var min=Math.min;var floor=Math.floor;var SUBSTITUTION_SYMBOLS=/\$([$&`']|\d\d?|<[^>]*>)/g;var SUBSTITUTION_SYMBOLS_NO_NAMED=/\$([$&`']|\d\d?)/g;var maybeToString=function(it){return it===undefined?it:String(it);};__webpack_require__(154)('replace',2,function(defined,REPLACE,$replace,maybeCallNative){return[function replace(searchValue,replaceValue){var O=defined(this);var fn=searchValue==undefined?undefined:searchValue[REPLACE];return fn!==undefined?fn.call(searchValue,O,replaceValue):$replace.call(String(O),searchValue,replaceValue);},function(regexp,replaceValue){var res=maybeCallNative($replace,regexp,this,replaceValue);if(res.done)return res.value;var rx=anObject(regexp);var S=String(this);var functionalReplace=typeof replaceValue==='function';if(!functionalReplace)replaceValue=String(replaceValue);var global=rx.global;if(global){var fullUnicode=rx.unicode;rx.lastIndex=0;}
var results=[];while(true){var result=regExpExec(rx,S);if(result===null)break;results.push(result);if(!global)break;var matchStr=String(result[0]);if(matchStr==='')rx.lastIndex=advanceStringIndex(S,toLength(rx.lastIndex),fullUnicode);}
var accumulatedResult='';var nextSourcePosition=0;for(var i=0;i<results.length;i++){result=results[i];var matched=String(result[0]);var position=max(min(toInteger(result.index),S.length),0);var captures=[];for(var j=1;j<result.length;j++)captures.push(maybeToString(result[j]));var namedCaptures=result.groups;if(functionalReplace){var replacerArgs=[matched].concat(captures,position,S);if(namedCaptures!==undefined)replacerArgs.push(namedCaptures);var replacement=String(replaceValue.apply(undefined,replacerArgs));}else{replacement=getSubstitution(matched,S,position,captures,namedCaptures,replaceValue);}
if(position>=nextSourcePosition){accumulatedResult+=S.slice(nextSourcePosition,position)+replacement;nextSourcePosition=position+matched.length;}}
return accumulatedResult+S.slice(nextSourcePosition);}];function getSubstitution(matched,str,position,captures,namedCaptures,replacement){var tailPos=position+matched.length;var m=captures.length;var symbols=SUBSTITUTION_SYMBOLS_NO_NAMED;if(namedCaptures!==undefined){namedCaptures=toObject(namedCaptures);symbols=SUBSTITUTION_SYMBOLS;}
return $replace.call(replacement,symbols,function(match,ch){var capture;switch(ch.charAt(0)){case '$':return '$';case '&':return matched;case '`':return str.slice(0,position);case "'":return str.slice(tailPos);case '<':capture=namedCaptures[ch.slice(1,-1)];break;default:var n=+ch;if(n===0)return match;if(n>m){var f=floor(n/10);if(f===0)return match;if(f<=m)return captures[f-1]===undefined?ch.charAt(1):captures[f-1]+ch.charAt(1);return match;}
capture=captures[n-1];}
return capture===undefined?'':capture;});}});}),(function(module,exports,__webpack_require__){"use strict";var anObject=__webpack_require__(8);var sameValue=__webpack_require__(275);var regExpExec=__webpack_require__(153);__webpack_require__(154)('search',1,function(defined,SEARCH,$search,maybeCallNative){return[function search(regexp){var O=defined(this);var fn=regexp==undefined?undefined:regexp[SEARCH];return fn!==undefined?fn.call(regexp,O):new RegExp(regexp)[SEARCH](String(O));},function(regexp){var res=maybeCallNative($search,regexp,this);if(res.done)return res.value;var rx=anObject(regexp);var S=String(this);var previousLastIndex=rx.lastIndex;if(!sameValue(previousLastIndex,0))rx.lastIndex=0;var result=regExpExec(rx,S);if(!sameValue(rx.lastIndex,previousLastIndex))rx.lastIndex=previousLastIndex;return result===null?-1:result.index;}];});}),(function(module,exports,__webpack_require__){"use strict";var isRegExp=__webpack_require__(151);var anObject=__webpack_require__(8);var speciesConstructor=__webpack_require__(126);var advanceStringIndex=__webpack_require__(203);var toLength=__webpack_require__(22);var callRegExpExec=__webpack_require__(153);var regexpExec=__webpack_require__(202);var $min=Math.min;var $push=[].push;var $SPLIT='split';var LENGTH='length';var LAST_INDEX='lastIndex';var SUPPORTS_Y=!!(function(){try{return new RegExp('x','y');}catch(e){}})();__webpack_require__(154)('split',2,function(defined,SPLIT,$split,maybeCallNative){var internalSplit;if('abbc'[$SPLIT](/(b)*/)[1]=='c'||'test'[$SPLIT](/(?:)/,-1)[LENGTH]!=4||'ab'[$SPLIT](/(?:ab)*/)[LENGTH]!=2||'.'[$SPLIT](/(.?)(.?)/)[LENGTH]!=4||'.'[$SPLIT](/()()/)[LENGTH]>1||''[$SPLIT](/.?/)[LENGTH]){internalSplit=function(separator,limit){var string=String(this);if(separator===undefined&&limit===0)return[];if(!isRegExp(separator))return $split.call(string,separator,limit);var output=[];var flags=(separator.ignoreCase?'i':'')+
(separator.multiline?'m':'')+
(separator.unicode?'u':'')+
(separator.sticky?'y':'');var lastLastIndex=0;var splitLimit=limit===undefined?4294967295:limit>>>0;var separatorCopy=new RegExp(separator.source,flags+'g');var match,lastIndex,lastLength;while(match=regexpExec.call(separatorCopy,string)){lastIndex=separatorCopy[LAST_INDEX];if(lastIndex>lastLastIndex){output.push(string.slice(lastLastIndex,match.index));if(match[LENGTH]>1&&match.index<string[LENGTH])$push.apply(output,match.slice(1));lastLength=match[0][LENGTH];lastLastIndex=lastIndex;if(output[LENGTH]>=splitLimit)break;}
if(separatorCopy[LAST_INDEX]===match.index)separatorCopy[LAST_INDEX]++;}
if(lastLastIndex===string[LENGTH]){if(lastLength||!separatorCopy.test(''))output.push('');}else output.push(string.slice(lastLastIndex));return output[LENGTH]>splitLimit?output.slice(0,splitLimit):output;};}else if('0'[$SPLIT](undefined,0)[LENGTH]){internalSplit=function(separator,limit){return separator===undefined&&limit===0?[]:$split.call(this,separator,limit);};}else{internalSplit=$split;}
return[function split(separator,limit){var O=defined(this);var splitter=separator==undefined?undefined:separator[SPLIT];return splitter!==undefined?splitter.call(separator,O,limit):internalSplit.call(String(O),separator,limit);},function(regexp,limit){var res=maybeCallNative(internalSplit,regexp,this,limit,internalSplit!==$split);if(res.done)return res.value;var rx=anObject(regexp);var S=String(this);var C=speciesConstructor(rx,RegExp);var unicodeMatching=rx.unicode;var flags=(rx.ignoreCase?'i':'')+
(rx.multiline?'m':'')+
(rx.unicode?'u':'')+
(SUPPORTS_Y?'y':'g');var splitter=new C(SUPPORTS_Y?rx:'^(?:'+rx.source+')',flags);var lim=limit===undefined?0xffffffff:limit>>>0;if(lim===0)return[];if(S.length===0)return callRegExpExec(splitter,S)===null?[S]:[];var p=0;var q=0;var A=[];while(q<S.length){splitter.lastIndex=SUPPORTS_Y?q:0;var z=callRegExpExec(splitter,SUPPORTS_Y?S:S.slice(q));var e;if(z===null||(e=$min(toLength(splitter.lastIndex+(SUPPORTS_Y?0:q)),S.length))===p){q=advanceStringIndex(S,q,unicodeMatching);}else{A.push(S.slice(p,q));if(A.length===lim)return A;for(var i=1;i<=z.length-1;i++){A.push(z[i]);if(A.length===lim)return A;}
q=p=e;}}
A.push(S.slice(p));return A;}];});}),(function(module,exports,__webpack_require__){"use strict";var LIBRARY=__webpack_require__(81);var global=__webpack_require__(11);var ctx=__webpack_require__(58);var classof=__webpack_require__(110);var $export=__webpack_require__(0);var isObject=__webpack_require__(14);var aFunction=__webpack_require__(42);var anInstance=__webpack_require__(99);var forOf=__webpack_require__(100);var speciesConstructor=__webpack_require__(126);var task=__webpack_require__(204).set;var microtask=__webpack_require__(205)();var newPromiseCapabilityModule=__webpack_require__(206);var perform=__webpack_require__(290);var userAgent=__webpack_require__(155);var promiseResolve=__webpack_require__(291);var PROMISE='Promise';var TypeError=global.TypeError;var process=global.process;var versions=process&&process.versions;var v8=versions&&versions.v8||'';var $Promise=global[PROMISE];var isNode=classof(process)=='process';var empty=function(){};var Internal,newGenericPromiseCapability,OwnPromiseCapability,Wrapper;var newPromiseCapability=newGenericPromiseCapability=newPromiseCapabilityModule.f;var USE_NATIVE=!!function(){try{var promise=$Promise.resolve(1);var FakePromise=(promise.constructor={})[__webpack_require__(19)('species')]=function(exec){exec(empty,empty);};return(isNode||typeof PromiseRejectionEvent=='function')&&promise.then(empty)instanceof FakePromise&&v8.indexOf('6.6')!==0&&userAgent.indexOf('Chrome/66')===-1;}catch(e){}}();var isThenable=function(it){var then;return isObject(it)&&typeof(then=it.then)=='function'?then:false;};var notify=function(promise,isReject){if(promise._n)return;promise._n=true;var chain=promise._c;microtask(function(){var value=promise._v;var ok=promise._s==1;var i=0;var run=function(reaction){var handler=ok?reaction.ok:reaction.fail;var resolve=reaction.resolve;var reject=reaction.reject;var domain=reaction.domain;var result,then,exited;try{if(handler){if(!ok){if(promise._h==2)onHandleUnhandled(promise);promise._h=1;}
if(handler===true)result=value;else{if(domain)domain.enter();result=handler(value);if(domain){domain.exit();exited=true;}}
if(result===reaction.promise){reject(TypeError('Promise-chain cycle'));}else if(then=isThenable(result)){then.call(result,resolve,reject);}else resolve(result);}else reject(value);}catch(e){if(domain&&!exited)domain.exit();reject(e);}};while(chain.length>i)run(chain[i++]);promise._c=[];promise._n=false;if(isReject&&!promise._h)onUnhandled(promise);});};var onUnhandled=function(promise){task.call(global,function(){var value=promise._v;var unhandled=isUnhandled(promise);var result,handler,console;if(unhandled){result=perform(function(){if(isNode){process.emit('unhandledRejection',value,promise);}else if(handler=global.onunhandledrejection){handler({promise:promise,reason:value});}else if((console=global.console)&&console.error){console.error('Unhandled promise rejection',value);}});promise._h=isNode||isUnhandled(promise)?2:1;}promise._a=undefined;if(unhandled&&result.e)throw result.v;});};var isUnhandled=function(promise){return promise._h!==1&&(promise._a||promise._c).length===0;};var onHandleUnhandled=function(promise){task.call(global,function(){var handler;if(isNode){process.emit('rejectionHandled',promise);}else if(handler=global.onrejectionhandled){handler({promise:promise,reason:promise._v});}});};var $reject=function(value){var promise=this;if(promise._d)return;promise._d=true;promise=promise._w||promise;promise._v=value;promise._s=2;if(!promise._a)promise._a=promise._c.slice();notify(promise,true);};var $resolve=function(value){var promise=this;var then;if(promise._d)return;promise._d=true;promise=promise._w||promise;try{if(promise===value)throw TypeError("Promise can't be resolved itself");if(then=isThenable(value)){microtask(function(){var wrapper={_w:promise,_d:false};try{then.call(value,ctx($resolve,wrapper,1),ctx($reject,wrapper,1));}catch(e){$reject.call(wrapper,e);}});}else{promise._v=value;promise._s=1;notify(promise,false);}}catch(e){$reject.call({_w:promise,_d:false},e);}};if(!USE_NATIVE){$Promise=function Promise(executor){anInstance(this,$Promise,PROMISE,'_h');aFunction(executor);Internal.call(this);try{executor(ctx($resolve,this,1),ctx($reject,this,1));}catch(err){$reject.call(this,err);}};Internal=function Promise(executor){this._c=[];this._a=undefined;this._s=0;this._d=false;this._v=undefined;this._h=0;this._n=false;};Internal.prototype=__webpack_require__(101)($Promise.prototype,{then:function then(onFulfilled,onRejected){var reaction=newPromiseCapability(speciesConstructor(this,$Promise));reaction.ok=typeof onFulfilled=='function'?onFulfilled:true;reaction.fail=typeof onRejected=='function'&&onRejected;reaction.domain=isNode?process.domain:undefined;this._c.push(reaction);if(this._a)this._a.push(reaction);if(this._s)notify(this,false);return reaction.promise;},'catch':function(onRejected){return this.then(undefined,onRejected);}});OwnPromiseCapability=function(){var promise=new Internal();this.promise=promise;this.resolve=ctx($resolve,promise,1);this.reject=ctx($reject,promise,1);};newPromiseCapabilityModule.f=newPromiseCapability=function(C){return C===$Promise||C===Wrapper?new OwnPromiseCapability(C):newGenericPromiseCapability(C);};}
$export($export.G+$export.W+$export.F*!USE_NATIVE,{Promise:$Promise});__webpack_require__(109)($Promise,PROMISE);__webpack_require__(98)(PROMISE);Wrapper=__webpack_require__(57)[PROMISE];$export($export.S+$export.F*!USE_NATIVE,PROMISE,{reject:function reject(r){var capability=newPromiseCapability(this);var $$reject=capability.reject;$$reject(r);return capability.promise;}});$export($export.S+$export.F*(LIBRARY||!USE_NATIVE),PROMISE,{resolve:function resolve(x){return promiseResolve(LIBRARY&&this===Wrapper?$Promise:this,x);}});$export($export.S+$export.F*!(USE_NATIVE&&__webpack_require__(152)(function(iter){$Promise.all(iter)['catch'](empty);})),PROMISE,{all:function all(iterable){var C=this;var capability=newPromiseCapability(C);var resolve=capability.resolve;var reject=capability.reject;var result=perform(function(){var values=[];var index=0;var remaining=1;forOf(iterable,false,function(promise){var $index=index++;var alreadyCalled=false;values.push(undefined);remaining++;C.resolve(promise).then(function(value){if(alreadyCalled)return;alreadyCalled=true;values[$index]=value;--remaining||resolve(values);},reject);});--remaining||resolve(values);});if(result.e)reject(result.v);return capability.promise;},race:function race(iterable){var C=this;var capability=newPromiseCapability(C);var reject=capability.reject;var result=perform(function(){forOf(iterable,false,function(promise){C.resolve(promise).then(capability.resolve,reject);});});if(result.e)reject(result.v);return capability.promise;}});}),(function(module,exports,__webpack_require__){"use strict";var weak=__webpack_require__(296);var validate=__webpack_require__(113);var WEAK_SET='WeakSet';__webpack_require__(156)(WEAK_SET,function(get){return function WeakSet(){return get(this,arguments.length>0?arguments[0]:undefined);};},{add:function add(value){return weak.def(validate(this,WEAK_SET),value,true);}},weak,false,true);}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var $typed=__webpack_require__(157);var buffer=__webpack_require__(207);var anObject=__webpack_require__(8);var toAbsoluteIndex=__webpack_require__(95);var toLength=__webpack_require__(22);var isObject=__webpack_require__(14);var ArrayBuffer=__webpack_require__(11).ArrayBuffer;var speciesConstructor=__webpack_require__(126);var $ArrayBuffer=buffer.ArrayBuffer;var $DataView=buffer.DataView;var $isView=$typed.ABV&&ArrayBuffer.isView;var $slice=$ArrayBuffer.prototype.slice;var VIEW=$typed.VIEW;var ARRAY_BUFFER='ArrayBuffer';$export($export.G+$export.W+$export.F*(ArrayBuffer!==$ArrayBuffer),{ArrayBuffer:$ArrayBuffer});$export($export.S+$export.F*!$typed.CONSTR,ARRAY_BUFFER,{isView:function isView(it){return $isView&&$isView(it)||isObject(it)&&VIEW in it;}});$export($export.P+$export.U+$export.F*__webpack_require__(13)(function(){return!new $ArrayBuffer(2).slice(1,undefined).byteLength;}),ARRAY_BUFFER,{slice:function slice(start,end){if($slice!==undefined&&end===undefined)return $slice.call(anObject(this),start);var len=anObject(this).byteLength;var first=toAbsoluteIndex(start,len);var fin=toAbsoluteIndex(end===undefined?len:end,len);var result=new(speciesConstructor(this,$ArrayBuffer))(toLength(fin-first));var viewS=new $DataView(this);var viewT=new $DataView(result);var index=0;while(first<fin){viewT.setUint8(index++,viewS.getUint8(first++));}return result;}});__webpack_require__(98)(ARRAY_BUFFER);}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.G+$export.W+$export.F*!__webpack_require__(157).ABV,{DataView:__webpack_require__(207).DataView});}),(function(module,exports,__webpack_require__){__webpack_require__(73)('Int8',1,function(init){return function Int8Array(data,byteOffset,length){return init(this,data,byteOffset,length);};});}),(function(module,exports,__webpack_require__){__webpack_require__(73)('Uint8',1,function(init){return function Uint8Array(data,byteOffset,length){return init(this,data,byteOffset,length);};});}),(function(module,exports,__webpack_require__){__webpack_require__(73)('Uint8',1,function(init){return function Uint8ClampedArray(data,byteOffset,length){return init(this,data,byteOffset,length);};},true);}),(function(module,exports,__webpack_require__){__webpack_require__(73)('Int16',2,function(init){return function Int16Array(data,byteOffset,length){return init(this,data,byteOffset,length);};});}),(function(module,exports,__webpack_require__){__webpack_require__(73)('Uint16',2,function(init){return function Uint16Array(data,byteOffset,length){return init(this,data,byteOffset,length);};});}),(function(module,exports,__webpack_require__){__webpack_require__(73)('Int32',4,function(init){return function Int32Array(data,byteOffset,length){return init(this,data,byteOffset,length);};});}),(function(module,exports,__webpack_require__){__webpack_require__(73)('Uint32',4,function(init){return function Uint32Array(data,byteOffset,length){return init(this,data,byteOffset,length);};});}),(function(module,exports,__webpack_require__){__webpack_require__(73)('Float32',4,function(init){return function Float32Array(data,byteOffset,length){return init(this,data,byteOffset,length);};});}),(function(module,exports,__webpack_require__){__webpack_require__(73)('Float64',8,function(init){return function Float64Array(data,byteOffset,length){return init(this,data,byteOffset,length);};});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var aFunction=__webpack_require__(42);var anObject=__webpack_require__(8);var rApply=(__webpack_require__(11).Reflect||{}).apply;var fApply=Function.apply;$export($export.S+$export.F*!__webpack_require__(13)(function(){rApply(function(){});}),'Reflect',{apply:function apply(target,thisArgument,argumentsList){var T=aFunction(target);var L=anObject(argumentsList);return rApply?rApply(T,thisArgument,L):fApply.call(T,thisArgument,L);}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var create=__webpack_require__(96);var aFunction=__webpack_require__(42);var anObject=__webpack_require__(8);var isObject=__webpack_require__(14);var fails=__webpack_require__(13);var bind=__webpack_require__(276);var rConstruct=(__webpack_require__(11).Reflect||{}).construct;var NEW_TARGET_BUG=fails(function(){function F(){}
return!(rConstruct(function(){},[],F)instanceof F);});var ARGS_BUG=!fails(function(){rConstruct(function(){});});$export($export.S+$export.F*(NEW_TARGET_BUG||ARGS_BUG),'Reflect',{construct:function construct(Target,args){aFunction(Target);anObject(args);var newTarget=arguments.length<3?Target:aFunction(arguments[2]);if(ARGS_BUG&&!NEW_TARGET_BUG)return rConstruct(Target,args,newTarget);if(Target==newTarget){switch(args.length){case 0:return new Target();case 1:return new Target(args[0]);case 2:return new Target(args[0],args[1]);case 3:return new Target(args[0],args[1],args[2]);case 4:return new Target(args[0],args[1],args[2],args[3]);}
var $args=[null];$args.push.apply($args,args);return new(bind.apply(Target,$args))();}
var proto=newTarget.prototype;var instance=create(isObject(proto)?proto:Object.prototype);var result=Function.apply.call(Target,instance,args);return isObject(result)?result:instance;}});}),(function(module,exports,__webpack_require__){var dP=__webpack_require__(27);var $export=__webpack_require__(0);var anObject=__webpack_require__(8);var toPrimitive=__webpack_require__(63);$export($export.S+$export.F*__webpack_require__(13)(function(){Reflect.defineProperty(dP.f({},1,{value:1}),1,{value:2});}),'Reflect',{defineProperty:function defineProperty(target,propertyKey,attributes){anObject(target);propertyKey=toPrimitive(propertyKey,true);anObject(attributes);try{dP.f(target,propertyKey,attributes);return true;}catch(e){return false;}}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var gOPD=__webpack_require__(53).f;var anObject=__webpack_require__(8);$export($export.S,'Reflect',{deleteProperty:function deleteProperty(target,propertyKey){var desc=gOPD(anObject(target),propertyKey);return desc&&!desc.configurable?false:delete target[propertyKey];}});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var anObject=__webpack_require__(8);var Enumerate=function(iterated){this._t=anObject(iterated);this._i=0;var keys=this._k=[];var key;for(key in iterated)keys.push(key);};__webpack_require__(193)(Enumerate,'Object',function(){var that=this;var keys=that._k;var key;do{if(that._i>=keys.length)return{value:undefined,done:true};}while(!((key=keys[that._i++])in that._t));return{value:key,done:false};});$export($export.S,'Reflect',{enumerate:function enumerate(target){return new Enumerate(target);}});}),(function(module,exports,__webpack_require__){var gOPD=__webpack_require__(53);var getPrototypeOf=__webpack_require__(54);var has=__webpack_require__(51);var $export=__webpack_require__(0);var isObject=__webpack_require__(14);var anObject=__webpack_require__(8);function get(target,propertyKey){var receiver=arguments.length<3?target:arguments[2];var desc,proto;if(anObject(target)===receiver)return target[propertyKey];if(desc=gOPD.f(target,propertyKey))return has(desc,'value')?desc.value:desc.get!==undefined?desc.get.call(receiver):undefined;if(isObject(proto=getPrototypeOf(target)))return get(proto,propertyKey,receiver);}
$export($export.S,'Reflect',{get:get});}),(function(module,exports,__webpack_require__){var gOPD=__webpack_require__(53);var $export=__webpack_require__(0);var anObject=__webpack_require__(8);$export($export.S,'Reflect',{getOwnPropertyDescriptor:function getOwnPropertyDescriptor(target,propertyKey){return gOPD.f(anObject(target),propertyKey);}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var getProto=__webpack_require__(54);var anObject=__webpack_require__(8);$export($export.S,'Reflect',{getPrototypeOf:function getPrototypeOf(target){return getProto(anObject(target));}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S,'Reflect',{has:function has(target,propertyKey){return propertyKey in target;}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var anObject=__webpack_require__(8);var $isExtensible=Object.isExtensible;$export($export.S,'Reflect',{isExtensible:function isExtensible(target){anObject(target);return $isExtensible?$isExtensible(target):true;}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S,'Reflect',{ownKeys:__webpack_require__(298)});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var anObject=__webpack_require__(8);var $preventExtensions=Object.preventExtensions;$export($export.S,'Reflect',{preventExtensions:function preventExtensions(target){anObject(target);try{if($preventExtensions)$preventExtensions(target);return true;}catch(e){return false;}}});}),(function(module,exports,__webpack_require__){var dP=__webpack_require__(27);var gOPD=__webpack_require__(53);var getPrototypeOf=__webpack_require__(54);var has=__webpack_require__(51);var $export=__webpack_require__(0);var createDesc=__webpack_require__(92);var anObject=__webpack_require__(8);var isObject=__webpack_require__(14);function set(target,propertyKey,V){var receiver=arguments.length<4?target:arguments[3];var ownDesc=gOPD.f(anObject(target),propertyKey);var existingDescriptor,proto;if(!ownDesc){if(isObject(proto=getPrototypeOf(target))){return set(proto,propertyKey,V,receiver);}
ownDesc=createDesc(0);}
if(has(ownDesc,'value')){if(ownDesc.writable===false||!isObject(receiver))return false;if(existingDescriptor=gOPD.f(receiver,propertyKey)){if(existingDescriptor.get||existingDescriptor.set||existingDescriptor.writable===false)return false;existingDescriptor.value=V;dP.f(receiver,propertyKey,existingDescriptor);}else dP.f(receiver,propertyKey,createDesc(0,V));return true;}
return ownDesc.set===undefined?false:(ownDesc.set.call(receiver,V),true);}
$export($export.S,'Reflect',{set:set});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var setProto=__webpack_require__(186);if(setProto)$export($export.S,'Reflect',{setPrototypeOf:function setPrototypeOf(target,proto){setProto.check(target,proto);try{setProto.set(target,proto);return true;}catch(e){return false;}}});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var $includes=__webpack_require__(147)(true);$export($export.P,'Array',{includes:function includes(el){return $includes(this,el,arguments.length>1?arguments[1]:undefined);}});__webpack_require__(82)('includes');}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var flattenIntoArray=__webpack_require__(299);var toObject=__webpack_require__(30);var toLength=__webpack_require__(22);var aFunction=__webpack_require__(42);var arraySpeciesCreate=__webpack_require__(199);$export($export.P,'Array',{flatMap:function flatMap(callbackfn){var O=toObject(this);var sourceLen,A;aFunction(callbackfn);sourceLen=toLength(O.length);A=arraySpeciesCreate(O,0);flattenIntoArray(A,O,O,sourceLen,0,1,callbackfn,arguments[1]);return A;}});__webpack_require__(82)('flatMap');}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var flattenIntoArray=__webpack_require__(299);var toObject=__webpack_require__(30);var toLength=__webpack_require__(22);var toInteger=__webpack_require__(60);var arraySpeciesCreate=__webpack_require__(199);$export($export.P,'Array',{flatten:function flatten(){var depthArg=arguments[0];var O=toObject(this);var sourceLen=toLength(O.length);var A=arraySpeciesCreate(O,0);flattenIntoArray(A,O,O,sourceLen,0,depthArg===undefined?1:toInteger(depthArg));return A;}});__webpack_require__(82)('flatten');}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var $at=__webpack_require__(150)(true);$export($export.P,'String',{at:function at(pos){return $at(this,pos);}});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var $pad=__webpack_require__(300);var userAgent=__webpack_require__(155);$export($export.P+$export.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(userAgent),'String',{padStart:function padStart(maxLength){return $pad(this,maxLength,arguments.length>1?arguments[1]:undefined,true);}});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var $pad=__webpack_require__(300);var userAgent=__webpack_require__(155);$export($export.P+$export.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(userAgent),'String',{padEnd:function padEnd(maxLength){return $pad(this,maxLength,arguments.length>1?arguments[1]:undefined,false);}});}),(function(module,exports,__webpack_require__){"use strict";__webpack_require__(111)('trimLeft',function($trim){return function trimLeft(){return $trim(this,1);};},'trimStart');}),(function(module,exports,__webpack_require__){"use strict";__webpack_require__(111)('trimRight',function($trim){return function trimRight(){return $trim(this,2);};},'trimEnd');}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var defined=__webpack_require__(64);var toLength=__webpack_require__(22);var isRegExp=__webpack_require__(151);var getFlags=__webpack_require__(125);var RegExpProto=RegExp.prototype;var $RegExpStringIterator=function(regexp,string){this._r=regexp;this._s=string;};__webpack_require__(193)($RegExpStringIterator,'RegExp String',function next(){var match=this._r.exec(this._s);return{value:match,done:match===null};});$export($export.P,'String',{matchAll:function matchAll(regexp){defined(this);if(!isRegExp(regexp))throw TypeError(regexp+' is not a regexp!');var S=String(this);var flags='flags'in RegExpProto?String(regexp.flags):getFlags.call(regexp);var rx=new RegExp(regexp.source,~flags.indexOf('g')?flags:'g'+flags);rx.lastIndex=toLength(regexp.lastIndex);return new $RegExpStringIterator(rx,S);}});}),(function(module,exports,__webpack_require__){__webpack_require__(182)('asyncIterator');}),(function(module,exports,__webpack_require__){__webpack_require__(182)('observable');}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var ownKeys=__webpack_require__(298);var toIObject=__webpack_require__(52);var gOPD=__webpack_require__(53);var createProperty=__webpack_require__(197);$export($export.S,'Object',{getOwnPropertyDescriptors:function getOwnPropertyDescriptors(object){var O=toIObject(object);var getDesc=gOPD.f;var keys=ownKeys(O);var result={};var i=0;var key,desc;while(keys.length>i){desc=getDesc(O,key=keys[i++]);if(desc!==undefined)createProperty(result,key,desc);}
return result;}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var $values=__webpack_require__(301)(false);$export($export.S,'Object',{values:function values(it){return $values(it);}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var $entries=__webpack_require__(301)(true);$export($export.S,'Object',{entries:function entries(it){return $entries(it);}});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var toObject=__webpack_require__(30);var aFunction=__webpack_require__(42);var $defineProperty=__webpack_require__(27);__webpack_require__(26)&&$export($export.P+__webpack_require__(158),'Object',{__defineGetter__:function __defineGetter__(P,getter){$defineProperty.f(toObject(this),P,{get:aFunction(getter),enumerable:true,configurable:true});}});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var toObject=__webpack_require__(30);var aFunction=__webpack_require__(42);var $defineProperty=__webpack_require__(27);__webpack_require__(26)&&$export($export.P+__webpack_require__(158),'Object',{__defineSetter__:function __defineSetter__(P,setter){$defineProperty.f(toObject(this),P,{set:aFunction(setter),enumerable:true,configurable:true});}});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var toObject=__webpack_require__(30);var toPrimitive=__webpack_require__(63);var getPrototypeOf=__webpack_require__(54);var getOwnPropertyDescriptor=__webpack_require__(53).f;__webpack_require__(26)&&$export($export.P+__webpack_require__(158),'Object',{__lookupGetter__:function __lookupGetter__(P){var O=toObject(this);var K=toPrimitive(P,true);var D;do{if(D=getOwnPropertyDescriptor(O,K))return D.get;}while(O=getPrototypeOf(O));}});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var toObject=__webpack_require__(30);var toPrimitive=__webpack_require__(63);var getPrototypeOf=__webpack_require__(54);var getOwnPropertyDescriptor=__webpack_require__(53).f;__webpack_require__(26)&&$export($export.P+__webpack_require__(158),'Object',{__lookupSetter__:function __lookupSetter__(P){var O=toObject(this);var K=toPrimitive(P,true);var D;do{if(D=getOwnPropertyDescriptor(O,K))return D.set;}while(O=getPrototypeOf(O));}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.P+$export.R,'Map',{toJSON:__webpack_require__(302)('Map')});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.P+$export.R,'Set',{toJSON:__webpack_require__(302)('Set')});}),(function(module,exports,__webpack_require__){__webpack_require__(159)('Map');}),(function(module,exports,__webpack_require__){__webpack_require__(159)('Set');}),(function(module,exports,__webpack_require__){__webpack_require__(159)('WeakMap');}),(function(module,exports,__webpack_require__){__webpack_require__(159)('WeakSet');}),(function(module,exports,__webpack_require__){__webpack_require__(160)('Map');}),(function(module,exports,__webpack_require__){__webpack_require__(160)('Set');}),(function(module,exports,__webpack_require__){__webpack_require__(160)('WeakMap');}),(function(module,exports,__webpack_require__){__webpack_require__(160)('WeakSet');}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.G,{global:__webpack_require__(11)});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S,'System',{global:__webpack_require__(11)});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var cof=__webpack_require__(59);$export($export.S,'Error',{isError:function isError(it){return cof(it)==='Error';}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S,'Math',{clamp:function clamp(x,lower,upper){return Math.min(upper,Math.max(lower,x));}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S,'Math',{DEG_PER_RAD:Math.PI/180});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var RAD_PER_DEG=180/Math.PI;$export($export.S,'Math',{degrees:function degrees(radians){return radians*RAD_PER_DEG;}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var scale=__webpack_require__(304);var fround=__webpack_require__(283);$export($export.S,'Math',{fscale:function fscale(x,inLow,inHigh,outLow,outHigh){return fround(scale(x,inLow,inHigh,outLow,outHigh));}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S,'Math',{iaddh:function iaddh(x0,x1,y0,y1){var $x0=x0>>>0;var $x1=x1>>>0;var $y0=y0>>>0;return $x1+(y1>>>0)+(($x0&$y0|($x0|$y0)&~($x0+$y0>>>0))>>>31)|0;}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S,'Math',{isubh:function isubh(x0,x1,y0,y1){var $x0=x0>>>0;var $x1=x1>>>0;var $y0=y0>>>0;return $x1-(y1>>>0)-((~$x0&$y0|~($x0^$y0)&$x0-$y0>>>0)>>>31)|0;}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S,'Math',{imulh:function imulh(u,v){var UINT16=0xffff;var $u=+u;var $v=+v;var u0=$u&UINT16;var v0=$v&UINT16;var u1=$u>>16;var v1=$v>>16;var t=(u1*v0>>>0)+(u0*v0>>>16);return u1*v1+(t>>16)+((u0*v1>>>0)+(t&UINT16)>>16);}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S,'Math',{RAD_PER_DEG:180/Math.PI});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var DEG_PER_RAD=Math.PI/180;$export($export.S,'Math',{radians:function radians(degrees){return degrees*DEG_PER_RAD;}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S,'Math',{scale:__webpack_require__(304)});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S,'Math',{umulh:function umulh(u,v){var UINT16=0xffff;var $u=+u;var $v=+v;var u0=$u&UINT16;var v0=$v&UINT16;var u1=$u>>>16;var v1=$v>>>16;var t=(u1*v0>>>0)+(u0*v0>>>16);return u1*v1+(t>>>16)+((u0*v1>>>0)+(t&UINT16)>>>16);}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);$export($export.S,'Math',{signbit:function signbit(x){return(x=+x)!=x?x:x==0?1/x==Infinity:x>0;}});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var core=__webpack_require__(57);var global=__webpack_require__(11);var speciesConstructor=__webpack_require__(126);var promiseResolve=__webpack_require__(291);$export($export.P+$export.R,'Promise',{'finally':function(onFinally){var C=speciesConstructor(this,core.Promise||global.Promise);var isFunction=typeof onFinally=='function';return this.then(isFunction?function(x){return promiseResolve(C,onFinally()).then(function(){return x;});}:onFinally,isFunction?function(e){return promiseResolve(C,onFinally()).then(function(){throw e;});}:onFinally);}});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var newPromiseCapability=__webpack_require__(206);var perform=__webpack_require__(290);$export($export.S,'Promise',{'try':function(callbackfn){var promiseCapability=newPromiseCapability.f(this);var result=perform(callbackfn);(result.e?promiseCapability.reject:promiseCapability.resolve)(result.v);return promiseCapability.promise;}});}),(function(module,exports,__webpack_require__){var metadata=__webpack_require__(74);var anObject=__webpack_require__(8);var toMetaKey=metadata.key;var ordinaryDefineOwnMetadata=metadata.set;metadata.exp({defineMetadata:function defineMetadata(metadataKey,metadataValue,target,targetKey){ordinaryDefineOwnMetadata(metadataKey,metadataValue,anObject(target),toMetaKey(targetKey));}});}),(function(module,exports,__webpack_require__){var metadata=__webpack_require__(74);var anObject=__webpack_require__(8);var toMetaKey=metadata.key;var getOrCreateMetadataMap=metadata.map;var store=metadata.store;metadata.exp({deleteMetadata:function deleteMetadata(metadataKey,target){var targetKey=arguments.length<3?undefined:toMetaKey(arguments[2]);var metadataMap=getOrCreateMetadataMap(anObject(target),targetKey,false);if(metadataMap===undefined||!metadataMap['delete'](metadataKey))return false;if(metadataMap.size)return true;var targetMetadata=store.get(target);targetMetadata['delete'](targetKey);return!!targetMetadata.size||store['delete'](target);}});}),(function(module,exports,__webpack_require__){var metadata=__webpack_require__(74);var anObject=__webpack_require__(8);var getPrototypeOf=__webpack_require__(54);var ordinaryHasOwnMetadata=metadata.has;var ordinaryGetOwnMetadata=metadata.get;var toMetaKey=metadata.key;var ordinaryGetMetadata=function(MetadataKey,O,P){var hasOwn=ordinaryHasOwnMetadata(MetadataKey,O,P);if(hasOwn)return ordinaryGetOwnMetadata(MetadataKey,O,P);var parent=getPrototypeOf(O);return parent!==null?ordinaryGetMetadata(MetadataKey,parent,P):undefined;};metadata.exp({getMetadata:function getMetadata(metadataKey,target){return ordinaryGetMetadata(metadataKey,anObject(target),arguments.length<3?undefined:toMetaKey(arguments[2]));}});}),(function(module,exports,__webpack_require__){var Set=__webpack_require__(294);var from=__webpack_require__(303);var metadata=__webpack_require__(74);var anObject=__webpack_require__(8);var getPrototypeOf=__webpack_require__(54);var ordinaryOwnMetadataKeys=metadata.keys;var toMetaKey=metadata.key;var ordinaryMetadataKeys=function(O,P){var oKeys=ordinaryOwnMetadataKeys(O,P);var parent=getPrototypeOf(O);if(parent===null)return oKeys;var pKeys=ordinaryMetadataKeys(parent,P);return pKeys.length?oKeys.length?from(new Set(oKeys.concat(pKeys))):pKeys:oKeys;};metadata.exp({getMetadataKeys:function getMetadataKeys(target){return ordinaryMetadataKeys(anObject(target),arguments.length<2?undefined:toMetaKey(arguments[1]));}});}),(function(module,exports,__webpack_require__){var metadata=__webpack_require__(74);var anObject=__webpack_require__(8);var ordinaryGetOwnMetadata=metadata.get;var toMetaKey=metadata.key;metadata.exp({getOwnMetadata:function getOwnMetadata(metadataKey,target){return ordinaryGetOwnMetadata(metadataKey,anObject(target),arguments.length<3?undefined:toMetaKey(arguments[2]));}});}),(function(module,exports,__webpack_require__){var metadata=__webpack_require__(74);var anObject=__webpack_require__(8);var ordinaryOwnMetadataKeys=metadata.keys;var toMetaKey=metadata.key;metadata.exp({getOwnMetadataKeys:function getOwnMetadataKeys(target){return ordinaryOwnMetadataKeys(anObject(target),arguments.length<2?undefined:toMetaKey(arguments[1]));}});}),(function(module,exports,__webpack_require__){var metadata=__webpack_require__(74);var anObject=__webpack_require__(8);var getPrototypeOf=__webpack_require__(54);var ordinaryHasOwnMetadata=metadata.has;var toMetaKey=metadata.key;var ordinaryHasMetadata=function(MetadataKey,O,P){var hasOwn=ordinaryHasOwnMetadata(MetadataKey,O,P);if(hasOwn)return true;var parent=getPrototypeOf(O);return parent!==null?ordinaryHasMetadata(MetadataKey,parent,P):false;};metadata.exp({hasMetadata:function hasMetadata(metadataKey,target){return ordinaryHasMetadata(metadataKey,anObject(target),arguments.length<3?undefined:toMetaKey(arguments[2]));}});}),(function(module,exports,__webpack_require__){var metadata=__webpack_require__(74);var anObject=__webpack_require__(8);var ordinaryHasOwnMetadata=metadata.has;var toMetaKey=metadata.key;metadata.exp({hasOwnMetadata:function hasOwnMetadata(metadataKey,target){return ordinaryHasOwnMetadata(metadataKey,anObject(target),arguments.length<3?undefined:toMetaKey(arguments[2]));}});}),(function(module,exports,__webpack_require__){var $metadata=__webpack_require__(74);var anObject=__webpack_require__(8);var aFunction=__webpack_require__(42);var toMetaKey=$metadata.key;var ordinaryDefineOwnMetadata=$metadata.set;$metadata.exp({metadata:function metadata(metadataKey,metadataValue){return function decorator(target,targetKey){ordinaryDefineOwnMetadata(metadataKey,metadataValue,(targetKey!==undefined?anObject:aFunction)(target),toMetaKey(targetKey));};}});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var microtask=__webpack_require__(205)();var process=__webpack_require__(11).process;var isNode=__webpack_require__(59)(process)=='process';$export($export.G,{asap:function asap(fn){var domain=isNode&&process.domain;microtask(domain?domain.bind(fn):fn);}});}),(function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(0);var global=__webpack_require__(11);var core=__webpack_require__(57);var microtask=__webpack_require__(205)();var OBSERVABLE=__webpack_require__(19)('observable');var aFunction=__webpack_require__(42);var anObject=__webpack_require__(8);var anInstance=__webpack_require__(99);var redefineAll=__webpack_require__(101);var hide=__webpack_require__(48);var forOf=__webpack_require__(100);var RETURN=forOf.RETURN;var getMethod=function(fn){return fn==null?undefined:aFunction(fn);};var cleanupSubscription=function(subscription){var cleanup=subscription._c;if(cleanup){subscription._c=undefined;cleanup();}};var subscriptionClosed=function(subscription){return subscription._o===undefined;};var closeSubscription=function(subscription){if(!subscriptionClosed(subscription)){subscription._o=undefined;cleanupSubscription(subscription);}};var Subscription=function(observer,subscriber){anObject(observer);this._c=undefined;this._o=observer;observer=new SubscriptionObserver(this);try{var cleanup=subscriber(observer);var subscription=cleanup;if(cleanup!=null){if(typeof cleanup.unsubscribe==='function')cleanup=function(){subscription.unsubscribe();};else aFunction(cleanup);this._c=cleanup;}}catch(e){observer.error(e);return;}if(subscriptionClosed(this))cleanupSubscription(this);};Subscription.prototype=redefineAll({},{unsubscribe:function unsubscribe(){closeSubscription(this);}});var SubscriptionObserver=function(subscription){this._s=subscription;};SubscriptionObserver.prototype=redefineAll({},{next:function next(value){var subscription=this._s;if(!subscriptionClosed(subscription)){var observer=subscription._o;try{var m=getMethod(observer.next);if(m)return m.call(observer,value);}catch(e){try{closeSubscription(subscription);}finally{throw e;}}}},error:function error(value){var subscription=this._s;if(subscriptionClosed(subscription))throw value;var observer=subscription._o;subscription._o=undefined;try{var m=getMethod(observer.error);if(!m)throw value;value=m.call(observer,value);}catch(e){try{cleanupSubscription(subscription);}finally{throw e;}}cleanupSubscription(subscription);return value;},complete:function complete(value){var subscription=this._s;if(!subscriptionClosed(subscription)){var observer=subscription._o;subscription._o=undefined;try{var m=getMethod(observer.complete);value=m?m.call(observer,value):undefined;}catch(e){try{cleanupSubscription(subscription);}finally{throw e;}}cleanupSubscription(subscription);return value;}}});var $Observable=function Observable(subscriber){anInstance(this,$Observable,'Observable','_f')._f=aFunction(subscriber);};redefineAll($Observable.prototype,{subscribe:function subscribe(observer){return new Subscription(observer,this._f);},forEach:function forEach(fn){var that=this;return new(core.Promise||global.Promise)(function(resolve,reject){aFunction(fn);var subscription=that.subscribe({next:function(value){try{return fn(value);}catch(e){reject(e);subscription.unsubscribe();}},error:reject,complete:resolve});});}});redefineAll($Observable,{from:function from(x){var C=typeof this==='function'?this:$Observable;var method=getMethod(anObject(x)[OBSERVABLE]);if(method){var observable=anObject(method.call(x));return observable.constructor===C?observable:new C(function(observer){return observable.subscribe(observer);});}
return new C(function(observer){var done=false;microtask(function(){if(!done){try{if(forOf(x,false,function(it){observer.next(it);if(done)return RETURN;})===RETURN)return;}catch(e){if(done)throw e;observer.error(e);return;}observer.complete();}});return function(){done=true;};});},of:function of(){for(var i=0,l=arguments.length,items=new Array(l);i<l;)items[i]=arguments[i++];return new(typeof this==='function'?this:$Observable)(function(observer){var done=false;microtask(function(){if(!done){for(var j=0;j<items.length;++j){observer.next(items[j]);if(done)return;}observer.complete();}});return function(){done=true;};});}});hide($Observable.prototype,OBSERVABLE,function(){return this;});$export($export.G,{Observable:$Observable});__webpack_require__(98)('Observable');}),(function(module,exports,__webpack_require__){var global=__webpack_require__(11);var $export=__webpack_require__(0);var userAgent=__webpack_require__(155);var slice=[].slice;var MSIE=/MSIE .\./.test(userAgent);var wrap=function(set){return function(fn,time){var boundArgs=arguments.length>2;var args=boundArgs?slice.call(arguments,2):false;return set(boundArgs?function(){(typeof fn=='function'?fn:Function(fn)).apply(this,args);}:fn,time);};};$export($export.G+$export.B+$export.F*MSIE,{setTimeout:wrap(global.setTimeout),setInterval:wrap(global.setInterval)});}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var $task=__webpack_require__(204);$export($export.G+$export.B,{setImmediate:$task.set,clearImmediate:$task.clear});}),(function(module,exports,__webpack_require__){var $iterators=__webpack_require__(201);var getKeys=__webpack_require__(94);var redefine=__webpack_require__(49);var global=__webpack_require__(11);var hide=__webpack_require__(48);var Iterators=__webpack_require__(112);var wks=__webpack_require__(19);var ITERATOR=wks('iterator');var TO_STRING_TAG=wks('toStringTag');var ArrayValues=Iterators.Array;var DOMIterables={CSSRuleList:true,CSSStyleDeclaration:false,CSSValueList:false,ClientRectList:false,DOMRectList:false,DOMStringList:false,DOMTokenList:true,DataTransferItemList:false,FileList:false,HTMLAllCollection:false,HTMLCollection:false,HTMLFormElement:false,HTMLSelectElement:false,MediaList:true,MimeTypeArray:false,NamedNodeMap:false,NodeList:true,PaintRequestList:false,Plugin:false,PluginArray:false,SVGLengthList:false,SVGNumberList:false,SVGPathSegList:false,SVGPointList:false,SVGStringList:false,SVGTransformList:false,SourceBufferList:false,StyleSheetList:true,TextTrackCueList:false,TextTrackList:false,TouchList:false};for(var collections=getKeys(DOMIterables),i=0;i<collections.length;i++){var NAME=collections[i];var explicit=DOMIterables[NAME];var Collection=global[NAME];var proto=Collection&&Collection.prototype;var key;if(proto){if(!proto[ITERATOR])hide(proto,ITERATOR,ArrayValues);if(!proto[TO_STRING_TAG])hide(proto,TO_STRING_TAG,NAME);Iterators[NAME]=ArrayValues;if(explicit)for(key in $iterators)if(!proto[key])redefine(proto,key,$iterators[key],true);}}}),(function(module,exports,__webpack_require__){(function(global){!(function(global){"use strict";var Op=Object.prototype;var hasOwn=Op.hasOwnProperty;var undefined;var $Symbol=typeof Symbol==="function"?Symbol:{};var iteratorSymbol=$Symbol.iterator||"@@iterator";var asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator";var toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";var inModule=typeof module==="object";var runtime=global.regeneratorRuntime;if(runtime){if(inModule){module.exports=runtime;}
return;}
runtime=global.regeneratorRuntime=inModule?module.exports:{};function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator;var generator=Object.create(protoGenerator.prototype);var context=new Context(tryLocsList||[]);generator._invoke=makeInvokeMethod(innerFn,self,context);return generator;}
runtime.wrap=wrap;function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)};}catch(err){return{type:"throw",arg:err};}}
var GenStateSuspendedStart="suspendedStart";var GenStateSuspendedYield="suspendedYield";var GenStateExecuting="executing";var GenStateCompleted="completed";var ContinueSentinel={};function Generator(){}
function GeneratorFunction(){}
function GeneratorFunctionPrototype(){}
var IteratorPrototype={};IteratorPrototype[iteratorSymbol]=function(){return this;};var getProto=Object.getPrototypeOf;var NativeIteratorPrototype=getProto&&getProto(getProto(values([])));if(NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)){IteratorPrototype=NativeIteratorPrototype;}
var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype;GeneratorFunctionPrototype.constructor=GeneratorFunction;GeneratorFunctionPrototype[toStringTagSymbol]=GeneratorFunction.displayName="GeneratorFunction";function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){prototype[method]=function(arg){return this._invoke(method,arg);};});}
runtime.isGeneratorFunction=function(genFun){var ctor=typeof genFun==="function"&&genFun.constructor;return ctor?ctor===GeneratorFunction||(ctor.displayName||ctor.name)==="GeneratorFunction":false;};runtime.mark=function(genFun){if(Object.setPrototypeOf){Object.setPrototypeOf(genFun,GeneratorFunctionPrototype);}else{genFun.__proto__=GeneratorFunctionPrototype;if(!(toStringTagSymbol in genFun)){genFun[toStringTagSymbol]="GeneratorFunction";}}
genFun.prototype=Object.create(Gp);return genFun;};runtime.awrap=function(arg){return{__await:arg};};function AsyncIterator(generator){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if(record.type==="throw"){reject(record.arg);}else{var result=record.arg;var value=result.value;if(value&&typeof value==="object"&&hasOwn.call(value,"__await")){return Promise.resolve(value.__await).then(function(value){invoke("next",value,resolve,reject);},function(err){invoke("throw",err,resolve,reject);});}
return Promise.resolve(value).then(function(unwrapped){result.value=unwrapped;resolve(result);},reject);}}
if(typeof global.process==="object"&&global.process.domain){invoke=global.process.domain.bind(invoke);}
var previousPromise;function enqueue(method,arg){function callInvokeWithMethodAndArg(){return new Promise(function(resolve,reject){invoke(method,arg,resolve,reject);});}
return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}
this._invoke=enqueue;}
defineIteratorMethods(AsyncIterator.prototype);AsyncIterator.prototype[asyncIteratorSymbol]=function(){return this;};runtime.AsyncIterator=AsyncIterator;runtime.async=function(innerFn,outerFn,self,tryLocsList){var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList));return runtime.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next();});};function makeInvokeMethod(innerFn,self,context){var state=GenStateSuspendedStart;return function invoke(method,arg){if(state===GenStateExecuting){throw new Error("Generator is already running");}
if(state===GenStateCompleted){if(method==="throw"){throw arg;}
return doneResult();}
context.method=method;context.arg=arg;while(true){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult;}}
if(context.method==="next"){context.sent=context._sent=context.arg;}else if(context.method==="throw"){if(state===GenStateSuspendedStart){state=GenStateCompleted;throw context.arg;}
context.dispatchException(context.arg);}else if(context.method==="return"){context.abrupt("return",context.arg);}
state=GenStateExecuting;var record=tryCatch(innerFn,self,context);if(record.type==="normal"){state=context.done?GenStateCompleted:GenStateSuspendedYield;if(record.arg===ContinueSentinel){continue;}
return{value:record.arg,done:context.done};}else if(record.type==="throw"){state=GenStateCompleted;context.method="throw";context.arg=record.arg;}}};}
function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(method===undefined){context.delegate=null;if(context.method==="throw"){if(delegate.iterator.return){context.method="return";context.arg=undefined;maybeInvokeDelegate(delegate,context);if(context.method==="throw"){return ContinueSentinel;}}
context.method="throw";context.arg=new TypeError("The iterator does not provide a 'throw' method");}
return ContinueSentinel;}
var record=tryCatch(method,delegate.iterator,context.arg);if(record.type==="throw"){context.method="throw";context.arg=record.arg;context.delegate=null;return ContinueSentinel;}
var info=record.arg;if(!info){context.method="throw";context.arg=new TypeError("iterator result is not an object");context.delegate=null;return ContinueSentinel;}
if(info.done){context[delegate.resultName]=info.value;context.next=delegate.nextLoc;if(context.method!=="return"){context.method="next";context.arg=undefined;}}else{return info;}
context.delegate=null;return ContinueSentinel;}
defineIteratorMethods(Gp);Gp[toStringTagSymbol]="Generator";Gp[iteratorSymbol]=function(){return this;};Gp.toString=function(){return "[object Generator]";};function pushTryEntry(locs){var entry={tryLoc:locs[0]};if(1 in locs){entry.catchLoc=locs[1];}
if(2 in locs){entry.finallyLoc=locs[2];entry.afterLoc=locs[3];}
this.tryEntries.push(entry);}
function resetTryEntry(entry){var record=entry.completion||{};record.type="normal";delete record.arg;entry.completion=record;}
function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}];tryLocsList.forEach(pushTryEntry,this);this.reset(true);}
runtime.keys=function(object){var keys=[];for(var key in object){keys.push(key);}
keys.reverse();return function next(){while(keys.length){var key=keys.pop();if(key in object){next.value=key;next.done=false;return next;}}
next.done=true;return next;};};function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod){return iteratorMethod.call(iterable);}
if(typeof iterable.next==="function"){return iterable;}
if(!isNaN(iterable.length)){var i=-1,next=function next(){while(++i<iterable.length){if(hasOwn.call(iterable,i)){next.value=iterable[i];next.done=false;return next;}}
next.value=undefined;next.done=true;return next;};return next.next=next;}}
return{next:doneResult};}
runtime.values=values;function doneResult(){return{value:undefined,done:true};}
Context.prototype={constructor:Context,reset:function(skipTempReset){this.prev=0;this.next=0;this.sent=this._sent=undefined;this.done=false;this.delegate=null;this.method="next";this.arg=undefined;this.tryEntries.forEach(resetTryEntry);if(!skipTempReset){for(var name in this){if(name.charAt(0)==="t"&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))){this[name]=undefined;}}}},stop:function(){this.done=true;var rootEntry=this.tryEntries[0];var rootRecord=rootEntry.completion;if(rootRecord.type==="throw"){throw rootRecord.arg;}
return this.rval;},dispatchException:function(exception){if(this.done){throw exception;}
var context=this;function handle(loc,caught){record.type="throw";record.arg=exception;context.next=loc;if(caught){context.method="next";context.arg=undefined;}
return!!caught;}
for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];var record=entry.completion;if(entry.tryLoc==="root"){return handle("end");}
if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc");var hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true);}else if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc);}}else if(hasCatch){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true);}}else if(hasFinally){if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc);}}else{throw new Error("try statement without catch or finally");}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break;}}
if(finallyEntry&&(type==="break"||type==="continue")&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc){finallyEntry=null;}
var record=finallyEntry?finallyEntry.completion:{};record.type=type;record.arg=arg;if(finallyEntry){this.method="next";this.next=finallyEntry.finallyLoc;return ContinueSentinel;}
return this.complete(record);},complete:function(record,afterLoc){if(record.type==="throw"){throw record.arg;}
if(record.type==="break"||record.type==="continue"){this.next=record.arg;}else if(record.type==="return"){this.rval=this.arg=record.arg;this.method="return";this.next="end";}else if(record.type==="normal"&&afterLoc){this.next=afterLoc;}
return ContinueSentinel;},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc){this.complete(entry.completion,entry.afterLoc);resetTryEntry(entry);return ContinueSentinel;}}},"catch":function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if(record.type==="throw"){var thrown=record.arg;resetTryEntry(entry);}
return thrown;}}
throw new Error("illegal catch attempt");},delegateYield:function(iterable,resultName,nextLoc){this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc};if(this.method==="next"){this.arg=undefined;}
return ContinueSentinel;}};})(typeof global==="object"?global:typeof window==="object"?window:typeof self==="object"?self:this);}.call(exports,__webpack_require__(10)))}),(function(module,exports,__webpack_require__){__webpack_require__(637);module.exports=__webpack_require__(57).RegExp.escape;}),(function(module,exports,__webpack_require__){var $export=__webpack_require__(0);var $re=__webpack_require__(638)(/[\\^$*+?.()|[\]{}]/g,'\\$&');$export($export.S,'RegExp',{escape:function escape(it){return $re(it);}});}),(function(module,exports){module.exports=function(regExp,replace){var replacer=replace===Object(replace)?function(part){return replace[part];}:replace;return function(it){return String(it).replace(regExp,replacer);};};}),(function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:true});var __WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_1_node_Node__=__webpack_require__(1072);var __WEBPACK_IMPORTED_MODULE_2_applications_Applications__=__webpack_require__(1077);var __WEBPACK_IMPORTED_MODULE_3_common_events_Status_Events__=__webpack_require__(12);__webpack_exports__["default"]=({Node:__WEBPACK_IMPORTED_MODULE_1_node_Node__["a"],Blockchain:__WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__["a"],StatusEvents:__WEBPACK_IMPORTED_MODULE_3_common_events_Status_Events__["a"],Applications:__WEBPACK_IMPORTED_MODULE_2_applications_Applications__["a"],});}),(function(module,exports,__webpack_require__){"use strict";exports.byteLength=byteLength
exports.toByteArray=toByteArray
exports.fromByteArray=fromByteArray
var lookup=[]
var revLookup=[]
var Arr=typeof Uint8Array!=='undefined'?Uint8Array:Array
var code='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
for(var i=0,len=code.length;i<len;++i){lookup[i]=code[i]
revLookup[code.charCodeAt(i)]=i}
revLookup['-'.charCodeAt(0)]=62
revLookup['_'.charCodeAt(0)]=63
function getLens(b64){var len=b64.length
if(len%4>0){throw new Error('Invalid string. Length must be a multiple of 4')}
var validLen=b64.indexOf('=')
if(validLen===-1)validLen=len
var placeHoldersLen=validLen===len?0:4-(validLen%4)
return[validLen,placeHoldersLen]}
function byteLength(b64){var lens=getLens(b64)
var validLen=lens[0]
var placeHoldersLen=lens[1]
return((validLen+placeHoldersLen)*3/4)-placeHoldersLen}
function _byteLength(b64,validLen,placeHoldersLen){return((validLen+placeHoldersLen)*3/4)-placeHoldersLen}
function toByteArray(b64){var tmp
var lens=getLens(b64)
var validLen=lens[0]
var placeHoldersLen=lens[1]
var arr=new Arr(_byteLength(b64,validLen,placeHoldersLen))
var curByte=0
var len=placeHoldersLen>0?validLen-4:validLen
for(var i=0;i<len;i+=4){tmp=(revLookup[b64.charCodeAt(i)]<<18)|(revLookup[b64.charCodeAt(i+1)]<<12)|(revLookup[b64.charCodeAt(i+2)]<<6)|revLookup[b64.charCodeAt(i+3)]
arr[curByte++]=(tmp>>16)&0xFF
arr[curByte++]=(tmp>>8)&0xFF
arr[curByte++]=tmp&0xFF}
if(placeHoldersLen===2){tmp=(revLookup[b64.charCodeAt(i)]<<2)|(revLookup[b64.charCodeAt(i+1)]>>4)
arr[curByte++]=tmp&0xFF}
if(placeHoldersLen===1){tmp=(revLookup[b64.charCodeAt(i)]<<10)|(revLookup[b64.charCodeAt(i+1)]<<4)|(revLookup[b64.charCodeAt(i+2)]>>2)
arr[curByte++]=(tmp>>8)&0xFF
arr[curByte++]=tmp&0xFF}
return arr}
function tripletToBase64(num){return lookup[num>>18&0x3F]+
lookup[num>>12&0x3F]+
lookup[num>>6&0x3F]+
lookup[num&0x3F]}
function encodeChunk(uint8,start,end){var tmp
var output=[]
for(var i=start;i<end;i+=3){tmp=((uint8[i]<<16)&0xFF0000)+
((uint8[i+1]<<8)&0xFF00)+
(uint8[i+2]&0xFF)
output.push(tripletToBase64(tmp))}
return output.join('')}
function fromByteArray(uint8){var tmp
var len=uint8.length
var extraBytes=len%3
var parts=[]
var maxChunkLength=16383
for(var i=0,len2=len-extraBytes;i<len2;i+=maxChunkLength){parts.push(encodeChunk(uint8,i,(i+maxChunkLength)>len2?len2:(i+maxChunkLength)))}
if(extraBytes===1){tmp=uint8[len-1]
parts.push(lookup[tmp>>2]+
lookup[(tmp<<4)&0x3F]+
'==')}else if(extraBytes===2){tmp=(uint8[len-2]<<8)+uint8[len-1]
parts.push(lookup[tmp>>10]+
lookup[(tmp>>4)&0x3F]+
lookup[(tmp<<2)&0x3F]+
'=')}
return parts.join('')}}),(function(module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m
var eLen=(nBytes*8)-mLen-1
var eMax=(1<<eLen)-1
var eBias=eMax>>1
var nBits=-7
var i=isLE?(nBytes-1):0
var d=isLE?-1:1
var s=buffer[offset+i]
i+=d
e=s&((1<<(-nBits))-1)
s>>=(-nBits)
nBits+=eLen
for(;nBits>0;e=(e*256)+buffer[offset+i],i+=d,nBits-=8){}
m=e&((1<<(-nBits))-1)
e>>=(-nBits)
nBits+=mLen
for(;nBits>0;m=(m*256)+buffer[offset+i],i+=d,nBits-=8){}
if(e===0){e=1-eBias}else if(e===eMax){return m?NaN:((s?-1:1)*Infinity)}else{m=m+Math.pow(2,mLen)
e=e-eBias}
return(s?-1:1)*m*Math.pow(2,e-mLen)}
exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c
var eLen=(nBytes*8)-mLen-1
var eMax=(1<<eLen)-1
var eBias=eMax>>1
var rt=(mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0)
var i=isLE?0:(nBytes-1)
var d=isLE?1:-1
var s=value<0||(value===0&&1/value<0)?1:0
value=Math.abs(value)
if(isNaN(value)||value===Infinity){m=isNaN(value)?1:0
e=eMax}else{e=Math.floor(Math.log(value)/Math.LN2)
if(value*(c=Math.pow(2,-e))<1){e--
c*=2}
if(e+eBias>=1){value+=rt/c}else{value+=rt*Math.pow(2,1-eBias)}
if(value*c>=2){e++
c/=2}
if(e+eBias>=eMax){m=0
e=eMax}else if(e+eBias>=1){m=((value*c)-1)*Math.pow(2,mLen)
e=e+eBias}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen)
e=0}}
for(;mLen>=8;buffer[offset+i]=m&0xff,i+=d,m/=256,mLen-=8){}
e=(e<<mLen)|m
eLen+=mLen
for(;eLen>0;buffer[offset+i]=e&0xff,i+=d,e/=256,eLen-=8){}
buffer[offset+i-d]|=s*128}}),(function(module,exports,__webpack_require__){var rng=__webpack_require__(307);var bytesToUuid=__webpack_require__(308);var _nodeId;var _clockseq;var _lastMSecs=0;var _lastNSecs=0;function v1(options,buf,offset){var i=buf&&offset||0;var b=buf||[];options=options||{};var node=options.node||_nodeId;var clockseq=options.clockseq!==undefined?options.clockseq:_clockseq;if(node==null||clockseq==null){var seedBytes=rng();if(node==null){node=_nodeId=[seedBytes[0]|0x01,seedBytes[1],seedBytes[2],seedBytes[3],seedBytes[4],seedBytes[5]];}
if(clockseq==null){clockseq=_clockseq=(seedBytes[6]<<8|seedBytes[7])&0x3fff;}}
var msecs=options.msecs!==undefined?options.msecs:new Date().getTime();var nsecs=options.nsecs!==undefined?options.nsecs:_lastNSecs+1;var dt=(msecs-_lastMSecs)+(nsecs-_lastNSecs)/10000;if(dt<0&&options.clockseq===undefined){clockseq=clockseq+1&0x3fff;}
if((dt<0||msecs>_lastMSecs)&&options.nsecs===undefined){nsecs=0;}
if(nsecs>=10000){throw new Error('uuid.v1(): Can\'t create more than 10M uuids/sec');}
_lastMSecs=msecs;_lastNSecs=nsecs;_clockseq=clockseq;msecs+=12219292800000;var tl=((msecs&0xfffffff)*10000+nsecs)%0x100000000;b[i++]=tl>>>24&0xff;b[i++]=tl>>>16&0xff;b[i++]=tl>>>8&0xff;b[i++]=tl&0xff;var tmh=(msecs/0x100000000*10000)&0xfffffff;b[i++]=tmh>>>8&0xff;b[i++]=tmh&0xff;b[i++]=tmh>>>24&0xf|0x10;b[i++]=tmh>>>16&0xff;b[i++]=clockseq>>>8|0x80;b[i++]=clockseq&0xff;for(var n=0;n<6;++n){b[i+n]=node[n];}
return buf?buf:bytesToUuid(b);}
module.exports=v1;}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__=__webpack_require__(17);var __WEBPACK_IMPORTED_MODULE_1_common_blockchain_mini_blockchain_Mini_Blockchain_Address__=__webpack_require__(741);var __WEBPACK_IMPORTED_MODULE_2_common_satoshmindb_Interface_SatoshminDB__=__webpack_require__(69);var __WEBPACK_IMPORTED_MODULE_3_common_crypto_WebDollar_Crypto_Data__=__webpack_require__(106);var __WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_5_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_6_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_7_common_events_Status_Events__=__webpack_require__(12);var __WEBPACK_IMPORTED_MODULE_8_common_crypto_WebDollar_Crypto__=__webpack_require__(28);var __WEBPACK_IMPORTED_MODULE_9_node_menu_Advanced_Messages__=__webpack_require__(86);var __WEBPACK_IMPORTED_MODULE_10__Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_11_common_blockchain_interface_blockchain_agents_Nano_Nano_Wallet_Protocol__=__webpack_require__(358);var __WEBPACK_IMPORTED_MODULE_12_common_utils_Advanced_Emitter__=__webpack_require__(70);const FileSystem=__webpack_require__(62);class MainBlockchainWallet{constructor(blockchain,db){this.blockchain=blockchain;this.walletFileName='wallet.bin';if(db===undefined)
this.db=new __WEBPACK_IMPORTED_MODULE_2_common_satoshmindb_Interface_SatoshminDB__["a"](__WEBPACK_IMPORTED_MODULE_6_consts_const_global__["a"].DATABASE_NAMES.WALLET_DATABASE);else
this.db=db;this.addresses=[];this.emitter=new __WEBPACK_IMPORTED_MODULE_12_common_utils_Advanced_Emitter__["a"](100);__WEBPACK_IMPORTED_MODULE_11_common_blockchain_interface_blockchain_agents_Nano_Nano_Wallet_Protocol__["a"].initializeNanoProtocolWallet(this);}
async _justCreateNewAddress(salt,emptyAddress){let blockchainAddress=new __WEBPACK_IMPORTED_MODULE_1_common_blockchain_mini_blockchain_Mini_Blockchain_Address__["a"](this.db);if(!emptyAddress)
await blockchainAddress.createNewAddress(salt);return blockchainAddress;}
async createNewAddress(salt){let blockchainAddress=await this._justCreateNewAddress(salt,false);if(!(await this._insertAddress(blockchainAddress)))
throw{message:"Address already exists"};return blockchainAddress;}
async createNewAddressPrivateKey(salt){let blockchainAddress=await this._justCreateNewAddress(salt,false);if(!(await this._insertAddress(blockchainAddress)))
throw{message:"Address already exists"};return blockchainAddress;}
async _insertAddress(blockchainAddress){let answer=this.getAddress(blockchainAddress);if(answer!==null)
return false;this.addresses.push(blockchainAddress);this.emitter.emit('wallet/address-changes',blockchainAddress.address);await this.saveWallet();return true;}
getUnencodedAddress(address){if(Buffer.isBuffer(address))
address=__WEBPACK_IMPORTED_MODULE_5_common_utils_BufferExtended__["a"].toBase(address);return this.getAddress(address).unencodedAddress;}
async serialize(serializePrivateKey=false){let list=[__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].serializeNumber4Bytes(this.addresses.length)];for(let i=0;i<this.addresses.length;++i){let walletBuffer=await this.addresses[i].serializeAddress(serializePrivateKey);list.push(walletBuffer);}
return Buffer.concat(list);}
async deserialize(buffer,deserializePrivateKey=false){let data=__WEBPACK_IMPORTED_MODULE_3_common_crypto_WebDollar_Crypto_Data__["a"].createWebDollarCryptoData(buffer).buffer;let offset=0;try{let numAddresses=__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].deserializeNumber4Bytes(data,offset,);offset+=4;this.addresses=[];for(let i=0;i<numAddresses;++i){this.addresses[i]=await this._justCreateNewAddress(undefined,true);offset+=await this.addresses[i].deserializeAddress(__WEBPACK_IMPORTED_MODULE_5_common_utils_BufferExtended__["a"].substr(buffer,offset),deserializePrivateKey);}
return true;}catch(exception){console.error("Error deserializing a Wallet. ",exception);throw exception;}}
async saveWallet(){let value=await this.serialize();return(await this.db.save(this.walletFileName,value));}
async loadAddresses(){let timeout=setTimeout(()=>{__WEBPACK_IMPORTED_MODULE_7_common_events_Status_Events__["a"].emit("validation/status",{type:"WALLET",message:"Wallet is not loaded successfully"});setTimeout(()=>{if(true)
location.reload();else
process.exit(1);},10*1000);},20*1000);let buffer=await this.db.get(this.walletFileName,100000,20,true);clearTimeout(timeout);if(!buffer)
return false;try{await this.deserialize(buffer);}catch(exception){__WEBPACK_IMPORTED_MODULE_9_node_menu_Advanced_Messages__["a"].alert('Wallet was not imported successfully',"Wallet Error","error",5000);this.addresses=[];}
if(this.addresses.length>0)
this.emitter.emit('wallet/changes',this.addresses);return true;}
async removeAddresses(){let answer=await this.db.remove(this.walletFileName);this.addresses=[];this.addresses=[];this.emitter.emit('wallet/changes',this.addresses);return answer;}
getAddress(address,returnPos=false){if(typeof address==="object"&&address.hasOwnProperty("address"))
address=address.address;for(let i=0;i<this.addresses.length;i++){if(typeof address==="string"&&address===this.addresses[i].address)return returnPos?i:this.addresses[i];else if(Buffer.isBuffer(address)&&address.equals(this.addresses[i].unencodedAddress))return returnPos?i:this.addresses[i];else if(typeof address==="object"&&!Buffer.isBuffer(address)&&(this.addresses[i].address===address.address||this.addresses[i].unencodedAddress.equals(address.unencodedAddress)))return returnPos?i:this.addresses[i];}
return returnPos?-1:null;}
getAddressPic(address){if(Buffer.isBuffer(address))
address=__WEBPACK_IMPORTED_MODULE_5_common_utils_BufferExtended__["a"].toBase(address);address=__WEBPACK_IMPORTED_MODULE_8_common_crypto_WebDollar_Crypto__["a"].SHA256(address);return `https://www.gravatar.com/avatar/${address.toString("hex")}?d=retro&f=y`;}
async getFirstAddress(){if(this.addresses.length===0)
await this.createNewAddress();return this.addresses[0];}
async isAddressEncrypted(address){address=this.getAddress(address);if(!address)
throw{message:"address not found",address:address};return address.isPrivateKeyEncrypted();}
exportWallet(filePath){return new Promise(resolve=>{FileSystem.open(filePath,'w',async(err,fd)=>{if(err)
return resolve(false);let list=[__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].serializeNumber1Byte(this.addresses.length)];for(let i=0;i<this.addresses.length;++i){list.push(__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].serializeNumber1Byte(this.addresses[i].unencodedAddress.length));list.push(this.addresses[i].unencodedAddress);}
let buffer=Buffer.concat(list);FileSystem.write(fd,buffer,0,buffer.length,null,function(err){if(err)
return resolve(false);FileSystem.close(fd,function(){resolve(true);});});});});}
importWallet(filePath){return new Promise(resolve=>{let readStream=FileSystem.createReadStream(filePath);readStream.on('data',async(buffer)=>{let offset=0;let numAddresses=__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].deserializeNumber1Bytes(buffer,offset);offset+=1;for(let i=0;i<numAddresses;++i){let len=__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].deserializeNumber1Bytes(buffer,offset,);offset+=1;let blockchainAddress=await this._justCreateNewAddress();blockchainAddress.unencodedAddress=__WEBPACK_IMPORTED_MODULE_5_common_utils_BufferExtended__["a"].substr(buffer,offset,len);blockchainAddress.address=__WEBPACK_IMPORTED_MODULE_5_common_utils_BufferExtended__["a"].toBase(blockchainAddress.unencodedAddress);offset+=len;this.addresses.push(blockchainAddress);}
resolve(await this.saveWallet());});});}
async importAddressFromJSON(inputData){let blockchainAddress=new __WEBPACK_IMPORTED_MODULE_1_common_blockchain_mini_blockchain_Mini_Blockchain_Address__["a"](this.db);try{let address,publicKey;let privateKey=inputData;if(typeof inputData==="object"){if(!inputData.hasOwnProperty("version"))
throw{message:"address.version not specified",inputData:inputData};if(!inputData.hasOwnProperty("privateKey"))
throw{message:"address.privateKey not specified",inputData:inputData};if(inputData.version==="0.1"){privateKey=inputData.privateKey;}else{throw{message:"privateKey version is not good ",inputData:inputData.version};}
if(inputData.hasOwnProperty('address'))
address=inputData.address;if(inputData.hasOwnProperty('publicKey'))
publicKey=inputData.publicKey;}
if(typeof inputData==="string")
privateKey=Buffer.from(inputData,"hex");if(Buffer.isBuffer(inputData))
privateKey=new Buffer(inputData);if(typeof privateKey==="string")privateKey=Buffer.from(privateKey,"hex");if(typeof publicKey==="string")publicKey=Buffer.from(publicKey,"hex");if(address===undefined&&publicKey===undefined){await blockchainAddress.createNewAddress(undefined,privateKey);}else{blockchainAddress.publicKey=Buffer.from(publicKey,"hex");blockchainAddress.address=address;blockchainAddress.unencodedAddress=__WEBPACK_IMPORTED_MODULE_5_common_utils_BufferExtended__["a"].fromBase(blockchainAddress.address);try{await blockchainAddress.savePrivateKey(Buffer.from(privateKey,"hex"));}catch(err){return{result:false,message:"Address already exists!",address:blockchainAddress};}}
if(!(await this._insertAddress(blockchainAddress))){return{result:false,message:"Address already exists!",address:blockchainAddress};}
return{result:true,address:blockchainAddress.address,unencodedAddress:blockchainAddress.unencodedAddress,publicKey:blockchainAddress.publicKey,}}catch(exception){console.error("importAddressFromJSON raised an exception",exception);return{result:false,message:JSON.stringify(exception)};}}
async exportAddressToJSON(address){const nAddressIndex=this.getAddress(address,true);if(nAddressIndex===-1)
return{result:false,message:'Address was not found'};return{result:true,data:{version:__WEBPACK_IMPORTED_MODULE_6_consts_const_global__["a"].SETTINGS.PARAMS.WALLET.VERSION,address:this.addresses[nAddressIndex].address,publicKey:this.addresses[nAddressIndex].publicKey.toString("hex"),privateKey:(await this.addresses[nAddressIndex].exportAddressPrivateKeyToHex())}};}
async importAddressFromString(addressString){let blockchainAddress=await this._justCreateNewAddress();let unencodedAddress=__WEBPACK_IMPORTED_MODULE_5_common_utils_BufferExtended__["a"].fromBase(addressString,"hex");blockchainAddress.unencodedAddress=unencodedAddress;blockchainAddress.address=__WEBPACK_IMPORTED_MODULE_5_common_utils_BufferExtended__["a"].toBase(unencodedAddress);this.addresses.push(blockchainAddress);return blockchainAddress;}
async validatePassword(address,password){if(typeof address==="object"&&address.hasOwnProperty("address"))
address=address.address;address=this.getAddress(address);let privateKey=await address._getPrivateKey(password);try{if(__WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].validatePrivateKeyWIF(privateKey)){return true;}}catch(exception){return false;}
return false;}
async encryptAddress(address,newPassword,oldPassword=undefined){if(typeof address==="object"&&address.hasOwnProperty("address"))
address=address.address;address=this.getAddress(address);if(await this.isAddressEncrypted(address)&&oldPassword===undefined){oldPassword=await __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].askForPassword();if(!oldPassword)
return false;}
let privateKey=await address._getPrivateKey(oldPassword);try{if(__WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].validatePrivateKeyWIF(privateKey))
return(await address.savePrivateKey(privateKey,newPassword));}catch(exception){__WEBPACK_IMPORTED_MODULE_9_node_menu_Advanced_Messages__["a"].alert('Your old password is incorrect!',"Password Error","error",5000);return false;}}
async deleteAddress(address,bIsInteractive=true,password=null){if(typeof address==='object'&&address.hasOwnProperty('address'))
address=address.address;const index=this.getAddress(address,true);if(index===-1)
return{result:false,message:'Address was not found',address:address};if(await this.isAddressEncrypted(address)){if(bIsInteractive===false){if(!password){return{result:false,message:'Non-Interactive mode detected and a password was not provided'};}
address=this.getAddress(address);try{__WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].validatePrivateKeyWIF(await address._getPrivateKey(password));}
catch(exception){return{result:false,message:'Password is incorrect'};}}
else{for(let tries=3;tries>=1;--tries){await __WEBPACK_IMPORTED_MODULE_10__Blockchain__["a"].blockchain.sleep(100);let oldPassword=await __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].askForPassword(`Please enter your last password (12 words separated by space). ${tries} tries left:`);if(!oldPassword){if(tries===1){return{result:false,message:'Password is incorrect!'};}
continue;}
address=this.getAddress(address);let privateKey=await address._getPrivateKey(oldPassword);try{if(__WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].validatePrivateKeyWIF(privateKey))
break;}
catch(exception)
{__WEBPACK_IMPORTED_MODULE_9_node_menu_Advanced_Messages__["a"].alert('Your password is incorrect!','Password Error','error',5000);if(tries===1)
return{result:false,message:'Password is incorrect!'};}}}}
let ask=true;if(bIsInteractive)
ask=await __WEBPACK_IMPORTED_MODULE_9_node_menu_Advanced_Messages__["a"].confirm(`Are you sure you want to delete ${address}`);if(ask){let addressToDelete=this.addresses[index];this.addresses.splice(index,1);__WEBPACK_IMPORTED_MODULE_9_node_menu_Advanced_Messages__["a"].log("Address deleted "+addressToDelete,"Address deleted "+addressToDelete.toString());if(!this.blockchain.mining.minerAddress||__WEBPACK_IMPORTED_MODULE_5_common_utils_BufferExtended__["a"].safeCompare(this.blockchain.mining.unencodedMinerAddress,addressToDelete.unencodedAddress)){this.blockchain.mining.minerAddress=this.addresses.length>0?this.addresses[0].address:undefined;this.blockchain.mining.resetMining();}
await this.saveWallet();this.emitter.emit('wallet/changes',this.addresses);return{result:true,length:this.addresses.length};}
else{return{result:false,message:'Action canceled by user'};}}
async loadWallet(){__WEBPACK_IMPORTED_MODULE_7_common_events_Status_Events__["a"].emit('blockchain/status',{message:"Loading Wallet..."});try{let response=await this.loadAddresses();if(response===true)
__WEBPACK_IMPORTED_MODULE_7_common_events_Status_Events__["a"].emit('blockchain/status',{message:"Wallet Loaded Successfully"});if(response===false||this.addresses.length===0){console.error("create this.Wallet.createNewAddress");await this.createNewAddress();console.error("create this.Wallet.createNewAddress done");__WEBPACK_IMPORTED_MODULE_7_common_events_Status_Events__["a"].emit('blockchain/status',{message:"Wallet Creating New Wallet"});}}catch(exception){__WEBPACK_IMPORTED_MODULE_7_common_events_Status_Events__["a"].emit('validation/status',{message:"IndexedDB - Wallet couldn't be imported"});}}
hasAddress(address){return this.getAddress(address,true)!==-1;}}
__webpack_exports__["a"]=(MainBlockchainWallet);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){(function(nacl){'use strict';var gf=function(init){var i,r=new Float64Array(16);if(init)for(i=0;i<init.length;i++)r[i]=init[i];return r;};var randombytes=function(){throw new Error('no PRNG');};var _0=new Uint8Array(16);var _9=new Uint8Array(32);_9[0]=9;var gf0=gf(),gf1=gf([1]),_121665=gf([0xdb41,1]),D=gf([0x78a3,0x1359,0x4dca,0x75eb,0xd8ab,0x4141,0x0a4d,0x0070,0xe898,0x7779,0x4079,0x8cc7,0xfe73,0x2b6f,0x6cee,0x5203]),D2=gf([0xf159,0x26b2,0x9b94,0xebd6,0xb156,0x8283,0x149a,0x00e0,0xd130,0xeef3,0x80f2,0x198e,0xfce7,0x56df,0xd9dc,0x2406]),X=gf([0xd51a,0x8f25,0x2d60,0xc956,0xa7b2,0x9525,0xc760,0x692c,0xdc5c,0xfdd6,0xe231,0xc0a4,0x53fe,0xcd6e,0x36d3,0x2169]),Y=gf([0x6658,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666]),I=gf([0xa0b0,0x4a0e,0x1b27,0xc4ee,0xe478,0xad2f,0x1806,0x2f43,0xd7a7,0x3dfb,0x0099,0x2b4d,0xdf0b,0x4fc1,0x2480,0x2b83]);function ts64(x,i,h,l){x[i]=(h>>24)&0xff;x[i+1]=(h>>16)&0xff;x[i+2]=(h>>8)&0xff;x[i+3]=h&0xff;x[i+4]=(l>>24)&0xff;x[i+5]=(l>>16)&0xff;x[i+6]=(l>>8)&0xff;x[i+7]=l&0xff;}
function vn(x,xi,y,yi,n){var i,d=0;for(i=0;i<n;i++)d|=x[xi+i]^y[yi+i];return(1&((d-1)>>>8))-1;}
function crypto_verify_16(x,xi,y,yi){return vn(x,xi,y,yi,16);}
function crypto_verify_32(x,xi,y,yi){return vn(x,xi,y,yi,32);}
function core_salsa20(o,p,k,c){var j0=c[0]&0xff|(c[1]&0xff)<<8|(c[2]&0xff)<<16|(c[3]&0xff)<<24,j1=k[0]&0xff|(k[1]&0xff)<<8|(k[2]&0xff)<<16|(k[3]&0xff)<<24,j2=k[4]&0xff|(k[5]&0xff)<<8|(k[6]&0xff)<<16|(k[7]&0xff)<<24,j3=k[8]&0xff|(k[9]&0xff)<<8|(k[10]&0xff)<<16|(k[11]&0xff)<<24,j4=k[12]&0xff|(k[13]&0xff)<<8|(k[14]&0xff)<<16|(k[15]&0xff)<<24,j5=c[4]&0xff|(c[5]&0xff)<<8|(c[6]&0xff)<<16|(c[7]&0xff)<<24,j6=p[0]&0xff|(p[1]&0xff)<<8|(p[2]&0xff)<<16|(p[3]&0xff)<<24,j7=p[4]&0xff|(p[5]&0xff)<<8|(p[6]&0xff)<<16|(p[7]&0xff)<<24,j8=p[8]&0xff|(p[9]&0xff)<<8|(p[10]&0xff)<<16|(p[11]&0xff)<<24,j9=p[12]&0xff|(p[13]&0xff)<<8|(p[14]&0xff)<<16|(p[15]&0xff)<<24,j10=c[8]&0xff|(c[9]&0xff)<<8|(c[10]&0xff)<<16|(c[11]&0xff)<<24,j11=k[16]&0xff|(k[17]&0xff)<<8|(k[18]&0xff)<<16|(k[19]&0xff)<<24,j12=k[20]&0xff|(k[21]&0xff)<<8|(k[22]&0xff)<<16|(k[23]&0xff)<<24,j13=k[24]&0xff|(k[25]&0xff)<<8|(k[26]&0xff)<<16|(k[27]&0xff)<<24,j14=k[28]&0xff|(k[29]&0xff)<<8|(k[30]&0xff)<<16|(k[31]&0xff)<<24,j15=c[12]&0xff|(c[13]&0xff)<<8|(c[14]&0xff)<<16|(c[15]&0xff)<<24;var x0=j0,x1=j1,x2=j2,x3=j3,x4=j4,x5=j5,x6=j6,x7=j7,x8=j8,x9=j9,x10=j10,x11=j11,x12=j12,x13=j13,x14=j14,x15=j15,u;for(var i=0;i<20;i+=2){u=x0+x12|0;x4^=u<<7|u>>>(32-7);u=x4+x0|0;x8^=u<<9|u>>>(32-9);u=x8+x4|0;x12^=u<<13|u>>>(32-13);u=x12+x8|0;x0^=u<<18|u>>>(32-18);u=x5+x1|0;x9^=u<<7|u>>>(32-7);u=x9+x5|0;x13^=u<<9|u>>>(32-9);u=x13+x9|0;x1^=u<<13|u>>>(32-13);u=x1+x13|0;x5^=u<<18|u>>>(32-18);u=x10+x6|0;x14^=u<<7|u>>>(32-7);u=x14+x10|0;x2^=u<<9|u>>>(32-9);u=x2+x14|0;x6^=u<<13|u>>>(32-13);u=x6+x2|0;x10^=u<<18|u>>>(32-18);u=x15+x11|0;x3^=u<<7|u>>>(32-7);u=x3+x15|0;x7^=u<<9|u>>>(32-9);u=x7+x3|0;x11^=u<<13|u>>>(32-13);u=x11+x7|0;x15^=u<<18|u>>>(32-18);u=x0+x3|0;x1^=u<<7|u>>>(32-7);u=x1+x0|0;x2^=u<<9|u>>>(32-9);u=x2+x1|0;x3^=u<<13|u>>>(32-13);u=x3+x2|0;x0^=u<<18|u>>>(32-18);u=x5+x4|0;x6^=u<<7|u>>>(32-7);u=x6+x5|0;x7^=u<<9|u>>>(32-9);u=x7+x6|0;x4^=u<<13|u>>>(32-13);u=x4+x7|0;x5^=u<<18|u>>>(32-18);u=x10+x9|0;x11^=u<<7|u>>>(32-7);u=x11+x10|0;x8^=u<<9|u>>>(32-9);u=x8+x11|0;x9^=u<<13|u>>>(32-13);u=x9+x8|0;x10^=u<<18|u>>>(32-18);u=x15+x14|0;x12^=u<<7|u>>>(32-7);u=x12+x15|0;x13^=u<<9|u>>>(32-9);u=x13+x12|0;x14^=u<<13|u>>>(32-13);u=x14+x13|0;x15^=u<<18|u>>>(32-18);}
x0=x0+j0|0;x1=x1+j1|0;x2=x2+j2|0;x3=x3+j3|0;x4=x4+j4|0;x5=x5+j5|0;x6=x6+j6|0;x7=x7+j7|0;x8=x8+j8|0;x9=x9+j9|0;x10=x10+j10|0;x11=x11+j11|0;x12=x12+j12|0;x13=x13+j13|0;x14=x14+j14|0;x15=x15+j15|0;o[0]=x0>>>0&0xff;o[1]=x0>>>8&0xff;o[2]=x0>>>16&0xff;o[3]=x0>>>24&0xff;o[4]=x1>>>0&0xff;o[5]=x1>>>8&0xff;o[6]=x1>>>16&0xff;o[7]=x1>>>24&0xff;o[8]=x2>>>0&0xff;o[9]=x2>>>8&0xff;o[10]=x2>>>16&0xff;o[11]=x2>>>24&0xff;o[12]=x3>>>0&0xff;o[13]=x3>>>8&0xff;o[14]=x3>>>16&0xff;o[15]=x3>>>24&0xff;o[16]=x4>>>0&0xff;o[17]=x4>>>8&0xff;o[18]=x4>>>16&0xff;o[19]=x4>>>24&0xff;o[20]=x5>>>0&0xff;o[21]=x5>>>8&0xff;o[22]=x5>>>16&0xff;o[23]=x5>>>24&0xff;o[24]=x6>>>0&0xff;o[25]=x6>>>8&0xff;o[26]=x6>>>16&0xff;o[27]=x6>>>24&0xff;o[28]=x7>>>0&0xff;o[29]=x7>>>8&0xff;o[30]=x7>>>16&0xff;o[31]=x7>>>24&0xff;o[32]=x8>>>0&0xff;o[33]=x8>>>8&0xff;o[34]=x8>>>16&0xff;o[35]=x8>>>24&0xff;o[36]=x9>>>0&0xff;o[37]=x9>>>8&0xff;o[38]=x9>>>16&0xff;o[39]=x9>>>24&0xff;o[40]=x10>>>0&0xff;o[41]=x10>>>8&0xff;o[42]=x10>>>16&0xff;o[43]=x10>>>24&0xff;o[44]=x11>>>0&0xff;o[45]=x11>>>8&0xff;o[46]=x11>>>16&0xff;o[47]=x11>>>24&0xff;o[48]=x12>>>0&0xff;o[49]=x12>>>8&0xff;o[50]=x12>>>16&0xff;o[51]=x12>>>24&0xff;o[52]=x13>>>0&0xff;o[53]=x13>>>8&0xff;o[54]=x13>>>16&0xff;o[55]=x13>>>24&0xff;o[56]=x14>>>0&0xff;o[57]=x14>>>8&0xff;o[58]=x14>>>16&0xff;o[59]=x14>>>24&0xff;o[60]=x15>>>0&0xff;o[61]=x15>>>8&0xff;o[62]=x15>>>16&0xff;o[63]=x15>>>24&0xff;}
function core_hsalsa20(o,p,k,c){var j0=c[0]&0xff|(c[1]&0xff)<<8|(c[2]&0xff)<<16|(c[3]&0xff)<<24,j1=k[0]&0xff|(k[1]&0xff)<<8|(k[2]&0xff)<<16|(k[3]&0xff)<<24,j2=k[4]&0xff|(k[5]&0xff)<<8|(k[6]&0xff)<<16|(k[7]&0xff)<<24,j3=k[8]&0xff|(k[9]&0xff)<<8|(k[10]&0xff)<<16|(k[11]&0xff)<<24,j4=k[12]&0xff|(k[13]&0xff)<<8|(k[14]&0xff)<<16|(k[15]&0xff)<<24,j5=c[4]&0xff|(c[5]&0xff)<<8|(c[6]&0xff)<<16|(c[7]&0xff)<<24,j6=p[0]&0xff|(p[1]&0xff)<<8|(p[2]&0xff)<<16|(p[3]&0xff)<<24,j7=p[4]&0xff|(p[5]&0xff)<<8|(p[6]&0xff)<<16|(p[7]&0xff)<<24,j8=p[8]&0xff|(p[9]&0xff)<<8|(p[10]&0xff)<<16|(p[11]&0xff)<<24,j9=p[12]&0xff|(p[13]&0xff)<<8|(p[14]&0xff)<<16|(p[15]&0xff)<<24,j10=c[8]&0xff|(c[9]&0xff)<<8|(c[10]&0xff)<<16|(c[11]&0xff)<<24,j11=k[16]&0xff|(k[17]&0xff)<<8|(k[18]&0xff)<<16|(k[19]&0xff)<<24,j12=k[20]&0xff|(k[21]&0xff)<<8|(k[22]&0xff)<<16|(k[23]&0xff)<<24,j13=k[24]&0xff|(k[25]&0xff)<<8|(k[26]&0xff)<<16|(k[27]&0xff)<<24,j14=k[28]&0xff|(k[29]&0xff)<<8|(k[30]&0xff)<<16|(k[31]&0xff)<<24,j15=c[12]&0xff|(c[13]&0xff)<<8|(c[14]&0xff)<<16|(c[15]&0xff)<<24;var x0=j0,x1=j1,x2=j2,x3=j3,x4=j4,x5=j5,x6=j6,x7=j7,x8=j8,x9=j9,x10=j10,x11=j11,x12=j12,x13=j13,x14=j14,x15=j15,u;for(var i=0;i<20;i+=2){u=x0+x12|0;x4^=u<<7|u>>>(32-7);u=x4+x0|0;x8^=u<<9|u>>>(32-9);u=x8+x4|0;x12^=u<<13|u>>>(32-13);u=x12+x8|0;x0^=u<<18|u>>>(32-18);u=x5+x1|0;x9^=u<<7|u>>>(32-7);u=x9+x5|0;x13^=u<<9|u>>>(32-9);u=x13+x9|0;x1^=u<<13|u>>>(32-13);u=x1+x13|0;x5^=u<<18|u>>>(32-18);u=x10+x6|0;x14^=u<<7|u>>>(32-7);u=x14+x10|0;x2^=u<<9|u>>>(32-9);u=x2+x14|0;x6^=u<<13|u>>>(32-13);u=x6+x2|0;x10^=u<<18|u>>>(32-18);u=x15+x11|0;x3^=u<<7|u>>>(32-7);u=x3+x15|0;x7^=u<<9|u>>>(32-9);u=x7+x3|0;x11^=u<<13|u>>>(32-13);u=x11+x7|0;x15^=u<<18|u>>>(32-18);u=x0+x3|0;x1^=u<<7|u>>>(32-7);u=x1+x0|0;x2^=u<<9|u>>>(32-9);u=x2+x1|0;x3^=u<<13|u>>>(32-13);u=x3+x2|0;x0^=u<<18|u>>>(32-18);u=x5+x4|0;x6^=u<<7|u>>>(32-7);u=x6+x5|0;x7^=u<<9|u>>>(32-9);u=x7+x6|0;x4^=u<<13|u>>>(32-13);u=x4+x7|0;x5^=u<<18|u>>>(32-18);u=x10+x9|0;x11^=u<<7|u>>>(32-7);u=x11+x10|0;x8^=u<<9|u>>>(32-9);u=x8+x11|0;x9^=u<<13|u>>>(32-13);u=x9+x8|0;x10^=u<<18|u>>>(32-18);u=x15+x14|0;x12^=u<<7|u>>>(32-7);u=x12+x15|0;x13^=u<<9|u>>>(32-9);u=x13+x12|0;x14^=u<<13|u>>>(32-13);u=x14+x13|0;x15^=u<<18|u>>>(32-18);}
o[0]=x0>>>0&0xff;o[1]=x0>>>8&0xff;o[2]=x0>>>16&0xff;o[3]=x0>>>24&0xff;o[4]=x5>>>0&0xff;o[5]=x5>>>8&0xff;o[6]=x5>>>16&0xff;o[7]=x5>>>24&0xff;o[8]=x10>>>0&0xff;o[9]=x10>>>8&0xff;o[10]=x10>>>16&0xff;o[11]=x10>>>24&0xff;o[12]=x15>>>0&0xff;o[13]=x15>>>8&0xff;o[14]=x15>>>16&0xff;o[15]=x15>>>24&0xff;o[16]=x6>>>0&0xff;o[17]=x6>>>8&0xff;o[18]=x6>>>16&0xff;o[19]=x6>>>24&0xff;o[20]=x7>>>0&0xff;o[21]=x7>>>8&0xff;o[22]=x7>>>16&0xff;o[23]=x7>>>24&0xff;o[24]=x8>>>0&0xff;o[25]=x8>>>8&0xff;o[26]=x8>>>16&0xff;o[27]=x8>>>24&0xff;o[28]=x9>>>0&0xff;o[29]=x9>>>8&0xff;o[30]=x9>>>16&0xff;o[31]=x9>>>24&0xff;}
function crypto_core_salsa20(out,inp,k,c){core_salsa20(out,inp,k,c);}
function crypto_core_hsalsa20(out,inp,k,c){core_hsalsa20(out,inp,k,c);}
var sigma=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function crypto_stream_salsa20_xor(c,cpos,m,mpos,b,n,k){var z=new Uint8Array(16),x=new Uint8Array(64);var u,i;for(i=0;i<16;i++)z[i]=0;for(i=0;i<8;i++)z[i]=n[i];while(b>=64){crypto_core_salsa20(x,z,k,sigma);for(i=0;i<64;i++)c[cpos+i]=m[mpos+i]^x[i];u=1;for(i=8;i<16;i++){u=u+(z[i]&0xff)|0;z[i]=u&0xff;u>>>=8;}
b-=64;cpos+=64;mpos+=64;}
if(b>0){crypto_core_salsa20(x,z,k,sigma);for(i=0;i<b;i++)c[cpos+i]=m[mpos+i]^x[i];}
return 0;}
function crypto_stream_salsa20(c,cpos,b,n,k){var z=new Uint8Array(16),x=new Uint8Array(64);var u,i;for(i=0;i<16;i++)z[i]=0;for(i=0;i<8;i++)z[i]=n[i];while(b>=64){crypto_core_salsa20(x,z,k,sigma);for(i=0;i<64;i++)c[cpos+i]=x[i];u=1;for(i=8;i<16;i++){u=u+(z[i]&0xff)|0;z[i]=u&0xff;u>>>=8;}
b-=64;cpos+=64;}
if(b>0){crypto_core_salsa20(x,z,k,sigma);for(i=0;i<b;i++)c[cpos+i]=x[i];}
return 0;}
function crypto_stream(c,cpos,d,n,k){var s=new Uint8Array(32);crypto_core_hsalsa20(s,n,k,sigma);var sn=new Uint8Array(8);for(var i=0;i<8;i++)sn[i]=n[i+16];return crypto_stream_salsa20(c,cpos,d,sn,s);}
function crypto_stream_xor(c,cpos,m,mpos,d,n,k){var s=new Uint8Array(32);crypto_core_hsalsa20(s,n,k,sigma);var sn=new Uint8Array(8);for(var i=0;i<8;i++)sn[i]=n[i+16];return crypto_stream_salsa20_xor(c,cpos,m,mpos,d,sn,s);}
var poly1305=function(key){this.buffer=new Uint8Array(16);this.r=new Uint16Array(10);this.h=new Uint16Array(10);this.pad=new Uint16Array(8);this.leftover=0;this.fin=0;var t0,t1,t2,t3,t4,t5,t6,t7;t0=key[0]&0xff|(key[1]&0xff)<<8;this.r[0]=(t0)&0x1fff;t1=key[2]&0xff|(key[3]&0xff)<<8;this.r[1]=((t0>>>13)|(t1<<3))&0x1fff;t2=key[4]&0xff|(key[5]&0xff)<<8;this.r[2]=((t1>>>10)|(t2<<6))&0x1f03;t3=key[6]&0xff|(key[7]&0xff)<<8;this.r[3]=((t2>>>7)|(t3<<9))&0x1fff;t4=key[8]&0xff|(key[9]&0xff)<<8;this.r[4]=((t3>>>4)|(t4<<12))&0x00ff;this.r[5]=((t4>>>1))&0x1ffe;t5=key[10]&0xff|(key[11]&0xff)<<8;this.r[6]=((t4>>>14)|(t5<<2))&0x1fff;t6=key[12]&0xff|(key[13]&0xff)<<8;this.r[7]=((t5>>>11)|(t6<<5))&0x1f81;t7=key[14]&0xff|(key[15]&0xff)<<8;this.r[8]=((t6>>>8)|(t7<<8))&0x1fff;this.r[9]=((t7>>>5))&0x007f;this.pad[0]=key[16]&0xff|(key[17]&0xff)<<8;this.pad[1]=key[18]&0xff|(key[19]&0xff)<<8;this.pad[2]=key[20]&0xff|(key[21]&0xff)<<8;this.pad[3]=key[22]&0xff|(key[23]&0xff)<<8;this.pad[4]=key[24]&0xff|(key[25]&0xff)<<8;this.pad[5]=key[26]&0xff|(key[27]&0xff)<<8;this.pad[6]=key[28]&0xff|(key[29]&0xff)<<8;this.pad[7]=key[30]&0xff|(key[31]&0xff)<<8;};poly1305.prototype.blocks=function(m,mpos,bytes){var hibit=this.fin?0:(1<<11);var t0,t1,t2,t3,t4,t5,t6,t7,c;var d0,d1,d2,d3,d4,d5,d6,d7,d8,d9;var h0=this.h[0],h1=this.h[1],h2=this.h[2],h3=this.h[3],h4=this.h[4],h5=this.h[5],h6=this.h[6],h7=this.h[7],h8=this.h[8],h9=this.h[9];var r0=this.r[0],r1=this.r[1],r2=this.r[2],r3=this.r[3],r4=this.r[4],r5=this.r[5],r6=this.r[6],r7=this.r[7],r8=this.r[8],r9=this.r[9];while(bytes>=16){t0=m[mpos+0]&0xff|(m[mpos+1]&0xff)<<8;h0+=(t0)&0x1fff;t1=m[mpos+2]&0xff|(m[mpos+3]&0xff)<<8;h1+=((t0>>>13)|(t1<<3))&0x1fff;t2=m[mpos+4]&0xff|(m[mpos+5]&0xff)<<8;h2+=((t1>>>10)|(t2<<6))&0x1fff;t3=m[mpos+6]&0xff|(m[mpos+7]&0xff)<<8;h3+=((t2>>>7)|(t3<<9))&0x1fff;t4=m[mpos+8]&0xff|(m[mpos+9]&0xff)<<8;h4+=((t3>>>4)|(t4<<12))&0x1fff;h5+=((t4>>>1))&0x1fff;t5=m[mpos+10]&0xff|(m[mpos+11]&0xff)<<8;h6+=((t4>>>14)|(t5<<2))&0x1fff;t6=m[mpos+12]&0xff|(m[mpos+13]&0xff)<<8;h7+=((t5>>>11)|(t6<<5))&0x1fff;t7=m[mpos+14]&0xff|(m[mpos+15]&0xff)<<8;h8+=((t6>>>8)|(t7<<8))&0x1fff;h9+=((t7>>>5))|hibit;c=0;d0=c;d0+=h0*r0;d0+=h1*(5*r9);d0+=h2*(5*r8);d0+=h3*(5*r7);d0+=h4*(5*r6);c=(d0>>>13);d0&=0x1fff;d0+=h5*(5*r5);d0+=h6*(5*r4);d0+=h7*(5*r3);d0+=h8*(5*r2);d0+=h9*(5*r1);c+=(d0>>>13);d0&=0x1fff;d1=c;d1+=h0*r1;d1+=h1*r0;d1+=h2*(5*r9);d1+=h3*(5*r8);d1+=h4*(5*r7);c=(d1>>>13);d1&=0x1fff;d1+=h5*(5*r6);d1+=h6*(5*r5);d1+=h7*(5*r4);d1+=h8*(5*r3);d1+=h9*(5*r2);c+=(d1>>>13);d1&=0x1fff;d2=c;d2+=h0*r2;d2+=h1*r1;d2+=h2*r0;d2+=h3*(5*r9);d2+=h4*(5*r8);c=(d2>>>13);d2&=0x1fff;d2+=h5*(5*r7);d2+=h6*(5*r6);d2+=h7*(5*r5);d2+=h8*(5*r4);d2+=h9*(5*r3);c+=(d2>>>13);d2&=0x1fff;d3=c;d3+=h0*r3;d3+=h1*r2;d3+=h2*r1;d3+=h3*r0;d3+=h4*(5*r9);c=(d3>>>13);d3&=0x1fff;d3+=h5*(5*r8);d3+=h6*(5*r7);d3+=h7*(5*r6);d3+=h8*(5*r5);d3+=h9*(5*r4);c+=(d3>>>13);d3&=0x1fff;d4=c;d4+=h0*r4;d4+=h1*r3;d4+=h2*r2;d4+=h3*r1;d4+=h4*r0;c=(d4>>>13);d4&=0x1fff;d4+=h5*(5*r9);d4+=h6*(5*r8);d4+=h7*(5*r7);d4+=h8*(5*r6);d4+=h9*(5*r5);c+=(d4>>>13);d4&=0x1fff;d5=c;d5+=h0*r5;d5+=h1*r4;d5+=h2*r3;d5+=h3*r2;d5+=h4*r1;c=(d5>>>13);d5&=0x1fff;d5+=h5*r0;d5+=h6*(5*r9);d5+=h7*(5*r8);d5+=h8*(5*r7);d5+=h9*(5*r6);c+=(d5>>>13);d5&=0x1fff;d6=c;d6+=h0*r6;d6+=h1*r5;d6+=h2*r4;d6+=h3*r3;d6+=h4*r2;c=(d6>>>13);d6&=0x1fff;d6+=h5*r1;d6+=h6*r0;d6+=h7*(5*r9);d6+=h8*(5*r8);d6+=h9*(5*r7);c+=(d6>>>13);d6&=0x1fff;d7=c;d7+=h0*r7;d7+=h1*r6;d7+=h2*r5;d7+=h3*r4;d7+=h4*r3;c=(d7>>>13);d7&=0x1fff;d7+=h5*r2;d7+=h6*r1;d7+=h7*r0;d7+=h8*(5*r9);d7+=h9*(5*r8);c+=(d7>>>13);d7&=0x1fff;d8=c;d8+=h0*r8;d8+=h1*r7;d8+=h2*r6;d8+=h3*r5;d8+=h4*r4;c=(d8>>>13);d8&=0x1fff;d8+=h5*r3;d8+=h6*r2;d8+=h7*r1;d8+=h8*r0;d8+=h9*(5*r9);c+=(d8>>>13);d8&=0x1fff;d9=c;d9+=h0*r9;d9+=h1*r8;d9+=h2*r7;d9+=h3*r6;d9+=h4*r5;c=(d9>>>13);d9&=0x1fff;d9+=h5*r4;d9+=h6*r3;d9+=h7*r2;d9+=h8*r1;d9+=h9*r0;c+=(d9>>>13);d9&=0x1fff;c=(((c<<2)+c))|0;c=(c+d0)|0;d0=c&0x1fff;c=(c>>>13);d1+=c;h0=d0;h1=d1;h2=d2;h3=d3;h4=d4;h5=d5;h6=d6;h7=d7;h8=d8;h9=d9;mpos+=16;bytes-=16;}
this.h[0]=h0;this.h[1]=h1;this.h[2]=h2;this.h[3]=h3;this.h[4]=h4;this.h[5]=h5;this.h[6]=h6;this.h[7]=h7;this.h[8]=h8;this.h[9]=h9;};poly1305.prototype.finish=function(mac,macpos){var g=new Uint16Array(10);var c,mask,f,i;if(this.leftover){i=this.leftover;this.buffer[i++]=1;for(;i<16;i++)this.buffer[i]=0;this.fin=1;this.blocks(this.buffer,0,16);}
c=this.h[1]>>>13;this.h[1]&=0x1fff;for(i=2;i<10;i++){this.h[i]+=c;c=this.h[i]>>>13;this.h[i]&=0x1fff;}
this.h[0]+=(c*5);c=this.h[0]>>>13;this.h[0]&=0x1fff;this.h[1]+=c;c=this.h[1]>>>13;this.h[1]&=0x1fff;this.h[2]+=c;g[0]=this.h[0]+5;c=g[0]>>>13;g[0]&=0x1fff;for(i=1;i<10;i++){g[i]=this.h[i]+c;c=g[i]>>>13;g[i]&=0x1fff;}
g[9]-=(1<<13);mask=(c^1)-1;for(i=0;i<10;i++)g[i]&=mask;mask=~mask;for(i=0;i<10;i++)this.h[i]=(this.h[i]&mask)|g[i];this.h[0]=((this.h[0])|(this.h[1]<<13))&0xffff;this.h[1]=((this.h[1]>>>3)|(this.h[2]<<10))&0xffff;this.h[2]=((this.h[2]>>>6)|(this.h[3]<<7))&0xffff;this.h[3]=((this.h[3]>>>9)|(this.h[4]<<4))&0xffff;this.h[4]=((this.h[4]>>>12)|(this.h[5]<<1)|(this.h[6]<<14))&0xffff;this.h[5]=((this.h[6]>>>2)|(this.h[7]<<11))&0xffff;this.h[6]=((this.h[7]>>>5)|(this.h[8]<<8))&0xffff;this.h[7]=((this.h[8]>>>8)|(this.h[9]<<5))&0xffff;f=this.h[0]+this.pad[0];this.h[0]=f&0xffff;for(i=1;i<8;i++){f=(((this.h[i]+this.pad[i])|0)+(f>>>16))|0;this.h[i]=f&0xffff;}
mac[macpos+0]=(this.h[0]>>>0)&0xff;mac[macpos+1]=(this.h[0]>>>8)&0xff;mac[macpos+2]=(this.h[1]>>>0)&0xff;mac[macpos+3]=(this.h[1]>>>8)&0xff;mac[macpos+4]=(this.h[2]>>>0)&0xff;mac[macpos+5]=(this.h[2]>>>8)&0xff;mac[macpos+6]=(this.h[3]>>>0)&0xff;mac[macpos+7]=(this.h[3]>>>8)&0xff;mac[macpos+8]=(this.h[4]>>>0)&0xff;mac[macpos+9]=(this.h[4]>>>8)&0xff;mac[macpos+10]=(this.h[5]>>>0)&0xff;mac[macpos+11]=(this.h[5]>>>8)&0xff;mac[macpos+12]=(this.h[6]>>>0)&0xff;mac[macpos+13]=(this.h[6]>>>8)&0xff;mac[macpos+14]=(this.h[7]>>>0)&0xff;mac[macpos+15]=(this.h[7]>>>8)&0xff;};poly1305.prototype.update=function(m,mpos,bytes){var i,want;if(this.leftover){want=(16-this.leftover);if(want>bytes)
want=bytes;for(i=0;i<want;i++)
this.buffer[this.leftover+i]=m[mpos+i];bytes-=want;mpos+=want;this.leftover+=want;if(this.leftover<16)
return;this.blocks(this.buffer,0,16);this.leftover=0;}
if(bytes>=16){want=bytes-(bytes%16);this.blocks(m,mpos,want);mpos+=want;bytes-=want;}
if(bytes){for(i=0;i<bytes;i++)
this.buffer[this.leftover+i]=m[mpos+i];this.leftover+=bytes;}};function crypto_onetimeauth(out,outpos,m,mpos,n,k){var s=new poly1305(k);s.update(m,mpos,n);s.finish(out,outpos);return 0;}
function crypto_onetimeauth_verify(h,hpos,m,mpos,n,k){var x=new Uint8Array(16);crypto_onetimeauth(x,0,m,mpos,n,k);return crypto_verify_16(h,hpos,x,0);}
function crypto_secretbox(c,m,d,n,k){var i;if(d<32)return-1;crypto_stream_xor(c,0,m,0,d,n,k);crypto_onetimeauth(c,16,c,32,d-32,c);for(i=0;i<16;i++)c[i]=0;return 0;}
function crypto_secretbox_open(m,c,d,n,k){var i;var x=new Uint8Array(32);if(d<32)return-1;crypto_stream(x,0,32,n,k);if(crypto_onetimeauth_verify(c,16,c,32,d-32,x)!==0)return-1;crypto_stream_xor(m,0,c,0,d,n,k);for(i=0;i<32;i++)m[i]=0;return 0;}
function set25519(r,a){var i;for(i=0;i<16;i++)r[i]=a[i]|0;}
function car25519(o){var i,v,c=1;for(i=0;i<16;i++){v=o[i]+c+65535;c=Math.floor(v/65536);o[i]=v-c*65536;}
o[0]+=c-1+37*(c-1);}
function sel25519(p,q,b){var t,c=~(b-1);for(var i=0;i<16;i++){t=c&(p[i]^q[i]);p[i]^=t;q[i]^=t;}}
function pack25519(o,n){var i,j,b;var m=gf(),t=gf();for(i=0;i<16;i++)t[i]=n[i];car25519(t);car25519(t);car25519(t);for(j=0;j<2;j++){m[0]=t[0]-0xffed;for(i=1;i<15;i++){m[i]=t[i]-0xffff-((m[i-1]>>16)&1);m[i-1]&=0xffff;}
m[15]=t[15]-0x7fff-((m[14]>>16)&1);b=(m[15]>>16)&1;m[14]&=0xffff;sel25519(t,m,1-b);}
for(i=0;i<16;i++){o[2*i]=t[i]&0xff;o[2*i+1]=t[i]>>8;}}
function neq25519(a,b){var c=new Uint8Array(32),d=new Uint8Array(32);pack25519(c,a);pack25519(d,b);return crypto_verify_32(c,0,d,0);}
function par25519(a){var d=new Uint8Array(32);pack25519(d,a);return d[0]&1;}
function unpack25519(o,n){var i;for(i=0;i<16;i++)o[i]=n[2*i]+(n[2*i+1]<<8);o[15]&=0x7fff;}
function A(o,a,b){for(var i=0;i<16;i++)o[i]=a[i]+b[i];}
function Z(o,a,b){for(var i=0;i<16;i++)o[i]=a[i]-b[i];}
function M(o,a,b){var v,c,t0=0,t1=0,t2=0,t3=0,t4=0,t5=0,t6=0,t7=0,t8=0,t9=0,t10=0,t11=0,t12=0,t13=0,t14=0,t15=0,t16=0,t17=0,t18=0,t19=0,t20=0,t21=0,t22=0,t23=0,t24=0,t25=0,t26=0,t27=0,t28=0,t29=0,t30=0,b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=b[6],b7=b[7],b8=b[8],b9=b[9],b10=b[10],b11=b[11],b12=b[12],b13=b[13],b14=b[14],b15=b[15];v=a[0];t0+=v*b0;t1+=v*b1;t2+=v*b2;t3+=v*b3;t4+=v*b4;t5+=v*b5;t6+=v*b6;t7+=v*b7;t8+=v*b8;t9+=v*b9;t10+=v*b10;t11+=v*b11;t12+=v*b12;t13+=v*b13;t14+=v*b14;t15+=v*b15;v=a[1];t1+=v*b0;t2+=v*b1;t3+=v*b2;t4+=v*b3;t5+=v*b4;t6+=v*b5;t7+=v*b6;t8+=v*b7;t9+=v*b8;t10+=v*b9;t11+=v*b10;t12+=v*b11;t13+=v*b12;t14+=v*b13;t15+=v*b14;t16+=v*b15;v=a[2];t2+=v*b0;t3+=v*b1;t4+=v*b2;t5+=v*b3;t6+=v*b4;t7+=v*b5;t8+=v*b6;t9+=v*b7;t10+=v*b8;t11+=v*b9;t12+=v*b10;t13+=v*b11;t14+=v*b12;t15+=v*b13;t16+=v*b14;t17+=v*b15;v=a[3];t3+=v*b0;t4+=v*b1;t5+=v*b2;t6+=v*b3;t7+=v*b4;t8+=v*b5;t9+=v*b6;t10+=v*b7;t11+=v*b8;t12+=v*b9;t13+=v*b10;t14+=v*b11;t15+=v*b12;t16+=v*b13;t17+=v*b14;t18+=v*b15;v=a[4];t4+=v*b0;t5+=v*b1;t6+=v*b2;t7+=v*b3;t8+=v*b4;t9+=v*b5;t10+=v*b6;t11+=v*b7;t12+=v*b8;t13+=v*b9;t14+=v*b10;t15+=v*b11;t16+=v*b12;t17+=v*b13;t18+=v*b14;t19+=v*b15;v=a[5];t5+=v*b0;t6+=v*b1;t7+=v*b2;t8+=v*b3;t9+=v*b4;t10+=v*b5;t11+=v*b6;t12+=v*b7;t13+=v*b8;t14+=v*b9;t15+=v*b10;t16+=v*b11;t17+=v*b12;t18+=v*b13;t19+=v*b14;t20+=v*b15;v=a[6];t6+=v*b0;t7+=v*b1;t8+=v*b2;t9+=v*b3;t10+=v*b4;t11+=v*b5;t12+=v*b6;t13+=v*b7;t14+=v*b8;t15+=v*b9;t16+=v*b10;t17+=v*b11;t18+=v*b12;t19+=v*b13;t20+=v*b14;t21+=v*b15;v=a[7];t7+=v*b0;t8+=v*b1;t9+=v*b2;t10+=v*b3;t11+=v*b4;t12+=v*b5;t13+=v*b6;t14+=v*b7;t15+=v*b8;t16+=v*b9;t17+=v*b10;t18+=v*b11;t19+=v*b12;t20+=v*b13;t21+=v*b14;t22+=v*b15;v=a[8];t8+=v*b0;t9+=v*b1;t10+=v*b2;t11+=v*b3;t12+=v*b4;t13+=v*b5;t14+=v*b6;t15+=v*b7;t16+=v*b8;t17+=v*b9;t18+=v*b10;t19+=v*b11;t20+=v*b12;t21+=v*b13;t22+=v*b14;t23+=v*b15;v=a[9];t9+=v*b0;t10+=v*b1;t11+=v*b2;t12+=v*b3;t13+=v*b4;t14+=v*b5;t15+=v*b6;t16+=v*b7;t17+=v*b8;t18+=v*b9;t19+=v*b10;t20+=v*b11;t21+=v*b12;t22+=v*b13;t23+=v*b14;t24+=v*b15;v=a[10];t10+=v*b0;t11+=v*b1;t12+=v*b2;t13+=v*b3;t14+=v*b4;t15+=v*b5;t16+=v*b6;t17+=v*b7;t18+=v*b8;t19+=v*b9;t20+=v*b10;t21+=v*b11;t22+=v*b12;t23+=v*b13;t24+=v*b14;t25+=v*b15;v=a[11];t11+=v*b0;t12+=v*b1;t13+=v*b2;t14+=v*b3;t15+=v*b4;t16+=v*b5;t17+=v*b6;t18+=v*b7;t19+=v*b8;t20+=v*b9;t21+=v*b10;t22+=v*b11;t23+=v*b12;t24+=v*b13;t25+=v*b14;t26+=v*b15;v=a[12];t12+=v*b0;t13+=v*b1;t14+=v*b2;t15+=v*b3;t16+=v*b4;t17+=v*b5;t18+=v*b6;t19+=v*b7;t20+=v*b8;t21+=v*b9;t22+=v*b10;t23+=v*b11;t24+=v*b12;t25+=v*b13;t26+=v*b14;t27+=v*b15;v=a[13];t13+=v*b0;t14+=v*b1;t15+=v*b2;t16+=v*b3;t17+=v*b4;t18+=v*b5;t19+=v*b6;t20+=v*b7;t21+=v*b8;t22+=v*b9;t23+=v*b10;t24+=v*b11;t25+=v*b12;t26+=v*b13;t27+=v*b14;t28+=v*b15;v=a[14];t14+=v*b0;t15+=v*b1;t16+=v*b2;t17+=v*b3;t18+=v*b4;t19+=v*b5;t20+=v*b6;t21+=v*b7;t22+=v*b8;t23+=v*b9;t24+=v*b10;t25+=v*b11;t26+=v*b12;t27+=v*b13;t28+=v*b14;t29+=v*b15;v=a[15];t15+=v*b0;t16+=v*b1;t17+=v*b2;t18+=v*b3;t19+=v*b4;t20+=v*b5;t21+=v*b6;t22+=v*b7;t23+=v*b8;t24+=v*b9;t25+=v*b10;t26+=v*b11;t27+=v*b12;t28+=v*b13;t29+=v*b14;t30+=v*b15;t0+=38*t16;t1+=38*t17;t2+=38*t18;t3+=38*t19;t4+=38*t20;t5+=38*t21;t6+=38*t22;t7+=38*t23;t8+=38*t24;t9+=38*t25;t10+=38*t26;t11+=38*t27;t12+=38*t28;t13+=38*t29;t14+=38*t30;c=1;v=t0+c+65535;c=Math.floor(v/65536);t0=v-c*65536;v=t1+c+65535;c=Math.floor(v/65536);t1=v-c*65536;v=t2+c+65535;c=Math.floor(v/65536);t2=v-c*65536;v=t3+c+65535;c=Math.floor(v/65536);t3=v-c*65536;v=t4+c+65535;c=Math.floor(v/65536);t4=v-c*65536;v=t5+c+65535;c=Math.floor(v/65536);t5=v-c*65536;v=t6+c+65535;c=Math.floor(v/65536);t6=v-c*65536;v=t7+c+65535;c=Math.floor(v/65536);t7=v-c*65536;v=t8+c+65535;c=Math.floor(v/65536);t8=v-c*65536;v=t9+c+65535;c=Math.floor(v/65536);t9=v-c*65536;v=t10+c+65535;c=Math.floor(v/65536);t10=v-c*65536;v=t11+c+65535;c=Math.floor(v/65536);t11=v-c*65536;v=t12+c+65535;c=Math.floor(v/65536);t12=v-c*65536;v=t13+c+65535;c=Math.floor(v/65536);t13=v-c*65536;v=t14+c+65535;c=Math.floor(v/65536);t14=v-c*65536;v=t15+c+65535;c=Math.floor(v/65536);t15=v-c*65536;t0+=c-1+37*(c-1);c=1;v=t0+c+65535;c=Math.floor(v/65536);t0=v-c*65536;v=t1+c+65535;c=Math.floor(v/65536);t1=v-c*65536;v=t2+c+65535;c=Math.floor(v/65536);t2=v-c*65536;v=t3+c+65535;c=Math.floor(v/65536);t3=v-c*65536;v=t4+c+65535;c=Math.floor(v/65536);t4=v-c*65536;v=t5+c+65535;c=Math.floor(v/65536);t5=v-c*65536;v=t6+c+65535;c=Math.floor(v/65536);t6=v-c*65536;v=t7+c+65535;c=Math.floor(v/65536);t7=v-c*65536;v=t8+c+65535;c=Math.floor(v/65536);t8=v-c*65536;v=t9+c+65535;c=Math.floor(v/65536);t9=v-c*65536;v=t10+c+65535;c=Math.floor(v/65536);t10=v-c*65536;v=t11+c+65535;c=Math.floor(v/65536);t11=v-c*65536;v=t12+c+65535;c=Math.floor(v/65536);t12=v-c*65536;v=t13+c+65535;c=Math.floor(v/65536);t13=v-c*65536;v=t14+c+65535;c=Math.floor(v/65536);t14=v-c*65536;v=t15+c+65535;c=Math.floor(v/65536);t15=v-c*65536;t0+=c-1+37*(c-1);o[0]=t0;o[1]=t1;o[2]=t2;o[3]=t3;o[4]=t4;o[5]=t5;o[6]=t6;o[7]=t7;o[8]=t8;o[9]=t9;o[10]=t10;o[11]=t11;o[12]=t12;o[13]=t13;o[14]=t14;o[15]=t15;}
function S(o,a){M(o,a,a);}
function inv25519(o,i){var c=gf();var a;for(a=0;a<16;a++)c[a]=i[a];for(a=253;a>=0;a--){S(c,c);if(a!==2&&a!==4)M(c,c,i);}
for(a=0;a<16;a++)o[a]=c[a];}
function pow2523(o,i){var c=gf();var a;for(a=0;a<16;a++)c[a]=i[a];for(a=250;a>=0;a--){S(c,c);if(a!==1)M(c,c,i);}
for(a=0;a<16;a++)o[a]=c[a];}
function crypto_scalarmult(q,n,p){var z=new Uint8Array(32);var x=new Float64Array(80),r,i;var a=gf(),b=gf(),c=gf(),d=gf(),e=gf(),f=gf();for(i=0;i<31;i++)z[i]=n[i];z[31]=(n[31]&127)|64;z[0]&=248;unpack25519(x,p);for(i=0;i<16;i++){b[i]=x[i];d[i]=a[i]=c[i]=0;}
a[0]=d[0]=1;for(i=254;i>=0;--i){r=(z[i>>>3]>>>(i&7))&1;sel25519(a,b,r);sel25519(c,d,r);A(e,a,c);Z(a,a,c);A(c,b,d);Z(b,b,d);S(d,e);S(f,a);M(a,c,a);M(c,b,e);A(e,a,c);Z(a,a,c);S(b,a);Z(c,d,f);M(a,c,_121665);A(a,a,d);M(c,c,a);M(a,d,f);M(d,b,x);S(b,e);sel25519(a,b,r);sel25519(c,d,r);}
for(i=0;i<16;i++){x[i+16]=a[i];x[i+32]=c[i];x[i+48]=b[i];x[i+64]=d[i];}
var x32=x.subarray(32);var x16=x.subarray(16);inv25519(x32,x32);M(x16,x16,x32);pack25519(q,x16);return 0;}
function crypto_scalarmult_base(q,n){return crypto_scalarmult(q,n,_9);}
function crypto_box_keypair(y,x){randombytes(x,32);return crypto_scalarmult_base(y,x);}
function crypto_box_beforenm(k,y,x){var s=new Uint8Array(32);crypto_scalarmult(s,x,y);return crypto_core_hsalsa20(k,_0,s,sigma);}
var crypto_box_afternm=crypto_secretbox;var crypto_box_open_afternm=crypto_secretbox_open;function crypto_box(c,m,d,n,y,x){var k=new Uint8Array(32);crypto_box_beforenm(k,y,x);return crypto_box_afternm(c,m,d,n,k);}
function crypto_box_open(m,c,d,n,y,x){var k=new Uint8Array(32);crypto_box_beforenm(k,y,x);return crypto_box_open_afternm(m,c,d,n,k);}
var K=[0x428a2f98,0xd728ae22,0x71374491,0x23ef65cd,0xb5c0fbcf,0xec4d3b2f,0xe9b5dba5,0x8189dbbc,0x3956c25b,0xf348b538,0x59f111f1,0xb605d019,0x923f82a4,0xaf194f9b,0xab1c5ed5,0xda6d8118,0xd807aa98,0xa3030242,0x12835b01,0x45706fbe,0x243185be,0x4ee4b28c,0x550c7dc3,0xd5ffb4e2,0x72be5d74,0xf27b896f,0x80deb1fe,0x3b1696b1,0x9bdc06a7,0x25c71235,0xc19bf174,0xcf692694,0xe49b69c1,0x9ef14ad2,0xefbe4786,0x384f25e3,0x0fc19dc6,0x8b8cd5b5,0x240ca1cc,0x77ac9c65,0x2de92c6f,0x592b0275,0x4a7484aa,0x6ea6e483,0x5cb0a9dc,0xbd41fbd4,0x76f988da,0x831153b5,0x983e5152,0xee66dfab,0xa831c66d,0x2db43210,0xb00327c8,0x98fb213f,0xbf597fc7,0xbeef0ee4,0xc6e00bf3,0x3da88fc2,0xd5a79147,0x930aa725,0x06ca6351,0xe003826f,0x14292967,0x0a0e6e70,0x27b70a85,0x46d22ffc,0x2e1b2138,0x5c26c926,0x4d2c6dfc,0x5ac42aed,0x53380d13,0x9d95b3df,0x650a7354,0x8baf63de,0x766a0abb,0x3c77b2a8,0x81c2c92e,0x47edaee6,0x92722c85,0x1482353b,0xa2bfe8a1,0x4cf10364,0xa81a664b,0xbc423001,0xc24b8b70,0xd0f89791,0xc76c51a3,0x0654be30,0xd192e819,0xd6ef5218,0xd6990624,0x5565a910,0xf40e3585,0x5771202a,0x106aa070,0x32bbd1b8,0x19a4c116,0xb8d2d0c8,0x1e376c08,0x5141ab53,0x2748774c,0xdf8eeb99,0x34b0bcb5,0xe19b48a8,0x391c0cb3,0xc5c95a63,0x4ed8aa4a,0xe3418acb,0x5b9cca4f,0x7763e373,0x682e6ff3,0xd6b2b8a3,0x748f82ee,0x5defb2fc,0x78a5636f,0x43172f60,0x84c87814,0xa1f0ab72,0x8cc70208,0x1a6439ec,0x90befffa,0x23631e28,0xa4506ceb,0xde82bde9,0xbef9a3f7,0xb2c67915,0xc67178f2,0xe372532b,0xca273ece,0xea26619c,0xd186b8c7,0x21c0c207,0xeada7dd6,0xcde0eb1e,0xf57d4f7f,0xee6ed178,0x06f067aa,0x72176fba,0x0a637dc5,0xa2c898a6,0x113f9804,0xbef90dae,0x1b710b35,0x131c471b,0x28db77f5,0x23047d84,0x32caab7b,0x40c72493,0x3c9ebe0a,0x15c9bebc,0x431d67c4,0x9c100d4c,0x4cc5d4be,0xcb3e42b6,0x597f299c,0xfc657e2a,0x5fcb6fab,0x3ad6faec,0x6c44198c,0x4a475817];function crypto_hashblocks_hl(hh,hl,m,n){var wh=new Int32Array(16),wl=new Int32Array(16),bh0,bh1,bh2,bh3,bh4,bh5,bh6,bh7,bl0,bl1,bl2,bl3,bl4,bl5,bl6,bl7,th,tl,i,j,h,l,a,b,c,d;var ah0=hh[0],ah1=hh[1],ah2=hh[2],ah3=hh[3],ah4=hh[4],ah5=hh[5],ah6=hh[6],ah7=hh[7],al0=hl[0],al1=hl[1],al2=hl[2],al3=hl[3],al4=hl[4],al5=hl[5],al6=hl[6],al7=hl[7];var pos=0;while(n>=128){for(i=0;i<16;i++){j=8*i+pos;wh[i]=(m[j+0]<<24)|(m[j+1]<<16)|(m[j+2]<<8)|m[j+3];wl[i]=(m[j+4]<<24)|(m[j+5]<<16)|(m[j+6]<<8)|m[j+7];}
for(i=0;i<80;i++){bh0=ah0;bh1=ah1;bh2=ah2;bh3=ah3;bh4=ah4;bh5=ah5;bh6=ah6;bh7=ah7;bl0=al0;bl1=al1;bl2=al2;bl3=al3;bl4=al4;bl5=al5;bl6=al6;bl7=al7;h=ah7;l=al7;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=((ah4>>>14)|(al4<<(32-14)))^((ah4>>>18)|(al4<<(32-18)))^((al4>>>(41-32))|(ah4<<(32-(41-32))));l=((al4>>>14)|(ah4<<(32-14)))^((al4>>>18)|(ah4<<(32-18)))^((ah4>>>(41-32))|(al4<<(32-(41-32))));a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;h=(ah4&ah5)^(~ah4&ah6);l=(al4&al5)^(~al4&al6);a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;h=K[i*2];l=K[i*2+1];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;h=wh[i%16];l=wl[i%16];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;th=c&0xffff|d<<16;tl=a&0xffff|b<<16;h=th;l=tl;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=((ah0>>>28)|(al0<<(32-28)))^((al0>>>(34-32))|(ah0<<(32-(34-32))))^((al0>>>(39-32))|(ah0<<(32-(39-32))));l=((al0>>>28)|(ah0<<(32-28)))^((ah0>>>(34-32))|(al0<<(32-(34-32))))^((ah0>>>(39-32))|(al0<<(32-(39-32))));a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;h=(ah0&ah1)^(ah0&ah2)^(ah1&ah2);l=(al0&al1)^(al0&al2)^(al1&al2);a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;bh7=(c&0xffff)|(d<<16);bl7=(a&0xffff)|(b<<16);h=bh3;l=bl3;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=th;l=tl;a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;bh3=(c&0xffff)|(d<<16);bl3=(a&0xffff)|(b<<16);ah1=bh0;ah2=bh1;ah3=bh2;ah4=bh3;ah5=bh4;ah6=bh5;ah7=bh6;ah0=bh7;al1=bl0;al2=bl1;al3=bl2;al4=bl3;al5=bl4;al6=bl5;al7=bl6;al0=bl7;if(i%16===15){for(j=0;j<16;j++){h=wh[j];l=wl[j];a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=wh[(j+9)%16];l=wl[(j+9)%16];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;th=wh[(j+1)%16];tl=wl[(j+1)%16];h=((th>>>1)|(tl<<(32-1)))^((th>>>8)|(tl<<(32-8)))^(th>>>7);l=((tl>>>1)|(th<<(32-1)))^((tl>>>8)|(th<<(32-8)))^((tl>>>7)|(th<<(32-7)));a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;th=wh[(j+14)%16];tl=wl[(j+14)%16];h=((th>>>19)|(tl<<(32-19)))^((tl>>>(61-32))|(th<<(32-(61-32))))^(th>>>6);l=((tl>>>19)|(th<<(32-19)))^((th>>>(61-32))|(tl<<(32-(61-32))))^((tl>>>6)|(th<<(32-6)));a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;wh[j]=(c&0xffff)|(d<<16);wl[j]=(a&0xffff)|(b<<16);}}}
h=ah0;l=al0;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[0];l=hl[0];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[0]=ah0=(c&0xffff)|(d<<16);hl[0]=al0=(a&0xffff)|(b<<16);h=ah1;l=al1;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[1];l=hl[1];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[1]=ah1=(c&0xffff)|(d<<16);hl[1]=al1=(a&0xffff)|(b<<16);h=ah2;l=al2;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[2];l=hl[2];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[2]=ah2=(c&0xffff)|(d<<16);hl[2]=al2=(a&0xffff)|(b<<16);h=ah3;l=al3;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[3];l=hl[3];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[3]=ah3=(c&0xffff)|(d<<16);hl[3]=al3=(a&0xffff)|(b<<16);h=ah4;l=al4;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[4];l=hl[4];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[4]=ah4=(c&0xffff)|(d<<16);hl[4]=al4=(a&0xffff)|(b<<16);h=ah5;l=al5;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[5];l=hl[5];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[5]=ah5=(c&0xffff)|(d<<16);hl[5]=al5=(a&0xffff)|(b<<16);h=ah6;l=al6;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[6];l=hl[6];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[6]=ah6=(c&0xffff)|(d<<16);hl[6]=al6=(a&0xffff)|(b<<16);h=ah7;l=al7;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[7];l=hl[7];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[7]=ah7=(c&0xffff)|(d<<16);hl[7]=al7=(a&0xffff)|(b<<16);pos+=128;n-=128;}
return n;}
function crypto_hash(out,m,n){var hh=new Int32Array(8),hl=new Int32Array(8),x=new Uint8Array(256),i,b=n;hh[0]=0x6a09e667;hh[1]=0xbb67ae85;hh[2]=0x3c6ef372;hh[3]=0xa54ff53a;hh[4]=0x510e527f;hh[5]=0x9b05688c;hh[6]=0x1f83d9ab;hh[7]=0x5be0cd19;hl[0]=0xf3bcc908;hl[1]=0x84caa73b;hl[2]=0xfe94f82b;hl[3]=0x5f1d36f1;hl[4]=0xade682d1;hl[5]=0x2b3e6c1f;hl[6]=0xfb41bd6b;hl[7]=0x137e2179;crypto_hashblocks_hl(hh,hl,m,n);n%=128;for(i=0;i<n;i++)x[i]=m[b-n+i];x[n]=128;n=256-128*(n<112?1:0);x[n-9]=0;ts64(x,n-8,(b/0x20000000)|0,b<<3);crypto_hashblocks_hl(hh,hl,x,n);for(i=0;i<8;i++)ts64(out,8*i,hh[i],hl[i]);return 0;}
function add(p,q){var a=gf(),b=gf(),c=gf(),d=gf(),e=gf(),f=gf(),g=gf(),h=gf(),t=gf();Z(a,p[1],p[0]);Z(t,q[1],q[0]);M(a,a,t);A(b,p[0],p[1]);A(t,q[0],q[1]);M(b,b,t);M(c,p[3],q[3]);M(c,c,D2);M(d,p[2],q[2]);A(d,d,d);Z(e,b,a);Z(f,d,c);A(g,d,c);A(h,b,a);M(p[0],e,f);M(p[1],h,g);M(p[2],g,f);M(p[3],e,h);}
function cswap(p,q,b){var i;for(i=0;i<4;i++){sel25519(p[i],q[i],b);}}
function pack(r,p){var tx=gf(),ty=gf(),zi=gf();inv25519(zi,p[2]);M(tx,p[0],zi);M(ty,p[1],zi);pack25519(r,ty);r[31]^=par25519(tx)<<7;}
function scalarmult(p,q,s){var b,i;set25519(p[0],gf0);set25519(p[1],gf1);set25519(p[2],gf1);set25519(p[3],gf0);for(i=255;i>=0;--i){b=(s[(i/8)|0]>>(i&7))&1;cswap(p,q,b);add(q,p);add(p,p);cswap(p,q,b);}}
function scalarbase(p,s){var q=[gf(),gf(),gf(),gf()];set25519(q[0],X);set25519(q[1],Y);set25519(q[2],gf1);M(q[3],X,Y);scalarmult(p,q,s);}
function crypto_sign_keypair(pk,sk,seeded){var d=new Uint8Array(64);var p=[gf(),gf(),gf(),gf()];var i;if(!seeded)randombytes(sk,32);crypto_hash(d,sk,32);d[0]&=248;d[31]&=127;d[31]|=64;scalarbase(p,d);pack(pk,p);for(i=0;i<32;i++)sk[i+32]=pk[i];return 0;}
var L=new Float64Array([0xed,0xd3,0xf5,0x5c,0x1a,0x63,0x12,0x58,0xd6,0x9c,0xf7,0xa2,0xde,0xf9,0xde,0x14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x10]);function modL(r,x){var carry,i,j,k;for(i=63;i>=32;--i){carry=0;for(j=i-32,k=i-12;j<k;++j){x[j]+=carry-16*x[i]*L[j-(i-32)];carry=(x[j]+128)>>8;x[j]-=carry*256;}
x[j]+=carry;x[i]=0;}
carry=0;for(j=0;j<32;j++){x[j]+=carry-(x[31]>>4)*L[j];carry=x[j]>>8;x[j]&=255;}
for(j=0;j<32;j++)x[j]-=carry*L[j];for(i=0;i<32;i++){x[i+1]+=x[i]>>8;r[i]=x[i]&255;}}
function reduce(r){var x=new Float64Array(64),i;for(i=0;i<64;i++)x[i]=r[i];for(i=0;i<64;i++)r[i]=0;modL(r,x);}
function crypto_sign(sm,m,n,sk){var d=new Uint8Array(64),h=new Uint8Array(64),r=new Uint8Array(64);var i,j,x=new Float64Array(64);var p=[gf(),gf(),gf(),gf()];crypto_hash(d,sk,32);d[0]&=248;d[31]&=127;d[31]|=64;var smlen=n+64;for(i=0;i<n;i++)sm[64+i]=m[i];for(i=0;i<32;i++)sm[32+i]=d[32+i];crypto_hash(r,sm.subarray(32),n+32);reduce(r);scalarbase(p,r);pack(sm,p);for(i=32;i<64;i++)sm[i]=sk[i];crypto_hash(h,sm,n+64);reduce(h);for(i=0;i<64;i++)x[i]=0;for(i=0;i<32;i++)x[i]=r[i];for(i=0;i<32;i++){for(j=0;j<32;j++){x[i+j]+=h[i]*d[j];}}
modL(sm.subarray(32),x);return smlen;}
function unpackneg(r,p){var t=gf(),chk=gf(),num=gf(),den=gf(),den2=gf(),den4=gf(),den6=gf();set25519(r[2],gf1);unpack25519(r[1],p);S(num,r[1]);M(den,num,D);Z(num,num,r[2]);A(den,r[2],den);S(den2,den);S(den4,den2);M(den6,den4,den2);M(t,den6,num);M(t,t,den);pow2523(t,t);M(t,t,num);M(t,t,den);M(t,t,den);M(r[0],t,den);S(chk,r[0]);M(chk,chk,den);if(neq25519(chk,num))M(r[0],r[0],I);S(chk,r[0]);M(chk,chk,den);if(neq25519(chk,num))return-1;if(par25519(r[0])===(p[31]>>7))Z(r[0],gf0,r[0]);M(r[3],r[0],r[1]);return 0;}
function crypto_sign_open(m,sm,n,pk){var i,mlen;var t=new Uint8Array(32),h=new Uint8Array(64);var p=[gf(),gf(),gf(),gf()],q=[gf(),gf(),gf(),gf()];mlen=-1;if(n<64)return-1;if(unpackneg(q,pk))return-1;for(i=0;i<n;i++)m[i]=sm[i];for(i=0;i<32;i++)m[i+32]=pk[i];crypto_hash(h,m,n);reduce(h);scalarmult(p,q,h);scalarbase(q,sm.subarray(32));add(p,q);pack(t,p);n-=64;if(crypto_verify_32(sm,0,t,0)){for(i=0;i<n;i++)m[i]=0;return-1;}
for(i=0;i<n;i++)m[i]=sm[i+64];mlen=n;return mlen;}
var crypto_secretbox_KEYBYTES=32,crypto_secretbox_NONCEBYTES=24,crypto_secretbox_ZEROBYTES=32,crypto_secretbox_BOXZEROBYTES=16,crypto_scalarmult_BYTES=32,crypto_scalarmult_SCALARBYTES=32,crypto_box_PUBLICKEYBYTES=32,crypto_box_SECRETKEYBYTES=32,crypto_box_BEFORENMBYTES=32,crypto_box_NONCEBYTES=crypto_secretbox_NONCEBYTES,crypto_box_ZEROBYTES=crypto_secretbox_ZEROBYTES,crypto_box_BOXZEROBYTES=crypto_secretbox_BOXZEROBYTES,crypto_sign_BYTES=64,crypto_sign_PUBLICKEYBYTES=32,crypto_sign_SECRETKEYBYTES=64,crypto_sign_SEEDBYTES=32,crypto_hash_BYTES=64;nacl.lowlevel={crypto_core_hsalsa20:crypto_core_hsalsa20,crypto_stream_xor:crypto_stream_xor,crypto_stream:crypto_stream,crypto_stream_salsa20_xor:crypto_stream_salsa20_xor,crypto_stream_salsa20:crypto_stream_salsa20,crypto_onetimeauth:crypto_onetimeauth,crypto_onetimeauth_verify:crypto_onetimeauth_verify,crypto_verify_16:crypto_verify_16,crypto_verify_32:crypto_verify_32,crypto_secretbox:crypto_secretbox,crypto_secretbox_open:crypto_secretbox_open,crypto_scalarmult:crypto_scalarmult,crypto_scalarmult_base:crypto_scalarmult_base,crypto_box_beforenm:crypto_box_beforenm,crypto_box_afternm:crypto_box_afternm,crypto_box:crypto_box,crypto_box_open:crypto_box_open,crypto_box_keypair:crypto_box_keypair,crypto_hash:crypto_hash,crypto_sign:crypto_sign,crypto_sign_keypair:crypto_sign_keypair,crypto_sign_open:crypto_sign_open,crypto_secretbox_KEYBYTES:crypto_secretbox_KEYBYTES,crypto_secretbox_NONCEBYTES:crypto_secretbox_NONCEBYTES,crypto_secretbox_ZEROBYTES:crypto_secretbox_ZEROBYTES,crypto_secretbox_BOXZEROBYTES:crypto_secretbox_BOXZEROBYTES,crypto_scalarmult_BYTES:crypto_scalarmult_BYTES,crypto_scalarmult_SCALARBYTES:crypto_scalarmult_SCALARBYTES,crypto_box_PUBLICKEYBYTES:crypto_box_PUBLICKEYBYTES,crypto_box_SECRETKEYBYTES:crypto_box_SECRETKEYBYTES,crypto_box_BEFORENMBYTES:crypto_box_BEFORENMBYTES,crypto_box_NONCEBYTES:crypto_box_NONCEBYTES,crypto_box_ZEROBYTES:crypto_box_ZEROBYTES,crypto_box_BOXZEROBYTES:crypto_box_BOXZEROBYTES,crypto_sign_BYTES:crypto_sign_BYTES,crypto_sign_PUBLICKEYBYTES:crypto_sign_PUBLICKEYBYTES,crypto_sign_SECRETKEYBYTES:crypto_sign_SECRETKEYBYTES,crypto_sign_SEEDBYTES:crypto_sign_SEEDBYTES,crypto_hash_BYTES:crypto_hash_BYTES};function checkLengths(k,n){if(k.length!==crypto_secretbox_KEYBYTES)throw new Error('bad key size');if(n.length!==crypto_secretbox_NONCEBYTES)throw new Error('bad nonce size');}
function checkBoxLengths(pk,sk){if(pk.length!==crypto_box_PUBLICKEYBYTES)throw new Error('bad public key size');if(sk.length!==crypto_box_SECRETKEYBYTES)throw new Error('bad secret key size');}
function checkArrayTypes(){for(var i=0;i<arguments.length;i++){if(!(arguments[i]instanceof Uint8Array))
throw new TypeError('unexpected type, use Uint8Array');}}
function cleanup(arr){for(var i=0;i<arr.length;i++)arr[i]=0;}
nacl.randomBytes=function(n){var b=new Uint8Array(n);randombytes(b,n);return b;};nacl.secretbox=function(msg,nonce,key){checkArrayTypes(msg,nonce,key);checkLengths(key,nonce);var m=new Uint8Array(crypto_secretbox_ZEROBYTES+msg.length);var c=new Uint8Array(m.length);for(var i=0;i<msg.length;i++)m[i+crypto_secretbox_ZEROBYTES]=msg[i];crypto_secretbox(c,m,m.length,nonce,key);return c.subarray(crypto_secretbox_BOXZEROBYTES);};nacl.secretbox.open=function(box,nonce,key){checkArrayTypes(box,nonce,key);checkLengths(key,nonce);var c=new Uint8Array(crypto_secretbox_BOXZEROBYTES+box.length);var m=new Uint8Array(c.length);for(var i=0;i<box.length;i++)c[i+crypto_secretbox_BOXZEROBYTES]=box[i];if(c.length<32)return null;if(crypto_secretbox_open(m,c,c.length,nonce,key)!==0)return null;return m.subarray(crypto_secretbox_ZEROBYTES);};nacl.secretbox.keyLength=crypto_secretbox_KEYBYTES;nacl.secretbox.nonceLength=crypto_secretbox_NONCEBYTES;nacl.secretbox.overheadLength=crypto_secretbox_BOXZEROBYTES;nacl.scalarMult=function(n,p){checkArrayTypes(n,p);if(n.length!==crypto_scalarmult_SCALARBYTES)throw new Error('bad n size');if(p.length!==crypto_scalarmult_BYTES)throw new Error('bad p size');var q=new Uint8Array(crypto_scalarmult_BYTES);crypto_scalarmult(q,n,p);return q;};nacl.scalarMult.base=function(n){checkArrayTypes(n);if(n.length!==crypto_scalarmult_SCALARBYTES)throw new Error('bad n size');var q=new Uint8Array(crypto_scalarmult_BYTES);crypto_scalarmult_base(q,n);return q;};nacl.scalarMult.scalarLength=crypto_scalarmult_SCALARBYTES;nacl.scalarMult.groupElementLength=crypto_scalarmult_BYTES;nacl.box=function(msg,nonce,publicKey,secretKey){var k=nacl.box.before(publicKey,secretKey);return nacl.secretbox(msg,nonce,k);};nacl.box.before=function(publicKey,secretKey){checkArrayTypes(publicKey,secretKey);checkBoxLengths(publicKey,secretKey);var k=new Uint8Array(crypto_box_BEFORENMBYTES);crypto_box_beforenm(k,publicKey,secretKey);return k;};nacl.box.after=nacl.secretbox;nacl.box.open=function(msg,nonce,publicKey,secretKey){var k=nacl.box.before(publicKey,secretKey);return nacl.secretbox.open(msg,nonce,k);};nacl.box.open.after=nacl.secretbox.open;nacl.box.keyPair=function(){var pk=new Uint8Array(crypto_box_PUBLICKEYBYTES);var sk=new Uint8Array(crypto_box_SECRETKEYBYTES);crypto_box_keypair(pk,sk);return{publicKey:pk,secretKey:sk};};nacl.box.keyPair.fromSecretKey=function(secretKey){checkArrayTypes(secretKey);if(secretKey.length!==crypto_box_SECRETKEYBYTES)
throw new Error('bad secret key size');var pk=new Uint8Array(crypto_box_PUBLICKEYBYTES);crypto_scalarmult_base(pk,secretKey);return{publicKey:pk,secretKey:new Uint8Array(secretKey)};};nacl.box.publicKeyLength=crypto_box_PUBLICKEYBYTES;nacl.box.secretKeyLength=crypto_box_SECRETKEYBYTES;nacl.box.sharedKeyLength=crypto_box_BEFORENMBYTES;nacl.box.nonceLength=crypto_box_NONCEBYTES;nacl.box.overheadLength=nacl.secretbox.overheadLength;nacl.sign=function(msg,secretKey){checkArrayTypes(msg,secretKey);if(secretKey.length!==crypto_sign_SECRETKEYBYTES)
throw new Error('bad secret key size');var signedMsg=new Uint8Array(crypto_sign_BYTES+msg.length);crypto_sign(signedMsg,msg,msg.length,secretKey);return signedMsg;};nacl.sign.open=function(signedMsg,publicKey){checkArrayTypes(signedMsg,publicKey);if(publicKey.length!==crypto_sign_PUBLICKEYBYTES)
throw new Error('bad public key size');var tmp=new Uint8Array(signedMsg.length);var mlen=crypto_sign_open(tmp,signedMsg,signedMsg.length,publicKey);if(mlen<0)return null;var m=new Uint8Array(mlen);for(var i=0;i<m.length;i++)m[i]=tmp[i];return m;};nacl.sign.detached=function(msg,secretKey){var signedMsg=nacl.sign(msg,secretKey);var sig=new Uint8Array(crypto_sign_BYTES);for(var i=0;i<sig.length;i++)sig[i]=signedMsg[i];return sig;};nacl.sign.detached.verify=function(msg,sig,publicKey){checkArrayTypes(msg,sig,publicKey);if(sig.length!==crypto_sign_BYTES)
throw new Error('bad signature size');if(publicKey.length!==crypto_sign_PUBLICKEYBYTES)
throw new Error('bad public key size');var sm=new Uint8Array(crypto_sign_BYTES+msg.length);var m=new Uint8Array(crypto_sign_BYTES+msg.length);var i;for(i=0;i<crypto_sign_BYTES;i++)sm[i]=sig[i];for(i=0;i<msg.length;i++)sm[i+crypto_sign_BYTES]=msg[i];return(crypto_sign_open(m,sm,sm.length,publicKey)>=0);};nacl.sign.keyPair=function(){var pk=new Uint8Array(crypto_sign_PUBLICKEYBYTES);var sk=new Uint8Array(crypto_sign_SECRETKEYBYTES);crypto_sign_keypair(pk,sk);return{publicKey:pk,secretKey:sk};};nacl.sign.keyPair.fromSecretKey=function(secretKey){checkArrayTypes(secretKey);if(secretKey.length!==crypto_sign_SECRETKEYBYTES)
throw new Error('bad secret key size');var pk=new Uint8Array(crypto_sign_PUBLICKEYBYTES);for(var i=0;i<pk.length;i++)pk[i]=secretKey[32+i];return{publicKey:pk,secretKey:new Uint8Array(secretKey)};};nacl.sign.keyPair.fromSeed=function(seed){checkArrayTypes(seed);if(seed.length!==crypto_sign_SEEDBYTES)
throw new Error('bad seed size');var pk=new Uint8Array(crypto_sign_PUBLICKEYBYTES);var sk=new Uint8Array(crypto_sign_SECRETKEYBYTES);for(var i=0;i<32;i++)sk[i]=seed[i];crypto_sign_keypair(pk,sk,true);return{publicKey:pk,secretKey:sk};};nacl.sign.publicKeyLength=crypto_sign_PUBLICKEYBYTES;nacl.sign.secretKeyLength=crypto_sign_SECRETKEYBYTES;nacl.sign.seedLength=crypto_sign_SEEDBYTES;nacl.sign.signatureLength=crypto_sign_BYTES;nacl.hash=function(msg){checkArrayTypes(msg);var h=new Uint8Array(crypto_hash_BYTES);crypto_hash(h,msg,msg.length);return h;};nacl.hash.hashLength=crypto_hash_BYTES;nacl.verify=function(x,y){checkArrayTypes(x,y);if(x.length===0||y.length===0)return false;if(x.length!==y.length)return false;return(vn(x,0,y,0,x.length)===0)?true:false;};nacl.setPRNG=function(fn){randombytes=fn;};(function(){var crypto=typeof self!=='undefined'?(self.crypto||self.msCrypto):null;if(crypto&&crypto.getRandomValues){var QUOTA=65536;nacl.setPRNG(function(x,n){var i,v=new Uint8Array(n);for(i=0;i<n;i+=QUOTA){crypto.getRandomValues(v.subarray(i,i+Math.min(n-i,QUOTA)));}
for(i=0;i<n;i++)x[i]=v[i];cleanup(v);});}else if(true){crypto=__webpack_require__(645);if(crypto&&crypto.randomBytes){nacl.setPRNG(function(x,n){var i,v=crypto.randomBytes(n);for(i=0;i<n;i++)x[i]=v[i];cleanup(v);});}}})();})(typeof module!=='undefined'&&module.exports?module.exports:(self.nacl=self.nacl||{}));}),(function(module,exports){}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__=__webpack_require__(3);let Argon2=null;if(true){Argon2=__webpack_require__(733).default}
else{Argon2=require('./node/Argon2-Node').default}
Argon2.verify=async(initialHash,data)=>{let myHash;if(Buffer.isBuffer(initialHash)){myHash=await Argon2.hash(data);return __WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].safeCompare(initialHash,myHash);}
else
if(typeof initialHash==='string'){myHash=await Argon2.hashString(data);return myHash===initialHash;}
return false;}
__webpack_exports__["a"]=(Argon2);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){const Buffer=__webpack_require__(4).Buffer
module.exports=function base(ALPHABET){if(ALPHABET.length>=255)throw new TypeError('Alphabet too long')
const BASE_MAP=new Uint8Array(256)
BASE_MAP.fill(255)
for(let i=0;i<ALPHABET.length;i++){const x=ALPHABET.charAt(i)
const xc=x.charCodeAt(0)
if(BASE_MAP[xc]!==255)throw new TypeError(x+' is ambiguous')
BASE_MAP[xc]=i}
const BASE=ALPHABET.length
const LEADER=ALPHABET.charAt(0)
const FACTOR=Math.log(BASE)/Math.log(256)
const iFACTOR=Math.log(256)/Math.log(BASE)
function encode(source){if(!Buffer.isBuffer(source))throw new TypeError('Expected Buffer')
if(source.length===0)return ''
let zeroes=0
let length=0
let pbegin=0
const pend=source.length
while(pbegin!==pend&&source[pbegin]===0){pbegin++
zeroes++}
const size=((pend-pbegin)*iFACTOR+1)>>>0
const b58=new Uint8Array(size)
while(pbegin!==pend){let carry=source[pbegin]
let i=0
for(let it=size-1;(carry!==0||i<length)&&(it!==-1);it--,i++){carry+=(256*b58[it])>>>0
b58[it]=(carry%BASE)>>>0
carry=(carry/BASE)>>>0}
if(carry!==0)throw new Error('Non-zero carry')
length=i
pbegin++}
let it=size-length
while(it!==size&&b58[it]===0){it++}
let str=LEADER.repeat(zeroes)
for(;it<size;++it)str+=ALPHABET.charAt(b58[it])
return str}
function decodeUnsafe(source){if(typeof source!=='string')throw new TypeError('Expected String')
if(source.length===0)return Buffer.alloc(0)
let psz=0
if(source[psz]===' ')return
let zeroes=0
let length=0
while(source[psz]===LEADER){zeroes++
psz++}
const size=(((source.length-psz)*FACTOR)+1)>>>0
const b256=new Uint8Array(size)
while(source[psz]){let carry=BASE_MAP[source.charCodeAt(psz)]
if(carry===255)return
let i=0
for(let it=size-1;(carry!==0||i<length)&&(it!==-1);it--,i++){carry+=(BASE*b256[it])>>>0
b256[it]=(carry%256)>>>0
carry=(carry/256)>>>0}
if(carry!==0)throw new Error('Non-zero carry')
length=i
psz++}
if(source[psz]===' ')return
let it=size-length
while(it!==size&&b256[it]===0){it++}
const vch=Buffer.allocUnsafe(zeroes+(size-it))
vch.fill(0x00,0,zeroes)
let j=zeroes
while(it!==size){vch[j++]=b256[it++]}
return vch}
function decode(string){const buffer=decodeUnsafe(string)
if(buffer)return buffer
throw new Error('Non-base'+BASE+' character')}
return{encode:encode,decodeUnsafe:decodeUnsafe,decode:decode}}}),(function(module,exports,__webpack_require__){"use strict";(function(Buffer){var crypto=__webpack_require__(24);var bufferAlloc=__webpack_require__(730);var safeCompare=function safeCompare(a,b){var strA=String(a);var strB=String(b);var lenA=strA.length;var result=0;if(lenA!==strB.length){strB=strA;result=1;}
for(var i=0;i<lenA;i++){result|=(strA.charCodeAt(i)^strB.charCodeAt(i));}
return result===0;};var nativeTimingSafeEqual=function nativeTimingSafeEqual(a,b){var strA=String(a);var strB=String(b);var len=Math.max(Buffer.byteLength(strA),Buffer.byteLength(strB));var bufA=bufferAlloc(len,0,'utf8');bufA.write(strA);var bufB=bufferAlloc(len,0,'utf8');bufB.write(strB);return crypto.timingSafeEqual(bufA,bufB);};module.exports=(typeof crypto.timingSafeEqual!=='undefined'?nativeTimingSafeEqual:safeCompare);}.call(exports,__webpack_require__(1).Buffer))}),(function(module,exports){}),(function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
var Buffer=__webpack_require__(4).Buffer;var util=__webpack_require__(651);function copyBuffer(src,target,offset){src.copy(target,offset);}
module.exports=function(){function BufferList(){_classCallCheck(this,BufferList);this.head=null;this.tail=null;this.length=0;}
BufferList.prototype.push=function push(v){var entry={data:v,next:null};if(this.length>0)this.tail.next=entry;else this.head=entry;this.tail=entry;++this.length;};BufferList.prototype.unshift=function unshift(v){var entry={data:v,next:this.head};if(this.length===0)this.tail=entry;this.head=entry;++this.length;};BufferList.prototype.shift=function shift(){if(this.length===0)return;var ret=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;--this.length;return ret;};BufferList.prototype.clear=function clear(){this.head=this.tail=null;this.length=0;};BufferList.prototype.join=function join(s){if(this.length===0)return '';var p=this.head;var ret=''+p.data;while(p=p.next){ret+=s+p.data;}return ret;};BufferList.prototype.concat=function concat(n){if(this.length===0)return Buffer.alloc(0);if(this.length===1)return this.head.data;var ret=Buffer.allocUnsafe(n>>>0);var p=this.head;var i=0;while(p){copyBuffer(p.data,ret,i);i+=p.data.length;p=p.next;}
return ret;};return BufferList;}();if(util&&util.inspect&&util.inspect.custom){module.exports.prototype[util.inspect.custom]=function(){var obj=util.inspect({length:this.length});return this.constructor.name+' '+obj;};}}),(function(module,exports){}),(function(module,exports,__webpack_require__){(function(global,process){(function(global,undefined){"use strict";if(global.setImmediate){return;}
var nextHandle=1;var tasksByHandle={};var currentlyRunningATask=false;var doc=global.document;var registerImmediate;function setImmediate(callback){if(typeof callback!=="function"){callback=new Function(""+callback);}
var args=new Array(arguments.length-1);for(var i=0;i<args.length;i++){args[i]=arguments[i+1];}
var task={callback:callback,args:args};tasksByHandle[nextHandle]=task;registerImmediate(nextHandle);return nextHandle++;}
function clearImmediate(handle){delete tasksByHandle[handle];}
function run(task){var callback=task.callback;var args=task.args;switch(args.length){case 0:callback();break;case 1:callback(args[0]);break;case 2:callback(args[0],args[1]);break;case 3:callback(args[0],args[1],args[2]);break;default:callback.apply(undefined,args);break;}}
function runIfPresent(handle){if(currentlyRunningATask){setTimeout(runIfPresent,0,handle);}else{var task=tasksByHandle[handle];if(task){currentlyRunningATask=true;try{run(task);}finally{clearImmediate(handle);currentlyRunningATask=false;}}}}
function installNextTickImplementation(){registerImmediate=function(handle){process.nextTick(function(){runIfPresent(handle);});};}
function canUsePostMessage(){if(global.postMessage&&!global.importScripts){var postMessageIsAsynchronous=true;var oldOnMessage=global.onmessage;global.onmessage=function(){postMessageIsAsynchronous=false;};global.postMessage("","*");global.onmessage=oldOnMessage;return postMessageIsAsynchronous;}}
function installPostMessageImplementation(){var messagePrefix="setImmediate$"+Math.random()+"$";var onGlobalMessage=function(event){if(event.source===global&&typeof event.data==="string"&&event.data.indexOf(messagePrefix)===0){runIfPresent(+event.data.slice(messagePrefix.length));}};if(global.addEventListener){global.addEventListener("message",onGlobalMessage,false);}else{global.attachEvent("onmessage",onGlobalMessage);}
registerImmediate=function(handle){global.postMessage(messagePrefix+handle,"*");};}
function installMessageChannelImplementation(){var channel=new MessageChannel();channel.port1.onmessage=function(event){var handle=event.data;runIfPresent(handle);};registerImmediate=function(handle){channel.port2.postMessage(handle);};}
function installReadyStateChangeImplementation(){var html=doc.documentElement;registerImmediate=function(handle){var script=doc.createElement("script");script.onreadystatechange=function(){runIfPresent(handle);script.onreadystatechange=null;html.removeChild(script);script=null;};html.appendChild(script);};}
function installSetTimeoutImplementation(){registerImmediate=function(handle){setTimeout(runIfPresent,0,handle);};}
var attachTo=Object.getPrototypeOf&&Object.getPrototypeOf(global);attachTo=attachTo&&attachTo.setTimeout?attachTo:global;if({}.toString.call(global.process)==="[object process]"){installNextTickImplementation();}else if(canUsePostMessage()){installPostMessageImplementation();}else if(global.MessageChannel){installMessageChannelImplementation();}else if(doc&&"onreadystatechange"in doc.createElement("script")){installReadyStateChangeImplementation();}else{installSetTimeoutImplementation();}
attachTo.setImmediate=setImmediate;attachTo.clearImmediate=clearImmediate;}(typeof self==="undefined"?typeof global==="undefined"?this:global:self));}.call(exports,__webpack_require__(10),__webpack_require__(20)))}),(function(module,exports,__webpack_require__){(function(global){module.exports=deprecate;function deprecate(fn,msg){if(config('noDeprecation')){return fn;}
var warned=false;function deprecated(){if(!warned){if(config('throwDeprecation')){throw new Error(msg);}else if(config('traceDeprecation')){console.trace(msg);}else{console.warn(msg);}
warned=true;}
return fn.apply(this,arguments);}
return deprecated;}
function config(name){try{if(!global.localStorage)return false;}catch(_){return false;}
var val=global.localStorage[name];if(null==val)return false;return String(val).toLowerCase()==='true';}}.call(exports,__webpack_require__(10)))}),(function(module,exports,__webpack_require__){"use strict";module.exports=PassThrough;var Transform=__webpack_require__(315);var util=__webpack_require__(114);util.inherits=__webpack_require__(7);util.inherits(PassThrough,Transform);function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options);}
PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk);};}),(function(module,exports,__webpack_require__){module.exports=__webpack_require__(209);}),(function(module,exports,__webpack_require__){module.exports=__webpack_require__(105);}),(function(module,exports,__webpack_require__){module.exports=__webpack_require__(127).Transform}),(function(module,exports,__webpack_require__){module.exports=__webpack_require__(127).PassThrough}),(function(module,exports,__webpack_require__){var inherits=__webpack_require__(7)
var Hash=__webpack_require__(115)
var Buffer=__webpack_require__(4).Buffer
var K=[0x5a827999,0x6ed9eba1,0x8f1bbcdc|0,0xca62c1d6|0]
var W=new Array(80)
function Sha(){this.init()
this._w=W
Hash.call(this,64,56)}
inherits(Sha,Hash)
Sha.prototype.init=function(){this._a=0x67452301
this._b=0xefcdab89
this._c=0x98badcfe
this._d=0x10325476
this._e=0xc3d2e1f0
return this}
function rotl5(num){return(num<<5)|(num>>>27)}
function rotl30(num){return(num<<30)|(num>>>2)}
function ft(s,b,c,d){if(s===0)return(b&c)|((~b)&d)
if(s===2)return(b&c)|(b&d)|(c&d)
return b^c^d}
Sha.prototype._update=function(M){var W=this._w
var a=this._a|0
var b=this._b|0
var c=this._c|0
var d=this._d|0
var e=this._e|0
for(var i=0;i<16;++i)W[i]=M.readInt32BE(i*4)
for(;i<80;++i)W[i]=W[i-3]^W[i-8]^W[i-14]^W[i-16]
for(var j=0;j<80;++j){var s=~~(j/20)
var t=(rotl5(a)+ft(s,b,c,d)+e+W[j]+K[s])|0
e=d
d=c
c=rotl30(b)
b=a
a=t}
this._a=(a+this._a)|0
this._b=(b+this._b)|0
this._c=(c+this._c)|0
this._d=(d+this._d)|0
this._e=(e+this._e)|0}
Sha.prototype._hash=function(){var H=Buffer.allocUnsafe(20)
H.writeInt32BE(this._a|0,0)
H.writeInt32BE(this._b|0,4)
H.writeInt32BE(this._c|0,8)
H.writeInt32BE(this._d|0,12)
H.writeInt32BE(this._e|0,16)
return H}
module.exports=Sha}),(function(module,exports,__webpack_require__){var inherits=__webpack_require__(7)
var Hash=__webpack_require__(115)
var Buffer=__webpack_require__(4).Buffer
var K=[0x5a827999,0x6ed9eba1,0x8f1bbcdc|0,0xca62c1d6|0]
var W=new Array(80)
function Sha1(){this.init()
this._w=W
Hash.call(this,64,56)}
inherits(Sha1,Hash)
Sha1.prototype.init=function(){this._a=0x67452301
this._b=0xefcdab89
this._c=0x98badcfe
this._d=0x10325476
this._e=0xc3d2e1f0
return this}
function rotl1(num){return(num<<1)|(num>>>31)}
function rotl5(num){return(num<<5)|(num>>>27)}
function rotl30(num){return(num<<30)|(num>>>2)}
function ft(s,b,c,d){if(s===0)return(b&c)|((~b)&d)
if(s===2)return(b&c)|(b&d)|(c&d)
return b^c^d}
Sha1.prototype._update=function(M){var W=this._w
var a=this._a|0
var b=this._b|0
var c=this._c|0
var d=this._d|0
var e=this._e|0
for(var i=0;i<16;++i)W[i]=M.readInt32BE(i*4)
for(;i<80;++i)W[i]=rotl1(W[i-3]^W[i-8]^W[i-14]^W[i-16])
for(var j=0;j<80;++j){var s=~~(j/20)
var t=(rotl5(a)+ft(s,b,c,d)+e+W[j]+K[s])|0
e=d
d=c
c=rotl30(b)
b=a
a=t}
this._a=(a+this._a)|0
this._b=(b+this._b)|0
this._c=(c+this._c)|0
this._d=(d+this._d)|0
this._e=(e+this._e)|0}
Sha1.prototype._hash=function(){var H=Buffer.allocUnsafe(20)
H.writeInt32BE(this._a|0,0)
H.writeInt32BE(this._b|0,4)
H.writeInt32BE(this._c|0,8)
H.writeInt32BE(this._d|0,12)
H.writeInt32BE(this._e|0,16)
return H}
module.exports=Sha1}),(function(module,exports,__webpack_require__){var inherits=__webpack_require__(7)
var Sha256=__webpack_require__(316)
var Hash=__webpack_require__(115)
var Buffer=__webpack_require__(4).Buffer
var W=new Array(64)
function Sha224(){this.init()
this._w=W
Hash.call(this,64,56)}
inherits(Sha224,Sha256)
Sha224.prototype.init=function(){this._a=0xc1059ed8
this._b=0x367cd507
this._c=0x3070dd17
this._d=0xf70e5939
this._e=0xffc00b31
this._f=0x68581511
this._g=0x64f98fa7
this._h=0xbefa4fa4
return this}
Sha224.prototype._hash=function(){var H=Buffer.allocUnsafe(28)
H.writeInt32BE(this._a,0)
H.writeInt32BE(this._b,4)
H.writeInt32BE(this._c,8)
H.writeInt32BE(this._d,12)
H.writeInt32BE(this._e,16)
H.writeInt32BE(this._f,20)
H.writeInt32BE(this._g,24)
return H}
module.exports=Sha224}),(function(module,exports,__webpack_require__){var inherits=__webpack_require__(7)
var SHA512=__webpack_require__(317)
var Hash=__webpack_require__(115)
var Buffer=__webpack_require__(4).Buffer
var W=new Array(160)
function Sha384(){this.init()
this._w=W
Hash.call(this,128,112)}
inherits(Sha384,SHA512)
Sha384.prototype.init=function(){this._ah=0xcbbb9d5d
this._bh=0x629a292a
this._ch=0x9159015a
this._dh=0x152fecd8
this._eh=0x67332667
this._fh=0x8eb44a87
this._gh=0xdb0c2e0d
this._hh=0x47b5481d
this._al=0xc1059ed8
this._bl=0x367cd507
this._cl=0x3070dd17
this._dl=0xf70e5939
this._el=0xffc00b31
this._fl=0x68581511
this._gl=0x64f98fa7
this._hl=0xbefa4fa4
return this}
Sha384.prototype._hash=function(){var H=Buffer.allocUnsafe(48)
function writeInt64BE(h,l,offset){H.writeInt32BE(h,offset)
H.writeInt32BE(l,offset+4)}
writeInt64BE(this._ah,this._al,0)
writeInt64BE(this._bh,this._bl,8)
writeInt64BE(this._ch,this._cl,16)
writeInt64BE(this._dh,this._dl,24)
writeInt64BE(this._eh,this._el,32)
writeInt64BE(this._fh,this._fl,40)
return H}
module.exports=Sha384}),(function(module,exports,__webpack_require__){"use strict";var inherits=__webpack_require__(7)
var Buffer=__webpack_require__(4).Buffer
var Base=__webpack_require__(85)
var ZEROS=Buffer.alloc(128)
var blocksize=64
function Hmac(alg,key){Base.call(this,'digest')
if(typeof key==='string'){key=Buffer.from(key)}
this._alg=alg
this._key=key
if(key.length>blocksize){key=alg(key)}else if(key.length<blocksize){key=Buffer.concat([key,ZEROS],blocksize)}
var ipad=this._ipad=Buffer.allocUnsafe(blocksize)
var opad=this._opad=Buffer.allocUnsafe(blocksize)
for(var i=0;i<blocksize;i++){ipad[i]=key[i]^0x36
opad[i]=key[i]^0x5C}
this._hash=[ipad]}
inherits(Hmac,Base)
Hmac.prototype._update=function(data){this._hash.push(data)}
Hmac.prototype._final=function(){var h=this._alg(Buffer.concat(this._hash))
return this._alg(Buffer.concat([this._opad,h]))}
module.exports=Hmac}),(function(module,exports,__webpack_require__){module.exports=__webpack_require__(319)}),(function(module,exports,__webpack_require__){(function(global,process){var checkParameters=__webpack_require__(321)
var defaultEncoding=__webpack_require__(322)
var sync=__webpack_require__(323)
var Buffer=__webpack_require__(4).Buffer
var ZERO_BUF
var subtle=global.crypto&&global.crypto.subtle
var toBrowser={'sha':'SHA-1','sha-1':'SHA-1','sha1':'SHA-1','sha256':'SHA-256','sha-256':'SHA-256','sha384':'SHA-384','sha-384':'SHA-384','sha-512':'SHA-512','sha512':'SHA-512'}
var checks=[]
function checkNative(algo){if(global.process&&!global.process.browser){return Promise.resolve(false)}
if(!subtle||!subtle.importKey||!subtle.deriveBits){return Promise.resolve(false)}
if(checks[algo]!==undefined){return checks[algo]}
ZERO_BUF=ZERO_BUF||Buffer.alloc(8)
var prom=browserPbkdf2(ZERO_BUF,ZERO_BUF,10,128,algo).then(function(){return true}).catch(function(){return false})
checks[algo]=prom
return prom}
function browserPbkdf2(password,salt,iterations,length,algo){return subtle.importKey('raw',password,{name:'PBKDF2'},false,['deriveBits']).then(function(key){return subtle.deriveBits({name:'PBKDF2',salt:salt,iterations:iterations,hash:{name:algo}},key,length<<3)}).then(function(res){return Buffer.from(res)})}
function resolvePromise(promise,callback){promise.then(function(out){process.nextTick(function(){callback(null,out)})},function(e){process.nextTick(function(){callback(e)})})}
module.exports=function(password,salt,iterations,keylen,digest,callback){if(typeof digest==='function'){callback=digest
digest=undefined}
digest=digest||'sha1'
var algo=toBrowser[digest.toLowerCase()]
if(!algo||typeof global.Promise!=='function'){return process.nextTick(function(){var out
try{out=sync(password,salt,iterations,keylen,digest)}catch(e){return callback(e)}
callback(null,out)})}
checkParameters(password,salt,iterations,keylen)
if(typeof callback!=='function')throw new Error('No callback provided to pbkdf2')
if(!Buffer.isBuffer(password))password=Buffer.from(password,defaultEncoding)
if(!Buffer.isBuffer(salt))salt=Buffer.from(salt,defaultEncoding)
resolvePromise(checkNative(algo).then(function(resp){if(resp)return browserPbkdf2(password,salt,iterations,keylen,algo)
return sync(password,salt,iterations,keylen,digest)}),callback)}}.call(exports,__webpack_require__(10),__webpack_require__(20)))}),(function(module,exports,__webpack_require__){var DES=__webpack_require__(667)
var aes=__webpack_require__(214)
var aesModes=__webpack_require__(215)
var desModes=__webpack_require__(682)
var ebtk=__webpack_require__(166)
function createCipher(suite,password){suite=suite.toLowerCase()
var keyLen,ivLen
if(aesModes[suite]){keyLen=aesModes[suite].key
ivLen=aesModes[suite].iv}else if(desModes[suite]){keyLen=desModes[suite].key*8
ivLen=desModes[suite].iv}else{throw new TypeError('invalid suite type')}
var keys=ebtk(password,false,keyLen,ivLen)
return createCipheriv(suite,keys.key,keys.iv)}
function createDecipher(suite,password){suite=suite.toLowerCase()
var keyLen,ivLen
if(aesModes[suite]){keyLen=aesModes[suite].key
ivLen=aesModes[suite].iv}else if(desModes[suite]){keyLen=desModes[suite].key*8
ivLen=desModes[suite].iv}else{throw new TypeError('invalid suite type')}
var keys=ebtk(password,false,keyLen,ivLen)
return createDecipheriv(suite,keys.key,keys.iv)}
function createCipheriv(suite,key,iv){suite=suite.toLowerCase()
if(aesModes[suite])return aes.createCipheriv(suite,key,iv)
if(desModes[suite])return new DES({key:key,iv:iv,mode:suite})
throw new TypeError('invalid suite type')}
function createDecipheriv(suite,key,iv){suite=suite.toLowerCase()
if(aesModes[suite])return aes.createDecipheriv(suite,key,iv)
if(desModes[suite])return new DES({key:key,iv:iv,mode:suite,decrypt:true})
throw new TypeError('invalid suite type')}
function getCiphers(){return Object.keys(desModes).concat(aes.getCiphers())}
exports.createCipher=exports.Cipher=createCipher
exports.createCipheriv=exports.Cipheriv=createCipheriv
exports.createDecipher=exports.Decipher=createDecipher
exports.createDecipheriv=exports.Decipheriv=createDecipheriv
exports.listCiphers=exports.getCiphers=getCiphers}),(function(module,exports,__webpack_require__){var CipherBase=__webpack_require__(85)
var des=__webpack_require__(213)
var inherits=__webpack_require__(7)
var Buffer=__webpack_require__(4).Buffer
var modes={'des-ede3-cbc':des.CBC.instantiate(des.EDE),'des-ede3':des.EDE,'des-ede-cbc':des.CBC.instantiate(des.EDE),'des-ede':des.EDE,'des-cbc':des.CBC.instantiate(des.DES),'des-ecb':des.DES}
modes.des=modes['des-cbc']
modes.des3=modes['des-ede3-cbc']
module.exports=DES
inherits(DES,CipherBase)
function DES(opts){CipherBase.call(this)
var modeName=opts.mode.toLowerCase()
var mode=modes[modeName]
var type
if(opts.decrypt){type='decrypt'}else{type='encrypt'}
var key=opts.key
if(!Buffer.isBuffer(key)){key=Buffer.from(key)}
if(modeName==='des-ede'||modeName==='des-ede-cbc'){key=Buffer.concat([key,key.slice(0,8)])}
var iv=opts.iv
if(!Buffer.isBuffer(iv)){iv=Buffer.from(iv)}
this._des=mode.create({key:key,iv:iv,type:type})}
DES.prototype._update=function(data){return Buffer.from(this._des.update(data))}
DES.prototype._final=function(){return Buffer.from(this._des.final())}}),(function(module,exports,__webpack_require__){"use strict";exports.readUInt32BE=function readUInt32BE(bytes,off){var res=(bytes[0+off]<<24)|(bytes[1+off]<<16)|(bytes[2+off]<<8)|bytes[3+off];return res>>>0;};exports.writeUInt32BE=function writeUInt32BE(bytes,value,off){bytes[0+off]=value>>>24;bytes[1+off]=(value>>>16)&0xff;bytes[2+off]=(value>>>8)&0xff;bytes[3+off]=value&0xff;};exports.ip=function ip(inL,inR,out,off){var outL=0;var outR=0;for(var i=6;i>=0;i-=2){for(var j=0;j<=24;j+=8){outL<<=1;outL|=(inR>>>(j+i))&1;}
for(var j=0;j<=24;j+=8){outL<<=1;outL|=(inL>>>(j+i))&1;}}
for(var i=6;i>=0;i-=2){for(var j=1;j<=25;j+=8){outR<<=1;outR|=(inR>>>(j+i))&1;}
for(var j=1;j<=25;j+=8){outR<<=1;outR|=(inL>>>(j+i))&1;}}
out[off+0]=outL>>>0;out[off+1]=outR>>>0;};exports.rip=function rip(inL,inR,out,off){var outL=0;var outR=0;for(var i=0;i<4;i++){for(var j=24;j>=0;j-=8){outL<<=1;outL|=(inR>>>(j+i))&1;outL<<=1;outL|=(inL>>>(j+i))&1;}}
for(var i=4;i<8;i++){for(var j=24;j>=0;j-=8){outR<<=1;outR|=(inR>>>(j+i))&1;outR<<=1;outR|=(inL>>>(j+i))&1;}}
out[off+0]=outL>>>0;out[off+1]=outR>>>0;};exports.pc1=function pc1(inL,inR,out,off){var outL=0;var outR=0;for(var i=7;i>=5;i--){for(var j=0;j<=24;j+=8){outL<<=1;outL|=(inR>>(j+i))&1;}
for(var j=0;j<=24;j+=8){outL<<=1;outL|=(inL>>(j+i))&1;}}
for(var j=0;j<=24;j+=8){outL<<=1;outL|=(inR>>(j+i))&1;}
for(var i=1;i<=3;i++){for(var j=0;j<=24;j+=8){outR<<=1;outR|=(inR>>(j+i))&1;}
for(var j=0;j<=24;j+=8){outR<<=1;outR|=(inL>>(j+i))&1;}}
for(var j=0;j<=24;j+=8){outR<<=1;outR|=(inL>>(j+i))&1;}
out[off+0]=outL>>>0;out[off+1]=outR>>>0;};exports.r28shl=function r28shl(num,shift){return((num<<shift)&0xfffffff)|(num>>>(28-shift));};var pc2table=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];exports.pc2=function pc2(inL,inR,out,off){var outL=0;var outR=0;var len=pc2table.length>>>1;for(var i=0;i<len;i++){outL<<=1;outL|=(inL>>>pc2table[i])&0x1;}
for(var i=len;i<pc2table.length;i++){outR<<=1;outR|=(inR>>>pc2table[i])&0x1;}
out[off+0]=outL>>>0;out[off+1]=outR>>>0;};exports.expand=function expand(r,out,off){var outL=0;var outR=0;outL=((r&1)<<5)|(r>>>27);for(var i=23;i>=15;i-=4){outL<<=6;outL|=(r>>>i)&0x3f;}
for(var i=11;i>=3;i-=4){outR|=(r>>>i)&0x3f;outR<<=6;}
outR|=((r&0x1f)<<1)|(r>>>31);out[off+0]=outL>>>0;out[off+1]=outR>>>0;};var sTable=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];exports.substitute=function substitute(inL,inR){var out=0;for(var i=0;i<4;i++){var b=(inL>>>(18-i*6))&0x3f;var sb=sTable[i*0x40+b];out<<=4;out|=sb;}
for(var i=0;i<4;i++){var b=(inR>>>(18-i*6))&0x3f;var sb=sTable[4*0x40+i*0x40+b];out<<=4;out|=sb;}
return out>>>0;};var permuteTable=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];exports.permute=function permute(num){var out=0;for(var i=0;i<permuteTable.length;i++){out<<=1;out|=(num>>>permuteTable[i])&0x1;}
return out>>>0;};exports.padSplit=function padSplit(num,size,group){var str=num.toString(2);while(str.length<size)
str='0'+str;var out=[];for(var i=0;i<size;i+=group)
out.push(str.slice(i,i+group));return out.join(' ');};}),(function(module,exports,__webpack_require__){"use strict";var assert=__webpack_require__(55);function Cipher(options){this.options=options;this.type=this.options.type;this.blockSize=8;this._init();this.buffer=new Array(this.blockSize);this.bufferOff=0;}
module.exports=Cipher;Cipher.prototype._init=function _init(){};Cipher.prototype.update=function update(data){if(data.length===0)
return[];if(this.type==='decrypt')
return this._updateDecrypt(data);else
return this._updateEncrypt(data);};Cipher.prototype._buffer=function _buffer(data,off){var min=Math.min(this.buffer.length-this.bufferOff,data.length-off);for(var i=0;i<min;i++)
this.buffer[this.bufferOff+i]=data[off+i];this.bufferOff+=min;return min;};Cipher.prototype._flushBuffer=function _flushBuffer(out,off){this._update(this.buffer,0,out,off);this.bufferOff=0;return this.blockSize;};Cipher.prototype._updateEncrypt=function _updateEncrypt(data){var inputOff=0;var outputOff=0;var count=((this.bufferOff+data.length)/this.blockSize)|0;var out=new Array(count*this.blockSize);if(this.bufferOff!==0){inputOff+=this._buffer(data,inputOff);if(this.bufferOff===this.buffer.length)
outputOff+=this._flushBuffer(out,outputOff);}
var max=data.length-((data.length-inputOff)%this.blockSize);for(;inputOff<max;inputOff+=this.blockSize){this._update(data,inputOff,out,outputOff);outputOff+=this.blockSize;}
for(;inputOff<data.length;inputOff++,this.bufferOff++)
this.buffer[this.bufferOff]=data[inputOff];return out;};Cipher.prototype._updateDecrypt=function _updateDecrypt(data){var inputOff=0;var outputOff=0;var count=Math.ceil((this.bufferOff+data.length)/this.blockSize)-1;var out=new Array(count*this.blockSize);for(;count>0;count--){inputOff+=this._buffer(data,inputOff);outputOff+=this._flushBuffer(out,outputOff);}
inputOff+=this._buffer(data,inputOff);return out;};Cipher.prototype.final=function final(buffer){var first;if(buffer)
first=this.update(buffer);var last;if(this.type==='encrypt')
last=this._finalEncrypt();else
last=this._finalDecrypt();if(first)
return first.concat(last);else
return last;};Cipher.prototype._pad=function _pad(buffer,off){if(off===0)
return false;while(off<buffer.length)
buffer[off++]=0;return true;};Cipher.prototype._finalEncrypt=function _finalEncrypt(){if(!this._pad(this.buffer,this.bufferOff))
return[];var out=new Array(this.blockSize);this._update(this.buffer,0,out,0);return out;};Cipher.prototype._unpad=function _unpad(buffer){return buffer;};Cipher.prototype._finalDecrypt=function _finalDecrypt(){assert.equal(this.bufferOff,this.blockSize,'Not enough data to decrypt');var out=new Array(this.blockSize);this._flushBuffer(out,0);return this._unpad(out);};}),(function(module,exports,__webpack_require__){"use strict";var assert=__webpack_require__(55);var inherits=__webpack_require__(7);var des=__webpack_require__(213);var utils=des.utils;var Cipher=des.Cipher;function DESState(){this.tmp=new Array(2);this.keys=null;}
function DES(options){Cipher.call(this,options);var state=new DESState();this._desState=state;this.deriveKeys(state,options.key);}
inherits(DES,Cipher);module.exports=DES;DES.create=function create(options){return new DES(options);};var shiftTable=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];DES.prototype.deriveKeys=function deriveKeys(state,key){state.keys=new Array(16*2);assert.equal(key.length,this.blockSize,'Invalid key length');var kL=utils.readUInt32BE(key,0);var kR=utils.readUInt32BE(key,4);utils.pc1(kL,kR,state.tmp,0);kL=state.tmp[0];kR=state.tmp[1];for(var i=0;i<state.keys.length;i+=2){var shift=shiftTable[i>>>1];kL=utils.r28shl(kL,shift);kR=utils.r28shl(kR,shift);utils.pc2(kL,kR,state.keys,i);}};DES.prototype._update=function _update(inp,inOff,out,outOff){var state=this._desState;var l=utils.readUInt32BE(inp,inOff);var r=utils.readUInt32BE(inp,inOff+4);utils.ip(l,r,state.tmp,0);l=state.tmp[0];r=state.tmp[1];if(this.type==='encrypt')
this._encrypt(state,l,r,state.tmp,0);else
this._decrypt(state,l,r,state.tmp,0);l=state.tmp[0];r=state.tmp[1];utils.writeUInt32BE(out,l,outOff);utils.writeUInt32BE(out,r,outOff+4);};DES.prototype._pad=function _pad(buffer,off){var value=buffer.length-off;for(var i=off;i<buffer.length;i++)
buffer[i]=value;return true;};DES.prototype._unpad=function _unpad(buffer){var pad=buffer[buffer.length-1];for(var i=buffer.length-pad;i<buffer.length;i++)
assert.equal(buffer[i],pad);return buffer.slice(0,buffer.length-pad);};DES.prototype._encrypt=function _encrypt(state,lStart,rStart,out,off){var l=lStart;var r=rStart;for(var i=0;i<state.keys.length;i+=2){var keyL=state.keys[i];var keyR=state.keys[i+1];utils.expand(r,state.tmp,0);keyL^=state.tmp[0];keyR^=state.tmp[1];var s=utils.substitute(keyL,keyR);var f=utils.permute(s);var t=r;r=(l^f)>>>0;l=t;}
utils.rip(r,l,out,off);};DES.prototype._decrypt=function _decrypt(state,lStart,rStart,out,off){var l=rStart;var r=lStart;for(var i=state.keys.length-2;i>=0;i-=2){var keyL=state.keys[i];var keyR=state.keys[i+1];utils.expand(l,state.tmp,0);keyL^=state.tmp[0];keyR^=state.tmp[1];var s=utils.substitute(keyL,keyR);var f=utils.permute(s);var t=l;l=(r^f)>>>0;r=t;}
utils.rip(l,r,out,off);};}),(function(module,exports,__webpack_require__){"use strict";var assert=__webpack_require__(55);var inherits=__webpack_require__(7);var proto={};function CBCState(iv){assert.equal(iv.length,8,'Invalid IV length');this.iv=new Array(8);for(var i=0;i<this.iv.length;i++)
this.iv[i]=iv[i];}
function instantiate(Base){function CBC(options){Base.call(this,options);this._cbcInit();}
inherits(CBC,Base);var keys=Object.keys(proto);for(var i=0;i<keys.length;i++){var key=keys[i];CBC.prototype[key]=proto[key];}
CBC.create=function create(options){return new CBC(options);};return CBC;}
exports.instantiate=instantiate;proto._cbcInit=function _cbcInit(){var state=new CBCState(this.options.iv);this._cbcState=state;};proto._update=function _update(inp,inOff,out,outOff){var state=this._cbcState;var superProto=this.constructor.super_.prototype;var iv=state.iv;if(this.type==='encrypt'){for(var i=0;i<this.blockSize;i++)
iv[i]^=inp[inOff+i];superProto._update.call(this,iv,0,out,outOff);for(var i=0;i<this.blockSize;i++)
iv[i]=out[outOff+i];}else{superProto._update.call(this,inp,inOff,out,outOff);for(var i=0;i<this.blockSize;i++)
out[outOff+i]^=iv[i];for(var i=0;i<this.blockSize;i++)
iv[i]=inp[inOff+i];}};}),(function(module,exports,__webpack_require__){"use strict";var assert=__webpack_require__(55);var inherits=__webpack_require__(7);var des=__webpack_require__(213);var Cipher=des.Cipher;var DES=des.DES;function EDEState(type,key){assert.equal(key.length,24,'Invalid key length');var k1=key.slice(0,8);var k2=key.slice(8,16);var k3=key.slice(16,24);if(type==='encrypt'){this.ciphers=[DES.create({type:'encrypt',key:k1}),DES.create({type:'decrypt',key:k2}),DES.create({type:'encrypt',key:k3})];}else{this.ciphers=[DES.create({type:'decrypt',key:k3}),DES.create({type:'encrypt',key:k2}),DES.create({type:'decrypt',key:k1})];}}
function EDE(options){Cipher.call(this,options);var state=new EDEState(this.type,this.options.key);this._edeState=state;}
inherits(EDE,Cipher);module.exports=EDE;EDE.create=function create(options){return new EDE(options);};EDE.prototype._update=function _update(inp,inOff,out,outOff){var state=this._edeState;state.ciphers[0]._update(inp,inOff,out,outOff);state.ciphers[1]._update(out,outOff,out,outOff);state.ciphers[2]._update(out,outOff,out,outOff);};EDE.prototype._pad=DES.prototype._pad;EDE.prototype._unpad=DES.prototype._unpad;}),(function(module,exports,__webpack_require__){var MODES=__webpack_require__(215)
var AuthCipher=__webpack_require__(327)
var Buffer=__webpack_require__(4).Buffer
var StreamCipher=__webpack_require__(328)
var Transform=__webpack_require__(85)
var aes=__webpack_require__(165)
var ebtk=__webpack_require__(166)
var inherits=__webpack_require__(7)
function Cipher(mode,key,iv){Transform.call(this)
this._cache=new Splitter()
this._cipher=new aes.AES(key)
this._prev=Buffer.from(iv)
this._mode=mode
this._autopadding=true}
inherits(Cipher,Transform)
Cipher.prototype._update=function(data){this._cache.add(data)
var chunk
var thing
var out=[]
while((chunk=this._cache.get())){thing=this._mode.encrypt(this,chunk)
out.push(thing)}
return Buffer.concat(out)}
var PADDING=Buffer.alloc(16,0x10)
Cipher.prototype._final=function(){var chunk=this._cache.flush()
if(this._autopadding){chunk=this._mode.encrypt(this,chunk)
this._cipher.scrub()
return chunk}
if(!chunk.equals(PADDING)){this._cipher.scrub()
throw new Error('data not multiple of block length')}}
Cipher.prototype.setAutoPadding=function(setTo){this._autopadding=!!setTo
return this}
function Splitter(){this.cache=Buffer.allocUnsafe(0)}
Splitter.prototype.add=function(data){this.cache=Buffer.concat([this.cache,data])}
Splitter.prototype.get=function(){if(this.cache.length>15){var out=this.cache.slice(0,16)
this.cache=this.cache.slice(16)
return out}
return null}
Splitter.prototype.flush=function(){var len=16-this.cache.length
var padBuff=Buffer.allocUnsafe(len)
var i=-1
while(++i<len){padBuff.writeUInt8(len,i)}
return Buffer.concat([this.cache,padBuff])}
function createCipheriv(suite,password,iv){var config=MODES[suite.toLowerCase()]
if(!config)throw new TypeError('invalid suite type')
if(typeof password==='string')password=Buffer.from(password)
if(password.length!==config.key/8)throw new TypeError('invalid key length '+password.length)
if(typeof iv==='string')iv=Buffer.from(iv)
if(config.mode!=='GCM'&&iv.length!==config.iv)throw new TypeError('invalid iv length '+iv.length)
if(config.type==='stream'){return new StreamCipher(config.module,password,iv)}else if(config.type==='auth'){return new AuthCipher(config.module,password,iv)}
return new Cipher(config.module,password,iv)}
function createCipher(suite,password){var config=MODES[suite.toLowerCase()]
if(!config)throw new TypeError('invalid suite type')
var keys=ebtk(password,false,config.key,config.iv)
return createCipheriv(suite,keys.key,keys.iv)}
exports.createCipheriv=createCipheriv
exports.createCipher=createCipher}),(function(module,exports){exports.encrypt=function(self,block){return self._cipher.encryptBlock(block)}
exports.decrypt=function(self,block){return self._cipher.decryptBlock(block)}}),(function(module,exports,__webpack_require__){var xor=__webpack_require__(128)
exports.encrypt=function(self,block){var data=xor(block,self._prev)
self._prev=self._cipher.encryptBlock(data)
return self._prev}
exports.decrypt=function(self,block){var pad=self._prev
self._prev=block
var out=self._cipher.decryptBlock(block)
return xor(out,pad)}}),(function(module,exports,__webpack_require__){var Buffer=__webpack_require__(4).Buffer
var xor=__webpack_require__(128)
function encryptStart(self,data,decrypt){var len=data.length
var out=xor(data,self._cache)
self._cache=self._cache.slice(len)
self._prev=Buffer.concat([self._prev,decrypt?data:out])
return out}
exports.encrypt=function(self,data,decrypt){var out=Buffer.allocUnsafe(0)
var len
while(data.length){if(self._cache.length===0){self._cache=self._cipher.encryptBlock(self._prev)
self._prev=Buffer.allocUnsafe(0)}
if(self._cache.length<=data.length){len=self._cache.length
out=Buffer.concat([out,encryptStart(self,data.slice(0,len),decrypt)])
data=data.slice(len)}else{out=Buffer.concat([out,encryptStart(self,data,decrypt)])
break}}
return out}}),(function(module,exports,__webpack_require__){var Buffer=__webpack_require__(4).Buffer
function encryptByte(self,byteParam,decrypt){var pad=self._cipher.encryptBlock(self._prev)
var out=pad[0]^byteParam
self._prev=Buffer.concat([self._prev.slice(1),Buffer.from([decrypt?byteParam:out])])
return out}
exports.encrypt=function(self,chunk,decrypt){var len=chunk.length
var out=Buffer.allocUnsafe(len)
var i=-1
while(++i<len){out[i]=encryptByte(self,chunk[i],decrypt)}
return out}}),(function(module,exports,__webpack_require__){var Buffer=__webpack_require__(4).Buffer
function encryptByte(self,byteParam,decrypt){var pad
var i=-1
var len=8
var out=0
var bit,value
while(++i<len){pad=self._cipher.encryptBlock(self._prev)
bit=(byteParam&(1<<(7-i)))?0x80:0
value=pad[0]^bit
out+=((value&0x80)>>(i%8))
self._prev=shiftIn(self._prev,decrypt?bit:value)}
return out}
function shiftIn(buffer,value){var len=buffer.length
var i=-1
var out=Buffer.allocUnsafe(buffer.length)
buffer=Buffer.concat([buffer,Buffer.from([value])])
while(++i<len){out[i]=buffer[i]<<1|buffer[i+1]>>(7)}
return out}
exports.encrypt=function(self,chunk,decrypt){var len=chunk.length
var out=Buffer.allocUnsafe(len)
var i=-1
while(++i<len){out[i]=encryptByte(self,chunk[i],decrypt)}
return out}}),(function(module,exports,__webpack_require__){(function(Buffer){var xor=__webpack_require__(128)
function getBlock(self){self._prev=self._cipher.encryptBlock(self._prev)
return self._prev}
exports.encrypt=function(self,chunk){while(self._cache.length<chunk.length){self._cache=Buffer.concat([self._cache,getBlock(self)])}
var pad=self._cache.slice(0,chunk.length)
self._cache=self._cache.slice(chunk.length)
return xor(chunk,pad)}}.call(exports,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){var Buffer=__webpack_require__(4).Buffer
var ZEROES=Buffer.alloc(16,0)
function toArray(buf){return[buf.readUInt32BE(0),buf.readUInt32BE(4),buf.readUInt32BE(8),buf.readUInt32BE(12)]}
function fromArray(out){var buf=Buffer.allocUnsafe(16)
buf.writeUInt32BE(out[0]>>>0,0)
buf.writeUInt32BE(out[1]>>>0,4)
buf.writeUInt32BE(out[2]>>>0,8)
buf.writeUInt32BE(out[3]>>>0,12)
return buf}
function GHASH(key){this.h=key
this.state=Buffer.alloc(16,0)
this.cache=Buffer.allocUnsafe(0)}
GHASH.prototype.ghash=function(block){var i=-1
while(++i<block.length){this.state[i]^=block[i]}
this._multiply()}
GHASH.prototype._multiply=function(){var Vi=toArray(this.h)
var Zi=[0,0,0,0]
var j,xi,lsbVi
var i=-1
while(++i<128){xi=(this.state[~~(i/8)]&(1<<(7-(i%8))))!==0
if(xi){Zi[0]^=Vi[0]
Zi[1]^=Vi[1]
Zi[2]^=Vi[2]
Zi[3]^=Vi[3]}
lsbVi=(Vi[3]&1)!==0
for(j=3;j>0;j--){Vi[j]=(Vi[j]>>>1)|((Vi[j-1]&1)<<31)}
Vi[0]=Vi[0]>>>1
if(lsbVi){Vi[0]=Vi[0]^(0xe1<<24)}}
this.state=fromArray(Zi)}
GHASH.prototype.update=function(buf){this.cache=Buffer.concat([this.cache,buf])
var chunk
while(this.cache.length>=16){chunk=this.cache.slice(0,16)
this.cache=this.cache.slice(16)
this.ghash(chunk)}}
GHASH.prototype.final=function(abl,bl){if(this.cache.length){this.ghash(Buffer.concat([this.cache,ZEROES],16))}
this.ghash(fromArray([0,abl,0,bl]))
return this.state}
module.exports=GHASH}),(function(module,exports,__webpack_require__){var AuthCipher=__webpack_require__(327)
var Buffer=__webpack_require__(4).Buffer
var MODES=__webpack_require__(215)
var StreamCipher=__webpack_require__(328)
var Transform=__webpack_require__(85)
var aes=__webpack_require__(165)
var ebtk=__webpack_require__(166)
var inherits=__webpack_require__(7)
function Decipher(mode,key,iv){Transform.call(this)
this._cache=new Splitter()
this._last=void 0
this._cipher=new aes.AES(key)
this._prev=Buffer.from(iv)
this._mode=mode
this._autopadding=true}
inherits(Decipher,Transform)
Decipher.prototype._update=function(data){this._cache.add(data)
var chunk
var thing
var out=[]
while((chunk=this._cache.get(this._autopadding))){thing=this._mode.decrypt(this,chunk)
out.push(thing)}
return Buffer.concat(out)}
Decipher.prototype._final=function(){var chunk=this._cache.flush()
if(this._autopadding){return unpad(this._mode.decrypt(this,chunk))}else if(chunk){throw new Error('data not multiple of block length')}}
Decipher.prototype.setAutoPadding=function(setTo){this._autopadding=!!setTo
return this}
function Splitter(){this.cache=Buffer.allocUnsafe(0)}
Splitter.prototype.add=function(data){this.cache=Buffer.concat([this.cache,data])}
Splitter.prototype.get=function(autoPadding){var out
if(autoPadding){if(this.cache.length>16){out=this.cache.slice(0,16)
this.cache=this.cache.slice(16)
return out}}else{if(this.cache.length>=16){out=this.cache.slice(0,16)
this.cache=this.cache.slice(16)
return out}}
return null}
Splitter.prototype.flush=function(){if(this.cache.length)return this.cache}
function unpad(last){var padded=last[15]
if(padded<1||padded>16){throw new Error('unable to decrypt data')}
var i=-1
while(++i<padded){if(last[(i+(16-padded))]!==padded){throw new Error('unable to decrypt data')}}
if(padded===16)return
return last.slice(0,16-padded)}
function createDecipheriv(suite,password,iv){var config=MODES[suite.toLowerCase()]
if(!config)throw new TypeError('invalid suite type')
if(typeof iv==='string')iv=Buffer.from(iv)
if(config.mode!=='GCM'&&iv.length!==config.iv)throw new TypeError('invalid iv length '+iv.length)
if(typeof password==='string')password=Buffer.from(password)
if(password.length!==config.key/8)throw new TypeError('invalid key length '+password.length)
if(config.type==='stream'){return new StreamCipher(config.module,password,iv,true)}else if(config.type==='auth'){return new AuthCipher(config.module,password,iv,true)}
return new Decipher(config.module,password,iv)}
function createDecipher(suite,password){var config=MODES[suite.toLowerCase()]
if(!config)throw new TypeError('invalid suite type')
var keys=ebtk(password,false,config.key,config.iv)
return createDecipheriv(suite,keys.key,keys.iv)}
exports.createDecipher=createDecipher
exports.createDecipheriv=createDecipheriv}),(function(module,exports){exports['des-ecb']={key:8,iv:0}
exports['des-cbc']=exports.des={key:8,iv:8}
exports['des-ede3-cbc']=exports.des3={key:24,iv:8}
exports['des-ede3']={key:24,iv:0}
exports['des-ede-cbc']={key:16,iv:8}
exports['des-ede']={key:16,iv:0}}),(function(module,exports,__webpack_require__){(function(Buffer){var generatePrime=__webpack_require__(329)
var primes=__webpack_require__(686)
var DH=__webpack_require__(687)
function getDiffieHellman(mod){var prime=new Buffer(primes[mod].prime,'hex')
var gen=new Buffer(primes[mod].gen,'hex')
return new DH(prime,gen)}
var ENCODINGS={'binary':true,'hex':true,'base64':true}
function createDiffieHellman(prime,enc,generator,genc){if(Buffer.isBuffer(enc)||ENCODINGS[enc]===undefined){return createDiffieHellman(prime,'binary',enc,generator)}
enc=enc||'binary'
genc=genc||'binary'
generator=generator||new Buffer([2])
if(!Buffer.isBuffer(generator)){generator=new Buffer(generator,genc)}
if(typeof prime==='number'){return new DH(generatePrime(prime,generator),generator,true)}
if(!Buffer.isBuffer(prime)){prime=new Buffer(prime,enc)}
return new DH(prime,generator,true)}
exports.DiffieHellmanGroup=exports.createDiffieHellmanGroup=exports.getDiffieHellman=getDiffieHellman
exports.createDiffieHellman=exports.DiffieHellman=createDiffieHellman}.call(exports,__webpack_require__(1).Buffer))}),(function(module,exports){}),(function(module,exports){}),(function(module,exports){module.exports={"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}}),(function(module,exports,__webpack_require__){(function(Buffer){var BN=__webpack_require__(29);var MillerRabin=__webpack_require__(330);var millerRabin=new MillerRabin();var TWENTYFOUR=new BN(24);var ELEVEN=new BN(11);var TEN=new BN(10);var THREE=new BN(3);var SEVEN=new BN(7);var primes=__webpack_require__(329);var randomBytes=__webpack_require__(102);module.exports=DH;function setPublicKey(pub,enc){enc=enc||'utf8';if(!Buffer.isBuffer(pub)){pub=new Buffer(pub,enc);}
this._pub=new BN(pub);return this;}
function setPrivateKey(priv,enc){enc=enc||'utf8';if(!Buffer.isBuffer(priv)){priv=new Buffer(priv,enc);}
this._priv=new BN(priv);return this;}
var primeCache={};function checkPrime(prime,generator){var gen=generator.toString('hex');var hex=[gen,prime.toString(16)].join('_');if(hex in primeCache){return primeCache[hex];}
var error=0;if(prime.isEven()||!primes.simpleSieve||!primes.fermatTest(prime)||!millerRabin.test(prime)){error+=1;if(gen==='02'||gen==='05'){error+=8;}else{error+=4;}
primeCache[hex]=error;return error;}
if(!millerRabin.test(prime.shrn(1))){error+=2;}
var rem;switch(gen){case '02':if(prime.mod(TWENTYFOUR).cmp(ELEVEN)){error+=8;}
break;case '05':rem=prime.mod(TEN);if(rem.cmp(THREE)&&rem.cmp(SEVEN)){error+=8;}
break;default:error+=4;}
primeCache[hex]=error;return error;}
function DH(prime,generator,malleable){this.setGenerator(generator);this.__prime=new BN(prime);this._prime=BN.mont(this.__prime);this._primeLen=prime.length;this._pub=undefined;this._priv=undefined;this._primeCode=undefined;if(malleable){this.setPublicKey=setPublicKey;this.setPrivateKey=setPrivateKey;}else{this._primeCode=8;}}
Object.defineProperty(DH.prototype,'verifyError',{enumerable:true,get:function(){if(typeof this._primeCode!=='number'){this._primeCode=checkPrime(this.__prime,this.__gen);}
return this._primeCode;}});DH.prototype.generateKeys=function(){if(!this._priv){this._priv=new BN(randomBytes(this._primeLen));}
this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed();return this.getPublicKey();};DH.prototype.computeSecret=function(other){other=new BN(other);other=other.toRed(this._prime);var secret=other.redPow(this._priv).fromRed();var out=new Buffer(secret.toArray());var prime=this.getPrime();if(out.length<prime.length){var front=new Buffer(prime.length-out.length);front.fill(0);out=Buffer.concat([front,out]);}
return out;};DH.prototype.getPublicKey=function getPublicKey(enc){return formatReturnValue(this._pub,enc);};DH.prototype.getPrivateKey=function getPrivateKey(enc){return formatReturnValue(this._priv,enc);};DH.prototype.getPrime=function(enc){return formatReturnValue(this.__prime,enc);};DH.prototype.getGenerator=function(enc){return formatReturnValue(this._gen,enc);};DH.prototype.setGenerator=function(gen,enc){enc=enc||'utf8';if(!Buffer.isBuffer(gen)){gen=new Buffer(gen,enc);}
this.__gen=gen;this._gen=new BN(gen);return this;};function formatReturnValue(bn,enc){var buf=new Buffer(bn.toArray());if(!enc){return buf;}else{return buf.toString(enc);}}}.call(exports,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){(function(Buffer){var createHash=__webpack_require__(103)
var stream=__webpack_require__(67)
var inherits=__webpack_require__(7)
var sign=__webpack_require__(689)
var verify=__webpack_require__(724)
var algorithms=__webpack_require__(319)
Object.keys(algorithms).forEach(function(key){algorithms[key].id=new Buffer(algorithms[key].id,'hex')
algorithms[key.toLowerCase()]=algorithms[key]})
function Sign(algorithm){stream.Writable.call(this)
var data=algorithms[algorithm]
if(!data)throw new Error('Unknown message digest')
this._hashType=data.hash
this._hash=createHash(data.hash)
this._tag=data.id
this._signType=data.sign}
inherits(Sign,stream.Writable)
Sign.prototype._write=function _write(data,_,done){this._hash.update(data)
done()}
Sign.prototype.update=function update(data,enc){if(typeof data==='string')data=new Buffer(data,enc)
this._hash.update(data)
return this}
Sign.prototype.sign=function signMethod(key,enc){this.end()
var hash=this._hash.digest()
var sig=sign(hash,key,this._hashType,this._signType,this._tag)
return enc?sig.toString(enc):sig}
function Verify(algorithm){stream.Writable.call(this)
var data=algorithms[algorithm]
if(!data)throw new Error('Unknown message digest')
this._hash=createHash(data.hash)
this._tag=data.id
this._signType=data.sign}
inherits(Verify,stream.Writable)
Verify.prototype._write=function _write(data,_,done){this._hash.update(data)
done()}
Verify.prototype.update=function update(data,enc){if(typeof data==='string')data=new Buffer(data,enc)
this._hash.update(data)
return this}
Verify.prototype.verify=function verifyMethod(key,sig,enc){if(typeof sig==='string')sig=new Buffer(sig,enc)
this.end()
var hash=this._hash.digest()
return verify(sig,hash,key,this._signType,this._tag)}
function createSign(algorithm){return new Sign(algorithm)}
function createVerify(algorithm){return new Verify(algorithm)}
module.exports={Sign:createSign,Verify:createVerify,createSign:createSign,createVerify:createVerify}}.call(exports,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){(function(Buffer){var createHmac=__webpack_require__(164)
var crt=__webpack_require__(216)
var EC=__webpack_require__(46).ec
var BN=__webpack_require__(29)
var parseKeys=__webpack_require__(168)
var curves=__webpack_require__(340)
function sign(hash,key,hashType,signType,tag){var priv=parseKeys(key)
if(priv.curve){if(signType!=='ecdsa'&&signType!=='ecdsa/rsa')throw new Error('wrong private key type')
return ecSign(hash,priv)}else if(priv.type==='dsa'){if(signType!=='dsa')throw new Error('wrong private key type')
return dsaSign(hash,priv,hashType)}else{if(signType!=='rsa'&&signType!=='ecdsa/rsa')throw new Error('wrong private key type')}
hash=Buffer.concat([tag,hash])
var len=priv.modulus.byteLength()
var pad=[0,1]
while(hash.length+pad.length+1<len)pad.push(0xff)
pad.push(0x00)
var i=-1
while(++i<hash.length)pad.push(hash[i])
var out=crt(pad,priv)
return out}
function ecSign(hash,priv){var curveId=curves[priv.curve.join('.')]
if(!curveId)throw new Error('unknown curve '+priv.curve.join('.'))
var curve=new EC(curveId)
var key=curve.keyFromPrivate(priv.privateKey)
var out=key.sign(hash)
return new Buffer(out.toDER())}
function dsaSign(hash,priv,algo){var x=priv.params.priv_key
var p=priv.params.p
var q=priv.params.q
var g=priv.params.g
var r=new BN(0)
var k
var H=bits2int(hash,q).mod(q)
var s=false
var kv=getKey(x,q,hash,algo)
while(s===false){k=makeKey(q,kv,algo)
r=makeR(g,k,p,q)
s=k.invm(q).imul(H.add(x.mul(r))).mod(q)
if(s.cmpn(0)===0){s=false
r=new BN(0)}}
return toDER(r,s)}
function toDER(r,s){r=r.toArray()
s=s.toArray()
if(r[0]&0x80)r=[0].concat(r)
if(s[0]&0x80)s=[0].concat(s)
var total=r.length+s.length+4
var res=[0x30,total,0x02,r.length]
res=res.concat(r,[0x02,s.length],s)
return new Buffer(res)}
function getKey(x,q,hash,algo){x=new Buffer(x.toArray())
if(x.length<q.byteLength()){var zeros=new Buffer(q.byteLength()-x.length)
zeros.fill(0)
x=Buffer.concat([zeros,x])}
var hlen=hash.length
var hbits=bits2octets(hash,q)
var v=new Buffer(hlen)
v.fill(1)
var k=new Buffer(hlen)
k.fill(0)
k=createHmac(algo,k).update(v).update(new Buffer([0])).update(x).update(hbits).digest()
v=createHmac(algo,k).update(v).digest()
k=createHmac(algo,k).update(v).update(new Buffer([1])).update(x).update(hbits).digest()
v=createHmac(algo,k).update(v).digest()
return{k:k,v:v}}
function bits2int(obits,q){var bits=new BN(obits)
var shift=(obits.length<<3)-q.bitLength()
if(shift>0)bits.ishrn(shift)
return bits}
function bits2octets(bits,q){bits=bits2int(bits,q)
bits=bits.mod(q)
var out=new Buffer(bits.toArray())
if(out.length<q.byteLength()){var zeros=new Buffer(q.byteLength()-out.length)
zeros.fill(0)
out=Buffer.concat([zeros,out])}
return out}
function makeKey(q,kv,algo){var t
var k
do{t=new Buffer(0)
while(t.length*8<q.bitLength()){kv.v=createHmac(algo,kv.k).update(kv.v).digest()
t=Buffer.concat([t,kv.v])}
k=bits2int(t,q)
kv.k=createHmac(algo,kv.k).update(kv.v).update(new Buffer([0])).digest()
kv.v=createHmac(algo,kv.k).update(kv.v).digest()}while(k.cmp(q)!==-1)
return k}
function makeR(g,k,p,q){return g.toRed(BN.mont(p)).redPow(k).fromRed().mod(q)}
module.exports=sign
module.exports.getKey=getKey
module.exports.makeKey=makeKey}.call(exports,__webpack_require__(1).Buffer))}),(function(module,exports){module.exports={"_from":"elliptic@^6.0.0","_id":"elliptic@6.4.1","_inBundle":false,"_integrity":"sha512-BsXLz5sqX8OHcsh7CqBMztyXARmGQ3LWPtGjJi6DiJHq5C/qvi9P3OqgswKSDftbu8+IoI/QDTAm2fFnQ9SZSQ==","_location":"/elliptic","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"elliptic@^6.0.0","name":"elliptic","escapedName":"elliptic","rawSpec":"^6.0.0","saveSpec":null,"fetchSpec":"^6.0.0"},"_requiredBy":["/browserify-sign","/create-ecdh"],"_resolved":"https://registry.npmjs.org/elliptic/-/elliptic-6.4.1.tgz","_shasum":"c2d0b7776911b86722c632c3c06c60f2f819939a","_spec":"elliptic@^6.0.0","_where":"/home/alex/Desktop/Node-WebDollar/node_modules/browserify-sign","author":{"name":"Fedor Indutny","email":"fedor@indutny.com"},"bugs":{"url":"https://github.com/indutny/elliptic/issues"},"bundleDependencies":false,"dependencies":{"bn.js":"^4.4.0","brorand":"^1.0.1","hash.js":"^1.0.0","hmac-drbg":"^1.0.0","inherits":"^2.0.1","minimalistic-assert":"^1.0.0","minimalistic-crypto-utils":"^1.0.0"},"deprecated":false,"description":"EC cryptography","devDependencies":{"brfs":"^1.4.3","coveralls":"^2.11.3","grunt":"^0.4.5","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^8.6.2","istanbul":"^0.4.2","jscs":"^2.9.0","jshint":"^2.6.0","mocha":"^2.1.0"},"files":["lib"],"homepage":"https://github.com/indutny/elliptic","keywords":["EC","Elliptic","curve","Cryptography"],"license":"MIT","main":"lib/elliptic.js","name":"elliptic","repository":{"type":"git","url":"git+ssh://git@github.com/indutny/elliptic.git"},"scripts":{"jscs":"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js","jshint":"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js","lint":"npm run jscs && npm run jshint","test":"npm run lint && npm run unit","unit":"istanbul test _mocha --reporter=spec test/index.js","version":"grunt dist && git add dist/"},"version":"6.4.1"}}),(function(module,exports,__webpack_require__){"use strict";var utils=exports;var BN=__webpack_require__(29);var minAssert=__webpack_require__(55);var minUtils=__webpack_require__(332);utils.assert=minAssert;utils.toArray=minUtils.toArray;utils.zero2=minUtils.zero2;utils.toHex=minUtils.toHex;utils.encode=minUtils.encode;function getNAF(num,w){var naf=[];var ws=1<<(w+1);var k=num.clone();while(k.cmpn(1)>=0){var z;if(k.isOdd()){var mod=k.andln(ws-1);if(mod>(ws>>1)-1)
z=(ws>>1)-mod;else
z=mod;k.isubn(z);}else{z=0;}
naf.push(z);var shift=(k.cmpn(0)!==0&&k.andln(ws-1)===0)?(w+1):1;for(var i=1;i<shift;i++)
naf.push(0);k.iushrn(shift);}
return naf;}
utils.getNAF=getNAF;function getJSF(k1,k2){var jsf=[[],[]];k1=k1.clone();k2=k2.clone();var d1=0;var d2=0;while(k1.cmpn(-d1)>0||k2.cmpn(-d2)>0){var m14=(k1.andln(3)+d1)&3;var m24=(k2.andln(3)+d2)&3;if(m14===3)
m14=-1;if(m24===3)
m24=-1;var u1;if((m14&1)===0){u1=0;}else{var m8=(k1.andln(7)+d1)&7;if((m8===3||m8===5)&&m24===2)
u1=-m14;else
u1=m14;}
jsf[0].push(u1);var u2;if((m24&1)===0){u2=0;}else{var m8=(k2.andln(7)+d2)&7;if((m8===3||m8===5)&&m14===2)
u2=-m24;else
u2=m24;}
jsf[1].push(u2);if(2*d1===u1+1)
d1=1-d1;if(2*d2===u2+1)
d2=1-d2;k1.iushrn(1);k2.iushrn(1);}
return jsf;}
utils.getJSF=getJSF;function cachedProperty(obj,name,computer){var key='_'+name;obj.prototype[name]=function cachedProperty(){return this[key]!==undefined?this[key]:this[key]=computer.call(this);};}
utils.cachedProperty=cachedProperty;function parseBytes(bytes){return typeof bytes==='string'?utils.toArray(bytes,'hex'):bytes;}
utils.parseBytes=parseBytes;function intFromLE(bytes){return new BN(bytes,'hex','le');}
utils.intFromLE=intFromLE;}),(function(module,exports,__webpack_require__){"use strict";var BN=__webpack_require__(29);var elliptic=__webpack_require__(46);var utils=elliptic.utils;var getNAF=utils.getNAF;var getJSF=utils.getJSF;var assert=utils.assert;function BaseCurve(type,conf){this.type=type;this.p=new BN(conf.p,16);this.red=conf.prime?BN.red(conf.prime):BN.mont(this.p);this.zero=new BN(0).toRed(this.red);this.one=new BN(1).toRed(this.red);this.two=new BN(2).toRed(this.red);this.n=conf.n&&new BN(conf.n,16);this.g=conf.g&&this.pointFromJSON(conf.g,conf.gRed);this._wnafT1=new Array(4);this._wnafT2=new Array(4);this._wnafT3=new Array(4);this._wnafT4=new Array(4);var adjustCount=this.n&&this.p.div(this.n);if(!adjustCount||adjustCount.cmpn(100)>0){this.redN=null;}else{this._maxwellTrick=true;this.redN=this.n.toRed(this.red);}}
module.exports=BaseCurve;BaseCurve.prototype.point=function point(){throw new Error('Not implemented');};BaseCurve.prototype.validate=function validate(){throw new Error('Not implemented');};BaseCurve.prototype._fixedNafMul=function _fixedNafMul(p,k){assert(p.precomputed);var doubles=p._getDoubles();var naf=getNAF(k,1);var I=(1<<(doubles.step+1))-(doubles.step%2===0?2:1);I/=3;var repr=[];for(var j=0;j<naf.length;j+=doubles.step){var nafW=0;for(var k=j+doubles.step-1;k>=j;k--)
nafW=(nafW<<1)+naf[k];repr.push(nafW);}
var a=this.jpoint(null,null,null);var b=this.jpoint(null,null,null);for(var i=I;i>0;i--){for(var j=0;j<repr.length;j++){var nafW=repr[j];if(nafW===i)
b=b.mixedAdd(doubles.points[j]);else if(nafW===-i)
b=b.mixedAdd(doubles.points[j].neg());}
a=a.add(b);}
return a.toP();};BaseCurve.prototype._wnafMul=function _wnafMul(p,k){var w=4;var nafPoints=p._getNAFPoints(w);w=nafPoints.wnd;var wnd=nafPoints.points;var naf=getNAF(k,w);var acc=this.jpoint(null,null,null);for(var i=naf.length-1;i>=0;i--){for(var k=0;i>=0&&naf[i]===0;i--)
k++;if(i>=0)
k++;acc=acc.dblp(k);if(i<0)
break;var z=naf[i];assert(z!==0);if(p.type==='affine'){if(z>0)
acc=acc.mixedAdd(wnd[(z-1)>>1]);else
acc=acc.mixedAdd(wnd[(-z-1)>>1].neg());}else{if(z>0)
acc=acc.add(wnd[(z-1)>>1]);else
acc=acc.add(wnd[(-z-1)>>1].neg());}}
return p.type==='affine'?acc.toP():acc;};BaseCurve.prototype._wnafMulAdd=function _wnafMulAdd(defW,points,coeffs,len,jacobianResult){var wndWidth=this._wnafT1;var wnd=this._wnafT2;var naf=this._wnafT3;var max=0;for(var i=0;i<len;i++){var p=points[i];var nafPoints=p._getNAFPoints(defW);wndWidth[i]=nafPoints.wnd;wnd[i]=nafPoints.points;}
for(var i=len-1;i>=1;i-=2){var a=i-1;var b=i;if(wndWidth[a]!==1||wndWidth[b]!==1){naf[a]=getNAF(coeffs[a],wndWidth[a]);naf[b]=getNAF(coeffs[b],wndWidth[b]);max=Math.max(naf[a].length,max);max=Math.max(naf[b].length,max);continue;}
var comb=[points[a],null,null,points[b]];if(points[a].y.cmp(points[b].y)===0){comb[1]=points[a].add(points[b]);comb[2]=points[a].toJ().mixedAdd(points[b].neg());}else if(points[a].y.cmp(points[b].y.redNeg())===0){comb[1]=points[a].toJ().mixedAdd(points[b]);comb[2]=points[a].add(points[b].neg());}else{comb[1]=points[a].toJ().mixedAdd(points[b]);comb[2]=points[a].toJ().mixedAdd(points[b].neg());}
var index=[-3,-1,-5,-7,0,7,5,1,3];var jsf=getJSF(coeffs[a],coeffs[b]);max=Math.max(jsf[0].length,max);naf[a]=new Array(max);naf[b]=new Array(max);for(var j=0;j<max;j++){var ja=jsf[0][j]|0;var jb=jsf[1][j]|0;naf[a][j]=index[(ja+1)*3+(jb+1)];naf[b][j]=0;wnd[a]=comb;}}
var acc=this.jpoint(null,null,null);var tmp=this._wnafT4;for(var i=max;i>=0;i--){var k=0;while(i>=0){var zero=true;for(var j=0;j<len;j++){tmp[j]=naf[j][i]|0;if(tmp[j]!==0)
zero=false;}
if(!zero)
break;k++;i--;}
if(i>=0)
k++;acc=acc.dblp(k);if(i<0)
break;for(var j=0;j<len;j++){var z=tmp[j];var p;if(z===0)
continue;else if(z>0)
p=wnd[j][(z-1)>>1];else if(z<0)
p=wnd[j][(-z-1)>>1].neg();if(p.type==='affine')
acc=acc.mixedAdd(p);else
acc=acc.add(p);}}
for(var i=0;i<len;i++)
wnd[i]=null;if(jacobianResult)
return acc;else
return acc.toP();};function BasePoint(curve,type){this.curve=curve;this.type=type;this.precomputed=null;}
BaseCurve.BasePoint=BasePoint;BasePoint.prototype.eq=function eq(){throw new Error('Not implemented');};BasePoint.prototype.validate=function validate(){return this.curve.validate(this);};BaseCurve.prototype.decodePoint=function decodePoint(bytes,enc){bytes=utils.toArray(bytes,enc);var len=this.p.byteLength();if((bytes[0]===0x04||bytes[0]===0x06||bytes[0]===0x07)&&bytes.length-1===2*len){if(bytes[0]===0x06)
assert(bytes[bytes.length-1]%2===0);else if(bytes[0]===0x07)
assert(bytes[bytes.length-1]%2===1);var res=this.point(bytes.slice(1,1+len),bytes.slice(1+len,1+2*len));return res;}else if((bytes[0]===0x02||bytes[0]===0x03)&&bytes.length-1===len){return this.pointFromX(bytes.slice(1,1+len),bytes[0]===0x03);}
throw new Error('Unknown point format');};BasePoint.prototype.encodeCompressed=function encodeCompressed(enc){return this.encode(enc,true);};BasePoint.prototype._encode=function _encode(compact){var len=this.curve.p.byteLength();var x=this.getX().toArray('be',len);if(compact)
return[this.getY().isEven()?0x02:0x03].concat(x);return[0x04].concat(x,this.getY().toArray('be',len));};BasePoint.prototype.encode=function encode(enc,compact){return utils.encode(this._encode(compact),enc);};BasePoint.prototype.precompute=function precompute(power){if(this.precomputed)
return this;var precomputed={doubles:null,naf:null,beta:null};precomputed.naf=this._getNAFPoints(8);precomputed.doubles=this._getDoubles(4,power);precomputed.beta=this._getBeta();this.precomputed=precomputed;return this;};BasePoint.prototype._hasDoubles=function _hasDoubles(k){if(!this.precomputed)
return false;var doubles=this.precomputed.doubles;if(!doubles)
return false;return doubles.points.length>=Math.ceil((k.bitLength()+1)/doubles.step);};BasePoint.prototype._getDoubles=function _getDoubles(step,power){if(this.precomputed&&this.precomputed.doubles)
return this.precomputed.doubles;var doubles=[this];var acc=this;for(var i=0;i<power;i+=step){for(var j=0;j<step;j++)
acc=acc.dbl();doubles.push(acc);}
return{step:step,points:doubles};};BasePoint.prototype._getNAFPoints=function _getNAFPoints(wnd){if(this.precomputed&&this.precomputed.naf)
return this.precomputed.naf;var res=[this];var max=(1<<wnd)-1;var dbl=max===1?null:this.dbl();for(var i=1;i<max;i++)
res[i]=res[i-1].add(dbl);return{wnd:wnd,points:res};};BasePoint.prototype._getBeta=function _getBeta(){return null;};BasePoint.prototype.dblp=function dblp(k){var r=this;for(var i=0;i<k;i++)
r=r.dbl();return r;};}),(function(module,exports,__webpack_require__){"use strict";var curve=__webpack_require__(167);var elliptic=__webpack_require__(46);var BN=__webpack_require__(29);var inherits=__webpack_require__(7);var Base=curve.base;var assert=elliptic.utils.assert;function ShortCurve(conf){Base.call(this,'short',conf);this.a=new BN(conf.a,16).toRed(this.red);this.b=new BN(conf.b,16).toRed(this.red);this.tinv=this.two.redInvm();this.zeroA=this.a.fromRed().cmpn(0)===0;this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0;this.endo=this._getEndomorphism(conf);this._endoWnafT1=new Array(4);this._endoWnafT2=new Array(4);}
inherits(ShortCurve,Base);module.exports=ShortCurve;ShortCurve.prototype._getEndomorphism=function _getEndomorphism(conf){if(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)
return;var beta;var lambda;if(conf.beta){beta=new BN(conf.beta,16).toRed(this.red);}else{var betas=this._getEndoRoots(this.p);beta=betas[0].cmp(betas[1])<0?betas[0]:betas[1];beta=beta.toRed(this.red);}
if(conf.lambda){lambda=new BN(conf.lambda,16);}else{var lambdas=this._getEndoRoots(this.n);if(this.g.mul(lambdas[0]).x.cmp(this.g.x.redMul(beta))===0){lambda=lambdas[0];}else{lambda=lambdas[1];assert(this.g.mul(lambda).x.cmp(this.g.x.redMul(beta))===0);}}
var basis;if(conf.basis){basis=conf.basis.map(function(vec){return{a:new BN(vec.a,16),b:new BN(vec.b,16)};});}else{basis=this._getEndoBasis(lambda);}
return{beta:beta,lambda:lambda,basis:basis};};ShortCurve.prototype._getEndoRoots=function _getEndoRoots(num){var red=num===this.p?this.red:BN.mont(num);var tinv=new BN(2).toRed(red).redInvm();var ntinv=tinv.redNeg();var s=new BN(3).toRed(red).redNeg().redSqrt().redMul(tinv);var l1=ntinv.redAdd(s).fromRed();var l2=ntinv.redSub(s).fromRed();return[l1,l2];};ShortCurve.prototype._getEndoBasis=function _getEndoBasis(lambda){var aprxSqrt=this.n.ushrn(Math.floor(this.n.bitLength()/2));var u=lambda;var v=this.n.clone();var x1=new BN(1);var y1=new BN(0);var x2=new BN(0);var y2=new BN(1);var a0;var b0;var a1;var b1;var a2;var b2;var prevR;var i=0;var r;var x;while(u.cmpn(0)!==0){var q=v.div(u);r=v.sub(q.mul(u));x=x2.sub(q.mul(x1));var y=y2.sub(q.mul(y1));if(!a1&&r.cmp(aprxSqrt)<0){a0=prevR.neg();b0=x1;a1=r.neg();b1=x;}else if(a1&&++i===2){break;}
prevR=r;v=u;u=r;x2=x1;x1=x;y2=y1;y1=y;}
a2=r.neg();b2=x;var len1=a1.sqr().add(b1.sqr());var len2=a2.sqr().add(b2.sqr());if(len2.cmp(len1)>=0){a2=a0;b2=b0;}
if(a1.negative){a1=a1.neg();b1=b1.neg();}
if(a2.negative){a2=a2.neg();b2=b2.neg();}
return[{a:a1,b:b1},{a:a2,b:b2}];};ShortCurve.prototype._endoSplit=function _endoSplit(k){var basis=this.endo.basis;var v1=basis[0];var v2=basis[1];var c1=v2.b.mul(k).divRound(this.n);var c2=v1.b.neg().mul(k).divRound(this.n);var p1=c1.mul(v1.a);var p2=c2.mul(v2.a);var q1=c1.mul(v1.b);var q2=c2.mul(v2.b);var k1=k.sub(p1).sub(p2);var k2=q1.add(q2).neg();return{k1:k1,k2:k2};};ShortCurve.prototype.pointFromX=function pointFromX(x,odd){x=new BN(x,16);if(!x.red)
x=x.toRed(this.red);var y2=x.redSqr().redMul(x).redIAdd(x.redMul(this.a)).redIAdd(this.b);var y=y2.redSqrt();if(y.redSqr().redSub(y2).cmp(this.zero)!==0)
throw new Error('invalid point');var isOdd=y.fromRed().isOdd();if(odd&&!isOdd||!odd&&isOdd)
y=y.redNeg();return this.point(x,y);};ShortCurve.prototype.validate=function validate(point){if(point.inf)
return true;var x=point.x;var y=point.y;var ax=this.a.redMul(x);var rhs=x.redSqr().redMul(x).redIAdd(ax).redIAdd(this.b);return y.redSqr().redISub(rhs).cmpn(0)===0;};ShortCurve.prototype._endoWnafMulAdd=function _endoWnafMulAdd(points,coeffs,jacobianResult){var npoints=this._endoWnafT1;var ncoeffs=this._endoWnafT2;for(var i=0;i<points.length;i++){var split=this._endoSplit(coeffs[i]);var p=points[i];var beta=p._getBeta();if(split.k1.negative){split.k1.ineg();p=p.neg(true);}
if(split.k2.negative){split.k2.ineg();beta=beta.neg(true);}
npoints[i*2]=p;npoints[i*2+1]=beta;ncoeffs[i*2]=split.k1;ncoeffs[i*2+1]=split.k2;}
var res=this._wnafMulAdd(1,npoints,ncoeffs,i*2,jacobianResult);for(var j=0;j<i*2;j++){npoints[j]=null;ncoeffs[j]=null;}
return res;};function Point(curve,x,y,isRed){Base.BasePoint.call(this,curve,'affine');if(x===null&&y===null){this.x=null;this.y=null;this.inf=true;}else{this.x=new BN(x,16);this.y=new BN(y,16);if(isRed){this.x.forceRed(this.curve.red);this.y.forceRed(this.curve.red);}
if(!this.x.red)
this.x=this.x.toRed(this.curve.red);if(!this.y.red)
this.y=this.y.toRed(this.curve.red);this.inf=false;}}
inherits(Point,Base.BasePoint);ShortCurve.prototype.point=function point(x,y,isRed){return new Point(this,x,y,isRed);};ShortCurve.prototype.pointFromJSON=function pointFromJSON(obj,red){return Point.fromJSON(this,obj,red);};Point.prototype._getBeta=function _getBeta(){if(!this.curve.endo)
return;var pre=this.precomputed;if(pre&&pre.beta)
return pre.beta;var beta=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(pre){var curve=this.curve;var endoMul=function(p){return curve.point(p.x.redMul(curve.endo.beta),p.y);};pre.beta=beta;beta.precomputed={beta:null,naf:pre.naf&&{wnd:pre.naf.wnd,points:pre.naf.points.map(endoMul)},doubles:pre.doubles&&{step:pre.doubles.step,points:pre.doubles.points.map(endoMul)}};}
return beta;};Point.prototype.toJSON=function toJSON(){if(!this.precomputed)
return[this.x,this.y];return[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}];};Point.fromJSON=function fromJSON(curve,obj,red){if(typeof obj==='string')
obj=JSON.parse(obj);var res=curve.point(obj[0],obj[1],red);if(!obj[2])
return res;function obj2point(obj){return curve.point(obj[0],obj[1],red);}
var pre=obj[2];res.precomputed={beta:null,doubles:pre.doubles&&{step:pre.doubles.step,points:[res].concat(pre.doubles.points.map(obj2point))},naf:pre.naf&&{wnd:pre.naf.wnd,points:[res].concat(pre.naf.points.map(obj2point))}};return res;};Point.prototype.inspect=function inspect(){if(this.isInfinity())
return '<EC Point Infinity>';return '<EC Point x: '+this.x.fromRed().toString(16,2)+
' y: '+this.y.fromRed().toString(16,2)+'>';};Point.prototype.isInfinity=function isInfinity(){return this.inf;};Point.prototype.add=function add(p){if(this.inf)
return p;if(p.inf)
return this;if(this.eq(p))
return this.dbl();if(this.neg().eq(p))
return this.curve.point(null,null);if(this.x.cmp(p.x)===0)
return this.curve.point(null,null);var c=this.y.redSub(p.y);if(c.cmpn(0)!==0)
c=c.redMul(this.x.redSub(p.x).redInvm());var nx=c.redSqr().redISub(this.x).redISub(p.x);var ny=c.redMul(this.x.redSub(nx)).redISub(this.y);return this.curve.point(nx,ny);};Point.prototype.dbl=function dbl(){if(this.inf)
return this;var ys1=this.y.redAdd(this.y);if(ys1.cmpn(0)===0)
return this.curve.point(null,null);var a=this.curve.a;var x2=this.x.redSqr();var dyinv=ys1.redInvm();var c=x2.redAdd(x2).redIAdd(x2).redIAdd(a).redMul(dyinv);var nx=c.redSqr().redISub(this.x.redAdd(this.x));var ny=c.redMul(this.x.redSub(nx)).redISub(this.y);return this.curve.point(nx,ny);};Point.prototype.getX=function getX(){return this.x.fromRed();};Point.prototype.getY=function getY(){return this.y.fromRed();};Point.prototype.mul=function mul(k){k=new BN(k,16);if(this._hasDoubles(k))
return this.curve._fixedNafMul(this,k);else if(this.curve.endo)
return this.curve._endoWnafMulAdd([this],[k]);else
return this.curve._wnafMul(this,k);};Point.prototype.mulAdd=function mulAdd(k1,p2,k2){var points=[this,p2];var coeffs=[k1,k2];if(this.curve.endo)
return this.curve._endoWnafMulAdd(points,coeffs);else
return this.curve._wnafMulAdd(1,points,coeffs,2);};Point.prototype.jmulAdd=function jmulAdd(k1,p2,k2){var points=[this,p2];var coeffs=[k1,k2];if(this.curve.endo)
return this.curve._endoWnafMulAdd(points,coeffs,true);else
return this.curve._wnafMulAdd(1,points,coeffs,2,true);};Point.prototype.eq=function eq(p){return this===p||this.inf===p.inf&&(this.inf||this.x.cmp(p.x)===0&&this.y.cmp(p.y)===0);};Point.prototype.neg=function neg(_precompute){if(this.inf)
return this;var res=this.curve.point(this.x,this.y.redNeg());if(_precompute&&this.precomputed){var pre=this.precomputed;var negate=function(p){return p.neg();};res.precomputed={naf:pre.naf&&{wnd:pre.naf.wnd,points:pre.naf.points.map(negate)},doubles:pre.doubles&&{step:pre.doubles.step,points:pre.doubles.points.map(negate)}};}
return res;};Point.prototype.toJ=function toJ(){if(this.inf)
return this.curve.jpoint(null,null,null);var res=this.curve.jpoint(this.x,this.y,this.curve.one);return res;};function JPoint(curve,x,y,z){Base.BasePoint.call(this,curve,'jacobian');if(x===null&&y===null&&z===null){this.x=this.curve.one;this.y=this.curve.one;this.z=new BN(0);}else{this.x=new BN(x,16);this.y=new BN(y,16);this.z=new BN(z,16);}
if(!this.x.red)
this.x=this.x.toRed(this.curve.red);if(!this.y.red)
this.y=this.y.toRed(this.curve.red);if(!this.z.red)
this.z=this.z.toRed(this.curve.red);this.zOne=this.z===this.curve.one;}
inherits(JPoint,Base.BasePoint);ShortCurve.prototype.jpoint=function jpoint(x,y,z){return new JPoint(this,x,y,z);};JPoint.prototype.toP=function toP(){if(this.isInfinity())
return this.curve.point(null,null);var zinv=this.z.redInvm();var zinv2=zinv.redSqr();var ax=this.x.redMul(zinv2);var ay=this.y.redMul(zinv2).redMul(zinv);return this.curve.point(ax,ay);};JPoint.prototype.neg=function neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z);};JPoint.prototype.add=function add(p){if(this.isInfinity())
return p;if(p.isInfinity())
return this;var pz2=p.z.redSqr();var z2=this.z.redSqr();var u1=this.x.redMul(pz2);var u2=p.x.redMul(z2);var s1=this.y.redMul(pz2.redMul(p.z));var s2=p.y.redMul(z2.redMul(this.z));var h=u1.redSub(u2);var r=s1.redSub(s2);if(h.cmpn(0)===0){if(r.cmpn(0)!==0)
return this.curve.jpoint(null,null,null);else
return this.dbl();}
var h2=h.redSqr();var h3=h2.redMul(h);var v=u1.redMul(h2);var nx=r.redSqr().redIAdd(h3).redISub(v).redISub(v);var ny=r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));var nz=this.z.redMul(p.z).redMul(h);return this.curve.jpoint(nx,ny,nz);};JPoint.prototype.mixedAdd=function mixedAdd(p){if(this.isInfinity())
return p.toJ();if(p.isInfinity())
return this;var z2=this.z.redSqr();var u1=this.x;var u2=p.x.redMul(z2);var s1=this.y;var s2=p.y.redMul(z2).redMul(this.z);var h=u1.redSub(u2);var r=s1.redSub(s2);if(h.cmpn(0)===0){if(r.cmpn(0)!==0)
return this.curve.jpoint(null,null,null);else
return this.dbl();}
var h2=h.redSqr();var h3=h2.redMul(h);var v=u1.redMul(h2);var nx=r.redSqr().redIAdd(h3).redISub(v).redISub(v);var ny=r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));var nz=this.z.redMul(h);return this.curve.jpoint(nx,ny,nz);};JPoint.prototype.dblp=function dblp(pow){if(pow===0)
return this;if(this.isInfinity())
return this;if(!pow)
return this.dbl();if(this.curve.zeroA||this.curve.threeA){var r=this;for(var i=0;i<pow;i++)
r=r.dbl();return r;}
var a=this.curve.a;var tinv=this.curve.tinv;var jx=this.x;var jy=this.y;var jz=this.z;var jz4=jz.redSqr().redSqr();var jyd=jy.redAdd(jy);for(var i=0;i<pow;i++){var jx2=jx.redSqr();var jyd2=jyd.redSqr();var jyd4=jyd2.redSqr();var c=jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));var t1=jx.redMul(jyd2);var nx=c.redSqr().redISub(t1.redAdd(t1));var t2=t1.redISub(nx);var dny=c.redMul(t2);dny=dny.redIAdd(dny).redISub(jyd4);var nz=jyd.redMul(jz);if(i+1<pow)
jz4=jz4.redMul(jyd4);jx=nx;jz=nz;jyd=dny;}
return this.curve.jpoint(jx,jyd.redMul(tinv),jz);};JPoint.prototype.dbl=function dbl(){if(this.isInfinity())
return this;if(this.curve.zeroA)
return this._zeroDbl();else if(this.curve.threeA)
return this._threeDbl();else
return this._dbl();};JPoint.prototype._zeroDbl=function _zeroDbl(){var nx;var ny;var nz;if(this.zOne){var xx=this.x.redSqr();var yy=this.y.redSqr();var yyyy=yy.redSqr();var s=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);s=s.redIAdd(s);var m=xx.redAdd(xx).redIAdd(xx);var t=m.redSqr().redISub(s).redISub(s);var yyyy8=yyyy.redIAdd(yyyy);yyyy8=yyyy8.redIAdd(yyyy8);yyyy8=yyyy8.redIAdd(yyyy8);nx=t;ny=m.redMul(s.redISub(t)).redISub(yyyy8);nz=this.y.redAdd(this.y);}else{var a=this.x.redSqr();var b=this.y.redSqr();var c=b.redSqr();var d=this.x.redAdd(b).redSqr().redISub(a).redISub(c);d=d.redIAdd(d);var e=a.redAdd(a).redIAdd(a);var f=e.redSqr();var c8=c.redIAdd(c);c8=c8.redIAdd(c8);c8=c8.redIAdd(c8);nx=f.redISub(d).redISub(d);ny=e.redMul(d.redISub(nx)).redISub(c8);nz=this.y.redMul(this.z);nz=nz.redIAdd(nz);}
return this.curve.jpoint(nx,ny,nz);};JPoint.prototype._threeDbl=function _threeDbl(){var nx;var ny;var nz;if(this.zOne){var xx=this.x.redSqr();var yy=this.y.redSqr();var yyyy=yy.redSqr();var s=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);s=s.redIAdd(s);var m=xx.redAdd(xx).redIAdd(xx).redIAdd(this.curve.a);var t=m.redSqr().redISub(s).redISub(s);nx=t;var yyyy8=yyyy.redIAdd(yyyy);yyyy8=yyyy8.redIAdd(yyyy8);yyyy8=yyyy8.redIAdd(yyyy8);ny=m.redMul(s.redISub(t)).redISub(yyyy8);nz=this.y.redAdd(this.y);}else{var delta=this.z.redSqr();var gamma=this.y.redSqr();var beta=this.x.redMul(gamma);var alpha=this.x.redSub(delta).redMul(this.x.redAdd(delta));alpha=alpha.redAdd(alpha).redIAdd(alpha);var beta4=beta.redIAdd(beta);beta4=beta4.redIAdd(beta4);var beta8=beta4.redAdd(beta4);nx=alpha.redSqr().redISub(beta8);nz=this.y.redAdd(this.z).redSqr().redISub(gamma).redISub(delta);var ggamma8=gamma.redSqr();ggamma8=ggamma8.redIAdd(ggamma8);ggamma8=ggamma8.redIAdd(ggamma8);ggamma8=ggamma8.redIAdd(ggamma8);ny=alpha.redMul(beta4.redISub(nx)).redISub(ggamma8);}
return this.curve.jpoint(nx,ny,nz);};JPoint.prototype._dbl=function _dbl(){var a=this.curve.a;var jx=this.x;var jy=this.y;var jz=this.z;var jz4=jz.redSqr().redSqr();var jx2=jx.redSqr();var jy2=jy.redSqr();var c=jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));var jxd4=jx.redAdd(jx);jxd4=jxd4.redIAdd(jxd4);var t1=jxd4.redMul(jy2);var nx=c.redSqr().redISub(t1.redAdd(t1));var t2=t1.redISub(nx);var jyd8=jy2.redSqr();jyd8=jyd8.redIAdd(jyd8);jyd8=jyd8.redIAdd(jyd8);jyd8=jyd8.redIAdd(jyd8);var ny=c.redMul(t2).redISub(jyd8);var nz=jy.redAdd(jy).redMul(jz);return this.curve.jpoint(nx,ny,nz);};JPoint.prototype.trpl=function trpl(){if(!this.curve.zeroA)
return this.dbl().add(this);var xx=this.x.redSqr();var yy=this.y.redSqr();var zz=this.z.redSqr();var yyyy=yy.redSqr();var m=xx.redAdd(xx).redIAdd(xx);var mm=m.redSqr();var e=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);e=e.redIAdd(e);e=e.redAdd(e).redIAdd(e);e=e.redISub(mm);var ee=e.redSqr();var t=yyyy.redIAdd(yyyy);t=t.redIAdd(t);t=t.redIAdd(t);t=t.redIAdd(t);var u=m.redIAdd(e).redSqr().redISub(mm).redISub(ee).redISub(t);var yyu4=yy.redMul(u);yyu4=yyu4.redIAdd(yyu4);yyu4=yyu4.redIAdd(yyu4);var nx=this.x.redMul(ee).redISub(yyu4);nx=nx.redIAdd(nx);nx=nx.redIAdd(nx);var ny=this.y.redMul(u.redMul(t.redISub(u)).redISub(e.redMul(ee)));ny=ny.redIAdd(ny);ny=ny.redIAdd(ny);ny=ny.redIAdd(ny);var nz=this.z.redAdd(e).redSqr().redISub(zz).redISub(ee);return this.curve.jpoint(nx,ny,nz);};JPoint.prototype.mul=function mul(k,kbase){k=new BN(k,kbase);return this.curve._wnafMul(this,k);};JPoint.prototype.eq=function eq(p){if(p.type==='affine')
return this.eq(p.toJ());if(this===p)
return true;var z2=this.z.redSqr();var pz2=p.z.redSqr();if(this.x.redMul(pz2).redISub(p.x.redMul(z2)).cmpn(0)!==0)
return false;var z3=z2.redMul(this.z);var pz3=pz2.redMul(p.z);return this.y.redMul(pz3).redISub(p.y.redMul(z3)).cmpn(0)===0;};JPoint.prototype.eqXToP=function eqXToP(x){var zs=this.z.redSqr();var rx=x.toRed(this.curve.red).redMul(zs);if(this.x.cmp(rx)===0)
return true;var xc=x.clone();var t=this.curve.redN.redMul(zs);for(;;){xc.iadd(this.curve.n);if(xc.cmp(this.curve.p)>=0)
return false;rx.redIAdd(t);if(this.x.cmp(rx)===0)
return true;}};JPoint.prototype.inspect=function inspect(){if(this.isInfinity())
return '<EC JPoint Infinity>';return '<EC JPoint x: '+this.x.toString(16,2)+
' y: '+this.y.toString(16,2)+
' z: '+this.z.toString(16,2)+'>';};JPoint.prototype.isInfinity=function isInfinity(){return this.z.cmpn(0)===0;};}),(function(module,exports,__webpack_require__){"use strict";var curve=__webpack_require__(167);var BN=__webpack_require__(29);var inherits=__webpack_require__(7);var Base=curve.base;var elliptic=__webpack_require__(46);var utils=elliptic.utils;function MontCurve(conf){Base.call(this,'mont',conf);this.a=new BN(conf.a,16).toRed(this.red);this.b=new BN(conf.b,16).toRed(this.red);this.i4=new BN(4).toRed(this.red).redInvm();this.two=new BN(2).toRed(this.red);this.a24=this.i4.redMul(this.a.redAdd(this.two));}
inherits(MontCurve,Base);module.exports=MontCurve;MontCurve.prototype.validate=function validate(point){var x=point.normalize().x;var x2=x.redSqr();var rhs=x2.redMul(x).redAdd(x2.redMul(this.a)).redAdd(x);var y=rhs.redSqrt();return y.redSqr().cmp(rhs)===0;};function Point(curve,x,z){Base.BasePoint.call(this,curve,'projective');if(x===null&&z===null){this.x=this.curve.one;this.z=this.curve.zero;}else{this.x=new BN(x,16);this.z=new BN(z,16);if(!this.x.red)
this.x=this.x.toRed(this.curve.red);if(!this.z.red)
this.z=this.z.toRed(this.curve.red);}}
inherits(Point,Base.BasePoint);MontCurve.prototype.decodePoint=function decodePoint(bytes,enc){return this.point(utils.toArray(bytes,enc),1);};MontCurve.prototype.point=function point(x,z){return new Point(this,x,z);};MontCurve.prototype.pointFromJSON=function pointFromJSON(obj){return Point.fromJSON(this,obj);};Point.prototype.precompute=function precompute(){};Point.prototype._encode=function _encode(){return this.getX().toArray('be',this.curve.p.byteLength());};Point.fromJSON=function fromJSON(curve,obj){return new Point(curve,obj[0],obj[1]||curve.one);};Point.prototype.inspect=function inspect(){if(this.isInfinity())
return '<EC Point Infinity>';return '<EC Point x: '+this.x.fromRed().toString(16,2)+
' z: '+this.z.fromRed().toString(16,2)+'>';};Point.prototype.isInfinity=function isInfinity(){return this.z.cmpn(0)===0;};Point.prototype.dbl=function dbl(){var a=this.x.redAdd(this.z);var aa=a.redSqr();var b=this.x.redSub(this.z);var bb=b.redSqr();var c=aa.redSub(bb);var nx=aa.redMul(bb);var nz=c.redMul(bb.redAdd(this.curve.a24.redMul(c)));return this.curve.point(nx,nz);};Point.prototype.add=function add(){throw new Error('Not supported on Montgomery curve');};Point.prototype.diffAdd=function diffAdd(p,diff){var a=this.x.redAdd(this.z);var b=this.x.redSub(this.z);var c=p.x.redAdd(p.z);var d=p.x.redSub(p.z);var da=d.redMul(a);var cb=c.redMul(b);var nx=diff.z.redMul(da.redAdd(cb).redSqr());var nz=diff.x.redMul(da.redISub(cb).redSqr());return this.curve.point(nx,nz);};Point.prototype.mul=function mul(k){var t=k.clone();var a=this;var b=this.curve.point(null,null);var c=this;for(var bits=[];t.cmpn(0)!==0;t.iushrn(1))
bits.push(t.andln(1));for(var i=bits.length-1;i>=0;i--){if(bits[i]===0){a=a.diffAdd(b,c);b=b.dbl();}else{b=a.diffAdd(b,c);a=a.dbl();}}
return b;};Point.prototype.mulAdd=function mulAdd(){throw new Error('Not supported on Montgomery curve');};Point.prototype.jumlAdd=function jumlAdd(){throw new Error('Not supported on Montgomery curve');};Point.prototype.eq=function eq(other){return this.getX().cmp(other.getX())===0;};Point.prototype.normalize=function normalize(){this.x=this.x.redMul(this.z.redInvm());this.z=this.curve.one;return this;};Point.prototype.getX=function getX(){this.normalize();return this.x.fromRed();};}),(function(module,exports,__webpack_require__){"use strict";var curve=__webpack_require__(167);var elliptic=__webpack_require__(46);var BN=__webpack_require__(29);var inherits=__webpack_require__(7);var Base=curve.base;var assert=elliptic.utils.assert;function EdwardsCurve(conf){this.twisted=(conf.a|0)!==1;this.mOneA=this.twisted&&(conf.a|0)===-1;this.extended=this.mOneA;Base.call(this,'edwards',conf);this.a=new BN(conf.a,16).umod(this.red.m);this.a=this.a.toRed(this.red);this.c=new BN(conf.c,16).toRed(this.red);this.c2=this.c.redSqr();this.d=new BN(conf.d,16).toRed(this.red);this.dd=this.d.redAdd(this.d);assert(!this.twisted||this.c.fromRed().cmpn(1)===0);this.oneC=(conf.c|0)===1;}
inherits(EdwardsCurve,Base);module.exports=EdwardsCurve;EdwardsCurve.prototype._mulA=function _mulA(num){if(this.mOneA)
return num.redNeg();else
return this.a.redMul(num);};EdwardsCurve.prototype._mulC=function _mulC(num){if(this.oneC)
return num;else
return this.c.redMul(num);};EdwardsCurve.prototype.jpoint=function jpoint(x,y,z,t){return this.point(x,y,z,t);};EdwardsCurve.prototype.pointFromX=function pointFromX(x,odd){x=new BN(x,16);if(!x.red)
x=x.toRed(this.red);var x2=x.redSqr();var rhs=this.c2.redSub(this.a.redMul(x2));var lhs=this.one.redSub(this.c2.redMul(this.d).redMul(x2));var y2=rhs.redMul(lhs.redInvm());var y=y2.redSqrt();if(y.redSqr().redSub(y2).cmp(this.zero)!==0)
throw new Error('invalid point');var isOdd=y.fromRed().isOdd();if(odd&&!isOdd||!odd&&isOdd)
y=y.redNeg();return this.point(x,y);};EdwardsCurve.prototype.pointFromY=function pointFromY(y,odd){y=new BN(y,16);if(!y.red)
y=y.toRed(this.red);var y2=y.redSqr();var lhs=y2.redSub(this.c2);var rhs=y2.redMul(this.d).redMul(this.c2).redSub(this.a);var x2=lhs.redMul(rhs.redInvm());if(x2.cmp(this.zero)===0){if(odd)
throw new Error('invalid point');else
return this.point(this.zero,y);}
var x=x2.redSqrt();if(x.redSqr().redSub(x2).cmp(this.zero)!==0)
throw new Error('invalid point');if(x.fromRed().isOdd()!==odd)
x=x.redNeg();return this.point(x,y);};EdwardsCurve.prototype.validate=function validate(point){if(point.isInfinity())
return true;point.normalize();var x2=point.x.redSqr();var y2=point.y.redSqr();var lhs=x2.redMul(this.a).redAdd(y2);var rhs=this.c2.redMul(this.one.redAdd(this.d.redMul(x2).redMul(y2)));return lhs.cmp(rhs)===0;};function Point(curve,x,y,z,t){Base.BasePoint.call(this,curve,'projective');if(x===null&&y===null&&z===null){this.x=this.curve.zero;this.y=this.curve.one;this.z=this.curve.one;this.t=this.curve.zero;this.zOne=true;}else{this.x=new BN(x,16);this.y=new BN(y,16);this.z=z?new BN(z,16):this.curve.one;this.t=t&&new BN(t,16);if(!this.x.red)
this.x=this.x.toRed(this.curve.red);if(!this.y.red)
this.y=this.y.toRed(this.curve.red);if(!this.z.red)
this.z=this.z.toRed(this.curve.red);if(this.t&&!this.t.red)
this.t=this.t.toRed(this.curve.red);this.zOne=this.z===this.curve.one;if(this.curve.extended&&!this.t){this.t=this.x.redMul(this.y);if(!this.zOne)
this.t=this.t.redMul(this.z.redInvm());}}}
inherits(Point,Base.BasePoint);EdwardsCurve.prototype.pointFromJSON=function pointFromJSON(obj){return Point.fromJSON(this,obj);};EdwardsCurve.prototype.point=function point(x,y,z,t){return new Point(this,x,y,z,t);};Point.fromJSON=function fromJSON(curve,obj){return new Point(curve,obj[0],obj[1],obj[2]);};Point.prototype.inspect=function inspect(){if(this.isInfinity())
return '<EC Point Infinity>';return '<EC Point x: '+this.x.fromRed().toString(16,2)+
' y: '+this.y.fromRed().toString(16,2)+
' z: '+this.z.fromRed().toString(16,2)+'>';};Point.prototype.isInfinity=function isInfinity(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||(this.zOne&&this.y.cmp(this.curve.c)===0));};Point.prototype._extDbl=function _extDbl(){var a=this.x.redSqr();var b=this.y.redSqr();var c=this.z.redSqr();c=c.redIAdd(c);var d=this.curve._mulA(a);var e=this.x.redAdd(this.y).redSqr().redISub(a).redISub(b);var g=d.redAdd(b);var f=g.redSub(c);var h=d.redSub(b);var nx=e.redMul(f);var ny=g.redMul(h);var nt=e.redMul(h);var nz=f.redMul(g);return this.curve.point(nx,ny,nz,nt);};Point.prototype._projDbl=function _projDbl(){var b=this.x.redAdd(this.y).redSqr();var c=this.x.redSqr();var d=this.y.redSqr();var nx;var ny;var nz;if(this.curve.twisted){var e=this.curve._mulA(c);var f=e.redAdd(d);if(this.zOne){nx=b.redSub(c).redSub(d).redMul(f.redSub(this.curve.two));ny=f.redMul(e.redSub(d));nz=f.redSqr().redSub(f).redSub(f);}else{var h=this.z.redSqr();var j=f.redSub(h).redISub(h);nx=b.redSub(c).redISub(d).redMul(j);ny=f.redMul(e.redSub(d));nz=f.redMul(j);}}else{var e=c.redAdd(d);var h=this.curve._mulC(this.z).redSqr();var j=e.redSub(h).redSub(h);nx=this.curve._mulC(b.redISub(e)).redMul(j);ny=this.curve._mulC(e).redMul(c.redISub(d));nz=e.redMul(j);}
return this.curve.point(nx,ny,nz);};Point.prototype.dbl=function dbl(){if(this.isInfinity())
return this;if(this.curve.extended)
return this._extDbl();else
return this._projDbl();};Point.prototype._extAdd=function _extAdd(p){var a=this.y.redSub(this.x).redMul(p.y.redSub(p.x));var b=this.y.redAdd(this.x).redMul(p.y.redAdd(p.x));var c=this.t.redMul(this.curve.dd).redMul(p.t);var d=this.z.redMul(p.z.redAdd(p.z));var e=b.redSub(a);var f=d.redSub(c);var g=d.redAdd(c);var h=b.redAdd(a);var nx=e.redMul(f);var ny=g.redMul(h);var nt=e.redMul(h);var nz=f.redMul(g);return this.curve.point(nx,ny,nz,nt);};Point.prototype._projAdd=function _projAdd(p){var a=this.z.redMul(p.z);var b=a.redSqr();var c=this.x.redMul(p.x);var d=this.y.redMul(p.y);var e=this.curve.d.redMul(c).redMul(d);var f=b.redSub(e);var g=b.redAdd(e);var tmp=this.x.redAdd(this.y).redMul(p.x.redAdd(p.y)).redISub(c).redISub(d);var nx=a.redMul(f).redMul(tmp);var ny;var nz;if(this.curve.twisted){ny=a.redMul(g).redMul(d.redSub(this.curve._mulA(c)));nz=f.redMul(g);}else{ny=a.redMul(g).redMul(d.redSub(c));nz=this.curve._mulC(f).redMul(g);}
return this.curve.point(nx,ny,nz);};Point.prototype.add=function add(p){if(this.isInfinity())
return p;if(p.isInfinity())
return this;if(this.curve.extended)
return this._extAdd(p);else
return this._projAdd(p);};Point.prototype.mul=function mul(k){if(this._hasDoubles(k))
return this.curve._fixedNafMul(this,k);else
return this.curve._wnafMul(this,k);};Point.prototype.mulAdd=function mulAdd(k1,p,k2){return this.curve._wnafMulAdd(1,[this,p],[k1,k2],2,false);};Point.prototype.jmulAdd=function jmulAdd(k1,p,k2){return this.curve._wnafMulAdd(1,[this,p],[k1,k2],2,true);};Point.prototype.normalize=function normalize(){if(this.zOne)
return this;var zi=this.z.redInvm();this.x=this.x.redMul(zi);this.y=this.y.redMul(zi);if(this.t)
this.t=this.t.redMul(zi);this.z=this.curve.one;this.zOne=true;return this;};Point.prototype.neg=function neg(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg());};Point.prototype.getX=function getX(){this.normalize();return this.x.fromRed();};Point.prototype.getY=function getY(){this.normalize();return this.y.fromRed();};Point.prototype.eq=function eq(other){return this===other||this.getX().cmp(other.getX())===0&&this.getY().cmp(other.getY())===0;};Point.prototype.eqXToP=function eqXToP(x){var rx=x.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(rx)===0)
return true;var xc=x.clone();var t=this.curve.redN.redMul(this.z);for(;;){xc.iadd(this.curve.n);if(xc.cmp(this.curve.p)>=0)
return false;rx.redIAdd(t);if(this.x.cmp(rx)===0)
return true;}};Point.prototype.toP=Point.prototype.normalize;Point.prototype.mixedAdd=Point.prototype.add;}),(function(module,exports,__webpack_require__){"use strict";var curves=exports;var hash=__webpack_require__(217);var elliptic=__webpack_require__(46);var assert=elliptic.utils.assert;function PresetCurve(options){if(options.type==='short')
this.curve=new elliptic.curve.short(options);else if(options.type==='edwards')
this.curve=new elliptic.curve.edwards(options);else
this.curve=new elliptic.curve.mont(options);this.g=this.curve.g;this.n=this.curve.n;this.hash=options.hash;assert(this.g.validate(),'Invalid curve');assert(this.g.mul(this.n).isInfinity(),'Invalid curve, G*N != O');}
curves.PresetCurve=PresetCurve;function defineCurve(name,options){Object.defineProperty(curves,name,{configurable:true,enumerable:true,get:function(){var curve=new PresetCurve(options);Object.defineProperty(curves,name,{configurable:true,enumerable:true,value:curve});return curve;}});}
defineCurve('p192',{type:'short',prime:'p192',p:'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff',a:'ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc',b:'64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1',n:'ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831',hash:hash.sha256,gRed:false,g:['188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012','07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811']});defineCurve('p224',{type:'short',prime:'p224',p:'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001',a:'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe',b:'b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4',n:'ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d',hash:hash.sha256,gRed:false,g:['b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21','bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34']});defineCurve('p256',{type:'short',prime:null,p:'ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff',a:'ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc',b:'5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b',n:'ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551',hash:hash.sha256,gRed:false,g:['6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296','4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5']});defineCurve('p384',{type:'short',prime:null,p:'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff '+
'fffffffe ffffffff 00000000 00000000 ffffffff',a:'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff '+
'fffffffe ffffffff 00000000 00000000 fffffffc',b:'b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f '+
'5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef',n:'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 '+
'f4372ddf 581a0db2 48b0a77a ecec196a ccc52973',hash:hash.sha384,gRed:false,g:['aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 '+
'5502f25d bf55296c 3a545e38 72760ab7','3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 '+
'0a60b1ce 1d7e819d 7a431d7c 90ea0e5f']});defineCurve('p521',{type:'short',prime:null,p:'000001ff ffffffff ffffffff ffffffff ffffffff ffffffff '+
'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff '+
'ffffffff ffffffff ffffffff ffffffff ffffffff',a:'000001ff ffffffff ffffffff ffffffff ffffffff ffffffff '+
'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff '+
'ffffffff ffffffff ffffffff ffffffff fffffffc',b:'00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b '+
'99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd '+
'3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00',n:'000001ff ffffffff ffffffff ffffffff ffffffff ffffffff '+
'ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 '+
'f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409',hash:hash.sha512,gRed:false,g:['000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 '+
'053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 '+
'a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66','00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 '+
'579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 '+
'3fad0761 353c7086 a272c240 88be9476 9fd16650']});defineCurve('curve25519',{type:'mont',prime:'p25519',p:'7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed',a:'76d06',b:'1',n:'1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed',hash:hash.sha256,gRed:false,g:['9']});defineCurve('ed25519',{type:'edwards',prime:'p25519',p:'7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed',a:'-1',c:'1',d:'52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3',n:'1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed',hash:hash.sha256,gRed:false,g:['216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a','6666666666666666666666666666666666666666666666666666666666666658']});var pre;try{pre=__webpack_require__(703);}catch(e){pre=undefined;}
defineCurve('secp256k1',{type:'short',prime:'k256',p:'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f',a:'0',b:'7',n:'ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141',h:'1',hash:hash.sha256,beta:'7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee',lambda:'5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72',basis:[{a:'3086d221a7d46bcde86c90e49284eb15',b:'-e4437ed6010e88286f547fa90abfe4c3'},{a:'114ca50f7a8e2f3f657c1108d9d44cfd8',b:'3086d221a7d46bcde86c90e49284eb15'}],gRed:false,g:['79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798','483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8',pre]});}),(function(module,exports,__webpack_require__){"use strict";exports.sha1=__webpack_require__(698);exports.sha224=__webpack_require__(699);exports.sha256=__webpack_require__(334);exports.sha384=__webpack_require__(700);exports.sha512=__webpack_require__(335);}),(function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(68);var common=__webpack_require__(129);var shaCommon=__webpack_require__(333);var rotl32=utils.rotl32;var sum32=utils.sum32;var sum32_5=utils.sum32_5;var ft_1=shaCommon.ft_1;var BlockHash=common.BlockHash;var sha1_K=[0x5A827999,0x6ED9EBA1,0x8F1BBCDC,0xCA62C1D6];function SHA1(){if(!(this instanceof SHA1))
return new SHA1();BlockHash.call(this);this.h=[0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0];this.W=new Array(80);}
utils.inherits(SHA1,BlockHash);module.exports=SHA1;SHA1.blockSize=512;SHA1.outSize=160;SHA1.hmacStrength=80;SHA1.padLength=64;SHA1.prototype._update=function _update(msg,start){var W=this.W;for(var i=0;i<16;i++)
W[i]=msg[start+i];for(;i<W.length;i++)
W[i]=rotl32(W[i-3]^W[i-8]^W[i-14]^W[i-16],1);var a=this.h[0];var b=this.h[1];var c=this.h[2];var d=this.h[3];var e=this.h[4];for(i=0;i<W.length;i++){var s=~~(i/20);var t=sum32_5(rotl32(a,5),ft_1(s,b,c,d),e,W[i],sha1_K[s]);e=d;d=c;c=rotl32(b,30);b=a;a=t;}
this.h[0]=sum32(this.h[0],a);this.h[1]=sum32(this.h[1],b);this.h[2]=sum32(this.h[2],c);this.h[3]=sum32(this.h[3],d);this.h[4]=sum32(this.h[4],e);};SHA1.prototype._digest=function digest(enc){if(enc==='hex')
return utils.toHex32(this.h,'big');else
return utils.split32(this.h,'big');};}),(function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(68);var SHA256=__webpack_require__(334);function SHA224(){if(!(this instanceof SHA224))
return new SHA224();SHA256.call(this);this.h=[0xc1059ed8,0x367cd507,0x3070dd17,0xf70e5939,0xffc00b31,0x68581511,0x64f98fa7,0xbefa4fa4];}
utils.inherits(SHA224,SHA256);module.exports=SHA224;SHA224.blockSize=512;SHA224.outSize=224;SHA224.hmacStrength=192;SHA224.padLength=64;SHA224.prototype._digest=function digest(enc){if(enc==='hex')
return utils.toHex32(this.h.slice(0,7),'big');else
return utils.split32(this.h.slice(0,7),'big');};}),(function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(68);var SHA512=__webpack_require__(335);function SHA384(){if(!(this instanceof SHA384))
return new SHA384();SHA512.call(this);this.h=[0xcbbb9d5d,0xc1059ed8,0x629a292a,0x367cd507,0x9159015a,0x3070dd17,0x152fecd8,0xf70e5939,0x67332667,0xffc00b31,0x8eb44a87,0x68581511,0xdb0c2e0d,0x64f98fa7,0x47b5481d,0xbefa4fa4];}
utils.inherits(SHA384,SHA512);module.exports=SHA384;SHA384.blockSize=1024;SHA384.outSize=384;SHA384.hmacStrength=192;SHA384.padLength=128;SHA384.prototype._digest=function digest(enc){if(enc==='hex')
return utils.toHex32(this.h.slice(0,12),'big');else
return utils.split32(this.h.slice(0,12),'big');};}),(function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(68);var common=__webpack_require__(129);var rotl32=utils.rotl32;var sum32=utils.sum32;var sum32_3=utils.sum32_3;var sum32_4=utils.sum32_4;var BlockHash=common.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))
return new RIPEMD160();BlockHash.call(this);this.h=[0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0];this.endian='little';}
utils.inherits(RIPEMD160,BlockHash);exports.ripemd160=RIPEMD160;RIPEMD160.blockSize=512;RIPEMD160.outSize=160;RIPEMD160.hmacStrength=192;RIPEMD160.padLength=64;RIPEMD160.prototype._update=function update(msg,start){var A=this.h[0];var B=this.h[1];var C=this.h[2];var D=this.h[3];var E=this.h[4];var Ah=A;var Bh=B;var Ch=C;var Dh=D;var Eh=E;for(var j=0;j<80;j++){var T=sum32(rotl32(sum32_4(A,f(j,B,C,D),msg[r[j]+start],K(j)),s[j]),E);A=E;E=D;D=rotl32(C,10);C=B;B=T;T=sum32(rotl32(sum32_4(Ah,f(79-j,Bh,Ch,Dh),msg[rh[j]+start],Kh(j)),sh[j]),Eh);Ah=Eh;Eh=Dh;Dh=rotl32(Ch,10);Ch=Bh;Bh=T;}
T=sum32_3(this.h[1],C,Dh);this.h[1]=sum32_3(this.h[2],D,Eh);this.h[2]=sum32_3(this.h[3],E,Ah);this.h[3]=sum32_3(this.h[4],A,Bh);this.h[4]=sum32_3(this.h[0],B,Ch);this.h[0]=T;};RIPEMD160.prototype._digest=function digest(enc){if(enc==='hex')
return utils.toHex32(this.h,'little');else
return utils.split32(this.h,'little');};function f(j,x,y,z){if(j<=15)
return x^y^z;else if(j<=31)
return(x&y)|((~x)&z);else if(j<=47)
return(x|(~y))^z;else if(j<=63)
return(x&z)|(y&(~z));else
return x^(y|(~z));}
function K(j){if(j<=15)
return 0x00000000;else if(j<=31)
return 0x5a827999;else if(j<=47)
return 0x6ed9eba1;else if(j<=63)
return 0x8f1bbcdc;else
return 0xa953fd4e;}
function Kh(j){if(j<=15)
return 0x50a28be6;else if(j<=31)
return 0x5c4dd124;else if(j<=47)
return 0x6d703ef3;else if(j<=63)
return 0x7a6d76e9;else
return 0x00000000;}
var r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13];var rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11];var s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6];var sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];}),(function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(68);var assert=__webpack_require__(55);function Hmac(hash,key,enc){if(!(this instanceof Hmac))
return new Hmac(hash,key,enc);this.Hash=hash;this.blockSize=hash.blockSize/8;this.outSize=hash.outSize/8;this.inner=null;this.outer=null;this._init(utils.toArray(key,enc));}
module.exports=Hmac;Hmac.prototype._init=function init(key){if(key.length>this.blockSize)
key=new this.Hash().update(key).digest();assert(key.length<=this.blockSize);for(var i=key.length;i<this.blockSize;i++)
key.push(0);for(i=0;i<key.length;i++)
key[i]^=0x36;this.inner=new this.Hash().update(key);for(i=0;i<key.length;i++)
key[i]^=0x6a;this.outer=new this.Hash().update(key);};Hmac.prototype.update=function update(msg,enc){this.inner.update(msg,enc);return this;};Hmac.prototype.digest=function digest(enc){this.outer.update(this.inner.digest());return this.outer.digest(enc);};}),(function(module,exports){module.exports={doubles:{step:4,points:[['e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a','f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821'],['8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508','11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf'],['175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739','d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695'],['363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640','4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9'],['8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c','4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36'],['723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda','96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f'],['eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa','5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999'],['100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0','cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09'],['e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d','9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d'],['feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d','e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088'],['da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1','9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d'],['53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0','5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8'],['8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047','10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a'],['385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862','283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453'],['6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7','7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160'],['3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd','56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0'],['85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83','7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6'],['948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a','53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589'],['6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8','bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17'],['e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d','4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda'],['e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725','7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd'],['213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754','4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2'],['4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c','17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6'],['fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6','6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f'],['76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39','c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01'],['c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891','893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3'],['d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b','febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f'],['b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03','2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7'],['e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d','eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78'],['a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070','7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1'],['90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4','e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150'],['8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da','662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82'],['e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11','1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc'],['8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e','efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b'],['e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41','2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51'],['b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef','67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45'],['d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8','db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120'],['324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d','648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84'],['4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96','35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d'],['9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd','ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d'],['6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5','9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8'],['a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266','40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8'],['7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71','34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac'],['928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac','c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f'],['85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751','1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962'],['ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e','493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907'],['827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241','c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec'],['eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3','be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d'],['e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f','4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414'],['1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19','aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd'],['146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be','b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0'],['fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9','6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811'],['da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2','8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1'],['a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13','7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c'],['174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c','ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73'],['959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba','2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd'],['d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151','e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405'],['64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073','d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589'],['8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458','38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e'],['13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b','69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27'],['bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366','d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1'],['8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa','40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482'],['8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0','620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945'],['dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787','7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573'],['f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e','ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82']]},naf:{wnd:7,points:[['f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9','388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672'],['2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4','d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6'],['5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc','6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da'],['acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe','cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37'],['774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb','d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b'],['f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8','ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81'],['d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e','581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58'],['defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34','4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77'],['2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c','85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a'],['352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5','321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c'],['2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f','2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67'],['9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714','73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402'],['daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729','a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55'],['c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db','2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482'],['6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4','e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82'],['1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5','b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396'],['605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479','2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49'],['62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d','80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf'],['80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f','1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a'],['7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb','d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7'],['d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9','eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933'],['49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963','758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a'],['77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74','958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6'],['f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530','e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37'],['463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b','5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e'],['f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247','cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6'],['caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1','cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476'],['2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120','4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40'],['7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435','91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61'],['754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18','673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683'],['e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8','59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5'],['186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb','3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b'],['df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f','55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417'],['5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143','efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868'],['290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba','e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a'],['af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45','f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6'],['766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a','744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996'],['59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e','c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e'],['f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8','e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d'],['7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c','30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2'],['948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519','e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e'],['7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab','100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437'],['3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca','ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311'],['d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf','8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4'],['1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610','68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575'],['733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4','f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d'],['15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c','d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d'],['a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940','edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629'],['e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980','a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06'],['311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3','66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374'],['34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf','9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee'],['f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63','4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1'],['d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448','fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b'],['32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf','5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661'],['7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5','8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6'],['ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6','8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e'],['16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5','5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d'],['eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99','f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc'],['78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51','f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4'],['494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5','42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c'],['a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5','204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b'],['c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997','4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913'],['841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881','73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154'],['5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5','39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865'],['36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66','d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc'],['336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726','ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224'],['8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede','6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e'],['1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94','60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6'],['85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31','3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511'],['29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51','b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b'],['a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252','ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2'],['4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5','cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c'],['d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b','6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3'],['ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4','322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d'],['af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f','6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700'],['e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889','2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4'],['591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246','b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196'],['11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984','998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4'],['3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a','b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257'],['cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030','bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13'],['c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197','6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096'],['c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593','c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38'],['a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef','21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f'],['347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38','60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448'],['da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a','49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a'],['c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111','5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4'],['4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502','7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437'],['3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea','be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7'],['cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26','8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d'],['b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986','39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a'],['d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e','62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54'],['48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4','25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77'],['dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda','ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517'],['6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859','cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10'],['e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f','f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125'],['eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c','6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e'],['13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942','fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1'],['ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a','1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2'],['b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80','5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423'],['ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d','438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8'],['8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1','cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758'],['52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63','c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375'],['e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352','6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d'],['7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193','ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec'],['5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00','9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0'],['32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58','ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c'],['e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7','d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4'],['8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8','c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f'],['4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e','67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649'],['3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d','cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826'],['674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b','299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5'],['d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f','f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87'],['30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6','462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b'],['be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297','62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc'],['93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a','7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c'],['b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c','ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f'],['d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52','4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a'],['d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb','bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46'],['463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065','bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f'],['7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917','603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03'],['74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9','cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08'],['30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3','553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8'],['9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57','712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373'],['176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66','ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3'],['75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8','9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8'],['809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721','9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1'],['1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180','4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9']]}};}),(function(module,exports,__webpack_require__){"use strict";var BN=__webpack_require__(29);var HmacDRBG=__webpack_require__(705);var elliptic=__webpack_require__(46);var utils=elliptic.utils;var assert=utils.assert;var KeyPair=__webpack_require__(706);var Signature=__webpack_require__(707);function EC(options){if(!(this instanceof EC))
return new EC(options);if(typeof options==='string'){assert(elliptic.curves.hasOwnProperty(options),'Unknown curve '+options);options=elliptic.curves[options];}
if(options instanceof elliptic.curves.PresetCurve)
options={curve:options};this.curve=options.curve.curve;this.n=this.curve.n;this.nh=this.n.ushrn(1);this.g=this.curve.g;this.g=options.curve.g;this.g.precompute(options.curve.n.bitLength()+1);this.hash=options.hash||options.curve.hash;}
module.exports=EC;EC.prototype.keyPair=function keyPair(options){return new KeyPair(this,options);};EC.prototype.keyFromPrivate=function keyFromPrivate(priv,enc){return KeyPair.fromPrivate(this,priv,enc);};EC.prototype.keyFromPublic=function keyFromPublic(pub,enc){return KeyPair.fromPublic(this,pub,enc);};EC.prototype.genKeyPair=function genKeyPair(options){if(!options)
options={};var drbg=new HmacDRBG({hash:this.hash,pers:options.pers,persEnc:options.persEnc||'utf8',entropy:options.entropy||elliptic.rand(this.hash.hmacStrength),entropyEnc:options.entropy&&options.entropyEnc||'utf8',nonce:this.n.toArray()});var bytes=this.n.byteLength();var ns2=this.n.sub(new BN(2));do{var priv=new BN(drbg.generate(bytes));if(priv.cmp(ns2)>0)
continue;priv.iaddn(1);return this.keyFromPrivate(priv);}while(true);};EC.prototype._truncateToN=function truncateToN(msg,truncOnly){var delta=msg.byteLength()*8-this.n.bitLength();if(delta>0)
msg=msg.ushrn(delta);if(!truncOnly&&msg.cmp(this.n)>=0)
return msg.sub(this.n);else
return msg;};EC.prototype.sign=function sign(msg,key,enc,options){if(typeof enc==='object'){options=enc;enc=null;}
if(!options)
options={};key=this.keyFromPrivate(key,enc);msg=this._truncateToN(new BN(msg,16));var bytes=this.n.byteLength();var bkey=key.getPrivate().toArray('be',bytes);var nonce=msg.toArray('be',bytes);var drbg=new HmacDRBG({hash:this.hash,entropy:bkey,nonce:nonce,pers:options.pers,persEnc:options.persEnc||'utf8'});var ns1=this.n.sub(new BN(1));for(var iter=0;true;iter++){var k=options.k?options.k(iter):new BN(drbg.generate(this.n.byteLength()));k=this._truncateToN(k,true);if(k.cmpn(1)<=0||k.cmp(ns1)>=0)
continue;var kp=this.g.mul(k);if(kp.isInfinity())
continue;var kpX=kp.getX();var r=kpX.umod(this.n);if(r.cmpn(0)===0)
continue;var s=k.invm(this.n).mul(r.mul(key.getPrivate()).iadd(msg));s=s.umod(this.n);if(s.cmpn(0)===0)
continue;var recoveryParam=(kp.getY().isOdd()?1:0)|(kpX.cmp(r)!==0?2:0);if(options.canonical&&s.cmp(this.nh)>0){s=this.n.sub(s);recoveryParam^=1;}
return new Signature({r:r,s:s,recoveryParam:recoveryParam});}};EC.prototype.verify=function verify(msg,signature,key,enc){msg=this._truncateToN(new BN(msg,16));key=this.keyFromPublic(key,enc);signature=new Signature(signature,'hex');var r=signature.r;var s=signature.s;if(r.cmpn(1)<0||r.cmp(this.n)>=0)
return false;if(s.cmpn(1)<0||s.cmp(this.n)>=0)
return false;var sinv=s.invm(this.n);var u1=sinv.mul(msg).umod(this.n);var u2=sinv.mul(r).umod(this.n);if(!this.curve._maxwellTrick){var p=this.g.mulAdd(u1,key.getPublic(),u2);if(p.isInfinity())
return false;return p.getX().umod(this.n).cmp(r)===0;}
var p=this.g.jmulAdd(u1,key.getPublic(),u2);if(p.isInfinity())
return false;return p.eqXToP(r);};EC.prototype.recoverPubKey=function(msg,signature,j,enc){assert((3&j)===j,'The recovery param is more than two bits');signature=new Signature(signature,enc);var n=this.n;var e=new BN(msg);var r=signature.r;var s=signature.s;var isYOdd=j&1;var isSecondKey=j>>1;if(r.cmp(this.curve.p.umod(this.curve.n))>=0&&isSecondKey)
throw new Error('Unable to find sencond key candinate');if(isSecondKey)
r=this.curve.pointFromX(r.add(this.curve.n),isYOdd);else
r=this.curve.pointFromX(r,isYOdd);var rInv=signature.r.invm(n);var s1=n.sub(e).mul(rInv).umod(n);var s2=s.mul(rInv).umod(n);return this.g.mulAdd(s1,r,s2);};EC.prototype.getKeyRecoveryParam=function(e,signature,Q,enc){signature=new Signature(signature,enc);if(signature.recoveryParam!==null)
return signature.recoveryParam;for(var i=0;i<4;i++){var Qprime;try{Qprime=this.recoverPubKey(e,signature,i);}catch(e){continue;}
if(Qprime.eq(Q))
return i;}
throw new Error('Unable to find valid recovery factor');};}),(function(module,exports,__webpack_require__){"use strict";var hash=__webpack_require__(217);var utils=__webpack_require__(332);var assert=__webpack_require__(55);function HmacDRBG(options){if(!(this instanceof HmacDRBG))
return new HmacDRBG(options);this.hash=options.hash;this.predResist=!!options.predResist;this.outLen=this.hash.outSize;this.minEntropy=options.minEntropy||this.hash.hmacStrength;this._reseed=null;this.reseedInterval=null;this.K=null;this.V=null;var entropy=utils.toArray(options.entropy,options.entropyEnc||'hex');var nonce=utils.toArray(options.nonce,options.nonceEnc||'hex');var pers=utils.toArray(options.pers,options.persEnc||'hex');assert(entropy.length>=(this.minEntropy/8),'Not enough entropy. Minimum is: '+this.minEntropy+' bits');this._init(entropy,nonce,pers);}
module.exports=HmacDRBG;HmacDRBG.prototype._init=function init(entropy,nonce,pers){var seed=entropy.concat(nonce).concat(pers);this.K=new Array(this.outLen/8);this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++){this.K[i]=0x00;this.V[i]=0x01;}
this._update(seed);this._reseed=1;this.reseedInterval=0x1000000000000;};HmacDRBG.prototype._hmac=function hmac(){return new hash.hmac(this.hash,this.K);};HmacDRBG.prototype._update=function update(seed){var kmac=this._hmac().update(this.V).update([0x00]);if(seed)
kmac=kmac.update(seed);this.K=kmac.digest();this.V=this._hmac().update(this.V).digest();if(!seed)
return;this.K=this._hmac().update(this.V).update([0x01]).update(seed).digest();this.V=this._hmac().update(this.V).digest();};HmacDRBG.prototype.reseed=function reseed(entropy,entropyEnc,add,addEnc){if(typeof entropyEnc!=='string'){addEnc=add;add=entropyEnc;entropyEnc=null;}
entropy=utils.toArray(entropy,entropyEnc);add=utils.toArray(add,addEnc);assert(entropy.length>=(this.minEntropy/8),'Not enough entropy. Minimum is: '+this.minEntropy+' bits');this._update(entropy.concat(add||[]));this._reseed=1;};HmacDRBG.prototype.generate=function generate(len,enc,add,addEnc){if(this._reseed>this.reseedInterval)
throw new Error('Reseed is required');if(typeof enc!=='string'){addEnc=add;add=enc;enc=null;}
if(add){add=utils.toArray(add,addEnc||'hex');this._update(add);}
var temp=[];while(temp.length<len){this.V=this._hmac().update(this.V).digest();temp=temp.concat(this.V);}
var res=temp.slice(0,len);this._update(add);this._reseed++;return utils.encode(res,enc);};}),(function(module,exports,__webpack_require__){"use strict";var BN=__webpack_require__(29);var elliptic=__webpack_require__(46);var utils=elliptic.utils;var assert=utils.assert;function KeyPair(ec,options){this.ec=ec;this.priv=null;this.pub=null;if(options.priv)
this._importPrivate(options.priv,options.privEnc);if(options.pub)
this._importPublic(options.pub,options.pubEnc);}
module.exports=KeyPair;KeyPair.fromPublic=function fromPublic(ec,pub,enc){if(pub instanceof KeyPair)
return pub;return new KeyPair(ec,{pub:pub,pubEnc:enc});};KeyPair.fromPrivate=function fromPrivate(ec,priv,enc){if(priv instanceof KeyPair)
return priv;return new KeyPair(ec,{priv:priv,privEnc:enc});};KeyPair.prototype.validate=function validate(){var pub=this.getPublic();if(pub.isInfinity())
return{result:false,reason:'Invalid public key'};if(!pub.validate())
return{result:false,reason:'Public key is not a point'};if(!pub.mul(this.ec.curve.n).isInfinity())
return{result:false,reason:'Public key * N != O'};return{result:true,reason:null};};KeyPair.prototype.getPublic=function getPublic(compact,enc){if(typeof compact==='string'){enc=compact;compact=null;}
if(!this.pub)
this.pub=this.ec.g.mul(this.priv);if(!enc)
return this.pub;return this.pub.encode(enc,compact);};KeyPair.prototype.getPrivate=function getPrivate(enc){if(enc==='hex')
return this.priv.toString(16,2);else
return this.priv;};KeyPair.prototype._importPrivate=function _importPrivate(key,enc){this.priv=new BN(key,enc||16);this.priv=this.priv.umod(this.ec.curve.n);};KeyPair.prototype._importPublic=function _importPublic(key,enc){if(key.x||key.y){if(this.ec.curve.type==='mont'){assert(key.x,'Need x coordinate');}else if(this.ec.curve.type==='short'||this.ec.curve.type==='edwards'){assert(key.x&&key.y,'Need both x and y coordinate');}
this.pub=this.ec.curve.point(key.x,key.y);return;}
this.pub=this.ec.curve.decodePoint(key,enc);};KeyPair.prototype.derive=function derive(pub){return pub.mul(this.priv).getX();};KeyPair.prototype.sign=function sign(msg,enc,options){return this.ec.sign(msg,this,enc,options);};KeyPair.prototype.verify=function verify(msg,signature){return this.ec.verify(msg,signature,this);};KeyPair.prototype.inspect=function inspect(){return '<Key priv: '+(this.priv&&this.priv.toString(16,2))+
' pub: '+(this.pub&&this.pub.inspect())+' >';};}),(function(module,exports,__webpack_require__){"use strict";var BN=__webpack_require__(29);var elliptic=__webpack_require__(46);var utils=elliptic.utils;var assert=utils.assert;function Signature(options,enc){if(options instanceof Signature)
return options;if(this._importDER(options,enc))
return;assert(options.r&&options.s,'Signature without r or s');this.r=new BN(options.r,16);this.s=new BN(options.s,16);if(options.recoveryParam===undefined)
this.recoveryParam=null;else
this.recoveryParam=options.recoveryParam;}
module.exports=Signature;function Position(){this.place=0;}
function getLength(buf,p){var initial=buf[p.place++];if(!(initial&0x80)){return initial;}
var octetLen=initial&0xf;var val=0;for(var i=0,off=p.place;i<octetLen;i++,off++){val<<=8;val|=buf[off];}
p.place=off;return val;}
function rmPadding(buf){var i=0;var len=buf.length-1;while(!buf[i]&&!(buf[i+1]&0x80)&&i<len){i++;}
if(i===0){return buf;}
return buf.slice(i);}
Signature.prototype._importDER=function _importDER(data,enc){data=utils.toArray(data,enc);var p=new Position();if(data[p.place++]!==0x30){return false;}
var len=getLength(data,p);if((len+p.place)!==data.length){return false;}
if(data[p.place++]!==0x02){return false;}
var rlen=getLength(data,p);var r=data.slice(p.place,rlen+p.place);p.place+=rlen;if(data[p.place++]!==0x02){return false;}
var slen=getLength(data,p);if(data.length!==slen+p.place){return false;}
var s=data.slice(p.place,slen+p.place);if(r[0]===0&&(r[1]&0x80)){r=r.slice(1);}
if(s[0]===0&&(s[1]&0x80)){s=s.slice(1);}
this.r=new BN(r);this.s=new BN(s);this.recoveryParam=null;return true;};function constructLength(arr,len){if(len<0x80){arr.push(len);return;}
var octets=1+(Math.log(len)/Math.LN2>>>3);arr.push(octets|0x80);while(--octets){arr.push((len>>>(octets<<3))&0xff);}
arr.push(len);}
Signature.prototype.toDER=function toDER(enc){var r=this.r.toArray();var s=this.s.toArray();if(r[0]&0x80)
r=[0].concat(r);if(s[0]&0x80)
s=[0].concat(s);r=rmPadding(r);s=rmPadding(s);while(!s[0]&&!(s[1]&0x80)){s=s.slice(1);}
var arr=[0x02];constructLength(arr,r.length);arr=arr.concat(r);arr.push(0x02);constructLength(arr,s.length);var backHalf=arr.concat(s);var res=[0x30];constructLength(res,backHalf.length);res=res.concat(backHalf);return utils.encode(res,enc);};}),(function(module,exports,__webpack_require__){"use strict";var hash=__webpack_require__(217);var elliptic=__webpack_require__(46);var utils=elliptic.utils;var assert=utils.assert;var parseBytes=utils.parseBytes;var KeyPair=__webpack_require__(709);var Signature=__webpack_require__(710);function EDDSA(curve){assert(curve==='ed25519','only tested with ed25519 so far');if(!(this instanceof EDDSA))
return new EDDSA(curve);var curve=elliptic.curves[curve].curve;this.curve=curve;this.g=curve.g;this.g.precompute(curve.n.bitLength()+1);this.pointClass=curve.point().constructor;this.encodingLength=Math.ceil(curve.n.bitLength()/8);this.hash=hash.sha512;}
module.exports=EDDSA;EDDSA.prototype.sign=function sign(message,secret){message=parseBytes(message);var key=this.keyFromSecret(secret);var r=this.hashInt(key.messagePrefix(),message);var R=this.g.mul(r);var Rencoded=this.encodePoint(R);var s_=this.hashInt(Rencoded,key.pubBytes(),message).mul(key.priv());var S=r.add(s_).umod(this.curve.n);return this.makeSignature({R:R,S:S,Rencoded:Rencoded});};EDDSA.prototype.verify=function verify(message,sig,pub){message=parseBytes(message);sig=this.makeSignature(sig);var key=this.keyFromPublic(pub);var h=this.hashInt(sig.Rencoded(),key.pubBytes(),message);var SG=this.g.mul(sig.S());var RplusAh=sig.R().add(key.pub().mul(h));return RplusAh.eq(SG);};EDDSA.prototype.hashInt=function hashInt(){var hash=this.hash();for(var i=0;i<arguments.length;i++)
hash.update(arguments[i]);return utils.intFromLE(hash.digest()).umod(this.curve.n);};EDDSA.prototype.keyFromPublic=function keyFromPublic(pub){return KeyPair.fromPublic(this,pub);};EDDSA.prototype.keyFromSecret=function keyFromSecret(secret){return KeyPair.fromSecret(this,secret);};EDDSA.prototype.makeSignature=function makeSignature(sig){if(sig instanceof Signature)
return sig;return new Signature(this,sig);};EDDSA.prototype.encodePoint=function encodePoint(point){var enc=point.getY().toArray('le',this.encodingLength);enc[this.encodingLength-1]|=point.getX().isOdd()?0x80:0;return enc;};EDDSA.prototype.decodePoint=function decodePoint(bytes){bytes=utils.parseBytes(bytes);var lastIx=bytes.length-1;var normed=bytes.slice(0,lastIx).concat(bytes[lastIx]&~0x80);var xIsOdd=(bytes[lastIx]&0x80)!==0;var y=utils.intFromLE(normed);return this.curve.pointFromY(y,xIsOdd);};EDDSA.prototype.encodeInt=function encodeInt(num){return num.toArray('le',this.encodingLength);};EDDSA.prototype.decodeInt=function decodeInt(bytes){return utils.intFromLE(bytes);};EDDSA.prototype.isPoint=function isPoint(val){return val instanceof this.pointClass;};}),(function(module,exports,__webpack_require__){"use strict";var elliptic=__webpack_require__(46);var utils=elliptic.utils;var assert=utils.assert;var parseBytes=utils.parseBytes;var cachedProperty=utils.cachedProperty;function KeyPair(eddsa,params){this.eddsa=eddsa;this._secret=parseBytes(params.secret);if(eddsa.isPoint(params.pub))
this._pub=params.pub;else
this._pubBytes=parseBytes(params.pub);}
KeyPair.fromPublic=function fromPublic(eddsa,pub){if(pub instanceof KeyPair)
return pub;return new KeyPair(eddsa,{pub:pub});};KeyPair.fromSecret=function fromSecret(eddsa,secret){if(secret instanceof KeyPair)
return secret;return new KeyPair(eddsa,{secret:secret});};KeyPair.prototype.secret=function secret(){return this._secret;};cachedProperty(KeyPair,'pubBytes',function pubBytes(){return this.eddsa.encodePoint(this.pub());});cachedProperty(KeyPair,'pub',function pub(){if(this._pubBytes)
return this.eddsa.decodePoint(this._pubBytes);return this.eddsa.g.mul(this.priv());});cachedProperty(KeyPair,'privBytes',function privBytes(){var eddsa=this.eddsa;var hash=this.hash();var lastIx=eddsa.encodingLength-1;var a=hash.slice(0,eddsa.encodingLength);a[0]&=248;a[lastIx]&=127;a[lastIx]|=64;return a;});cachedProperty(KeyPair,'priv',function priv(){return this.eddsa.decodeInt(this.privBytes());});cachedProperty(KeyPair,'hash',function hash(){return this.eddsa.hash().update(this.secret()).digest();});cachedProperty(KeyPair,'messagePrefix',function messagePrefix(){return this.hash().slice(this.eddsa.encodingLength);});KeyPair.prototype.sign=function sign(message){assert(this._secret,'KeyPair can only verify');return this.eddsa.sign(message,this);};KeyPair.prototype.verify=function verify(message,sig){return this.eddsa.verify(message,sig,this);};KeyPair.prototype.getSecret=function getSecret(enc){assert(this._secret,'KeyPair is public only');return utils.encode(this.secret(),enc);};KeyPair.prototype.getPublic=function getPublic(enc){return utils.encode(this.pubBytes(),enc);};module.exports=KeyPair;}),(function(module,exports,__webpack_require__){"use strict";var BN=__webpack_require__(29);var elliptic=__webpack_require__(46);var utils=elliptic.utils;var assert=utils.assert;var cachedProperty=utils.cachedProperty;var parseBytes=utils.parseBytes;function Signature(eddsa,sig){this.eddsa=eddsa;if(typeof sig!=='object')
sig=parseBytes(sig);if(Array.isArray(sig)){sig={R:sig.slice(0,eddsa.encodingLength),S:sig.slice(eddsa.encodingLength)};}
assert(sig.R&&sig.S,'Signature without R or S');if(eddsa.isPoint(sig.R))
this._R=sig.R;if(sig.S instanceof BN)
this._S=sig.S;this._Rencoded=Array.isArray(sig.R)?sig.R:sig.Rencoded;this._Sencoded=Array.isArray(sig.S)?sig.S:sig.Sencoded;}
cachedProperty(Signature,'S',function S(){return this.eddsa.decodeInt(this.Sencoded());});cachedProperty(Signature,'R',function R(){return this.eddsa.decodePoint(this.Rencoded());});cachedProperty(Signature,'Rencoded',function Rencoded(){return this.eddsa.encodePoint(this.R());});cachedProperty(Signature,'Sencoded',function Sencoded(){return this.eddsa.encodeInt(this.S());});Signature.prototype.toBytes=function toBytes(){return this.Rencoded().concat(this.Sencoded());};Signature.prototype.toHex=function toHex(){return utils.encode(this.toBytes(),'hex').toUpperCase();};module.exports=Signature;}),(function(module,exports,__webpack_require__){"use strict";var asn1=__webpack_require__(130)
exports.certificate=__webpack_require__(721)
var RSAPrivateKey=asn1.define('RSAPrivateKey',function(){this.seq().obj(this.key('version').int(),this.key('modulus').int(),this.key('publicExponent').int(),this.key('privateExponent').int(),this.key('prime1').int(),this.key('prime2').int(),this.key('exponent1').int(),this.key('exponent2').int(),this.key('coefficient').int())})
exports.RSAPrivateKey=RSAPrivateKey
var RSAPublicKey=asn1.define('RSAPublicKey',function(){this.seq().obj(this.key('modulus').int(),this.key('publicExponent').int())})
exports.RSAPublicKey=RSAPublicKey
var PublicKey=asn1.define('SubjectPublicKeyInfo',function(){this.seq().obj(this.key('algorithm').use(AlgorithmIdentifier),this.key('subjectPublicKey').bitstr())})
exports.PublicKey=PublicKey
var AlgorithmIdentifier=asn1.define('AlgorithmIdentifier',function(){this.seq().obj(this.key('algorithm').objid(),this.key('none').null_().optional(),this.key('curve').objid().optional(),this.key('params').seq().obj(this.key('p').int(),this.key('q').int(),this.key('g').int()).optional())})
var PrivateKeyInfo=asn1.define('PrivateKeyInfo',function(){this.seq().obj(this.key('version').int(),this.key('algorithm').use(AlgorithmIdentifier),this.key('subjectPrivateKey').octstr())})
exports.PrivateKey=PrivateKeyInfo
var EncryptedPrivateKeyInfo=asn1.define('EncryptedPrivateKeyInfo',function(){this.seq().obj(this.key('algorithm').seq().obj(this.key('id').objid(),this.key('decrypt').seq().obj(this.key('kde').seq().obj(this.key('id').objid(),this.key('kdeparams').seq().obj(this.key('salt').octstr(),this.key('iters').int())),this.key('cipher').seq().obj(this.key('algo').objid(),this.key('iv').octstr()))),this.key('subjectPrivateKey').octstr())})
exports.EncryptedPrivateKey=EncryptedPrivateKeyInfo
var DSAPrivateKey=asn1.define('DSAPrivateKey',function(){this.seq().obj(this.key('version').int(),this.key('p').int(),this.key('q').int(),this.key('g').int(),this.key('pub_key').int(),this.key('priv_key').int())})
exports.DSAPrivateKey=DSAPrivateKey
exports.DSAparam=asn1.define('DSAparam',function(){this.int()})
var ECPrivateKey=asn1.define('ECPrivateKey',function(){this.seq().obj(this.key('version').int(),this.key('privateKey').octstr(),this.key('parameters').optional().explicit(0).use(ECParameters),this.key('publicKey').optional().explicit(1).bitstr())})
exports.ECPrivateKey=ECPrivateKey
var ECParameters=asn1.define('ECParameters',function(){this.choice({namedCurve:this.objid()})})
exports.signature=asn1.define('signature',function(){this.seq().obj(this.key('r').int(),this.key('s').int())})}),(function(module,exports,__webpack_require__){var asn1=__webpack_require__(130);var inherits=__webpack_require__(7);var api=exports;api.define=function define(name,body){return new Entity(name,body);};function Entity(name,body){this.name=name;this.body=body;this.decoders={};this.encoders={};};Entity.prototype._createNamed=function createNamed(base){var named;try{named=__webpack_require__(713).runInThisContext('(function '+this.name+'(entity) {\n'+
'  this._initNamed(entity);\n'+
'})');}catch(e){named=function(entity){this._initNamed(entity);};}
inherits(named,base);named.prototype._initNamed=function initnamed(entity){base.call(this,entity);};return new named(this);};Entity.prototype._getDecoder=function _getDecoder(enc){enc=enc||'der';if(!this.decoders.hasOwnProperty(enc))
this.decoders[enc]=this._createNamed(asn1.decoders[enc]);return this.decoders[enc];};Entity.prototype.decode=function decode(data,enc,options){return this._getDecoder(enc).decode(data,options);};Entity.prototype._getEncoder=function _getEncoder(enc){enc=enc||'der';if(!this.encoders.hasOwnProperty(enc))
this.encoders[enc]=this._createNamed(asn1.encoders[enc]);return this.encoders[enc];};Entity.prototype.encode=function encode(data,enc,reporter){return this._getEncoder(enc).encode(data,reporter);};}),(function(module,exports,__webpack_require__){var indexOf=__webpack_require__(218);var Object_keys=function(obj){if(Object.keys)return Object.keys(obj)
else{var res=[];for(var key in obj)res.push(key)
return res;}};var forEach=function(xs,fn){if(xs.forEach)return xs.forEach(fn)
else for(var i=0;i<xs.length;i++){fn(xs[i],i,xs);}};var defineProp=(function(){try{Object.defineProperty({},'_',{});return function(obj,name,value){Object.defineProperty(obj,name,{writable:true,enumerable:false,configurable:true,value:value})};}catch(e){return function(obj,name,value){obj[name]=value;};}}());var globals=['Array','Boolean','Date','Error','EvalError','Function','Infinity','JSON','Math','NaN','Number','Object','RangeError','ReferenceError','RegExp','String','SyntaxError','TypeError','URIError','decodeURI','decodeURIComponent','encodeURI','encodeURIComponent','escape','eval','isFinite','isNaN','parseFloat','parseInt','undefined','unescape'];function Context(){}
Context.prototype={};var Script=exports.Script=function NodeScript(code){if(!(this instanceof Script))return new Script(code);this.code=code;};Script.prototype.runInContext=function(context){if(!(context instanceof Context)){throw new TypeError("needs a 'context' argument.");}
var iframe=document.createElement('iframe');if(!iframe.style)iframe.style={};iframe.style.display='none';document.body.appendChild(iframe);var win=iframe.contentWindow;var wEval=win.eval,wExecScript=win.execScript;if(!wEval&&wExecScript){wExecScript.call(win,'null');wEval=win.eval;}
forEach(Object_keys(context),function(key){win[key]=context[key];});forEach(globals,function(key){if(context[key]){win[key]=context[key];}});var winKeys=Object_keys(win);var res=wEval.call(win,this.code);forEach(Object_keys(win),function(key){if(key in context||indexOf(winKeys,key)===-1){context[key]=win[key];}});forEach(globals,function(key){if(!(key in context)){defineProp(context,key,win[key]);}});document.body.removeChild(iframe);return res;};Script.prototype.runInThisContext=function(){return eval(this.code);};Script.prototype.runInNewContext=function(context){var ctx=Script.createContext(context);var res=this.runInContext(ctx);forEach(Object_keys(ctx),function(key){context[key]=ctx[key];});return res;};forEach(Object_keys(Script.prototype),function(name){exports[name]=Script[name]=function(code){var s=Script(code);return s[name].apply(s,[].slice.call(arguments,1));};});exports.createScript=function(code){return exports.Script(code);};exports.createContext=Script.createContext=function(context){var copy=new Context();if(typeof context==='object'){forEach(Object_keys(context),function(key){copy[key]=context[key];});}
return copy;};}),(function(module,exports,__webpack_require__){var inherits=__webpack_require__(7);function Reporter(options){this._reporterState={obj:null,path:[],options:options||{},errors:[]};}
exports.Reporter=Reporter;Reporter.prototype.isError=function isError(obj){return obj instanceof ReporterError;};Reporter.prototype.save=function save(){var state=this._reporterState;return{obj:state.obj,pathLen:state.path.length};};Reporter.prototype.restore=function restore(data){var state=this._reporterState;state.obj=data.obj;state.path=state.path.slice(0,data.pathLen);};Reporter.prototype.enterKey=function enterKey(key){return this._reporterState.path.push(key);};Reporter.prototype.exitKey=function exitKey(index){var state=this._reporterState;state.path=state.path.slice(0,index-1);};Reporter.prototype.leaveKey=function leaveKey(index,key,value){var state=this._reporterState;this.exitKey(index);if(state.obj!==null)
state.obj[key]=value;};Reporter.prototype.path=function path(){return this._reporterState.path.join('/');};Reporter.prototype.enterObject=function enterObject(){var state=this._reporterState;var prev=state.obj;state.obj={};return prev;};Reporter.prototype.leaveObject=function leaveObject(prev){var state=this._reporterState;var now=state.obj;state.obj=prev;return now;};Reporter.prototype.error=function error(msg){var err;var state=this._reporterState;var inherited=msg instanceof ReporterError;if(inherited){err=msg;}else{err=new ReporterError(state.path.map(function(elem){return '['+JSON.stringify(elem)+']';}).join(''),msg.message||msg,msg.stack);}
if(!state.options.partial)
throw err;if(!inherited)
state.errors.push(err);return err;};Reporter.prototype.wrapResult=function wrapResult(result){var state=this._reporterState;if(!state.options.partial)
return result;return{result:this.isError(result)?null:result,errors:state.errors};};function ReporterError(path,msg){this.path=path;this.rethrow(msg);};inherits(ReporterError,Error);ReporterError.prototype.rethrow=function rethrow(msg){this.message=msg+' at: '+(this.path||'(shallow)');if(Error.captureStackTrace)
Error.captureStackTrace(this,ReporterError);if(!this.stack){try{throw new Error(this.message);}catch(e){this.stack=e.stack;}}
return this;};}),(function(module,exports,__webpack_require__){var Reporter=__webpack_require__(131).Reporter;var EncoderBuffer=__webpack_require__(131).EncoderBuffer;var DecoderBuffer=__webpack_require__(131).DecoderBuffer;var assert=__webpack_require__(55);var tags=['seq','seqof','set','setof','objid','bool','gentime','utctime','null_','enum','int','objDesc','bitstr','bmpstr','charstr','genstr','graphstr','ia5str','iso646str','numstr','octstr','printstr','t61str','unistr','utf8str','videostr'];var methods=['key','obj','use','optional','explicit','implicit','def','choice','any','contains'].concat(tags);var overrided=['_peekTag','_decodeTag','_use','_decodeStr','_decodeObjid','_decodeTime','_decodeNull','_decodeInt','_decodeBool','_decodeList','_encodeComposite','_encodeStr','_encodeObjid','_encodeTime','_encodeNull','_encodeInt','_encodeBool'];function Node(enc,parent){var state={};this._baseState=state;state.enc=enc;state.parent=parent||null;state.children=null;state.tag=null;state.args=null;state.reverseArgs=null;state.choice=null;state.optional=false;state.any=false;state.obj=false;state.use=null;state.useDecoder=null;state.key=null;state['default']=null;state.explicit=null;state.implicit=null;state.contains=null;if(!state.parent){state.children=[];this._wrap();}}
module.exports=Node;var stateProps=['enc','parent','children','tag','args','reverseArgs','choice','optional','any','obj','use','alteredUse','key','default','explicit','implicit','contains'];Node.prototype.clone=function clone(){var state=this._baseState;var cstate={};stateProps.forEach(function(prop){cstate[prop]=state[prop];});var res=new this.constructor(cstate.parent);res._baseState=cstate;return res;};Node.prototype._wrap=function wrap(){var state=this._baseState;methods.forEach(function(method){this[method]=function _wrappedMethod(){var clone=new this.constructor(this);state.children.push(clone);return clone[method].apply(clone,arguments);};},this);};Node.prototype._init=function init(body){var state=this._baseState;assert(state.parent===null);body.call(this);state.children=state.children.filter(function(child){return child._baseState.parent===this;},this);assert.equal(state.children.length,1,'Root node can have only one child');};Node.prototype._useArgs=function useArgs(args){var state=this._baseState;var children=args.filter(function(arg){return arg instanceof this.constructor;},this);args=args.filter(function(arg){return!(arg instanceof this.constructor);},this);if(children.length!==0){assert(state.children===null);state.children=children;children.forEach(function(child){child._baseState.parent=this;},this);}
if(args.length!==0){assert(state.args===null);state.args=args;state.reverseArgs=args.map(function(arg){if(typeof arg!=='object'||arg.constructor!==Object)
return arg;var res={};Object.keys(arg).forEach(function(key){if(key==(key|0))
key|=0;var value=arg[key];res[value]=key;});return res;});}};overrided.forEach(function(method){Node.prototype[method]=function _overrided(){var state=this._baseState;throw new Error(method+' not implemented for encoding: '+state.enc);};});tags.forEach(function(tag){Node.prototype[tag]=function _tagMethod(){var state=this._baseState;var args=Array.prototype.slice.call(arguments);assert(state.tag===null);state.tag=tag;this._useArgs(args);return this;};});Node.prototype.use=function use(item){assert(item);var state=this._baseState;assert(state.use===null);state.use=item;return this;};Node.prototype.optional=function optional(){var state=this._baseState;state.optional=true;return this;};Node.prototype.def=function def(val){var state=this._baseState;assert(state['default']===null);state['default']=val;state.optional=true;return this;};Node.prototype.explicit=function explicit(num){var state=this._baseState;assert(state.explicit===null&&state.implicit===null);state.explicit=num;return this;};Node.prototype.implicit=function implicit(num){var state=this._baseState;assert(state.explicit===null&&state.implicit===null);state.implicit=num;return this;};Node.prototype.obj=function obj(){var state=this._baseState;var args=Array.prototype.slice.call(arguments);state.obj=true;if(args.length!==0)
this._useArgs(args);return this;};Node.prototype.key=function key(newKey){var state=this._baseState;assert(state.key===null);state.key=newKey;return this;};Node.prototype.any=function any(){var state=this._baseState;state.any=true;return this;};Node.prototype.choice=function choice(obj){var state=this._baseState;assert(state.choice===null);state.choice=obj;this._useArgs(Object.keys(obj).map(function(key){return obj[key];}));return this;};Node.prototype.contains=function contains(item){var state=this._baseState;assert(state.use===null);state.contains=item;return this;};Node.prototype._decode=function decode(input,options){var state=this._baseState;if(state.parent===null)
return input.wrapResult(state.children[0]._decode(input,options));var result=state['default'];var present=true;var prevKey=null;if(state.key!==null)
prevKey=input.enterKey(state.key);if(state.optional){var tag=null;if(state.explicit!==null)
tag=state.explicit;else if(state.implicit!==null)
tag=state.implicit;else if(state.tag!==null)
tag=state.tag;if(tag===null&&!state.any){var save=input.save();try{if(state.choice===null)
this._decodeGeneric(state.tag,input,options);else
this._decodeChoice(input,options);present=true;}catch(e){present=false;}
input.restore(save);}else{present=this._peekTag(input,tag,state.any);if(input.isError(present))
return present;}}
var prevObj;if(state.obj&&present)
prevObj=input.enterObject();if(present){if(state.explicit!==null){var explicit=this._decodeTag(input,state.explicit);if(input.isError(explicit))
return explicit;input=explicit;}
var start=input.offset;if(state.use===null&&state.choice===null){if(state.any)
var save=input.save();var body=this._decodeTag(input,state.implicit!==null?state.implicit:state.tag,state.any);if(input.isError(body))
return body;if(state.any)
result=input.raw(save);else
input=body;}
if(options&&options.track&&state.tag!==null)
options.track(input.path(),start,input.length,'tagged');if(options&&options.track&&state.tag!==null)
options.track(input.path(),input.offset,input.length,'content');if(state.any)
result=result;else if(state.choice===null)
result=this._decodeGeneric(state.tag,input,options);else
result=this._decodeChoice(input,options);if(input.isError(result))
return result;if(!state.any&&state.choice===null&&state.children!==null){state.children.forEach(function decodeChildren(child){child._decode(input,options);});}
if(state.contains&&(state.tag==='octstr'||state.tag==='bitstr')){var data=new DecoderBuffer(result);result=this._getUse(state.contains,input._reporterState.obj)._decode(data,options);}}
if(state.obj&&present)
result=input.leaveObject(prevObj);if(state.key!==null&&(result!==null||present===true))
input.leaveKey(prevKey,state.key,result);else if(prevKey!==null)
input.exitKey(prevKey);return result;};Node.prototype._decodeGeneric=function decodeGeneric(tag,input,options){var state=this._baseState;if(tag==='seq'||tag==='set')
return null;if(tag==='seqof'||tag==='setof')
return this._decodeList(input,tag,state.args[0],options);else if(/str$/.test(tag))
return this._decodeStr(input,tag,options);else if(tag==='objid'&&state.args)
return this._decodeObjid(input,state.args[0],state.args[1],options);else if(tag==='objid')
return this._decodeObjid(input,null,null,options);else if(tag==='gentime'||tag==='utctime')
return this._decodeTime(input,tag,options);else if(tag==='null_')
return this._decodeNull(input,options);else if(tag==='bool')
return this._decodeBool(input,options);else if(tag==='objDesc')
return this._decodeStr(input,tag,options);else if(tag==='int'||tag==='enum')
return this._decodeInt(input,state.args&&state.args[0],options);if(state.use!==null){return this._getUse(state.use,input._reporterState.obj)._decode(input,options);}else{return input.error('unknown tag: '+tag);}};Node.prototype._getUse=function _getUse(entity,obj){var state=this._baseState;state.useDecoder=this._use(entity,obj);assert(state.useDecoder._baseState.parent===null);state.useDecoder=state.useDecoder._baseState.children[0];if(state.implicit!==state.useDecoder._baseState.implicit){state.useDecoder=state.useDecoder.clone();state.useDecoder._baseState.implicit=state.implicit;}
return state.useDecoder;};Node.prototype._decodeChoice=function decodeChoice(input,options){var state=this._baseState;var result=null;var match=false;Object.keys(state.choice).some(function(key){var save=input.save();var node=state.choice[key];try{var value=node._decode(input,options);if(input.isError(value))
return false;result={type:key,value:value};match=true;}catch(e){input.restore(save);return false;}
return true;},this);if(!match)
return input.error('Choice not matched');return result;};Node.prototype._createEncoderBuffer=function createEncoderBuffer(data){return new EncoderBuffer(data,this.reporter);};Node.prototype._encode=function encode(data,reporter,parent){var state=this._baseState;if(state['default']!==null&&state['default']===data)
return;var result=this._encodeValue(data,reporter,parent);if(result===undefined)
return;if(this._skipDefault(result,reporter,parent))
return;return result;};Node.prototype._encodeValue=function encode(data,reporter,parent){var state=this._baseState;if(state.parent===null)
return state.children[0]._encode(data,reporter||new Reporter());var result=null;this.reporter=reporter;if(state.optional&&data===undefined){if(state['default']!==null)
data=state['default']
else
return;}
var content=null;var primitive=false;if(state.any){result=this._createEncoderBuffer(data);}else if(state.choice){result=this._encodeChoice(data,reporter);}else if(state.contains){content=this._getUse(state.contains,parent)._encode(data,reporter);primitive=true;}else if(state.children){content=state.children.map(function(child){if(child._baseState.tag==='null_')
return child._encode(null,reporter,data);if(child._baseState.key===null)
return reporter.error('Child should have a key');var prevKey=reporter.enterKey(child._baseState.key);if(typeof data!=='object')
return reporter.error('Child expected, but input is not object');var res=child._encode(data[child._baseState.key],reporter,data);reporter.leaveKey(prevKey);return res;},this).filter(function(child){return child;});content=this._createEncoderBuffer(content);}else{if(state.tag==='seqof'||state.tag==='setof'){if(!(state.args&&state.args.length===1))
return reporter.error('Too many args for : '+state.tag);if(!Array.isArray(data))
return reporter.error('seqof/setof, but data is not Array');var child=this.clone();child._baseState.implicit=null;content=this._createEncoderBuffer(data.map(function(item){var state=this._baseState;return this._getUse(state.args[0],data)._encode(item,reporter);},child));}else if(state.use!==null){result=this._getUse(state.use,parent)._encode(data,reporter);}else{content=this._encodePrimitive(state.tag,data);primitive=true;}}
var result;if(!state.any&&state.choice===null){var tag=state.implicit!==null?state.implicit:state.tag;var cls=state.implicit===null?'universal':'context';if(tag===null){if(state.use===null)
reporter.error('Tag could be omitted only for .use()');}else{if(state.use===null)
result=this._encodeComposite(tag,primitive,cls,content);}}
if(state.explicit!==null)
result=this._encodeComposite(state.explicit,false,'context',result);return result;};Node.prototype._encodeChoice=function encodeChoice(data,reporter){var state=this._baseState;var node=state.choice[data.type];if(!node){assert(false,data.type+' not found in '+
JSON.stringify(Object.keys(state.choice)));}
return node._encode(data.value,reporter);};Node.prototype._encodePrimitive=function encodePrimitive(tag,data){var state=this._baseState;if(/str$/.test(tag))
return this._encodeStr(data,tag);else if(tag==='objid'&&state.args)
return this._encodeObjid(data,state.reverseArgs[0],state.args[1]);else if(tag==='objid')
return this._encodeObjid(data,null,null);else if(tag==='gentime'||tag==='utctime')
return this._encodeTime(data,tag);else if(tag==='null_')
return this._encodeNull();else if(tag==='int'||tag==='enum')
return this._encodeInt(data,state.args&&state.reverseArgs[0]);else if(tag==='bool')
return this._encodeBool(data);else if(tag==='objDesc')
return this._encodeStr(data,tag);else
throw new Error('Unsupported tag: '+tag);};Node.prototype._isNumstr=function isNumstr(str){return /^[0-9 ]*$/.test(str);};Node.prototype._isPrintstr=function isPrintstr(str){return /^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(str);};}),(function(module,exports,__webpack_require__){var constants=__webpack_require__(337);exports.tagClass={0:'universal',1:'application',2:'context',3:'private'};exports.tagClassByName=constants._reverse(exports.tagClass);exports.tag={0x00:'end',0x01:'bool',0x02:'int',0x03:'bitstr',0x04:'octstr',0x05:'null_',0x06:'objid',0x07:'objDesc',0x08:'external',0x09:'real',0x0a:'enum',0x0b:'embed',0x0c:'utf8str',0x0d:'relativeOid',0x10:'seq',0x11:'set',0x12:'numstr',0x13:'printstr',0x14:'t61str',0x15:'videostr',0x16:'ia5str',0x17:'utctime',0x18:'gentime',0x19:'graphstr',0x1a:'iso646str',0x1b:'genstr',0x1c:'unistr',0x1d:'charstr',0x1e:'bmpstr'};exports.tagByName=constants._reverse(exports.tag);}),(function(module,exports,__webpack_require__){var decoders=exports;decoders.der=__webpack_require__(338);decoders.pem=__webpack_require__(718);}),(function(module,exports,__webpack_require__){var inherits=__webpack_require__(7);var Buffer=__webpack_require__(1).Buffer;var DERDecoder=__webpack_require__(338);function PEMDecoder(entity){DERDecoder.call(this,entity);this.enc='pem';};inherits(PEMDecoder,DERDecoder);module.exports=PEMDecoder;PEMDecoder.prototype.decode=function decode(data,options){var lines=data.toString().split(/[\r\n]+/g);var label=options.label.toUpperCase();var re=/^-----(BEGIN|END) ([^-]+)-----$/;var start=-1;var end=-1;for(var i=0;i<lines.length;i++){var match=lines[i].match(re);if(match===null)
continue;if(match[2]!==label)
continue;if(start===-1){if(match[1]!=='BEGIN')
break;start=i;}else{if(match[1]!=='END')
break;end=i;break;}}
if(start===-1||end===-1)
throw new Error('PEM section not found for: '+label);var base64=lines.slice(start+1,end).join('');base64.replace(/[^a-z0-9\+\/=]+/gi,'');var input=new Buffer(base64,'base64');return DERDecoder.prototype.decode.call(this,input,options);};}),(function(module,exports,__webpack_require__){var encoders=exports;encoders.der=__webpack_require__(339);encoders.pem=__webpack_require__(720);}),(function(module,exports,__webpack_require__){var inherits=__webpack_require__(7);var DEREncoder=__webpack_require__(339);function PEMEncoder(entity){DEREncoder.call(this,entity);this.enc='pem';};inherits(PEMEncoder,DEREncoder);module.exports=PEMEncoder;PEMEncoder.prototype.encode=function encode(data,options){var buf=DEREncoder.prototype.encode.call(this,data);var p=buf.toString('base64');var out=['-----BEGIN '+options.label+'-----'];for(var i=0;i<p.length;i+=64)
out.push(p.slice(i,i+64));out.push('-----END '+options.label+'-----');return out.join('\n');};}),(function(module,exports,__webpack_require__){"use strict";var asn=__webpack_require__(130)
var Time=asn.define('Time',function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})
var AttributeTypeValue=asn.define('AttributeTypeValue',function(){this.seq().obj(this.key('type').objid(),this.key('value').any())})
var AlgorithmIdentifier=asn.define('AlgorithmIdentifier',function(){this.seq().obj(this.key('algorithm').objid(),this.key('parameters').optional())})
var SubjectPublicKeyInfo=asn.define('SubjectPublicKeyInfo',function(){this.seq().obj(this.key('algorithm').use(AlgorithmIdentifier),this.key('subjectPublicKey').bitstr())})
var RelativeDistinguishedName=asn.define('RelativeDistinguishedName',function(){this.setof(AttributeTypeValue)})
var RDNSequence=asn.define('RDNSequence',function(){this.seqof(RelativeDistinguishedName)})
var Name=asn.define('Name',function(){this.choice({rdnSequence:this.use(RDNSequence)})})
var Validity=asn.define('Validity',function(){this.seq().obj(this.key('notBefore').use(Time),this.key('notAfter').use(Time))})
var Extension=asn.define('Extension',function(){this.seq().obj(this.key('extnID').objid(),this.key('critical').bool().def(false),this.key('extnValue').octstr())})
var TBSCertificate=asn.define('TBSCertificate',function(){this.seq().obj(this.key('version').explicit(0).int(),this.key('serialNumber').int(),this.key('signature').use(AlgorithmIdentifier),this.key('issuer').use(Name),this.key('validity').use(Validity),this.key('subject').use(Name),this.key('subjectPublicKeyInfo').use(SubjectPublicKeyInfo),this.key('issuerUniqueID').implicit(1).bitstr().optional(),this.key('subjectUniqueID').implicit(2).bitstr().optional(),this.key('extensions').explicit(3).seqof(Extension).optional())})
var X509Certificate=asn.define('X509Certificate',function(){this.seq().obj(this.key('tbsCertificate').use(TBSCertificate),this.key('signatureAlgorithm').use(AlgorithmIdentifier),this.key('signatureValue').bitstr())})
module.exports=X509Certificate}),(function(module,exports){module.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}}),(function(module,exports,__webpack_require__){(function(Buffer){var findProc=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r\+\/\=]+)[\n\r]+/m
var startRegex=/^-----BEGIN ((?:.* KEY)|CERTIFICATE)-----/m
var fullRegex=/^-----BEGIN ((?:.* KEY)|CERTIFICATE)-----([0-9A-z\n\r\+\/\=]+)-----END \1-----$/m
var evp=__webpack_require__(166)
var ciphers=__webpack_require__(214)
module.exports=function(okey,password){var key=okey.toString()
var match=key.match(findProc)
var decrypted
if(!match){var match2=key.match(fullRegex)
decrypted=new Buffer(match2[2].replace(/[\r\n]/g,''),'base64')}else{var suite='aes'+match[1]
var iv=new Buffer(match[2],'hex')
var cipherText=new Buffer(match[3].replace(/[\r\n]/g,''),'base64')
var cipherKey=evp(password,iv.slice(0,8),parseInt(match[1],10)).key
var out=[]
var cipher=ciphers.createDecipheriv(suite,cipherKey,iv)
out.push(cipher.update(cipherText))
out.push(cipher.final())
decrypted=Buffer.concat(out)}
var tag=key.match(startRegex)[1]
return{tag:tag,data:decrypted}}}.call(exports,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){(function(Buffer){var BN=__webpack_require__(29)
var EC=__webpack_require__(46).ec
var parseKeys=__webpack_require__(168)
var curves=__webpack_require__(340)
function verify(sig,hash,key,signType,tag){var pub=parseKeys(key)
if(pub.type==='ec'){if(signType!=='ecdsa'&&signType!=='ecdsa/rsa')throw new Error('wrong public key type')
return ecVerify(sig,hash,pub)}else if(pub.type==='dsa'){if(signType!=='dsa')throw new Error('wrong public key type')
return dsaVerify(sig,hash,pub)}else{if(signType!=='rsa'&&signType!=='ecdsa/rsa')throw new Error('wrong public key type')}
hash=Buffer.concat([tag,hash])
var len=pub.modulus.byteLength()
var pad=[1]
var padNum=0
while(hash.length+pad.length+2<len){pad.push(0xff)
padNum++}
pad.push(0x00)
var i=-1
while(++i<hash.length){pad.push(hash[i])}
pad=new Buffer(pad)
var red=BN.mont(pub.modulus)
sig=new BN(sig).toRed(red)
sig=sig.redPow(new BN(pub.publicExponent))
sig=new Buffer(sig.fromRed().toArray())
var out=padNum<8?1:0
len=Math.min(sig.length,pad.length)
if(sig.length!==pad.length)out=1
i=-1
while(++i<len)out|=sig[i]^pad[i]
return out===0}
function ecVerify(sig,hash,pub){var curveId=curves[pub.data.algorithm.curve.join('.')]
if(!curveId)throw new Error('unknown curve '+pub.data.algorithm.curve.join('.'))
var curve=new EC(curveId)
var pubkey=pub.data.subjectPrivateKey.data
return curve.verify(hash,sig,pubkey)}
function dsaVerify(sig,hash,pub){var p=pub.data.p
var q=pub.data.q
var g=pub.data.g
var y=pub.data.pub_key
var unpacked=parseKeys.signature.decode(sig,'der')
var s=unpacked.s
var r=unpacked.r
checkValue(s,q)
checkValue(r,q)
var montp=BN.mont(p)
var w=s.invm(q)
var v=g.toRed(montp).redPow(new BN(hash).mul(w).mod(q)).fromRed().mul(y.toRed(montp).redPow(r.mul(w).mod(q)).fromRed()).mod(p).mod(q)
return v.cmp(r)===0}
function checkValue(b,q){if(b.cmpn(0)<=0)throw new Error('invalid sig')
if(b.cmp(q)>=q)throw new Error('invalid sig')}
module.exports=verify}.call(exports,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){(function(Buffer){var elliptic=__webpack_require__(46)
var BN=__webpack_require__(29)
module.exports=function createECDH(curve){return new ECDH(curve)}
var aliases={secp256k1:{name:'secp256k1',byteLength:32},secp224r1:{name:'p224',byteLength:28},prime256v1:{name:'p256',byteLength:32},prime192v1:{name:'p192',byteLength:24},ed25519:{name:'ed25519',byteLength:32},secp384r1:{name:'p384',byteLength:48},secp521r1:{name:'p521',byteLength:66}}
aliases.p224=aliases.secp224r1
aliases.p256=aliases.secp256r1=aliases.prime256v1
aliases.p192=aliases.secp192r1=aliases.prime192v1
aliases.p384=aliases.secp384r1
aliases.p521=aliases.secp521r1
function ECDH(curve){this.curveType=aliases[curve]
if(!this.curveType){this.curveType={name:curve}}
this.curve=new elliptic.ec(this.curveType.name)
this.keys=void 0}
ECDH.prototype.generateKeys=function(enc,format){this.keys=this.curve.genKeyPair()
return this.getPublicKey(enc,format)}
ECDH.prototype.computeSecret=function(other,inenc,enc){inenc=inenc||'utf8'
if(!Buffer.isBuffer(other)){other=new Buffer(other,inenc)}
var otherPub=this.curve.keyFromPublic(other).getPublic()
var out=otherPub.mul(this.keys.getPrivate()).getX()
return formatReturnValue(out,enc,this.curveType.byteLength)}
ECDH.prototype.getPublicKey=function(enc,format){var key=this.keys.getPublic(format==='compressed',true)
if(format==='hybrid'){if(key[key.length-1]%2){key[0]=7}else{key[0]=6}}
return formatReturnValue(key,enc)}
ECDH.prototype.getPrivateKey=function(enc){return formatReturnValue(this.keys.getPrivate(),enc)}
ECDH.prototype.setPublicKey=function(pub,enc){enc=enc||'utf8'
if(!Buffer.isBuffer(pub)){pub=new Buffer(pub,enc)}
this.keys._importPublic(pub)
return this}
ECDH.prototype.setPrivateKey=function(priv,enc){enc=enc||'utf8'
if(!Buffer.isBuffer(priv)){priv=new Buffer(priv,enc)}
var _priv=new BN(priv)
_priv=_priv.toString(16)
this.keys=this.curve.genKeyPair()
this.keys._importPrivate(_priv)
return this}
function formatReturnValue(bn,enc,len){if(!Array.isArray(bn)){bn=bn.toArray()}
var buf=new Buffer(bn)
if(len&&buf.length<len){var zeros=new Buffer(len-buf.length)
zeros.fill(0)
buf=Buffer.concat([zeros,buf])}
if(!enc){return buf}else{return buf.toString(enc)}}}.call(exports,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){exports.publicEncrypt=__webpack_require__(727)
exports.privateDecrypt=__webpack_require__(728)
exports.privateEncrypt=function privateEncrypt(key,buf){return exports.publicEncrypt(key,buf,true)}
exports.publicDecrypt=function publicDecrypt(key,buf){return exports.privateDecrypt(key,buf,true)}}),(function(module,exports,__webpack_require__){var parseKeys=__webpack_require__(168)
var randomBytes=__webpack_require__(102)
var createHash=__webpack_require__(103)
var mgf=__webpack_require__(341)
var xor=__webpack_require__(342)
var BN=__webpack_require__(29)
var withPublic=__webpack_require__(343)
var crt=__webpack_require__(216)
var Buffer=__webpack_require__(4).Buffer
module.exports=function publicEncrypt(publicKey,msg,reverse){var padding
if(publicKey.padding){padding=publicKey.padding}else if(reverse){padding=1}else{padding=4}
var key=parseKeys(publicKey)
var paddedMsg
if(padding===4){paddedMsg=oaep(key,msg)}else if(padding===1){paddedMsg=pkcs1(key,msg,reverse)}else if(padding===3){paddedMsg=new BN(msg)
if(paddedMsg.cmp(key.modulus)>=0){throw new Error('data too long for modulus')}}else{throw new Error('unknown padding')}
if(reverse){return crt(paddedMsg,key)}else{return withPublic(paddedMsg,key)}}
function oaep(key,msg){var k=key.modulus.byteLength()
var mLen=msg.length
var iHash=createHash('sha1').update(Buffer.alloc(0)).digest()
var hLen=iHash.length
var hLen2=2*hLen
if(mLen>k-hLen2-2){throw new Error('message too long')}
var ps=Buffer.alloc(k-mLen-hLen2-2)
var dblen=k-hLen-1
var seed=randomBytes(hLen)
var maskedDb=xor(Buffer.concat([iHash,ps,Buffer.alloc(1,1),msg],dblen),mgf(seed,dblen))
var maskedSeed=xor(seed,mgf(maskedDb,hLen))
return new BN(Buffer.concat([Buffer.alloc(1),maskedSeed,maskedDb],k))}
function pkcs1(key,msg,reverse){var mLen=msg.length
var k=key.modulus.byteLength()
if(mLen>k-11){throw new Error('message too long')}
var ps
if(reverse){ps=Buffer.alloc(k-mLen-3,0xff)}else{ps=nonZero(k-mLen-3)}
return new BN(Buffer.concat([Buffer.from([0,reverse?1:2]),ps,Buffer.alloc(1),msg],k))}
function nonZero(len){var out=Buffer.allocUnsafe(len)
var i=0
var cache=randomBytes(len*2)
var cur=0
var num
while(i<len){if(cur===cache.length){cache=randomBytes(len*2)
cur=0}
num=cache[cur++]
if(num){out[i++]=num}}
return out}}),(function(module,exports,__webpack_require__){var parseKeys=__webpack_require__(168)
var mgf=__webpack_require__(341)
var xor=__webpack_require__(342)
var BN=__webpack_require__(29)
var crt=__webpack_require__(216)
var createHash=__webpack_require__(103)
var withPublic=__webpack_require__(343)
var Buffer=__webpack_require__(4).Buffer
module.exports=function privateDecrypt(privateKey,enc,reverse){var padding
if(privateKey.padding){padding=privateKey.padding}else if(reverse){padding=1}else{padding=4}
var key=parseKeys(privateKey)
var k=key.modulus.byteLength()
if(enc.length>k||new BN(enc).cmp(key.modulus)>=0){throw new Error('decryption error')}
var msg
if(reverse){msg=withPublic(new BN(enc),key)}else{msg=crt(enc,key)}
var zBuffer=Buffer.alloc(k-msg.length)
msg=Buffer.concat([zBuffer,msg],k)
if(padding===4){return oaep(key,msg)}else if(padding===1){return pkcs1(key,msg,reverse)}else if(padding===3){return msg}else{throw new Error('unknown padding')}}
function oaep(key,msg){var k=key.modulus.byteLength()
var iHash=createHash('sha1').update(Buffer.alloc(0)).digest()
var hLen=iHash.length
if(msg[0]!==0){throw new Error('decryption error')}
var maskedSeed=msg.slice(1,hLen+1)
var maskedDb=msg.slice(hLen+1)
var seed=xor(maskedSeed,mgf(maskedDb,hLen))
var db=xor(maskedDb,mgf(seed,k-hLen-1))
if(compare(iHash,db.slice(0,hLen))){throw new Error('decryption error')}
var i=hLen
while(db[i]===0){i++}
if(db[i++]!==1){throw new Error('decryption error')}
return db.slice(i)}
function pkcs1(key,msg,reverse){var p1=msg.slice(0,2)
var i=2
var status=0
while(msg[i++]!==0){if(i>=msg.length){status++
break}}
var ps=msg.slice(2,i-1)
if((p1.toString('hex')!=='0002'&&!reverse)||(p1.toString('hex')!=='0001'&&reverse)){status++}
if(ps.length<8){status++}
if(status){throw new Error('decryption error')}
return msg.slice(i)}
function compare(a,b){a=Buffer.from(a)
b=Buffer.from(b)
var dif=0
var len=a.length
if(a.length!==b.length){dif++
len=Math.min(a.length,b.length)}
var i=-1
while(++i<len){dif+=(a[i]^b[i])}
return dif}}),(function(module,exports,__webpack_require__){"use strict";(function(global,process){function oldBrowser(){throw new Error('secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11')}
var safeBuffer=__webpack_require__(4)
var randombytes=__webpack_require__(102)
var Buffer=safeBuffer.Buffer
var kBufferMaxLength=safeBuffer.kMaxLength
var crypto=global.crypto||global.msCrypto
var kMaxUint32=Math.pow(2,32)-1
function assertOffset(offset,length){if(typeof offset!=='number'||offset!==offset){throw new TypeError('offset must be a number')}
if(offset>kMaxUint32||offset<0){throw new TypeError('offset must be a uint32')}
if(offset>kBufferMaxLength||offset>length){throw new RangeError('offset out of range')}}
function assertSize(size,offset,length){if(typeof size!=='number'||size!==size){throw new TypeError('size must be a number')}
if(size>kMaxUint32||size<0){throw new TypeError('size must be a uint32')}
if(size+offset>length||size>kBufferMaxLength){throw new RangeError('buffer too small')}}
if((crypto&&crypto.getRandomValues)||!process.browser){exports.randomFill=randomFill
exports.randomFillSync=randomFillSync}else{exports.randomFill=oldBrowser
exports.randomFillSync=oldBrowser}
function randomFill(buf,offset,size,cb){if(!Buffer.isBuffer(buf)&&!(buf instanceof global.Uint8Array)){throw new TypeError('"buf" argument must be a Buffer or Uint8Array')}
if(typeof offset==='function'){cb=offset
offset=0
size=buf.length}else if(typeof size==='function'){cb=size
size=buf.length-offset}else if(typeof cb!=='function'){throw new TypeError('"cb" argument must be a function')}
assertOffset(offset,buf.length)
assertSize(size,offset,buf.length)
return actualFill(buf,offset,size,cb)}
function actualFill(buf,offset,size,cb){if(process.browser){var ourBuf=buf.buffer
var uint=new Uint8Array(ourBuf,offset,size)
crypto.getRandomValues(uint)
if(cb){process.nextTick(function(){cb(null,buf)})
return}
return buf}
if(cb){randombytes(size,function(err,bytes){if(err){return cb(err)}
bytes.copy(buf,offset)
cb(null,buf)})
return}
var bytes=randombytes(size)
bytes.copy(buf,offset)
return buf}
function randomFillSync(buf,offset,size){if(typeof offset==='undefined'){offset=0}
if(!Buffer.isBuffer(buf)&&!(buf instanceof global.Uint8Array)){throw new TypeError('"buf" argument must be a Buffer or Uint8Array')}
assertOffset(offset,buf.length)
if(size===undefined)size=buf.length-offset
assertSize(size,offset,buf.length)
return actualFill(buf,offset,size)}}.call(exports,__webpack_require__(10),__webpack_require__(20)))}),(function(module,exports,__webpack_require__){(function(Buffer){var bufferFill=__webpack_require__(731)
var allocUnsafe=__webpack_require__(732)
module.exports=function alloc(size,fill,encoding){if(typeof size!=='number'){throw new TypeError('"size" argument must be a number')}
if(size<0){throw new RangeError('"size" argument must not be negative')}
if(Buffer.alloc){return Buffer.alloc(size,fill,encoding)}
var buffer=allocUnsafe(size)
if(size===0){return buffer}
if(fill===undefined){return bufferFill(buffer,0)}
if(typeof encoding!=='string'){encoding=undefined}
return bufferFill(buffer,fill,encoding)}}.call(exports,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){(function(Buffer){var hasFullSupport=(function(){try{if(!Buffer.isEncoding('latin1')){return false}
var buf=Buffer.alloc?Buffer.alloc(4):new Buffer(4)
buf.fill('ab','ucs2')
return(buf.toString('hex')==='61006200')}catch(_){return false}}())
function isSingleByte(val){return(val.length===1&&val.charCodeAt(0)<256)}
function fillWithNumber(buffer,val,start,end){if(start<0||end>buffer.length){throw new RangeError('Out of range index')}
start=start>>>0
end=end===undefined?buffer.length:end>>>0
if(end>start){buffer.fill(val,start,end)}
return buffer}
function fillWithBuffer(buffer,val,start,end){if(start<0||end>buffer.length){throw new RangeError('Out of range index')}
if(end<=start){return buffer}
start=start>>>0
end=end===undefined?buffer.length:end>>>0
var pos=start
var len=val.length
while(pos<=(end-len)){val.copy(buffer,pos)
pos+=len}
if(pos!==end){val.copy(buffer,pos,0,end-pos)}
return buffer}
function fill(buffer,val,start,end,encoding){if(hasFullSupport){return buffer.fill(val,start,end,encoding)}
if(typeof val==='number'){return fillWithNumber(buffer,val,start,end)}
if(typeof val==='string'){if(typeof start==='string'){encoding=start
start=0
end=buffer.length}else if(typeof end==='string'){encoding=end
end=buffer.length}
if(encoding!==undefined&&typeof encoding!=='string'){throw new TypeError('encoding must be a string')}
if(encoding==='latin1'){encoding='binary'}
if(typeof encoding==='string'&&!Buffer.isEncoding(encoding)){throw new TypeError('Unknown encoding: '+encoding)}
if(val===''){return fillWithNumber(buffer,0,start,end)}
if(isSingleByte(val)){return fillWithNumber(buffer,val.charCodeAt(0),start,end)}
val=new Buffer(val,encoding)}
if(Buffer.isBuffer(val)){return fillWithBuffer(buffer,val,start,end)}
return fillWithNumber(buffer,0,start,end)}
module.exports=fill}.call(exports,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){(function(Buffer){function allocUnsafe(size){if(typeof size!=='number'){throw new TypeError('"size" argument must be a number')}
if(size<0){throw new RangeError('"size" argument must not be negative')}
if(Buffer.allocUnsafe){return Buffer.allocUnsafe(size)}else{return new Buffer(size)}}
module.exports=allocUnsafe}.call(exports,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:true});(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1__web_assembly_Argon2_Browser_WebAssembly__=__webpack_require__(735);const argon2=__webpack_require__(734).argon2;const HASH_ARGON2_OPTIONS={salt:__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].HASH_ARGON2_PARAMS.salt,time:__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].HASH_ARGON2_PARAMS.time,mem:__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].HASH_ARGON2_PARAMS.memBytes,parallelism:__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].HASH_ARGON2_PARAMS.parallelism,type:__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].HASH_ARGON2_PARAMS.algoBrowser,hashLen:__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].HASH_ARGON2_PARAMS.hashLen,}
class Argon2Browser{constructor(){if(true)
window.argon2=argon2;}
async hash(data){let result=await __WEBPACK_IMPORTED_MODULE_1__web_assembly_Argon2_Browser_WebAssembly__["a"].hash(data);if(result)
return result;return this.hashJavascript(data);}
async hashString(data){let result=await __WEBPACK_IMPORTED_MODULE_1__web_assembly_Argon2_Browser_WebAssembly__["a"].hashString(data);if(result)return result;return this.hashJavascriptString()}
async hashJavascript(data){try{let params=HASH_ARGON2_OPTIONS;params.pass=data;let result=await argon2.hash(params);return new Buffer(result.hash);}catch(Exception){console.log("Argon2 exception hashJavascript",Exception)
throw Exception}}
async hashJavascriptString(data){try{let params=HASH_ARGON2_OPTIONS;params.pass=data;let result=await argon2.hash(params);let hash=result.encoded.substr(result.encoded.lastIndexOf("$")+1)
return hash;}catch(Exception){console.log("Argon2 exception hashJavascriptString",Exception)
throw Exception}}}
__webpack_exports__["default"]=(new Argon2Browser());}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(root,factory){if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=(function(){return(root.argon2=factory());}).apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));}else{root.argon2=factory();}}(this,function(){'use strict';var defaultDistPath='/node_modules/argon2-browser/dist';var ArgonType={Argon2d:0,Argon2i:1,Argon2id:2};var scriptLoadedPromise;function loadScript(src){return new Promise(function(resolve,reject){if(typeof importScripts==='function'){importScripts(src);resolve();}else{var el=document.createElement("script");el.src=src;el.onload=function(){resolve();};el.onerror=function(){reject('Error loading script');};document.body.appendChild(el);}});}
function allocateArray(strOrArr){var arr=strOrArr instanceof Uint8Array||strOrArr instanceof Array?strOrArr:Module.intArrayFromString(strOrArr);return Module.allocate(arr,'i8',Module.ALLOC_NORMAL);}
function argon2Hash(params){if(!scriptLoadedPromise){var distPath=params.distPath||defaultDistPath;scriptLoadedPromise=loadScript(distPath+'/argon2-asm.min.js');}
return scriptLoadedPromise.then(function(){var tCost=params.time||1;var mCost=params.mem||1024;var parallelism=params.parallelism||1;var pwd=allocateArray(params.pass);var pwdlen=params.pass.length;var salt=allocateArray(params.salt);var saltlen=params.salt.length;var hash=Module.allocate(new Array(params.hashLen||24),'i8',Module.ALLOC_NORMAL);var hashlen=params.hashLen||24;var encoded=Module.allocate(new Array(512),'i8',Module.ALLOC_NORMAL);var encodedlen=512;var argon2Type=params.type||argon2.ArgonType.Argon2d;var version=0x13;var err;try{var res=Module._argon2_hash(tCost,mCost,parallelism,pwd,pwdlen,salt,saltlen,hash,hashlen,encoded,encodedlen,argon2Type,version);}catch(e){err=e;}
var result;if(res===0&&!err){var hashStr='';var hashArr=new Uint8Array(hashlen);for(var i=0;i<hashlen;i++){var byte=Module.HEAP8[hash+i];hashArr[i]=byte;hashStr+=('0'+(0xFF&byte).toString(16)).slice(-2);}
var encodedStr=Module.Pointer_stringify(encoded);result={hash:hashArr,hashHex:hashStr,encoded:encodedStr};}else{try{if(!err){err=Module.Pointer_stringify(Module._argon2_error_message(res))}}catch(e){}
result={message:err,code:res};}
try{Module._free(pwd);Module._free(salt);Module._free(hash);Module._free(encoded);}catch(e){}
if(err){throw result;}else{return result;}});}
function argon2Verify(params){if(!scriptLoadedPromise){var distPath=params.distPath||defaultDistPath;scriptLoadedPromise=loadScript(distPath+'/argon2-asm.min.js');}
return scriptLoadedPromise.then(function(){var pwd=allocateArray(params.pass);var pwdlen=params.pass.length;var enc=allocateArray(params.encoded);var argon2Type=params.type;if(argon2Type===undefined){var typeStr=params.encoded.split('$')[1];if(typeStr){typeStr=typeStr.replace('a','A');argon2Type=ArgonType[typeStr]||ArgonType.Argon2d;}}
var err;try{var res=Module._argon2_verify(enc,pwd,pwdlen,argon2Type);}catch(e){err=e;}
var result;if(res||err){try{if(!err){err=Module.Pointer_stringify(Module._argon2_error_message(res))}}catch(e){}
result={message:err,code:res};}
try{Module._free(pwd);Module._free(enc);}catch(e){}
if(err){throw result;}else{return result;}});}
return{ArgonType:ArgonType,hash:argon2Hash,verify:argon2Verify};}));}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1__antelle_calc_js__=__webpack_require__(736);var __WEBPACK_IMPORTED_MODULE_2__antelle_main_js__=__webpack_require__(737);var __WEBPACK_IMPORTED_MODULE_3_common_utils_BufferExtended__=__webpack_require__(3);let Argon2WebAssemblyCalc=new __WEBPACK_IMPORTED_MODULE_1__antelle_calc_js__["a"]();const HASH_ARGON2_OPTIONS={salt:__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].HASH_ARGON2_PARAMS.salt,time:__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].HASH_ARGON2_PARAMS.time,mem:__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].HASH_ARGON2_PARAMS.memBytes,parallelism:__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].HASH_ARGON2_PARAMS.parallelism,type:__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].HASH_ARGON2_PARAMS.algoBrowser,hashLen:__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].HASH_ARGON2_PARAMS.hashLen,}
class Argon2BrowserWebAssembly{_calculateHash(method,params){try{let answer=Argon2WebAssemblyCalc.calc(method,params)
return answer;}catch(Exception){console.log('_calculateHashWorker raised exception',Exception);return null;}}
async _calcBest(params){let result;try{result=await this._calculateHash(Argon2WebAssemblyCalc.calcWasm,params);if(result!==null)return result;}catch(ex){}
try{result=await this._calculateHash(Argon2WebAssemblyCalc.calcAsmJs,params);if(result!==null)return result;}catch(ex){}
try{result=await this._calculateHash(Argon2WebAssemblyCalc.calcBinaryenSexpr,params);if(result!==null)return result;}catch(ex){}
try{result=await this._calculateHash(Argon2WebAssemblyCalc.calcBinaryenBin,params);if(result!==null)return result;}catch(ex){}
try{result=await this._calculateHash(__WEBPACK_IMPORTED_MODULE_2__antelle_main_js__["a"].calcPNaCl,params);if(result!==null)return result;}catch(ex){}
return null;}
_calculateHashWorker(method,params){try{return Argon2WebAssemblyCalc.calcWorker(method,params)}catch(Exception){console.error('_calculateHashWorker raised exception',Exception)
return null;}}
calcWorkerAsm(data){this._calculateHashWorker('asm',data)}
calcWorkerWasm(data){this._calculateHashWorker('wasm',data)}
calcWorkerBest(data){let result;result=this.calcWorkerAsm(data)
if(result!==null)return result;result=this.calcWorkerWasm(data)
if(result!==null)return result;}
async hash(data){try{let params=HASH_ARGON2_OPTIONS;params.pass=data
let result=await this._calculateHash(Argon2WebAssemblyCalc.calcAsmJs,params);if(result===null)throw{message:"Argon2 returned empty"};return new Buffer(result.hash);}catch(Exception){console.error("Argon2 exception hash",Exception)
return null;}}
async hashString(data){try{let params=HASH_ARGON2_OPTIONS;params.pass=data
let result=await this._calcBest(params);if(result===null)throw{message:"Argon2 returned empty"};return Buffer.from(result.hash).toString("hex");}catch(Exception){console.error("Argon2 exception hashString",Exception);return null;}}}
__webpack_exports__["a"]=(new Argon2BrowserWebAssembly());}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var global=typeof window==="undefined"?self:window;var root="https://webdollar.io/public";class Argon2BrowserWebAssemblyCalc{constructor(){this._libraryLoadPromise=null;this._librayLoaded=false;}
calc(fn,arg){try{return fn.call(this,arg);}catch(e){console.log('Error Argon2',e);return null;}}
calcAsmJs(arg){let promise=new Promise(async(resolve)=>{if(global.Module&&!global.Module.wasmJSMethod){if(!this._librayLoaded)await this._libraryLoadPromise;resolve(this.calcHash(arg));return;}
this._librayLoaded=false;global.Module={print:this.log,printErr:this.log,setStatus:this.log};var ts=this.now();this.loadScript(root+'/dist/argon2/argon2-asm.min.js',()=>{this._librayLoaded=true;resolve(this.calcHash(arg))},()=>{this._librayLoaded=true;this.log('Error loading script');});});if(!this._librayLoaded)
this._libraryLoadPromise=promise;return promise;}
calcWasm(arg){return this.calcBinaryen(arg,'native-wasm');}
calcBinaryenSexpr(arg){return this.calcBinaryen(arg,'interpret-s-expr');}
calcBinaryenBin(arg){return this.calcBinaryen(arg,'interpret-binary');}
calcBinaryen(arg,method){this.clearLog();let promise=new Promise(async(resolve)=>{if(!global.WebAssembly){this.log('Your browser doesn\'t support WebAssembly, please try it in Chrome Canary or Firefox Nightly with WASM flag enabled');resolve(null);return;}
const mem=arg.mem;if(global.Module&&global.Module.wasmJSMethod===method&&global.Module._argon2_hash){if(!this._librayLoaded)await this._libraryLoadPromise;resolve(this.calcHash(arg));return;}
this._librayLoaded=false;const KB=1024*1024;const MB=1024*KB;const GB=1024*MB;const WASM_PAGE_SIZE=64*1024;const totalMemory=(2*GB-64*KB)/1024/WASM_PAGE_SIZE;const initialMemory=Math.min(Math.max(Math.ceil(mem*1024/WASM_PAGE_SIZE),256)+256,totalMemory);this.log('Memory: '+initialMemory+' pages ('+Math.round(initialMemory*64)+' KB)',totalMemory);const wasmMemory=new WebAssembly.Memory({initial:initialMemory,maximum:totalMemory});global.Module={print:this.log,printErr:this.log,setStatus:this.log,wasmBinary:null,wasmJSMethod:method,asmjsCodeFile:root+'/dist/argon2/argon2-asm.min.asm.js',wasmBinaryFile:root+'/dist/argon2/argon2.wasm',wasmTextFile:root+'/dist/argon2/argon2.wast',wasmMemory:wasmMemory,buffer:wasmMemory.buffer,TOTAL_MEMORY:initialMemory*WASM_PAGE_SIZE};this.log('Loading wasm...');var xhr=new XMLHttpRequest();xhr.open('GET',root+'/dist/argon2/argon2.wasm',true);xhr.responseType='arraybuffer';xhr.onload=()=>{global.Module.wasmBinary=xhr.response;global.Module.postRun=()=>resolve(this.calcHash(arg));var ts=this.now();this.log('Wasm loaded, loading script...');this.loadScript(root+'/dist/argon2/argon2.min.js',()=>{this.log('Script loaded in '+Math.round(this.now()-ts)+'ms');this.log('Calculating hash....');this._librayLoaded=true;},()=>{this._librayLoaded=true;this.log('Error loading script');});};xhr.onerror=()=>{this.log('Error loading wasm');};xhr.send(null);});if(!this._librayLoaded)
this._libraryLoadPromise=promise;return promise;}
calcHash(arg){if(!Module._argon2_hash){this.log('Error Calculate Hash');return null;}
let result=null;var dt=this.now();var t_cost=arg&&arg.time||10;var m_cost=arg&&arg.mem||1024;var parallelism=arg&&arg.parallelism||1;var pwd=this.allocateArray(arg&&arg.pass||'password');var pwdlen=arg&&arg.pass?arg.pass.length:8;var salt=this.allocateArray(arg&&arg.salt||'somesalt');var saltlen=arg&&arg.salt?arg.salt.length:8;var hash=Module.allocate(new Array(arg&&arg.hashLen||32),'i8',Module.ALLOC_NORMAL);var hashlen=arg&&arg.hashLen||32;var encoded=Module.allocate(new Array(512),'i8',Module.ALLOC_NORMAL);var encodedlen=512;var argon2_type=arg&&arg.type||0;var version=0x13;var err;try{var res=Module._argon2_hash(t_cost,m_cost,parallelism,pwd,pwdlen,salt,saltlen,hash,hashlen,encoded,encodedlen,argon2_type,version);}catch(e){err=e;}
var elapsed=this.now()-dt;if(res===0&&!err){var hashArr=new Uint8Array(hashlen);for(var i=hash;i<hash+hashlen;i++){hashArr[i-hash]=Module.HEAP8[i];}
result={hash:hashArr,elapsed:elapsed};}else{try{if(!err){err=Module.Pointer_stringify(Module._argon2_error_message(res))}}catch(e){}
this.log('Error: '+res+(err?': '+err:''));}
try{Module._free(pwd);Module._free(salt);Module._free(hash);Module._free(encoded);}catch(e){}
return result;}
now(){return typeof global.performance!=='undefined'?performance.now():Date.now();}
log(msg){}
clearLog(){}
loadScript(src,onload,onerror){return new Promise(async(resolve)=>{for(let i=0;i<20;i++){if(document!==undefined&&document.body!==undefined)
break;await this.sleep(10);}
if(document!==undefined&&document.body!==undefined){let el=document.createElement("script");el.src=src;el.onload=onload;el.onerror=onerror;document.body.appendChild(el);resolve(true);}else{onerror("error");resolve(false);}});}
allocateArray(strOrArr){var arr=strOrArr instanceof Uint8Array||strOrArr instanceof Array?strOrArr:Module.intArrayFromString(strOrArr);return Module.allocate(arr,'i8',Module.ALLOC_NORMAL);}
sleep(ms){return new Promise(resolve=>setTimeout(resolve,ms));}}
__webpack_exports__["a"]=(Argon2BrowserWebAssemblyCalc);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";class Argon2BrowserAntelleMain{constructor(){this.worker=null;this.pnaclTs=null;this.logTs=0;}
calcWorker(method,arg){if(this.worker){if(this.worker.method===method){this.worker.postMessage({calc:method,arg:arg});return;}else{this.worker.terminate();}}
this.worker=new Worker('js/worker.js');this.worker.method=method;var loaded=false;this.worker.onmessage=(e)=>{if(!loaded){loaded=true;this.worker.postMessage({calc:method,arg:arg});}};}
calcPNaCl(arg){window.Module=null;if(!navigator.mimeTypes['application/x-pnacl']){throw 'PNaCl is not supported by your browser';}
var listener=document.getElementById('pnaclListener');var moduleEl=document.getElementById('pnacl-argon2');this.pnaclTs=performance.now();if(moduleEl){moduleEl.postMessage(arg);return;}
moduleEl=document.createElement('embed');moduleEl.setAttribute('name','argon2');moduleEl.setAttribute('id','pnacl-argon2');moduleEl.setAttribute('width','0');moduleEl.setAttribute('height','0');moduleEl.setAttribute('src','argon2.nmf');moduleEl.setAttribute('type','application/x-pnacl');listener.addEventListener('load',function(){this.pnaclTs=performance.now();moduleEl.postMessage(arg);},true);listener.addEventListener('message',function(e){var encoded=e.data.encoded;var hash=e.data.hash;if(e.data.res){}else{}},true);listener.addEventListener('error',function(){console.log('Error');},true);listener.addEventListener('crash',function(){console.log('Crash');},true);listener.appendChild(moduleEl);moduleEl.offsetTop;}
clearLog(){}
log(msg){}}
__webpack_exports__["a"]=(new Argon2BrowserAntelleMain());}),(function(module,exports,__webpack_require__){var window=__webpack_require__(739);var nodeCrypto=__webpack_require__(740);function getRandomValues(buf){if(window.crypto&&window.crypto.getRandomValues){return window.crypto.getRandomValues(buf);}
if(typeof window.msCrypto==='object'&&typeof window.msCrypto.getRandomValues==='function'){return window.msCrypto.getRandomValues(buf);}
if(nodeCrypto.randomBytes){if(!(buf instanceof Uint8Array)){throw new TypeError('expected Uint8Array');}
if(buf.length>65536){var e=new Error();e.code=22;e.message='Failed to execute \'getRandomValues\' on \'Crypto\': The '+
'ArrayBufferView\'s byte length ('+buf.length+') exceeds the '+
'number of bytes of entropy available via this API (65536).';e.name='QuotaExceededError';throw e;}
var bytes=nodeCrypto.randomBytes(buf.length);buf.set(bytes);return buf;}
else{throw new Error('No secure random number generator available.');}}
module.exports=getRandomValues;}),(function(module,exports,__webpack_require__){(function(global){var win;if(typeof window!=="undefined"){win=window;}else if(typeof global!=="undefined"){win=global;}else if(typeof self!=="undefined"){win=self;}else{win={};}
module.exports=win;}.call(exports,__webpack_require__(10)))}),(function(module,exports){}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address__=__webpack_require__(742);class MiniBlockchainAddress extends __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address__["a"]{}
__webpack_exports__["a"]=(MiniBlockchainAddress);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_crypto_ed25519__=__webpack_require__(75);var __WEBPACK_IMPORTED_MODULE_1_node_menu_Advanced_Messages__=__webpack_require__(86);var __WEBPACK_IMPORTED_MODULE_2_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_3__Interface_Blockchain_Address_Helper__=__webpack_require__(17);var __WEBPACK_IMPORTED_MODULE_4_common_satoshmindb_Interface_SatoshminDB__=__webpack_require__(69);var __WEBPACK_IMPORTED_MODULE_5_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_6_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_7_common_crypto_WebDollar_Crypto__=__webpack_require__(28);var __WEBPACK_IMPORTED_MODULE_8_common_crypto_WebDollar_Crypto_Data__=__webpack_require__(106);var __WEBPACK_IMPORTED_MODULE_9__MultiSig__=__webpack_require__(751);const FileSystem=__webpack_require__(62);class InterfaceBlockchainAddress{constructor(db){this.address=null;this.unencodedAddress=null;this.publicKey=null;if(!db)
this.db=new __WEBPACK_IMPORTED_MODULE_4_common_satoshmindb_Interface_SatoshminDB__["a"](__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].DATABASE_NAMES.WALLET_DATABASE);else
this.db=db;this._privateKeyForMining=undefined;}
async createNewAddress(salt,privateKeyWIF){if(this.address!==null){console.log("WARNING! You overwrite the initial address");}
let result=__WEBPACK_IMPORTED_MODULE_3__Interface_Blockchain_Address_Helper__["a"].generateAddress(salt,privateKeyWIF);this.address=result.addressWIF;this.unencodedAddress=result.unencodedAddress;this.publicKey=result.publicKey;await this.savePrivateKey(result.privateKey.privateKeyWIF);}
encrypt(data,password){if(!password)
return data;else{let encr=null;if(Array.isArray(password))
encr=__WEBPACK_IMPORTED_MODULE_9__MultiSig__["a"].getMultiAESEncrypt(data,password);else
encr=__WEBPACK_IMPORTED_MODULE_7_common_crypto_WebDollar_Crypto__["a"].encryptAES(data,password);return Buffer.from(encr);}}
decrypt(data,password){if(!password)
return data;else{let decr=null;if(Array.isArray(password))
decr=__WEBPACK_IMPORTED_MODULE_9__MultiSig__["a"].getMultiAESDecrypt(data,password);else
decr=__WEBPACK_IMPORTED_MODULE_7_common_crypto_WebDollar_Crypto__["a"].decryptAES(data,password);return Buffer.from(decr);}}
async isPrivateKeyEncrypted(){let privateKey=await this._getPrivateKey();try{if(__WEBPACK_IMPORTED_MODULE_3__Interface_Blockchain_Address_Helper__["a"].validatePrivateKeyWIF(privateKey)){let generatedPublicKey=__WEBPACK_IMPORTED_MODULE_3__Interface_Blockchain_Address_Helper__["a"]._generatePublicKey(privateKey);return!__WEBPACK_IMPORTED_MODULE_6_common_utils_BufferExtended__["a"].safeCompare(generatedPublicKey,this.publicKey);}}catch(exception){return true;}}
async savePrivateKey(value,password){let key=this.address+'_privateKey';try{value=this.encrypt(value,password);let result=await this.db.save(key,value);return result;}
catch(err){return 'ERROR on SAVE privateKey: '+err;}}
async _getPrivateKey(password){let key=this.address+'_privateKey';try{let value=await this.db.get(key);if(password)
value=this.decrypt(value,password);return value;}
catch(err){return 'ERROR on LOAD privateKey: '+err;}}
async getPrivateKey(password){if(this._privateKeyForMining)
return this._privateKeyForMining;if(!password&&await this.isPrivateKeyEncrypted()){if(!password)
password=await __WEBPACK_IMPORTED_MODULE_3__Interface_Blockchain_Address_Helper__["a"].askForPassword();if(!password)
return null;}
let privateKey=await this._getPrivateKey(password);try{let answer=__WEBPACK_IMPORTED_MODULE_3__Interface_Blockchain_Address_Helper__["a"].validatePrivateKeyWIF(privateKey);if(!answer.result)
throw{message:"private key is invalid"};return answer.privateKey;}catch(exception){__WEBPACK_IMPORTED_MODULE_1_node_menu_Advanced_Messages__["a"].alert('Your password is incorrect!',"Password Error","error",5000);return null;}}
async removePrivateKey(){let key=this.address+'_privateKey';try{return(await this.db.remove(key));}
catch(err){return 'ERROR on REMOVE privateKey: '+err;}}
async exportAddressPrivateKeyToHex(){return(await this._getPrivateKey()).toString("hex");}
exportPrivateKey(fileName,totalMultiSig=3,requiredMultiSig=2){return new Promise(resolve=>{if(totalMultiSig<requiredMultiSig){console.error("totalMultiSig should be greater(or equal) than requiredMultiSig!");resolve(false);return;}
FileSystem.open(fileName,'w',async(err,fd)=>{if(err){resolve(false);return;}
let list=[];let privateKey=await this._getPrivateKey();list.push(__WEBPACK_IMPORTED_MODULE_5_common_utils_Serialization__["a"].serializeNumber1Byte(privateKey.length));list.push(privateKey);list.push(__WEBPACK_IMPORTED_MODULE_5_common_utils_Serialization__["a"].serializeNumber1Byte(totalMultiSig));list.push(__WEBPACK_IMPORTED_MODULE_5_common_utils_Serialization__["a"].serializeNumber1Byte(requiredMultiSig));let buffer=Buffer.concat(list);FileSystem.write(fd,buffer,0,buffer.length,null,function(err){if(err){resolve(false);return;}
FileSystem.close(fd,function(){resolve(true);});});});});}
importPrivateKey(fileName){return new Promise(resolve=>{let readStream=FileSystem.createReadStream(fileName);readStream.on('data',async(buffer)=>{let offset=0;let len=__WEBPACK_IMPORTED_MODULE_5_common_utils_Serialization__["a"].deserializeNumber1Bytes(buffer,offset,);offset+=1;let privateKey=__WEBPACK_IMPORTED_MODULE_6_common_utils_BufferExtended__["a"].substr(buffer,offset,len);offset+=len;let totalMultiSig=__WEBPACK_IMPORTED_MODULE_5_common_utils_Serialization__["a"].deserializeNumber1Bytes(buffer,offset);offset+=1;let requiredMultiSig=__WEBPACK_IMPORTED_MODULE_5_common_utils_Serialization__["a"].deserializeNumber1Bytes(buffer,offset);offset+=1;resolve({result:await this.savePrivateKey(privateKey),totalMultiSig:totalMultiSig,requiredMultiSig:requiredMultiSig});});});}
importPrivateKeyFromString(privateKeyString){return this.savePrivateKey(Buffer.from(privateKeyString,"hex"));}
exportPrivateKeyToString(){return this._getPrivateKey().then((response)=>{return response.toString("hex");}).catch((err)=>{console.error("Cannot export privateKey as string: "+err);return err;});}
exportAddressToString(){return this.address;}
async serializeAddress(serializePrivateKey=false){let privateKeyArray=[];if(serializePrivateKey){let privateKey=await this._getPrivateKey();privateKeyArray=[__WEBPACK_IMPORTED_MODULE_5_common_utils_Serialization__["a"].serializeNumber1Byte(privateKey.length),privateKey];}
return Buffer.concat([__WEBPACK_IMPORTED_MODULE_5_common_utils_Serialization__["a"].serializeNumber1Byte(__WEBPACK_IMPORTED_MODULE_6_common_utils_BufferExtended__["a"].fromBase(this.address).length),__WEBPACK_IMPORTED_MODULE_6_common_utils_BufferExtended__["a"].fromBase(this.address),__WEBPACK_IMPORTED_MODULE_5_common_utils_Serialization__["a"].serializeNumber1Byte(this.unencodedAddress.length),this.unencodedAddress,__WEBPACK_IMPORTED_MODULE_5_common_utils_Serialization__["a"].serializeNumber1Byte(this.publicKey.length),this.publicKey].concat(privateKeyArray));}
async deserializeAddress(buffer,deserializePrivateKey=false){buffer=__WEBPACK_IMPORTED_MODULE_8_common_crypto_WebDollar_Crypto_Data__["a"].createWebDollarCryptoData(buffer).buffer;let offset=0;let len=0;try{len=__WEBPACK_IMPORTED_MODULE_5_common_utils_Serialization__["a"].deserializeNumber1Bytes(buffer,offset);offset+=1;this.address=__WEBPACK_IMPORTED_MODULE_6_common_utils_BufferExtended__["a"].toBase(__WEBPACK_IMPORTED_MODULE_6_common_utils_BufferExtended__["a"].substr(buffer,offset,len));offset+=len;if(__WEBPACK_IMPORTED_MODULE_3__Interface_Blockchain_Address_Helper__["a"].getUnencodedAddressFromWIF(this.address)===null)
throw{message:"address didn't pass the validateAddressChecksum "};this.address=__WEBPACK_IMPORTED_MODULE_3__Interface_Blockchain_Address_Helper__["a"].generateAddressWIF(this.address,false,true);len=__WEBPACK_IMPORTED_MODULE_5_common_utils_Serialization__["a"].deserializeNumber1Bytes(buffer,offset);offset+=1;let unencodedAddress=__WEBPACK_IMPORTED_MODULE_6_common_utils_BufferExtended__["a"].substr(buffer,offset,len);offset+=len;let answer=__WEBPACK_IMPORTED_MODULE_3__Interface_Blockchain_Address_Helper__["a"].getUnencodedAddressFromWIF(unencodedAddress);if(answer===null)throw{message:"unencodedAddress didn't pass the validateAddressChecksum"};this.unencodedAddress=answer;len=__WEBPACK_IMPORTED_MODULE_5_common_utils_Serialization__["a"].deserializeNumber1Bytes(buffer,offset);offset+=1;this.publicKey=__WEBPACK_IMPORTED_MODULE_6_common_utils_BufferExtended__["a"].substr(buffer,offset,len);offset+=len;if(deserializePrivateKey){len=__WEBPACK_IMPORTED_MODULE_5_common_utils_Serialization__["a"].deserializeNumber1Bytes(buffer,offset);offset+=1;let privateKey=__WEBPACK_IMPORTED_MODULE_6_common_utils_BufferExtended__["a"].substr(buffer,offset,len);offset+=len;await this.savePrivateKey(privateKey);}}catch(exception){console.log("error deserializing address. ",exception);console.log("this.address",this.address);console.log("this.unencodedAddress",this.unencodedAddress.toString("hex"));throw exception;}
return offset;}
async saveAddress(){let key=this.address.toString('hex');let value=await this.serializeAddress();try{return(await this.db.save(key,value));}
catch(err){return 'ERROR on SAVE blockchain address: '+err;}}
async loadAddress(){let key=this.address.toString('hex');try{let value=await this.db.get(key);if(!value)
return false;await this.deserializeAddress(value);return true;}
catch(err){console.log('ERROR on LOAD blockchain address: ',err);return false;}}
async removeAddress(){let key=this.address.toString('hex');try{return(await this.db.remove(key));}
catch(err){return 'ERROR on REMOVE blockchain address: ',err;}}
async signMessage(serialization,password,returnPublicKey=false){let addressGenerated;try{let privateKey=await this.getPrivateKey(password);addressGenerated=__WEBPACK_IMPORTED_MODULE_3__Interface_Blockchain_Address_Helper__["a"].generateAddress(undefined,privateKey);}catch(exception){console.error("Error Getting Private Key",exception);throw exception;}
try{let signature=__WEBPACK_IMPORTED_MODULE_0_common_crypto_ed25519__["a"].sign(serialization,addressGenerated.privateKey.privateKey);if(returnPublicKey)return{signature:signature,publicKey:addressGenerated.publicKey};else return signature;}catch(exception){console.error("Error Signing the message ",exception);throw exception;}
return null;}
async signTransaction(transaction,password){let privateKey=await this.getPrivateKey(password);let serialization,addressIndex,addressGenerated;try{addressGenerated=__WEBPACK_IMPORTED_MODULE_3__Interface_Blockchain_Address_Helper__["a"].generateAddress(undefined,privateKey);addressIndex=transaction.from.findAddressIndex(addressGenerated.unencodedAddress);if(addressIndex===-1)
throw{message:"transaction not found"};transaction.from.addresses[addressIndex].publicKey=addressGenerated.publicKey;serialization=transaction.serializeFromForSigning(addressGenerated.unencodedAddress);}catch(exception){console.error("Error Serializing the Transaction",exception);throw exception;}
try{let signature=__WEBPACK_IMPORTED_MODULE_0_common_crypto_ed25519__["a"].sign(serialization,addressGenerated.privateKey.privateKey);transaction.from.addresses[addressIndex].signature=signature;return signature;}catch(exception){console.error("Error Signing the Transaction",exception);throw exception;}
return null;}
async _toStringDebug(){let privateKey=await this._getPrivateKey();if(privateKey||(privateKey.status&&privateKey.status===404))
privateKey=null;return "address"+this.address.toString()+(this.publicKey!==null?"public key"+this.publicKey.toString():'')+(privateKey!==null?"private key"+privateKey.toString():'')}
toString(){return this.address.toString()}}
__webpack_exports__["a"]=(InterfaceBlockchainAddress);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){(function(Buffer,module){(function(w){"use strict";function findBest(atobNative){if('function'===typeof atobNative){return atobNative;}
if('function'===typeof Buffer){return function atobBrowserify(a){return new Buffer(a,'base64').toString('binary');};}
if('object'===typeof w.base64js){return function atobWebWorker_iOS(a){var buf=w.base64js.b64ToByteArray(a);return Array.prototype.map.call(buf,function(ch){return String.fromCharCode(ch);}).join('');};}
return function(){throw new Error("You're probably in an old browser or an iOS webworker."+
" It might help to include beatgammit's base64-js.");};}
var atobBest=findBest(w.atob);w.atob=atobBest;if((typeof module==='object')&&module&&module.exports){module.exports=atobBest;}}(window));}.call(exports,__webpack_require__(1).Buffer,__webpack_require__(83)(module)))}),(function(module,exports,__webpack_require__){"use strict";module.exports=argsArray;function argsArray(fun){return function(){var len=arguments.length;if(len){var args=[];var i=-1;while(++i<len){args[i]=arguments[i];}
return fun.call(this,args);}else{return fun.call(this,[]);}};}}),(function(module,exports,__webpack_require__){"use strict";(function(global){var Mutation=global.MutationObserver||global.WebKitMutationObserver;var scheduleDrain;{if(Mutation){var called=0;var observer=new Mutation(nextTick);var element=global.document.createTextNode('');observer.observe(element,{characterData:true});scheduleDrain=function(){element.data=(called=++called%2);};}else if(!global.setImmediate&&typeof global.MessageChannel!=='undefined'){var channel=new global.MessageChannel();channel.port1.onmessage=nextTick;scheduleDrain=function(){channel.port2.postMessage(0);};}else if('document'in global&&'onreadystatechange'in global.document.createElement('script')){scheduleDrain=function(){var scriptEl=global.document.createElement('script');scriptEl.onreadystatechange=function(){nextTick();scriptEl.onreadystatechange=null;scriptEl.parentNode.removeChild(scriptEl);scriptEl=null;};global.document.documentElement.appendChild(scriptEl);};}else{scheduleDrain=function(){setTimeout(nextTick,0);};}}
var draining;var queue=[];function nextTick(){draining=true;var i,oldQueue;var len=queue.length;while(len){oldQueue=queue;queue=[];i=-1;while(++i<len){oldQueue[i]();}
len=queue.length;}
draining=false;}
module.exports=immediate;function immediate(task){if(queue.push(task)===1&&!draining){scheduleDrain();}}}.call(exports,__webpack_require__(10)))}),(function(module,exports,__webpack_require__){(function(factory){if(true){module.exports=factory();}else if(typeof define==='function'&&define.amd){define(factory);}else{var glob;try{glob=window;}catch(e){glob=self;}
glob.SparkMD5=factory();}}(function(undefined){'use strict';var add32=function(a,b){return(a+b)&0xFFFFFFFF;},hex_chr=['0','1','2','3','4','5','6','7','8','9','a','b','c','d','e','f'];function cmn(q,a,b,x,s,t){a=add32(add32(a,q),add32(x,t));return add32((a<<s)|(a>>>(32-s)),b);}
function md5cycle(x,k){var a=x[0],b=x[1],c=x[2],d=x[3];a+=(b&c|~b&d)+k[0]-680876936|0;a=(a<<7|a>>>25)+b|0;d+=(a&b|~a&c)+k[1]-389564586|0;d=(d<<12|d>>>20)+a|0;c+=(d&a|~d&b)+k[2]+606105819|0;c=(c<<17|c>>>15)+d|0;b+=(c&d|~c&a)+k[3]-1044525330|0;b=(b<<22|b>>>10)+c|0;a+=(b&c|~b&d)+k[4]-176418897|0;a=(a<<7|a>>>25)+b|0;d+=(a&b|~a&c)+k[5]+1200080426|0;d=(d<<12|d>>>20)+a|0;c+=(d&a|~d&b)+k[6]-1473231341|0;c=(c<<17|c>>>15)+d|0;b+=(c&d|~c&a)+k[7]-45705983|0;b=(b<<22|b>>>10)+c|0;a+=(b&c|~b&d)+k[8]+1770035416|0;a=(a<<7|a>>>25)+b|0;d+=(a&b|~a&c)+k[9]-1958414417|0;d=(d<<12|d>>>20)+a|0;c+=(d&a|~d&b)+k[10]-42063|0;c=(c<<17|c>>>15)+d|0;b+=(c&d|~c&a)+k[11]-1990404162|0;b=(b<<22|b>>>10)+c|0;a+=(b&c|~b&d)+k[12]+1804603682|0;a=(a<<7|a>>>25)+b|0;d+=(a&b|~a&c)+k[13]-40341101|0;d=(d<<12|d>>>20)+a|0;c+=(d&a|~d&b)+k[14]-1502002290|0;c=(c<<17|c>>>15)+d|0;b+=(c&d|~c&a)+k[15]+1236535329|0;b=(b<<22|b>>>10)+c|0;a+=(b&d|c&~d)+k[1]-165796510|0;a=(a<<5|a>>>27)+b|0;d+=(a&c|b&~c)+k[6]-1069501632|0;d=(d<<9|d>>>23)+a|0;c+=(d&b|a&~b)+k[11]+643717713|0;c=(c<<14|c>>>18)+d|0;b+=(c&a|d&~a)+k[0]-373897302|0;b=(b<<20|b>>>12)+c|0;a+=(b&d|c&~d)+k[5]-701558691|0;a=(a<<5|a>>>27)+b|0;d+=(a&c|b&~c)+k[10]+38016083|0;d=(d<<9|d>>>23)+a|0;c+=(d&b|a&~b)+k[15]-660478335|0;c=(c<<14|c>>>18)+d|0;b+=(c&a|d&~a)+k[4]-405537848|0;b=(b<<20|b>>>12)+c|0;a+=(b&d|c&~d)+k[9]+568446438|0;a=(a<<5|a>>>27)+b|0;d+=(a&c|b&~c)+k[14]-1019803690|0;d=(d<<9|d>>>23)+a|0;c+=(d&b|a&~b)+k[3]-187363961|0;c=(c<<14|c>>>18)+d|0;b+=(c&a|d&~a)+k[8]+1163531501|0;b=(b<<20|b>>>12)+c|0;a+=(b&d|c&~d)+k[13]-1444681467|0;a=(a<<5|a>>>27)+b|0;d+=(a&c|b&~c)+k[2]-51403784|0;d=(d<<9|d>>>23)+a|0;c+=(d&b|a&~b)+k[7]+1735328473|0;c=(c<<14|c>>>18)+d|0;b+=(c&a|d&~a)+k[12]-1926607734|0;b=(b<<20|b>>>12)+c|0;a+=(b^c^d)+k[5]-378558|0;a=(a<<4|a>>>28)+b|0;d+=(a^b^c)+k[8]-2022574463|0;d=(d<<11|d>>>21)+a|0;c+=(d^a^b)+k[11]+1839030562|0;c=(c<<16|c>>>16)+d|0;b+=(c^d^a)+k[14]-35309556|0;b=(b<<23|b>>>9)+c|0;a+=(b^c^d)+k[1]-1530992060|0;a=(a<<4|a>>>28)+b|0;d+=(a^b^c)+k[4]+1272893353|0;d=(d<<11|d>>>21)+a|0;c+=(d^a^b)+k[7]-155497632|0;c=(c<<16|c>>>16)+d|0;b+=(c^d^a)+k[10]-1094730640|0;b=(b<<23|b>>>9)+c|0;a+=(b^c^d)+k[13]+681279174|0;a=(a<<4|a>>>28)+b|0;d+=(a^b^c)+k[0]-358537222|0;d=(d<<11|d>>>21)+a|0;c+=(d^a^b)+k[3]-722521979|0;c=(c<<16|c>>>16)+d|0;b+=(c^d^a)+k[6]+76029189|0;b=(b<<23|b>>>9)+c|0;a+=(b^c^d)+k[9]-640364487|0;a=(a<<4|a>>>28)+b|0;d+=(a^b^c)+k[12]-421815835|0;d=(d<<11|d>>>21)+a|0;c+=(d^a^b)+k[15]+530742520|0;c=(c<<16|c>>>16)+d|0;b+=(c^d^a)+k[2]-995338651|0;b=(b<<23|b>>>9)+c|0;a+=(c^(b|~d))+k[0]-198630844|0;a=(a<<6|a>>>26)+b|0;d+=(b^(a|~c))+k[7]+1126891415|0;d=(d<<10|d>>>22)+a|0;c+=(a^(d|~b))+k[14]-1416354905|0;c=(c<<15|c>>>17)+d|0;b+=(d^(c|~a))+k[5]-57434055|0;b=(b<<21|b>>>11)+c|0;a+=(c^(b|~d))+k[12]+1700485571|0;a=(a<<6|a>>>26)+b|0;d+=(b^(a|~c))+k[3]-1894986606|0;d=(d<<10|d>>>22)+a|0;c+=(a^(d|~b))+k[10]-1051523|0;c=(c<<15|c>>>17)+d|0;b+=(d^(c|~a))+k[1]-2054922799|0;b=(b<<21|b>>>11)+c|0;a+=(c^(b|~d))+k[8]+1873313359|0;a=(a<<6|a>>>26)+b|0;d+=(b^(a|~c))+k[15]-30611744|0;d=(d<<10|d>>>22)+a|0;c+=(a^(d|~b))+k[6]-1560198380|0;c=(c<<15|c>>>17)+d|0;b+=(d^(c|~a))+k[13]+1309151649|0;b=(b<<21|b>>>11)+c|0;a+=(c^(b|~d))+k[4]-145523070|0;a=(a<<6|a>>>26)+b|0;d+=(b^(a|~c))+k[11]-1120210379|0;d=(d<<10|d>>>22)+a|0;c+=(a^(d|~b))+k[2]+718787259|0;c=(c<<15|c>>>17)+d|0;b+=(d^(c|~a))+k[9]-343485551|0;b=(b<<21|b>>>11)+c|0;x[0]=a+x[0]|0;x[1]=b+x[1]|0;x[2]=c+x[2]|0;x[3]=d+x[3]|0;}
function md5blk(s){var md5blks=[],i;for(i=0;i<64;i+=4){md5blks[i>>2]=s.charCodeAt(i)+(s.charCodeAt(i+1)<<8)+(s.charCodeAt(i+2)<<16)+(s.charCodeAt(i+3)<<24);}
return md5blks;}
function md5blk_array(a){var md5blks=[],i;for(i=0;i<64;i+=4){md5blks[i>>2]=a[i]+(a[i+1]<<8)+(a[i+2]<<16)+(a[i+3]<<24);}
return md5blks;}
function md51(s){var n=s.length,state=[1732584193,-271733879,-1732584194,271733878],i,length,tail,tmp,lo,hi;for(i=64;i<=n;i+=64){md5cycle(state,md5blk(s.substring(i-64,i)));}
s=s.substring(i-64);length=s.length;tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<length;i+=1){tail[i>>2]|=s.charCodeAt(i)<<((i%4)<<3);}
tail[i>>2]|=0x80<<((i%4)<<3);if(i>55){md5cycle(state,tail);for(i=0;i<16;i+=1){tail[i]=0;}}
tmp=n*8;tmp=tmp.toString(16).match(/(.*?)(.{0,8})$/);lo=parseInt(tmp[2],16);hi=parseInt(tmp[1],16)||0;tail[14]=lo;tail[15]=hi;md5cycle(state,tail);return state;}
function md51_array(a){var n=a.length,state=[1732584193,-271733879,-1732584194,271733878],i,length,tail,tmp,lo,hi;for(i=64;i<=n;i+=64){md5cycle(state,md5blk_array(a.subarray(i-64,i)));}
a=(i-64)<n?a.subarray(i-64):new Uint8Array(0);length=a.length;tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<length;i+=1){tail[i>>2]|=a[i]<<((i%4)<<3);}
tail[i>>2]|=0x80<<((i%4)<<3);if(i>55){md5cycle(state,tail);for(i=0;i<16;i+=1){tail[i]=0;}}
tmp=n*8;tmp=tmp.toString(16).match(/(.*?)(.{0,8})$/);lo=parseInt(tmp[2],16);hi=parseInt(tmp[1],16)||0;tail[14]=lo;tail[15]=hi;md5cycle(state,tail);return state;}
function rhex(n){var s='',j;for(j=0;j<4;j+=1){s+=hex_chr[(n>>(j*8+4))&0x0F]+hex_chr[(n>>(j*8))&0x0F];}
return s;}
function hex(x){var i;for(i=0;i<x.length;i+=1){x[i]=rhex(x[i]);}
return x.join('');}
if(hex(md51('hello'))!=='5d41402abc4b2a76b9719d911017c592'){add32=function(x,y){var lsw=(x&0xFFFF)+(y&0xFFFF),msw=(x>>16)+(y>>16)+(lsw>>16);return(msw<<16)|(lsw&0xFFFF);};}
if(typeof ArrayBuffer!=='undefined'&&!ArrayBuffer.prototype.slice){(function(){function clamp(val,length){val=(val|0)||0;if(val<0){return Math.max(val+length,0);}
return Math.min(val,length);}
ArrayBuffer.prototype.slice=function(from,to){var length=this.byteLength,begin=clamp(from,length),end=length,num,target,targetArray,sourceArray;if(to!==undefined){end=clamp(to,length);}
if(begin>end){return new ArrayBuffer(0);}
num=end-begin;target=new ArrayBuffer(num);targetArray=new Uint8Array(target);sourceArray=new Uint8Array(this,begin,num);targetArray.set(sourceArray);return target;};})();}
function toUtf8(str){if(/[\u0080-\uFFFF]/.test(str)){str=unescape(encodeURIComponent(str));}
return str;}
function utf8Str2ArrayBuffer(str,returnUInt8Array){var length=str.length,buff=new ArrayBuffer(length),arr=new Uint8Array(buff),i;for(i=0;i<length;i+=1){arr[i]=str.charCodeAt(i);}
return returnUInt8Array?arr:buff;}
function arrayBuffer2Utf8Str(buff){return String.fromCharCode.apply(null,new Uint8Array(buff));}
function concatenateArrayBuffers(first,second,returnUInt8Array){var result=new Uint8Array(first.byteLength+second.byteLength);result.set(new Uint8Array(first));result.set(new Uint8Array(second),first.byteLength);return returnUInt8Array?result:result.buffer;}
function hexToBinaryString(hex){var bytes=[],length=hex.length,x;for(x=0;x<length-1;x+=2){bytes.push(parseInt(hex.substr(x,2),16));}
return String.fromCharCode.apply(String,bytes);}
function SparkMD5(){this.reset();}
SparkMD5.prototype.append=function(str){this.appendBinary(toUtf8(str));return this;};SparkMD5.prototype.appendBinary=function(contents){this._buff+=contents;this._length+=contents.length;var length=this._buff.length,i;for(i=64;i<=length;i+=64){md5cycle(this._hash,md5blk(this._buff.substring(i-64,i)));}
this._buff=this._buff.substring(i-64);return this;};SparkMD5.prototype.end=function(raw){var buff=this._buff,length=buff.length,i,tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ret;for(i=0;i<length;i+=1){tail[i>>2]|=buff.charCodeAt(i)<<((i%4)<<3);}
this._finish(tail,length);ret=hex(this._hash);if(raw){ret=hexToBinaryString(ret);}
this.reset();return ret;};SparkMD5.prototype.reset=function(){this._buff='';this._length=0;this._hash=[1732584193,-271733879,-1732584194,271733878];return this;};SparkMD5.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash};};SparkMD5.prototype.setState=function(state){this._buff=state.buff;this._length=state.length;this._hash=state.hash;return this;};SparkMD5.prototype.destroy=function(){delete this._hash;delete this._buff;delete this._length;};SparkMD5.prototype._finish=function(tail,length){var i=length,tmp,lo,hi;tail[i>>2]|=0x80<<((i%4)<<3);if(i>55){md5cycle(this._hash,tail);for(i=0;i<16;i+=1){tail[i]=0;}}
tmp=this._length*8;tmp=tmp.toString(16).match(/(.*?)(.{0,8})$/);lo=parseInt(tmp[2],16);hi=parseInt(tmp[1],16)||0;tail[14]=lo;tail[15]=hi;md5cycle(this._hash,tail);};SparkMD5.hash=function(str,raw){return SparkMD5.hashBinary(toUtf8(str),raw);};SparkMD5.hashBinary=function(content,raw){var hash=md51(content),ret=hex(hash);return raw?hexToBinaryString(ret):ret;};SparkMD5.ArrayBuffer=function(){this.reset();};SparkMD5.ArrayBuffer.prototype.append=function(arr){var buff=concatenateArrayBuffers(this._buff.buffer,arr,true),length=buff.length,i;this._length+=arr.byteLength;for(i=64;i<=length;i+=64){md5cycle(this._hash,md5blk_array(buff.subarray(i-64,i)));}
this._buff=(i-64)<length?new Uint8Array(buff.buffer.slice(i-64)):new Uint8Array(0);return this;};SparkMD5.ArrayBuffer.prototype.end=function(raw){var buff=this._buff,length=buff.length,tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i,ret;for(i=0;i<length;i+=1){tail[i>>2]|=buff[i]<<((i%4)<<3);}
this._finish(tail,length);ret=hex(this._hash);if(raw){ret=hexToBinaryString(ret);}
this.reset();return ret;};SparkMD5.ArrayBuffer.prototype.reset=function(){this._buff=new Uint8Array(0);this._length=0;this._hash=[1732584193,-271733879,-1732584194,271733878];return this;};SparkMD5.ArrayBuffer.prototype.getState=function(){var state=SparkMD5.prototype.getState.call(this);state.buff=arrayBuffer2Utf8Str(state.buff);return state;};SparkMD5.ArrayBuffer.prototype.setState=function(state){state.buff=utf8Str2ArrayBuffer(state.buff,true);return SparkMD5.prototype.setState.call(this,state);};SparkMD5.ArrayBuffer.prototype.destroy=SparkMD5.prototype.destroy;SparkMD5.ArrayBuffer.prototype._finish=SparkMD5.prototype._finish;SparkMD5.ArrayBuffer.hash=function(arr,raw){var hash=md51_array(new Uint8Array(arr)),ret=hex(hash);return raw?hexToBinaryString(ret):ret;};return SparkMD5;}));}),(function(module,exports,__webpack_require__){var v1=__webpack_require__(748);var v4=__webpack_require__(749);var uuid=v4;uuid.v1=v1;uuid.v4=v4;module.exports=uuid;}),(function(module,exports,__webpack_require__){var rng=__webpack_require__(345);var bytesToUuid=__webpack_require__(346);var _nodeId;var _clockseq;var _lastMSecs=0;var _lastNSecs=0;function v1(options,buf,offset){var i=buf&&offset||0;var b=buf||[];options=options||{};var node=options.node||_nodeId;var clockseq=options.clockseq!==undefined?options.clockseq:_clockseq;if(node==null||clockseq==null){var seedBytes=rng();if(node==null){node=_nodeId=[seedBytes[0]|0x01,seedBytes[1],seedBytes[2],seedBytes[3],seedBytes[4],seedBytes[5]];}
if(clockseq==null){clockseq=_clockseq=(seedBytes[6]<<8|seedBytes[7])&0x3fff;}}
var msecs=options.msecs!==undefined?options.msecs:new Date().getTime();var nsecs=options.nsecs!==undefined?options.nsecs:_lastNSecs+1;var dt=(msecs-_lastMSecs)+(nsecs-_lastNSecs)/10000;if(dt<0&&options.clockseq===undefined){clockseq=clockseq+1&0x3fff;}
if((dt<0||msecs>_lastMSecs)&&options.nsecs===undefined){nsecs=0;}
if(nsecs>=10000){throw new Error('uuid.v1(): Can\'t create more than 10M uuids/sec');}
_lastMSecs=msecs;_lastNSecs=nsecs;_clockseq=clockseq;msecs+=12219292800000;var tl=((msecs&0xfffffff)*10000+nsecs)%0x100000000;b[i++]=tl>>>24&0xff;b[i++]=tl>>>16&0xff;b[i++]=tl>>>8&0xff;b[i++]=tl&0xff;var tmh=(msecs/0x100000000*10000)&0xfffffff;b[i++]=tmh>>>8&0xff;b[i++]=tmh&0xff;b[i++]=tmh>>>24&0xf|0x10;b[i++]=tmh>>>16&0xff;b[i++]=clockseq>>>8|0x80;b[i++]=clockseq&0xff;for(var n=0;n<6;++n){b[i+n]=node[n];}
return buf?buf:bytesToUuid(b);}
module.exports=v1;}),(function(module,exports,__webpack_require__){var rng=__webpack_require__(345);var bytesToUuid=__webpack_require__(346);function v4(options,buf,offset){var i=buf&&offset||0;if(typeof(options)=='string'){buf=options==='binary'?new Array(16):null;options=null;}
options=options||{};var rnds=options.random||(options.rng||rng)();rnds[6]=(rnds[6]&0x0f)|0x40;rnds[8]=(rnds[8]&0x3f)|0x80;if(buf){for(var ii=0;ii<16;++ii){buf[i+ii]=rnds[ii];}}
return buf||bytesToUuid(rnds);}
module.exports=v4;}),(function(module,exports,__webpack_require__){"use strict";exports.stringify=function stringify(input){var queue=[];queue.push({obj:input});var res='';var next,obj,prefix,val,i,arrayPrefix,keys,k,key,value,objPrefix;while((next=queue.pop())){obj=next.obj;prefix=next.prefix||'';val=next.val||'';res+=prefix;if(val){res+=val;}else if(typeof obj!=='object'){res+=typeof obj==='undefined'?null:JSON.stringify(obj);}else if(obj===null){res+='null';}else if(Array.isArray(obj)){queue.push({val:']'});for(i=obj.length-1;i>=0;i--){arrayPrefix=i===0?'':',';queue.push({obj:obj[i],prefix:arrayPrefix});}
queue.push({val:'['});}else{keys=[];for(k in obj){if(obj.hasOwnProperty(k)){keys.push(k);}}
queue.push({val:'}'});for(i=keys.length-1;i>=0;i--){key=keys[i];value=obj[key];objPrefix=(i>0?',':'');objPrefix+=JSON.stringify(key)+':';queue.push({obj:value,prefix:objPrefix});}
queue.push({val:'{'});}}
return res;};function pop(obj,stack,metaStack){var lastMetaElement=metaStack[metaStack.length-1];if(obj===lastMetaElement.element){metaStack.pop();lastMetaElement=metaStack[metaStack.length-1];}
var element=lastMetaElement.element;var lastElementIndex=lastMetaElement.index;if(Array.isArray(element)){element.push(obj);}else if(lastElementIndex===stack.length-2){var key=stack.pop();element[key]=obj;}else{stack.push(obj);}}
exports.parse=function(str){var stack=[];var metaStack=[];var i=0;var collationIndex,parsedNum,numChar;var parsedString,lastCh,numConsecutiveSlashes,ch;var arrayElement,objElement;while(true){collationIndex=str[i++];if(collationIndex==='}'||collationIndex===']'||typeof collationIndex==='undefined'){if(stack.length===1){return stack.pop();}else{pop(stack.pop(),stack,metaStack);continue;}}
switch(collationIndex){case ' ':case '\t':case '\n':case ':':case ',':break;case 'n':i+=3;pop(null,stack,metaStack);break;case 't':i+=3;pop(true,stack,metaStack);break;case 'f':i+=4;pop(false,stack,metaStack);break;case '0':case '1':case '2':case '3':case '4':case '5':case '6':case '7':case '8':case '9':case '-':parsedNum='';i--;while(true){numChar=str[i++];if(/[\d\.\-e\+]/.test(numChar)){parsedNum+=numChar;}else{i--;break;}}
pop(parseFloat(parsedNum),stack,metaStack);break;case '"':parsedString='';lastCh=void 0;numConsecutiveSlashes=0;while(true){ch=str[i++];if(ch!=='"'||(lastCh==='\\'&&numConsecutiveSlashes%2===1)){parsedString+=ch;lastCh=ch;if(lastCh==='\\'){numConsecutiveSlashes++;}else{numConsecutiveSlashes=0;}}else{break;}}
pop(JSON.parse('"'+parsedString+'"'),stack,metaStack);break;case '[':arrayElement={element:[],index:stack.length};stack.push(arrayElement.element);metaStack.push(arrayElement);break;case '{':objElement={element:{},index:stack.length};stack.push(objElement.element);metaStack.push(objElement);break;default:throw new Error('unexpectedly reached end of input: '+collationIndex);}}};}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_crypto_WebDollar_Crypto__=__webpack_require__(28);var __WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__=__webpack_require__(17);const BitcoinJS=__webpack_require__(752);const Bigi=__webpack_require__(87);const Crypto=__webpack_require__(24);class MultiSig{static generateAddress(publicKeys,numKeysRequired=2){let pubKeys=publicKeys.map(function(hex){return Buffer.from(hex,'hex')});let redeemScript=BitcoinJS.script.multisig.output.encode(numKeysRequired,pubKeys);let scriptPubKey=BitcoinJS.script.scriptHash.output.encode(BitcoinJS.crypto.hash160(redeemScript));let address=BitcoinJS.address.fromOutputScript(scriptPubKey);return address;}
static multisigPrivateKey(privateKey){return privateKey;}
static createTransaction(numKeysRequired){let keyPairs=['91avARGdfge8E4tZfYLoxeJ5sGBdNJQH4kvjJoQFacbgwmaKkrx','91avARGdfge8E4tZfYLoxeJ5sGBdNJQH4kvjJoQFacbgww7vXtT','91avARGdfge8E4tZfYLoxeJ5sGBdNJQH4kvjJoQFacbgx3cTMqe','91avARGdfge8E4tZfYLoxeJ5sGBdNJQH4kvjJoQFacbgx9rcrL7'].map(function(wif){return BitcoinJS.ECPair.fromWIF(wif,testnet)});let pubKeys=keyPairs.map(function(x){return x.getPublicKeyBuffer()});let redeemScript=BitcoinJS.script.multisig.output.encode(numKeysRequired,pubKeys);let scriptPubKey=BitcoinJS.script.scriptHash.output.encode(BitcoinJS.crypto.hash160(redeemScript));let address=BitcoinJS.address.fromOutputScript(scriptPubKey,testnet);testnetUtils.faucet(address,2e4,function(err,unspent){if(err)
return done(err);let txb=new BitcoinJS.TransactionBuilder(testnet);txb.addInput(unspent.txId,unspent.vout);txb.addOutput(testnetUtils.RETURN_ADDRESS,1e4);txb.sign(0,keyPairs[0],redeemScript);txb.sign(0,keyPairs[2],redeemScript);let tx=txb.build();testnetUtils.transactions.propagate(tx.toHex(),function(err){if(err)
return done(err);testnetUtils.verify(address,tx.getId(),1e4,done)})})}
static createPrivateKey(saltDates){let concatDatesSalt="";for(let i=0;i<saltDates.length;++i){concatDatesSalt+=saltDates[i];}
return __WEBPACK_IMPORTED_MODULE_0_common_crypto_WebDollar_Crypto__["a"].SHA256(__WEBPACK_IMPORTED_MODULE_0_common_crypto_WebDollar_Crypto__["a"].SHA256(concatDatesSalt));}
static getPublicKeyFromPrivate(privateKey){return __WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"]._generatePublicKey(privateKey);}
static signMessage(msg,privateKey){return __WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].signMessage(msg,privateKey);}
static validateSignedMessage(msg,signature,publicKey){return __WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].verifySignedData(msg,signature,publicKey);}
static makeMultisigAddress(saltDates){let concatDatesSalt="";for(let i=0;i<saltDates.length;++i){concatDatesSalt+=saltDates[i];}
let privateKeys=[BitcoinJS.ECPair.makeRandom(saltDates),BitcoinJS.ECPair.makeRandom(saltDates),BitcoinJS.ECPair.makeRandom(saltDates)];console.log("pk0=",privateKeys[0]);console.log("pk1=",privateKeys[1]);console.log("pk2=",privateKeys[2]);}
static getMultiAESEncrypt(buffer,passwordsArray){let multiEncrypt=buffer;for(let i=0;i<passwordsArray.length;++i){multiEncrypt=__WEBPACK_IMPORTED_MODULE_0_common_crypto_WebDollar_Crypto__["a"].encryptAES(multiEncrypt,passwordsArray[i]);if(multiEncrypt===null)
return null;}
return Buffer.from(multiEncrypt);}
static getMultiAESDecrypt(buffer,passwordsArray){let multiDecrypt=buffer;for(let i=passwordsArray.length-1;i>=0;--i){multiDecrypt=__WEBPACK_IMPORTED_MODULE_0_common_crypto_WebDollar_Crypto__["a"].decryptAES(multiDecrypt,passwordsArray[i]);if(multiDecrypt===null)
return null;}
return Buffer.from(multiDecrypt);}}
__webpack_exports__["a"]=(MultiSig);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){var script=__webpack_require__(31)
var templates=__webpack_require__(220)
for(var key in templates){script[key]=templates[key]}
module.exports={bufferutils:__webpack_require__(354),Block:__webpack_require__(770),ECPair:__webpack_require__(226),ECSignature:__webpack_require__(229),HDNode:__webpack_require__(781),Transaction:__webpack_require__(225),TransactionBuilder:__webpack_require__(782),address:__webpack_require__(227),crypto:__webpack_require__(116),networks:__webpack_require__(132),opcodes:__webpack_require__(43),script:script}}),(function(module,exports,__webpack_require__){(function(Buffer){var NATIVE=__webpack_require__(219)
var ERRORS=__webpack_require__(349)
function _Buffer(value){return Buffer.isBuffer(value)}
function Hex(value){return typeof value==='string'&&/^([0-9a-f]{2})+$/i.test(value)}
function _LengthN(type,length){var name=type.toJSON()
function Length(value){if(!type(value))return false
if(value.length===length)return true
throw ERRORS.tfCustomError(name+'(Length: '+length+')',name+'(Length: '+value.length+')')}
Length.toJSON=function(){return name}
return Length}
var _ArrayN=_LengthN.bind(null,NATIVE.Array)
var _BufferN=_LengthN.bind(null,_Buffer)
var _HexN=_LengthN.bind(null,Hex)
var _StringN=_LengthN.bind(null,NATIVE.String)
function Range(a,b,f){f=f||NATIVE.Number
function _range(value,strict){return f(value,strict)&&(value>a)&&(value<b)}
_range.toJSON=function(){return `${f.toJSON()} between [${a}, ${b}]`}
return _range}
var INT53_MAX=Math.pow(2,53)-1
function Finite(value){return typeof value==='number'&&isFinite(value)}
function Int8(value){return((value<<24)>>24)===value}
function Int16(value){return((value<<16)>>16)===value}
function Int32(value){return(value|0)===value}
function Int53(value){return typeof value==='number'&&value>=-INT53_MAX&&value<=INT53_MAX&&Math.floor(value)===value}
function UInt8(value){return(value&0xff)===value}
function UInt16(value){return(value&0xffff)===value}
function UInt32(value){return(value>>>0)===value}
function UInt53(value){return typeof value==='number'&&value>=0&&value<=INT53_MAX&&Math.floor(value)===value}
var types={ArrayN:_ArrayN,Buffer:_Buffer,BufferN:_BufferN,Finite:Finite,Hex:Hex,HexN:_HexN,Int8:Int8,Int16:Int16,Int32:Int32,Int53:Int53,Range:Range,StringN:_StringN,UInt8:UInt8,UInt16:UInt16,UInt32:UInt32,UInt53:UInt53}
for(var typeName in types){types[typeName].toJSON=function(t){return t}.bind(null,typeName)}
module.exports=types}.call(exports,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){var OPS=__webpack_require__(43)
var map={}
for(var op in OPS){var code=OPS[op]
map[code]=op}
module.exports=map}),(function(module,exports,__webpack_require__){var Buffer=__webpack_require__(4).Buffer
var bscript=__webpack_require__(31)
var p2mso=__webpack_require__(351)
var typeforce=__webpack_require__(23)
var OPS=__webpack_require__(43)
function partialSignature(value){return value===OPS.OP_0||bscript.isCanonicalSignature(value)}
function check(script,allowIncomplete){var chunks=bscript.decompile(script)
if(chunks.length<2)return false
if(chunks[0]!==OPS.OP_0)return false
if(allowIncomplete){return chunks.slice(1).every(partialSignature)}
return chunks.slice(1).every(bscript.isCanonicalSignature)}
check.toJSON=function(){return 'multisig input'}
var EMPTY_BUFFER=Buffer.allocUnsafe(0)
function encodeStack(signatures,scriptPubKey){typeforce([partialSignature],signatures)
if(scriptPubKey){var scriptData=p2mso.decode(scriptPubKey)
if(signatures.length<scriptData.m){throw new TypeError('Not enough signatures provided')}
if(signatures.length>scriptData.pubKeys.length){throw new TypeError('Too many signatures provided')}}
return[].concat(EMPTY_BUFFER,signatures.map(function(sig){if(sig===OPS.OP_0){return EMPTY_BUFFER}
return sig}))}
function encode(signatures,scriptPubKey){return bscript.compile(encodeStack(signatures,scriptPubKey))}
function decodeStack(stack,allowIncomplete){typeforce(typeforce.Array,stack)
typeforce(check,stack,allowIncomplete)
return stack.slice(1)}
function decode(buffer,allowIncomplete){var stack=bscript.decompile(buffer)
return decodeStack(stack,allowIncomplete)}
module.exports={check:check,decode:decode,decodeStack:decodeStack,encode:encode,encodeStack:encodeStack}}),(function(module,exports,__webpack_require__){var bscript=__webpack_require__(31)
var types=__webpack_require__(37)
var typeforce=__webpack_require__(23)
var OPS=__webpack_require__(43)
function check(script){var buffer=bscript.compile(script)
return buffer.length>1&&buffer[0]===OPS.OP_RETURN}
check.toJSON=function(){return 'null data output'}
function encode(data){typeforce(types.Buffer,data)
return bscript.compile([OPS.OP_RETURN,data])}
function decode(buffer){typeforce(check,buffer)
return buffer.slice(2)}
module.exports={output:{check:check,decode:decode,encode:encode}}}),(function(module,exports,__webpack_require__){var bscript=__webpack_require__(31)
var typeforce=__webpack_require__(23)
function check(script){var chunks=bscript.decompile(script)
return chunks.length===1&&bscript.isCanonicalSignature(chunks[0])}
check.toJSON=function(){return 'pubKey input'}
function encodeStack(signature){typeforce(bscript.isCanonicalSignature,signature)
return[signature]}
function encode(signature){return bscript.compile(encodeStack(signature))}
function decodeStack(stack){typeforce(typeforce.Array,stack)
typeforce(check,stack)
return stack[0]}
function decode(buffer){var stack=bscript.decompile(buffer)
return decodeStack(stack)}
module.exports={check:check,decode:decode,decodeStack:decodeStack,encode:encode,encodeStack:encodeStack}}),(function(module,exports,__webpack_require__){var bscript=__webpack_require__(31)
var typeforce=__webpack_require__(23)
var OPS=__webpack_require__(43)
function check(script){var chunks=bscript.decompile(script)
return chunks.length===2&&bscript.isCanonicalPubKey(chunks[0])&&chunks[1]===OPS.OP_CHECKSIG}
check.toJSON=function(){return 'pubKey output'}
function encode(pubKey){typeforce(bscript.isCanonicalPubKey,pubKey)
return bscript.compile([pubKey,OPS.OP_CHECKSIG])}
function decode(buffer){var chunks=bscript.decompile(buffer)
typeforce(check,chunks)
return chunks[0]}
module.exports={check:check,decode:decode,encode:encode}}),(function(module,exports,__webpack_require__){var bscript=__webpack_require__(31)
var typeforce=__webpack_require__(23)
function check(script){var chunks=bscript.decompile(script)
return chunks.length===2&&bscript.isCanonicalSignature(chunks[0])&&bscript.isCanonicalPubKey(chunks[1])}
check.toJSON=function(){return 'pubKeyHash input'}
function encodeStack(signature,pubKey){typeforce({signature:bscript.isCanonicalSignature,pubKey:bscript.isCanonicalPubKey},{signature:signature,pubKey:pubKey})
return[signature,pubKey]}
function encode(signature,pubKey){return bscript.compile(encodeStack(signature,pubKey))}
function decodeStack(stack){typeforce(typeforce.Array,stack)
typeforce(check,stack)
return{signature:stack[0],pubKey:stack[1]}}
function decode(buffer){var stack=bscript.decompile(buffer)
return decodeStack(stack)}
module.exports={check:check,decode:decode,decodeStack:decodeStack,encode:encode,encodeStack:encodeStack}}),(function(module,exports,__webpack_require__){var bscript=__webpack_require__(31)
var types=__webpack_require__(37)
var typeforce=__webpack_require__(23)
var OPS=__webpack_require__(43)
function check(script){var buffer=bscript.compile(script)
return buffer.length===25&&buffer[0]===OPS.OP_DUP&&buffer[1]===OPS.OP_HASH160&&buffer[2]===0x14&&buffer[23]===OPS.OP_EQUALVERIFY&&buffer[24]===OPS.OP_CHECKSIG}
check.toJSON=function(){return 'pubKeyHash output'}
function encode(pubKeyHash){typeforce(types.Hash160bit,pubKeyHash)
return bscript.compile([OPS.OP_DUP,OPS.OP_HASH160,pubKeyHash,OPS.OP_EQUALVERIFY,OPS.OP_CHECKSIG])}
function decode(buffer){typeforce(check,buffer)
return buffer.slice(3,23)}
module.exports={check:check,decode:decode,encode:encode}}),(function(module,exports,__webpack_require__){module.exports={input:__webpack_require__(762),output:__webpack_require__(763)}}),(function(module,exports,__webpack_require__){var Buffer=__webpack_require__(4).Buffer
var bscript=__webpack_require__(31)
var typeforce=__webpack_require__(23)
var p2ms=__webpack_require__(221)
var p2pk=__webpack_require__(222)
var p2pkh=__webpack_require__(223)
var p2wpkho=__webpack_require__(352)
var p2wsho=__webpack_require__(353)
function check(script,allowIncomplete){var chunks=bscript.decompile(script)
if(chunks.length<1)return false
var lastChunk=chunks[chunks.length-1]
if(!Buffer.isBuffer(lastChunk))return false
var scriptSigChunks=bscript.decompile(bscript.compile(chunks.slice(0,-1)))
var redeemScriptChunks=bscript.decompile(lastChunk)
if(redeemScriptChunks.length===0)return false
if(!bscript.isPushOnly(scriptSigChunks))return false
if(chunks.length===1){return p2wsho.check(redeemScriptChunks)||p2wpkho.check(redeemScriptChunks)}
if(p2pkh.input.check(scriptSigChunks)&&p2pkh.output.check(redeemScriptChunks))return true
if(p2ms.input.check(scriptSigChunks,allowIncomplete)&&p2ms.output.check(redeemScriptChunks))return true
if(p2pk.input.check(scriptSigChunks)&&p2pk.output.check(redeemScriptChunks))return true
return false}
check.toJSON=function(){return 'scriptHash input'}
function encodeStack(redeemScriptStack,redeemScript){var serializedScriptPubKey=bscript.compile(redeemScript)
return[].concat(redeemScriptStack,serializedScriptPubKey)}
function encode(redeemScriptSig,redeemScript){var redeemScriptStack=bscript.decompile(redeemScriptSig)
return bscript.compile(encodeStack(redeemScriptStack,redeemScript))}
function decodeStack(stack){typeforce(typeforce.Array,stack)
typeforce(check,stack)
return{redeemScriptStack:stack.slice(0,-1),redeemScript:stack[stack.length-1]}}
function decode(buffer){var stack=bscript.decompile(buffer)
var result=decodeStack(stack)
result.redeemScriptSig=bscript.compile(result.redeemScriptStack)
delete result.redeemScriptStack
return result}
module.exports={check:check,decode:decode,decodeStack:decodeStack,encode:encode,encodeStack:encodeStack}}),(function(module,exports,__webpack_require__){var bscript=__webpack_require__(31)
var types=__webpack_require__(37)
var typeforce=__webpack_require__(23)
var OPS=__webpack_require__(43)
function check(script){var buffer=bscript.compile(script)
return buffer.length===23&&buffer[0]===OPS.OP_HASH160&&buffer[1]===0x14&&buffer[22]===OPS.OP_EQUAL}
check.toJSON=function(){return 'scriptHash output'}
function encode(scriptHash){typeforce(types.Hash160bit,scriptHash)
return bscript.compile([OPS.OP_HASH160,scriptHash,OPS.OP_EQUAL])}
function decode(buffer){typeforce(check,buffer)
return buffer.slice(2,22)}
module.exports={check:check,decode:decode,encode:encode}}),(function(module,exports,__webpack_require__){module.exports={input:__webpack_require__(765),output:__webpack_require__(352)}}),(function(module,exports,__webpack_require__){var bscript=__webpack_require__(31)
var typeforce=__webpack_require__(23)
function isCompressedCanonicalPubKey(pubKey){return bscript.isCanonicalPubKey(pubKey)&&pubKey.length===33}
function check(script){var chunks=bscript.decompile(script)
return chunks.length===2&&bscript.isCanonicalSignature(chunks[0])&&isCompressedCanonicalPubKey(chunks[1])}
check.toJSON=function(){return 'witnessPubKeyHash input'}
function encodeStack(signature,pubKey){typeforce({signature:bscript.isCanonicalSignature,pubKey:isCompressedCanonicalPubKey},{signature:signature,pubKey:pubKey})
return[signature,pubKey]}
function decodeStack(stack){typeforce(typeforce.Array,stack)
typeforce(check,stack)
return{signature:stack[0],pubKey:stack[1]}}
module.exports={check:check,decodeStack:decodeStack,encodeStack:encodeStack}}),(function(module,exports,__webpack_require__){module.exports={input:__webpack_require__(767),output:__webpack_require__(353)}}),(function(module,exports,__webpack_require__){(function(Buffer){var bscript=__webpack_require__(31)
var types=__webpack_require__(37)
var typeforce=__webpack_require__(23)
var p2ms=__webpack_require__(221)
var p2pk=__webpack_require__(222)
var p2pkh=__webpack_require__(223)
function check(chunks,allowIncomplete){typeforce(types.Array,chunks)
if(chunks.length<1)return false
var witnessScript=chunks[chunks.length-1]
if(!Buffer.isBuffer(witnessScript))return false
var witnessScriptChunks=bscript.decompile(witnessScript)
if(witnessScriptChunks.length===0)return false
var witnessRawScriptSig=bscript.compile(chunks.slice(0,-1))
if(p2pkh.input.check(witnessRawScriptSig)&&p2pkh.output.check(witnessScriptChunks))return true
if(p2ms.input.check(witnessRawScriptSig,allowIncomplete)&&p2ms.output.check(witnessScriptChunks))return true
if(p2pk.input.check(witnessRawScriptSig)&&p2pk.output.check(witnessScriptChunks))return true
return false}
check.toJSON=function(){return 'witnessScriptHash input'}
function encodeStack(witnessData,witnessScript){typeforce({witnessData:[types.Buffer],witnessScript:types.Buffer},{witnessData:witnessData,witnessScript:witnessScript})
return[].concat(witnessData,witnessScript)}
function decodeStack(stack){typeforce(typeforce.Array,stack)
typeforce(check,stack)
return{witnessData:stack.slice(0,-1),witnessScript:stack[stack.length-1]}}
module.exports={check:check,decodeStack:decodeStack,encodeStack:encodeStack}}.call(exports,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){module.exports={output:__webpack_require__(769)}}),(function(module,exports,__webpack_require__){var Buffer=__webpack_require__(4).Buffer
var bscript=__webpack_require__(31)
var types=__webpack_require__(37)
var typeforce=__webpack_require__(23)
var OPS=__webpack_require__(43)
var HEADER=Buffer.from('aa21a9ed','hex')
function check(script){var buffer=bscript.compile(script)
return buffer.length>37&&buffer[0]===OPS.OP_RETURN&&buffer[1]===0x24&&buffer.slice(2,6).equals(HEADER)}
check.toJSON=function(){return 'Witness commitment output'}
function encode(commitment){typeforce(types.Hash256bit,commitment)
var buffer=Buffer.allocUnsafe(36)
HEADER.copy(buffer,0)
commitment.copy(buffer,4)
return bscript.compile([OPS.OP_RETURN,buffer])}
function decode(buffer){typeforce(check,buffer)
return bscript.decompile(buffer)[1].slice(4,36)}
module.exports={check:check,decode:decode,encode:encode}}),(function(module,exports,__webpack_require__){var Buffer=__webpack_require__(4).Buffer
var bcrypto=__webpack_require__(116)
var fastMerkleRoot=__webpack_require__(771)
var typeforce=__webpack_require__(23)
var types=__webpack_require__(37)
var varuint=__webpack_require__(224)
var Transaction=__webpack_require__(225)
function Block(){this.version=1
this.prevHash=null
this.merkleRoot=null
this.timestamp=0
this.bits=0
this.nonce=0}
Block.fromBuffer=function(buffer){if(buffer.length<80)throw new Error('Buffer too small (< 80 bytes)')
var offset=0
function readSlice(n){offset+=n
return buffer.slice(offset-n,offset)}
function readUInt32(){var i=buffer.readUInt32LE(offset)
offset+=4
return i}
function readInt32(){var i=buffer.readInt32LE(offset)
offset+=4
return i}
var block=new Block()
block.version=readInt32()
block.prevHash=readSlice(32)
block.merkleRoot=readSlice(32)
block.timestamp=readUInt32()
block.bits=readUInt32()
block.nonce=readUInt32()
if(buffer.length===80)return block
function readVarInt(){var vi=varuint.decode(buffer,offset)
offset+=varuint.decode.bytes
return vi}
function readTransaction(){var tx=Transaction.fromBuffer(buffer.slice(offset),true)
offset+=tx.byteLength()
return tx}
var nTransactions=readVarInt()
block.transactions=[]
for(var i=0;i<nTransactions;++i){var tx=readTransaction()
block.transactions.push(tx)}
return block}
Block.prototype.byteLength=function(headersOnly){if(headersOnly||!this.transactions)return 80
return 80+varuint.encodingLength(this.transactions.length)+this.transactions.reduce(function(a,x){return a+x.byteLength()},0)}
Block.fromHex=function(hex){return Block.fromBuffer(Buffer.from(hex,'hex'))}
Block.prototype.getHash=function(){return bcrypto.hash256(this.toBuffer(true))}
Block.prototype.getId=function(){return this.getHash().reverse().toString('hex')}
Block.prototype.getUTCDate=function(){var date=new Date(0)
date.setUTCSeconds(this.timestamp)
return date}
Block.prototype.toBuffer=function(headersOnly){var buffer=Buffer.allocUnsafe(this.byteLength(headersOnly))
var offset=0
function writeSlice(slice){slice.copy(buffer,offset)
offset+=slice.length}
function writeInt32(i){buffer.writeInt32LE(i,offset)
offset+=4}
function writeUInt32(i){buffer.writeUInt32LE(i,offset)
offset+=4}
writeInt32(this.version)
writeSlice(this.prevHash)
writeSlice(this.merkleRoot)
writeUInt32(this.timestamp)
writeUInt32(this.bits)
writeUInt32(this.nonce)
if(headersOnly||!this.transactions)return buffer
varuint.encode(this.transactions.length,buffer,offset)
offset+=varuint.encode.bytes
this.transactions.forEach(function(tx){var txSize=tx.byteLength()
tx.toBuffer(buffer,offset)
offset+=txSize})
return buffer}
Block.prototype.toHex=function(headersOnly){return this.toBuffer(headersOnly).toString('hex')}
Block.calculateTarget=function(bits){var exponent=((bits&0xff000000)>>24)-3
var mantissa=bits&0x007fffff
var target=Buffer.alloc(32,0)
target.writeUInt32BE(mantissa,28-exponent)
return target}
Block.calculateMerkleRoot=function(transactions){typeforce([{getHash:types.Function}],transactions)
if(transactions.length===0)throw TypeError('Cannot compute merkle root for zero transactions')
var hashes=transactions.map(function(transaction){return transaction.getHash()})
return fastMerkleRoot(hashes,bcrypto.hash256)}
Block.prototype.checkMerkleRoot=function(){if(!this.transactions)return false
var actualMerkleRoot=Block.calculateMerkleRoot(this.transactions)
return this.merkleRoot.compare(actualMerkleRoot)===0}
Block.prototype.checkProofOfWork=function(){var hash=this.getHash().reverse()
var target=Block.calculateTarget(this.bits)
return hash.compare(target)<=0}
module.exports=Block}),(function(module,exports,__webpack_require__){(function(Buffer){module.exports=function fastRoot(values,digestFn){if(!Array.isArray(values))throw TypeError('Expected values Array')
if(typeof digestFn!=='function')throw TypeError('Expected digest Function')
var length=values.length
var results=values.concat()
while(length>1){var j=0
for(var i=0;i<length;i+=2,++j){var left=results[i]
var right=i+1===length?left:results[i+1]
var data=Buffer.concat([left,right])
results[j]=digestFn(data)}
length=j}
return results[0]}}.call(exports,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){"use strict";var ALPHABET='qpzry9x8gf2tvdw0s3jn54khce6mua7l'
var ALPHABET_MAP={}
for(var z=0;z<ALPHABET.length;z++){var x=ALPHABET.charAt(z)
if(ALPHABET_MAP[x]!==undefined)throw new TypeError(x+' is ambiguous')
ALPHABET_MAP[x]=z}
function polymodStep(pre){var b=pre>>25
return((pre&0x1FFFFFF)<<5)^(-((b>>0)&1)&0x3b6a57b2)^(-((b>>1)&1)&0x26508e6d)^(-((b>>2)&1)&0x1ea119fa)^(-((b>>3)&1)&0x3d4233dd)^(-((b>>4)&1)&0x2a1462b3)}
function prefixChk(prefix){var chk=1
for(var i=0;i<prefix.length;++i){var c=prefix.charCodeAt(i)
if(c<33||c>126)throw new Error('Invalid prefix ('+prefix+')')
chk=polymodStep(chk)^(c>>5)}
chk=polymodStep(chk)
for(i=0;i<prefix.length;++i){var v=prefix.charCodeAt(i)
chk=polymodStep(chk)^(v&0x1f)}
return chk}
function encode(prefix,words,LIMIT){LIMIT=LIMIT||90
if((prefix.length+7+words.length)>LIMIT)throw new TypeError('Exceeds length limit')
prefix=prefix.toLowerCase()
var chk=prefixChk(prefix)
var result=prefix+'1'
for(var i=0;i<words.length;++i){var x=words[i]
if((x>>5)!==0)throw new Error('Non 5-bit word')
chk=polymodStep(chk)^x
result+=ALPHABET.charAt(x)}
for(i=0;i<6;++i){chk=polymodStep(chk)}
chk^=1
for(i=0;i<6;++i){var v=(chk>>((5-i)*5))&0x1f
result+=ALPHABET.charAt(v)}
return result}
function decode(str,LIMIT){LIMIT=LIMIT||90
if(str.length<8)throw new TypeError(str+' too short')
if(str.length>LIMIT)throw new TypeError('Exceeds length limit')
var lowered=str.toLowerCase()
var uppered=str.toUpperCase()
if(str!==lowered&&str!==uppered)throw new Error('Mixed-case string '+str)
str=lowered
var split=str.lastIndexOf('1')
if(split===-1)throw new Error('No separator character for '+str)
if(split===0)throw new Error('Missing prefix for '+str)
var prefix=str.slice(0,split)
var wordChars=str.slice(split+1)
if(wordChars.length<6)throw new Error('Data too short')
var chk=prefixChk(prefix)
var words=[]
for(var i=0;i<wordChars.length;++i){var c=wordChars.charAt(i)
var v=ALPHABET_MAP[c]
if(v===undefined)throw new Error('Unknown character '+c)
chk=polymodStep(chk)^v
if(i+6>=wordChars.length)continue
words.push(v)}
if(chk!==1)throw new Error('Invalid checksum for '+str)
return{prefix:prefix,words:words}}
function convert(data,inBits,outBits,pad){var value=0
var bits=0
var maxV=(1<<outBits)-1
var result=[]
for(var i=0;i<data.length;++i){value=(value<<inBits)|data[i]
bits+=inBits
while(bits>=outBits){bits-=outBits
result.push((value>>bits)&maxV)}}
if(pad){if(bits>0){result.push((value<<(outBits-bits))&maxV)}}else{if(bits>=inBits)throw new Error('Excess padding')
if((value<<(outBits-bits))&maxV)throw new Error('Non-zero padding')}
return result}
function toWords(bytes){return convert(bytes,8,5,true)}
function fromWords(words){return convert(words,5,8,false)}
module.exports={decode:decode,encode:encode,toWords:toWords,fromWords:fromWords}}),(function(module,exports,__webpack_require__){"use strict";var base58=__webpack_require__(310)
var Buffer=__webpack_require__(4).Buffer
module.exports=function(checksumFn){function encode(payload){var checksum=checksumFn(payload)
return base58.encode(Buffer.concat([payload,checksum],payload.length+4))}
function decodeRaw(buffer){var payload=buffer.slice(0,-4)
var checksum=buffer.slice(-4)
var newChecksum=checksumFn(payload)
if(checksum[0]^newChecksum[0]|checksum[1]^newChecksum[1]|checksum[2]^newChecksum[2]|checksum[3]^newChecksum[3])return
return payload}
function decodeUnsafe(string){var buffer=base58.decodeUnsafe(string)
if(!buffer)return
return decodeRaw(buffer)}
function decode(string){var buffer=base58.decode(string)
var payload=decodeRaw(buffer,checksumFn)
if(!payload)throw new Error('Invalid checksum')
return payload}
return{encode:encode,decode:decode,decodeUnsafe:decodeUnsafe}}}),(function(module,exports,__webpack_require__){var Buffer=__webpack_require__(4).Buffer
var createHmac=__webpack_require__(164)
var typeforce=__webpack_require__(23)
var types=__webpack_require__(37)
var BigInteger=__webpack_require__(87)
var ECSignature=__webpack_require__(229)
var ZERO=Buffer.alloc(1,0)
var ONE=Buffer.alloc(1,1)
var ecurve=__webpack_require__(230)
var secp256k1=ecurve.getCurveByName('secp256k1')
function deterministicGenerateK(hash,x,checkSig){typeforce(types.tuple(types.Hash256bit,types.Buffer256bit,types.Function),arguments)
var k=Buffer.alloc(32,0)
var v=Buffer.alloc(32,1)
k=createHmac('sha256',k).update(v).update(ZERO).update(x).update(hash).digest()
v=createHmac('sha256',k).update(v).digest()
k=createHmac('sha256',k).update(v).update(ONE).update(x).update(hash).digest()
v=createHmac('sha256',k).update(v).digest()
v=createHmac('sha256',k).update(v).digest()
var T=BigInteger.fromBuffer(v)
while(T.signum()<=0||T.compareTo(secp256k1.n)>=0||!checkSig(T)){k=createHmac('sha256',k).update(v).update(ZERO).digest()
v=createHmac('sha256',k).update(v).digest()
v=createHmac('sha256',k).update(v).digest()
T=BigInteger.fromBuffer(v)}
return T}
var N_OVER_TWO=secp256k1.n.shiftRight(1)
function sign(hash,d){typeforce(types.tuple(types.Hash256bit,types.BigInt),arguments)
var x=d.toBuffer(32)
var e=BigInteger.fromBuffer(hash)
var n=secp256k1.n
var G=secp256k1.G
var r,s
deterministicGenerateK(hash,x,function(k){var Q=G.multiply(k)
if(secp256k1.isInfinity(Q))return false
r=Q.affineX.mod(n)
if(r.signum()===0)return false
s=k.modInverse(n).multiply(e.add(d.multiply(r))).mod(n)
if(s.signum()===0)return false
return true})
if(s.compareTo(N_OVER_TWO)>0){s=n.subtract(s)}
return new ECSignature(r,s)}
function verify(hash,signature,Q){typeforce(types.tuple(types.Hash256bit,types.ECSignature,types.ECPoint),arguments)
var n=secp256k1.n
var G=secp256k1.G
var r=signature.r
var s=signature.s
if(r.signum()<=0||r.compareTo(n)>=0)return false
if(s.signum()<=0||s.compareTo(n)>=0)return false
var e=BigInteger.fromBuffer(hash)
var sInv=s.modInverse(n)
var u1=e.multiply(sInv).mod(n)
var u2=r.multiply(sInv).mod(n)
var R=G.multiplyTwo(u1,Q,u2)
if(secp256k1.isInfinity(R))return false
var xR=R.affineX
var v=xR.mod(n)
return v.equals(r)}
module.exports={deterministicGenerateK:deterministicGenerateK,sign:sign,verify:verify,__curve:secp256k1}}),(function(module,exports){module.exports={"_from":"bigi@^1.4.0","_id":"bigi@1.4.2","_inBundle":false,"_integrity":"sha1-nGZalfiLiwj8Bc/XMfVhhZ1yWCU=","_location":"/bigi","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"bigi@^1.4.0","name":"bigi","escapedName":"bigi","rawSpec":"^1.4.0","saveSpec":null,"fetchSpec":"^1.4.0"},"_requiredBy":["/bitcoinjs-lib","/ecurve"],"_resolved":"https://registry.npmjs.org/bigi/-/bigi-1.4.2.tgz","_shasum":"9c665a95f88b8b08fc05cfd731f561859d725825","_spec":"bigi@^1.4.0","_where":"/home/alex/Desktop/Node-WebDollar/node_modules/bitcoinjs-lib","bugs":{"url":"https://github.com/cryptocoinjs/bigi/issues"},"bundleDependencies":false,"dependencies":{},"deprecated":false,"description":"Big integers.","devDependencies":{"coveralls":"^2.11.2","istanbul":"^0.3.5","jshint":"^2.5.1","mocha":"^2.1.0","mochify":"^2.1.0"},"homepage":"https://github.com/cryptocoinjs/bigi#readme","keywords":["cryptography","math","bitcoin","arbitrary","precision","arithmetic","big","integer","int","number","biginteger","bigint","bignumber","decimal","float"],"main":"./lib/index.js","name":"bigi","repository":{"url":"git+https://github.com/cryptocoinjs/bigi.git","type":"git"},"scripts":{"browser-test":"mochify --wd -R spec","coverage":"istanbul cover ./node_modules/.bin/_mocha -- --reporter list test/*.js","coveralls":"npm run-script coverage && node ./node_modules/.bin/coveralls < coverage/lcov.info","jshint":"jshint --config jshint.json lib/*.js ; true","test":"_mocha -- test/*.js","unit":"mocha"},"testling":{"files":"test/*.js","harness":"mocha","browsers":["ie/9..latest","firefox/latest","chrome/latest","safari/6.0..latest","iphone/6.0..latest","android-browser/4.2..latest"]},"version":"1.4.2"}}),(function(module,exports,__webpack_require__){(function(Buffer){var assert=__webpack_require__(71)
var BigInteger=__webpack_require__(355)
BigInteger.fromByteArrayUnsigned=function(byteArray){if(byteArray[0]&0x80){return new BigInteger([0].concat(byteArray))}
return new BigInteger(byteArray)}
BigInteger.prototype.toByteArrayUnsigned=function(){var byteArray=this.toByteArray()
return byteArray[0]===0?byteArray.slice(1):byteArray}
BigInteger.fromDERInteger=function(byteArray){return new BigInteger(byteArray)}
BigInteger.prototype.toDERInteger=BigInteger.prototype.toByteArray
BigInteger.fromBuffer=function(buffer){if(buffer[0]&0x80){var byteArray=Array.prototype.slice.call(buffer)
return new BigInteger([0].concat(byteArray))}
return new BigInteger(buffer)}
BigInteger.fromHex=function(hex){if(hex==='')return BigInteger.ZERO
assert.equal(hex,hex.match(/^[A-Fa-f0-9]+/),'Invalid hex string')
assert.equal(hex.length%2,0,'Incomplete hex')
return new BigInteger(hex,16)}
BigInteger.prototype.toBuffer=function(size){var byteArray=this.toByteArrayUnsigned()
var zeros=[]
var padding=size-byteArray.length
while(zeros.length<padding)zeros.push(0)
return new Buffer(zeros.concat(byteArray))}
BigInteger.prototype.toHex=function(size){return this.toBuffer(size).toString('hex')}}.call(exports,__webpack_require__(1).Buffer))}),(function(module,exports){module.exports=function isBuffer(arg){return arg&&typeof arg==='object'&&typeof arg.copy==='function'&&typeof arg.fill==='function'&&typeof arg.readUInt8==='function';}}),(function(module,exports,__webpack_require__){var BigInteger=__webpack_require__(87)
var curves=__webpack_require__(779)
var Curve=__webpack_require__(357)
function getCurveByName(name){var curve=curves[name]
if(!curve)return null
var p=new BigInteger(curve.p,16)
var a=new BigInteger(curve.a,16)
var b=new BigInteger(curve.b,16)
var n=new BigInteger(curve.n,16)
var h=new BigInteger(curve.h,16)
var Gx=new BigInteger(curve.Gx,16)
var Gy=new BigInteger(curve.Gy,16)
return new Curve(p,a,b,Gx,Gy,n,h)}
module.exports=getCurveByName}),(function(module,exports){module.exports={"secp128r1":{"p":"fffffffdffffffffffffffffffffffff","a":"fffffffdfffffffffffffffffffffffc","b":"e87579c11079f43dd824993c2cee5ed3","n":"fffffffe0000000075a30d1b9038a115","h":"01","Gx":"161ff7528b899b2d0c28607ca52c5b86","Gy":"cf5ac8395bafeb13c02da292dded7a83"},"secp160k1":{"p":"fffffffffffffffffffffffffffffffeffffac73","a":"00","b":"07","n":"0100000000000000000001b8fa16dfab9aca16b6b3","h":"01","Gx":"3b4c382ce37aa192a4019e763036f4f5dd4d7ebb","Gy":"938cf935318fdced6bc28286531733c3f03c4fee"},"secp160r1":{"p":"ffffffffffffffffffffffffffffffff7fffffff","a":"ffffffffffffffffffffffffffffffff7ffffffc","b":"1c97befc54bd7a8b65acf89f81d4d4adc565fa45","n":"0100000000000000000001f4c8f927aed3ca752257","h":"01","Gx":"4a96b5688ef573284664698968c38bb913cbfc82","Gy":"23a628553168947d59dcc912042351377ac5fb32"},"secp192k1":{"p":"fffffffffffffffffffffffffffffffffffffffeffffee37","a":"00","b":"03","n":"fffffffffffffffffffffffe26f2fc170f69466a74defd8d","h":"01","Gx":"db4ff10ec057e9ae26b07d0280b7f4341da5d1b1eae06c7d","Gy":"9b2f2f6d9c5628a7844163d015be86344082aa88d95e2f9d"},"secp192r1":{"p":"fffffffffffffffffffffffffffffffeffffffffffffffff","a":"fffffffffffffffffffffffffffffffefffffffffffffffc","b":"64210519e59c80e70fa7e9ab72243049feb8deecc146b9b1","n":"ffffffffffffffffffffffff99def836146bc9b1b4d22831","h":"01","Gx":"188da80eb03090f67cbf20eb43a18800f4ff0afd82ff1012","Gy":"07192b95ffc8da78631011ed6b24cdd573f977a11e794811"},"secp256k1":{"p":"fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","a":"00","b":"07","n":"fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141","h":"01","Gx":"79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","Gy":"483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"},"secp256r1":{"p":"ffffffff00000001000000000000000000000000ffffffffffffffffffffffff","a":"ffffffff00000001000000000000000000000000fffffffffffffffffffffffc","b":"5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b","n":"ffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551","h":"01","Gx":"6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296","Gy":"4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"}}}),(function(module,exports,__webpack_require__){(function(Buffer){var bs58check=__webpack_require__(228)
function decodeRaw(buffer,version){if(version!==undefined&&buffer[0]!==version)throw new Error('Invalid network version')
if(buffer.length===33){return{version:buffer[0],privateKey:buffer.slice(1,33),compressed:false}}
if(buffer.length!==34)throw new Error('Invalid WIF length')
if(buffer[33]!==0x01)throw new Error('Invalid compression flag')
return{version:buffer[0],privateKey:buffer.slice(1,33),compressed:true}}
function encodeRaw(version,privateKey,compressed){var result=new Buffer(compressed?34:33)
result.writeUInt8(version,0)
privateKey.copy(result,1)
if(compressed){result[33]=0x01}
return result}
function decode(string,version){return decodeRaw(bs58check.decode(string),version)}
function encode(version,privateKey,compressed){if(typeof version==='number')return bs58check.encode(encodeRaw(version,privateKey,compressed))
return bs58check.encode(encodeRaw(version.version,version.privateKey,version.compressed))}
module.exports={decode:decode,decodeRaw:decodeRaw,encode:encode,encodeRaw:encodeRaw}}.call(exports,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){var Buffer=__webpack_require__(4).Buffer
var base58check=__webpack_require__(228)
var bcrypto=__webpack_require__(116)
var createHmac=__webpack_require__(164)
var typeforce=__webpack_require__(23)
var types=__webpack_require__(37)
var NETWORKS=__webpack_require__(132)
var BigInteger=__webpack_require__(87)
var ECPair=__webpack_require__(226)
var ecurve=__webpack_require__(230)
var curve=ecurve.getCurveByName('secp256k1')
function HDNode(keyPair,chainCode){typeforce(types.tuple('ECPair',types.Buffer256bit),arguments)
if(!keyPair.compressed)throw new TypeError('BIP32 only allows compressed keyPairs')
this.keyPair=keyPair
this.chainCode=chainCode
this.depth=0
this.index=0
this.parentFingerprint=0x00000000}
HDNode.HIGHEST_BIT=0x80000000
HDNode.LENGTH=78
HDNode.MASTER_SECRET=Buffer.from('Bitcoin seed','utf8')
HDNode.fromSeedBuffer=function(seed,network){typeforce(types.tuple(types.Buffer,types.maybe(types.Network)),arguments)
if(seed.length<16)throw new TypeError('Seed should be at least 128 bits')
if(seed.length>64)throw new TypeError('Seed should be at most 512 bits')
var I=createHmac('sha512',HDNode.MASTER_SECRET).update(seed).digest()
var IL=I.slice(0,32)
var IR=I.slice(32)
var pIL=BigInteger.fromBuffer(IL)
var keyPair=new ECPair(pIL,null,{network:network})
return new HDNode(keyPair,IR)}
HDNode.fromSeedHex=function(hex,network){return HDNode.fromSeedBuffer(Buffer.from(hex,'hex'),network)}
HDNode.fromBase58=function(string,networks){var buffer=base58check.decode(string)
if(buffer.length!==78)throw new Error('Invalid buffer length')
var version=buffer.readUInt32BE(0)
var network
if(Array.isArray(networks)){network=networks.filter(function(x){return version===x.bip32.private||version===x.bip32.public}).pop()
if(!network)throw new Error('Unknown network version')}else{network=networks||NETWORKS.bitcoin}
if(version!==network.bip32.private&&version!==network.bip32.public)throw new Error('Invalid network version')
var depth=buffer[4]
var parentFingerprint=buffer.readUInt32BE(5)
if(depth===0){if(parentFingerprint!==0x00000000)throw new Error('Invalid parent fingerprint')}
var index=buffer.readUInt32BE(9)
if(depth===0&&index!==0)throw new Error('Invalid index')
var chainCode=buffer.slice(13,45)
var keyPair
if(version===network.bip32.private){if(buffer.readUInt8(45)!==0x00)throw new Error('Invalid private key')
var d=BigInteger.fromBuffer(buffer.slice(46,78))
keyPair=new ECPair(d,null,{network:network})}else{var Q=ecurve.Point.decodeFrom(curve,buffer.slice(45,78))
curve.validate(Q)
keyPair=new ECPair(null,Q,{network:network})}
var hd=new HDNode(keyPair,chainCode)
hd.depth=depth
hd.index=index
hd.parentFingerprint=parentFingerprint
return hd}
HDNode.prototype.getAddress=function(){return this.keyPair.getAddress()}
HDNode.prototype.getIdentifier=function(){return bcrypto.hash160(this.keyPair.getPublicKeyBuffer())}
HDNode.prototype.getFingerprint=function(){return this.getIdentifier().slice(0,4)}
HDNode.prototype.getNetwork=function(){return this.keyPair.getNetwork()}
HDNode.prototype.getPublicKeyBuffer=function(){return this.keyPair.getPublicKeyBuffer()}
HDNode.prototype.neutered=function(){var neuteredKeyPair=new ECPair(null,this.keyPair.Q,{network:this.keyPair.network})
var neutered=new HDNode(neuteredKeyPair,this.chainCode)
neutered.depth=this.depth
neutered.index=this.index
neutered.parentFingerprint=this.parentFingerprint
return neutered}
HDNode.prototype.sign=function(hash){return this.keyPair.sign(hash)}
HDNode.prototype.verify=function(hash,signature){return this.keyPair.verify(hash,signature)}
HDNode.prototype.toBase58=function(__isPrivate){if(__isPrivate!==undefined)throw new TypeError('Unsupported argument in 2.0.0')
var network=this.keyPair.network
var version=(!this.isNeutered())?network.bip32.private:network.bip32.public
var buffer=Buffer.allocUnsafe(78)
buffer.writeUInt32BE(version,0)
buffer.writeUInt8(this.depth,4)
buffer.writeUInt32BE(this.parentFingerprint,5)
buffer.writeUInt32BE(this.index,9)
this.chainCode.copy(buffer,13)
if(!this.isNeutered()){buffer.writeUInt8(0,45)
this.keyPair.d.toBuffer(32).copy(buffer,46)}else{this.keyPair.getPublicKeyBuffer().copy(buffer,45)}
return base58check.encode(buffer)}
HDNode.prototype.derive=function(index){typeforce(types.UInt32,index)
var isHardened=index>=HDNode.HIGHEST_BIT
var data=Buffer.allocUnsafe(37)
if(isHardened){if(this.isNeutered())throw new TypeError('Could not derive hardened child key')
data[0]=0x00
this.keyPair.d.toBuffer(32).copy(data,1)
data.writeUInt32BE(index,33)}else{this.keyPair.getPublicKeyBuffer().copy(data,0)
data.writeUInt32BE(index,33)}
var I=createHmac('sha512',this.chainCode).update(data).digest()
var IL=I.slice(0,32)
var IR=I.slice(32)
var pIL=BigInteger.fromBuffer(IL)
if(pIL.compareTo(curve.n)>=0){return this.derive(index+1)}
var derivedKeyPair
if(!this.isNeutered()){var ki=pIL.add(this.keyPair.d).mod(curve.n)
if(ki.signum()===0){return this.derive(index+1)}
derivedKeyPair=new ECPair(ki,null,{network:this.keyPair.network})}else{var Ki=curve.G.multiply(pIL).add(this.keyPair.Q)
if(curve.isInfinity(Ki)){return this.derive(index+1)}
derivedKeyPair=new ECPair(null,Ki,{network:this.keyPair.network})}
var hd=new HDNode(derivedKeyPair,IR)
hd.depth=this.depth+1
hd.index=index
hd.parentFingerprint=this.getFingerprint().readUInt32BE(0)
return hd}
HDNode.prototype.deriveHardened=function(index){typeforce(types.UInt31,index)
return this.derive(index+HDNode.HIGHEST_BIT)}
HDNode.prototype.isNeutered=function(){return!(this.keyPair.d)}
HDNode.prototype.derivePath=function(path){typeforce(types.BIP32Path,path)
var splitPath=path.split('/')
if(splitPath[0]==='m'){if(this.parentFingerprint){throw new Error('Not a master node')}
splitPath=splitPath.slice(1)}
return splitPath.reduce(function(prevHd,indexStr){var index
if(indexStr.slice(-1)==="'"){index=parseInt(indexStr.slice(0,-1),10)
return prevHd.deriveHardened(index)}else{index=parseInt(indexStr,10)
return prevHd.derive(index)}},this)}
module.exports=HDNode}),(function(module,exports,__webpack_require__){var Buffer=__webpack_require__(4).Buffer
var baddress=__webpack_require__(227)
var bcrypto=__webpack_require__(116)
var bscript=__webpack_require__(31)
var btemplates=__webpack_require__(220)
var networks=__webpack_require__(132)
var ops=__webpack_require__(43)
var typeforce=__webpack_require__(23)
var types=__webpack_require__(37)
var scriptTypes=btemplates.types
var SIGNABLE=[btemplates.types.P2PKH,btemplates.types.P2PK,btemplates.types.MULTISIG]
var P2SH=SIGNABLE.concat([btemplates.types.P2WPKH,btemplates.types.P2WSH])
var ECPair=__webpack_require__(226)
var ECSignature=__webpack_require__(229)
var Transaction=__webpack_require__(225)
function supportedType(type){return SIGNABLE.indexOf(type)!==-1}
function supportedP2SHType(type){return P2SH.indexOf(type)!==-1}
function extractChunks(type,chunks,script){var pubKeys=[]
var signatures=[]
switch(type){case scriptTypes.P2PKH:pubKeys=chunks.slice(1)
signatures=chunks.slice(0,1)
break
case scriptTypes.P2PK:pubKeys[0]=script?btemplates.pubKey.output.decode(script):undefined
signatures=chunks.slice(0,1)
break
case scriptTypes.MULTISIG:if(script){var multisig=btemplates.multisig.output.decode(script)
pubKeys=multisig.pubKeys}
signatures=chunks.slice(1).map(function(chunk){return chunk.length===0?undefined:chunk})
break}
return{pubKeys:pubKeys,signatures:signatures}}
function expandInput(scriptSig,witnessStack){if(scriptSig.length===0&&witnessStack.length===0)return{}
var prevOutScript
var prevOutType
var scriptType
var script
var redeemScript
var witnessScript
var witnessScriptType
var redeemScriptType
var witness=false
var p2wsh=false
var p2sh=false
var witnessProgram
var chunks
var scriptSigChunks=bscript.decompile(scriptSig)
var sigType=btemplates.classifyInput(scriptSigChunks,true)
if(sigType===scriptTypes.P2SH){p2sh=true
redeemScript=scriptSigChunks[scriptSigChunks.length-1]
redeemScriptType=btemplates.classifyOutput(redeemScript)
prevOutScript=btemplates.scriptHash.output.encode(bcrypto.hash160(redeemScript))
prevOutType=scriptTypes.P2SH
script=redeemScript}
var classifyWitness=btemplates.classifyWitness(witnessStack,true)
if(classifyWitness===scriptTypes.P2WSH){witnessScript=witnessStack[witnessStack.length-1]
witnessScriptType=btemplates.classifyOutput(witnessScript)
p2wsh=true
witness=true
if(scriptSig.length===0){prevOutScript=btemplates.witnessScriptHash.output.encode(bcrypto.sha256(witnessScript))
prevOutType=scriptTypes.P2WSH
if(redeemScript!==undefined){throw new Error('Redeem script given when unnecessary')}}else{if(!redeemScript){throw new Error('No redeemScript provided for P2WSH, but scriptSig non-empty')}
witnessProgram=btemplates.witnessScriptHash.output.encode(bcrypto.sha256(witnessScript))
if(!redeemScript.equals(witnessProgram)){throw new Error('Redeem script didn\'t match witnessScript')}}
if(!supportedType(btemplates.classifyOutput(witnessScript))){throw new Error('unsupported witness script')}
script=witnessScript
scriptType=witnessScriptType
chunks=witnessStack.slice(0,-1)}else if(classifyWitness===scriptTypes.P2WPKH){witness=true
var key=witnessStack[witnessStack.length-1]
var keyHash=bcrypto.hash160(key)
if(scriptSig.length===0){prevOutScript=btemplates.witnessPubKeyHash.output.encode(keyHash)
prevOutType=scriptTypes.P2WPKH
if(typeof redeemScript!=='undefined'){throw new Error('Redeem script given when unnecessary')}}else{if(!redeemScript){throw new Error('No redeemScript provided for P2WPKH, but scriptSig wasn\'t empty')}
witnessProgram=btemplates.witnessPubKeyHash.output.encode(keyHash)
if(!redeemScript.equals(witnessProgram)){throw new Error('Redeem script did not have the right witness program')}}
scriptType=scriptTypes.P2PKH
chunks=witnessStack}else if(redeemScript){if(!supportedP2SHType(redeemScriptType)){throw new Error('Bad redeemscript!')}
script=redeemScript
scriptType=redeemScriptType
chunks=scriptSigChunks.slice(0,-1)}else{prevOutType=scriptType=btemplates.classifyInput(scriptSig)
chunks=scriptSigChunks}
var expanded=extractChunks(scriptType,chunks,script)
var result={pubKeys:expanded.pubKeys,signatures:expanded.signatures,prevOutScript:prevOutScript,prevOutType:prevOutType,signType:scriptType,signScript:script,witness:Boolean(witness)}
if(p2sh){result.redeemScript=redeemScript
result.redeemScriptType=redeemScriptType}
if(p2wsh){result.witnessScript=witnessScript
result.witnessScriptType=witnessScriptType}
return result}
function fixMultisigOrder(input,transaction,vin){if(input.redeemScriptType!==scriptTypes.MULTISIG||!input.redeemScript)return
if(input.pubKeys.length===input.signatures.length)return
var unmatched=input.signatures.concat()
input.signatures=input.pubKeys.map(function(pubKey){var keyPair=ECPair.fromPublicKeyBuffer(pubKey)
var match
unmatched.some(function(signature,i){if(!signature)return false
var parsed=ECSignature.parseScriptSignature(signature)
var hash=transaction.hashForSignature(vin,input.redeemScript,parsed.hashType)
if(!keyPair.verify(hash,parsed.signature))return false
unmatched[i]=undefined
match=signature
return true})
return match})}
function expandOutput(script,scriptType,ourPubKey){typeforce(types.Buffer,script)
var scriptChunks=bscript.decompile(script)
if(!scriptType){scriptType=btemplates.classifyOutput(script)}
var pubKeys=[]
switch(scriptType){case scriptTypes.P2PKH:if(!ourPubKey)break
var pkh1=scriptChunks[2]
var pkh2=bcrypto.hash160(ourPubKey)
if(pkh1.equals(pkh2))pubKeys=[ourPubKey]
break
case scriptTypes.P2WPKH:if(!ourPubKey)break
var wpkh1=scriptChunks[1]
var wpkh2=bcrypto.hash160(ourPubKey)
if(wpkh1.equals(wpkh2))pubKeys=[ourPubKey]
break
case scriptTypes.P2PK:pubKeys=scriptChunks.slice(0,1)
break
case scriptTypes.MULTISIG:pubKeys=scriptChunks.slice(1,-2)
break
default:return{scriptType:scriptType}}
return{pubKeys:pubKeys,scriptType:scriptType,signatures:pubKeys.map(function(){return undefined})}}
function checkP2SHInput(input,redeemScriptHash){if(input.prevOutType){if(input.prevOutType!==scriptTypes.P2SH)throw new Error('PrevOutScript must be P2SH')
var prevOutScriptScriptHash=bscript.decompile(input.prevOutScript)[1]
if(!prevOutScriptScriptHash.equals(redeemScriptHash))throw new Error('Inconsistent hash160(RedeemScript)')}}
function checkP2WSHInput(input,witnessScriptHash){if(input.prevOutType){if(input.prevOutType!==scriptTypes.P2WSH)throw new Error('PrevOutScript must be P2WSH')
var scriptHash=bscript.decompile(input.prevOutScript)[1]
if(!scriptHash.equals(witnessScriptHash))throw new Error('Inconsistent sha25(WitnessScript)')}}
function prepareInput(input,kpPubKey,redeemScript,witnessValue,witnessScript){var expanded
var prevOutType
var prevOutScript
var p2sh=false
var p2shType
var redeemScriptHash
var witness=false
var p2wsh=false
var witnessType
var witnessScriptHash
var signType
var signScript
if(redeemScript&&witnessScript){redeemScriptHash=bcrypto.hash160(redeemScript)
witnessScriptHash=bcrypto.sha256(witnessScript)
checkP2SHInput(input,redeemScriptHash)
if(!redeemScript.equals(btemplates.witnessScriptHash.output.encode(witnessScriptHash)))throw new Error('Witness script inconsistent with redeem script')
expanded=expandOutput(witnessScript,undefined,kpPubKey)
if(!expanded.pubKeys)throw new Error('WitnessScript not supported "'+bscript.toASM(redeemScript)+'"')
prevOutType=btemplates.types.P2SH
prevOutScript=btemplates.scriptHash.output.encode(redeemScriptHash)
p2sh=witness=p2wsh=true
p2shType=btemplates.types.P2WSH
signType=witnessType=expanded.scriptType
signScript=witnessScript}else if(redeemScript){redeemScriptHash=bcrypto.hash160(redeemScript)
checkP2SHInput(input,redeemScriptHash)
expanded=expandOutput(redeemScript,undefined,kpPubKey)
if(!expanded.pubKeys)throw new Error('RedeemScript not supported "'+bscript.toASM(redeemScript)+'"')
prevOutType=btemplates.types.P2SH
prevOutScript=btemplates.scriptHash.output.encode(redeemScriptHash)
p2sh=true
signType=p2shType=expanded.scriptType
signScript=redeemScript
witness=signType===btemplates.types.P2WPKH}else if(witnessScript){witnessScriptHash=bcrypto.sha256(witnessScript)
checkP2WSHInput(input,witnessScriptHash)
expanded=expandOutput(witnessScript,undefined,kpPubKey)
if(!expanded.pubKeys)throw new Error('WitnessScript not supported "'+bscript.toASM(redeemScript)+'"')
prevOutType=btemplates.types.P2WSH
prevOutScript=btemplates.witnessScriptHash.output.encode(witnessScriptHash)
witness=p2wsh=true
signType=witnessType=expanded.scriptType
signScript=witnessScript}else if(input.prevOutType){if(input.prevOutType===scriptTypes.P2SH||input.prevOutType===scriptTypes.P2WSH){throw new Error('PrevOutScript is '+input.prevOutType+', requires redeemScript')}
prevOutType=input.prevOutType
prevOutScript=input.prevOutScript
expanded=expandOutput(input.prevOutScript,input.prevOutType,kpPubKey)
if(!expanded.pubKeys)return
witness=(input.prevOutType===scriptTypes.P2WPKH)
signType=prevOutType
signScript=prevOutScript}else{prevOutScript=btemplates.pubKeyHash.output.encode(bcrypto.hash160(kpPubKey))
expanded=expandOutput(prevOutScript,scriptTypes.P2PKH,kpPubKey)
prevOutType=scriptTypes.P2PKH
witness=false
signType=prevOutType
signScript=prevOutScript}
if(signType===scriptTypes.P2WPKH){signScript=btemplates.pubKeyHash.output.encode(btemplates.witnessPubKeyHash.output.decode(signScript))}
if(p2sh){input.redeemScript=redeemScript
input.redeemScriptType=p2shType}
if(p2wsh){input.witnessScript=witnessScript
input.witnessScriptType=witnessType}
input.pubKeys=expanded.pubKeys
input.signatures=expanded.signatures
input.signScript=signScript
input.signType=signType
input.prevOutScript=prevOutScript
input.prevOutType=prevOutType
input.witness=witness}
function buildStack(type,signatures,pubKeys,allowIncomplete){if(type===scriptTypes.P2PKH){if(signatures.length===1&&Buffer.isBuffer(signatures[0])&&pubKeys.length===1)return btemplates.pubKeyHash.input.encodeStack(signatures[0],pubKeys[0])}else if(type===scriptTypes.P2PK){if(signatures.length===1&&Buffer.isBuffer(signatures[0]))return btemplates.pubKey.input.encodeStack(signatures[0])}else if(type===scriptTypes.MULTISIG){if(signatures.length>0){signatures=signatures.map(function(signature){return signature||ops.OP_0})
if(!allowIncomplete){signatures=signatures.filter(function(x){return x!==ops.OP_0})}
return btemplates.multisig.input.encodeStack(signatures)}}else{throw new Error('Not yet supported')}
if(!allowIncomplete)throw new Error('Not enough signatures provided')
return[]}
function buildInput(input,allowIncomplete){var scriptType=input.prevOutType
var sig=[]
var witness=[]
if(supportedType(scriptType)){sig=buildStack(scriptType,input.signatures,input.pubKeys,allowIncomplete)}
var p2sh=false
if(scriptType===btemplates.types.P2SH){if(!allowIncomplete&&!supportedP2SHType(input.redeemScriptType)){throw new Error('Impossible to sign this type')}
if(supportedType(input.redeemScriptType)){sig=buildStack(input.redeemScriptType,input.signatures,input.pubKeys,allowIncomplete)}
if(input.redeemScriptType){p2sh=true
scriptType=input.redeemScriptType}}
switch(scriptType){case btemplates.types.P2WPKH:witness=buildStack(btemplates.types.P2PKH,input.signatures,input.pubKeys,allowIncomplete)
break
case btemplates.types.P2WSH:if(!allowIncomplete&&!supportedType(input.witnessScriptType)){throw new Error('Impossible to sign this type')}
if(supportedType(input.witnessScriptType)){witness=buildStack(input.witnessScriptType,input.signatures,input.pubKeys,allowIncomplete)
witness.push(input.witnessScript)
scriptType=input.witnessScriptType}
break}
if(p2sh){sig.push(input.redeemScript)}
return{type:scriptType,script:bscript.compile(sig),witness:witness}}
function TransactionBuilder(network,maximumFeeRate){this.prevTxMap={}
this.network=network||networks.bitcoin
this.maximumFeeRate=maximumFeeRate||2500
this.inputs=[]
this.tx=new Transaction()}
TransactionBuilder.prototype.setLockTime=function(locktime){typeforce(types.UInt32,locktime)
if(this.inputs.some(function(input){if(!input.signatures)return false
return input.signatures.some(function(s){return s})})){throw new Error('No, this would invalidate signatures')}
this.tx.locktime=locktime}
TransactionBuilder.prototype.setVersion=function(version){typeforce(types.UInt32,version)
this.tx.version=version}
TransactionBuilder.fromTransaction=function(transaction,network){var txb=new TransactionBuilder(network)
txb.setVersion(transaction.version)
txb.setLockTime(transaction.locktime)
transaction.outs.forEach(function(txOut){txb.addOutput(txOut.script,txOut.value)})
transaction.ins.forEach(function(txIn){txb.__addInputUnsafe(txIn.hash,txIn.index,{sequence:txIn.sequence,script:txIn.script,witness:txIn.witness})})
txb.inputs.forEach(function(input,i){fixMultisigOrder(input,transaction,i)})
return txb}
TransactionBuilder.prototype.addInput=function(txHash,vout,sequence,prevOutScript){if(!this.__canModifyInputs()){throw new Error('No, this would invalidate signatures')}
var value
if(typeof txHash==='string'){txHash=Buffer.from(txHash,'hex').reverse()}else if(txHash instanceof Transaction){var txOut=txHash.outs[vout]
prevOutScript=txOut.script
value=txOut.value
txHash=txHash.getHash()}
return this.__addInputUnsafe(txHash,vout,{sequence:sequence,prevOutScript:prevOutScript,value:value})}
TransactionBuilder.prototype.__addInputUnsafe=function(txHash,vout,options){if(Transaction.isCoinbaseHash(txHash)){throw new Error('coinbase inputs not supported')}
var prevTxOut=txHash.toString('hex')+':'+vout
if(this.prevTxMap[prevTxOut]!==undefined)throw new Error('Duplicate TxOut: '+prevTxOut)
var input={}
if(options.script!==undefined){input=expandInput(options.script,options.witness||[])}
if(options.value!==undefined){input.value=options.value}
if(!input.prevOutScript&&options.prevOutScript){var prevOutType
if(!input.pubKeys&&!input.signatures){var expanded=expandOutput(options.prevOutScript)
if(expanded.pubKeys){input.pubKeys=expanded.pubKeys
input.signatures=expanded.signatures}
prevOutType=expanded.scriptType}
input.prevOutScript=options.prevOutScript
input.prevOutType=prevOutType||btemplates.classifyOutput(options.prevOutScript)}
var vin=this.tx.addInput(txHash,vout,options.sequence,options.scriptSig)
this.inputs[vin]=input
this.prevTxMap[prevTxOut]=vin
return vin}
TransactionBuilder.prototype.addOutput=function(scriptPubKey,value){if(!this.__canModifyOutputs()){throw new Error('No, this would invalidate signatures')}
if(typeof scriptPubKey==='string'){scriptPubKey=baddress.toOutputScript(scriptPubKey,this.network)}
return this.tx.addOutput(scriptPubKey,value)}
TransactionBuilder.prototype.build=function(){return this.__build(false)}
TransactionBuilder.prototype.buildIncomplete=function(){return this.__build(true)}
TransactionBuilder.prototype.__build=function(allowIncomplete){if(!allowIncomplete){if(!this.tx.ins.length)throw new Error('Transaction has no inputs')
if(!this.tx.outs.length)throw new Error('Transaction has no outputs')}
var tx=this.tx.clone()
this.inputs.forEach(function(input,i){var scriptType=input.witnessScriptType||input.redeemScriptType||input.prevOutType
if(!scriptType&&!allowIncomplete)throw new Error('Transaction is not complete')
var result=buildInput(input,allowIncomplete)
if(!allowIncomplete){if(!supportedType(result.type)&&result.type!==btemplates.types.P2WPKH){throw new Error(result.type+' not supported')}}
tx.setInputScript(i,result.script)
tx.setWitness(i,result.witness)})
if(!allowIncomplete){if(this.__overMaximumFees(tx.virtualSize())){throw new Error('Transaction has absurd fees')}}
return tx}
function canSign(input){return input.prevOutScript!==undefined&&input.signScript!==undefined&&input.pubKeys!==undefined&&input.signatures!==undefined&&input.signatures.length===input.pubKeys.length&&input.pubKeys.length>0&&(input.witness===false||(input.witness===true&&input.value!==undefined))}
TransactionBuilder.prototype.sign=function(vin,keyPair,redeemScript,hashType,witnessValue,witnessScript){if(keyPair.network&&keyPair.network!==this.network)throw new TypeError('Inconsistent network')
if(!this.inputs[vin])throw new Error('No input at index: '+vin)
hashType=hashType||Transaction.SIGHASH_ALL
var input=this.inputs[vin]
if(input.redeemScript!==undefined&&redeemScript&&!input.redeemScript.equals(redeemScript)){throw new Error('Inconsistent redeemScript')}
var kpPubKey=keyPair.publicKey||keyPair.getPublicKeyBuffer()
if(!canSign(input)){if(witnessValue!==undefined){if(input.value!==undefined&&input.value!==witnessValue)throw new Error('Input didn\'t match witnessValue')
typeforce(types.Satoshi,witnessValue)
input.value=witnessValue}
if(!canSign(input))prepareInput(input,kpPubKey,redeemScript,witnessValue,witnessScript)
if(!canSign(input))throw Error(input.prevOutType+' not supported')}
var signatureHash
if(input.witness){signatureHash=this.tx.hashForWitnessV0(vin,input.signScript,input.value,hashType)}else{signatureHash=this.tx.hashForSignature(vin,input.signScript,hashType)}
var signed=input.pubKeys.some(function(pubKey,i){if(!kpPubKey.equals(pubKey))return false
if(input.signatures[i])throw new Error('Signature already exists')
if(kpPubKey.length!==33&&input.signType===scriptTypes.P2WPKH)throw new Error('BIP143 rejects uncompressed public keys in P2WPKH or P2WSH')
var signature=keyPair.sign(signatureHash)
if(Buffer.isBuffer(signature))signature=ECSignature.fromRSBuffer(signature)
input.signatures[i]=signature.toScriptSignature(hashType)
return true})
if(!signed)throw new Error('Key pair cannot sign for this input')}
function signatureHashType(buffer){return buffer.readUInt8(buffer.length-1)}
TransactionBuilder.prototype.__canModifyInputs=function(){return this.inputs.every(function(input){if(input.signatures===undefined)return true
return input.signatures.every(function(signature){if(!signature)return true
var hashType=signatureHashType(signature)
return hashType&Transaction.SIGHASH_ANYONECANPAY})})}
TransactionBuilder.prototype.__canModifyOutputs=function(){var nInputs=this.tx.ins.length
var nOutputs=this.tx.outs.length
return this.inputs.every(function(input){if(input.signatures===undefined)return true
return input.signatures.every(function(signature){if(!signature)return true
var hashType=signatureHashType(signature)
var hashTypeMod=hashType&0x1f
if(hashTypeMod===Transaction.SIGHASH_NONE)return true
if(hashTypeMod===Transaction.SIGHASH_SINGLE){return nInputs<=nOutputs}})})}
TransactionBuilder.prototype.__overMaximumFees=function(bytes){var incoming=this.inputs.reduce(function(a,x){return a+(x.value>>>0)},0)
var outgoing=this.tx.outs.reduce(function(a,x){return a+x.value},0)
var fee=incoming-outgoing
var feeRate=fee/bytes
return feeRate>this.maximumFeeRate}
module.exports=TransactionBuilder}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_sockets_protocol_extend_socket_Socket_Address__=__webpack_require__(76);const ipaddr=__webpack_require__(232);class GeoLocationAddressObject{constructor(sckAddress,port,location){if(location===undefined)location={};sckAddress=__WEBPACK_IMPORTED_MODULE_0_common_sockets_protocol_extend_socket_Socket_Address__["a"].createSocketAddress(sckAddress,port);this.sckAddress=sckAddress;this.lastTimeChecked=0;this.location=location;}
refreshLastTimeChecked(){this.lastTimeChecked=new Date().getTime();}
checkLastTimeChecked(minimumDifferenceInMs){let time=new Date().getTime();if((time-this.lastTimeChecked)>=minimumDifferenceInMs)
return true;return false;}
toString(){return this.sckAddress.getAddress();}}
__webpack_exports__["a"]=(GeoLocationAddressObject);}),(function(module,exports){let continents={"A1":"--","A2":"--","AD":"EU","AE":"AS","AF":"AS","AG":"NA","AI":"NA","AL":"EU","AM":"AS","AN":"NA","AO":"AF","AP":"AS","AQ":"AN","AR":"SA","AS":"OC","AT":"EU","AU":"OC","AW":"NA","AX":"EU","AZ":"AS","BA":"EU","BB":"NA","BD":"AS","BE":"EU","BF":"AF","BG":"EU","BH":"AS","BI":"AF","BJ":"AF","BL":"NA","BM":"NA","BN":"AS","BO":"SA","BR":"SA","BS":"NA","BT":"AS","BV":"AN","BW":"AF","BY":"EU","BZ":"NA","CA":"NA","CC":"AS","CD":"AF","CF":"AF","CG":"AF","CH":"EU","CI":"AF","CK":"OC","CL":"SA","CM":"AF","CN":"AS","CO":"SA","CR":"NA","CU":"NA","CV":"AF","CX":"AS","CY":"AS","CZ":"EU","DE":"EU","DJ":"AF","DK":"EU","DM":"NA","DO":"NA","DZ":"AF","EC":"SA","EE":"EU","EG":"AF","EH":"AF","ER":"AF","ES":"EU","ET":"AF","EU":"EU","FI":"EU","FJ":"OC","FK":"SA","FM":"OC","FO":"EU","FR":"EU","FX":"EU","GA":"AF","GB":"EU","GD":"NA","GE":"AS","GF":"SA","GG":"EU","GH":"AF","GI":"EU","GL":"NA","GM":"AF","GN":"AF","GP":"NA","GQ":"AF","GR":"EU","GS":"AN","GT":"NA","GU":"OC","GW":"AF","GY":"SA","HK":"AS","HM":"AN","HN":"NA","HR":"EU","HT":"NA","HU":"EU","ID":"AS","IE":"EU","IL":"AS","IM":"EU","IN":"AS","IO":"AS","IQ":"AS","IR":"AS","IS":"EU","IT":"EU","JE":"EU","JM":"NA","JO":"AS","JP":"AS","KE":"AF","KG":"AS","KH":"AS","KI":"OC","KM":"AF","KN":"NA","KP":"AS","KR":"AS","KW":"AS","KY":"NA","KZ":"AS","LA":"AS","LB":"AS","LC":"NA","LI":"EU","LK":"AS","LR":"AF","LS":"AF","LT":"EU","LU":"EU","LV":"EU","LY":"AF","MA":"AF","MC":"EU","MD":"EU","ME":"EU","MF":"NA","MG":"AF","MH":"OC","MK":"EU","ML":"AF","MM":"AS","MN":"AS","MO":"AS","MP":"OC","MQ":"NA","MR":"AF","MS":"NA","MT":"EU","MU":"AF","MV":"AS","MW":"AF","MX":"NA","MY":"AS","MZ":"AF","NA":"AF","NC":"OC","NE":"AF","NF":"OC","NG":"AF","NI":"NA","NL":"EU","NO":"EU","NP":"AS","NR":"OC","NU":"OC","NZ":"OC","O1":"--",};exports.continents=continents;exports.getContinentFromCountry=(countryCode)=>{for(let key in continents)
if(continents.hasOwnProperty(key))
if(key===countryCode){return continents[key];}
return '--';}}),(function(module,exports,__webpack_require__){(function(process,global,setImmediate){!function(e){if(true)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.Promise=e()}}(function(){var define,module,exports;return(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof _dereq_=="function"&&_dereq_;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof _dereq_=="function"&&_dereq_;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise){var SomePromiseArray=Promise._SomePromiseArray;function any(promises){var ret=new SomePromiseArray(promises);var promise=ret.promise();ret.setHowMany(1);ret.setUnwrap();ret.init();return promise;}
Promise.any=function(promises){return any(promises);};Promise.prototype.any=function(){return any(this);};};},{}],2:[function(_dereq_,module,exports){"use strict";var firstLineError;try{throw new Error();}catch(e){firstLineError=e;}
var schedule=_dereq_("./schedule");var Queue=_dereq_("./queue");var util=_dereq_("./util");function Async(){this._customScheduler=false;this._isTickUsed=false;this._lateQueue=new Queue(16);this._normalQueue=new Queue(16);this._haveDrainedQueues=false;this._trampolineEnabled=true;var self=this;this.drainQueues=function(){self._drainQueues();};this._schedule=schedule;}
Async.prototype.setScheduler=function(fn){var prev=this._schedule;this._schedule=fn;this._customScheduler=true;return prev;};Async.prototype.hasCustomScheduler=function(){return this._customScheduler;};Async.prototype.enableTrampoline=function(){this._trampolineEnabled=true;};Async.prototype.disableTrampolineIfNecessary=function(){if(util.hasDevTools){this._trampolineEnabled=false;}};Async.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues;};Async.prototype.fatalError=function(e,isNode){if(isNode){process.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+
"\n");process.exit(2);}else{this.throwLater(e);}};Async.prototype.throwLater=function(fn,arg){if(arguments.length===1){arg=fn;fn=function(){throw arg;};}
if(typeof setTimeout!=="undefined"){setTimeout(function(){fn(arg);},0);}else try{this._schedule(function(){fn(arg);});}catch(e){throw new Error("No async scheduler available\u000a\u000a    See http://goo.gl/MqrFmX\u000a");}};function AsyncInvokeLater(fn,receiver,arg){this._lateQueue.push(fn,receiver,arg);this._queueTick();}
function AsyncInvoke(fn,receiver,arg){this._normalQueue.push(fn,receiver,arg);this._queueTick();}
function AsyncSettlePromises(promise){this._normalQueue._pushOne(promise);this._queueTick();}
if(!util.hasDevTools){Async.prototype.invokeLater=AsyncInvokeLater;Async.prototype.invoke=AsyncInvoke;Async.prototype.settlePromises=AsyncSettlePromises;}else{Async.prototype.invokeLater=function(fn,receiver,arg){if(this._trampolineEnabled){AsyncInvokeLater.call(this,fn,receiver,arg);}else{this._schedule(function(){setTimeout(function(){fn.call(receiver,arg);},100);});}};Async.prototype.invoke=function(fn,receiver,arg){if(this._trampolineEnabled){AsyncInvoke.call(this,fn,receiver,arg);}else{this._schedule(function(){fn.call(receiver,arg);});}};Async.prototype.settlePromises=function(promise){if(this._trampolineEnabled){AsyncSettlePromises.call(this,promise);}else{this._schedule(function(){promise._settlePromises();});}};}
function _drainQueue(queue){while(queue.length()>0){_drainQueueStep(queue);}}
function _drainQueueStep(queue){var fn=queue.shift();if(typeof fn!=="function"){fn._settlePromises();}else{var receiver=queue.shift();var arg=queue.shift();fn.call(receiver,arg);}}
Async.prototype._drainQueues=function(){_drainQueue(this._normalQueue);this._reset();this._haveDrainedQueues=true;_drainQueue(this._lateQueue);};Async.prototype._queueTick=function(){if(!this._isTickUsed){this._isTickUsed=true;this._schedule(this.drainQueues);}};Async.prototype._reset=function(){this._isTickUsed=false;};module.exports=Async;module.exports.firstLineError=firstLineError;},{"./queue":26,"./schedule":29,"./util":36}],3:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL,tryConvertToPromise,debug){var calledBind=false;var rejectThis=function(_,e){this._reject(e);};var targetRejected=function(e,context){context.promiseRejectionQueued=true;context.bindingPromise._then(rejectThis,rejectThis,null,this,e);};var bindingResolved=function(thisArg,context){if(((this._bitField&50397184)===0)){this._resolveCallback(context.target);}};var bindingRejected=function(e,context){if(!context.promiseRejectionQueued)this._reject(e);};Promise.prototype.bind=function(thisArg){if(!calledBind){calledBind=true;Promise.prototype._propagateFrom=debug.propagateFromFunction();Promise.prototype._boundValue=debug.boundValueFunction();}
var maybePromise=tryConvertToPromise(thisArg);var ret=new Promise(INTERNAL);ret._propagateFrom(this,1);var target=this._target();ret._setBoundTo(maybePromise);if(maybePromise instanceof Promise){var context={promiseRejectionQueued:false,promise:ret,target:target,bindingPromise:maybePromise};target._then(INTERNAL,targetRejected,undefined,ret,context);maybePromise._then(bindingResolved,bindingRejected,undefined,ret,context);ret._setOnCancel(maybePromise);}else{ret._resolveCallback(target);}
return ret;};Promise.prototype._setBoundTo=function(obj){if(obj!==undefined){this._bitField=this._bitField|2097152;this._boundTo=obj;}else{this._bitField=this._bitField&(~2097152);}};Promise.prototype._isBound=function(){return(this._bitField&2097152)===2097152;};Promise.bind=function(thisArg,value){return Promise.resolve(value).bind(thisArg);};};},{}],4:[function(_dereq_,module,exports){"use strict";var old;if(typeof Promise!=="undefined")old=Promise;function noConflict(){try{if(Promise===bluebird)Promise=old;}
catch(e){}
return bluebird;}
var bluebird=_dereq_("./promise")();bluebird.noConflict=noConflict;module.exports=bluebird;},{"./promise":22}],5:[function(_dereq_,module,exports){"use strict";var cr=Object.create;if(cr){var callerCache=cr(null);var getterCache=cr(null);callerCache[" size"]=getterCache[" size"]=0;}
module.exports=function(Promise){var util=_dereq_("./util");var canEvaluate=util.canEvaluate;var isIdentifier=util.isIdentifier;var getMethodCaller;var getGetter;if(false){var makeMethodCaller=function(methodName){return new Function("ensureMethod","                                    \n\
        return function(obj) {                                               \n\
            'use strict'                                                     \n\
            var len = this.length;                                           \n\
            ensureMethod(obj, 'methodName');                                 \n\
            switch(len) {                                                    \n\
                case 1: return obj.methodName(this[0]);                      \n\
                case 2: return obj.methodName(this[0], this[1]);             \n\
                case 3: return obj.methodName(this[0], this[1], this[2]);    \n\
                case 0: return obj.methodName();                             \n\
                default:                                                     \n\
                    return obj.methodName.apply(obj, this);                  \n\
            }                                                                \n\
        };                                                                   \n\
        ".replace(/methodName/g,methodName))(ensureMethod);};var makeGetter=function(propertyName){return new Function("obj","                                             \n\
        'use strict';                                                        \n\
        return obj.propertyName;                                             \n\
        ".replace("propertyName",propertyName));};var getCompiled=function(name,compiler,cache){var ret=cache[name];if(typeof ret!=="function"){if(!isIdentifier(name)){return null;}
ret=compiler(name);cache[name]=ret;cache[" size"]++;if(cache[" size"]>512){var keys=Object.keys(cache);for(var i=0;i<256;++i)delete cache[keys[i]];cache[" size"]=keys.length-256;}}
return ret;};getMethodCaller=function(name){return getCompiled(name,makeMethodCaller,callerCache);};getGetter=function(name){return getCompiled(name,makeGetter,getterCache);};}
function ensureMethod(obj,methodName){var fn;if(obj!=null)fn=obj[methodName];if(typeof fn!=="function"){var message="Object "+util.classString(obj)+" has no method '"+
util.toString(methodName)+"'";throw new Promise.TypeError(message);}
return fn;}
function caller(obj){var methodName=this.pop();var fn=ensureMethod(obj,methodName);return fn.apply(obj,this);}
Promise.prototype.call=function(methodName){var args=[].slice.call(arguments,1);;if(false){if(canEvaluate){var maybeCaller=getMethodCaller(methodName);if(maybeCaller!==null){return this._then(maybeCaller,undefined,undefined,args,undefined);}}}
args.push(methodName);return this._then(caller,undefined,undefined,args,undefined);};function namedGetter(obj){return obj[this];}
function indexedGetter(obj){var index=+this;if(index<0)index=Math.max(0,index+obj.length);return obj[index];}
Promise.prototype.get=function(propertyName){var isIndex=(typeof propertyName==="number");var getter;if(!isIndex){if(canEvaluate){var maybeGetter=getGetter(propertyName);getter=maybeGetter!==null?maybeGetter:namedGetter;}else{getter=namedGetter;}}else{getter=indexedGetter;}
return this._then(getter,undefined,undefined,propertyName,undefined);};};},{"./util":36}],6:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,PromiseArray,apiRejection,debug){var util=_dereq_("./util");var tryCatch=util.tryCatch;var errorObj=util.errorObj;var async=Promise._async;Promise.prototype["break"]=Promise.prototype.cancel=function(){if(!debug.cancellation())return this._warn("cancellation is disabled");var promise=this;var child=promise;while(promise._isCancellable()){if(!promise._cancelBy(child)){if(child._isFollowing()){child._followee().cancel();}else{child._cancelBranched();}
break;}
var parent=promise._cancellationParent;if(parent==null||!parent._isCancellable()){if(promise._isFollowing()){promise._followee().cancel();}else{promise._cancelBranched();}
break;}else{if(promise._isFollowing())promise._followee().cancel();promise._setWillBeCancelled();child=promise;promise=parent;}}};Promise.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--;};Promise.prototype._enoughBranchesHaveCancelled=function(){return this._branchesRemainingToCancel===undefined||this._branchesRemainingToCancel<=0;};Promise.prototype._cancelBy=function(canceller){if(canceller===this){this._branchesRemainingToCancel=0;this._invokeOnCancel();return true;}else{this._branchHasCancelled();if(this._enoughBranchesHaveCancelled()){this._invokeOnCancel();return true;}}
return false;};Promise.prototype._cancelBranched=function(){if(this._enoughBranchesHaveCancelled()){this._cancel();}};Promise.prototype._cancel=function(){if(!this._isCancellable())return;this._setCancelled();async.invoke(this._cancelPromises,this,undefined);};Promise.prototype._cancelPromises=function(){if(this._length()>0)this._settlePromises();};Promise.prototype._unsetOnCancel=function(){this._onCancelField=undefined;};Promise.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled();};Promise.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled();};Promise.prototype._doInvokeOnCancel=function(onCancelCallback,internalOnly){if(util.isArray(onCancelCallback)){for(var i=0;i<onCancelCallback.length;++i){this._doInvokeOnCancel(onCancelCallback[i],internalOnly);}}else if(onCancelCallback!==undefined){if(typeof onCancelCallback==="function"){if(!internalOnly){var e=tryCatch(onCancelCallback).call(this._boundValue());if(e===errorObj){this._attachExtraTrace(e.e);async.throwLater(e.e);}}}else{onCancelCallback._resultCancelled(this);}}};Promise.prototype._invokeOnCancel=function(){var onCancelCallback=this._onCancel();this._unsetOnCancel();async.invoke(this._doInvokeOnCancel,this,onCancelCallback);};Promise.prototype._invokeInternalOnCancel=function(){if(this._isCancellable()){this._doInvokeOnCancel(this._onCancel(),true);this._unsetOnCancel();}};Promise.prototype._resultCancelled=function(){this.cancel();};};},{"./util":36}],7:[function(_dereq_,module,exports){"use strict";module.exports=function(NEXT_FILTER){var util=_dereq_("./util");var getKeys=_dereq_("./es5").keys;var tryCatch=util.tryCatch;var errorObj=util.errorObj;function catchFilter(instances,cb,promise){return function(e){var boundTo=promise._boundValue();predicateLoop:for(var i=0;i<instances.length;++i){var item=instances[i];if(item===Error||(item!=null&&item.prototype instanceof Error)){if(e instanceof item){return tryCatch(cb).call(boundTo,e);}}else if(typeof item==="function"){var matchesPredicate=tryCatch(item).call(boundTo,e);if(matchesPredicate===errorObj){return matchesPredicate;}else if(matchesPredicate){return tryCatch(cb).call(boundTo,e);}}else if(util.isObject(e)){var keys=getKeys(item);for(var j=0;j<keys.length;++j){var key=keys[j];if(item[key]!=e[key]){continue predicateLoop;}}
return tryCatch(cb).call(boundTo,e);}}
return NEXT_FILTER;};}
return catchFilter;};},{"./es5":13,"./util":36}],8:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise){var longStackTraces=false;var contextStack=[];Promise.prototype._promiseCreated=function(){};Promise.prototype._pushContext=function(){};Promise.prototype._popContext=function(){return null;};Promise._peekContext=Promise.prototype._peekContext=function(){};function Context(){this._trace=new Context.CapturedTrace(peekContext());}
Context.prototype._pushContext=function(){if(this._trace!==undefined){this._trace._promiseCreated=null;contextStack.push(this._trace);}};Context.prototype._popContext=function(){if(this._trace!==undefined){var trace=contextStack.pop();var ret=trace._promiseCreated;trace._promiseCreated=null;return ret;}
return null;};function createContext(){if(longStackTraces)return new Context();}
function peekContext(){var lastIndex=contextStack.length-1;if(lastIndex>=0){return contextStack[lastIndex];}
return undefined;}
Context.CapturedTrace=null;Context.create=createContext;Context.deactivateLongStackTraces=function(){};Context.activateLongStackTraces=function(){var Promise_pushContext=Promise.prototype._pushContext;var Promise_popContext=Promise.prototype._popContext;var Promise_PeekContext=Promise._peekContext;var Promise_peekContext=Promise.prototype._peekContext;var Promise_promiseCreated=Promise.prototype._promiseCreated;Context.deactivateLongStackTraces=function(){Promise.prototype._pushContext=Promise_pushContext;Promise.prototype._popContext=Promise_popContext;Promise._peekContext=Promise_PeekContext;Promise.prototype._peekContext=Promise_peekContext;Promise.prototype._promiseCreated=Promise_promiseCreated;longStackTraces=false;};longStackTraces=true;Promise.prototype._pushContext=Context.prototype._pushContext;Promise.prototype._popContext=Context.prototype._popContext;Promise._peekContext=Promise.prototype._peekContext=peekContext;Promise.prototype._promiseCreated=function(){var ctx=this._peekContext();if(ctx&&ctx._promiseCreated==null)ctx._promiseCreated=this;};};return Context;};},{}],9:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,Context){var getDomain=Promise._getDomain;var async=Promise._async;var Warning=_dereq_("./errors").Warning;var util=_dereq_("./util");var es5=_dereq_("./es5");var canAttachTrace=util.canAttachTrace;var unhandledRejectionHandled;var possiblyUnhandledRejection;var bluebirdFramePattern=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/;var nodeFramePattern=/\((?:timers\.js):\d+:\d+\)/;var parseLinePattern=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/;var stackFramePattern=null;var formatStack=null;var indentStackFrames=false;var printWarning;var debugging=!!(util.env("BLUEBIRD_DEBUG")!=0&&(true||util.env("BLUEBIRD_DEBUG")||util.env("NODE_ENV")==="development"));var warnings=!!(util.env("BLUEBIRD_WARNINGS")!=0&&(debugging||util.env("BLUEBIRD_WARNINGS")));var longStackTraces=!!(util.env("BLUEBIRD_LONG_STACK_TRACES")!=0&&(debugging||util.env("BLUEBIRD_LONG_STACK_TRACES")));var wForgottenReturn=util.env("BLUEBIRD_W_FORGOTTEN_RETURN")!=0&&(warnings||!!util.env("BLUEBIRD_W_FORGOTTEN_RETURN"));Promise.prototype.suppressUnhandledRejections=function(){var target=this._target();target._bitField=((target._bitField&(~1048576))|524288);};Promise.prototype._ensurePossibleRejectionHandled=function(){if((this._bitField&524288)!==0)return;this._setRejectionIsUnhandled();var self=this;setTimeout(function(){self._notifyUnhandledRejection();},1);};Promise.prototype._notifyUnhandledRejectionIsHandled=function(){fireRejectionEvent("rejectionHandled",unhandledRejectionHandled,undefined,this);};Promise.prototype._setReturnedNonUndefined=function(){this._bitField=this._bitField|268435456;};Promise.prototype._returnedNonUndefined=function(){return(this._bitField&268435456)!==0;};Promise.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var reason=this._settledValue();this._setUnhandledRejectionIsNotified();fireRejectionEvent("unhandledRejection",possiblyUnhandledRejection,reason,this);}};Promise.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=this._bitField|262144;};Promise.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&(~262144);};Promise.prototype._isUnhandledRejectionNotified=function(){return(this._bitField&262144)>0;};Promise.prototype._setRejectionIsUnhandled=function(){this._bitField=this._bitField|1048576;};Promise.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&(~1048576);if(this._isUnhandledRejectionNotified()){this._unsetUnhandledRejectionIsNotified();this._notifyUnhandledRejectionIsHandled();}};Promise.prototype._isRejectionUnhandled=function(){return(this._bitField&1048576)>0;};Promise.prototype._warn=function(message,shouldUseOwnTrace,promise){return warn(message,shouldUseOwnTrace,promise||this);};Promise.onPossiblyUnhandledRejection=function(fn){var domain=getDomain();possiblyUnhandledRejection=typeof fn==="function"?(domain===null?fn:util.domainBind(domain,fn)):undefined;};Promise.onUnhandledRejectionHandled=function(fn){var domain=getDomain();unhandledRejectionHandled=typeof fn==="function"?(domain===null?fn:util.domainBind(domain,fn)):undefined;};var disableLongStackTraces=function(){};Promise.longStackTraces=function(){if(async.haveItemsQueued()&&!config.longStackTraces){throw new Error("cannot enable long stack traces after promises have been created\u000a\u000a    See http://goo.gl/MqrFmX\u000a");}
if(!config.longStackTraces&&longStackTracesIsSupported()){var Promise_captureStackTrace=Promise.prototype._captureStackTrace;var Promise_attachExtraTrace=Promise.prototype._attachExtraTrace;var Promise_dereferenceTrace=Promise.prototype._dereferenceTrace;config.longStackTraces=true;disableLongStackTraces=function(){if(async.haveItemsQueued()&&!config.longStackTraces){throw new Error("cannot enable long stack traces after promises have been created\u000a\u000a    See http://goo.gl/MqrFmX\u000a");}
Promise.prototype._captureStackTrace=Promise_captureStackTrace;Promise.prototype._attachExtraTrace=Promise_attachExtraTrace;Promise.prototype._dereferenceTrace=Promise_dereferenceTrace;Context.deactivateLongStackTraces();async.enableTrampoline();config.longStackTraces=false;};Promise.prototype._captureStackTrace=longStackTracesCaptureStackTrace;Promise.prototype._attachExtraTrace=longStackTracesAttachExtraTrace;Promise.prototype._dereferenceTrace=longStackTracesDereferenceTrace;Context.activateLongStackTraces();async.disableTrampolineIfNecessary();}};Promise.hasLongStackTraces=function(){return config.longStackTraces&&longStackTracesIsSupported();};var fireDomEvent=(function(){try{if(typeof CustomEvent==="function"){var event=new CustomEvent("CustomEvent");util.global.dispatchEvent(event);return function(name,event){var eventData={detail:event,cancelable:true};es5.defineProperty(eventData,"promise",{value:event.promise});es5.defineProperty(eventData,"reason",{value:event.reason});var domEvent=new CustomEvent(name.toLowerCase(),eventData);return!util.global.dispatchEvent(domEvent);};}else if(typeof Event==="function"){var event=new Event("CustomEvent");util.global.dispatchEvent(event);return function(name,event){var domEvent=new Event(name.toLowerCase(),{cancelable:true});domEvent.detail=event;es5.defineProperty(domEvent,"promise",{value:event.promise});es5.defineProperty(domEvent,"reason",{value:event.reason});return!util.global.dispatchEvent(domEvent);};}else{var event=document.createEvent("CustomEvent");event.initCustomEvent("testingtheevent",false,true,{});util.global.dispatchEvent(event);return function(name,event){var domEvent=document.createEvent("CustomEvent");domEvent.initCustomEvent(name.toLowerCase(),false,true,event);return!util.global.dispatchEvent(domEvent);};}}catch(e){}
return function(){return false;};})();var fireGlobalEvent=(function(){if(util.isNode){return function(){return process.emit.apply(process,arguments);};}else{if(!util.global){return function(){return false;};}
return function(name){var methodName="on"+name.toLowerCase();var method=util.global[methodName];if(!method)return false;method.apply(util.global,[].slice.call(arguments,1));return true;};}})();function generatePromiseLifecycleEventObject(name,promise){return{promise:promise};}
var eventToObjectGenerator={promiseCreated:generatePromiseLifecycleEventObject,promiseFulfilled:generatePromiseLifecycleEventObject,promiseRejected:generatePromiseLifecycleEventObject,promiseResolved:generatePromiseLifecycleEventObject,promiseCancelled:generatePromiseLifecycleEventObject,promiseChained:function(name,promise,child){return{promise:promise,child:child};},warning:function(name,warning){return{warning:warning};},unhandledRejection:function(name,reason,promise){return{reason:reason,promise:promise};},rejectionHandled:generatePromiseLifecycleEventObject};var activeFireEvent=function(name){var globalEventFired=false;try{globalEventFired=fireGlobalEvent.apply(null,arguments);}catch(e){async.throwLater(e);globalEventFired=true;}
var domEventFired=false;try{domEventFired=fireDomEvent(name,eventToObjectGenerator[name].apply(null,arguments));}catch(e){async.throwLater(e);domEventFired=true;}
return domEventFired||globalEventFired;};Promise.config=function(opts){opts=Object(opts);if("longStackTraces"in opts){if(opts.longStackTraces){Promise.longStackTraces();}else if(!opts.longStackTraces&&Promise.hasLongStackTraces()){disableLongStackTraces();}}
if("warnings"in opts){var warningsOption=opts.warnings;config.warnings=!!warningsOption;wForgottenReturn=config.warnings;if(util.isObject(warningsOption)){if("wForgottenReturn"in warningsOption){wForgottenReturn=!!warningsOption.wForgottenReturn;}}}
if("cancellation"in opts&&opts.cancellation&&!config.cancellation){if(async.haveItemsQueued()){throw new Error("cannot enable cancellation after promises are in use");}
Promise.prototype._clearCancellationData=cancellationClearCancellationData;Promise.prototype._propagateFrom=cancellationPropagateFrom;Promise.prototype._onCancel=cancellationOnCancel;Promise.prototype._setOnCancel=cancellationSetOnCancel;Promise.prototype._attachCancellationCallback=cancellationAttachCancellationCallback;Promise.prototype._execute=cancellationExecute;propagateFromFunction=cancellationPropagateFrom;config.cancellation=true;}
if("monitoring"in opts){if(opts.monitoring&&!config.monitoring){config.monitoring=true;Promise.prototype._fireEvent=activeFireEvent;}else if(!opts.monitoring&&config.monitoring){config.monitoring=false;Promise.prototype._fireEvent=defaultFireEvent;}}
return Promise;};function defaultFireEvent(){return false;}
Promise.prototype._fireEvent=defaultFireEvent;Promise.prototype._execute=function(executor,resolve,reject){try{executor(resolve,reject);}catch(e){return e;}};Promise.prototype._onCancel=function(){};Promise.prototype._setOnCancel=function(handler){;};Promise.prototype._attachCancellationCallback=function(onCancel){;};Promise.prototype._captureStackTrace=function(){};Promise.prototype._attachExtraTrace=function(){};Promise.prototype._dereferenceTrace=function(){};Promise.prototype._clearCancellationData=function(){};Promise.prototype._propagateFrom=function(parent,flags){;;};function cancellationExecute(executor,resolve,reject){var promise=this;try{executor(resolve,reject,function(onCancel){if(typeof onCancel!=="function"){throw new TypeError("onCancel must be a function, got: "+
util.toString(onCancel));}
promise._attachCancellationCallback(onCancel);});}catch(e){return e;}}
function cancellationAttachCancellationCallback(onCancel){if(!this._isCancellable())return this;var previousOnCancel=this._onCancel();if(previousOnCancel!==undefined){if(util.isArray(previousOnCancel)){previousOnCancel.push(onCancel);}else{this._setOnCancel([previousOnCancel,onCancel]);}}else{this._setOnCancel(onCancel);}}
function cancellationOnCancel(){return this._onCancelField;}
function cancellationSetOnCancel(onCancel){this._onCancelField=onCancel;}
function cancellationClearCancellationData(){this._cancellationParent=undefined;this._onCancelField=undefined;}
function cancellationPropagateFrom(parent,flags){if((flags&1)!==0){this._cancellationParent=parent;var branchesRemainingToCancel=parent._branchesRemainingToCancel;if(branchesRemainingToCancel===undefined){branchesRemainingToCancel=0;}
parent._branchesRemainingToCancel=branchesRemainingToCancel+1;}
if((flags&2)!==0&&parent._isBound()){this._setBoundTo(parent._boundTo);}}
function bindingPropagateFrom(parent,flags){if((flags&2)!==0&&parent._isBound()){this._setBoundTo(parent._boundTo);}}
var propagateFromFunction=bindingPropagateFrom;function boundValueFunction(){var ret=this._boundTo;if(ret!==undefined){if(ret instanceof Promise){if(ret.isFulfilled()){return ret.value();}else{return undefined;}}}
return ret;}
function longStackTracesCaptureStackTrace(){this._trace=new CapturedTrace(this._peekContext());}
function longStackTracesAttachExtraTrace(error,ignoreSelf){if(canAttachTrace(error)){var trace=this._trace;if(trace!==undefined){if(ignoreSelf)trace=trace._parent;}
if(trace!==undefined){trace.attachExtraTrace(error);}else if(!error.__stackCleaned__){var parsed=parseStackAndMessage(error);util.notEnumerableProp(error,"stack",parsed.message+"\n"+parsed.stack.join("\n"));util.notEnumerableProp(error,"__stackCleaned__",true);}}}
function longStackTracesDereferenceTrace(){this._trace=undefined;}
function checkForgottenReturns(returnValue,promiseCreated,name,promise,parent){if(returnValue===undefined&&promiseCreated!==null&&wForgottenReturn){if(parent!==undefined&&parent._returnedNonUndefined())return;if((promise._bitField&65535)===0)return;if(name)name=name+" ";var handlerLine="";var creatorLine="";if(promiseCreated._trace){var traceLines=promiseCreated._trace.stack.split("\n");var stack=cleanStack(traceLines);for(var i=stack.length-1;i>=0;--i){var line=stack[i];if(!nodeFramePattern.test(line)){var lineMatches=line.match(parseLinePattern);if(lineMatches){handlerLine="at "+lineMatches[1]+
":"+lineMatches[2]+":"+lineMatches[3]+" ";}
break;}}
if(stack.length>0){var firstUserLine=stack[0];for(var i=0;i<traceLines.length;++i){if(traceLines[i]===firstUserLine){if(i>0){creatorLine="\n"+traceLines[i-1];}
break;}}}}
var msg="a promise was created in a "+name+
"handler "+handlerLine+"but was not returned from it, "+
"see http://goo.gl/rRqMUw"+
creatorLine;promise._warn(msg,true,promiseCreated);}}
function deprecated(name,replacement){var message=name+
" is deprecated and will be removed in a future version.";if(replacement)message+=" Use "+replacement+" instead.";return warn(message);}
function warn(message,shouldUseOwnTrace,promise){if(!config.warnings)return;var warning=new Warning(message);var ctx;if(shouldUseOwnTrace){promise._attachExtraTrace(warning);}else if(config.longStackTraces&&(ctx=Promise._peekContext())){ctx.attachExtraTrace(warning);}else{var parsed=parseStackAndMessage(warning);warning.stack=parsed.message+"\n"+parsed.stack.join("\n");}
if(!activeFireEvent("warning",warning)){formatAndLogError(warning,"",true);}}
function reconstructStack(message,stacks){for(var i=0;i<stacks.length-1;++i){stacks[i].push("From previous event:");stacks[i]=stacks[i].join("\n");}
if(i<stacks.length){stacks[i]=stacks[i].join("\n");}
return message+"\n"+stacks.join("\n");}
function removeDuplicateOrEmptyJumps(stacks){for(var i=0;i<stacks.length;++i){if(stacks[i].length===0||((i+1<stacks.length)&&stacks[i][0]===stacks[i+1][0])){stacks.splice(i,1);i--;}}}
function removeCommonRoots(stacks){var current=stacks[0];for(var i=1;i<stacks.length;++i){var prev=stacks[i];var currentLastIndex=current.length-1;var currentLastLine=current[currentLastIndex];var commonRootMeetPoint=-1;for(var j=prev.length-1;j>=0;--j){if(prev[j]===currentLastLine){commonRootMeetPoint=j;break;}}
for(var j=commonRootMeetPoint;j>=0;--j){var line=prev[j];if(current[currentLastIndex]===line){current.pop();currentLastIndex--;}else{break;}}
current=prev;}}
function cleanStack(stack){var ret=[];for(var i=0;i<stack.length;++i){var line=stack[i];var isTraceLine="    (No stack trace)"===line||stackFramePattern.test(line);var isInternalFrame=isTraceLine&&shouldIgnore(line);if(isTraceLine&&!isInternalFrame){if(indentStackFrames&&line.charAt(0)!==" "){line="    "+line;}
ret.push(line);}}
return ret;}
function stackFramesAsArray(error){var stack=error.stack.replace(/\s+$/g,"").split("\n");for(var i=0;i<stack.length;++i){var line=stack[i];if("    (No stack trace)"===line||stackFramePattern.test(line)){break;}}
if(i>0&&error.name!="SyntaxError"){stack=stack.slice(i);}
return stack;}
function parseStackAndMessage(error){var stack=error.stack;var message=error.toString();stack=typeof stack==="string"&&stack.length>0?stackFramesAsArray(error):["    (No stack trace)"];return{message:message,stack:error.name=="SyntaxError"?stack:cleanStack(stack)};}
function formatAndLogError(error,title,isSoft){if(typeof console!=="undefined"){var message;if(util.isObject(error)){var stack=error.stack;message=title+formatStack(stack,error);}else{message=title+String(error);}
if(typeof printWarning==="function"){printWarning(message,isSoft);}else if(typeof console.log==="function"||typeof console.log==="object"){console.log(message);}}}
function fireRejectionEvent(name,localHandler,reason,promise){var localEventFired=false;try{if(typeof localHandler==="function"){localEventFired=true;if(name==="rejectionHandled"){localHandler(promise);}else{localHandler(reason,promise);}}}catch(e){async.throwLater(e);}
if(name==="unhandledRejection"){if(!activeFireEvent(name,reason,promise)&&!localEventFired){formatAndLogError(reason,"Unhandled rejection ");}}else{activeFireEvent(name,promise);}}
function formatNonError(obj){var str;if(typeof obj==="function"){str="[function "+
(obj.name||"anonymous")+
"]";}else{str=obj&&typeof obj.toString==="function"?obj.toString():util.toString(obj);var ruselessToString=/\[object [a-zA-Z0-9$_]+\]/;if(ruselessToString.test(str)){try{var newStr=JSON.stringify(obj);str=newStr;}
catch(e){}}
if(str.length===0){str="(empty array)";}}
return("(<"+snip(str)+">, no stack trace)");}
function snip(str){var maxChars=41;if(str.length<maxChars){return str;}
return str.substr(0,maxChars-3)+"...";}
function longStackTracesIsSupported(){return typeof captureStackTrace==="function";}
var shouldIgnore=function(){return false;};var parseLineInfoRegex=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function parseLineInfo(line){var matches=line.match(parseLineInfoRegex);if(matches){return{fileName:matches[1],line:parseInt(matches[2],10)};}}
function setBounds(firstLineError,lastLineError){if(!longStackTracesIsSupported())return;var firstStackLines=firstLineError.stack.split("\n");var lastStackLines=lastLineError.stack.split("\n");var firstIndex=-1;var lastIndex=-1;var firstFileName;var lastFileName;for(var i=0;i<firstStackLines.length;++i){var result=parseLineInfo(firstStackLines[i]);if(result){firstFileName=result.fileName;firstIndex=result.line;break;}}
for(var i=0;i<lastStackLines.length;++i){var result=parseLineInfo(lastStackLines[i]);if(result){lastFileName=result.fileName;lastIndex=result.line;break;}}
if(firstIndex<0||lastIndex<0||!firstFileName||!lastFileName||firstFileName!==lastFileName||firstIndex>=lastIndex){return;}
shouldIgnore=function(line){if(bluebirdFramePattern.test(line))return true;var info=parseLineInfo(line);if(info){if(info.fileName===firstFileName&&(firstIndex<=info.line&&info.line<=lastIndex)){return true;}}
return false;};}
function CapturedTrace(parent){this._parent=parent;this._promisesCreated=0;var length=this._length=1+(parent===undefined?0:parent._length);captureStackTrace(this,CapturedTrace);if(length>32)this.uncycle();}
util.inherits(CapturedTrace,Error);Context.CapturedTrace=CapturedTrace;CapturedTrace.prototype.uncycle=function(){var length=this._length;if(length<2)return;var nodes=[];var stackToIndex={};for(var i=0,node=this;node!==undefined;++i){nodes.push(node);node=node._parent;}
length=this._length=i;for(var i=length-1;i>=0;--i){var stack=nodes[i].stack;if(stackToIndex[stack]===undefined){stackToIndex[stack]=i;}}
for(var i=0;i<length;++i){var currentStack=nodes[i].stack;var index=stackToIndex[currentStack];if(index!==undefined&&index!==i){if(index>0){nodes[index-1]._parent=undefined;nodes[index-1]._length=1;}
nodes[i]._parent=undefined;nodes[i]._length=1;var cycleEdgeNode=i>0?nodes[i-1]:this;if(index<length-1){cycleEdgeNode._parent=nodes[index+1];cycleEdgeNode._parent.uncycle();cycleEdgeNode._length=cycleEdgeNode._parent._length+1;}else{cycleEdgeNode._parent=undefined;cycleEdgeNode._length=1;}
var currentChildLength=cycleEdgeNode._length+1;for(var j=i-2;j>=0;--j){nodes[j]._length=currentChildLength;currentChildLength++;}
return;}}};CapturedTrace.prototype.attachExtraTrace=function(error){if(error.__stackCleaned__)return;this.uncycle();var parsed=parseStackAndMessage(error);var message=parsed.message;var stacks=[parsed.stack];var trace=this;while(trace!==undefined){stacks.push(cleanStack(trace.stack.split("\n")));trace=trace._parent;}
removeCommonRoots(stacks);removeDuplicateOrEmptyJumps(stacks);util.notEnumerableProp(error,"stack",reconstructStack(message,stacks));util.notEnumerableProp(error,"__stackCleaned__",true);};var captureStackTrace=(function stackDetection(){var v8stackFramePattern=/^\s*at\s*/;var v8stackFormatter=function(stack,error){if(typeof stack==="string")return stack;if(error.name!==undefined&&error.message!==undefined){return error.toString();}
return formatNonError(error);};if(typeof Error.stackTraceLimit==="number"&&typeof Error.captureStackTrace==="function"){Error.stackTraceLimit+=6;stackFramePattern=v8stackFramePattern;formatStack=v8stackFormatter;var captureStackTrace=Error.captureStackTrace;shouldIgnore=function(line){return bluebirdFramePattern.test(line);};return function(receiver,ignoreUntil){Error.stackTraceLimit+=6;captureStackTrace(receiver,ignoreUntil);Error.stackTraceLimit-=6;};}
var err=new Error();if(typeof err.stack==="string"&&err.stack.split("\n")[0].indexOf("stackDetection@")>=0){stackFramePattern=/@/;formatStack=v8stackFormatter;indentStackFrames=true;return function captureStackTrace(o){o.stack=new Error().stack;};}
var hasStackAfterThrow;try{throw new Error();}
catch(e){hasStackAfterThrow=("stack"in e);}
if(!("stack"in err)&&hasStackAfterThrow&&typeof Error.stackTraceLimit==="number"){stackFramePattern=v8stackFramePattern;formatStack=v8stackFormatter;return function captureStackTrace(o){Error.stackTraceLimit+=6;try{throw new Error();}
catch(e){o.stack=e.stack;}
Error.stackTraceLimit-=6;};}
formatStack=function(stack,error){if(typeof stack==="string")return stack;if((typeof error==="object"||typeof error==="function")&&error.name!==undefined&&error.message!==undefined){return error.toString();}
return formatNonError(error);};return null;})([]);if(typeof console!=="undefined"&&typeof console.warn!=="undefined"){printWarning=function(message){console.warn(message);};if(util.isNode&&process.stderr.isTTY){printWarning=function(message,isSoft){var color=isSoft?"\u001b[33m":"\u001b[31m";console.warn(color+message+"\u001b[0m\n");};}else if(!util.isNode&&typeof(new Error().stack)==="string"){printWarning=function(message,isSoft){console.warn("%c"+message,isSoft?"color: darkorange":"color: red");};}}
var config={warnings:warnings,longStackTraces:false,cancellation:false,monitoring:false};if(longStackTraces)Promise.longStackTraces();return{longStackTraces:function(){return config.longStackTraces;},warnings:function(){return config.warnings;},cancellation:function(){return config.cancellation;},monitoring:function(){return config.monitoring;},propagateFromFunction:function(){return propagateFromFunction;},boundValueFunction:function(){return boundValueFunction;},checkForgottenReturns:checkForgottenReturns,setBounds:setBounds,warn:warn,deprecated:deprecated,CapturedTrace:CapturedTrace,fireDomEvent:fireDomEvent,fireGlobalEvent:fireGlobalEvent};};},{"./errors":12,"./es5":13,"./util":36}],10:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise){function returner(){return this.value;}
function thrower(){throw this.reason;}
Promise.prototype["return"]=Promise.prototype.thenReturn=function(value){if(value instanceof Promise)value.suppressUnhandledRejections();return this._then(returner,undefined,undefined,{value:value},undefined);};Promise.prototype["throw"]=Promise.prototype.thenThrow=function(reason){return this._then(thrower,undefined,undefined,{reason:reason},undefined);};Promise.prototype.catchThrow=function(reason){if(arguments.length<=1){return this._then(undefined,thrower,undefined,{reason:reason},undefined);}else{var _reason=arguments[1];var handler=function(){throw _reason;};return this.caught(reason,handler);}};Promise.prototype.catchReturn=function(value){if(arguments.length<=1){if(value instanceof Promise)value.suppressUnhandledRejections();return this._then(undefined,returner,undefined,{value:value},undefined);}else{var _value=arguments[1];if(_value instanceof Promise)_value.suppressUnhandledRejections();var handler=function(){return _value;};return this.caught(value,handler);}};};},{}],11:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL){var PromiseReduce=Promise.reduce;var PromiseAll=Promise.all;function promiseAllThis(){return PromiseAll(this);}
function PromiseMapSeries(promises,fn){return PromiseReduce(promises,fn,INTERNAL,INTERNAL);}
Promise.prototype.each=function(fn){return PromiseReduce(this,fn,INTERNAL,0)._then(promiseAllThis,undefined,undefined,this,undefined);};Promise.prototype.mapSeries=function(fn){return PromiseReduce(this,fn,INTERNAL,INTERNAL);};Promise.each=function(promises,fn){return PromiseReduce(promises,fn,INTERNAL,0)._then(promiseAllThis,undefined,undefined,promises,undefined);};Promise.mapSeries=PromiseMapSeries;};},{}],12:[function(_dereq_,module,exports){"use strict";var es5=_dereq_("./es5");var Objectfreeze=es5.freeze;var util=_dereq_("./util");var inherits=util.inherits;var notEnumerableProp=util.notEnumerableProp;function subError(nameProperty,defaultMessage){function SubError(message){if(!(this instanceof SubError))return new SubError(message);notEnumerableProp(this,"message",typeof message==="string"?message:defaultMessage);notEnumerableProp(this,"name",nameProperty);if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor);}else{Error.call(this);}}
inherits(SubError,Error);return SubError;}
var _TypeError,_RangeError;var Warning=subError("Warning","warning");var CancellationError=subError("CancellationError","cancellation error");var TimeoutError=subError("TimeoutError","timeout error");var AggregateError=subError("AggregateError","aggregate error");try{_TypeError=TypeError;_RangeError=RangeError;}catch(e){_TypeError=subError("TypeError","type error");_RangeError=subError("RangeError","range error");}
var methods=("join pop push shift unshift slice filter forEach some "+
"every map indexOf lastIndexOf reduce reduceRight sort reverse").split(" ");for(var i=0;i<methods.length;++i){if(typeof Array.prototype[methods[i]]==="function"){AggregateError.prototype[methods[i]]=Array.prototype[methods[i]];}}
es5.defineProperty(AggregateError.prototype,"length",{value:0,configurable:false,writable:true,enumerable:true});AggregateError.prototype["isOperational"]=true;var level=0;AggregateError.prototype.toString=function(){var indent=Array(level*4+1).join(" ");var ret="\n"+indent+"AggregateError of:"+"\n";level++;indent=Array(level*4+1).join(" ");for(var i=0;i<this.length;++i){var str=this[i]===this?"[Circular AggregateError]":this[i]+"";var lines=str.split("\n");for(var j=0;j<lines.length;++j){lines[j]=indent+lines[j];}
str=lines.join("\n");ret+=str+"\n";}
level--;return ret;};function OperationalError(message){if(!(this instanceof OperationalError))
return new OperationalError(message);notEnumerableProp(this,"name","OperationalError");notEnumerableProp(this,"message",message);this.cause=message;this["isOperational"]=true;if(message instanceof Error){notEnumerableProp(this,"message",message.message);notEnumerableProp(this,"stack",message.stack);}else if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor);}}
inherits(OperationalError,Error);var errorTypes=Error["__BluebirdErrorTypes__"];if(!errorTypes){errorTypes=Objectfreeze({CancellationError:CancellationError,TimeoutError:TimeoutError,OperationalError:OperationalError,RejectionError:OperationalError,AggregateError:AggregateError});es5.defineProperty(Error,"__BluebirdErrorTypes__",{value:errorTypes,writable:false,enumerable:false,configurable:false});}
module.exports={Error:Error,TypeError:_TypeError,RangeError:_RangeError,CancellationError:errorTypes.CancellationError,OperationalError:errorTypes.OperationalError,TimeoutError:errorTypes.TimeoutError,AggregateError:errorTypes.AggregateError,Warning:Warning};},{"./es5":13,"./util":36}],13:[function(_dereq_,module,exports){var isES5=(function(){"use strict";return this===undefined;})();if(isES5){module.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:isES5,propertyIsWritable:function(obj,prop){var descriptor=Object.getOwnPropertyDescriptor(obj,prop);return!!(!descriptor||descriptor.writable||descriptor.set);}};}else{var has={}.hasOwnProperty;var str={}.toString;var proto={}.constructor.prototype;var ObjectKeys=function(o){var ret=[];for(var key in o){if(has.call(o,key)){ret.push(key);}}
return ret;};var ObjectGetDescriptor=function(o,key){return{value:o[key]};};var ObjectDefineProperty=function(o,key,desc){o[key]=desc.value;return o;};var ObjectFreeze=function(obj){return obj;};var ObjectGetPrototypeOf=function(obj){try{return Object(obj).constructor.prototype;}
catch(e){return proto;}};var ArrayIsArray=function(obj){try{return str.call(obj)==="[object Array]";}
catch(e){return false;}};module.exports={isArray:ArrayIsArray,keys:ObjectKeys,names:ObjectKeys,defineProperty:ObjectDefineProperty,getDescriptor:ObjectGetDescriptor,freeze:ObjectFreeze,getPrototypeOf:ObjectGetPrototypeOf,isES5:isES5,propertyIsWritable:function(){return true;}};}},{}],14:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL){var PromiseMap=Promise.map;Promise.prototype.filter=function(fn,options){return PromiseMap(this,fn,options,INTERNAL);};Promise.filter=function(promises,fn,options){return PromiseMap(promises,fn,options,INTERNAL);};};},{}],15:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,tryConvertToPromise,NEXT_FILTER){var util=_dereq_("./util");var CancellationError=Promise.CancellationError;var errorObj=util.errorObj;var catchFilter=_dereq_("./catch_filter")(NEXT_FILTER);function PassThroughHandlerContext(promise,type,handler){this.promise=promise;this.type=type;this.handler=handler;this.called=false;this.cancelPromise=null;}
PassThroughHandlerContext.prototype.isFinallyHandler=function(){return this.type===0;};function FinallyHandlerCancelReaction(finallyHandler){this.finallyHandler=finallyHandler;}
FinallyHandlerCancelReaction.prototype._resultCancelled=function(){checkCancel(this.finallyHandler);};function checkCancel(ctx,reason){if(ctx.cancelPromise!=null){if(arguments.length>1){ctx.cancelPromise._reject(reason);}else{ctx.cancelPromise._cancel();}
ctx.cancelPromise=null;return true;}
return false;}
function succeed(){return finallyHandler.call(this,this.promise._target()._settledValue());}
function fail(reason){if(checkCancel(this,reason))return;errorObj.e=reason;return errorObj;}
function finallyHandler(reasonOrValue){var promise=this.promise;var handler=this.handler;if(!this.called){this.called=true;var ret=this.isFinallyHandler()?handler.call(promise._boundValue()):handler.call(promise._boundValue(),reasonOrValue);if(ret===NEXT_FILTER){return ret;}else if(ret!==undefined){promise._setReturnedNonUndefined();var maybePromise=tryConvertToPromise(ret,promise);if(maybePromise instanceof Promise){if(this.cancelPromise!=null){if(maybePromise._isCancelled()){var reason=new CancellationError("late cancellation observer");promise._attachExtraTrace(reason);errorObj.e=reason;return errorObj;}else if(maybePromise.isPending()){maybePromise._attachCancellationCallback(new FinallyHandlerCancelReaction(this));}}
return maybePromise._then(succeed,fail,undefined,this,undefined);}}}
if(promise.isRejected()){checkCancel(this);errorObj.e=reasonOrValue;return errorObj;}else{checkCancel(this);return reasonOrValue;}}
Promise.prototype._passThrough=function(handler,type,success,fail){if(typeof handler!=="function")return this.then();return this._then(success,fail,undefined,new PassThroughHandlerContext(this,type,handler),undefined);};Promise.prototype.lastly=Promise.prototype["finally"]=function(handler){return this._passThrough(handler,0,finallyHandler,finallyHandler);};Promise.prototype.tap=function(handler){return this._passThrough(handler,1,finallyHandler);};Promise.prototype.tapCatch=function(handlerOrPredicate){var len=arguments.length;if(len===1){return this._passThrough(handlerOrPredicate,1,undefined,finallyHandler);}else{var catchInstances=new Array(len-1),j=0,i;for(i=0;i<len-1;++i){var item=arguments[i];if(util.isObject(item)){catchInstances[j++]=item;}else{return Promise.reject(new TypeError("tapCatch statement predicate: "
+"expecting an object but got "+util.classString(item)));}}
catchInstances.length=j;var handler=arguments[i];return this._passThrough(catchFilter(catchInstances,handler,this),1,undefined,finallyHandler);}};return PassThroughHandlerContext;};},{"./catch_filter":7,"./util":36}],16:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,apiRejection,INTERNAL,tryConvertToPromise,Proxyable,debug){var errors=_dereq_("./errors");var TypeError=errors.TypeError;var util=_dereq_("./util");var errorObj=util.errorObj;var tryCatch=util.tryCatch;var yieldHandlers=[];function promiseFromYieldHandler(value,yieldHandlers,traceParent){for(var i=0;i<yieldHandlers.length;++i){traceParent._pushContext();var result=tryCatch(yieldHandlers[i])(value);traceParent._popContext();if(result===errorObj){traceParent._pushContext();var ret=Promise.reject(errorObj.e);traceParent._popContext();return ret;}
var maybePromise=tryConvertToPromise(result,traceParent);if(maybePromise instanceof Promise)return maybePromise;}
return null;}
function PromiseSpawn(generatorFunction,receiver,yieldHandler,stack){if(debug.cancellation()){var internal=new Promise(INTERNAL);var _finallyPromise=this._finallyPromise=new Promise(INTERNAL);this._promise=internal.lastly(function(){return _finallyPromise;});internal._captureStackTrace();internal._setOnCancel(this);}else{var promise=this._promise=new Promise(INTERNAL);promise._captureStackTrace();}
this._stack=stack;this._generatorFunction=generatorFunction;this._receiver=receiver;this._generator=undefined;this._yieldHandlers=typeof yieldHandler==="function"?[yieldHandler].concat(yieldHandlers):yieldHandlers;this._yieldedPromise=null;this._cancellationPhase=false;}
util.inherits(PromiseSpawn,Proxyable);PromiseSpawn.prototype._isResolved=function(){return this._promise===null;};PromiseSpawn.prototype._cleanup=function(){this._promise=this._generator=null;if(debug.cancellation()&&this._finallyPromise!==null){this._finallyPromise._fulfill();this._finallyPromise=null;}};PromiseSpawn.prototype._promiseCancelled=function(){if(this._isResolved())return;var implementsReturn=typeof this._generator["return"]!=="undefined";var result;if(!implementsReturn){var reason=new Promise.CancellationError("generator .return() sentinel");Promise.coroutine.returnSentinel=reason;this._promise._attachExtraTrace(reason);this._promise._pushContext();result=tryCatch(this._generator["throw"]).call(this._generator,reason);this._promise._popContext();}else{this._promise._pushContext();result=tryCatch(this._generator["return"]).call(this._generator,undefined);this._promise._popContext();}
this._cancellationPhase=true;this._yieldedPromise=null;this._continue(result);};PromiseSpawn.prototype._promiseFulfilled=function(value){this._yieldedPromise=null;this._promise._pushContext();var result=tryCatch(this._generator.next).call(this._generator,value);this._promise._popContext();this._continue(result);};PromiseSpawn.prototype._promiseRejected=function(reason){this._yieldedPromise=null;this._promise._attachExtraTrace(reason);this._promise._pushContext();var result=tryCatch(this._generator["throw"]).call(this._generator,reason);this._promise._popContext();this._continue(result);};PromiseSpawn.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof Promise){var promise=this._yieldedPromise;this._yieldedPromise=null;promise.cancel();}};PromiseSpawn.prototype.promise=function(){return this._promise;};PromiseSpawn.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver);this._receiver=this._generatorFunction=undefined;this._promiseFulfilled(undefined);};PromiseSpawn.prototype._continue=function(result){var promise=this._promise;if(result===errorObj){this._cleanup();if(this._cancellationPhase){return promise.cancel();}else{return promise._rejectCallback(result.e,false);}}
var value=result.value;if(result.done===true){this._cleanup();if(this._cancellationPhase){return promise.cancel();}else{return promise._resolveCallback(value);}}else{var maybePromise=tryConvertToPromise(value,this._promise);if(!(maybePromise instanceof Promise)){maybePromise=promiseFromYieldHandler(maybePromise,this._yieldHandlers,this._promise);if(maybePromise===null){this._promiseRejected(new TypeError("A value %s was yielded that could not be treated as a promise\u000a\u000a    See http://goo.gl/MqrFmX\u000a\u000a".replace("%s",String(value))+
"From coroutine:\u000a"+
this._stack.split("\n").slice(1,-7).join("\n")));return;}}
maybePromise=maybePromise._target();var bitField=maybePromise._bitField;;if(((bitField&50397184)===0)){this._yieldedPromise=maybePromise;maybePromise._proxy(this,null);}else if(((bitField&33554432)!==0)){Promise._async.invoke(this._promiseFulfilled,this,maybePromise._value());}else if(((bitField&16777216)!==0)){Promise._async.invoke(this._promiseRejected,this,maybePromise._reason());}else{this._promiseCancelled();}}};Promise.coroutine=function(generatorFunction,options){if(typeof generatorFunction!=="function"){throw new TypeError("generatorFunction must be a function\u000a\u000a    See http://goo.gl/MqrFmX\u000a");}
var yieldHandler=Object(options).yieldHandler;var PromiseSpawn$=PromiseSpawn;var stack=new Error().stack;return function(){var generator=generatorFunction.apply(this,arguments);var spawn=new PromiseSpawn$(undefined,undefined,yieldHandler,stack);var ret=spawn.promise();spawn._generator=generator;spawn._promiseFulfilled(undefined);return ret;};};Promise.coroutine.addYieldHandler=function(fn){if(typeof fn!=="function"){throw new TypeError("expecting a function but got "+util.classString(fn));}
yieldHandlers.push(fn);};Promise.spawn=function(generatorFunction){debug.deprecated("Promise.spawn()","Promise.coroutine()");if(typeof generatorFunction!=="function"){return apiRejection("generatorFunction must be a function\u000a\u000a    See http://goo.gl/MqrFmX\u000a");}
var spawn=new PromiseSpawn(generatorFunction,this);var ret=spawn.promise();spawn._run(Promise.spawn);return ret;};};},{"./errors":12,"./util":36}],17:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,PromiseArray,tryConvertToPromise,INTERNAL,async,getDomain){var util=_dereq_("./util");var canEvaluate=util.canEvaluate;var tryCatch=util.tryCatch;var errorObj=util.errorObj;var reject;if(false){if(canEvaluate){var thenCallback=function(i){return new Function("value","holder","                             \n\
            'use strict';                                                    \n\
            holder.pIndex = value;                                           \n\
            holder.checkFulfillment(this);                                   \n\
            ".replace(/Index/g,i));};var promiseSetter=function(i){return new Function("promise","holder","                           \n\
            'use strict';                                                    \n\
            holder.pIndex = promise;                                         \n\
            ".replace(/Index/g,i));};var generateHolderClass=function(total){var props=new Array(total);for(var i=0;i<props.length;++i){props[i]="this.p"+(i+1);}
var assignment=props.join(" = ")+" = null;";var cancellationCode="var promise;\n"+props.map(function(prop){return "                                                         \n\
                promise = "+prop+";                                      \n\
                if (promise instanceof Promise) {                            \n\
                    promise.cancel();                                        \n\
                }                                                            \n\
            ";}).join("\n");var passedArguments=props.join(", ");var name="Holder$"+total;var code="return function(tryCatch, errorObj, Promise, async) {    \n\
            'use strict';                                                    \n\
            function [TheName](fn) {                                         \n\
                [TheProperties]                                              \n\
                this.fn = fn;                                                \n\
                this.asyncNeeded = true;                                     \n\
                this.now = 0;                                                \n\
            }                                                                \n\
                                                                             \n\
            [TheName].prototype._callFunction = function(promise) {          \n\
                promise._pushContext();                                      \n\
                var ret = tryCatch(this.fn)([ThePassedArguments]);           \n\
                promise._popContext();                                       \n\
                if (ret === errorObj) {                                      \n\
                    promise._rejectCallback(ret.e, false);                   \n\
                } else {                                                     \n\
                    promise._resolveCallback(ret);                           \n\
                }                                                            \n\
            };                                                               \n\
                                                                             \n\
            [TheName].prototype.checkFulfillment = function(promise) {       \n\
                var now = ++this.now;                                        \n\
                if (now === [TheTotal]) {                                    \n\
                    if (this.asyncNeeded) {                                  \n\
                        async.invoke(this._callFunction, this, promise);     \n\
                    } else {                                                 \n\
                        this._callFunction(promise);                         \n\
                    }                                                        \n\
                                                                             \n\
                }                                                            \n\
            };                                                               \n\
                                                                             \n\
            [TheName].prototype._resultCancelled = function() {              \n\
                [CancellationCode]                                           \n\
            };                                                               \n\
                                                                             \n\
            return [TheName];                                                \n\
        }(tryCatch, errorObj, Promise, async);                               \n\
        ";code=code.replace(/\[TheName\]/g,name).replace(/\[TheTotal\]/g,total).replace(/\[ThePassedArguments\]/g,passedArguments).replace(/\[TheProperties\]/g,assignment).replace(/\[CancellationCode\]/g,cancellationCode);return new Function("tryCatch","errorObj","Promise","async",code)
(tryCatch,errorObj,Promise,async);};var holderClasses=[];var thenCallbacks=[];var promiseSetters=[];for(var i=0;i<8;++i){holderClasses.push(generateHolderClass(i+1));thenCallbacks.push(thenCallback(i+1));promiseSetters.push(promiseSetter(i+1));}
reject=function(reason){this._reject(reason);};}}
Promise.join=function(){var last=arguments.length-1;var fn;if(last>0&&typeof arguments[last]==="function"){fn=arguments[last];if(false){if(last<=8&&canEvaluate){var ret=new Promise(INTERNAL);ret._captureStackTrace();var HolderClass=holderClasses[last-1];var holder=new HolderClass(fn);var callbacks=thenCallbacks;for(var i=0;i<last;++i){var maybePromise=tryConvertToPromise(arguments[i],ret);if(maybePromise instanceof Promise){maybePromise=maybePromise._target();var bitField=maybePromise._bitField;;if(((bitField&50397184)===0)){maybePromise._then(callbacks[i],reject,undefined,ret,holder);promiseSetters[i](maybePromise,holder);holder.asyncNeeded=false;}else if(((bitField&33554432)!==0)){callbacks[i].call(ret,maybePromise._value(),holder);}else if(((bitField&16777216)!==0)){ret._reject(maybePromise._reason());}else{ret._cancel();}}else{callbacks[i].call(ret,maybePromise,holder);}}
if(!ret._isFateSealed()){if(holder.asyncNeeded){var domain=getDomain();if(domain!==null){holder.fn=util.domainBind(domain,holder.fn);}}
ret._setAsyncGuaranteed();ret._setOnCancel(holder);}
return ret;}}}
var args=[].slice.call(arguments);;if(fn)args.pop();var ret=new PromiseArray(args).promise();return fn!==undefined?ret.spread(fn):ret;};};},{"./util":36}],18:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,PromiseArray,apiRejection,tryConvertToPromise,INTERNAL,debug){var getDomain=Promise._getDomain;var util=_dereq_("./util");var tryCatch=util.tryCatch;var errorObj=util.errorObj;var async=Promise._async;function MappingPromiseArray(promises,fn,limit,_filter){this.constructor$(promises);this._promise._captureStackTrace();var domain=getDomain();this._callback=domain===null?fn:util.domainBind(domain,fn);this._preservedValues=_filter===INTERNAL?new Array(this.length()):null;this._limit=limit;this._inFlight=0;this._queue=[];async.invoke(this._asyncInit,this,undefined);}
util.inherits(MappingPromiseArray,PromiseArray);MappingPromiseArray.prototype._asyncInit=function(){this._init$(undefined,-2);};MappingPromiseArray.prototype._init=function(){};MappingPromiseArray.prototype._promiseFulfilled=function(value,index){var values=this._values;var length=this.length();var preservedValues=this._preservedValues;var limit=this._limit;if(index<0){index=(index*-1)-1;values[index]=value;if(limit>=1){this._inFlight--;this._drainQueue();if(this._isResolved())return true;}}else{if(limit>=1&&this._inFlight>=limit){values[index]=value;this._queue.push(index);return false;}
if(preservedValues!==null)preservedValues[index]=value;var promise=this._promise;var callback=this._callback;var receiver=promise._boundValue();promise._pushContext();var ret=tryCatch(callback).call(receiver,value,index,length);var promiseCreated=promise._popContext();debug.checkForgottenReturns(ret,promiseCreated,preservedValues!==null?"Promise.filter":"Promise.map",promise);if(ret===errorObj){this._reject(ret.e);return true;}
var maybePromise=tryConvertToPromise(ret,this._promise);if(maybePromise instanceof Promise){maybePromise=maybePromise._target();var bitField=maybePromise._bitField;;if(((bitField&50397184)===0)){if(limit>=1)this._inFlight++;values[index]=maybePromise;maybePromise._proxy(this,(index+1)*-1);return false;}else if(((bitField&33554432)!==0)){ret=maybePromise._value();}else if(((bitField&16777216)!==0)){this._reject(maybePromise._reason());return true;}else{this._cancel();return true;}}
values[index]=ret;}
var totalResolved=++this._totalResolved;if(totalResolved>=length){if(preservedValues!==null){this._filter(values,preservedValues);}else{this._resolve(values);}
return true;}
return false;};MappingPromiseArray.prototype._drainQueue=function(){var queue=this._queue;var limit=this._limit;var values=this._values;while(queue.length>0&&this._inFlight<limit){if(this._isResolved())return;var index=queue.pop();this._promiseFulfilled(values[index],index);}};MappingPromiseArray.prototype._filter=function(booleans,values){var len=values.length;var ret=new Array(len);var j=0;for(var i=0;i<len;++i){if(booleans[i])ret[j++]=values[i];}
ret.length=j;this._resolve(ret);};MappingPromiseArray.prototype.preservedValues=function(){return this._preservedValues;};function map(promises,fn,options,_filter){if(typeof fn!=="function"){return apiRejection("expecting a function but got "+util.classString(fn));}
var limit=0;if(options!==undefined){if(typeof options==="object"&&options!==null){if(typeof options.concurrency!=="number"){return Promise.reject(new TypeError("'concurrency' must be a number but it is "+
util.classString(options.concurrency)));}
limit=options.concurrency;}else{return Promise.reject(new TypeError("options argument must be an object but it is "+
util.classString(options)));}}
limit=typeof limit==="number"&&isFinite(limit)&&limit>=1?limit:0;return new MappingPromiseArray(promises,fn,limit,_filter).promise();}
Promise.prototype.map=function(fn,options){return map(this,fn,options,null);};Promise.map=function(promises,fn,options,_filter){return map(promises,fn,options,_filter);};};},{"./util":36}],19:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL,tryConvertToPromise,apiRejection,debug){var util=_dereq_("./util");var tryCatch=util.tryCatch;Promise.method=function(fn){if(typeof fn!=="function"){throw new Promise.TypeError("expecting a function but got "+util.classString(fn));}
return function(){var ret=new Promise(INTERNAL);ret._captureStackTrace();ret._pushContext();var value=tryCatch(fn).apply(this,arguments);var promiseCreated=ret._popContext();debug.checkForgottenReturns(value,promiseCreated,"Promise.method",ret);ret._resolveFromSyncValue(value);return ret;};};Promise.attempt=Promise["try"]=function(fn){if(typeof fn!=="function"){return apiRejection("expecting a function but got "+util.classString(fn));}
var ret=new Promise(INTERNAL);ret._captureStackTrace();ret._pushContext();var value;if(arguments.length>1){debug.deprecated("calling Promise.try with more than 1 argument");var arg=arguments[1];var ctx=arguments[2];value=util.isArray(arg)?tryCatch(fn).apply(ctx,arg):tryCatch(fn).call(ctx,arg);}else{value=tryCatch(fn)();}
var promiseCreated=ret._popContext();debug.checkForgottenReturns(value,promiseCreated,"Promise.try",ret);ret._resolveFromSyncValue(value);return ret;};Promise.prototype._resolveFromSyncValue=function(value){if(value===util.errorObj){this._rejectCallback(value.e,false);}else{this._resolveCallback(value,true);}};};},{"./util":36}],20:[function(_dereq_,module,exports){"use strict";var util=_dereq_("./util");var maybeWrapAsError=util.maybeWrapAsError;var errors=_dereq_("./errors");var OperationalError=errors.OperationalError;var es5=_dereq_("./es5");function isUntypedError(obj){return obj instanceof Error&&es5.getPrototypeOf(obj)===Error.prototype;}
var rErrorKey=/^(?:name|message|stack|cause)$/;function wrapAsOperationalError(obj){var ret;if(isUntypedError(obj)){ret=new OperationalError(obj);ret.name=obj.name;ret.message=obj.message;ret.stack=obj.stack;var keys=es5.keys(obj);for(var i=0;i<keys.length;++i){var key=keys[i];if(!rErrorKey.test(key)){ret[key]=obj[key];}}
return ret;}
util.markAsOriginatingFromRejection(obj);return obj;}
function nodebackForPromise(promise,multiArgs){return function(err,value){if(promise===null)return;if(err){var wrapped=wrapAsOperationalError(maybeWrapAsError(err));promise._attachExtraTrace(wrapped);promise._reject(wrapped);}else if(!multiArgs){promise._fulfill(value);}else{var args=[].slice.call(arguments,1);;promise._fulfill(args);}
promise=null;};}
module.exports=nodebackForPromise;},{"./errors":12,"./es5":13,"./util":36}],21:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise){var util=_dereq_("./util");var async=Promise._async;var tryCatch=util.tryCatch;var errorObj=util.errorObj;function spreadAdapter(val,nodeback){var promise=this;if(!util.isArray(val))return successAdapter.call(promise,val,nodeback);var ret=tryCatch(nodeback).apply(promise._boundValue(),[null].concat(val));if(ret===errorObj){async.throwLater(ret.e);}}
function successAdapter(val,nodeback){var promise=this;var receiver=promise._boundValue();var ret=val===undefined?tryCatch(nodeback).call(receiver,null):tryCatch(nodeback).call(receiver,null,val);if(ret===errorObj){async.throwLater(ret.e);}}
function errorAdapter(reason,nodeback){var promise=this;if(!reason){var newReason=new Error(reason+"");newReason.cause=reason;reason=newReason;}
var ret=tryCatch(nodeback).call(promise._boundValue(),reason);if(ret===errorObj){async.throwLater(ret.e);}}
Promise.prototype.asCallback=Promise.prototype.nodeify=function(nodeback,options){if(typeof nodeback=="function"){var adapter=successAdapter;if(options!==undefined&&Object(options).spread){adapter=spreadAdapter;}
this._then(adapter,errorAdapter,undefined,this,nodeback);}
return this;};};},{"./util":36}],22:[function(_dereq_,module,exports){"use strict";module.exports=function(){var makeSelfResolutionError=function(){return new TypeError("circular promise resolution chain\u000a\u000a    See http://goo.gl/MqrFmX\u000a");};var reflectHandler=function(){return new Promise.PromiseInspection(this._target());};var apiRejection=function(msg){return Promise.reject(new TypeError(msg));};function Proxyable(){}
var UNDEFINED_BINDING={};var util=_dereq_("./util");var getDomain;if(util.isNode){getDomain=function(){var ret=process.domain;if(ret===undefined)ret=null;return ret;};}else{getDomain=function(){return null;};}
util.notEnumerableProp(Promise,"_getDomain",getDomain);var es5=_dereq_("./es5");var Async=_dereq_("./async");var async=new Async();es5.defineProperty(Promise,"_async",{value:async});var errors=_dereq_("./errors");var TypeError=Promise.TypeError=errors.TypeError;Promise.RangeError=errors.RangeError;var CancellationError=Promise.CancellationError=errors.CancellationError;Promise.TimeoutError=errors.TimeoutError;Promise.OperationalError=errors.OperationalError;Promise.RejectionError=errors.OperationalError;Promise.AggregateError=errors.AggregateError;var INTERNAL=function(){};var APPLY={};var NEXT_FILTER={};var tryConvertToPromise=_dereq_("./thenables")(Promise,INTERNAL);var PromiseArray=_dereq_("./promise_array")(Promise,INTERNAL,tryConvertToPromise,apiRejection,Proxyable);var Context=_dereq_("./context")(Promise);var createContext=Context.create;var debug=_dereq_("./debuggability")(Promise,Context);var CapturedTrace=debug.CapturedTrace;var PassThroughHandlerContext=_dereq_("./finally")(Promise,tryConvertToPromise,NEXT_FILTER);var catchFilter=_dereq_("./catch_filter")(NEXT_FILTER);var nodebackForPromise=_dereq_("./nodeback");var errorObj=util.errorObj;var tryCatch=util.tryCatch;function check(self,executor){if(self==null||self.constructor!==Promise){throw new TypeError("the promise constructor cannot be invoked directly\u000a\u000a    See http://goo.gl/MqrFmX\u000a");}
if(typeof executor!=="function"){throw new TypeError("expecting a function but got "+util.classString(executor));}}
function Promise(executor){if(executor!==INTERNAL){check(this,executor);}
this._bitField=0;this._fulfillmentHandler0=undefined;this._rejectionHandler0=undefined;this._promise0=undefined;this._receiver0=undefined;this._resolveFromExecutor(executor);this._promiseCreated();this._fireEvent("promiseCreated",this);}
Promise.prototype.toString=function(){return "[object Promise]";};Promise.prototype.caught=Promise.prototype["catch"]=function(fn){var len=arguments.length;if(len>1){var catchInstances=new Array(len-1),j=0,i;for(i=0;i<len-1;++i){var item=arguments[i];if(util.isObject(item)){catchInstances[j++]=item;}else{return apiRejection("Catch statement predicate: "+
"expecting an object but got "+util.classString(item));}}
catchInstances.length=j;fn=arguments[i];return this.then(undefined,catchFilter(catchInstances,fn,this));}
return this.then(undefined,fn);};Promise.prototype.reflect=function(){return this._then(reflectHandler,reflectHandler,undefined,this,undefined);};Promise.prototype.then=function(didFulfill,didReject){if(debug.warnings()&&arguments.length>0&&typeof didFulfill!=="function"&&typeof didReject!=="function"){var msg=".then() only accepts functions but was passed: "+
util.classString(didFulfill);if(arguments.length>1){msg+=", "+util.classString(didReject);}
this._warn(msg);}
return this._then(didFulfill,didReject,undefined,undefined,undefined);};Promise.prototype.done=function(didFulfill,didReject){var promise=this._then(didFulfill,didReject,undefined,undefined,undefined);promise._setIsFinal();};Promise.prototype.spread=function(fn){if(typeof fn!=="function"){return apiRejection("expecting a function but got "+util.classString(fn));}
return this.all()._then(fn,undefined,undefined,APPLY,undefined);};Promise.prototype.toJSON=function(){var ret={isFulfilled:false,isRejected:false,fulfillmentValue:undefined,rejectionReason:undefined};if(this.isFulfilled()){ret.fulfillmentValue=this.value();ret.isFulfilled=true;}else if(this.isRejected()){ret.rejectionReason=this.reason();ret.isRejected=true;}
return ret;};Promise.prototype.all=function(){if(arguments.length>0){this._warn(".all() was passed arguments but it does not take any");}
return new PromiseArray(this).promise();};Promise.prototype.error=function(fn){return this.caught(util.originatesFromRejection,fn);};Promise.getNewLibraryCopy=module.exports;Promise.is=function(val){return val instanceof Promise;};Promise.fromNode=Promise.fromCallback=function(fn){var ret=new Promise(INTERNAL);ret._captureStackTrace();var multiArgs=arguments.length>1?!!Object(arguments[1]).multiArgs:false;var result=tryCatch(fn)(nodebackForPromise(ret,multiArgs));if(result===errorObj){ret._rejectCallback(result.e,true);}
if(!ret._isFateSealed())ret._setAsyncGuaranteed();return ret;};Promise.all=function(promises){return new PromiseArray(promises).promise();};Promise.cast=function(obj){var ret=tryConvertToPromise(obj);if(!(ret instanceof Promise)){ret=new Promise(INTERNAL);ret._captureStackTrace();ret._setFulfilled();ret._rejectionHandler0=obj;}
return ret;};Promise.resolve=Promise.fulfilled=Promise.cast;Promise.reject=Promise.rejected=function(reason){var ret=new Promise(INTERNAL);ret._captureStackTrace();ret._rejectCallback(reason,true);return ret;};Promise.setScheduler=function(fn){if(typeof fn!=="function"){throw new TypeError("expecting a function but got "+util.classString(fn));}
return async.setScheduler(fn);};Promise.prototype._then=function(didFulfill,didReject,_,receiver,internalData){var haveInternalData=internalData!==undefined;var promise=haveInternalData?internalData:new Promise(INTERNAL);var target=this._target();var bitField=target._bitField;if(!haveInternalData){promise._propagateFrom(this,3);promise._captureStackTrace();if(receiver===undefined&&((this._bitField&2097152)!==0)){if(!((bitField&50397184)===0)){receiver=this._boundValue();}else{receiver=target===this?undefined:this._boundTo;}}
this._fireEvent("promiseChained",this,promise);}
var domain=getDomain();if(!((bitField&50397184)===0)){var handler,value,settler=target._settlePromiseCtx;if(((bitField&33554432)!==0)){value=target._rejectionHandler0;handler=didFulfill;}else if(((bitField&16777216)!==0)){value=target._fulfillmentHandler0;handler=didReject;target._unsetRejectionIsUnhandled();}else{settler=target._settlePromiseLateCancellationObserver;value=new CancellationError("late cancellation observer");target._attachExtraTrace(value);handler=didReject;}
async.invoke(settler,target,{handler:domain===null?handler:(typeof handler==="function"&&util.domainBind(domain,handler)),promise:promise,receiver:receiver,value:value});}else{target._addCallbacks(didFulfill,didReject,promise,receiver,domain);}
return promise;};Promise.prototype._length=function(){return this._bitField&65535;};Promise.prototype._isFateSealed=function(){return(this._bitField&117506048)!==0;};Promise.prototype._isFollowing=function(){return(this._bitField&67108864)===67108864;};Promise.prototype._setLength=function(len){this._bitField=(this._bitField&-65536)|(len&65535);};Promise.prototype._setFulfilled=function(){this._bitField=this._bitField|33554432;this._fireEvent("promiseFulfilled",this);};Promise.prototype._setRejected=function(){this._bitField=this._bitField|16777216;this._fireEvent("promiseRejected",this);};Promise.prototype._setFollowing=function(){this._bitField=this._bitField|67108864;this._fireEvent("promiseResolved",this);};Promise.prototype._setIsFinal=function(){this._bitField=this._bitField|4194304;};Promise.prototype._isFinal=function(){return(this._bitField&4194304)>0;};Promise.prototype._unsetCancelled=function(){this._bitField=this._bitField&(~65536);};Promise.prototype._setCancelled=function(){this._bitField=this._bitField|65536;this._fireEvent("promiseCancelled",this);};Promise.prototype._setWillBeCancelled=function(){this._bitField=this._bitField|8388608;};Promise.prototype._setAsyncGuaranteed=function(){if(async.hasCustomScheduler())return;this._bitField=this._bitField|134217728;};Promise.prototype._receiverAt=function(index){var ret=index===0?this._receiver0:this[index*4-4+3];if(ret===UNDEFINED_BINDING){return undefined;}else if(ret===undefined&&this._isBound()){return this._boundValue();}
return ret;};Promise.prototype._promiseAt=function(index){return this[index*4-4+2];};Promise.prototype._fulfillmentHandlerAt=function(index){return this[index*4-4+0];};Promise.prototype._rejectionHandlerAt=function(index){return this[index*4-4+1];};Promise.prototype._boundValue=function(){};Promise.prototype._migrateCallback0=function(follower){var bitField=follower._bitField;var fulfill=follower._fulfillmentHandler0;var reject=follower._rejectionHandler0;var promise=follower._promise0;var receiver=follower._receiverAt(0);if(receiver===undefined)receiver=UNDEFINED_BINDING;this._addCallbacks(fulfill,reject,promise,receiver,null);};Promise.prototype._migrateCallbackAt=function(follower,index){var fulfill=follower._fulfillmentHandlerAt(index);var reject=follower._rejectionHandlerAt(index);var promise=follower._promiseAt(index);var receiver=follower._receiverAt(index);if(receiver===undefined)receiver=UNDEFINED_BINDING;this._addCallbacks(fulfill,reject,promise,receiver,null);};Promise.prototype._addCallbacks=function(fulfill,reject,promise,receiver,domain){var index=this._length();if(index>=65535-4){index=0;this._setLength(0);}
if(index===0){this._promise0=promise;this._receiver0=receiver;if(typeof fulfill==="function"){this._fulfillmentHandler0=domain===null?fulfill:util.domainBind(domain,fulfill);}
if(typeof reject==="function"){this._rejectionHandler0=domain===null?reject:util.domainBind(domain,reject);}}else{var base=index*4-4;this[base+2]=promise;this[base+3]=receiver;if(typeof fulfill==="function"){this[base+0]=domain===null?fulfill:util.domainBind(domain,fulfill);}
if(typeof reject==="function"){this[base+1]=domain===null?reject:util.domainBind(domain,reject);}}
this._setLength(index+1);return index;};Promise.prototype._proxy=function(proxyable,arg){this._addCallbacks(undefined,undefined,arg,proxyable,null);};Promise.prototype._resolveCallback=function(value,shouldBind){if(((this._bitField&117506048)!==0))return;if(value===this)
return this._rejectCallback(makeSelfResolutionError(),false);var maybePromise=tryConvertToPromise(value,this);if(!(maybePromise instanceof Promise))return this._fulfill(value);if(shouldBind)this._propagateFrom(maybePromise,2);var promise=maybePromise._target();if(promise===this){this._reject(makeSelfResolutionError());return;}
var bitField=promise._bitField;if(((bitField&50397184)===0)){var len=this._length();if(len>0)promise._migrateCallback0(this);for(var i=1;i<len;++i){promise._migrateCallbackAt(this,i);}
this._setFollowing();this._setLength(0);this._setFollowee(promise);}else if(((bitField&33554432)!==0)){this._fulfill(promise._value());}else if(((bitField&16777216)!==0)){this._reject(promise._reason());}else{var reason=new CancellationError("late cancellation observer");promise._attachExtraTrace(reason);this._reject(reason);}};Promise.prototype._rejectCallback=function(reason,synchronous,ignoreNonErrorWarnings){var trace=util.ensureErrorObject(reason);var hasStack=trace===reason;if(!hasStack&&!ignoreNonErrorWarnings&&debug.warnings()){var message="a promise was rejected with a non-error: "+
util.classString(reason);this._warn(message,true);}
this._attachExtraTrace(trace,synchronous?hasStack:false);this._reject(reason);};Promise.prototype._resolveFromExecutor=function(executor){if(executor===INTERNAL)return;var promise=this;this._captureStackTrace();this._pushContext();var synchronous=true;var r=this._execute(executor,function(value){promise._resolveCallback(value);},function(reason){promise._rejectCallback(reason,synchronous);});synchronous=false;this._popContext();if(r!==undefined){promise._rejectCallback(r,true);}};Promise.prototype._settlePromiseFromHandler=function(handler,receiver,value,promise){var bitField=promise._bitField;if(((bitField&65536)!==0))return;promise._pushContext();var x;if(receiver===APPLY){if(!value||typeof value.length!=="number"){x=errorObj;x.e=new TypeError("cannot .spread() a non-array: "+
util.classString(value));}else{x=tryCatch(handler).apply(this._boundValue(),value);}}else{x=tryCatch(handler).call(receiver,value);}
var promiseCreated=promise._popContext();bitField=promise._bitField;if(((bitField&65536)!==0))return;if(x===NEXT_FILTER){promise._reject(value);}else if(x===errorObj){promise._rejectCallback(x.e,false);}else{debug.checkForgottenReturns(x,promiseCreated,"",promise,this);promise._resolveCallback(x);}};Promise.prototype._target=function(){var ret=this;while(ret._isFollowing())ret=ret._followee();return ret;};Promise.prototype._followee=function(){return this._rejectionHandler0;};Promise.prototype._setFollowee=function(promise){this._rejectionHandler0=promise;};Promise.prototype._settlePromise=function(promise,handler,receiver,value){var isPromise=promise instanceof Promise;var bitField=this._bitField;var asyncGuaranteed=((bitField&134217728)!==0);if(((bitField&65536)!==0)){if(isPromise)promise._invokeInternalOnCancel();if(receiver instanceof PassThroughHandlerContext&&receiver.isFinallyHandler()){receiver.cancelPromise=promise;if(tryCatch(handler).call(receiver,value)===errorObj){promise._reject(errorObj.e);}}else if(handler===reflectHandler){promise._fulfill(reflectHandler.call(receiver));}else if(receiver instanceof Proxyable){receiver._promiseCancelled(promise);}else if(isPromise||promise instanceof PromiseArray){promise._cancel();}else{receiver.cancel();}}else if(typeof handler==="function"){if(!isPromise){handler.call(receiver,value,promise);}else{if(asyncGuaranteed)promise._setAsyncGuaranteed();this._settlePromiseFromHandler(handler,receiver,value,promise);}}else if(receiver instanceof Proxyable){if(!receiver._isResolved()){if(((bitField&33554432)!==0)){receiver._promiseFulfilled(value,promise);}else{receiver._promiseRejected(value,promise);}}}else if(isPromise){if(asyncGuaranteed)promise._setAsyncGuaranteed();if(((bitField&33554432)!==0)){promise._fulfill(value);}else{promise._reject(value);}}};Promise.prototype._settlePromiseLateCancellationObserver=function(ctx){var handler=ctx.handler;var promise=ctx.promise;var receiver=ctx.receiver;var value=ctx.value;if(typeof handler==="function"){if(!(promise instanceof Promise)){handler.call(receiver,value,promise);}else{this._settlePromiseFromHandler(handler,receiver,value,promise);}}else if(promise instanceof Promise){promise._reject(value);}};Promise.prototype._settlePromiseCtx=function(ctx){this._settlePromise(ctx.promise,ctx.handler,ctx.receiver,ctx.value);};Promise.prototype._settlePromise0=function(handler,value,bitField){var promise=this._promise0;var receiver=this._receiverAt(0);this._promise0=undefined;this._receiver0=undefined;this._settlePromise(promise,handler,receiver,value);};Promise.prototype._clearCallbackDataAtIndex=function(index){var base=index*4-4;this[base+2]=this[base+3]=this[base+0]=this[base+1]=undefined;};Promise.prototype._fulfill=function(value){var bitField=this._bitField;if(((bitField&117506048)>>>16))return;if(value===this){var err=makeSelfResolutionError();this._attachExtraTrace(err);return this._reject(err);}
this._setFulfilled();this._rejectionHandler0=value;if((bitField&65535)>0){if(((bitField&134217728)!==0)){this._settlePromises();}else{async.settlePromises(this);}
this._dereferenceTrace();}};Promise.prototype._reject=function(reason){var bitField=this._bitField;if(((bitField&117506048)>>>16))return;this._setRejected();this._fulfillmentHandler0=reason;if(this._isFinal()){return async.fatalError(reason,util.isNode);}
if((bitField&65535)>0){async.settlePromises(this);}else{this._ensurePossibleRejectionHandled();}};Promise.prototype._fulfillPromises=function(len,value){for(var i=1;i<len;i++){var handler=this._fulfillmentHandlerAt(i);var promise=this._promiseAt(i);var receiver=this._receiverAt(i);this._clearCallbackDataAtIndex(i);this._settlePromise(promise,handler,receiver,value);}};Promise.prototype._rejectPromises=function(len,reason){for(var i=1;i<len;i++){var handler=this._rejectionHandlerAt(i);var promise=this._promiseAt(i);var receiver=this._receiverAt(i);this._clearCallbackDataAtIndex(i);this._settlePromise(promise,handler,receiver,reason);}};Promise.prototype._settlePromises=function(){var bitField=this._bitField;var len=(bitField&65535);if(len>0){if(((bitField&16842752)!==0)){var reason=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,reason,bitField);this._rejectPromises(len,reason);}else{var value=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,value,bitField);this._fulfillPromises(len,value);}
this._setLength(0);}
this._clearCancellationData();};Promise.prototype._settledValue=function(){var bitField=this._bitField;if(((bitField&33554432)!==0)){return this._rejectionHandler0;}else if(((bitField&16777216)!==0)){return this._fulfillmentHandler0;}};function deferResolve(v){this.promise._resolveCallback(v);}
function deferReject(v){this.promise._rejectCallback(v,false);}
Promise.defer=Promise.pending=function(){debug.deprecated("Promise.defer","new Promise");var promise=new Promise(INTERNAL);return{promise:promise,resolve:deferResolve,reject:deferReject};};util.notEnumerableProp(Promise,"_makeSelfResolutionError",makeSelfResolutionError);_dereq_("./method")(Promise,INTERNAL,tryConvertToPromise,apiRejection,debug);_dereq_("./bind")(Promise,INTERNAL,tryConvertToPromise,debug);_dereq_("./cancel")(Promise,PromiseArray,apiRejection,debug);_dereq_("./direct_resolve")(Promise);_dereq_("./synchronous_inspection")(Promise);_dereq_("./join")(Promise,PromiseArray,tryConvertToPromise,INTERNAL,async,getDomain);Promise.Promise=Promise;Promise.version="3.5.3";_dereq_('./map.js')(Promise,PromiseArray,apiRejection,tryConvertToPromise,INTERNAL,debug);_dereq_('./call_get.js')(Promise);_dereq_('./using.js')(Promise,apiRejection,tryConvertToPromise,createContext,INTERNAL,debug);_dereq_('./timers.js')(Promise,INTERNAL,debug);_dereq_('./generators.js')(Promise,apiRejection,INTERNAL,tryConvertToPromise,Proxyable,debug);_dereq_('./nodeify.js')(Promise);_dereq_('./promisify.js')(Promise,INTERNAL);_dereq_('./props.js')(Promise,PromiseArray,tryConvertToPromise,apiRejection);_dereq_('./race.js')(Promise,INTERNAL,tryConvertToPromise,apiRejection);_dereq_('./reduce.js')(Promise,PromiseArray,apiRejection,tryConvertToPromise,INTERNAL,debug);_dereq_('./settle.js')(Promise,PromiseArray,debug);_dereq_('./some.js')(Promise,PromiseArray,apiRejection);_dereq_('./filter.js')(Promise,INTERNAL);_dereq_('./each.js')(Promise,INTERNAL);_dereq_('./any.js')(Promise);util.toFastProperties(Promise);util.toFastProperties(Promise.prototype);function fillTypes(value){var p=new Promise(INTERNAL);p._fulfillmentHandler0=value;p._rejectionHandler0=value;p._promise0=value;p._receiver0=value;}
fillTypes({a:1});fillTypes({b:2});fillTypes({c:3});fillTypes(1);fillTypes(function(){});fillTypes(undefined);fillTypes(false);fillTypes(new Promise(INTERNAL));debug.setBounds(Async.firstLineError,util.lastLineError);return Promise;};},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL,tryConvertToPromise,apiRejection,Proxyable){var util=_dereq_("./util");var isArray=util.isArray;function toResolutionValue(val){switch(val){case-2:return[];case-3:return{};case-6:return new Map();}}
function PromiseArray(values){var promise=this._promise=new Promise(INTERNAL);if(values instanceof Promise){promise._propagateFrom(values,3);}
promise._setOnCancel(this);this._values=values;this._length=0;this._totalResolved=0;this._init(undefined,-2);}
util.inherits(PromiseArray,Proxyable);PromiseArray.prototype.length=function(){return this._length;};PromiseArray.prototype.promise=function(){return this._promise;};PromiseArray.prototype._init=function init(_,resolveValueIfEmpty){var values=tryConvertToPromise(this._values,this._promise);if(values instanceof Promise){values=values._target();var bitField=values._bitField;;this._values=values;if(((bitField&50397184)===0)){this._promise._setAsyncGuaranteed();return values._then(init,this._reject,undefined,this,resolveValueIfEmpty);}else if(((bitField&33554432)!==0)){values=values._value();}else if(((bitField&16777216)!==0)){return this._reject(values._reason());}else{return this._cancel();}}
values=util.asArray(values);if(values===null){var err=apiRejection("expecting an array or an iterable object but got "+util.classString(values)).reason();this._promise._rejectCallback(err,false);return;}
if(values.length===0){if(resolveValueIfEmpty===-5){this._resolveEmptyArray();}
else{this._resolve(toResolutionValue(resolveValueIfEmpty));}
return;}
this._iterate(values);};PromiseArray.prototype._iterate=function(values){var len=this.getActualLength(values.length);this._length=len;this._values=this.shouldCopyValues()?new Array(len):this._values;var result=this._promise;var isResolved=false;var bitField=null;for(var i=0;i<len;++i){var maybePromise=tryConvertToPromise(values[i],result);if(maybePromise instanceof Promise){maybePromise=maybePromise._target();bitField=maybePromise._bitField;}else{bitField=null;}
if(isResolved){if(bitField!==null){maybePromise.suppressUnhandledRejections();}}else if(bitField!==null){if(((bitField&50397184)===0)){maybePromise._proxy(this,i);this._values[i]=maybePromise;}else if(((bitField&33554432)!==0)){isResolved=this._promiseFulfilled(maybePromise._value(),i);}else if(((bitField&16777216)!==0)){isResolved=this._promiseRejected(maybePromise._reason(),i);}else{isResolved=this._promiseCancelled(i);}}else{isResolved=this._promiseFulfilled(maybePromise,i);}}
if(!isResolved)result._setAsyncGuaranteed();};PromiseArray.prototype._isResolved=function(){return this._values===null;};PromiseArray.prototype._resolve=function(value){this._values=null;this._promise._fulfill(value);};PromiseArray.prototype._cancel=function(){if(this._isResolved()||!this._promise._isCancellable())return;this._values=null;this._promise._cancel();};PromiseArray.prototype._reject=function(reason){this._values=null;this._promise._rejectCallback(reason,false);};PromiseArray.prototype._promiseFulfilled=function(value,index){this._values[index]=value;var totalResolved=++this._totalResolved;if(totalResolved>=this._length){this._resolve(this._values);return true;}
return false;};PromiseArray.prototype._promiseCancelled=function(){this._cancel();return true;};PromiseArray.prototype._promiseRejected=function(reason){this._totalResolved++;this._reject(reason);return true;};PromiseArray.prototype._resultCancelled=function(){if(this._isResolved())return;var values=this._values;this._cancel();if(values instanceof Promise){values.cancel();}else{for(var i=0;i<values.length;++i){if(values[i]instanceof Promise){values[i].cancel();}}}};PromiseArray.prototype.shouldCopyValues=function(){return true;};PromiseArray.prototype.getActualLength=function(len){return len;};return PromiseArray;};},{"./util":36}],24:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL){var THIS={};var util=_dereq_("./util");var nodebackForPromise=_dereq_("./nodeback");var withAppended=util.withAppended;var maybeWrapAsError=util.maybeWrapAsError;var canEvaluate=util.canEvaluate;var TypeError=_dereq_("./errors").TypeError;var defaultSuffix="Async";var defaultPromisified={__isPromisified__:true};var noCopyProps=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"];var noCopyPropsPattern=new RegExp("^(?:"+noCopyProps.join("|")+")$");var defaultFilter=function(name){return util.isIdentifier(name)&&name.charAt(0)!=="_"&&name!=="constructor";};function propsFilter(key){return!noCopyPropsPattern.test(key);}
function isPromisified(fn){try{return fn.__isPromisified__===true;}
catch(e){return false;}}
function hasPromisified(obj,key,suffix){var val=util.getDataPropertyOrDefault(obj,key+suffix,defaultPromisified);return val?isPromisified(val):false;}
function checkValid(ret,suffix,suffixRegexp){for(var i=0;i<ret.length;i+=2){var key=ret[i];if(suffixRegexp.test(key)){var keyWithoutAsyncSuffix=key.replace(suffixRegexp,"");for(var j=0;j<ret.length;j+=2){if(ret[j]===keyWithoutAsyncSuffix){throw new TypeError("Cannot promisify an API that has normal methods with '%s'-suffix\u000a\u000a    See http://goo.gl/MqrFmX\u000a".replace("%s",suffix));}}}}}
function promisifiableMethods(obj,suffix,suffixRegexp,filter){var keys=util.inheritedDataKeys(obj);var ret=[];for(var i=0;i<keys.length;++i){var key=keys[i];var value=obj[key];var passesDefaultFilter=filter===defaultFilter?true:defaultFilter(key,value,obj);if(typeof value==="function"&&!isPromisified(value)&&!hasPromisified(obj,key,suffix)&&filter(key,value,obj,passesDefaultFilter)){ret.push(key,value);}}
checkValid(ret,suffix,suffixRegexp);return ret;}
var escapeIdentRegex=function(str){return str.replace(/([$])/,"\\$");};var makeNodePromisifiedEval;if(false){var switchCaseArgumentOrder=function(likelyArgumentCount){var ret=[likelyArgumentCount];var min=Math.max(0,likelyArgumentCount-1-3);for(var i=likelyArgumentCount-1;i>=min;--i){ret.push(i);}
for(var i=likelyArgumentCount+1;i<=3;++i){ret.push(i);}
return ret;};var argumentSequence=function(argumentCount){return util.filledRange(argumentCount,"_arg","");};var parameterDeclaration=function(parameterCount){return util.filledRange(Math.max(parameterCount,3),"_arg","");};var parameterCount=function(fn){if(typeof fn.length==="number"){return Math.max(Math.min(fn.length,1023+1),0);}
return 0;};makeNodePromisifiedEval=function(callback,receiver,originalName,fn,_,multiArgs){var newParameterCount=Math.max(0,parameterCount(fn)-1);var argumentOrder=switchCaseArgumentOrder(newParameterCount);var shouldProxyThis=typeof callback==="string"||receiver===THIS;function generateCallForArgumentCount(count){var args=argumentSequence(count).join(", ");var comma=count>0?", ":"";var ret;if(shouldProxyThis){ret="ret = callback.call(this, {{args}}, nodeback); break;\n";}else{ret=receiver===undefined?"ret = callback({{args}}, nodeback); break;\n":"ret = callback.call(receiver, {{args}}, nodeback); break;\n";}
return ret.replace("{{args}}",args).replace(", ",comma);}
function generateArgumentSwitchCase(){var ret="";for(var i=0;i<argumentOrder.length;++i){ret+="case "+argumentOrder[i]+":"+
generateCallForArgumentCount(argumentOrder[i]);}
ret+="                                                             \n\
        default:                                                             \n\
            var args = new Array(len + 1);                                   \n\
            var i = 0;                                                       \n\
            for (var i = 0; i < len; ++i) {                                  \n\
               args[i] = arguments[i];                                       \n\
            }                                                                \n\
            args[i] = nodeback;                                              \n\
            [CodeForCall]                                                    \n\
            break;                                                           \n\
        ".replace("[CodeForCall]",(shouldProxyThis?"ret = callback.apply(this, args);\n":"ret = callback.apply(receiver, args);\n"));return ret;}
var getFunctionCode=typeof callback==="string"?("this != null ? this['"+callback+"'] : fn"):"fn";var body="'use strict';                                                \n\
        var ret = function (Parameters) {                                    \n\
            'use strict';                                                    \n\
            var len = arguments.length;                                      \n\
            var promise = new Promise(INTERNAL);                             \n\
            promise._captureStackTrace();                                    \n\
            var nodeback = nodebackForPromise(promise, "+multiArgs+");   \n\
            var ret;                                                         \n\
            var callback = tryCatch([GetFunctionCode]);                      \n\
            switch(len) {                                                    \n\
                [CodeForSwitchCase]                                          \n\
            }                                                                \n\
            if (ret === errorObj) {                                          \n\
                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\n\
            }                                                                \n\
            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \n\
            return promise;                                                  \n\
        };                                                                   \n\
        notEnumerableProp(ret, '__isPromisified__', true);                   \n\
        return ret;                                                          \n\
    ".replace("[CodeForSwitchCase]",generateArgumentSwitchCase()).replace("[GetFunctionCode]",getFunctionCode);body=body.replace("Parameters",parameterDeclaration(newParameterCount));return new Function("Promise","fn","receiver","withAppended","maybeWrapAsError","nodebackForPromise","tryCatch","errorObj","notEnumerableProp","INTERNAL",body)(Promise,fn,receiver,withAppended,maybeWrapAsError,nodebackForPromise,util.tryCatch,util.errorObj,util.notEnumerableProp,INTERNAL);};}
function makeNodePromisifiedClosure(callback,receiver,_,fn,__,multiArgs){var defaultThis=(function(){return this;})();var method=callback;if(typeof method==="string"){callback=fn;}
function promisified(){var _receiver=receiver;if(receiver===THIS)_receiver=this;var promise=new Promise(INTERNAL);promise._captureStackTrace();var cb=typeof method==="string"&&this!==defaultThis?this[method]:callback;var fn=nodebackForPromise(promise,multiArgs);try{cb.apply(_receiver,withAppended(arguments,fn));}catch(e){promise._rejectCallback(maybeWrapAsError(e),true,true);}
if(!promise._isFateSealed())promise._setAsyncGuaranteed();return promise;}
util.notEnumerableProp(promisified,"__isPromisified__",true);return promisified;}
var makeNodePromisified=canEvaluate?makeNodePromisifiedEval:makeNodePromisifiedClosure;function promisifyAll(obj,suffix,filter,promisifier,multiArgs){var suffixRegexp=new RegExp(escapeIdentRegex(suffix)+"$");var methods=promisifiableMethods(obj,suffix,suffixRegexp,filter);for(var i=0,len=methods.length;i<len;i+=2){var key=methods[i];var fn=methods[i+1];var promisifiedKey=key+suffix;if(promisifier===makeNodePromisified){obj[promisifiedKey]=makeNodePromisified(key,THIS,key,fn,suffix,multiArgs);}else{var promisified=promisifier(fn,function(){return makeNodePromisified(key,THIS,key,fn,suffix,multiArgs);});util.notEnumerableProp(promisified,"__isPromisified__",true);obj[promisifiedKey]=promisified;}}
util.toFastProperties(obj);return obj;}
function promisify(callback,receiver,multiArgs){return makeNodePromisified(callback,receiver,undefined,callback,null,multiArgs);}
Promise.promisify=function(fn,options){if(typeof fn!=="function"){throw new TypeError("expecting a function but got "+util.classString(fn));}
if(isPromisified(fn)){return fn;}
options=Object(options);var receiver=options.context===undefined?THIS:options.context;var multiArgs=!!options.multiArgs;var ret=promisify(fn,receiver,multiArgs);util.copyDescriptors(fn,ret,propsFilter);return ret;};Promise.promisifyAll=function(target,options){if(typeof target!=="function"&&typeof target!=="object"){throw new TypeError("the target of promisifyAll must be an object or a function\u000a\u000a    See http://goo.gl/MqrFmX\u000a");}
options=Object(options);var multiArgs=!!options.multiArgs;var suffix=options.suffix;if(typeof suffix!=="string")suffix=defaultSuffix;var filter=options.filter;if(typeof filter!=="function")filter=defaultFilter;var promisifier=options.promisifier;if(typeof promisifier!=="function")promisifier=makeNodePromisified;if(!util.isIdentifier(suffix)){throw new RangeError("suffix must be a valid identifier\u000a\u000a    See http://goo.gl/MqrFmX\u000a");}
var keys=util.inheritedDataKeys(target);for(var i=0;i<keys.length;++i){var value=target[keys[i]];if(keys[i]!=="constructor"&&util.isClass(value)){promisifyAll(value.prototype,suffix,filter,promisifier,multiArgs);promisifyAll(value,suffix,filter,promisifier,multiArgs);}}
return promisifyAll(target,suffix,filter,promisifier,multiArgs);};};},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,PromiseArray,tryConvertToPromise,apiRejection){var util=_dereq_("./util");var isObject=util.isObject;var es5=_dereq_("./es5");var Es6Map;if(typeof Map==="function")Es6Map=Map;var mapToEntries=(function(){var index=0;var size=0;function extractEntry(value,key){this[index]=value;this[index+size]=key;index++;}
return function mapToEntries(map){size=map.size;index=0;var ret=new Array(map.size*2);map.forEach(extractEntry,ret);return ret;};})();var entriesToMap=function(entries){var ret=new Es6Map();var length=entries.length/2|0;for(var i=0;i<length;++i){var key=entries[length+i];var value=entries[i];ret.set(key,value);}
return ret;};function PropertiesPromiseArray(obj){var isMap=false;var entries;if(Es6Map!==undefined&&obj instanceof Es6Map){entries=mapToEntries(obj);isMap=true;}else{var keys=es5.keys(obj);var len=keys.length;entries=new Array(len*2);for(var i=0;i<len;++i){var key=keys[i];entries[i]=obj[key];entries[i+len]=key;}}
this.constructor$(entries);this._isMap=isMap;this._init$(undefined,isMap?-6:-3);}
util.inherits(PropertiesPromiseArray,PromiseArray);PropertiesPromiseArray.prototype._init=function(){};PropertiesPromiseArray.prototype._promiseFulfilled=function(value,index){this._values[index]=value;var totalResolved=++this._totalResolved;if(totalResolved>=this._length){var val;if(this._isMap){val=entriesToMap(this._values);}else{val={};var keyOffset=this.length();for(var i=0,len=this.length();i<len;++i){val[this._values[i+keyOffset]]=this._values[i];}}
this._resolve(val);return true;}
return false;};PropertiesPromiseArray.prototype.shouldCopyValues=function(){return false;};PropertiesPromiseArray.prototype.getActualLength=function(len){return len>>1;};function props(promises){var ret;var castValue=tryConvertToPromise(promises);if(!isObject(castValue)){return apiRejection("cannot await properties of a non-object\u000a\u000a    See http://goo.gl/MqrFmX\u000a");}else if(castValue instanceof Promise){ret=castValue._then(Promise.props,undefined,undefined,undefined,undefined);}else{ret=new PropertiesPromiseArray(castValue).promise();}
if(castValue instanceof Promise){ret._propagateFrom(castValue,2);}
return ret;}
Promise.prototype.props=function(){return props(this);};Promise.props=function(promises){return props(promises);};};},{"./es5":13,"./util":36}],26:[function(_dereq_,module,exports){"use strict";function arrayMove(src,srcIndex,dst,dstIndex,len){for(var j=0;j<len;++j){dst[j+dstIndex]=src[j+srcIndex];src[j+srcIndex]=void 0;}}
function Queue(capacity){this._capacity=capacity;this._length=0;this._front=0;}
Queue.prototype._willBeOverCapacity=function(size){return this._capacity<size;};Queue.prototype._pushOne=function(arg){var length=this.length();this._checkCapacity(length+1);var i=(this._front+length)&(this._capacity-1);this[i]=arg;this._length=length+1;};Queue.prototype.push=function(fn,receiver,arg){var length=this.length()+3;if(this._willBeOverCapacity(length)){this._pushOne(fn);this._pushOne(receiver);this._pushOne(arg);return;}
var j=this._front+length-3;this._checkCapacity(length);var wrapMask=this._capacity-1;this[(j+0)&wrapMask]=fn;this[(j+1)&wrapMask]=receiver;this[(j+2)&wrapMask]=arg;this._length=length;};Queue.prototype.shift=function(){var front=this._front,ret=this[front];this[front]=undefined;this._front=(front+1)&(this._capacity-1);this._length--;return ret;};Queue.prototype.length=function(){return this._length;};Queue.prototype._checkCapacity=function(size){if(this._capacity<size){this._resizeTo(this._capacity<<1);}};Queue.prototype._resizeTo=function(capacity){var oldCapacity=this._capacity;this._capacity=capacity;var front=this._front;var length=this._length;var moveItemsCount=(front+length)&(oldCapacity-1);arrayMove(this,0,this,oldCapacity,moveItemsCount);};module.exports=Queue;},{}],27:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL,tryConvertToPromise,apiRejection){var util=_dereq_("./util");var raceLater=function(promise){return promise.then(function(array){return race(array,promise);});};function race(promises,parent){var maybePromise=tryConvertToPromise(promises);if(maybePromise instanceof Promise){return raceLater(maybePromise);}else{promises=util.asArray(promises);if(promises===null)
return apiRejection("expecting an array or an iterable object but got "+util.classString(promises));}
var ret=new Promise(INTERNAL);if(parent!==undefined){ret._propagateFrom(parent,3);}
var fulfill=ret._fulfill;var reject=ret._reject;for(var i=0,len=promises.length;i<len;++i){var val=promises[i];if(val===undefined&&!(i in promises)){continue;}
Promise.cast(val)._then(fulfill,reject,undefined,ret,null);}
return ret;}
Promise.race=function(promises){return race(promises,undefined);};Promise.prototype.race=function(){return race(this,undefined);};};},{"./util":36}],28:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,PromiseArray,apiRejection,tryConvertToPromise,INTERNAL,debug){var getDomain=Promise._getDomain;var util=_dereq_("./util");var tryCatch=util.tryCatch;function ReductionPromiseArray(promises,fn,initialValue,_each){this.constructor$(promises);var domain=getDomain();this._fn=domain===null?fn:util.domainBind(domain,fn);if(initialValue!==undefined){initialValue=Promise.resolve(initialValue);initialValue._attachCancellationCallback(this);}
this._initialValue=initialValue;this._currentCancellable=null;if(_each===INTERNAL){this._eachValues=Array(this._length);}else if(_each===0){this._eachValues=null;}else{this._eachValues=undefined;}
this._promise._captureStackTrace();this._init$(undefined,-5);}
util.inherits(ReductionPromiseArray,PromiseArray);ReductionPromiseArray.prototype._gotAccum=function(accum){if(this._eachValues!==undefined&&this._eachValues!==null&&accum!==INTERNAL){this._eachValues.push(accum);}};ReductionPromiseArray.prototype._eachComplete=function(value){if(this._eachValues!==null){this._eachValues.push(value);}
return this._eachValues;};ReductionPromiseArray.prototype._init=function(){};ReductionPromiseArray.prototype._resolveEmptyArray=function(){this._resolve(this._eachValues!==undefined?this._eachValues:this._initialValue);};ReductionPromiseArray.prototype.shouldCopyValues=function(){return false;};ReductionPromiseArray.prototype._resolve=function(value){this._promise._resolveCallback(value);this._values=null;};ReductionPromiseArray.prototype._resultCancelled=function(sender){if(sender===this._initialValue)return this._cancel();if(this._isResolved())return;this._resultCancelled$();if(this._currentCancellable instanceof Promise){this._currentCancellable.cancel();}
if(this._initialValue instanceof Promise){this._initialValue.cancel();}};ReductionPromiseArray.prototype._iterate=function(values){this._values=values;var value;var i;var length=values.length;if(this._initialValue!==undefined){value=this._initialValue;i=0;}else{value=Promise.resolve(values[0]);i=1;}
this._currentCancellable=value;if(!value.isRejected()){for(;i<length;++i){var ctx={accum:null,value:values[i],index:i,length:length,array:this};value=value._then(gotAccum,undefined,undefined,ctx,undefined);}}
if(this._eachValues!==undefined){value=value._then(this._eachComplete,undefined,undefined,this,undefined);}
value._then(completed,completed,undefined,value,this);};Promise.prototype.reduce=function(fn,initialValue){return reduce(this,fn,initialValue,null);};Promise.reduce=function(promises,fn,initialValue,_each){return reduce(promises,fn,initialValue,_each);};function completed(valueOrReason,array){if(this.isFulfilled()){array._resolve(valueOrReason);}else{array._reject(valueOrReason);}}
function reduce(promises,fn,initialValue,_each){if(typeof fn!=="function"){return apiRejection("expecting a function but got "+util.classString(fn));}
var array=new ReductionPromiseArray(promises,fn,initialValue,_each);return array.promise();}
function gotAccum(accum){this.accum=accum;this.array._gotAccum(accum);var value=tryConvertToPromise(this.value,this.array._promise);if(value instanceof Promise){this.array._currentCancellable=value;return value._then(gotValue,undefined,undefined,this,undefined);}else{return gotValue.call(this,value);}}
function gotValue(value){var array=this.array;var promise=array._promise;var fn=tryCatch(array._fn);promise._pushContext();var ret;if(array._eachValues!==undefined){ret=fn.call(promise._boundValue(),value,this.index,this.length);}else{ret=fn.call(promise._boundValue(),this.accum,value,this.index,this.length);}
if(ret instanceof Promise){array._currentCancellable=ret;}
var promiseCreated=promise._popContext();debug.checkForgottenReturns(ret,promiseCreated,array._eachValues!==undefined?"Promise.each":"Promise.reduce",promise);return ret;}};},{"./util":36}],29:[function(_dereq_,module,exports){"use strict";var util=_dereq_("./util");var schedule;var noAsyncScheduler=function(){throw new Error("No async scheduler available\u000a\u000a    See http://goo.gl/MqrFmX\u000a");};var NativePromise=util.getNativePromise();if(util.isNode&&typeof MutationObserver==="undefined"){var GlobalSetImmediate=global.setImmediate;var ProcessNextTick=process.nextTick;schedule=util.isRecentNode?function(fn){GlobalSetImmediate.call(global,fn);}:function(fn){ProcessNextTick.call(process,fn);};}else if(typeof NativePromise==="function"&&typeof NativePromise.resolve==="function"){var nativePromise=NativePromise.resolve();schedule=function(fn){nativePromise.then(fn);};}else if((typeof MutationObserver!=="undefined")&&!(typeof window!=="undefined"&&window.navigator&&(window.navigator.standalone||window.cordova))){schedule=(function(){var div=document.createElement("div");var opts={attributes:true};var toggleScheduled=false;var div2=document.createElement("div");var o2=new MutationObserver(function(){div.classList.toggle("foo");toggleScheduled=false;});o2.observe(div2,opts);var scheduleToggle=function(){if(toggleScheduled)return;toggleScheduled=true;div2.classList.toggle("foo");};return function schedule(fn){var o=new MutationObserver(function(){o.disconnect();fn();});o.observe(div,opts);scheduleToggle();};})();}else if(typeof setImmediate!=="undefined"){schedule=function(fn){setImmediate(fn);};}else if(typeof setTimeout!=="undefined"){schedule=function(fn){setTimeout(fn,0);};}else{schedule=noAsyncScheduler;}
module.exports=schedule;},{"./util":36}],30:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,PromiseArray,debug){var PromiseInspection=Promise.PromiseInspection;var util=_dereq_("./util");function SettledPromiseArray(values){this.constructor$(values);}
util.inherits(SettledPromiseArray,PromiseArray);SettledPromiseArray.prototype._promiseResolved=function(index,inspection){this._values[index]=inspection;var totalResolved=++this._totalResolved;if(totalResolved>=this._length){this._resolve(this._values);return true;}
return false;};SettledPromiseArray.prototype._promiseFulfilled=function(value,index){var ret=new PromiseInspection();ret._bitField=33554432;ret._settledValueField=value;return this._promiseResolved(index,ret);};SettledPromiseArray.prototype._promiseRejected=function(reason,index){var ret=new PromiseInspection();ret._bitField=16777216;ret._settledValueField=reason;return this._promiseResolved(index,ret);};Promise.settle=function(promises){debug.deprecated(".settle()",".reflect()");return new SettledPromiseArray(promises).promise();};Promise.prototype.settle=function(){return Promise.settle(this);};};},{"./util":36}],31:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,PromiseArray,apiRejection){var util=_dereq_("./util");var RangeError=_dereq_("./errors").RangeError;var AggregateError=_dereq_("./errors").AggregateError;var isArray=util.isArray;var CANCELLATION={};function SomePromiseArray(values){this.constructor$(values);this._howMany=0;this._unwrap=false;this._initialized=false;}
util.inherits(SomePromiseArray,PromiseArray);SomePromiseArray.prototype._init=function(){if(!this._initialized){return;}
if(this._howMany===0){this._resolve([]);return;}
this._init$(undefined,-5);var isArrayResolved=isArray(this._values);if(!this._isResolved()&&isArrayResolved&&this._howMany>this._canPossiblyFulfill()){this._reject(this._getRangeError(this.length()));}};SomePromiseArray.prototype.init=function(){this._initialized=true;this._init();};SomePromiseArray.prototype.setUnwrap=function(){this._unwrap=true;};SomePromiseArray.prototype.howMany=function(){return this._howMany;};SomePromiseArray.prototype.setHowMany=function(count){this._howMany=count;};SomePromiseArray.prototype._promiseFulfilled=function(value){this._addFulfilled(value);if(this._fulfilled()===this.howMany()){this._values.length=this.howMany();if(this.howMany()===1&&this._unwrap){this._resolve(this._values[0]);}else{this._resolve(this._values);}
return true;}
return false;};SomePromiseArray.prototype._promiseRejected=function(reason){this._addRejected(reason);return this._checkOutcome();};SomePromiseArray.prototype._promiseCancelled=function(){if(this._values instanceof Promise||this._values==null){return this._cancel();}
this._addRejected(CANCELLATION);return this._checkOutcome();};SomePromiseArray.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){var e=new AggregateError();for(var i=this.length();i<this._values.length;++i){if(this._values[i]!==CANCELLATION){e.push(this._values[i]);}}
if(e.length>0){this._reject(e);}else{this._cancel();}
return true;}
return false;};SomePromiseArray.prototype._fulfilled=function(){return this._totalResolved;};SomePromiseArray.prototype._rejected=function(){return this._values.length-this.length();};SomePromiseArray.prototype._addRejected=function(reason){this._values.push(reason);};SomePromiseArray.prototype._addFulfilled=function(value){this._values[this._totalResolved++]=value;};SomePromiseArray.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected();};SomePromiseArray.prototype._getRangeError=function(count){var message="Input array must contain at least "+
this._howMany+" items but contains only "+count+" items";return new RangeError(message);};SomePromiseArray.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0));};function some(promises,howMany){if((howMany|0)!==howMany||howMany<0){return apiRejection("expecting a positive integer\u000a\u000a    See http://goo.gl/MqrFmX\u000a");}
var ret=new SomePromiseArray(promises);var promise=ret.promise();ret.setHowMany(howMany);ret.init();return promise;}
Promise.some=function(promises,howMany){return some(promises,howMany);};Promise.prototype.some=function(howMany){return some(this,howMany);};Promise._SomePromiseArray=SomePromiseArray;};},{"./errors":12,"./util":36}],32:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise){function PromiseInspection(promise){if(promise!==undefined){promise=promise._target();this._bitField=promise._bitField;this._settledValueField=promise._isFateSealed()?promise._settledValue():undefined;}
else{this._bitField=0;this._settledValueField=undefined;}}
PromiseInspection.prototype._settledValue=function(){return this._settledValueField;};var value=PromiseInspection.prototype.value=function(){if(!this.isFulfilled()){throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\u000a\u000a    See http://goo.gl/MqrFmX\u000a");}
return this._settledValue();};var reason=PromiseInspection.prototype.error=PromiseInspection.prototype.reason=function(){if(!this.isRejected()){throw new TypeError("cannot get rejection reason of a non-rejected promise\u000a\u000a    See http://goo.gl/MqrFmX\u000a");}
return this._settledValue();};var isFulfilled=PromiseInspection.prototype.isFulfilled=function(){return(this._bitField&33554432)!==0;};var isRejected=PromiseInspection.prototype.isRejected=function(){return(this._bitField&16777216)!==0;};var isPending=PromiseInspection.prototype.isPending=function(){return(this._bitField&50397184)===0;};var isResolved=PromiseInspection.prototype.isResolved=function(){return(this._bitField&50331648)!==0;};PromiseInspection.prototype.isCancelled=function(){return(this._bitField&8454144)!==0;};Promise.prototype.__isCancelled=function(){return(this._bitField&65536)===65536;};Promise.prototype._isCancelled=function(){return this._target().__isCancelled();};Promise.prototype.isCancelled=function(){return(this._target()._bitField&8454144)!==0;};Promise.prototype.isPending=function(){return isPending.call(this._target());};Promise.prototype.isRejected=function(){return isRejected.call(this._target());};Promise.prototype.isFulfilled=function(){return isFulfilled.call(this._target());};Promise.prototype.isResolved=function(){return isResolved.call(this._target());};Promise.prototype.value=function(){return value.call(this._target());};Promise.prototype.reason=function(){var target=this._target();target._unsetRejectionIsUnhandled();return reason.call(target);};Promise.prototype._value=function(){return this._settledValue();};Promise.prototype._reason=function(){this._unsetRejectionIsUnhandled();return this._settledValue();};Promise.PromiseInspection=PromiseInspection;};},{}],33:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL){var util=_dereq_("./util");var errorObj=util.errorObj;var isObject=util.isObject;function tryConvertToPromise(obj,context){if(isObject(obj)){if(obj instanceof Promise)return obj;var then=getThen(obj);if(then===errorObj){if(context)context._pushContext();var ret=Promise.reject(then.e);if(context)context._popContext();return ret;}else if(typeof then==="function"){if(isAnyBluebirdPromise(obj)){var ret=new Promise(INTERNAL);obj._then(ret._fulfill,ret._reject,undefined,ret,null);return ret;}
return doThenable(obj,then,context);}}
return obj;}
function doGetThen(obj){return obj.then;}
function getThen(obj){try{return doGetThen(obj);}catch(e){errorObj.e=e;return errorObj;}}
var hasProp={}.hasOwnProperty;function isAnyBluebirdPromise(obj){try{return hasProp.call(obj,"_promise0");}catch(e){return false;}}
function doThenable(x,then,context){var promise=new Promise(INTERNAL);var ret=promise;if(context)context._pushContext();promise._captureStackTrace();if(context)context._popContext();var synchronous=true;var result=util.tryCatch(then).call(x,resolve,reject);synchronous=false;if(promise&&result===errorObj){promise._rejectCallback(result.e,true,true);promise=null;}
function resolve(value){if(!promise)return;promise._resolveCallback(value);promise=null;}
function reject(reason){if(!promise)return;promise._rejectCallback(reason,synchronous,true);promise=null;}
return ret;}
return tryConvertToPromise;};},{"./util":36}],34:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL,debug){var util=_dereq_("./util");var TimeoutError=Promise.TimeoutError;function HandleWrapper(handle){this.handle=handle;}
HandleWrapper.prototype._resultCancelled=function(){clearTimeout(this.handle);};var afterValue=function(value){return delay(+this).thenReturn(value);};var delay=Promise.delay=function(ms,value){var ret;var handle;if(value!==undefined){ret=Promise.resolve(value)._then(afterValue,null,null,ms,undefined);if(debug.cancellation()&&value instanceof Promise){ret._setOnCancel(value);}}else{ret=new Promise(INTERNAL);handle=setTimeout(function(){ret._fulfill();},+ms);if(debug.cancellation()){ret._setOnCancel(new HandleWrapper(handle));}
ret._captureStackTrace();}
ret._setAsyncGuaranteed();return ret;};Promise.prototype.delay=function(ms){return delay(ms,this);};var afterTimeout=function(promise,message,parent){var err;if(typeof message!=="string"){if(message instanceof Error){err=message;}else{err=new TimeoutError("operation timed out");}}else{err=new TimeoutError(message);}
util.markAsOriginatingFromRejection(err);promise._attachExtraTrace(err);promise._reject(err);if(parent!=null){parent.cancel();}};function successClear(value){clearTimeout(this.handle);return value;}
function failureClear(reason){clearTimeout(this.handle);throw reason;}
Promise.prototype.timeout=function(ms,message){ms=+ms;var ret,parent;var handleWrapper=new HandleWrapper(setTimeout(function timeoutTimeout(){if(ret.isPending()){afterTimeout(ret,message,parent);}},ms));if(debug.cancellation()){parent=this.then();ret=parent._then(successClear,failureClear,undefined,handleWrapper,undefined);ret._setOnCancel(handleWrapper);}else{ret=this._then(successClear,failureClear,undefined,handleWrapper,undefined);}
return ret;};};},{"./util":36}],35:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,apiRejection,tryConvertToPromise,createContext,INTERNAL,debug){var util=_dereq_("./util");var TypeError=_dereq_("./errors").TypeError;var inherits=_dereq_("./util").inherits;var errorObj=util.errorObj;var tryCatch=util.tryCatch;var NULL={};function thrower(e){setTimeout(function(){throw e;},0);}
function castPreservingDisposable(thenable){var maybePromise=tryConvertToPromise(thenable);if(maybePromise!==thenable&&typeof thenable._isDisposable==="function"&&typeof thenable._getDisposer==="function"&&thenable._isDisposable()){maybePromise._setDisposable(thenable._getDisposer());}
return maybePromise;}
function dispose(resources,inspection){var i=0;var len=resources.length;var ret=new Promise(INTERNAL);function iterator(){if(i>=len)return ret._fulfill();var maybePromise=castPreservingDisposable(resources[i++]);if(maybePromise instanceof Promise&&maybePromise._isDisposable()){try{maybePromise=tryConvertToPromise(maybePromise._getDisposer().tryDispose(inspection),resources.promise);}catch(e){return thrower(e);}
if(maybePromise instanceof Promise){return maybePromise._then(iterator,thrower,null,null,null);}}
iterator();}
iterator();return ret;}
function Disposer(data,promise,context){this._data=data;this._promise=promise;this._context=context;}
Disposer.prototype.data=function(){return this._data;};Disposer.prototype.promise=function(){return this._promise;};Disposer.prototype.resource=function(){if(this.promise().isFulfilled()){return this.promise().value();}
return NULL;};Disposer.prototype.tryDispose=function(inspection){var resource=this.resource();var context=this._context;if(context!==undefined)context._pushContext();var ret=resource!==NULL?this.doDispose(resource,inspection):null;if(context!==undefined)context._popContext();this._promise._unsetDisposable();this._data=null;return ret;};Disposer.isDisposer=function(d){return(d!=null&&typeof d.resource==="function"&&typeof d.tryDispose==="function");};function FunctionDisposer(fn,promise,context){this.constructor$(fn,promise,context);}
inherits(FunctionDisposer,Disposer);FunctionDisposer.prototype.doDispose=function(resource,inspection){var fn=this.data();return fn.call(resource,resource,inspection);};function maybeUnwrapDisposer(value){if(Disposer.isDisposer(value)){this.resources[this.index]._setDisposable(value);return value.promise();}
return value;}
function ResourceList(length){this.length=length;this.promise=null;this[length-1]=null;}
ResourceList.prototype._resultCancelled=function(){var len=this.length;for(var i=0;i<len;++i){var item=this[i];if(item instanceof Promise){item.cancel();}}};Promise.using=function(){var len=arguments.length;if(len<2)return apiRejection("you must pass at least 2 arguments to Promise.using");var fn=arguments[len-1];if(typeof fn!=="function"){return apiRejection("expecting a function but got "+util.classString(fn));}
var input;var spreadArgs=true;if(len===2&&Array.isArray(arguments[0])){input=arguments[0];len=input.length;spreadArgs=false;}else{input=arguments;len--;}
var resources=new ResourceList(len);for(var i=0;i<len;++i){var resource=input[i];if(Disposer.isDisposer(resource)){var disposer=resource;resource=resource.promise();resource._setDisposable(disposer);}else{var maybePromise=tryConvertToPromise(resource);if(maybePromise instanceof Promise){resource=maybePromise._then(maybeUnwrapDisposer,null,null,{resources:resources,index:i},undefined);}}
resources[i]=resource;}
var reflectedResources=new Array(resources.length);for(var i=0;i<reflectedResources.length;++i){reflectedResources[i]=Promise.resolve(resources[i]).reflect();}
var resultPromise=Promise.all(reflectedResources).then(function(inspections){for(var i=0;i<inspections.length;++i){var inspection=inspections[i];if(inspection.isRejected()){errorObj.e=inspection.error();return errorObj;}else if(!inspection.isFulfilled()){resultPromise.cancel();return;}
inspections[i]=inspection.value();}
promise._pushContext();fn=tryCatch(fn);var ret=spreadArgs?fn.apply(undefined,inspections):fn(inspections);var promiseCreated=promise._popContext();debug.checkForgottenReturns(ret,promiseCreated,"Promise.using",promise);return ret;});var promise=resultPromise.lastly(function(){var inspection=new Promise.PromiseInspection(resultPromise);return dispose(resources,inspection);});resources.promise=promise;promise._setOnCancel(resources);return promise;};Promise.prototype._setDisposable=function(disposer){this._bitField=this._bitField|131072;this._disposer=disposer;};Promise.prototype._isDisposable=function(){return(this._bitField&131072)>0;};Promise.prototype._getDisposer=function(){return this._disposer;};Promise.prototype._unsetDisposable=function(){this._bitField=this._bitField&(~131072);this._disposer=undefined;};Promise.prototype.disposer=function(fn){if(typeof fn==="function"){return new FunctionDisposer(fn,this,createContext());}
throw new TypeError();};};},{"./errors":12,"./util":36}],36:[function(_dereq_,module,exports){"use strict";var es5=_dereq_("./es5");var canEvaluate=typeof navigator=="undefined";var errorObj={e:{}};var tryCatchTarget;var globalObject=typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:this!==undefined?this:null;function tryCatcher(){try{var target=tryCatchTarget;tryCatchTarget=null;return target.apply(this,arguments);}catch(e){errorObj.e=e;return errorObj;}}
function tryCatch(fn){tryCatchTarget=fn;return tryCatcher;}
var inherits=function(Child,Parent){var hasProp={}.hasOwnProperty;function T(){this.constructor=Child;this.constructor$=Parent;for(var propertyName in Parent.prototype){if(hasProp.call(Parent.prototype,propertyName)&&propertyName.charAt(propertyName.length-1)!=="$"){this[propertyName+"$"]=Parent.prototype[propertyName];}}}
T.prototype=Parent.prototype;Child.prototype=new T();return Child.prototype;};function isPrimitive(val){return val==null||val===true||val===false||typeof val==="string"||typeof val==="number";}
function isObject(value){return typeof value==="function"||typeof value==="object"&&value!==null;}
function maybeWrapAsError(maybeError){if(!isPrimitive(maybeError))return maybeError;return new Error(safeToString(maybeError));}
function withAppended(target,appendee){var len=target.length;var ret=new Array(len+1);var i;for(i=0;i<len;++i){ret[i]=target[i];}
ret[i]=appendee;return ret;}
function getDataPropertyOrDefault(obj,key,defaultValue){if(es5.isES5){var desc=Object.getOwnPropertyDescriptor(obj,key);if(desc!=null){return desc.get==null&&desc.set==null?desc.value:defaultValue;}}else{return{}.hasOwnProperty.call(obj,key)?obj[key]:undefined;}}
function notEnumerableProp(obj,name,value){if(isPrimitive(obj))return obj;var descriptor={value:value,configurable:true,enumerable:false,writable:true};es5.defineProperty(obj,name,descriptor);return obj;}
function thrower(r){throw r;}
var inheritedDataKeys=(function(){var excludedPrototypes=[Array.prototype,Object.prototype,Function.prototype];var isExcludedProto=function(val){for(var i=0;i<excludedPrototypes.length;++i){if(excludedPrototypes[i]===val){return true;}}
return false;};if(es5.isES5){var getKeys=Object.getOwnPropertyNames;return function(obj){var ret=[];var visitedKeys=Object.create(null);while(obj!=null&&!isExcludedProto(obj)){var keys;try{keys=getKeys(obj);}catch(e){return ret;}
for(var i=0;i<keys.length;++i){var key=keys[i];if(visitedKeys[key])continue;visitedKeys[key]=true;var desc=Object.getOwnPropertyDescriptor(obj,key);if(desc!=null&&desc.get==null&&desc.set==null){ret.push(key);}}
obj=es5.getPrototypeOf(obj);}
return ret;};}else{var hasProp={}.hasOwnProperty;return function(obj){if(isExcludedProto(obj))return[];var ret=[];enumeration:for(var key in obj){if(hasProp.call(obj,key)){ret.push(key);}else{for(var i=0;i<excludedPrototypes.length;++i){if(hasProp.call(excludedPrototypes[i],key)){continue enumeration;}}
ret.push(key);}}
return ret;};}})();var thisAssignmentPattern=/this\s*\.\s*\S+\s*=/;function isClass(fn){try{if(typeof fn==="function"){var keys=es5.names(fn.prototype);var hasMethods=es5.isES5&&keys.length>1;var hasMethodsOtherThanConstructor=keys.length>0&&!(keys.length===1&&keys[0]==="constructor");var hasThisAssignmentAndStaticMethods=thisAssignmentPattern.test(fn+"")&&es5.names(fn).length>0;if(hasMethods||hasMethodsOtherThanConstructor||hasThisAssignmentAndStaticMethods){return true;}}
return false;}catch(e){return false;}}
function toFastProperties(obj){function FakeConstructor(){}
FakeConstructor.prototype=obj;var receiver=new FakeConstructor();function ic(){return typeof receiver.foo;}
ic();ic();return obj;eval(obj);}
var rident=/^[a-z$_][a-z$_0-9]*$/i;function isIdentifier(str){return rident.test(str);}
function filledRange(count,prefix,suffix){var ret=new Array(count);for(var i=0;i<count;++i){ret[i]=prefix+i+suffix;}
return ret;}
function safeToString(obj){try{return obj+"";}catch(e){return "[no string representation]";}}
function isError(obj){return obj instanceof Error||(obj!==null&&typeof obj==="object"&&typeof obj.message==="string"&&typeof obj.name==="string");}
function markAsOriginatingFromRejection(e){try{notEnumerableProp(e,"isOperational",true);}
catch(ignore){}}
function originatesFromRejection(e){if(e==null)return false;return((e instanceof Error["__BluebirdErrorTypes__"].OperationalError)||e["isOperational"]===true);}
function canAttachTrace(obj){return isError(obj)&&es5.propertyIsWritable(obj,"stack");}
var ensureErrorObject=(function(){if(!("stack"in new Error())){return function(value){if(canAttachTrace(value))return value;try{throw new Error(safeToString(value));}
catch(err){return err;}};}else{return function(value){if(canAttachTrace(value))return value;return new Error(safeToString(value));};}})();function classString(obj){return{}.toString.call(obj);}
function copyDescriptors(from,to,filter){var keys=es5.names(from);for(var i=0;i<keys.length;++i){var key=keys[i];if(filter(key)){try{es5.defineProperty(to,key,es5.getDescriptor(from,key));}catch(ignore){}}}}
var asArray=function(v){if(es5.isArray(v)){return v;}
return null;};if(typeof Symbol!=="undefined"&&Symbol.iterator){var ArrayFrom=typeof Array.from==="function"?function(v){return Array.from(v);}:function(v){var ret=[];var it=v[Symbol.iterator]();var itResult;while(!((itResult=it.next()).done)){ret.push(itResult.value);}
return ret;};asArray=function(v){if(es5.isArray(v)){return v;}else if(v!=null&&typeof v[Symbol.iterator]==="function"){return ArrayFrom(v);}
return null;};}
var isNode=typeof process!=="undefined"&&classString(process).toLowerCase()==="[object process]";var hasEnvVariables=typeof process!=="undefined"&&"object"!=="undefined";function env(key){return hasEnvVariables?Object({"MINING_POOL_STATUS":undefined})[key]:undefined;}
function getNativePromise(){if(typeof Promise==="function"){try{var promise=new Promise(function(){});if({}.toString.call(promise)==="[object Promise]"){return Promise;}}catch(e){}}}
function domainBind(self,cb){return self.bind(cb);}
var ret={isClass:isClass,isIdentifier:isIdentifier,inheritedDataKeys:inheritedDataKeys,getDataPropertyOrDefault:getDataPropertyOrDefault,thrower:thrower,isArray:es5.isArray,asArray:asArray,notEnumerableProp:notEnumerableProp,isPrimitive:isPrimitive,isObject:isObject,isError:isError,canEvaluate:canEvaluate,errorObj:errorObj,tryCatch:tryCatch,inherits:inherits,withAppended:withAppended,maybeWrapAsError:maybeWrapAsError,toFastProperties:toFastProperties,filledRange:filledRange,toString:safeToString,canAttachTrace:canAttachTrace,ensureErrorObject:ensureErrorObject,originatesFromRejection:originatesFromRejection,markAsOriginatingFromRejection:markAsOriginatingFromRejection,classString:classString,copyDescriptors:copyDescriptors,hasDevTools:typeof chrome!=="undefined"&&chrome&&typeof chrome.loadTimes==="function",isNode:isNode,hasEnvVariables:hasEnvVariables,env:env,global:globalObject,getNativePromise:getNativePromise,domainBind:domainBind};ret.isRecentNode=ret.isNode&&(function(){var version=process.versions.node.split(".").map(Number);return(version[0]===0&&version[1]>10)||(version[0]>0);})();if(ret.isNode)ret.toFastProperties(process);try{throw new Error();}catch(e){ret.lastLineError=e;}
module.exports=ret;},{"./es5":13}]},{},[4])(4)});;if(typeof window!=='undefined'&&window!==null){window.P=window.Promise;}else if(typeof self!=='undefined'&&self!==null){self.P=self.Promise;}}.call(exports,__webpack_require__(20),__webpack_require__(10),__webpack_require__(163).setImmediate))}),(function(module,exports,__webpack_require__){"use strict";var core=__webpack_require__(787),isArray=__webpack_require__(364),isFunction=__webpack_require__(361),isObjectLike=__webpack_require__(234);module.exports=function(options){var errorText='Please verify options';if(!isObjectLike(options)){throw new TypeError(errorText);}
if(!isFunction(options.request)){throw new TypeError(errorText+'.request');}
if(!isArray(options.expose)||options.expose.length===0){throw new TypeError(errorText+'.expose');}
var plumbing=core({PromiseImpl:options.PromiseImpl,constructorMixin:options.constructorMixin});var originalInit=options.request.Request.prototype.init;options.request.Request.prototype.init=function RP$initInterceptor(requestOptions){if(isObjectLike(requestOptions)&&!this._callback&&!this._rp_promise){plumbing.init.call(this,requestOptions);}
return originalInit.apply(this,arguments);};var thenExposed=false;for(var i=0;i<options.expose.length;i+=1){var method=options.expose[i];plumbing[method==='promise'?'exposePromise':'exposePromiseMethod'](options.request.Request.prototype,null,'_rp_promise',method);if(method==='then'){thenExposed=true;}}
if(!thenExposed){throw new Error('Please expose "then"');}};}),(function(module,exports,__webpack_require__){"use strict";var errors=__webpack_require__(788),isFunction=__webpack_require__(361),isObjectLike=__webpack_require__(234),isString=__webpack_require__(794),isUndefined=__webpack_require__(795);module.exports=function(options){var errorText='Please verify options';if(!isObjectLike(options)){throw new TypeError(errorText);}
if(!isFunction(options.PromiseImpl)){throw new TypeError(errorText+'.PromiseImpl');}
if(!isUndefined(options.constructorMixin)&&!isFunction(options.constructorMixin)){throw new TypeError(errorText+'.PromiseImpl');}
var PromiseImpl=options.PromiseImpl;var constructorMixin=options.constructorMixin;var plumbing={};plumbing.init=function(requestOptions){var self=this;self._rp_promise=new PromiseImpl(function(resolve,reject){self._rp_resolve=resolve;self._rp_reject=reject;if(constructorMixin){constructorMixin.apply(self,arguments);}});self._rp_callbackOrig=requestOptions.callback;requestOptions.callback=self.callback=function RP$callback(err,response,body){plumbing.callback.call(self,err,response,body);};if(isString(requestOptions.method)){requestOptions.method=requestOptions.method.toUpperCase();}
requestOptions.transform=requestOptions.transform||plumbing.defaultTransformations[requestOptions.method];self._rp_options=requestOptions;self._rp_options.simple=requestOptions.simple!==false;self._rp_options.resolveWithFullResponse=requestOptions.resolveWithFullResponse===true;self._rp_options.transform2xxOnly=requestOptions.transform2xxOnly===true;};plumbing.defaultTransformations={HEAD:function(body,response,resolveWithFullResponse){return resolveWithFullResponse?response:response.headers;}};plumbing.callback=function(err,response,body){var self=this;var origCallbackThrewException=false,thrownException=null;if(isFunction(self._rp_callbackOrig)){try{self._rp_callbackOrig.apply(self,arguments);}catch(e){origCallbackThrewException=true;thrownException=e;}}
var is2xx=!err&&/^2/.test(''+response.statusCode);if(err){self._rp_reject(new errors.RequestError(err,self._rp_options,response));}else if(self._rp_options.simple&&!is2xx){if(isFunction(self._rp_options.transform)&&self._rp_options.transform2xxOnly===false){(new PromiseImpl(function(resolve){resolve(self._rp_options.transform(body,response,self._rp_options.resolveWithFullResponse));})).then(function(transformedResponse){self._rp_reject(new errors.StatusCodeError(response.statusCode,body,self._rp_options,transformedResponse));}).catch(function(transformErr){self._rp_reject(new errors.TransformError(transformErr,self._rp_options,response));});}else{self._rp_reject(new errors.StatusCodeError(response.statusCode,body,self._rp_options,response));}}else{if(isFunction(self._rp_options.transform)&&(is2xx||self._rp_options.transform2xxOnly===false)){(new PromiseImpl(function(resolve){resolve(self._rp_options.transform(body,response,self._rp_options.resolveWithFullResponse));})).then(function(transformedResponse){self._rp_resolve(transformedResponse);}).catch(function(transformErr){self._rp_reject(new errors.TransformError(transformErr,self._rp_options,response));});}else if(self._rp_options.resolveWithFullResponse){self._rp_resolve(response);}else{self._rp_resolve(body);}}
if(origCallbackThrewException){throw thrownException;}};plumbing.exposePromiseMethod=function(exposeTo,bindTo,promisePropertyKey,methodToExpose,exposeAs){exposeAs=exposeAs||methodToExpose;if(exposeAs in exposeTo){throw new Error('Unable to expose method "'+exposeAs+'"');}
exposeTo[exposeAs]=function RP$exposed(){var self=bindTo||this;return self[promisePropertyKey][methodToExpose].apply(self[promisePropertyKey],arguments);};};plumbing.exposePromise=function(exposeTo,bindTo,promisePropertyKey,exposeAs){exposeAs=exposeAs||'promise';if(exposeAs in exposeTo){throw new Error('Unable to expose method "'+exposeAs+'"');}
exposeTo[exposeAs]=function RP$promise(){var self=bindTo||this;return self[promisePropertyKey];};};return plumbing;};}),(function(module,exports,__webpack_require__){"use strict";function RequestError(cause,options,response){this.name='RequestError';this.message=String(cause);this.cause=cause;this.error=cause;this.options=options;this.response=response;if(Error.captureStackTrace){Error.captureStackTrace(this);}}
RequestError.prototype=Object.create(Error.prototype);RequestError.prototype.constructor=RequestError;function StatusCodeError(statusCode,body,options,response){this.name='StatusCodeError';this.statusCode=statusCode;this.message=statusCode+' - '+(JSON&&JSON.stringify?JSON.stringify(body):body);this.error=body;this.options=options;this.response=response;if(Error.captureStackTrace){Error.captureStackTrace(this);}}
StatusCodeError.prototype=Object.create(Error.prototype);StatusCodeError.prototype.constructor=StatusCodeError;function TransformError(cause,options,response){this.name='TransformError';this.message=String(cause);this.cause=cause;this.error=cause;this.options=options;this.response=response;if(Error.captureStackTrace){Error.captureStackTrace(this);}}
TransformError.prototype=Object.create(Error.prototype);TransformError.prototype.constructor=TransformError;module.exports={RequestError:RequestError,StatusCodeError:StatusCodeError,TransformError:TransformError};}),(function(module,exports,__webpack_require__){var freeGlobal=__webpack_require__(790);var freeSelf=typeof self=='object'&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function('return this')();module.exports=root;}),(function(module,exports,__webpack_require__){(function(global){var freeGlobal=typeof global=='object'&&global&&global.Object===Object&&global;module.exports=freeGlobal;}.call(exports,__webpack_require__(10)))}),(function(module,exports,__webpack_require__){var Symbol=__webpack_require__(363);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var nativeObjectToString=objectProto.toString;var symToStringTag=Symbol?Symbol.toStringTag:undefined;function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true;}catch(e){}
var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag;}else{delete value[symToStringTag];}}
return result;}
module.exports=getRawTag;}),(function(module,exports){var objectProto=Object.prototype;var nativeObjectToString=objectProto.toString;function objectToString(value){return nativeObjectToString.call(value);}
module.exports=objectToString;}),(function(module,exports){function isObject(value){var type=typeof value;return value!=null&&(type=='object'||type=='function');}
module.exports=isObject;}),(function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(362),isArray=__webpack_require__(364),isObjectLike=__webpack_require__(234);var stringTag='[object String]';function isString(value){return typeof value=='string'||(!isArray(value)&&isObjectLike(value)&&baseGetTag(value)==stringTag);}
module.exports=isString;}),(function(module,exports){function isUndefined(value){return value===undefined;}
module.exports=isUndefined;}),(function(module,exports,__webpack_require__){"use strict";var isNative=/\.node$/;function forEach(obj,callback){for(var key in obj){if(!Object.prototype.hasOwnProperty.call(obj,key)){continue;}
callback(key);}}
function assign(target,source){forEach(source,function(key){target[key]=source[key];});return target;}
function clearCache(requireCache){forEach(requireCache,function(resolvedPath){if(!isNative.test(resolvedPath)){delete requireCache[resolvedPath];}});}
module.exports=function(requireCache,callback,callbackForModulesToKeep,module){var originalCache=assign({},requireCache);clearCache(requireCache);if(callbackForModulesToKeep){var originalModuleChildren=module.children?module.children.slice():false;callbackForModulesToKeep();var modulesToKeep=[];forEach(requireCache,function(key){modulesToKeep.push(key);});clearCache(requireCache);if(module.children){module.children=originalModuleChildren;}
for(var i=0;i<modulesToKeep.length;i+=1){if(originalCache[modulesToKeep[i]]){requireCache[modulesToKeep[i]]=originalCache[modulesToKeep[i]];}}}
var freshModule=callback();var stealthCache=callbackForModulesToKeep?assign({},requireCache):false;clearCache(requireCache);if(callbackForModulesToKeep){for(var k=0;k<modulesToKeep.length;k+=1){if(stealthCache[modulesToKeep[k]]){requireCache[modulesToKeep[k]]=stealthCache[modulesToKeep[k]];}}}
assign(requireCache,originalCache);return freshModule;};}),(function(module,exports,__webpack_require__){"use strict";var extend=__webpack_require__(235)
var cookies=__webpack_require__(365)
var helpers=__webpack_require__(237)
var paramsHaveRequestBody=helpers.paramsHaveRequestBody
function initParams(uri,options,callback){if(typeof options==='function'){callback=options}
var params={}
if(typeof options==='object'){extend(params,options,{uri:uri})}else if(typeof uri==='string'){extend(params,{uri:uri})}else{extend(params,uri)}
params.callback=callback||params.callback
return params}
function request(uri,options,callback){if(typeof uri==='undefined'){throw new Error('undefined is not a valid uri or options object.')}
var params=initParams(uri,options,callback)
if(params.method==='HEAD'&&paramsHaveRequestBody(params)){throw new Error('HTTP HEAD requests MUST NOT include a request body.')}
return new request.Request(params)}
function verbFunc(verb){var method=verb.toUpperCase()
return function(uri,options,callback){var params=initParams(uri,options,callback)
params.method=method
return request(params,params.callback)}}
request.get=verbFunc('get')
request.head=verbFunc('head')
request.options=verbFunc('options')
request.post=verbFunc('post')
request.put=verbFunc('put')
request.patch=verbFunc('patch')
request.del=verbFunc('delete')
request['delete']=verbFunc('delete')
request.jar=function(store){return cookies.jar(store)}
request.cookie=function(str){return cookies.parse(str)}
function wrapRequestMethod(method,options,requester,verb){return function(uri,opts,callback){var params=initParams(uri,opts,callback)
var target={}
extend(true,target,options,params)
target.pool=params.pool||options.pool
if(verb){target.method=verb.toUpperCase()}
if(typeof requester==='function'){method=requester}
return method(target,target.callback)}}
request.defaults=function(options,requester){var self=this
options=options||{}
if(typeof options==='function'){requester=options
options={}}
var defaults=wrapRequestMethod(self,options,requester)
var verbs=['get','head','post','put','patch','del','delete']
verbs.forEach(function(verb){defaults[verb]=wrapRequestMethod(self[verb],options,requester,verb)})
defaults.cookie=wrapRequestMethod(self.cookie,options,requester)
defaults.jar=self.jar
defaults.defaults=self.defaults
return defaults}
request.forever=function(agentOptions,optionsArg){var options={}
if(optionsArg){extend(options,optionsArg)}
if(agentOptions){options.agentOptions=agentOptions}
options.forever=true
return request.defaults(options)}
module.exports=request
request.Request=__webpack_require__(806)
request.initParams=initParams
Object.defineProperty(request,'debug',{enumerable:true,get:function(){return request.Request.debug},set:function(debug){request.Request.debug=debug}})}),(function(module,exports,__webpack_require__){"use strict";module.exports={isString:function(arg){return typeof(arg)==='string';},isObject:function(arg){return typeof(arg)==='object'&&arg!==null;},isNull:function(arg){return arg===null;},isNullOrUndefined:function(arg){return arg==null;}};}),(function(module,exports,__webpack_require__){"use strict";function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop);}
module.exports=function(qs,sep,eq,options){sep=sep||'&';eq=eq||'=';var obj={};if(typeof qs!=='string'||qs.length===0){return obj;}
var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1000;if(options&&typeof options.maxKeys==='number'){maxKeys=options.maxKeys;}
var len=qs.length;if(maxKeys>0&&len>maxKeys){len=maxKeys;}
for(var i=0;i<len;++i){var x=qs[i].replace(regexp,'%20'),idx=x.indexOf(eq),kstr,vstr,k,v;if(idx>=0){kstr=x.substr(0,idx);vstr=x.substr(idx+1);}else{kstr=x;vstr='';}
k=decodeURIComponent(kstr);v=decodeURIComponent(vstr);if(!hasOwnProperty(obj,k)){obj[k]=v;}else if(isArray(obj[k])){obj[k].push(v);}else{obj[k]=[obj[k],v];}}
return obj;};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==='[object Array]';};}),(function(module,exports,__webpack_require__){"use strict";var stringifyPrimitive=function(v){switch(typeof v){case 'string':return v;case 'boolean':return v?'true':'false';case 'number':return isFinite(v)?v:'';default:return '';}};module.exports=function(obj,sep,eq,name){sep=sep||'&';eq=eq||'=';if(obj===null){obj=undefined;}
if(typeof obj==='object'){return map(objectKeys(obj),function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;if(isArray(obj[k])){return map(obj[k],function(v){return ks+encodeURIComponent(stringifyPrimitive(v));}).join(sep);}else{return ks+encodeURIComponent(stringifyPrimitive(obj[k]));}}).join(sep);}
if(!name)return '';return encodeURIComponent(stringifyPrimitive(name))+eq+
encodeURIComponent(stringifyPrimitive(obj));};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==='[object Array]';};function map(xs,f){if(xs.map)return xs.map(f);var res=[];for(var i=0;i<xs.length;i++){res.push(f(xs[i],i));}
return res;}
var objectKeys=Object.keys||function(obj){var res=[];for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))res.push(key);}
return res;};}),(function(module,exports,__webpack_require__){"use strict";var Punycode=__webpack_require__(236);var internals={};internals.rules=__webpack_require__(802).map(function(rule){return{rule:rule,suffix:rule.replace(/^(\*\.|\!)/,''),punySuffix:-1,wildcard:rule.charAt(0)==='*',exception:rule.charAt(0)==='!'};});internals.endsWith=function(str,suffix){return str.indexOf(suffix,str.length-suffix.length)!==-1;};internals.findRule=function(domain){var punyDomain=Punycode.toASCII(domain);return internals.rules.reduce(function(memo,rule){if(rule.punySuffix===-1){rule.punySuffix=Punycode.toASCII(rule.suffix);}
if(!internals.endsWith(punyDomain,'.'+rule.punySuffix)&&punyDomain!==rule.punySuffix){return memo;}
return rule;},null);};exports.errorCodes={DOMAIN_TOO_SHORT:'Domain name too short.',DOMAIN_TOO_LONG:'Domain name too long. It should be no more than 255 chars.',LABEL_STARTS_WITH_DASH:'Domain name label can not start with a dash.',LABEL_ENDS_WITH_DASH:'Domain name label can not end with a dash.',LABEL_TOO_LONG:'Domain name label should be at most 63 chars long.',LABEL_TOO_SHORT:'Domain name label should be at least 1 character long.',LABEL_INVALID_CHARS:'Domain name label can only contain alphanumeric characters or dashes.'};internals.validate=function(input){var ascii=Punycode.toASCII(input);if(ascii.length<1){return 'DOMAIN_TOO_SHORT';}
if(ascii.length>255){return 'DOMAIN_TOO_LONG';}
var labels=ascii.split('.');var label;for(var i=0;i<labels.length;++i){label=labels[i];if(!label.length){return 'LABEL_TOO_SHORT';}
if(label.length>63){return 'LABEL_TOO_LONG';}
if(label.charAt(0)==='-'){return 'LABEL_STARTS_WITH_DASH';}
if(label.charAt(label.length-1)==='-'){return 'LABEL_ENDS_WITH_DASH';}
if(!/^[a-z0-9\-]+$/.test(label)){return 'LABEL_INVALID_CHARS';}}};exports.parse=function(input){if(typeof input!=='string'){throw new TypeError('Domain name must be a string.');}
var domain=input.slice(0).toLowerCase();if(domain.charAt(domain.length-1)==='.'){domain=domain.slice(0,domain.length-1);}
var error=internals.validate(domain);if(error){return{input:input,error:{message:exports.errorCodes[error],code:error}};}
var parsed={input:input,tld:null,sld:null,domain:null,subdomain:null,listed:false};var domainParts=domain.split('.');if(domainParts[domainParts.length-1]==='local'){return parsed;}
var handlePunycode=function(){if(!/xn--/.test(domain)){return parsed;}
if(parsed.domain){parsed.domain=Punycode.toASCII(parsed.domain);}
if(parsed.subdomain){parsed.subdomain=Punycode.toASCII(parsed.subdomain);}
return parsed;};var rule=internals.findRule(domain);if(!rule){if(domainParts.length<2){return parsed;}
parsed.tld=domainParts.pop();parsed.sld=domainParts.pop();parsed.domain=[parsed.sld,parsed.tld].join('.');if(domainParts.length){parsed.subdomain=domainParts.pop();}
return handlePunycode();}
parsed.listed=true;var tldParts=rule.suffix.split('.');var privateParts=domainParts.slice(0,domainParts.length-tldParts.length);if(rule.exception){privateParts.push(tldParts.shift());}
parsed.tld=tldParts.join('.');if(!privateParts.length){return handlePunycode();}
if(rule.wildcard){tldParts.unshift(privateParts.pop());parsed.tld=tldParts.join('.');}
if(!privateParts.length){return handlePunycode();}
parsed.sld=privateParts.pop();parsed.domain=[parsed.sld,parsed.tld].join('.');if(privateParts.length){parsed.subdomain=privateParts.join('.');}
return handlePunycode();};exports.get=function(domain){if(!domain){return null;}
return exports.parse(domain).domain||null;};exports.isValid=function(domain){var parsed=exports.parse(domain);return Boolean(parsed.domain&&parsed.listed);};}),(function(module,exports){module.exports=["ac","com.ac","edu.ac","gov.ac","net.ac","mil.ac","org.ac","ad","nom.ad","ae","co.ae","net.ae","org.ae","sch.ae","ac.ae","gov.ae","mil.ae","aero","accident-investigation.aero","accident-prevention.aero","aerobatic.aero","aeroclub.aero","aerodrome.aero","agents.aero","aircraft.aero","airline.aero","airport.aero","air-surveillance.aero","airtraffic.aero","air-traffic-control.aero","ambulance.aero","amusement.aero","association.aero","author.aero","ballooning.aero","broker.aero","caa.aero","cargo.aero","catering.aero","certification.aero","championship.aero","charter.aero","civilaviation.aero","club.aero","conference.aero","consultant.aero","consulting.aero","control.aero","council.aero","crew.aero","design.aero","dgca.aero","educator.aero","emergency.aero","engine.aero","engineer.aero","entertainment.aero","equipment.aero","exchange.aero","express.aero","federation.aero","flight.aero","freight.aero","fuel.aero","gliding.aero","government.aero","groundhandling.aero","group.aero","hanggliding.aero","homebuilt.aero","insurance.aero","journal.aero","journalist.aero","leasing.aero","logistics.aero","magazine.aero","maintenance.aero","media.aero","microlight.aero","modelling.aero","navigation.aero","parachuting.aero","paragliding.aero","passenger-association.aero","pilot.aero","press.aero","production.aero","recreation.aero","repbody.aero","res.aero","research.aero","rotorcraft.aero","safety.aero","scientist.aero","services.aero","show.aero","skydiving.aero","software.aero","student.aero","trader.aero","trading.aero","trainer.aero","union.aero","workinggroup.aero","works.aero","af","gov.af","com.af","org.af","net.af","edu.af","ag","com.ag","org.ag","net.ag","co.ag","nom.ag","ai","off.ai","com.ai","net.ai","org.ai","al","com.al","edu.al","gov.al","mil.al","net.al","org.al","am","ao","ed.ao","gv.ao","og.ao","co.ao","pb.ao","it.ao","aq","ar","com.ar","edu.ar","gob.ar","gov.ar","int.ar","mil.ar","musica.ar","net.ar","org.ar","tur.ar","arpa","e164.arpa","in-addr.arpa","ip6.arpa","iris.arpa","uri.arpa","urn.arpa","as","gov.as","asia","at","ac.at","co.at","gv.at","or.at","au","com.au","net.au","org.au","edu.au","gov.au","asn.au","id.au","info.au","conf.au","oz.au","act.au","nsw.au","nt.au","qld.au","sa.au","tas.au","vic.au","wa.au","act.edu.au","nsw.edu.au","nt.edu.au","qld.edu.au","sa.edu.au","tas.edu.au","vic.edu.au","wa.edu.au","qld.gov.au","sa.gov.au","tas.gov.au","vic.gov.au","wa.gov.au","aw","com.aw","ax","az","com.az","net.az","int.az","gov.az","org.az","edu.az","info.az","pp.az","mil.az","name.az","pro.az","biz.az","ba","com.ba","edu.ba","gov.ba","mil.ba","net.ba","org.ba","bb","biz.bb","co.bb","com.bb","edu.bb","gov.bb","info.bb","net.bb","org.bb","store.bb","tv.bb","*.bd","be","ac.be","bf","gov.bf","bg","a.bg","b.bg","c.bg","d.bg","e.bg","f.bg","g.bg","h.bg","i.bg","j.bg","k.bg","l.bg","m.bg","n.bg","o.bg","p.bg","q.bg","r.bg","s.bg","t.bg","u.bg","v.bg","w.bg","x.bg","y.bg","z.bg","0.bg","1.bg","2.bg","3.bg","4.bg","5.bg","6.bg","7.bg","8.bg","9.bg","bh","com.bh","edu.bh","net.bh","org.bh","gov.bh","bi","co.bi","com.bi","edu.bi","or.bi","org.bi","biz","bj","asso.bj","barreau.bj","gouv.bj","bm","com.bm","edu.bm","gov.bm","net.bm","org.bm","bn","com.bn","edu.bn","gov.bn","net.bn","org.bn","bo","com.bo","edu.bo","gob.bo","int.bo","org.bo","net.bo","mil.bo","tv.bo","web.bo","academia.bo","agro.bo","arte.bo","blog.bo","bolivia.bo","ciencia.bo","cooperativa.bo","democracia.bo","deporte.bo","ecologia.bo","economia.bo","empresa.bo","indigena.bo","industria.bo","info.bo","medicina.bo","movimiento.bo","musica.bo","natural.bo","nombre.bo","noticias.bo","patria.bo","politica.bo","profesional.bo","plurinacional.bo","pueblo.bo","revista.bo","salud.bo","tecnologia.bo","tksat.bo","transporte.bo","wiki.bo","br","9guacu.br","abc.br","adm.br","adv.br","agr.br","aju.br","am.br","anani.br","aparecida.br","arq.br","art.br","ato.br","b.br","barueri.br","belem.br","bhz.br","bio.br","blog.br","bmd.br","boavista.br","bsb.br","campinagrande.br","campinas.br","caxias.br","cim.br","cng.br","cnt.br","com.br","contagem.br","coop.br","cri.br","cuiaba.br","curitiba.br","def.br","ecn.br","eco.br","edu.br","emp.br","eng.br","esp.br","etc.br","eti.br","far.br","feira.br","flog.br","floripa.br","fm.br","fnd.br","fortal.br","fot.br","foz.br","fst.br","g12.br","ggf.br","goiania.br","gov.br","ac.gov.br","al.gov.br","am.gov.br","ap.gov.br","ba.gov.br","ce.gov.br","df.gov.br","es.gov.br","go.gov.br","ma.gov.br","mg.gov.br","ms.gov.br","mt.gov.br","pa.gov.br","pb.gov.br","pe.gov.br","pi.gov.br","pr.gov.br","rj.gov.br","rn.gov.br","ro.gov.br","rr.gov.br","rs.gov.br","sc.gov.br","se.gov.br","sp.gov.br","to.gov.br","gru.br","imb.br","ind.br","inf.br","jab.br","jampa.br","jdf.br","joinville.br","jor.br","jus.br","leg.br","lel.br","londrina.br","macapa.br","maceio.br","manaus.br","maringa.br","mat.br","med.br","mil.br","morena.br","mp.br","mus.br","natal.br","net.br","niteroi.br","*.nom.br","not.br","ntr.br","odo.br","ong.br","org.br","osasco.br","palmas.br","poa.br","ppg.br","pro.br","psc.br","psi.br","pvh.br","qsl.br","radio.br","rec.br","recife.br","ribeirao.br","rio.br","riobranco.br","riopreto.br","salvador.br","sampa.br","santamaria.br","santoandre.br","saobernardo.br","saogonca.br","sjc.br","slg.br","slz.br","sorocaba.br","srv.br","taxi.br","teo.br","the.br","tmp.br","trd.br","tur.br","tv.br","udi.br","vet.br","vix.br","vlog.br","wiki.br","zlg.br","bs","com.bs","net.bs","org.bs","edu.bs","gov.bs","bt","com.bt","edu.bt","gov.bt","net.bt","org.bt","bv","bw","co.bw","org.bw","by","gov.by","mil.by","com.by","of.by","bz","com.bz","net.bz","org.bz","edu.bz","gov.bz","ca","ab.ca","bc.ca","mb.ca","nb.ca","nf.ca","nl.ca","ns.ca","nt.ca","nu.ca","on.ca","pe.ca","qc.ca","sk.ca","yk.ca","gc.ca","cat","cc","cd","gov.cd","cf","cg","ch","ci","org.ci","or.ci","com.ci","co.ci","edu.ci","ed.ci","ac.ci","net.ci","go.ci","asso.ci","aéroport.ci","int.ci","presse.ci","md.ci","gouv.ci","*.ck","!www.ck","cl","gov.cl","gob.cl","co.cl","mil.cl","cm","co.cm","com.cm","gov.cm","net.cm","cn","ac.cn","com.cn","edu.cn","gov.cn","net.cn","org.cn","mil.cn","公司.cn","网络.cn","網絡.cn","ah.cn","bj.cn","cq.cn","fj.cn","gd.cn","gs.cn","gz.cn","gx.cn","ha.cn","hb.cn","he.cn","hi.cn","hl.cn","hn.cn","jl.cn","js.cn","jx.cn","ln.cn","nm.cn","nx.cn","qh.cn","sc.cn","sd.cn","sh.cn","sn.cn","sx.cn","tj.cn","xj.cn","xz.cn","yn.cn","zj.cn","hk.cn","mo.cn","tw.cn","co","arts.co","com.co","edu.co","firm.co","gov.co","info.co","int.co","mil.co","net.co","nom.co","org.co","rec.co","web.co","com","coop","cr","ac.cr","co.cr","ed.cr","fi.cr","go.cr","or.cr","sa.cr","cu","com.cu","edu.cu","org.cu","net.cu","gov.cu","inf.cu","cv","cw","com.cw","edu.cw","net.cw","org.cw","cx","gov.cx","cy","ac.cy","biz.cy","com.cy","ekloges.cy","gov.cy","ltd.cy","name.cy","net.cy","org.cy","parliament.cy","press.cy","pro.cy","tm.cy","cz","de","dj","dk","dm","com.dm","net.dm","org.dm","edu.dm","gov.dm","do","art.do","com.do","edu.do","gob.do","gov.do","mil.do","net.do","org.do","sld.do","web.do","dz","com.dz","org.dz","net.dz","gov.dz","edu.dz","asso.dz","pol.dz","art.dz","ec","com.ec","info.ec","net.ec","fin.ec","k12.ec","med.ec","pro.ec","org.ec","edu.ec","gov.ec","gob.ec","mil.ec","edu","ee","edu.ee","gov.ee","riik.ee","lib.ee","med.ee","com.ee","pri.ee","aip.ee","org.ee","fie.ee","eg","com.eg","edu.eg","eun.eg","gov.eg","mil.eg","name.eg","net.eg","org.eg","sci.eg","*.er","es","com.es","nom.es","org.es","gob.es","edu.es","et","com.et","gov.et","org.et","edu.et","biz.et","name.et","info.et","net.et","eu","fi","aland.fi","*.fj","*.fk","fm","fo","fr","com.fr","asso.fr","nom.fr","prd.fr","presse.fr","tm.fr","aeroport.fr","assedic.fr","avocat.fr","avoues.fr","cci.fr","chambagri.fr","chirurgiens-dentistes.fr","experts-comptables.fr","geometre-expert.fr","gouv.fr","greta.fr","huissier-justice.fr","medecin.fr","notaires.fr","pharmacien.fr","port.fr","veterinaire.fr","ga","gb","gd","ge","com.ge","edu.ge","gov.ge","org.ge","mil.ge","net.ge","pvt.ge","gf","gg","co.gg","net.gg","org.gg","gh","com.gh","edu.gh","gov.gh","org.gh","mil.gh","gi","com.gi","ltd.gi","gov.gi","mod.gi","edu.gi","org.gi","gl","co.gl","com.gl","edu.gl","net.gl","org.gl","gm","gn","ac.gn","com.gn","edu.gn","gov.gn","org.gn","net.gn","gov","gp","com.gp","net.gp","mobi.gp","edu.gp","org.gp","asso.gp","gq","gr","com.gr","edu.gr","net.gr","org.gr","gov.gr","gs","gt","com.gt","edu.gt","gob.gt","ind.gt","mil.gt","net.gt","org.gt","gu","com.gu","edu.gu","gov.gu","guam.gu","info.gu","net.gu","org.gu","web.gu","gw","gy","co.gy","com.gy","edu.gy","gov.gy","net.gy","org.gy","hk","com.hk","edu.hk","gov.hk","idv.hk","net.hk","org.hk","公司.hk","教育.hk","敎育.hk","政府.hk","個人.hk","个人.hk","箇人.hk","網络.hk","网络.hk","组織.hk","網絡.hk","网絡.hk","组织.hk","組織.hk","組织.hk","hm","hn","com.hn","edu.hn","org.hn","net.hn","mil.hn","gob.hn","hr","iz.hr","from.hr","name.hr","com.hr","ht","com.ht","shop.ht","firm.ht","info.ht","adult.ht","net.ht","pro.ht","org.ht","med.ht","art.ht","coop.ht","pol.ht","asso.ht","edu.ht","rel.ht","gouv.ht","perso.ht","hu","co.hu","info.hu","org.hu","priv.hu","sport.hu","tm.hu","2000.hu","agrar.hu","bolt.hu","casino.hu","city.hu","erotica.hu","erotika.hu","film.hu","forum.hu","games.hu","hotel.hu","ingatlan.hu","jogasz.hu","konyvelo.hu","lakas.hu","media.hu","news.hu","reklam.hu","sex.hu","shop.hu","suli.hu","szex.hu","tozsde.hu","utazas.hu","video.hu","id","ac.id","biz.id","co.id","desa.id","go.id","mil.id","my.id","net.id","or.id","ponpes.id","sch.id","web.id","ie","gov.ie","il","ac.il","co.il","gov.il","idf.il","k12.il","muni.il","net.il","org.il","im","ac.im","co.im","com.im","ltd.co.im","net.im","org.im","plc.co.im","tt.im","tv.im","in","co.in","firm.in","net.in","org.in","gen.in","ind.in","nic.in","ac.in","edu.in","res.in","gov.in","mil.in","info","int","eu.int","io","com.io","iq","gov.iq","edu.iq","mil.iq","com.iq","org.iq","net.iq","ir","ac.ir","co.ir","gov.ir","id.ir","net.ir","org.ir","sch.ir","ایران.ir","ايران.ir","is","net.is","com.is","edu.is","gov.is","org.is","int.is","it","gov.it","edu.it","abr.it","abruzzo.it","aosta-valley.it","aostavalley.it","bas.it","basilicata.it","cal.it","calabria.it","cam.it","campania.it","emilia-romagna.it","emiliaromagna.it","emr.it","friuli-v-giulia.it","friuli-ve-giulia.it","friuli-vegiulia.it","friuli-venezia-giulia.it","friuli-veneziagiulia.it","friuli-vgiulia.it","friuliv-giulia.it","friulive-giulia.it","friulivegiulia.it","friulivenezia-giulia.it","friuliveneziagiulia.it","friulivgiulia.it","fvg.it","laz.it","lazio.it","lig.it","liguria.it","lom.it","lombardia.it","lombardy.it","lucania.it","mar.it","marche.it","mol.it","molise.it","piedmont.it","piemonte.it","pmn.it","pug.it","puglia.it","sar.it","sardegna.it","sardinia.it","sic.it","sicilia.it","sicily.it","taa.it","tos.it","toscana.it","trentin-sud-tirol.it","trentin-süd-tirol.it","trentin-sudtirol.it","trentin-südtirol.it","trentin-sued-tirol.it","trentin-suedtirol.it","trentino-a-adige.it","trentino-aadige.it","trentino-alto-adige.it","trentino-altoadige.it","trentino-s-tirol.it","trentino-stirol.it","trentino-sud-tirol.it","trentino-süd-tirol.it","trentino-sudtirol.it","trentino-südtirol.it","trentino-sued-tirol.it","trentino-suedtirol.it","trentino.it","trentinoa-adige.it","trentinoaadige.it","trentinoalto-adige.it","trentinoaltoadige.it","trentinos-tirol.it","trentinostirol.it","trentinosud-tirol.it","trentinosüd-tirol.it","trentinosudtirol.it","trentinosüdtirol.it","trentinosued-tirol.it","trentinosuedtirol.it","trentinsud-tirol.it","trentinsüd-tirol.it","trentinsudtirol.it","trentinsüdtirol.it","trentinsued-tirol.it","trentinsuedtirol.it","tuscany.it","umb.it","umbria.it","val-d-aosta.it","val-daosta.it","vald-aosta.it","valdaosta.it","valle-aosta.it","valle-d-aosta.it","valle-daosta.it","valleaosta.it","valled-aosta.it","valledaosta.it","vallee-aoste.it","vallée-aoste.it","vallee-d-aoste.it","vallée-d-aoste.it","valleeaoste.it","valléeaoste.it","valleedaoste.it","valléedaoste.it","vao.it","vda.it","ven.it","veneto.it","ag.it","agrigento.it","al.it","alessandria.it","alto-adige.it","altoadige.it","an.it","ancona.it","andria-barletta-trani.it","andria-trani-barletta.it","andriabarlettatrani.it","andriatranibarletta.it","ao.it","aosta.it","aoste.it","ap.it","aq.it","aquila.it","ar.it","arezzo.it","ascoli-piceno.it","ascolipiceno.it","asti.it","at.it","av.it","avellino.it","ba.it","balsan-sudtirol.it","balsan-südtirol.it","balsan-suedtirol.it","balsan.it","bari.it","barletta-trani-andria.it","barlettatraniandria.it","belluno.it","benevento.it","bergamo.it","bg.it","bi.it","biella.it","bl.it","bn.it","bo.it","bologna.it","bolzano-altoadige.it","bolzano.it","bozen-sudtirol.it","bozen-südtirol.it","bozen-suedtirol.it","bozen.it","br.it","brescia.it","brindisi.it","bs.it","bt.it","bulsan-sudtirol.it","bulsan-südtirol.it","bulsan-suedtirol.it","bulsan.it","bz.it","ca.it","cagliari.it","caltanissetta.it","campidano-medio.it","campidanomedio.it","campobasso.it","carbonia-iglesias.it","carboniaiglesias.it","carrara-massa.it","carraramassa.it","caserta.it","catania.it","catanzaro.it","cb.it","ce.it","cesena-forli.it","cesena-forlì.it","cesenaforli.it","cesenaforlì.it","ch.it","chieti.it","ci.it","cl.it","cn.it","co.it","como.it","cosenza.it","cr.it","cremona.it","crotone.it","cs.it","ct.it","cuneo.it","cz.it","dell-ogliastra.it","dellogliastra.it","en.it","enna.it","fc.it","fe.it","fermo.it","ferrara.it","fg.it","fi.it","firenze.it","florence.it","fm.it","foggia.it","forli-cesena.it","forlì-cesena.it","forlicesena.it","forlìcesena.it","fr.it","frosinone.it","ge.it","genoa.it","genova.it","go.it","gorizia.it","gr.it","grosseto.it","iglesias-carbonia.it","iglesiascarbonia.it","im.it","imperia.it","is.it","isernia.it","kr.it","la-spezia.it","laquila.it","laspezia.it","latina.it","lc.it","le.it","lecce.it","lecco.it","li.it","livorno.it","lo.it","lodi.it","lt.it","lu.it","lucca.it","macerata.it","mantova.it","massa-carrara.it","massacarrara.it","matera.it","mb.it","mc.it","me.it","medio-campidano.it","mediocampidano.it","messina.it","mi.it","milan.it","milano.it","mn.it","mo.it","modena.it","monza-brianza.it","monza-e-della-brianza.it","monza.it","monzabrianza.it","monzaebrianza.it","monzaedellabrianza.it","ms.it","mt.it","na.it","naples.it","napoli.it","no.it","novara.it","nu.it","nuoro.it","og.it","ogliastra.it","olbia-tempio.it","olbiatempio.it","or.it","oristano.it","ot.it","pa.it","padova.it","padua.it","palermo.it","parma.it","pavia.it","pc.it","pd.it","pe.it","perugia.it","pesaro-urbino.it","pesarourbino.it","pescara.it","pg.it","pi.it","piacenza.it","pisa.it","pistoia.it","pn.it","po.it","pordenone.it","potenza.it","pr.it","prato.it","pt.it","pu.it","pv.it","pz.it","ra.it","ragusa.it","ravenna.it","rc.it","re.it","reggio-calabria.it","reggio-emilia.it","reggiocalabria.it","reggioemilia.it","rg.it","ri.it","rieti.it","rimini.it","rm.it","rn.it","ro.it","roma.it","rome.it","rovigo.it","sa.it","salerno.it","sassari.it","savona.it","si.it","siena.it","siracusa.it","so.it","sondrio.it","sp.it","sr.it","ss.it","suedtirol.it","südtirol.it","sv.it","ta.it","taranto.it","te.it","tempio-olbia.it","tempioolbia.it","teramo.it","terni.it","tn.it","to.it","torino.it","tp.it","tr.it","trani-andria-barletta.it","trani-barletta-andria.it","traniandriabarletta.it","tranibarlettaandria.it","trapani.it","trento.it","treviso.it","trieste.it","ts.it","turin.it","tv.it","ud.it","udine.it","urbino-pesaro.it","urbinopesaro.it","va.it","varese.it","vb.it","vc.it","ve.it","venezia.it","venice.it","verbania.it","vercelli.it","verona.it","vi.it","vibo-valentia.it","vibovalentia.it","vicenza.it","viterbo.it","vr.it","vs.it","vt.it","vv.it","je","co.je","net.je","org.je","*.jm","jo","com.jo","org.jo","net.jo","edu.jo","sch.jo","gov.jo","mil.jo","name.jo","jobs","jp","ac.jp","ad.jp","co.jp","ed.jp","go.jp","gr.jp","lg.jp","ne.jp","or.jp","aichi.jp","akita.jp","aomori.jp","chiba.jp","ehime.jp","fukui.jp","fukuoka.jp","fukushima.jp","gifu.jp","gunma.jp","hiroshima.jp","hokkaido.jp","hyogo.jp","ibaraki.jp","ishikawa.jp","iwate.jp","kagawa.jp","kagoshima.jp","kanagawa.jp","kochi.jp","kumamoto.jp","kyoto.jp","mie.jp","miyagi.jp","miyazaki.jp","nagano.jp","nagasaki.jp","nara.jp","niigata.jp","oita.jp","okayama.jp","okinawa.jp","osaka.jp","saga.jp","saitama.jp","shiga.jp","shimane.jp","shizuoka.jp","tochigi.jp","tokushima.jp","tokyo.jp","tottori.jp","toyama.jp","wakayama.jp","yamagata.jp","yamaguchi.jp","yamanashi.jp","栃木.jp","愛知.jp","愛媛.jp","兵庫.jp","熊本.jp","茨城.jp","北海道.jp","千葉.jp","和歌山.jp","長崎.jp","長野.jp","新潟.jp","青森.jp","静岡.jp","東京.jp","石川.jp","埼玉.jp","三重.jp","京都.jp","佐賀.jp","大分.jp","大阪.jp","奈良.jp","宮城.jp","宮崎.jp","富山.jp","山口.jp","山形.jp","山梨.jp","岩手.jp","岐阜.jp","岡山.jp","島根.jp","広島.jp","徳島.jp","沖縄.jp","滋賀.jp","神奈川.jp","福井.jp","福岡.jp","福島.jp","秋田.jp","群馬.jp","香川.jp","高知.jp","鳥取.jp","鹿児島.jp","*.kawasaki.jp","*.kitakyushu.jp","*.kobe.jp","*.nagoya.jp","*.sapporo.jp","*.sendai.jp","*.yokohama.jp","!city.kawasaki.jp","!city.kitakyushu.jp","!city.kobe.jp","!city.nagoya.jp","!city.sapporo.jp","!city.sendai.jp","!city.yokohama.jp","aisai.aichi.jp","ama.aichi.jp","anjo.aichi.jp","asuke.aichi.jp","chiryu.aichi.jp","chita.aichi.jp","fuso.aichi.jp","gamagori.aichi.jp","handa.aichi.jp","hazu.aichi.jp","hekinan.aichi.jp","higashiura.aichi.jp","ichinomiya.aichi.jp","inazawa.aichi.jp","inuyama.aichi.jp","isshiki.aichi.jp","iwakura.aichi.jp","kanie.aichi.jp","kariya.aichi.jp","kasugai.aichi.jp","kira.aichi.jp","kiyosu.aichi.jp","komaki.aichi.jp","konan.aichi.jp","kota.aichi.jp","mihama.aichi.jp","miyoshi.aichi.jp","nishio.aichi.jp","nisshin.aichi.jp","obu.aichi.jp","oguchi.aichi.jp","oharu.aichi.jp","okazaki.aichi.jp","owariasahi.aichi.jp","seto.aichi.jp","shikatsu.aichi.jp","shinshiro.aichi.jp","shitara.aichi.jp","tahara.aichi.jp","takahama.aichi.jp","tobishima.aichi.jp","toei.aichi.jp","togo.aichi.jp","tokai.aichi.jp","tokoname.aichi.jp","toyoake.aichi.jp","toyohashi.aichi.jp","toyokawa.aichi.jp","toyone.aichi.jp","toyota.aichi.jp","tsushima.aichi.jp","yatomi.aichi.jp","akita.akita.jp","daisen.akita.jp","fujisato.akita.jp","gojome.akita.jp","hachirogata.akita.jp","happou.akita.jp","higashinaruse.akita.jp","honjo.akita.jp","honjyo.akita.jp","ikawa.akita.jp","kamikoani.akita.jp","kamioka.akita.jp","katagami.akita.jp","kazuno.akita.jp","kitaakita.akita.jp","kosaka.akita.jp","kyowa.akita.jp","misato.akita.jp","mitane.akita.jp","moriyoshi.akita.jp","nikaho.akita.jp","noshiro.akita.jp","odate.akita.jp","oga.akita.jp","ogata.akita.jp","semboku.akita.jp","yokote.akita.jp","yurihonjo.akita.jp","aomori.aomori.jp","gonohe.aomori.jp","hachinohe.aomori.jp","hashikami.aomori.jp","hiranai.aomori.jp","hirosaki.aomori.jp","itayanagi.aomori.jp","kuroishi.aomori.jp","misawa.aomori.jp","mutsu.aomori.jp","nakadomari.aomori.jp","noheji.aomori.jp","oirase.aomori.jp","owani.aomori.jp","rokunohe.aomori.jp","sannohe.aomori.jp","shichinohe.aomori.jp","shingo.aomori.jp","takko.aomori.jp","towada.aomori.jp","tsugaru.aomori.jp","tsuruta.aomori.jp","abiko.chiba.jp","asahi.chiba.jp","chonan.chiba.jp","chosei.chiba.jp","choshi.chiba.jp","chuo.chiba.jp","funabashi.chiba.jp","futtsu.chiba.jp","hanamigawa.chiba.jp","ichihara.chiba.jp","ichikawa.chiba.jp","ichinomiya.chiba.jp","inzai.chiba.jp","isumi.chiba.jp","kamagaya.chiba.jp","kamogawa.chiba.jp","kashiwa.chiba.jp","katori.chiba.jp","katsuura.chiba.jp","kimitsu.chiba.jp","kisarazu.chiba.jp","kozaki.chiba.jp","kujukuri.chiba.jp","kyonan.chiba.jp","matsudo.chiba.jp","midori.chiba.jp","mihama.chiba.jp","minamiboso.chiba.jp","mobara.chiba.jp","mutsuzawa.chiba.jp","nagara.chiba.jp","nagareyama.chiba.jp","narashino.chiba.jp","narita.chiba.jp","noda.chiba.jp","oamishirasato.chiba.jp","omigawa.chiba.jp","onjuku.chiba.jp","otaki.chiba.jp","sakae.chiba.jp","sakura.chiba.jp","shimofusa.chiba.jp","shirako.chiba.jp","shiroi.chiba.jp","shisui.chiba.jp","sodegaura.chiba.jp","sosa.chiba.jp","tako.chiba.jp","tateyama.chiba.jp","togane.chiba.jp","tohnosho.chiba.jp","tomisato.chiba.jp","urayasu.chiba.jp","yachimata.chiba.jp","yachiyo.chiba.jp","yokaichiba.chiba.jp","yokoshibahikari.chiba.jp","yotsukaido.chiba.jp","ainan.ehime.jp","honai.ehime.jp","ikata.ehime.jp","imabari.ehime.jp","iyo.ehime.jp","kamijima.ehime.jp","kihoku.ehime.jp","kumakogen.ehime.jp","masaki.ehime.jp","matsuno.ehime.jp","matsuyama.ehime.jp","namikata.ehime.jp","niihama.ehime.jp","ozu.ehime.jp","saijo.ehime.jp","seiyo.ehime.jp","shikokuchuo.ehime.jp","tobe.ehime.jp","toon.ehime.jp","uchiko.ehime.jp","uwajima.ehime.jp","yawatahama.ehime.jp","echizen.fukui.jp","eiheiji.fukui.jp","fukui.fukui.jp","ikeda.fukui.jp","katsuyama.fukui.jp","mihama.fukui.jp","minamiechizen.fukui.jp","obama.fukui.jp","ohi.fukui.jp","ono.fukui.jp","sabae.fukui.jp","sakai.fukui.jp","takahama.fukui.jp","tsuruga.fukui.jp","wakasa.fukui.jp","ashiya.fukuoka.jp","buzen.fukuoka.jp","chikugo.fukuoka.jp","chikuho.fukuoka.jp","chikujo.fukuoka.jp","chikushino.fukuoka.jp","chikuzen.fukuoka.jp","chuo.fukuoka.jp","dazaifu.fukuoka.jp","fukuchi.fukuoka.jp","hakata.fukuoka.jp","higashi.fukuoka.jp","hirokawa.fukuoka.jp","hisayama.fukuoka.jp","iizuka.fukuoka.jp","inatsuki.fukuoka.jp","kaho.fukuoka.jp","kasuga.fukuoka.jp","kasuya.fukuoka.jp","kawara.fukuoka.jp","keisen.fukuoka.jp","koga.fukuoka.jp","kurate.fukuoka.jp","kurogi.fukuoka.jp","kurume.fukuoka.jp","minami.fukuoka.jp","miyako.fukuoka.jp","miyama.fukuoka.jp","miyawaka.fukuoka.jp","mizumaki.fukuoka.jp","munakata.fukuoka.jp","nakagawa.fukuoka.jp","nakama.fukuoka.jp","nishi.fukuoka.jp","nogata.fukuoka.jp","ogori.fukuoka.jp","okagaki.fukuoka.jp","okawa.fukuoka.jp","oki.fukuoka.jp","omuta.fukuoka.jp","onga.fukuoka.jp","onojo.fukuoka.jp","oto.fukuoka.jp","saigawa.fukuoka.jp","sasaguri.fukuoka.jp","shingu.fukuoka.jp","shinyoshitomi.fukuoka.jp","shonai.fukuoka.jp","soeda.fukuoka.jp","sue.fukuoka.jp","tachiarai.fukuoka.jp","tagawa.fukuoka.jp","takata.fukuoka.jp","toho.fukuoka.jp","toyotsu.fukuoka.jp","tsuiki.fukuoka.jp","ukiha.fukuoka.jp","umi.fukuoka.jp","usui.fukuoka.jp","yamada.fukuoka.jp","yame.fukuoka.jp","yanagawa.fukuoka.jp","yukuhashi.fukuoka.jp","aizubange.fukushima.jp","aizumisato.fukushima.jp","aizuwakamatsu.fukushima.jp","asakawa.fukushima.jp","bandai.fukushima.jp","date.fukushima.jp","fukushima.fukushima.jp","furudono.fukushima.jp","futaba.fukushima.jp","hanawa.fukushima.jp","higashi.fukushima.jp","hirata.fukushima.jp","hirono.fukushima.jp","iitate.fukushima.jp","inawashiro.fukushima.jp","ishikawa.fukushima.jp","iwaki.fukushima.jp","izumizaki.fukushima.jp","kagamiishi.fukushima.jp","kaneyama.fukushima.jp","kawamata.fukushima.jp","kitakata.fukushima.jp","kitashiobara.fukushima.jp","koori.fukushima.jp","koriyama.fukushima.jp","kunimi.fukushima.jp","miharu.fukushima.jp","mishima.fukushima.jp","namie.fukushima.jp","nango.fukushima.jp","nishiaizu.fukushima.jp","nishigo.fukushima.jp","okuma.fukushima.jp","omotego.fukushima.jp","ono.fukushima.jp","otama.fukushima.jp","samegawa.fukushima.jp","shimogo.fukushima.jp","shirakawa.fukushima.jp","showa.fukushima.jp","soma.fukushima.jp","sukagawa.fukushima.jp","taishin.fukushima.jp","tamakawa.fukushima.jp","tanagura.fukushima.jp","tenei.fukushima.jp","yabuki.fukushima.jp","yamato.fukushima.jp","yamatsuri.fukushima.jp","yanaizu.fukushima.jp","yugawa.fukushima.jp","anpachi.gifu.jp","ena.gifu.jp","gifu.gifu.jp","ginan.gifu.jp","godo.gifu.jp","gujo.gifu.jp","hashima.gifu.jp","hichiso.gifu.jp","hida.gifu.jp","higashishirakawa.gifu.jp","ibigawa.gifu.jp","ikeda.gifu.jp","kakamigahara.gifu.jp","kani.gifu.jp","kasahara.gifu.jp","kasamatsu.gifu.jp","kawaue.gifu.jp","kitagata.gifu.jp","mino.gifu.jp","minokamo.gifu.jp","mitake.gifu.jp","mizunami.gifu.jp","motosu.gifu.jp","nakatsugawa.gifu.jp","ogaki.gifu.jp","sakahogi.gifu.jp","seki.gifu.jp","sekigahara.gifu.jp","shirakawa.gifu.jp","tajimi.gifu.jp","takayama.gifu.jp","tarui.gifu.jp","toki.gifu.jp","tomika.gifu.jp","wanouchi.gifu.jp","yamagata.gifu.jp","yaotsu.gifu.jp","yoro.gifu.jp","annaka.gunma.jp","chiyoda.gunma.jp","fujioka.gunma.jp","higashiagatsuma.gunma.jp","isesaki.gunma.jp","itakura.gunma.jp","kanna.gunma.jp","kanra.gunma.jp","katashina.gunma.jp","kawaba.gunma.jp","kiryu.gunma.jp","kusatsu.gunma.jp","maebashi.gunma.jp","meiwa.gunma.jp","midori.gunma.jp","minakami.gunma.jp","naganohara.gunma.jp","nakanojo.gunma.jp","nanmoku.gunma.jp","numata.gunma.jp","oizumi.gunma.jp","ora.gunma.jp","ota.gunma.jp","shibukawa.gunma.jp","shimonita.gunma.jp","shinto.gunma.jp","showa.gunma.jp","takasaki.gunma.jp","takayama.gunma.jp","tamamura.gunma.jp","tatebayashi.gunma.jp","tomioka.gunma.jp","tsukiyono.gunma.jp","tsumagoi.gunma.jp","ueno.gunma.jp","yoshioka.gunma.jp","asaminami.hiroshima.jp","daiwa.hiroshima.jp","etajima.hiroshima.jp","fuchu.hiroshima.jp","fukuyama.hiroshima.jp","hatsukaichi.hiroshima.jp","higashihiroshima.hiroshima.jp","hongo.hiroshima.jp","jinsekikogen.hiroshima.jp","kaita.hiroshima.jp","kui.hiroshima.jp","kumano.hiroshima.jp","kure.hiroshima.jp","mihara.hiroshima.jp","miyoshi.hiroshima.jp","naka.hiroshima.jp","onomichi.hiroshima.jp","osakikamijima.hiroshima.jp","otake.hiroshima.jp","saka.hiroshima.jp","sera.hiroshima.jp","seranishi.hiroshima.jp","shinichi.hiroshima.jp","shobara.hiroshima.jp","takehara.hiroshima.jp","abashiri.hokkaido.jp","abira.hokkaido.jp","aibetsu.hokkaido.jp","akabira.hokkaido.jp","akkeshi.hokkaido.jp","asahikawa.hokkaido.jp","ashibetsu.hokkaido.jp","ashoro.hokkaido.jp","assabu.hokkaido.jp","atsuma.hokkaido.jp","bibai.hokkaido.jp","biei.hokkaido.jp","bifuka.hokkaido.jp","bihoro.hokkaido.jp","biratori.hokkaido.jp","chippubetsu.hokkaido.jp","chitose.hokkaido.jp","date.hokkaido.jp","ebetsu.hokkaido.jp","embetsu.hokkaido.jp","eniwa.hokkaido.jp","erimo.hokkaido.jp","esan.hokkaido.jp","esashi.hokkaido.jp","fukagawa.hokkaido.jp","fukushima.hokkaido.jp","furano.hokkaido.jp","furubira.hokkaido.jp","haboro.hokkaido.jp","hakodate.hokkaido.jp","hamatonbetsu.hokkaido.jp","hidaka.hokkaido.jp","higashikagura.hokkaido.jp","higashikawa.hokkaido.jp","hiroo.hokkaido.jp","hokuryu.hokkaido.jp","hokuto.hokkaido.jp","honbetsu.hokkaido.jp","horokanai.hokkaido.jp","horonobe.hokkaido.jp","ikeda.hokkaido.jp","imakane.hokkaido.jp","ishikari.hokkaido.jp","iwamizawa.hokkaido.jp","iwanai.hokkaido.jp","kamifurano.hokkaido.jp","kamikawa.hokkaido.jp","kamishihoro.hokkaido.jp","kamisunagawa.hokkaido.jp","kamoenai.hokkaido.jp","kayabe.hokkaido.jp","kembuchi.hokkaido.jp","kikonai.hokkaido.jp","kimobetsu.hokkaido.jp","kitahiroshima.hokkaido.jp","kitami.hokkaido.jp","kiyosato.hokkaido.jp","koshimizu.hokkaido.jp","kunneppu.hokkaido.jp","kuriyama.hokkaido.jp","kuromatsunai.hokkaido.jp","kushiro.hokkaido.jp","kutchan.hokkaido.jp","kyowa.hokkaido.jp","mashike.hokkaido.jp","matsumae.hokkaido.jp","mikasa.hokkaido.jp","minamifurano.hokkaido.jp","mombetsu.hokkaido.jp","moseushi.hokkaido.jp","mukawa.hokkaido.jp","muroran.hokkaido.jp","naie.hokkaido.jp","nakagawa.hokkaido.jp","nakasatsunai.hokkaido.jp","nakatombetsu.hokkaido.jp","nanae.hokkaido.jp","nanporo.hokkaido.jp","nayoro.hokkaido.jp","nemuro.hokkaido.jp","niikappu.hokkaido.jp","niki.hokkaido.jp","nishiokoppe.hokkaido.jp","noboribetsu.hokkaido.jp","numata.hokkaido.jp","obihiro.hokkaido.jp","obira.hokkaido.jp","oketo.hokkaido.jp","okoppe.hokkaido.jp","otaru.hokkaido.jp","otobe.hokkaido.jp","otofuke.hokkaido.jp","otoineppu.hokkaido.jp","oumu.hokkaido.jp","ozora.hokkaido.jp","pippu.hokkaido.jp","rankoshi.hokkaido.jp","rebun.hokkaido.jp","rikubetsu.hokkaido.jp","rishiri.hokkaido.jp","rishirifuji.hokkaido.jp","saroma.hokkaido.jp","sarufutsu.hokkaido.jp","shakotan.hokkaido.jp","shari.hokkaido.jp","shibecha.hokkaido.jp","shibetsu.hokkaido.jp","shikabe.hokkaido.jp","shikaoi.hokkaido.jp","shimamaki.hokkaido.jp","shimizu.hokkaido.jp","shimokawa.hokkaido.jp","shinshinotsu.hokkaido.jp","shintoku.hokkaido.jp","shiranuka.hokkaido.jp","shiraoi.hokkaido.jp","shiriuchi.hokkaido.jp","sobetsu.hokkaido.jp","sunagawa.hokkaido.jp","taiki.hokkaido.jp","takasu.hokkaido.jp","takikawa.hokkaido.jp","takinoue.hokkaido.jp","teshikaga.hokkaido.jp","tobetsu.hokkaido.jp","tohma.hokkaido.jp","tomakomai.hokkaido.jp","tomari.hokkaido.jp","toya.hokkaido.jp","toyako.hokkaido.jp","toyotomi.hokkaido.jp","toyoura.hokkaido.jp","tsubetsu.hokkaido.jp","tsukigata.hokkaido.jp","urakawa.hokkaido.jp","urausu.hokkaido.jp","uryu.hokkaido.jp","utashinai.hokkaido.jp","wakkanai.hokkaido.jp","wassamu.hokkaido.jp","yakumo.hokkaido.jp","yoichi.hokkaido.jp","aioi.hyogo.jp","akashi.hyogo.jp","ako.hyogo.jp","amagasaki.hyogo.jp","aogaki.hyogo.jp","asago.hyogo.jp","ashiya.hyogo.jp","awaji.hyogo.jp","fukusaki.hyogo.jp","goshiki.hyogo.jp","harima.hyogo.jp","himeji.hyogo.jp","ichikawa.hyogo.jp","inagawa.hyogo.jp","itami.hyogo.jp","kakogawa.hyogo.jp","kamigori.hyogo.jp","kamikawa.hyogo.jp","kasai.hyogo.jp","kasuga.hyogo.jp","kawanishi.hyogo.jp","miki.hyogo.jp","minamiawaji.hyogo.jp","nishinomiya.hyogo.jp","nishiwaki.hyogo.jp","ono.hyogo.jp","sanda.hyogo.jp","sannan.hyogo.jp","sasayama.hyogo.jp","sayo.hyogo.jp","shingu.hyogo.jp","shinonsen.hyogo.jp","shiso.hyogo.jp","sumoto.hyogo.jp","taishi.hyogo.jp","taka.hyogo.jp","takarazuka.hyogo.jp","takasago.hyogo.jp","takino.hyogo.jp","tamba.hyogo.jp","tatsuno.hyogo.jp","toyooka.hyogo.jp","yabu.hyogo.jp","yashiro.hyogo.jp","yoka.hyogo.jp","yokawa.hyogo.jp","ami.ibaraki.jp","asahi.ibaraki.jp","bando.ibaraki.jp","chikusei.ibaraki.jp","daigo.ibaraki.jp","fujishiro.ibaraki.jp","hitachi.ibaraki.jp","hitachinaka.ibaraki.jp","hitachiomiya.ibaraki.jp","hitachiota.ibaraki.jp","ibaraki.ibaraki.jp","ina.ibaraki.jp","inashiki.ibaraki.jp","itako.ibaraki.jp","iwama.ibaraki.jp","joso.ibaraki.jp","kamisu.ibaraki.jp","kasama.ibaraki.jp","kashima.ibaraki.jp","kasumigaura.ibaraki.jp","koga.ibaraki.jp","miho.ibaraki.jp","mito.ibaraki.jp","moriya.ibaraki.jp","naka.ibaraki.jp","namegata.ibaraki.jp","oarai.ibaraki.jp","ogawa.ibaraki.jp","omitama.ibaraki.jp","ryugasaki.ibaraki.jp","sakai.ibaraki.jp","sakuragawa.ibaraki.jp","shimodate.ibaraki.jp","shimotsuma.ibaraki.jp","shirosato.ibaraki.jp","sowa.ibaraki.jp","suifu.ibaraki.jp","takahagi.ibaraki.jp","tamatsukuri.ibaraki.jp","tokai.ibaraki.jp","tomobe.ibaraki.jp","tone.ibaraki.jp","toride.ibaraki.jp","tsuchiura.ibaraki.jp","tsukuba.ibaraki.jp","uchihara.ibaraki.jp","ushiku.ibaraki.jp","yachiyo.ibaraki.jp","yamagata.ibaraki.jp","yawara.ibaraki.jp","yuki.ibaraki.jp","anamizu.ishikawa.jp","hakui.ishikawa.jp","hakusan.ishikawa.jp","kaga.ishikawa.jp","kahoku.ishikawa.jp","kanazawa.ishikawa.jp","kawakita.ishikawa.jp","komatsu.ishikawa.jp","nakanoto.ishikawa.jp","nanao.ishikawa.jp","nomi.ishikawa.jp","nonoichi.ishikawa.jp","noto.ishikawa.jp","shika.ishikawa.jp","suzu.ishikawa.jp","tsubata.ishikawa.jp","tsurugi.ishikawa.jp","uchinada.ishikawa.jp","wajima.ishikawa.jp","fudai.iwate.jp","fujisawa.iwate.jp","hanamaki.iwate.jp","hiraizumi.iwate.jp","hirono.iwate.jp","ichinohe.iwate.jp","ichinoseki.iwate.jp","iwaizumi.iwate.jp","iwate.iwate.jp","joboji.iwate.jp","kamaishi.iwate.jp","kanegasaki.iwate.jp","karumai.iwate.jp","kawai.iwate.jp","kitakami.iwate.jp","kuji.iwate.jp","kunohe.iwate.jp","kuzumaki.iwate.jp","miyako.iwate.jp","mizusawa.iwate.jp","morioka.iwate.jp","ninohe.iwate.jp","noda.iwate.jp","ofunato.iwate.jp","oshu.iwate.jp","otsuchi.iwate.jp","rikuzentakata.iwate.jp","shiwa.iwate.jp","shizukuishi.iwate.jp","sumita.iwate.jp","tanohata.iwate.jp","tono.iwate.jp","yahaba.iwate.jp","yamada.iwate.jp","ayagawa.kagawa.jp","higashikagawa.kagawa.jp","kanonji.kagawa.jp","kotohira.kagawa.jp","manno.kagawa.jp","marugame.kagawa.jp","mitoyo.kagawa.jp","naoshima.kagawa.jp","sanuki.kagawa.jp","tadotsu.kagawa.jp","takamatsu.kagawa.jp","tonosho.kagawa.jp","uchinomi.kagawa.jp","utazu.kagawa.jp","zentsuji.kagawa.jp","akune.kagoshima.jp","amami.kagoshima.jp","hioki.kagoshima.jp","isa.kagoshima.jp","isen.kagoshima.jp","izumi.kagoshima.jp","kagoshima.kagoshima.jp","kanoya.kagoshima.jp","kawanabe.kagoshima.jp","kinko.kagoshima.jp","kouyama.kagoshima.jp","makurazaki.kagoshima.jp","matsumoto.kagoshima.jp","minamitane.kagoshima.jp","nakatane.kagoshima.jp","nishinoomote.kagoshima.jp","satsumasendai.kagoshima.jp","soo.kagoshima.jp","tarumizu.kagoshima.jp","yusui.kagoshima.jp","aikawa.kanagawa.jp","atsugi.kanagawa.jp","ayase.kanagawa.jp","chigasaki.kanagawa.jp","ebina.kanagawa.jp","fujisawa.kanagawa.jp","hadano.kanagawa.jp","hakone.kanagawa.jp","hiratsuka.kanagawa.jp","isehara.kanagawa.jp","kaisei.kanagawa.jp","kamakura.kanagawa.jp","kiyokawa.kanagawa.jp","matsuda.kanagawa.jp","minamiashigara.kanagawa.jp","miura.kanagawa.jp","nakai.kanagawa.jp","ninomiya.kanagawa.jp","odawara.kanagawa.jp","oi.kanagawa.jp","oiso.kanagawa.jp","sagamihara.kanagawa.jp","samukawa.kanagawa.jp","tsukui.kanagawa.jp","yamakita.kanagawa.jp","yamato.kanagawa.jp","yokosuka.kanagawa.jp","yugawara.kanagawa.jp","zama.kanagawa.jp","zushi.kanagawa.jp","aki.kochi.jp","geisei.kochi.jp","hidaka.kochi.jp","higashitsuno.kochi.jp","ino.kochi.jp","kagami.kochi.jp","kami.kochi.jp","kitagawa.kochi.jp","kochi.kochi.jp","mihara.kochi.jp","motoyama.kochi.jp","muroto.kochi.jp","nahari.kochi.jp","nakamura.kochi.jp","nankoku.kochi.jp","nishitosa.kochi.jp","niyodogawa.kochi.jp","ochi.kochi.jp","okawa.kochi.jp","otoyo.kochi.jp","otsuki.kochi.jp","sakawa.kochi.jp","sukumo.kochi.jp","susaki.kochi.jp","tosa.kochi.jp","tosashimizu.kochi.jp","toyo.kochi.jp","tsuno.kochi.jp","umaji.kochi.jp","yasuda.kochi.jp","yusuhara.kochi.jp","amakusa.kumamoto.jp","arao.kumamoto.jp","aso.kumamoto.jp","choyo.kumamoto.jp","gyokuto.kumamoto.jp","kamiamakusa.kumamoto.jp","kikuchi.kumamoto.jp","kumamoto.kumamoto.jp","mashiki.kumamoto.jp","mifune.kumamoto.jp","minamata.kumamoto.jp","minamioguni.kumamoto.jp","nagasu.kumamoto.jp","nishihara.kumamoto.jp","oguni.kumamoto.jp","ozu.kumamoto.jp","sumoto.kumamoto.jp","takamori.kumamoto.jp","uki.kumamoto.jp","uto.kumamoto.jp","yamaga.kumamoto.jp","yamato.kumamoto.jp","yatsushiro.kumamoto.jp","ayabe.kyoto.jp","fukuchiyama.kyoto.jp","higashiyama.kyoto.jp","ide.kyoto.jp","ine.kyoto.jp","joyo.kyoto.jp","kameoka.kyoto.jp","kamo.kyoto.jp","kita.kyoto.jp","kizu.kyoto.jp","kumiyama.kyoto.jp","kyotamba.kyoto.jp","kyotanabe.kyoto.jp","kyotango.kyoto.jp","maizuru.kyoto.jp","minami.kyoto.jp","minamiyamashiro.kyoto.jp","miyazu.kyoto.jp","muko.kyoto.jp","nagaokakyo.kyoto.jp","nakagyo.kyoto.jp","nantan.kyoto.jp","oyamazaki.kyoto.jp","sakyo.kyoto.jp","seika.kyoto.jp","tanabe.kyoto.jp","uji.kyoto.jp","ujitawara.kyoto.jp","wazuka.kyoto.jp","yamashina.kyoto.jp","yawata.kyoto.jp","asahi.mie.jp","inabe.mie.jp","ise.mie.jp","kameyama.mie.jp","kawagoe.mie.jp","kiho.mie.jp","kisosaki.mie.jp","kiwa.mie.jp","komono.mie.jp","kumano.mie.jp","kuwana.mie.jp","matsusaka.mie.jp","meiwa.mie.jp","mihama.mie.jp","minamiise.mie.jp","misugi.mie.jp","miyama.mie.jp","nabari.mie.jp","shima.mie.jp","suzuka.mie.jp","tado.mie.jp","taiki.mie.jp","taki.mie.jp","tamaki.mie.jp","toba.mie.jp","tsu.mie.jp","udono.mie.jp","ureshino.mie.jp","watarai.mie.jp","yokkaichi.mie.jp","furukawa.miyagi.jp","higashimatsushima.miyagi.jp","ishinomaki.miyagi.jp","iwanuma.miyagi.jp","kakuda.miyagi.jp","kami.miyagi.jp","kawasaki.miyagi.jp","marumori.miyagi.jp","matsushima.miyagi.jp","minamisanriku.miyagi.jp","misato.miyagi.jp","murata.miyagi.jp","natori.miyagi.jp","ogawara.miyagi.jp","ohira.miyagi.jp","onagawa.miyagi.jp","osaki.miyagi.jp","rifu.miyagi.jp","semine.miyagi.jp","shibata.miyagi.jp","shichikashuku.miyagi.jp","shikama.miyagi.jp","shiogama.miyagi.jp","shiroishi.miyagi.jp","tagajo.miyagi.jp","taiwa.miyagi.jp","tome.miyagi.jp","tomiya.miyagi.jp","wakuya.miyagi.jp","watari.miyagi.jp","yamamoto.miyagi.jp","zao.miyagi.jp","aya.miyazaki.jp","ebino.miyazaki.jp","gokase.miyazaki.jp","hyuga.miyazaki.jp","kadogawa.miyazaki.jp","kawaminami.miyazaki.jp","kijo.miyazaki.jp","kitagawa.miyazaki.jp","kitakata.miyazaki.jp","kitaura.miyazaki.jp","kobayashi.miyazaki.jp","kunitomi.miyazaki.jp","kushima.miyazaki.jp","mimata.miyazaki.jp","miyakonojo.miyazaki.jp","miyazaki.miyazaki.jp","morotsuka.miyazaki.jp","nichinan.miyazaki.jp","nishimera.miyazaki.jp","nobeoka.miyazaki.jp","saito.miyazaki.jp","shiiba.miyazaki.jp","shintomi.miyazaki.jp","takaharu.miyazaki.jp","takanabe.miyazaki.jp","takazaki.miyazaki.jp","tsuno.miyazaki.jp","achi.nagano.jp","agematsu.nagano.jp","anan.nagano.jp","aoki.nagano.jp","asahi.nagano.jp","azumino.nagano.jp","chikuhoku.nagano.jp","chikuma.nagano.jp","chino.nagano.jp","fujimi.nagano.jp","hakuba.nagano.jp","hara.nagano.jp","hiraya.nagano.jp","iida.nagano.jp","iijima.nagano.jp","iiyama.nagano.jp","iizuna.nagano.jp","ikeda.nagano.jp","ikusaka.nagano.jp","ina.nagano.jp","karuizawa.nagano.jp","kawakami.nagano.jp","kiso.nagano.jp","kisofukushima.nagano.jp","kitaaiki.nagano.jp","komagane.nagano.jp","komoro.nagano.jp","matsukawa.nagano.jp","matsumoto.nagano.jp","miasa.nagano.jp","minamiaiki.nagano.jp","minamimaki.nagano.jp","minamiminowa.nagano.jp","minowa.nagano.jp","miyada.nagano.jp","miyota.nagano.jp","mochizuki.nagano.jp","nagano.nagano.jp","nagawa.nagano.jp","nagiso.nagano.jp","nakagawa.nagano.jp","nakano.nagano.jp","nozawaonsen.nagano.jp","obuse.nagano.jp","ogawa.nagano.jp","okaya.nagano.jp","omachi.nagano.jp","omi.nagano.jp","ookuwa.nagano.jp","ooshika.nagano.jp","otaki.nagano.jp","otari.nagano.jp","sakae.nagano.jp","sakaki.nagano.jp","saku.nagano.jp","sakuho.nagano.jp","shimosuwa.nagano.jp","shinanomachi.nagano.jp","shiojiri.nagano.jp","suwa.nagano.jp","suzaka.nagano.jp","takagi.nagano.jp","takamori.nagano.jp","takayama.nagano.jp","tateshina.nagano.jp","tatsuno.nagano.jp","togakushi.nagano.jp","togura.nagano.jp","tomi.nagano.jp","ueda.nagano.jp","wada.nagano.jp","yamagata.nagano.jp","yamanouchi.nagano.jp","yasaka.nagano.jp","yasuoka.nagano.jp","chijiwa.nagasaki.jp","futsu.nagasaki.jp","goto.nagasaki.jp","hasami.nagasaki.jp","hirado.nagasaki.jp","iki.nagasaki.jp","isahaya.nagasaki.jp","kawatana.nagasaki.jp","kuchinotsu.nagasaki.jp","matsuura.nagasaki.jp","nagasaki.nagasaki.jp","obama.nagasaki.jp","omura.nagasaki.jp","oseto.nagasaki.jp","saikai.nagasaki.jp","sasebo.nagasaki.jp","seihi.nagasaki.jp","shimabara.nagasaki.jp","shinkamigoto.nagasaki.jp","togitsu.nagasaki.jp","tsushima.nagasaki.jp","unzen.nagasaki.jp","ando.nara.jp","gose.nara.jp","heguri.nara.jp","higashiyoshino.nara.jp","ikaruga.nara.jp","ikoma.nara.jp","kamikitayama.nara.jp","kanmaki.nara.jp","kashiba.nara.jp","kashihara.nara.jp","katsuragi.nara.jp","kawai.nara.jp","kawakami.nara.jp","kawanishi.nara.jp","koryo.nara.jp","kurotaki.nara.jp","mitsue.nara.jp","miyake.nara.jp","nara.nara.jp","nosegawa.nara.jp","oji.nara.jp","ouda.nara.jp","oyodo.nara.jp","sakurai.nara.jp","sango.nara.jp","shimoichi.nara.jp","shimokitayama.nara.jp","shinjo.nara.jp","soni.nara.jp","takatori.nara.jp","tawaramoto.nara.jp","tenkawa.nara.jp","tenri.nara.jp","uda.nara.jp","yamatokoriyama.nara.jp","yamatotakada.nara.jp","yamazoe.nara.jp","yoshino.nara.jp","aga.niigata.jp","agano.niigata.jp","gosen.niigata.jp","itoigawa.niigata.jp","izumozaki.niigata.jp","joetsu.niigata.jp","kamo.niigata.jp","kariwa.niigata.jp","kashiwazaki.niigata.jp","minamiuonuma.niigata.jp","mitsuke.niigata.jp","muika.niigata.jp","murakami.niigata.jp","myoko.niigata.jp","nagaoka.niigata.jp","niigata.niigata.jp","ojiya.niigata.jp","omi.niigata.jp","sado.niigata.jp","sanjo.niigata.jp","seiro.niigata.jp","seirou.niigata.jp","sekikawa.niigata.jp","shibata.niigata.jp","tagami.niigata.jp","tainai.niigata.jp","tochio.niigata.jp","tokamachi.niigata.jp","tsubame.niigata.jp","tsunan.niigata.jp","uonuma.niigata.jp","yahiko.niigata.jp","yoita.niigata.jp","yuzawa.niigata.jp","beppu.oita.jp","bungoono.oita.jp","bungotakada.oita.jp","hasama.oita.jp","hiji.oita.jp","himeshima.oita.jp","hita.oita.jp","kamitsue.oita.jp","kokonoe.oita.jp","kuju.oita.jp","kunisaki.oita.jp","kusu.oita.jp","oita.oita.jp","saiki.oita.jp","taketa.oita.jp","tsukumi.oita.jp","usa.oita.jp","usuki.oita.jp","yufu.oita.jp","akaiwa.okayama.jp","asakuchi.okayama.jp","bizen.okayama.jp","hayashima.okayama.jp","ibara.okayama.jp","kagamino.okayama.jp","kasaoka.okayama.jp","kibichuo.okayama.jp","kumenan.okayama.jp","kurashiki.okayama.jp","maniwa.okayama.jp","misaki.okayama.jp","nagi.okayama.jp","niimi.okayama.jp","nishiawakura.okayama.jp","okayama.okayama.jp","satosho.okayama.jp","setouchi.okayama.jp","shinjo.okayama.jp","shoo.okayama.jp","soja.okayama.jp","takahashi.okayama.jp","tamano.okayama.jp","tsuyama.okayama.jp","wake.okayama.jp","yakage.okayama.jp","aguni.okinawa.jp","ginowan.okinawa.jp","ginoza.okinawa.jp","gushikami.okinawa.jp","haebaru.okinawa.jp","higashi.okinawa.jp","hirara.okinawa.jp","iheya.okinawa.jp","ishigaki.okinawa.jp","ishikawa.okinawa.jp","itoman.okinawa.jp","izena.okinawa.jp","kadena.okinawa.jp","kin.okinawa.jp","kitadaito.okinawa.jp","kitanakagusuku.okinawa.jp","kumejima.okinawa.jp","kunigami.okinawa.jp","minamidaito.okinawa.jp","motobu.okinawa.jp","nago.okinawa.jp","naha.okinawa.jp","nakagusuku.okinawa.jp","nakijin.okinawa.jp","nanjo.okinawa.jp","nishihara.okinawa.jp","ogimi.okinawa.jp","okinawa.okinawa.jp","onna.okinawa.jp","shimoji.okinawa.jp","taketomi.okinawa.jp","tarama.okinawa.jp","tokashiki.okinawa.jp","tomigusuku.okinawa.jp","tonaki.okinawa.jp","urasoe.okinawa.jp","uruma.okinawa.jp","yaese.okinawa.jp","yomitan.okinawa.jp","yonabaru.okinawa.jp","yonaguni.okinawa.jp","zamami.okinawa.jp","abeno.osaka.jp","chihayaakasaka.osaka.jp","chuo.osaka.jp","daito.osaka.jp","fujiidera.osaka.jp","habikino.osaka.jp","hannan.osaka.jp","higashiosaka.osaka.jp","higashisumiyoshi.osaka.jp","higashiyodogawa.osaka.jp","hirakata.osaka.jp","ibaraki.osaka.jp","ikeda.osaka.jp","izumi.osaka.jp","izumiotsu.osaka.jp","izumisano.osaka.jp","kadoma.osaka.jp","kaizuka.osaka.jp","kanan.osaka.jp","kashiwara.osaka.jp","katano.osaka.jp","kawachinagano.osaka.jp","kishiwada.osaka.jp","kita.osaka.jp","kumatori.osaka.jp","matsubara.osaka.jp","minato.osaka.jp","minoh.osaka.jp","misaki.osaka.jp","moriguchi.osaka.jp","neyagawa.osaka.jp","nishi.osaka.jp","nose.osaka.jp","osakasayama.osaka.jp","sakai.osaka.jp","sayama.osaka.jp","sennan.osaka.jp","settsu.osaka.jp","shijonawate.osaka.jp","shimamoto.osaka.jp","suita.osaka.jp","tadaoka.osaka.jp","taishi.osaka.jp","tajiri.osaka.jp","takaishi.osaka.jp","takatsuki.osaka.jp","tondabayashi.osaka.jp","toyonaka.osaka.jp","toyono.osaka.jp","yao.osaka.jp","ariake.saga.jp","arita.saga.jp","fukudomi.saga.jp","genkai.saga.jp","hamatama.saga.jp","hizen.saga.jp","imari.saga.jp","kamimine.saga.jp","kanzaki.saga.jp","karatsu.saga.jp","kashima.saga.jp","kitagata.saga.jp","kitahata.saga.jp","kiyama.saga.jp","kouhoku.saga.jp","kyuragi.saga.jp","nishiarita.saga.jp","ogi.saga.jp","omachi.saga.jp","ouchi.saga.jp","saga.saga.jp","shiroishi.saga.jp","taku.saga.jp","tara.saga.jp","tosu.saga.jp","yoshinogari.saga.jp","arakawa.saitama.jp","asaka.saitama.jp","chichibu.saitama.jp","fujimi.saitama.jp","fujimino.saitama.jp","fukaya.saitama.jp","hanno.saitama.jp","hanyu.saitama.jp","hasuda.saitama.jp","hatogaya.saitama.jp","hatoyama.saitama.jp","hidaka.saitama.jp","higashichichibu.saitama.jp","higashimatsuyama.saitama.jp","honjo.saitama.jp","ina.saitama.jp","iruma.saitama.jp","iwatsuki.saitama.jp","kamiizumi.saitama.jp","kamikawa.saitama.jp","kamisato.saitama.jp","kasukabe.saitama.jp","kawagoe.saitama.jp","kawaguchi.saitama.jp","kawajima.saitama.jp","kazo.saitama.jp","kitamoto.saitama.jp","koshigaya.saitama.jp","kounosu.saitama.jp","kuki.saitama.jp","kumagaya.saitama.jp","matsubushi.saitama.jp","minano.saitama.jp","misato.saitama.jp","miyashiro.saitama.jp","miyoshi.saitama.jp","moroyama.saitama.jp","nagatoro.saitama.jp","namegawa.saitama.jp","niiza.saitama.jp","ogano.saitama.jp","ogawa.saitama.jp","ogose.saitama.jp","okegawa.saitama.jp","omiya.saitama.jp","otaki.saitama.jp","ranzan.saitama.jp","ryokami.saitama.jp","saitama.saitama.jp","sakado.saitama.jp","satte.saitama.jp","sayama.saitama.jp","shiki.saitama.jp","shiraoka.saitama.jp","soka.saitama.jp","sugito.saitama.jp","toda.saitama.jp","tokigawa.saitama.jp","tokorozawa.saitama.jp","tsurugashima.saitama.jp","urawa.saitama.jp","warabi.saitama.jp","yashio.saitama.jp","yokoze.saitama.jp","yono.saitama.jp","yorii.saitama.jp","yoshida.saitama.jp","yoshikawa.saitama.jp","yoshimi.saitama.jp","aisho.shiga.jp","gamo.shiga.jp","higashiomi.shiga.jp","hikone.shiga.jp","koka.shiga.jp","konan.shiga.jp","kosei.shiga.jp","koto.shiga.jp","kusatsu.shiga.jp","maibara.shiga.jp","moriyama.shiga.jp","nagahama.shiga.jp","nishiazai.shiga.jp","notogawa.shiga.jp","omihachiman.shiga.jp","otsu.shiga.jp","ritto.shiga.jp","ryuoh.shiga.jp","takashima.shiga.jp","takatsuki.shiga.jp","torahime.shiga.jp","toyosato.shiga.jp","yasu.shiga.jp","akagi.shimane.jp","ama.shimane.jp","gotsu.shimane.jp","hamada.shimane.jp","higashiizumo.shimane.jp","hikawa.shimane.jp","hikimi.shimane.jp","izumo.shimane.jp","kakinoki.shimane.jp","masuda.shimane.jp","matsue.shimane.jp","misato.shimane.jp","nishinoshima.shimane.jp","ohda.shimane.jp","okinoshima.shimane.jp","okuizumo.shimane.jp","shimane.shimane.jp","tamayu.shimane.jp","tsuwano.shimane.jp","unnan.shimane.jp","yakumo.shimane.jp","yasugi.shimane.jp","yatsuka.shimane.jp","arai.shizuoka.jp","atami.shizuoka.jp","fuji.shizuoka.jp","fujieda.shizuoka.jp","fujikawa.shizuoka.jp","fujinomiya.shizuoka.jp","fukuroi.shizuoka.jp","gotemba.shizuoka.jp","haibara.shizuoka.jp","hamamatsu.shizuoka.jp","higashiizu.shizuoka.jp","ito.shizuoka.jp","iwata.shizuoka.jp","izu.shizuoka.jp","izunokuni.shizuoka.jp","kakegawa.shizuoka.jp","kannami.shizuoka.jp","kawanehon.shizuoka.jp","kawazu.shizuoka.jp","kikugawa.shizuoka.jp","kosai.shizuoka.jp","makinohara.shizuoka.jp","matsuzaki.shizuoka.jp","minamiizu.shizuoka.jp","mishima.shizuoka.jp","morimachi.shizuoka.jp","nishiizu.shizuoka.jp","numazu.shizuoka.jp","omaezaki.shizuoka.jp","shimada.shizuoka.jp","shimizu.shizuoka.jp","shimoda.shizuoka.jp","shizuoka.shizuoka.jp","susono.shizuoka.jp","yaizu.shizuoka.jp","yoshida.shizuoka.jp","ashikaga.tochigi.jp","bato.tochigi.jp","haga.tochigi.jp","ichikai.tochigi.jp","iwafune.tochigi.jp","kaminokawa.tochigi.jp","kanuma.tochigi.jp","karasuyama.tochigi.jp","kuroiso.tochigi.jp","mashiko.tochigi.jp","mibu.tochigi.jp","moka.tochigi.jp","motegi.tochigi.jp","nasu.tochigi.jp","nasushiobara.tochigi.jp","nikko.tochigi.jp","nishikata.tochigi.jp","nogi.tochigi.jp","ohira.tochigi.jp","ohtawara.tochigi.jp","oyama.tochigi.jp","sakura.tochigi.jp","sano.tochigi.jp","shimotsuke.tochigi.jp","shioya.tochigi.jp","takanezawa.tochigi.jp","tochigi.tochigi.jp","tsuga.tochigi.jp","ujiie.tochigi.jp","utsunomiya.tochigi.jp","yaita.tochigi.jp","aizumi.tokushima.jp","anan.tokushima.jp","ichiba.tokushima.jp","itano.tokushima.jp","kainan.tokushima.jp","komatsushima.tokushima.jp","matsushige.tokushima.jp","mima.tokushima.jp","minami.tokushima.jp","miyoshi.tokushima.jp","mugi.tokushima.jp","nakagawa.tokushima.jp","naruto.tokushima.jp","sanagochi.tokushima.jp","shishikui.tokushima.jp","tokushima.tokushima.jp","wajiki.tokushima.jp","adachi.tokyo.jp","akiruno.tokyo.jp","akishima.tokyo.jp","aogashima.tokyo.jp","arakawa.tokyo.jp","bunkyo.tokyo.jp","chiyoda.tokyo.jp","chofu.tokyo.jp","chuo.tokyo.jp","edogawa.tokyo.jp","fuchu.tokyo.jp","fussa.tokyo.jp","hachijo.tokyo.jp","hachioji.tokyo.jp","hamura.tokyo.jp","higashikurume.tokyo.jp","higashimurayama.tokyo.jp","higashiyamato.tokyo.jp","hino.tokyo.jp","hinode.tokyo.jp","hinohara.tokyo.jp","inagi.tokyo.jp","itabashi.tokyo.jp","katsushika.tokyo.jp","kita.tokyo.jp","kiyose.tokyo.jp","kodaira.tokyo.jp","koganei.tokyo.jp","kokubunji.tokyo.jp","komae.tokyo.jp","koto.tokyo.jp","kouzushima.tokyo.jp","kunitachi.tokyo.jp","machida.tokyo.jp","meguro.tokyo.jp","minato.tokyo.jp","mitaka.tokyo.jp","mizuho.tokyo.jp","musashimurayama.tokyo.jp","musashino.tokyo.jp","nakano.tokyo.jp","nerima.tokyo.jp","ogasawara.tokyo.jp","okutama.tokyo.jp","ome.tokyo.jp","oshima.tokyo.jp","ota.tokyo.jp","setagaya.tokyo.jp","shibuya.tokyo.jp","shinagawa.tokyo.jp","shinjuku.tokyo.jp","suginami.tokyo.jp","sumida.tokyo.jp","tachikawa.tokyo.jp","taito.tokyo.jp","tama.tokyo.jp","toshima.tokyo.jp","chizu.tottori.jp","hino.tottori.jp","kawahara.tottori.jp","koge.tottori.jp","kotoura.tottori.jp","misasa.tottori.jp","nanbu.tottori.jp","nichinan.tottori.jp","sakaiminato.tottori.jp","tottori.tottori.jp","wakasa.tottori.jp","yazu.tottori.jp","yonago.tottori.jp","asahi.toyama.jp","fuchu.toyama.jp","fukumitsu.toyama.jp","funahashi.toyama.jp","himi.toyama.jp","imizu.toyama.jp","inami.toyama.jp","johana.toyama.jp","kamiichi.toyama.jp","kurobe.toyama.jp","nakaniikawa.toyama.jp","namerikawa.toyama.jp","nanto.toyama.jp","nyuzen.toyama.jp","oyabe.toyama.jp","taira.toyama.jp","takaoka.toyama.jp","tateyama.toyama.jp","toga.toyama.jp","tonami.toyama.jp","toyama.toyama.jp","unazuki.toyama.jp","uozu.toyama.jp","yamada.toyama.jp","arida.wakayama.jp","aridagawa.wakayama.jp","gobo.wakayama.jp","hashimoto.wakayama.jp","hidaka.wakayama.jp","hirogawa.wakayama.jp","inami.wakayama.jp","iwade.wakayama.jp","kainan.wakayama.jp","kamitonda.wakayama.jp","katsuragi.wakayama.jp","kimino.wakayama.jp","kinokawa.wakayama.jp","kitayama.wakayama.jp","koya.wakayama.jp","koza.wakayama.jp","kozagawa.wakayama.jp","kudoyama.wakayama.jp","kushimoto.wakayama.jp","mihama.wakayama.jp","misato.wakayama.jp","nachikatsuura.wakayama.jp","shingu.wakayama.jp","shirahama.wakayama.jp","taiji.wakayama.jp","tanabe.wakayama.jp","wakayama.wakayama.jp","yuasa.wakayama.jp","yura.wakayama.jp","asahi.yamagata.jp","funagata.yamagata.jp","higashine.yamagata.jp","iide.yamagata.jp","kahoku.yamagata.jp","kaminoyama.yamagata.jp","kaneyama.yamagata.jp","kawanishi.yamagata.jp","mamurogawa.yamagata.jp","mikawa.yamagata.jp","murayama.yamagata.jp","nagai.yamagata.jp","nakayama.yamagata.jp","nanyo.yamagata.jp","nishikawa.yamagata.jp","obanazawa.yamagata.jp","oe.yamagata.jp","oguni.yamagata.jp","ohkura.yamagata.jp","oishida.yamagata.jp","sagae.yamagata.jp","sakata.yamagata.jp","sakegawa.yamagata.jp","shinjo.yamagata.jp","shirataka.yamagata.jp","shonai.yamagata.jp","takahata.yamagata.jp","tendo.yamagata.jp","tozawa.yamagata.jp","tsuruoka.yamagata.jp","yamagata.yamagata.jp","yamanobe.yamagata.jp","yonezawa.yamagata.jp","yuza.yamagata.jp","abu.yamaguchi.jp","hagi.yamaguchi.jp","hikari.yamaguchi.jp","hofu.yamaguchi.jp","iwakuni.yamaguchi.jp","kudamatsu.yamaguchi.jp","mitou.yamaguchi.jp","nagato.yamaguchi.jp","oshima.yamaguchi.jp","shimonoseki.yamaguchi.jp","shunan.yamaguchi.jp","tabuse.yamaguchi.jp","tokuyama.yamaguchi.jp","toyota.yamaguchi.jp","ube.yamaguchi.jp","yuu.yamaguchi.jp","chuo.yamanashi.jp","doshi.yamanashi.jp","fuefuki.yamanashi.jp","fujikawa.yamanashi.jp","fujikawaguchiko.yamanashi.jp","fujiyoshida.yamanashi.jp","hayakawa.yamanashi.jp","hokuto.yamanashi.jp","ichikawamisato.yamanashi.jp","kai.yamanashi.jp","kofu.yamanashi.jp","koshu.yamanashi.jp","kosuge.yamanashi.jp","minami-alps.yamanashi.jp","minobu.yamanashi.jp","nakamichi.yamanashi.jp","nanbu.yamanashi.jp","narusawa.yamanashi.jp","nirasaki.yamanashi.jp","nishikatsura.yamanashi.jp","oshino.yamanashi.jp","otsuki.yamanashi.jp","showa.yamanashi.jp","tabayama.yamanashi.jp","tsuru.yamanashi.jp","uenohara.yamanashi.jp","yamanakako.yamanashi.jp","yamanashi.yamanashi.jp","ke","ac.ke","co.ke","go.ke","info.ke","me.ke","mobi.ke","ne.ke","or.ke","sc.ke","kg","org.kg","net.kg","com.kg","edu.kg","gov.kg","mil.kg","*.kh","ki","edu.ki","biz.ki","net.ki","org.ki","gov.ki","info.ki","com.ki","km","org.km","nom.km","gov.km","prd.km","tm.km","edu.km","mil.km","ass.km","com.km","coop.km","asso.km","presse.km","medecin.km","notaires.km","pharmaciens.km","veterinaire.km","gouv.km","kn","net.kn","org.kn","edu.kn","gov.kn","kp","com.kp","edu.kp","gov.kp","org.kp","rep.kp","tra.kp","kr","ac.kr","co.kr","es.kr","go.kr","hs.kr","kg.kr","mil.kr","ms.kr","ne.kr","or.kr","pe.kr","re.kr","sc.kr","busan.kr","chungbuk.kr","chungnam.kr","daegu.kr","daejeon.kr","gangwon.kr","gwangju.kr","gyeongbuk.kr","gyeonggi.kr","gyeongnam.kr","incheon.kr","jeju.kr","jeonbuk.kr","jeonnam.kr","seoul.kr","ulsan.kr","kw","com.kw","edu.kw","emb.kw","gov.kw","ind.kw","net.kw","org.kw","ky","edu.ky","gov.ky","com.ky","org.ky","net.ky","kz","org.kz","edu.kz","net.kz","gov.kz","mil.kz","com.kz","la","int.la","net.la","info.la","edu.la","gov.la","per.la","com.la","org.la","lb","com.lb","edu.lb","gov.lb","net.lb","org.lb","lc","com.lc","net.lc","co.lc","org.lc","edu.lc","gov.lc","li","lk","gov.lk","sch.lk","net.lk","int.lk","com.lk","org.lk","edu.lk","ngo.lk","soc.lk","web.lk","ltd.lk","assn.lk","grp.lk","hotel.lk","ac.lk","lr","com.lr","edu.lr","gov.lr","org.lr","net.lr","ls","co.ls","org.ls","lt","gov.lt","lu","lv","com.lv","edu.lv","gov.lv","org.lv","mil.lv","id.lv","net.lv","asn.lv","conf.lv","ly","com.ly","net.ly","gov.ly","plc.ly","edu.ly","sch.ly","med.ly","org.ly","id.ly","ma","co.ma","net.ma","gov.ma","org.ma","ac.ma","press.ma","mc","tm.mc","asso.mc","md","me","co.me","net.me","org.me","edu.me","ac.me","gov.me","its.me","priv.me","mg","org.mg","nom.mg","gov.mg","prd.mg","tm.mg","edu.mg","mil.mg","com.mg","co.mg","mh","mil","mk","com.mk","org.mk","net.mk","edu.mk","gov.mk","inf.mk","name.mk","ml","com.ml","edu.ml","gouv.ml","gov.ml","net.ml","org.ml","presse.ml","*.mm","mn","gov.mn","edu.mn","org.mn","mo","com.mo","net.mo","org.mo","edu.mo","gov.mo","mobi","mp","mq","mr","gov.mr","ms","com.ms","edu.ms","gov.ms","net.ms","org.ms","mt","com.mt","edu.mt","net.mt","org.mt","mu","com.mu","net.mu","org.mu","gov.mu","ac.mu","co.mu","or.mu","museum","academy.museum","agriculture.museum","air.museum","airguard.museum","alabama.museum","alaska.museum","amber.museum","ambulance.museum","american.museum","americana.museum","americanantiques.museum","americanart.museum","amsterdam.museum","and.museum","annefrank.museum","anthro.museum","anthropology.museum","antiques.museum","aquarium.museum","arboretum.museum","archaeological.museum","archaeology.museum","architecture.museum","art.museum","artanddesign.museum","artcenter.museum","artdeco.museum","arteducation.museum","artgallery.museum","arts.museum","artsandcrafts.museum","asmatart.museum","assassination.museum","assisi.museum","association.museum","astronomy.museum","atlanta.museum","austin.museum","australia.museum","automotive.museum","aviation.museum","axis.museum","badajoz.museum","baghdad.museum","bahn.museum","bale.museum","baltimore.museum","barcelona.museum","baseball.museum","basel.museum","baths.museum","bauern.museum","beauxarts.museum","beeldengeluid.museum","bellevue.museum","bergbau.museum","berkeley.museum","berlin.museum","bern.museum","bible.museum","bilbao.museum","bill.museum","birdart.museum","birthplace.museum","bonn.museum","boston.museum","botanical.museum","botanicalgarden.museum","botanicgarden.museum","botany.museum","brandywinevalley.museum","brasil.museum","bristol.museum","british.museum","britishcolumbia.museum","broadcast.museum","brunel.museum","brussel.museum","brussels.museum","bruxelles.museum","building.museum","burghof.museum","bus.museum","bushey.museum","cadaques.museum","california.museum","cambridge.museum","can.museum","canada.museum","capebreton.museum","carrier.museum","cartoonart.museum","casadelamoneda.museum","castle.museum","castres.museum","celtic.museum","center.museum","chattanooga.museum","cheltenham.museum","chesapeakebay.museum","chicago.museum","children.museum","childrens.museum","childrensgarden.museum","chiropractic.museum","chocolate.museum","christiansburg.museum","cincinnati.museum","cinema.museum","circus.museum","civilisation.museum","civilization.museum","civilwar.museum","clinton.museum","clock.museum","coal.museum","coastaldefence.museum","cody.museum","coldwar.museum","collection.museum","colonialwilliamsburg.museum","coloradoplateau.museum","columbia.museum","columbus.museum","communication.museum","communications.museum","community.museum","computer.museum","computerhistory.museum","comunicações.museum","contemporary.museum","contemporaryart.museum","convent.museum","copenhagen.museum","corporation.museum","correios-e-telecomunicações.museum","corvette.museum","costume.museum","countryestate.museum","county.museum","crafts.museum","cranbrook.museum","creation.museum","cultural.museum","culturalcenter.museum","culture.museum","cyber.museum","cymru.museum","dali.museum","dallas.museum","database.museum","ddr.museum","decorativearts.museum","delaware.museum","delmenhorst.museum","denmark.museum","depot.museum","design.museum","detroit.museum","dinosaur.museum","discovery.museum","dolls.museum","donostia.museum","durham.museum","eastafrica.museum","eastcoast.museum","education.museum","educational.museum","egyptian.museum","eisenbahn.museum","elburg.museum","elvendrell.museum","embroidery.museum","encyclopedic.museum","england.museum","entomology.museum","environment.museum","environmentalconservation.museum","epilepsy.museum","essex.museum","estate.museum","ethnology.museum","exeter.museum","exhibition.museum","family.museum","farm.museum","farmequipment.museum","farmers.museum","farmstead.museum","field.museum","figueres.museum","filatelia.museum","film.museum","fineart.museum","finearts.museum","finland.museum","flanders.museum","florida.museum","force.museum","fortmissoula.museum","fortworth.museum","foundation.museum","francaise.museum","frankfurt.museum","franziskaner.museum","freemasonry.museum","freiburg.museum","fribourg.museum","frog.museum","fundacio.museum","furniture.museum","gallery.museum","garden.museum","gateway.museum","geelvinck.museum","gemological.museum","geology.museum","georgia.museum","giessen.museum","glas.museum","glass.museum","gorge.museum","grandrapids.museum","graz.museum","guernsey.museum","halloffame.museum","hamburg.museum","handson.museum","harvestcelebration.museum","hawaii.museum","health.museum","heimatunduhren.museum","hellas.museum","helsinki.museum","hembygdsforbund.museum","heritage.museum","histoire.museum","historical.museum","historicalsociety.museum","historichouses.museum","historisch.museum","historisches.museum","history.museum","historyofscience.museum","horology.museum","house.museum","humanities.museum","illustration.museum","imageandsound.museum","indian.museum","indiana.museum","indianapolis.museum","indianmarket.museum","intelligence.museum","interactive.museum","iraq.museum","iron.museum","isleofman.museum","jamison.museum","jefferson.museum","jerusalem.museum","jewelry.museum","jewish.museum","jewishart.museum","jfk.museum","journalism.museum","judaica.museum","judygarland.museum","juedisches.museum","juif.museum","karate.museum","karikatur.museum","kids.museum","koebenhavn.museum","koeln.museum","kunst.museum","kunstsammlung.museum","kunstunddesign.museum","labor.museum","labour.museum","lajolla.museum","lancashire.museum","landes.museum","lans.museum","läns.museum","larsson.museum","lewismiller.museum","lincoln.museum","linz.museum","living.museum","livinghistory.museum","localhistory.museum","london.museum","losangeles.museum","louvre.museum","loyalist.museum","lucerne.museum","luxembourg.museum","luzern.museum","mad.museum","madrid.museum","mallorca.museum","manchester.museum","mansion.museum","mansions.museum","manx.museum","marburg.museum","maritime.museum","maritimo.museum","maryland.museum","marylhurst.museum","media.museum","medical.museum","medizinhistorisches.museum","meeres.museum","memorial.museum","mesaverde.museum","michigan.museum","midatlantic.museum","military.museum","mill.museum","miners.museum","mining.museum","minnesota.museum","missile.museum","missoula.museum","modern.museum","moma.museum","money.museum","monmouth.museum","monticello.museum","montreal.museum","moscow.museum","motorcycle.museum","muenchen.museum","muenster.museum","mulhouse.museum","muncie.museum","museet.museum","museumcenter.museum","museumvereniging.museum","music.museum","national.museum","nationalfirearms.museum","nationalheritage.museum","nativeamerican.museum","naturalhistory.museum","naturalhistorymuseum.museum","naturalsciences.museum","nature.museum","naturhistorisches.museum","natuurwetenschappen.museum","naumburg.museum","naval.museum","nebraska.museum","neues.museum","newhampshire.museum","newjersey.museum","newmexico.museum","newport.museum","newspaper.museum","newyork.museum","niepce.museum","norfolk.museum","north.museum","nrw.museum","nuernberg.museum","nuremberg.museum","nyc.museum","nyny.museum","oceanographic.museum","oceanographique.museum","omaha.museum","online.museum","ontario.museum","openair.museum","oregon.museum","oregontrail.museum","otago.museum","oxford.museum","pacific.museum","paderborn.museum","palace.museum","paleo.museum","palmsprings.museum","panama.museum","paris.museum","pasadena.museum","pharmacy.museum","philadelphia.museum","philadelphiaarea.museum","philately.museum","phoenix.museum","photography.museum","pilots.museum","pittsburgh.museum","planetarium.museum","plantation.museum","plants.museum","plaza.museum","portal.museum","portland.museum","portlligat.museum","posts-and-telecommunications.museum","preservation.museum","presidio.museum","press.museum","project.museum","public.museum","pubol.museum","quebec.museum","railroad.museum","railway.museum","research.museum","resistance.museum","riodejaneiro.museum","rochester.museum","rockart.museum","roma.museum","russia.museum","saintlouis.museum","salem.museum","salvadordali.museum","salzburg.museum","sandiego.museum","sanfrancisco.museum","santabarbara.museum","santacruz.museum","santafe.museum","saskatchewan.museum","satx.museum","savannahga.museum","schlesisches.museum","schoenbrunn.museum","schokoladen.museum","school.museum","schweiz.museum","science.museum","scienceandhistory.museum","scienceandindustry.museum","sciencecenter.museum","sciencecenters.museum","science-fiction.museum","sciencehistory.museum","sciences.museum","sciencesnaturelles.museum","scotland.museum","seaport.museum","settlement.museum","settlers.museum","shell.museum","sherbrooke.museum","sibenik.museum","silk.museum","ski.museum","skole.museum","society.museum","sologne.museum","soundandvision.museum","southcarolina.museum","southwest.museum","space.museum","spy.museum","square.museum","stadt.museum","stalbans.museum","starnberg.museum","state.museum","stateofdelaware.museum","station.museum","steam.museum","steiermark.museum","stjohn.museum","stockholm.museum","stpetersburg.museum","stuttgart.museum","suisse.museum","surgeonshall.museum","surrey.museum","svizzera.museum","sweden.museum","sydney.museum","tank.museum","tcm.museum","technology.museum","telekommunikation.museum","television.museum","texas.museum","textile.museum","theater.museum","time.museum","timekeeping.museum","topology.museum","torino.museum","touch.museum","town.museum","transport.museum","tree.museum","trolley.museum","trust.museum","trustee.museum","uhren.museum","ulm.museum","undersea.museum","university.museum","usa.museum","usantiques.museum","usarts.museum","uscountryestate.museum","usculture.museum","usdecorativearts.museum","usgarden.museum","ushistory.museum","ushuaia.museum","uslivinghistory.museum","utah.museum","uvic.museum","valley.museum","vantaa.museum","versailles.museum","viking.museum","village.museum","virginia.museum","virtual.museum","virtuel.museum","vlaanderen.museum","volkenkunde.museum","wales.museum","wallonie.museum","war.museum","washingtondc.museum","watchandclock.museum","watch-and-clock.museum","western.museum","westfalen.museum","whaling.museum","wildlife.museum","williamsburg.museum","windmill.museum","workshop.museum","york.museum","yorkshire.museum","yosemite.museum","youth.museum","zoological.museum","zoology.museum","ירושלים.museum","иком.museum","mv","aero.mv","biz.mv","com.mv","coop.mv","edu.mv","gov.mv","info.mv","int.mv","mil.mv","museum.mv","name.mv","net.mv","org.mv","pro.mv","mw","ac.mw","biz.mw","co.mw","com.mw","coop.mw","edu.mw","gov.mw","int.mw","museum.mw","net.mw","org.mw","mx","com.mx","org.mx","gob.mx","edu.mx","net.mx","my","com.my","net.my","org.my","gov.my","edu.my","mil.my","name.my","mz","ac.mz","adv.mz","co.mz","edu.mz","gov.mz","mil.mz","net.mz","org.mz","na","info.na","pro.na","name.na","school.na","or.na","dr.na","us.na","mx.na","ca.na","in.na","cc.na","tv.na","ws.na","mobi.na","co.na","com.na","org.na","name","nc","asso.nc","nom.nc","ne","net","nf","com.nf","net.nf","per.nf","rec.nf","web.nf","arts.nf","firm.nf","info.nf","other.nf","store.nf","ng","com.ng","edu.ng","gov.ng","i.ng","mil.ng","mobi.ng","name.ng","net.ng","org.ng","sch.ng","ni","ac.ni","biz.ni","co.ni","com.ni","edu.ni","gob.ni","in.ni","info.ni","int.ni","mil.ni","net.ni","nom.ni","org.ni","web.ni","nl","bv.nl","no","fhs.no","vgs.no","fylkesbibl.no","folkebibl.no","museum.no","idrett.no","priv.no","mil.no","stat.no","dep.no","kommune.no","herad.no","aa.no","ah.no","bu.no","fm.no","hl.no","hm.no","jan-mayen.no","mr.no","nl.no","nt.no","of.no","ol.no","oslo.no","rl.no","sf.no","st.no","svalbard.no","tm.no","tr.no","va.no","vf.no","gs.aa.no","gs.ah.no","gs.bu.no","gs.fm.no","gs.hl.no","gs.hm.no","gs.jan-mayen.no","gs.mr.no","gs.nl.no","gs.nt.no","gs.of.no","gs.ol.no","gs.oslo.no","gs.rl.no","gs.sf.no","gs.st.no","gs.svalbard.no","gs.tm.no","gs.tr.no","gs.va.no","gs.vf.no","akrehamn.no","åkrehamn.no","algard.no","ålgård.no","arna.no","brumunddal.no","bryne.no","bronnoysund.no","brønnøysund.no","drobak.no","drøbak.no","egersund.no","fetsund.no","floro.no","florø.no","fredrikstad.no","hokksund.no","honefoss.no","hønefoss.no","jessheim.no","jorpeland.no","jørpeland.no","kirkenes.no","kopervik.no","krokstadelva.no","langevag.no","langevåg.no","leirvik.no","mjondalen.no","mjøndalen.no","mo-i-rana.no","mosjoen.no","mosjøen.no","nesoddtangen.no","orkanger.no","osoyro.no","osøyro.no","raholt.no","råholt.no","sandnessjoen.no","sandnessjøen.no","skedsmokorset.no","slattum.no","spjelkavik.no","stathelle.no","stavern.no","stjordalshalsen.no","stjørdalshalsen.no","tananger.no","tranby.no","vossevangen.no","afjord.no","åfjord.no","agdenes.no","al.no","ål.no","alesund.no","ålesund.no","alstahaug.no","alta.no","áltá.no","alaheadju.no","álaheadju.no","alvdal.no","amli.no","åmli.no","amot.no","åmot.no","andebu.no","andoy.no","andøy.no","andasuolo.no","ardal.no","årdal.no","aremark.no","arendal.no","ås.no","aseral.no","åseral.no","asker.no","askim.no","askvoll.no","askoy.no","askøy.no","asnes.no","åsnes.no","audnedaln.no","aukra.no","aure.no","aurland.no","aurskog-holand.no","aurskog-høland.no","austevoll.no","austrheim.no","averoy.no","averøy.no","balestrand.no","ballangen.no","balat.no","bálát.no","balsfjord.no","bahccavuotna.no","báhccavuotna.no","bamble.no","bardu.no","beardu.no","beiarn.no","bajddar.no","bájddar.no","baidar.no","báidár.no","berg.no","bergen.no","berlevag.no","berlevåg.no","bearalvahki.no","bearalváhki.no","bindal.no","birkenes.no","bjarkoy.no","bjarkøy.no","bjerkreim.no","bjugn.no","bodo.no","bodø.no","badaddja.no","bådåddjå.no","budejju.no","bokn.no","bremanger.no","bronnoy.no","brønnøy.no","bygland.no","bykle.no","barum.no","bærum.no","bo.telemark.no","bø.telemark.no","bo.nordland.no","bø.nordland.no","bievat.no","bievát.no","bomlo.no","bømlo.no","batsfjord.no","båtsfjord.no","bahcavuotna.no","báhcavuotna.no","dovre.no","drammen.no","drangedal.no","dyroy.no","dyrøy.no","donna.no","dønna.no","eid.no","eidfjord.no","eidsberg.no","eidskog.no","eidsvoll.no","eigersund.no","elverum.no","enebakk.no","engerdal.no","etne.no","etnedal.no","evenes.no","evenassi.no","evenášši.no","evje-og-hornnes.no","farsund.no","fauske.no","fuossko.no","fuoisku.no","fedje.no","fet.no","finnoy.no","finnøy.no","fitjar.no","fjaler.no","fjell.no","flakstad.no","flatanger.no","flekkefjord.no","flesberg.no","flora.no","fla.no","flå.no","folldal.no","forsand.no","fosnes.no","frei.no","frogn.no","froland.no","frosta.no","frana.no","fræna.no","froya.no","frøya.no","fusa.no","fyresdal.no","forde.no","førde.no","gamvik.no","gangaviika.no","gáŋgaviika.no","gaular.no","gausdal.no","gildeskal.no","gildeskål.no","giske.no","gjemnes.no","gjerdrum.no","gjerstad.no","gjesdal.no","gjovik.no","gjøvik.no","gloppen.no","gol.no","gran.no","grane.no","granvin.no","gratangen.no","grimstad.no","grong.no","kraanghke.no","kråanghke.no","grue.no","gulen.no","hadsel.no","halden.no","halsa.no","hamar.no","hamaroy.no","habmer.no","hábmer.no","hapmir.no","hápmir.no","hammerfest.no","hammarfeasta.no","hámmárfeasta.no","haram.no","hareid.no","harstad.no","hasvik.no","aknoluokta.no","ákŋoluokta.no","hattfjelldal.no","aarborte.no","haugesund.no","hemne.no","hemnes.no","hemsedal.no","heroy.more-og-romsdal.no","herøy.møre-og-romsdal.no","heroy.nordland.no","herøy.nordland.no","hitra.no","hjartdal.no","hjelmeland.no","hobol.no","hobøl.no","hof.no","hol.no","hole.no","holmestrand.no","holtalen.no","holtålen.no","hornindal.no","horten.no","hurdal.no","hurum.no","hvaler.no","hyllestad.no","hagebostad.no","hægebostad.no","hoyanger.no","høyanger.no","hoylandet.no","høylandet.no","ha.no","hå.no","ibestad.no","inderoy.no","inderøy.no","iveland.no","jevnaker.no","jondal.no","jolster.no","jølster.no","karasjok.no","karasjohka.no","kárášjohka.no","karlsoy.no","galsa.no","gálsá.no","karmoy.no","karmøy.no","kautokeino.no","guovdageaidnu.no","klepp.no","klabu.no","klæbu.no","kongsberg.no","kongsvinger.no","kragero.no","kragerø.no","kristiansand.no","kristiansund.no","krodsherad.no","krødsherad.no","kvalsund.no","rahkkeravju.no","ráhkkerávju.no","kvam.no","kvinesdal.no","kvinnherad.no","kviteseid.no","kvitsoy.no","kvitsøy.no","kvafjord.no","kvæfjord.no","giehtavuoatna.no","kvanangen.no","kvænangen.no","navuotna.no","návuotna.no","kafjord.no","kåfjord.no","gaivuotna.no","gáivuotna.no","larvik.no","lavangen.no","lavagis.no","loabat.no","loabát.no","lebesby.no","davvesiida.no","leikanger.no","leirfjord.no","leka.no","leksvik.no","lenvik.no","leangaviika.no","leaŋgaviika.no","lesja.no","levanger.no","lier.no","lierne.no","lillehammer.no","lillesand.no","lindesnes.no","lindas.no","lindås.no","lom.no","loppa.no","lahppi.no","láhppi.no","lund.no","lunner.no","luroy.no","lurøy.no","luster.no","lyngdal.no","lyngen.no","ivgu.no","lardal.no","lerdal.no","lærdal.no","lodingen.no","lødingen.no","lorenskog.no","lørenskog.no","loten.no","løten.no","malvik.no","masoy.no","måsøy.no","muosat.no","muosát.no","mandal.no","marker.no","marnardal.no","masfjorden.no","meland.no","meldal.no","melhus.no","meloy.no","meløy.no","meraker.no","meråker.no","moareke.no","moåreke.no","midsund.no","midtre-gauldal.no","modalen.no","modum.no","molde.no","moskenes.no","moss.no","mosvik.no","malselv.no","målselv.no","malatvuopmi.no","málatvuopmi.no","namdalseid.no","aejrie.no","namsos.no","namsskogan.no","naamesjevuemie.no","nååmesjevuemie.no","laakesvuemie.no","nannestad.no","narvik.no","narviika.no","naustdal.no","nedre-eiker.no","nes.akershus.no","nes.buskerud.no","nesna.no","nesodden.no","nesseby.no","unjarga.no","unjárga.no","nesset.no","nissedal.no","nittedal.no","nord-aurdal.no","nord-fron.no","nord-odal.no","norddal.no","nordkapp.no","davvenjarga.no","davvenjárga.no","nordre-land.no","nordreisa.no","raisa.no","ráisa.no","nore-og-uvdal.no","notodden.no","naroy.no","nærøy.no","notteroy.no","nøtterøy.no","odda.no","oksnes.no","øksnes.no","oppdal.no","oppegard.no","oppegård.no","orkdal.no","orland.no","ørland.no","orskog.no","ørskog.no","orsta.no","ørsta.no","os.hedmark.no","os.hordaland.no","osen.no","osteroy.no","osterøy.no","ostre-toten.no","østre-toten.no","overhalla.no","ovre-eiker.no","øvre-eiker.no","oyer.no","øyer.no","oygarden.no","øygarden.no","oystre-slidre.no","øystre-slidre.no","porsanger.no","porsangu.no","porsáŋgu.no","porsgrunn.no","radoy.no","radøy.no","rakkestad.no","rana.no","ruovat.no","randaberg.no","rauma.no","rendalen.no","rennebu.no","rennesoy.no","rennesøy.no","rindal.no","ringebu.no","ringerike.no","ringsaker.no","rissa.no","risor.no","risør.no","roan.no","rollag.no","rygge.no","ralingen.no","rælingen.no","rodoy.no","rødøy.no","romskog.no","rømskog.no","roros.no","røros.no","rost.no","røst.no","royken.no","røyken.no","royrvik.no","røyrvik.no","rade.no","råde.no","salangen.no","siellak.no","saltdal.no","salat.no","sálát.no","sálat.no","samnanger.no","sande.more-og-romsdal.no","sande.møre-og-romsdal.no","sande.vestfold.no","sandefjord.no","sandnes.no","sandoy.no","sandøy.no","sarpsborg.no","sauda.no","sauherad.no","sel.no","selbu.no","selje.no","seljord.no","sigdal.no","siljan.no","sirdal.no","skaun.no","skedsmo.no","ski.no","skien.no","skiptvet.no","skjervoy.no","skjervøy.no","skierva.no","skiervá.no","skjak.no","skjåk.no","skodje.no","skanland.no","skånland.no","skanit.no","skánit.no","smola.no","smøla.no","snillfjord.no","snasa.no","snåsa.no","snoasa.no","snaase.no","snåase.no","sogndal.no","sokndal.no","sola.no","solund.no","songdalen.no","sortland.no","spydeberg.no","stange.no","stavanger.no","steigen.no","steinkjer.no","stjordal.no","stjørdal.no","stokke.no","stor-elvdal.no","stord.no","stordal.no","storfjord.no","omasvuotna.no","strand.no","stranda.no","stryn.no","sula.no","suldal.no","sund.no","sunndal.no","surnadal.no","sveio.no","svelvik.no","sykkylven.no","sogne.no","søgne.no","somna.no","sømna.no","sondre-land.no","søndre-land.no","sor-aurdal.no","sør-aurdal.no","sor-fron.no","sør-fron.no","sor-odal.no","sør-odal.no","sor-varanger.no","sør-varanger.no","matta-varjjat.no","mátta-várjjat.no","sorfold.no","sørfold.no","sorreisa.no","sørreisa.no","sorum.no","sørum.no","tana.no","deatnu.no","time.no","tingvoll.no","tinn.no","tjeldsund.no","dielddanuorri.no","tjome.no","tjøme.no","tokke.no","tolga.no","torsken.no","tranoy.no","tranøy.no","tromso.no","tromsø.no","tromsa.no","romsa.no","trondheim.no","troandin.no","trysil.no","trana.no","træna.no","trogstad.no","trøgstad.no","tvedestrand.no","tydal.no","tynset.no","tysfjord.no","divtasvuodna.no","divttasvuotna.no","tysnes.no","tysvar.no","tysvær.no","tonsberg.no","tønsberg.no","ullensaker.no","ullensvang.no","ulvik.no","utsira.no","vadso.no","vadsø.no","cahcesuolo.no","čáhcesuolo.no","vaksdal.no","valle.no","vang.no","vanylven.no","vardo.no","vardø.no","varggat.no","várggát.no","vefsn.no","vaapste.no","vega.no","vegarshei.no","vegårshei.no","vennesla.no","verdal.no","verran.no","vestby.no","vestnes.no","vestre-slidre.no","vestre-toten.no","vestvagoy.no","vestvågøy.no","vevelstad.no","vik.no","vikna.no","vindafjord.no","volda.no","voss.no","varoy.no","værøy.no","vagan.no","vågan.no","voagat.no","vagsoy.no","vågsøy.no","vaga.no","vågå.no","valer.ostfold.no","våler.østfold.no","valer.hedmark.no","våler.hedmark.no","*.np","nr","biz.nr","info.nr","gov.nr","edu.nr","org.nr","net.nr","com.nr","nu","nz","ac.nz","co.nz","cri.nz","geek.nz","gen.nz","govt.nz","health.nz","iwi.nz","kiwi.nz","maori.nz","mil.nz","māori.nz","net.nz","org.nz","parliament.nz","school.nz","om","co.om","com.om","edu.om","gov.om","med.om","museum.om","net.om","org.om","pro.om","onion","org","pa","ac.pa","gob.pa","com.pa","org.pa","sld.pa","edu.pa","net.pa","ing.pa","abo.pa","med.pa","nom.pa","pe","edu.pe","gob.pe","nom.pe","mil.pe","org.pe","com.pe","net.pe","pf","com.pf","org.pf","edu.pf","*.pg","ph","com.ph","net.ph","org.ph","gov.ph","edu.ph","ngo.ph","mil.ph","i.ph","pk","com.pk","net.pk","edu.pk","org.pk","fam.pk","biz.pk","web.pk","gov.pk","gob.pk","gok.pk","gon.pk","gop.pk","gos.pk","info.pk","pl","com.pl","net.pl","org.pl","aid.pl","agro.pl","atm.pl","auto.pl","biz.pl","edu.pl","gmina.pl","gsm.pl","info.pl","mail.pl","miasta.pl","media.pl","mil.pl","nieruchomosci.pl","nom.pl","pc.pl","powiat.pl","priv.pl","realestate.pl","rel.pl","sex.pl","shop.pl","sklep.pl","sos.pl","szkola.pl","targi.pl","tm.pl","tourism.pl","travel.pl","turystyka.pl","gov.pl","ap.gov.pl","ic.gov.pl","is.gov.pl","us.gov.pl","kmpsp.gov.pl","kppsp.gov.pl","kwpsp.gov.pl","psp.gov.pl","wskr.gov.pl","kwp.gov.pl","mw.gov.pl","ug.gov.pl","um.gov.pl","umig.gov.pl","ugim.gov.pl","upow.gov.pl","uw.gov.pl","starostwo.gov.pl","pa.gov.pl","po.gov.pl","psse.gov.pl","pup.gov.pl","rzgw.gov.pl","sa.gov.pl","so.gov.pl","sr.gov.pl","wsa.gov.pl","sko.gov.pl","uzs.gov.pl","wiih.gov.pl","winb.gov.pl","pinb.gov.pl","wios.gov.pl","witd.gov.pl","wzmiuw.gov.pl","piw.gov.pl","wiw.gov.pl","griw.gov.pl","wif.gov.pl","oum.gov.pl","sdn.gov.pl","zp.gov.pl","uppo.gov.pl","mup.gov.pl","wuoz.gov.pl","konsulat.gov.pl","oirm.gov.pl","augustow.pl","babia-gora.pl","bedzin.pl","beskidy.pl","bialowieza.pl","bialystok.pl","bielawa.pl","bieszczady.pl","boleslawiec.pl","bydgoszcz.pl","bytom.pl","cieszyn.pl","czeladz.pl","czest.pl","dlugoleka.pl","elblag.pl","elk.pl","glogow.pl","gniezno.pl","gorlice.pl","grajewo.pl","ilawa.pl","jaworzno.pl","jelenia-gora.pl","jgora.pl","kalisz.pl","kazimierz-dolny.pl","karpacz.pl","kartuzy.pl","kaszuby.pl","katowice.pl","kepno.pl","ketrzyn.pl","klodzko.pl","kobierzyce.pl","kolobrzeg.pl","konin.pl","konskowola.pl","kutno.pl","lapy.pl","lebork.pl","legnica.pl","lezajsk.pl","limanowa.pl","lomza.pl","lowicz.pl","lubin.pl","lukow.pl","malbork.pl","malopolska.pl","mazowsze.pl","mazury.pl","mielec.pl","mielno.pl","mragowo.pl","naklo.pl","nowaruda.pl","nysa.pl","olawa.pl","olecko.pl","olkusz.pl","olsztyn.pl","opoczno.pl","opole.pl","ostroda.pl","ostroleka.pl","ostrowiec.pl","ostrowwlkp.pl","pila.pl","pisz.pl","podhale.pl","podlasie.pl","polkowice.pl","pomorze.pl","pomorskie.pl","prochowice.pl","pruszkow.pl","przeworsk.pl","pulawy.pl","radom.pl","rawa-maz.pl","rybnik.pl","rzeszow.pl","sanok.pl","sejny.pl","slask.pl","slupsk.pl","sosnowiec.pl","stalowa-wola.pl","skoczow.pl","starachowice.pl","stargard.pl","suwalki.pl","swidnica.pl","swiebodzin.pl","swinoujscie.pl","szczecin.pl","szczytno.pl","tarnobrzeg.pl","tgory.pl","turek.pl","tychy.pl","ustka.pl","walbrzych.pl","warmia.pl","warszawa.pl","waw.pl","wegrow.pl","wielun.pl","wlocl.pl","wloclawek.pl","wodzislaw.pl","wolomin.pl","wroclaw.pl","zachpomor.pl","zagan.pl","zarow.pl","zgora.pl","zgorzelec.pl","pm","pn","gov.pn","co.pn","org.pn","edu.pn","net.pn","post","pr","com.pr","net.pr","org.pr","gov.pr","edu.pr","isla.pr","pro.pr","biz.pr","info.pr","name.pr","est.pr","prof.pr","ac.pr","pro","aaa.pro","aca.pro","acct.pro","avocat.pro","bar.pro","cpa.pro","eng.pro","jur.pro","law.pro","med.pro","recht.pro","ps","edu.ps","gov.ps","sec.ps","plo.ps","com.ps","org.ps","net.ps","pt","net.pt","gov.pt","org.pt","edu.pt","int.pt","publ.pt","com.pt","nome.pt","pw","co.pw","ne.pw","or.pw","ed.pw","go.pw","belau.pw","py","com.py","coop.py","edu.py","gov.py","mil.py","net.py","org.py","qa","com.qa","edu.qa","gov.qa","mil.qa","name.qa","net.qa","org.qa","sch.qa","re","asso.re","com.re","nom.re","ro","arts.ro","com.ro","firm.ro","info.ro","nom.ro","nt.ro","org.ro","rec.ro","store.ro","tm.ro","www.ro","rs","ac.rs","co.rs","edu.rs","gov.rs","in.rs","org.rs","ru","ac.ru","edu.ru","gov.ru","int.ru","mil.ru","test.ru","rw","gov.rw","net.rw","edu.rw","ac.rw","com.rw","co.rw","int.rw","mil.rw","gouv.rw","sa","com.sa","net.sa","org.sa","gov.sa","med.sa","pub.sa","edu.sa","sch.sa","sb","com.sb","edu.sb","gov.sb","net.sb","org.sb","sc","com.sc","gov.sc","net.sc","org.sc","edu.sc","sd","com.sd","net.sd","org.sd","edu.sd","med.sd","tv.sd","gov.sd","info.sd","se","a.se","ac.se","b.se","bd.se","brand.se","c.se","d.se","e.se","f.se","fh.se","fhsk.se","fhv.se","g.se","h.se","i.se","k.se","komforb.se","kommunalforbund.se","komvux.se","l.se","lanbib.se","m.se","n.se","naturbruksgymn.se","o.se","org.se","p.se","parti.se","pp.se","press.se","r.se","s.se","t.se","tm.se","u.se","w.se","x.se","y.se","z.se","sg","com.sg","net.sg","org.sg","gov.sg","edu.sg","per.sg","sh","com.sh","net.sh","gov.sh","org.sh","mil.sh","si","sj","sk","sl","com.sl","net.sl","edu.sl","gov.sl","org.sl","sm","sn","art.sn","com.sn","edu.sn","gouv.sn","org.sn","perso.sn","univ.sn","so","com.so","net.so","org.so","sr","st","co.st","com.st","consulado.st","edu.st","embaixada.st","gov.st","mil.st","net.st","org.st","principe.st","saotome.st","store.st","su","sv","com.sv","edu.sv","gob.sv","org.sv","red.sv","sx","gov.sx","sy","edu.sy","gov.sy","net.sy","mil.sy","com.sy","org.sy","sz","co.sz","ac.sz","org.sz","tc","td","tel","tf","tg","th","ac.th","co.th","go.th","in.th","mi.th","net.th","or.th","tj","ac.tj","biz.tj","co.tj","com.tj","edu.tj","go.tj","gov.tj","int.tj","mil.tj","name.tj","net.tj","nic.tj","org.tj","test.tj","web.tj","tk","tl","gov.tl","tm","com.tm","co.tm","org.tm","net.tm","nom.tm","gov.tm","mil.tm","edu.tm","tn","com.tn","ens.tn","fin.tn","gov.tn","ind.tn","intl.tn","nat.tn","net.tn","org.tn","info.tn","perso.tn","tourism.tn","edunet.tn","rnrt.tn","rns.tn","rnu.tn","mincom.tn","agrinet.tn","defense.tn","turen.tn","to","com.to","gov.to","net.to","org.to","edu.to","mil.to","tr","com.tr","info.tr","biz.tr","net.tr","org.tr","web.tr","gen.tr","tv.tr","av.tr","dr.tr","bbs.tr","name.tr","tel.tr","gov.tr","bel.tr","pol.tr","mil.tr","k12.tr","edu.tr","kep.tr","nc.tr","gov.nc.tr","tt","co.tt","com.tt","org.tt","net.tt","biz.tt","info.tt","pro.tt","int.tt","coop.tt","jobs.tt","mobi.tt","travel.tt","museum.tt","aero.tt","name.tt","gov.tt","edu.tt","tv","tw","edu.tw","gov.tw","mil.tw","com.tw","net.tw","org.tw","idv.tw","game.tw","ebiz.tw","club.tw","網路.tw","組織.tw","商業.tw","tz","ac.tz","co.tz","go.tz","hotel.tz","info.tz","me.tz","mil.tz","mobi.tz","ne.tz","or.tz","sc.tz","tv.tz","ua","com.ua","edu.ua","gov.ua","in.ua","net.ua","org.ua","cherkassy.ua","cherkasy.ua","chernigov.ua","chernihiv.ua","chernivtsi.ua","chernovtsy.ua","ck.ua","cn.ua","cr.ua","crimea.ua","cv.ua","dn.ua","dnepropetrovsk.ua","dnipropetrovsk.ua","dominic.ua","donetsk.ua","dp.ua","if.ua","ivano-frankivsk.ua","kh.ua","kharkiv.ua","kharkov.ua","kherson.ua","khmelnitskiy.ua","khmelnytskyi.ua","kiev.ua","kirovograd.ua","km.ua","kr.ua","krym.ua","ks.ua","kv.ua","kyiv.ua","lg.ua","lt.ua","lugansk.ua","lutsk.ua","lv.ua","lviv.ua","mk.ua","mykolaiv.ua","nikolaev.ua","od.ua","odesa.ua","odessa.ua","pl.ua","poltava.ua","rivne.ua","rovno.ua","rv.ua","sb.ua","sebastopol.ua","sevastopol.ua","sm.ua","sumy.ua","te.ua","ternopil.ua","uz.ua","uzhgorod.ua","vinnica.ua","vinnytsia.ua","vn.ua","volyn.ua","yalta.ua","zaporizhzhe.ua","zaporizhzhia.ua","zhitomir.ua","zhytomyr.ua","zp.ua","zt.ua","ug","co.ug","or.ug","ac.ug","sc.ug","go.ug","ne.ug","com.ug","org.ug","uk","ac.uk","co.uk","gov.uk","ltd.uk","me.uk","net.uk","nhs.uk","org.uk","plc.uk","police.uk","*.sch.uk","us","dni.us","fed.us","isa.us","kids.us","nsn.us","ak.us","al.us","ar.us","as.us","az.us","ca.us","co.us","ct.us","dc.us","de.us","fl.us","ga.us","gu.us","hi.us","ia.us","id.us","il.us","in.us","ks.us","ky.us","la.us","ma.us","md.us","me.us","mi.us","mn.us","mo.us","ms.us","mt.us","nc.us","nd.us","ne.us","nh.us","nj.us","nm.us","nv.us","ny.us","oh.us","ok.us","or.us","pa.us","pr.us","ri.us","sc.us","sd.us","tn.us","tx.us","ut.us","vi.us","vt.us","va.us","wa.us","wi.us","wv.us","wy.us","k12.ak.us","k12.al.us","k12.ar.us","k12.as.us","k12.az.us","k12.ca.us","k12.co.us","k12.ct.us","k12.dc.us","k12.de.us","k12.fl.us","k12.ga.us","k12.gu.us","k12.ia.us","k12.id.us","k12.il.us","k12.in.us","k12.ks.us","k12.ky.us","k12.la.us","k12.ma.us","k12.md.us","k12.me.us","k12.mi.us","k12.mn.us","k12.mo.us","k12.ms.us","k12.mt.us","k12.nc.us","k12.ne.us","k12.nh.us","k12.nj.us","k12.nm.us","k12.nv.us","k12.ny.us","k12.oh.us","k12.ok.us","k12.or.us","k12.pa.us","k12.pr.us","k12.ri.us","k12.sc.us","k12.tn.us","k12.tx.us","k12.ut.us","k12.vi.us","k12.vt.us","k12.va.us","k12.wa.us","k12.wi.us","k12.wy.us","cc.ak.us","cc.al.us","cc.ar.us","cc.as.us","cc.az.us","cc.ca.us","cc.co.us","cc.ct.us","cc.dc.us","cc.de.us","cc.fl.us","cc.ga.us","cc.gu.us","cc.hi.us","cc.ia.us","cc.id.us","cc.il.us","cc.in.us","cc.ks.us","cc.ky.us","cc.la.us","cc.ma.us","cc.md.us","cc.me.us","cc.mi.us","cc.mn.us","cc.mo.us","cc.ms.us","cc.mt.us","cc.nc.us","cc.nd.us","cc.ne.us","cc.nh.us","cc.nj.us","cc.nm.us","cc.nv.us","cc.ny.us","cc.oh.us","cc.ok.us","cc.or.us","cc.pa.us","cc.pr.us","cc.ri.us","cc.sc.us","cc.sd.us","cc.tn.us","cc.tx.us","cc.ut.us","cc.vi.us","cc.vt.us","cc.va.us","cc.wa.us","cc.wi.us","cc.wv.us","cc.wy.us","lib.ak.us","lib.al.us","lib.ar.us","lib.as.us","lib.az.us","lib.ca.us","lib.co.us","lib.ct.us","lib.dc.us","lib.fl.us","lib.ga.us","lib.gu.us","lib.hi.us","lib.ia.us","lib.id.us","lib.il.us","lib.in.us","lib.ks.us","lib.ky.us","lib.la.us","lib.ma.us","lib.md.us","lib.me.us","lib.mi.us","lib.mn.us","lib.mo.us","lib.ms.us","lib.mt.us","lib.nc.us","lib.nd.us","lib.ne.us","lib.nh.us","lib.nj.us","lib.nm.us","lib.nv.us","lib.ny.us","lib.oh.us","lib.ok.us","lib.or.us","lib.pa.us","lib.pr.us","lib.ri.us","lib.sc.us","lib.sd.us","lib.tn.us","lib.tx.us","lib.ut.us","lib.vi.us","lib.vt.us","lib.va.us","lib.wa.us","lib.wi.us","lib.wy.us","pvt.k12.ma.us","chtr.k12.ma.us","paroch.k12.ma.us","ann-arbor.mi.us","cog.mi.us","dst.mi.us","eaton.mi.us","gen.mi.us","mus.mi.us","tec.mi.us","washtenaw.mi.us","uy","com.uy","edu.uy","gub.uy","mil.uy","net.uy","org.uy","uz","co.uz","com.uz","net.uz","org.uz","va","vc","com.vc","net.vc","org.vc","gov.vc","mil.vc","edu.vc","ve","arts.ve","co.ve","com.ve","e12.ve","edu.ve","firm.ve","gob.ve","gov.ve","info.ve","int.ve","mil.ve","net.ve","org.ve","rec.ve","store.ve","tec.ve","web.ve","vg","vi","co.vi","com.vi","k12.vi","net.vi","org.vi","vn","com.vn","net.vn","org.vn","edu.vn","gov.vn","int.vn","ac.vn","biz.vn","info.vn","name.vn","pro.vn","health.vn","vu","com.vu","edu.vu","net.vu","org.vu","wf","ws","com.ws","net.ws","org.ws","gov.ws","edu.ws","yt","امارات","հայ","বাংলা","бг","бел","中国","中國","الجزائر","مصر","ею","გე","ελ","香港","公司.香港","教育.香港","政府.香港","個人.香港","網絡.香港","組織.香港","ಭಾರತ","ଭାରତ","ভাৰত","भारतम्","भारोत","ڀارت","ഭാരതം","भारत","بارت","بھارت","భారత్","ભારત","ਭਾਰਤ","ভারত","இந்தியா","ایران","ايران","عراق","الاردن","한국","қаз","ලංකා","இலங்கை","المغرب","мкд","мон","澳門","澳门","مليسيا","عمان","پاکستان","پاكستان","فلسطين","срб","пр.срб","орг.срб","обр.срб","од.срб","упр.срб","ак.срб","рф","قطر","السعودية","السعودیة","السعودیۃ","السعوديه","سودان","新加坡","சிங்கப்பூர்","سورية","سوريا","ไทย","ศึกษา.ไทย","ธุรกิจ.ไทย","รัฐบาล.ไทย","ทหาร.ไทย","เน็ต.ไทย","องค์กร.ไทย","تونس","台灣","台湾","臺灣","укр","اليمن","xxx","*.ye","ac.za","agric.za","alt.za","co.za","edu.za","gov.za","grondar.za","law.za","mil.za","net.za","ngo.za","nis.za","nom.za","org.za","school.za","tm.za","web.za","zm","ac.zm","biz.zm","co.zm","com.zm","edu.zm","gov.zm","info.zm","mil.zm","net.zm","org.zm","sch.zm","zw","ac.zw","co.zw","gov.zw","mil.zw","org.zw","aaa","aarp","abarth","abb","abbott","abbvie","abc","able","abogado","abudhabi","academy","accenture","accountant","accountants","aco","active","actor","adac","ads","adult","aeg","aetna","afamilycompany","afl","africa","agakhan","agency","aig","aigo","airbus","airforce","airtel","akdn","alfaromeo","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","aol","apartments","app","apple","aquarelle","arab","aramco","archi","army","art","arte","asda","associates","athleta","attorney","auction","audi","audible","audio","auspost","author","auto","autos","avianca","aws","axa","azure","baby","baidu","banamex","bananarepublic","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bbc","bbt","bbva","bcg","bcn","beats","beauty","beer","bentley","berlin","best","bestbuy","bet","bharti","bible","bid","bike","bing","bingo","bio","black","blackfriday","blanco","blockbuster","blog","bloomberg","blue","bms","bmw","bnl","bnpparibas","boats","boehringer","bofa","bom","bond","boo","book","booking","bosch","bostik","boston","bot","boutique","box","bradesco","bridgestone","broadway","broker","brother","brussels","budapest","bugatti","build","builders","business","buy","buzz","bzh","cab","cafe","cal","call","calvinklein","cam","camera","camp","cancerresearch","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","cartier","casa","case","caseih","cash","casino","catering","catholic","cba","cbn","cbre","cbs","ceb","center","ceo","cern","cfa","cfd","chanel","channel","charity","chase","chat","cheap","chintai","christmas","chrome","chrysler","church","cipriani","circle","cisco","citadel","citi","citic","city","cityeats","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","coach","codes","coffee","college","cologne","comcast","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cookingchannel","cool","corsica","country","coupon","coupons","courses","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","csc","cuisinella","cymru","cyou","dabur","dad","dance","data","date","dating","datsun","day","dclk","dds","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dnp","docs","doctor","dodge","dog","doha","domains","dot","download","drive","dtv","dubai","duck","dunlop","duns","dupont","durban","dvag","dvr","earth","eat","eco","edeka","education","email","emerck","energy","engineer","engineering","enterprises","epost","epson","equipment","ericsson","erni","esq","estate","esurance","etisalat","eurovision","eus","events","everbank","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fiat","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","flickr","flights","flir","florist","flowers","fly","foo","food","foodnetwork","football","ford","forex","forsale","forum","foundation","fox","free","fresenius","frl","frogans","frontdoor","frontier","ftr","fujitsu","fujixerox","fun","fund","furniture","futbol","fyi","gal","gallery","gallo","gallup","game","games","gap","garden","gbiz","gdn","gea","gent","genting","george","ggee","gift","gifts","gives","giving","glade","glass","gle","global","globo","gmail","gmbh","gmo","gmx","godaddy","gold","goldpoint","golf","goo","goodyear","goog","google","gop","got","grainger","graphics","gratis","green","gripe","grocery","group","guardian","gucci","guge","guide","guitars","guru","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hgtv","hiphop","hisamitsu","hitachi","hiv","hkt","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","honeywell","horse","hospital","host","hosting","hot","hoteles","hotels","hotmail","house","how","hsbc","hughes","hyatt","hyundai","ibm","icbc","ice","icu","ieee","ifm","ikano","imamat","imdb","immo","immobilien","inc","industries","infiniti","ing","ink","institute","insurance","insure","intel","international","intuit","investments","ipiranga","irish","iselect","ismaili","ist","istanbul","itau","itv","iveco","jaguar","java","jcb","jcp","jeep","jetzt","jewelry","jio","jll","jmp","jnj","joburg","jot","joy","jpmorgan","jprs","juegos","juniper","kaufen","kddi","kerryhotels","kerrylogistics","kerryproperties","kfh","kia","kim","kinder","kindle","kitchen","kiwi","koeln","komatsu","kosher","kpmg","kpn","krd","kred","kuokgroup","kyoto","lacaixa","ladbrokes","lamborghini","lamer","lancaster","lancia","lancome","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","liaison","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","linde","link","lipsy","live","living","lixil","llc","loan","loans","locker","locus","loft","lol","london","lotte","lotto","love","lpl","lplfinancial","ltd","ltda","lundbeck","lupin","luxe","luxury","macys","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","maserati","mattel","mba","mckinsey","med","media","meet","melbourne","meme","memorial","men","menu","merckmsd","metlife","miami","microsoft","mini","mint","mit","mitsubishi","mlb","mls","mma","mobile","mobily","moda","moe","moi","mom","monash","money","monster","mopar","mormon","mortgage","moscow","moto","motorcycles","mov","movie","movistar","msd","mtn","mtr","mutual","nab","nadex","nagoya","nationwide","natura","navy","nba","nec","netbank","netflix","network","neustar","new","newholland","news","next","nextdirect","nexus","nfl","ngo","nhk","nico","nike","nikon","ninja","nissan","nissay","nokia","northwesternmutual","norton","now","nowruz","nowtv","nra","nrw","ntt","nyc","obi","observer","off","office","okinawa","olayan","olayangroup","oldnavy","ollo","omega","one","ong","onl","online","onyourside","ooo","open","oracle","orange","organic","origins","osaka","otsuka","ott","ovh","page","panasonic","paris","pars","partners","parts","party","passagens","pay","pccw","pet","pfizer","pharmacy","phd","philips","phone","photo","photography","photos","physio","piaget","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","place","play","playstation","plumbing","plus","pnc","pohl","poker","politie","porn","pramerica","praxi","press","prime","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","pub","pwc","qpon","quebec","quest","qvc","racing","radio","raid","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","rightathome","ril","rio","rip","rmit","rocher","rocks","rodeo","rogers","room","rsvp","rugby","ruhr","run","rwe","ryukyu","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sarl","sas","save","saxo","sbi","sbs","sca","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scjohnson","scor","scot","search","seat","secure","security","seek","select","sener","services","ses","seven","sew","sex","sexy","sfr","shangrila","sharp","shaw","shell","shia","shiksha","shoes","shop","shopping","shouji","show","showtime","shriram","silk","sina","singles","site","ski","skin","sky","skype","sling","smart","smile","sncf","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","space","spiegel","sport","spot","spreadbetting","srl","srt","stada","staples","star","starhub","statebank","statefarm","statoil","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","sucks","supplies","supply","support","surf","surgery","suzuki","swatch","swiftcover","swiss","sydney","symantec","systems","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tci","tdk","team","tech","technology","telefonica","temasek","tennis","teva","thd","theater","theatre","tiaa","tickets","tienda","tiffany","tips","tires","tirol","tjmaxx","tjx","tkmaxx","tmall","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","trade","trading","training","travel","travelchannel","travelers","travelersinsurance","trust","trv","tube","tui","tunes","tushu","tvs","ubank","ubs","uconnect","unicom","university","uno","uol","ups","vacations","vana","vanguard","vegas","ventures","verisign","versicherung","vet","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","vistaprint","viva","vivo","vlaanderen","vodka","volkswagen","volvo","vote","voting","voto","voyage","vuelos","wales","walmart","walter","wang","wanggou","warman","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","wtc","wtf","xbox","xerox","xfinity","xihuan","xin","कॉम","セール","佛山","慈善","集团","在线","大众汽车","点看","คอม","八卦","موقع","公益","公司","香格里拉","网站","移动","我爱你","москва","католик","онлайн","сайт","联通","קום","时尚","微博","淡马锡","ファッション","орг","नेट","ストア","삼성","商标","商店","商城","дети","ポイント","新闻","工行","家電","كوم","中文网","中信","娱乐","谷歌","電訊盈科","购物","クラウド","通販","网店","संगठन","餐厅","网络","ком","诺基亚","食品","飞利浦","手表","手机","ارامكو","العليان","اتصالات","بازار","موبايلي","ابوظبي","كاثوليك","همراه","닷컴","政府","شبكة","بيتك","عرب","机构","组织机构","健康","招聘","рус","珠宝","大拿","みんな","グーグル","世界","書籍","网址","닷넷","コム","天主教","游戏","vermögensberater","vermögensberatung","企业","信息","嘉里大酒店","嘉里","广东","政务","xyz","yachts","yahoo","yamaxun","yandex","yodobashi","yoga","yokohama","you","youtube","yun","zappos","zara","zero","zip","zippo","zone","zuerich","cc.ua","inf.ua","ltd.ua","beep.pl","*.compute.estate","*.alces.network","alwaysdata.net","cloudfront.net","*.compute.amazonaws.com","*.compute-1.amazonaws.com","*.compute.amazonaws.com.cn","us-east-1.amazonaws.com","cn-north-1.eb.amazonaws.com.cn","cn-northwest-1.eb.amazonaws.com.cn","elasticbeanstalk.com","ap-northeast-1.elasticbeanstalk.com","ap-northeast-2.elasticbeanstalk.com","ap-northeast-3.elasticbeanstalk.com","ap-south-1.elasticbeanstalk.com","ap-southeast-1.elasticbeanstalk.com","ap-southeast-2.elasticbeanstalk.com","ca-central-1.elasticbeanstalk.com","eu-central-1.elasticbeanstalk.com","eu-west-1.elasticbeanstalk.com","eu-west-2.elasticbeanstalk.com","eu-west-3.elasticbeanstalk.com","sa-east-1.elasticbeanstalk.com","us-east-1.elasticbeanstalk.com","us-east-2.elasticbeanstalk.com","us-gov-west-1.elasticbeanstalk.com","us-west-1.elasticbeanstalk.com","us-west-2.elasticbeanstalk.com","*.elb.amazonaws.com","*.elb.amazonaws.com.cn","s3.amazonaws.com","s3-ap-northeast-1.amazonaws.com","s3-ap-northeast-2.amazonaws.com","s3-ap-south-1.amazonaws.com","s3-ap-southeast-1.amazonaws.com","s3-ap-southeast-2.amazonaws.com","s3-ca-central-1.amazonaws.com","s3-eu-central-1.amazonaws.com","s3-eu-west-1.amazonaws.com","s3-eu-west-2.amazonaws.com","s3-eu-west-3.amazonaws.com","s3-external-1.amazonaws.com","s3-fips-us-gov-west-1.amazonaws.com","s3-sa-east-1.amazonaws.com","s3-us-gov-west-1.amazonaws.com","s3-us-east-2.amazonaws.com","s3-us-west-1.amazonaws.com","s3-us-west-2.amazonaws.com","s3.ap-northeast-2.amazonaws.com","s3.ap-south-1.amazonaws.com","s3.cn-north-1.amazonaws.com.cn","s3.ca-central-1.amazonaws.com","s3.eu-central-1.amazonaws.com","s3.eu-west-2.amazonaws.com","s3.eu-west-3.amazonaws.com","s3.us-east-2.amazonaws.com","s3.dualstack.ap-northeast-1.amazonaws.com","s3.dualstack.ap-northeast-2.amazonaws.com","s3.dualstack.ap-south-1.amazonaws.com","s3.dualstack.ap-southeast-1.amazonaws.com","s3.dualstack.ap-southeast-2.amazonaws.com","s3.dualstack.ca-central-1.amazonaws.com","s3.dualstack.eu-central-1.amazonaws.com","s3.dualstack.eu-west-1.amazonaws.com","s3.dualstack.eu-west-2.amazonaws.com","s3.dualstack.eu-west-3.amazonaws.com","s3.dualstack.sa-east-1.amazonaws.com","s3.dualstack.us-east-1.amazonaws.com","s3.dualstack.us-east-2.amazonaws.com","s3-website-us-east-1.amazonaws.com","s3-website-us-west-1.amazonaws.com","s3-website-us-west-2.amazonaws.com","s3-website-ap-northeast-1.amazonaws.com","s3-website-ap-southeast-1.amazonaws.com","s3-website-ap-southeast-2.amazonaws.com","s3-website-eu-west-1.amazonaws.com","s3-website-sa-east-1.amazonaws.com","s3-website.ap-northeast-2.amazonaws.com","s3-website.ap-south-1.amazonaws.com","s3-website.ca-central-1.amazonaws.com","s3-website.eu-central-1.amazonaws.com","s3-website.eu-west-2.amazonaws.com","s3-website.eu-west-3.amazonaws.com","s3-website.us-east-2.amazonaws.com","t3l3p0rt.net","tele.amune.org","apigee.io","on-aptible.com","user.party.eus","pimienta.org","poivron.org","potager.org","sweetpepper.org","myasustor.com","myfritz.net","*.awdev.ca","*.advisor.ws","backplaneapp.io","betainabox.com","bnr.la","blackbaudcdn.net","boomla.net","boxfuse.io","square7.ch","bplaced.com","bplaced.de","square7.de","bplaced.net","square7.net","browsersafetymark.io","mycd.eu","ae.org","ar.com","br.com","cn.com","com.de","com.se","de.com","eu.com","gb.com","gb.net","hu.com","hu.net","jp.net","jpn.com","kr.com","mex.com","no.com","qc.com","ru.com","sa.com","se.net","uk.com","uk.net","us.com","uy.com","za.bz","za.com","africa.com","gr.com","in.net","us.org","co.com","c.la","certmgr.org","xenapponazure.com","virtueeldomein.nl","cleverapps.io","c66.me","cloud66.ws","jdevcloud.com","wpdevcloud.com","cloudaccess.host","freesite.host","cloudaccess.net","cloudcontrolled.com","cloudcontrolapp.com","co.ca","*.otap.co","co.cz","c.cdn77.org","cdn77-ssl.net","r.cdn77.net","rsc.cdn77.org","ssl.origin.cdn77-secure.org","cloudns.asia","cloudns.biz","cloudns.club","cloudns.cc","cloudns.eu","cloudns.in","cloudns.info","cloudns.org","cloudns.pro","cloudns.pw","cloudns.us","cloudeity.net","cnpy.gdn","co.nl","co.no","webhosting.be","hosting-cluster.nl","dyn.cosidns.de","dynamisches-dns.de","dnsupdater.de","internet-dns.de","l-o-g-i-n.de","dynamic-dns.info","feste-ip.net","knx-server.net","static-access.net","realm.cz","*.cryptonomic.net","cupcake.is","cyon.link","cyon.site","daplie.me","localhost.daplie.me","dattolocal.com","dattorelay.com","dattoweb.com","mydatto.com","dattolocal.net","mydatto.net","biz.dk","co.dk","firm.dk","reg.dk","store.dk","debian.net","dedyn.io","dnshome.de","drayddns.com","dreamhosters.com","mydrobo.com","drud.io","drud.us","duckdns.org","dy.fi","tunk.org","dyndns-at-home.com","dyndns-at-work.com","dyndns-blog.com","dyndns-free.com","dyndns-home.com","dyndns-ip.com","dyndns-mail.com","dyndns-office.com","dyndns-pics.com","dyndns-remote.com","dyndns-server.com","dyndns-web.com","dyndns-wiki.com","dyndns-work.com","dyndns.biz","dyndns.info","dyndns.org","dyndns.tv","at-band-camp.net","ath.cx","barrel-of-knowledge.info","barrell-of-knowledge.info","better-than.tv","blogdns.com","blogdns.net","blogdns.org","blogsite.org","boldlygoingnowhere.org","broke-it.net","buyshouses.net","cechire.com","dnsalias.com","dnsalias.net","dnsalias.org","dnsdojo.com","dnsdojo.net","dnsdojo.org","does-it.net","doesntexist.com","doesntexist.org","dontexist.com","dontexist.net","dontexist.org","doomdns.com","doomdns.org","dvrdns.org","dyn-o-saur.com","dynalias.com","dynalias.net","dynalias.org","dynathome.net","dyndns.ws","endofinternet.net","endofinternet.org","endoftheinternet.org","est-a-la-maison.com","est-a-la-masion.com","est-le-patron.com","est-mon-blogueur.com","for-better.biz","for-more.biz","for-our.info","for-some.biz","for-the.biz","forgot.her.name","forgot.his.name","from-ak.com","from-al.com","from-ar.com","from-az.net","from-ca.com","from-co.net","from-ct.com","from-dc.com","from-de.com","from-fl.com","from-ga.com","from-hi.com","from-ia.com","from-id.com","from-il.com","from-in.com","from-ks.com","from-ky.com","from-la.net","from-ma.com","from-md.com","from-me.org","from-mi.com","from-mn.com","from-mo.com","from-ms.com","from-mt.com","from-nc.com","from-nd.com","from-ne.com","from-nh.com","from-nj.com","from-nm.com","from-nv.com","from-ny.net","from-oh.com","from-ok.com","from-or.com","from-pa.com","from-pr.com","from-ri.com","from-sc.com","from-sd.com","from-tn.com","from-tx.com","from-ut.com","from-va.com","from-vt.com","from-wa.com","from-wi.com","from-wv.com","from-wy.com","ftpaccess.cc","fuettertdasnetz.de","game-host.org","game-server.cc","getmyip.com","gets-it.net","go.dyndns.org","gotdns.com","gotdns.org","groks-the.info","groks-this.info","ham-radio-op.net","here-for-more.info","hobby-site.com","hobby-site.org","home.dyndns.org","homedns.org","homeftp.net","homeftp.org","homeip.net","homelinux.com","homelinux.net","homelinux.org","homeunix.com","homeunix.net","homeunix.org","iamallama.com","in-the-band.net","is-a-anarchist.com","is-a-blogger.com","is-a-bookkeeper.com","is-a-bruinsfan.org","is-a-bulls-fan.com","is-a-candidate.org","is-a-caterer.com","is-a-celticsfan.org","is-a-chef.com","is-a-chef.net","is-a-chef.org","is-a-conservative.com","is-a-cpa.com","is-a-cubicle-slave.com","is-a-democrat.com","is-a-designer.com","is-a-doctor.com","is-a-financialadvisor.com","is-a-geek.com","is-a-geek.net","is-a-geek.org","is-a-green.com","is-a-guru.com","is-a-hard-worker.com","is-a-hunter.com","is-a-knight.org","is-a-landscaper.com","is-a-lawyer.com","is-a-liberal.com","is-a-libertarian.com","is-a-linux-user.org","is-a-llama.com","is-a-musician.com","is-a-nascarfan.com","is-a-nurse.com","is-a-painter.com","is-a-patsfan.org","is-a-personaltrainer.com","is-a-photographer.com","is-a-player.com","is-a-republican.com","is-a-rockstar.com","is-a-socialist.com","is-a-soxfan.org","is-a-student.com","is-a-teacher.com","is-a-techie.com","is-a-therapist.com","is-an-accountant.com","is-an-actor.com","is-an-actress.com","is-an-anarchist.com","is-an-artist.com","is-an-engineer.com","is-an-entertainer.com","is-by.us","is-certified.com","is-found.org","is-gone.com","is-into-anime.com","is-into-cars.com","is-into-cartoons.com","is-into-games.com","is-leet.com","is-lost.org","is-not-certified.com","is-saved.org","is-slick.com","is-uberleet.com","is-very-bad.org","is-very-evil.org","is-very-good.org","is-very-nice.org","is-very-sweet.org","is-with-theband.com","isa-geek.com","isa-geek.net","isa-geek.org","isa-hockeynut.com","issmarterthanyou.com","isteingeek.de","istmein.de","kicks-ass.net","kicks-ass.org","knowsitall.info","land-4-sale.us","lebtimnetz.de","leitungsen.de","likes-pie.com","likescandy.com","merseine.nu","mine.nu","misconfused.org","mypets.ws","myphotos.cc","neat-url.com","office-on-the.net","on-the-web.tv","podzone.net","podzone.org","readmyblog.org","saves-the-whales.com","scrapper-site.net","scrapping.cc","selfip.biz","selfip.com","selfip.info","selfip.net","selfip.org","sells-for-less.com","sells-for-u.com","sells-it.net","sellsyourhome.org","servebbs.com","servebbs.net","servebbs.org","serveftp.net","serveftp.org","servegame.org","shacknet.nu","simple-url.com","space-to-rent.com","stuff-4-sale.org","stuff-4-sale.us","teaches-yoga.com","thruhere.net","traeumtgerade.de","webhop.biz","webhop.info","webhop.net","webhop.org","worse-than.tv","writesthisblog.com","ddnss.de","dyn.ddnss.de","dyndns.ddnss.de","dyndns1.de","dyn-ip24.de","home-webserver.de","dyn.home-webserver.de","myhome-server.de","ddnss.org","definima.net","definima.io","bci.dnstrace.pro","ddnsfree.com","ddnsgeek.com","giize.com","gleeze.com","kozow.com","loseyourip.com","ooguy.com","theworkpc.com","casacam.net","dynu.net","accesscam.org","camdvr.org","freeddns.org","mywire.org","webredirect.org","myddns.rocks","blogsite.xyz","dynv6.net","e4.cz","mytuleap.com","enonic.io","customer.enonic.io","eu.org","al.eu.org","asso.eu.org","at.eu.org","au.eu.org","be.eu.org","bg.eu.org","ca.eu.org","cd.eu.org","ch.eu.org","cn.eu.org","cy.eu.org","cz.eu.org","de.eu.org","dk.eu.org","edu.eu.org","ee.eu.org","es.eu.org","fi.eu.org","fr.eu.org","gr.eu.org","hr.eu.org","hu.eu.org","ie.eu.org","il.eu.org","in.eu.org","int.eu.org","is.eu.org","it.eu.org","jp.eu.org","kr.eu.org","lt.eu.org","lu.eu.org","lv.eu.org","mc.eu.org","me.eu.org","mk.eu.org","mt.eu.org","my.eu.org","net.eu.org","ng.eu.org","nl.eu.org","no.eu.org","nz.eu.org","paris.eu.org","pl.eu.org","pt.eu.org","q-a.eu.org","ro.eu.org","ru.eu.org","se.eu.org","si.eu.org","sk.eu.org","tr.eu.org","uk.eu.org","us.eu.org","eu-1.evennode.com","eu-2.evennode.com","eu-3.evennode.com","eu-4.evennode.com","us-1.evennode.com","us-2.evennode.com","us-3.evennode.com","us-4.evennode.com","twmail.cc","twmail.net","twmail.org","mymailer.com.tw","url.tw","apps.fbsbx.com","ru.net","adygeya.ru","bashkiria.ru","bir.ru","cbg.ru","com.ru","dagestan.ru","grozny.ru","kalmykia.ru","kustanai.ru","marine.ru","mordovia.ru","msk.ru","mytis.ru","nalchik.ru","nov.ru","pyatigorsk.ru","spb.ru","vladikavkaz.ru","vladimir.ru","abkhazia.su","adygeya.su","aktyubinsk.su","arkhangelsk.su","armenia.su","ashgabad.su","azerbaijan.su","balashov.su","bashkiria.su","bryansk.su","bukhara.su","chimkent.su","dagestan.su","east-kazakhstan.su","exnet.su","georgia.su","grozny.su","ivanovo.su","jambyl.su","kalmykia.su","kaluga.su","karacol.su","karaganda.su","karelia.su","khakassia.su","krasnodar.su","kurgan.su","kustanai.su","lenug.su","mangyshlak.su","mordovia.su","msk.su","murmansk.su","nalchik.su","navoi.su","north-kazakhstan.su","nov.su","obninsk.su","penza.su","pokrovsk.su","sochi.su","spb.su","tashkent.su","termez.su","togliatti.su","troitsk.su","tselinograd.su","tula.su","tuva.su","vladikavkaz.su","vladimir.su","vologda.su","channelsdvr.net","fastlylb.net","map.fastlylb.net","freetls.fastly.net","map.fastly.net","a.prod.fastly.net","global.prod.fastly.net","a.ssl.fastly.net","b.ssl.fastly.net","global.ssl.fastly.net","fastpanel.direct","fastvps-server.com","fhapp.xyz","fedorainfracloud.org","fedorapeople.org","cloud.fedoraproject.org","app.os.fedoraproject.org","app.os.stg.fedoraproject.org","filegear.me","firebaseapp.com","flynnhub.com","flynnhosting.net","freebox-os.com","freeboxos.com","fbx-os.fr","fbxos.fr","freebox-os.fr","freeboxos.fr","freedesktop.org","*.futurecms.at","*.ex.futurecms.at","*.in.futurecms.at","futurehosting.at","futuremailing.at","*.ex.ortsinfo.at","*.kunden.ortsinfo.at","*.statics.cloud","service.gov.uk","github.io","githubusercontent.com","gitlab.io","homeoffice.gov.uk","ro.im","shop.ro","goip.de","*.0emm.com","appspot.com","blogspot.ae","blogspot.al","blogspot.am","blogspot.ba","blogspot.be","blogspot.bg","blogspot.bj","blogspot.ca","blogspot.cf","blogspot.ch","blogspot.cl","blogspot.co.at","blogspot.co.id","blogspot.co.il","blogspot.co.ke","blogspot.co.nz","blogspot.co.uk","blogspot.co.za","blogspot.com","blogspot.com.ar","blogspot.com.au","blogspot.com.br","blogspot.com.by","blogspot.com.co","blogspot.com.cy","blogspot.com.ee","blogspot.com.eg","blogspot.com.es","blogspot.com.mt","blogspot.com.ng","blogspot.com.tr","blogspot.com.uy","blogspot.cv","blogspot.cz","blogspot.de","blogspot.dk","blogspot.fi","blogspot.fr","blogspot.gr","blogspot.hk","blogspot.hr","blogspot.hu","blogspot.ie","blogspot.in","blogspot.is","blogspot.it","blogspot.jp","blogspot.kr","blogspot.li","blogspot.lt","blogspot.lu","blogspot.md","blogspot.mk","blogspot.mr","blogspot.mx","blogspot.my","blogspot.nl","blogspot.no","blogspot.pe","blogspot.pt","blogspot.qa","blogspot.re","blogspot.ro","blogspot.rs","blogspot.ru","blogspot.se","blogspot.sg","blogspot.si","blogspot.sk","blogspot.sn","blogspot.td","blogspot.tw","blogspot.ug","blogspot.vn","cloudfunctions.net","cloud.goog","codespot.com","googleapis.com","googlecode.com","pagespeedmobilizer.com","publishproxy.com","withgoogle.com","withyoutube.com","hashbang.sh","hasura.app","hasura-app.io","hepforge.org","herokuapp.com","herokussl.com","myravendb.com","ravendb.community","ravendb.me","development.run","ravendb.run","moonscale.net","iki.fi","biz.at","info.at","info.cx","ac.leg.br","al.leg.br","am.leg.br","ap.leg.br","ba.leg.br","ce.leg.br","df.leg.br","es.leg.br","go.leg.br","ma.leg.br","mg.leg.br","ms.leg.br","mt.leg.br","pa.leg.br","pb.leg.br","pe.leg.br","pi.leg.br","pr.leg.br","rj.leg.br","rn.leg.br","ro.leg.br","rr.leg.br","rs.leg.br","sc.leg.br","se.leg.br","sp.leg.br","to.leg.br","pixolino.com","ipifony.net","mein-iserv.de","test-iserv.de","myjino.ru","*.hosting.myjino.ru","*.landing.myjino.ru","*.spectrum.myjino.ru","*.vps.myjino.ru","*.triton.zone","*.cns.joyent.com","js.org","keymachine.de","knightpoint.systems","co.krd","edu.krd","git-repos.de","lcube-server.de","svn-repos.de","app.lmpm.com","linkitools.space","linkyard.cloud","linkyard-cloud.ch","we.bs","uklugs.org","glug.org.uk","lug.org.uk","lugs.org.uk","barsy.bg","barsy.co.uk","barsyonline.co.uk","barsycenter.com","barsyonline.com","barsy.club","barsy.de","barsy.eu","barsy.in","barsy.info","barsy.io","barsy.me","barsy.menu","barsy.mobi","barsy.net","barsy.online","barsy.org","barsy.pro","barsy.pub","barsy.shop","barsy.site","barsy.support","barsy.uk","*.magentosite.cloud","mayfirst.info","mayfirst.org","hb.cldmail.ru","miniserver.com","memset.net","cloud.metacentrum.cz","custom.metacentrum.cz","flt.cloud.muni.cz","usr.cloud.muni.cz","meteorapp.com","eu.meteorapp.com","co.pl","azurecontainer.io","azurewebsites.net","azure-mobile.net","cloudapp.net","mozilla-iot.org","bmoattachments.org","net.ru","org.ru","pp.ru","bitballoon.com","netlify.com","4u.com","ngrok.io","nh-serv.co.uk","nfshost.com","dnsking.ch","mypi.co","n4t.co","001www.com","ddnslive.com","myiphost.com","forumz.info","16-b.it","32-b.it","64-b.it","soundcast.me","tcp4.me","dnsup.net","hicam.net","now-dns.net","ownip.net","vpndns.net","dynserv.org","now-dns.org","x443.pw","now-dns.top","ntdll.top","freeddns.us","crafting.xyz","zapto.xyz","nsupdate.info","nerdpol.ovh","blogsyte.com","brasilia.me","cable-modem.org","ciscofreak.com","collegefan.org","couchpotatofries.org","damnserver.com","ddns.me","ditchyourip.com","dnsfor.me","dnsiskinky.com","dvrcam.info","dynns.com","eating-organic.net","fantasyleague.cc","geekgalaxy.com","golffan.us","health-carereform.com","homesecuritymac.com","homesecuritypc.com","hopto.me","ilovecollege.info","loginto.me","mlbfan.org","mmafan.biz","myactivedirectory.com","mydissent.net","myeffect.net","mymediapc.net","mypsx.net","mysecuritycamera.com","mysecuritycamera.net","mysecuritycamera.org","net-freaks.com","nflfan.org","nhlfan.net","no-ip.ca","no-ip.co.uk","no-ip.net","noip.us","onthewifi.com","pgafan.net","point2this.com","pointto.us","privatizehealthinsurance.net","quicksytes.com","read-books.org","securitytactics.com","serveexchange.com","servehumour.com","servep2p.com","servesarcasm.com","stufftoread.com","ufcfan.org","unusualperson.com","workisboring.com","3utilities.com","bounceme.net","ddns.net","ddnsking.com","gotdns.ch","hopto.org","myftp.biz","myftp.org","myvnc.com","no-ip.biz","no-ip.info","no-ip.org","noip.me","redirectme.net","servebeer.com","serveblog.net","servecounterstrike.com","serveftp.com","servegame.com","servehalflife.com","servehttp.com","serveirc.com","serveminecraft.net","servemp3.com","servepics.com","servequake.com","sytes.net","webhop.me","zapto.org","stage.nodeart.io","nodum.co","nodum.io","pcloud.host","nyc.mn","nom.ae","nom.af","nom.ai","nom.al","nym.by","nym.bz","nom.cl","nom.gd","nom.ge","nom.gl","nym.gr","nom.gt","nym.gy","nom.hn","nym.ie","nom.im","nom.ke","nym.kz","nym.la","nym.lc","nom.li","nym.li","nym.lt","nym.lu","nym.me","nom.mk","nym.mn","nym.mx","nom.nu","nym.nz","nym.pe","nym.pt","nom.pw","nom.qa","nym.ro","nom.rs","nom.si","nym.sk","nom.st","nym.su","nym.sx","nom.tj","nym.tw","nom.ug","nom.uy","nom.vc","nom.vg","cya.gg","cloudycluster.net","nid.io","opencraft.hosting","operaunite.com","outsystemscloud.com","ownprovider.com","own.pm","ox.rs","oy.lc","pgfog.com","pagefrontapp.com","art.pl","gliwice.pl","krakow.pl","poznan.pl","wroc.pl","zakopane.pl","pantheonsite.io","gotpantheon.com","mypep.link","on-web.fr","*.platform.sh","*.platformsh.site","xen.prgmr.com","priv.at","protonet.io","chirurgiens-dentistes-en-france.fr","byen.site","ras.ru","qa2.com","dev-myqnapcloud.com","alpha-myqnapcloud.com","myqnapcloud.com","*.quipelements.com","vapor.cloud","vaporcloud.io","rackmaze.com","rackmaze.net","rhcloud.com","resindevice.io","devices.resinstaging.io","hzc.io","wellbeingzone.eu","ptplus.fit","wellbeingzone.co.uk","sandcats.io","logoip.de","logoip.com","schokokeks.net","scrysec.com","firewall-gateway.com","firewall-gateway.de","my-gateway.de","my-router.de","spdns.de","spdns.eu","firewall-gateway.net","my-firewall.org","myfirewall.org","spdns.org","*.s5y.io","*.sensiosite.cloud","biz.ua","co.ua","pp.ua","shiftedit.io","myshopblocks.com","1kapp.com","appchizi.com","applinzi.com","sinaapp.com","vipsinaapp.com","bounty-full.com","alpha.bounty-full.com","beta.bounty-full.com","static.land","dev.static.land","sites.static.land","apps.lair.io","*.stolos.io","spacekit.io","customer.speedpartner.de","storj.farm","utwente.io","temp-dns.com","diskstation.me","dscloud.biz","dscloud.me","dscloud.mobi","dsmynas.com","dsmynas.net","dsmynas.org","familyds.com","familyds.net","familyds.org","i234.me","myds.me","synology.me","vpnplus.to","taifun-dns.de","gda.pl","gdansk.pl","gdynia.pl","med.pl","sopot.pl","gwiddle.co.uk","cust.dev.thingdust.io","cust.disrec.thingdust.io","cust.prod.thingdust.io","cust.testing.thingdust.io","bloxcms.com","townnews-staging.com","12hp.at","2ix.at","4lima.at","lima-city.at","12hp.ch","2ix.ch","4lima.ch","lima-city.ch","trafficplex.cloud","de.cool","12hp.de","2ix.de","4lima.de","lima-city.de","1337.pictures","clan.rip","lima-city.rocks","webspace.rocks","lima.zone","*.transurl.be","*.transurl.eu","*.transurl.nl","tuxfamily.org","dd-dns.de","diskstation.eu","diskstation.org","dray-dns.de","draydns.de","dyn-vpn.de","dynvpn.de","mein-vigor.de","my-vigor.de","my-wan.de","syno-ds.de","synology-diskstation.de","synology-ds.de","uber.space","*.uberspace.de","hk.com","hk.org","ltd.hk","inc.hk","virtualuser.de","virtual-user.de","lib.de.us","2038.io","router.management","v-info.info","wedeploy.io","wedeploy.me","wedeploy.sh","remotewd.com","wmflabs.org","half.host","xnbay.com","u2.xnbay.com","u2-local.xnbay.com","cistron.nl","demon.nl","xs4all.space","official.academy","yolasite.com","ybo.faith","yombo.me","homelink.one","ybo.party","ybo.review","ybo.science","ybo.trade","nohost.me","noho.st","za.net","za.org","now.sh","zone.id"]}),(function(module,exports,__webpack_require__){"use strict";/*!
* Copyright (c) 2015, Salesforce.com, Inc.
* All rights reserved.
*
* Redistribution and use in source and binary forms, with or without
* modification, are permitted provided that the following conditions are met:
*
* 1. Redistributions of source code must retain the above copyright notice,
* this list of conditions and the following disclaimer.
*
* 2. Redistributions in binary form must reproduce the above copyright notice,
* this list of conditions and the following disclaimer in the documentation
* and/or other materials provided with the distribution.
*
* 3. Neither the name of Salesforce.com nor the names of its contributors may
* be used to endorse or promote products derived from this software without
* specific prior written permission.
*
* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
* AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
* IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
* ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
* LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
* CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
* SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
* INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
* CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
* ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
* POSSIBILITY OF SUCH DAMAGE.
*/var Store=__webpack_require__(368).Store;var permuteDomain=__webpack_require__(369).permuteDomain;var pathMatch=__webpack_require__(370).pathMatch;var util=__webpack_require__(25);function MemoryCookieStore(){Store.call(this);this.idx={};}
util.inherits(MemoryCookieStore,Store);exports.MemoryCookieStore=MemoryCookieStore;MemoryCookieStore.prototype.idx=null;MemoryCookieStore.prototype.synchronous=true;MemoryCookieStore.prototype.inspect=function(){return "{ idx: "+util.inspect(this.idx,false,2)+' }';};if(util.inspect.custom){MemoryCookieStore.prototype[util.inspect.custom]=MemoryCookieStore.prototype.inspect;}
MemoryCookieStore.prototype.findCookie=function(domain,path,key,cb){if(!this.idx[domain]){return cb(null,undefined);}
if(!this.idx[domain][path]){return cb(null,undefined);}
return cb(null,this.idx[domain][path][key]||null);};MemoryCookieStore.prototype.findCookies=function(domain,path,cb){var results=[];if(!domain){return cb(null,[]);}
var pathMatcher;if(!path){pathMatcher=function matchAll(domainIndex){for(var curPath in domainIndex){var pathIndex=domainIndex[curPath];for(var key in pathIndex){results.push(pathIndex[key]);}}};}else{pathMatcher=function matchRFC(domainIndex){Object.keys(domainIndex).forEach(function(cookiePath){if(pathMatch(path,cookiePath)){var pathIndex=domainIndex[cookiePath];for(var key in pathIndex){results.push(pathIndex[key]);}}});};}
var domains=permuteDomain(domain)||[domain];var idx=this.idx;domains.forEach(function(curDomain){var domainIndex=idx[curDomain];if(!domainIndex){return;}
pathMatcher(domainIndex);});cb(null,results);};MemoryCookieStore.prototype.putCookie=function(cookie,cb){if(!this.idx[cookie.domain]){this.idx[cookie.domain]={};}
if(!this.idx[cookie.domain][cookie.path]){this.idx[cookie.domain][cookie.path]={};}
this.idx[cookie.domain][cookie.path][cookie.key]=cookie;cb(null);};MemoryCookieStore.prototype.updateCookie=function(oldCookie,newCookie,cb){this.putCookie(newCookie,cb);};MemoryCookieStore.prototype.removeCookie=function(domain,path,key,cb){if(this.idx[domain]&&this.idx[domain][path]&&this.idx[domain][path][key]){delete this.idx[domain][path][key];}
cb(null);};MemoryCookieStore.prototype.removeCookies=function(domain,path,cb){if(this.idx[domain]){if(path){delete this.idx[domain][path];}else{delete this.idx[domain];}}
return cb(null);};MemoryCookieStore.prototype.getAllCookies=function(cb){var cookies=[];var idx=this.idx;var domains=Object.keys(idx);domains.forEach(function(domain){var paths=Object.keys(idx[domain]);paths.forEach(function(path){var keys=Object.keys(idx[domain][path]);keys.forEach(function(key){if(key!==null){cookies.push(idx[domain][path][key]);}});});});cookies.sort(function(a,b){return(a.creationIndex||0)-(b.creationIndex||0);});cb(null,cookies);};}),(function(module,exports){module.exports={"_from":"tough-cookie@~2.4.3","_id":"tough-cookie@2.4.3","_inBundle":false,"_integrity":"sha512-Q5srk/4vDM54WJsJio3XNn6K2sCG+CQ8G5Wz6bZhRZoAe/+TxjWB/GlFAnYEbkYVlON9FMk/fE3h2RLpPXo4lQ==","_location":"/tough-cookie","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"tough-cookie@~2.4.3","name":"tough-cookie","escapedName":"tough-cookie","rawSpec":"~2.4.3","saveSpec":null,"fetchSpec":"~2.4.3"},"_requiredBy":["/request"],"_resolved":"https://registry.npmjs.org/tough-cookie/-/tough-cookie-2.4.3.tgz","_shasum":"53f36da3f47783b0925afa06ff9f3b165280f781","_spec":"tough-cookie@~2.4.3","_where":"/home/alex/Desktop/Node-WebDollar/node_modules/request","author":{"name":"Jeremy Stashewsky","email":"jstash@gmail.com"},"bugs":{"url":"https://github.com/salesforce/tough-cookie/issues"},"bundleDependencies":false,"contributors":[{"name":"Alexander Savin"},{"name":"Ian Livingstone"},{"name":"Ivan Nikulin"},{"name":"Lalit Kapoor"},{"name":"Sam Thompson"},{"name":"Sebastian Mayr"}],"dependencies":{"psl":"^1.1.24","punycode":"^1.4.1"},"deprecated":false,"description":"RFC6265 Cookies and Cookie Jar for node.js","devDependencies":{"async":"^1.4.2","nyc":"^11.6.0","string.prototype.repeat":"^0.2.0","vows":"^0.8.1"},"engines":{"node":">=0.8"},"files":["lib"],"homepage":"https://github.com/salesforce/tough-cookie","keywords":["HTTP","cookie","cookies","set-cookie","cookiejar","jar","RFC6265","RFC2965"],"license":"BSD-3-Clause","main":"./lib/cookie","name":"tough-cookie","repository":{"type":"git","url":"git://github.com/salesforce/tough-cookie.git"},"scripts":{"cover":"nyc --reporter=lcov --reporter=html vows test/*_test.js","test":"vows test/*_test.js"},"version":"2.4.3"}}),(function(module,exports){exports=module.exports=stringify
exports.getSerialize=serializer
function stringify(obj,replacer,spaces,cycleReplacer){return JSON.stringify(obj,serializer(replacer,cycleReplacer),spaces)}
function serializer(replacer,cycleReplacer){var stack=[],keys=[]
if(cycleReplacer==null)cycleReplacer=function(key,value){if(stack[0]===value)return "[Circular ~]"
return "[Circular ~."+keys.slice(0,stack.indexOf(value)).join(".")+"]"}
return function(key,value){if(stack.length>0){var thisPos=stack.indexOf(this)
~thisPos?stack.splice(thisPos+1):stack.push(this)
~thisPos?keys.splice(thisPos,Infinity,key):keys.push(key)
if(~stack.indexOf(value))value=cycleReplacer.call(this,key,value)}
else stack.push(value)
return replacer==null?value:replacer.call(this,key,value)}}}),(function(module,exports,__webpack_require__){"use strict";var http=__webpack_require__(133)
var https=__webpack_require__(238)
var url=__webpack_require__(77)
var util=__webpack_require__(25)
var stream=__webpack_require__(67)
var zlib=__webpack_require__(373)
var aws2=__webpack_require__(820)
var aws4=__webpack_require__(821)
var httpSignature=__webpack_require__(823)
var mime=__webpack_require__(840)
var caseless=__webpack_require__(245)
var ForeverAgent=__webpack_require__(844)
var FormData=__webpack_require__(845)
var extend=__webpack_require__(235)
var isstream=__webpack_require__(383)
var isTypedArray=__webpack_require__(846).strict
var helpers=__webpack_require__(237)
var cookies=__webpack_require__(365)
var getProxyFromURI=__webpack_require__(847)
var Querystring=__webpack_require__(848).Querystring
var Har=__webpack_require__(851).Har
var Auth=__webpack_require__(908).Auth
var OAuth=__webpack_require__(909).OAuth
var hawk=__webpack_require__(911)
var Multipart=__webpack_require__(912).Multipart
var Redirect=__webpack_require__(916).Redirect
var Tunnel=__webpack_require__(917).Tunnel
var now=__webpack_require__(919)
var Buffer=__webpack_require__(4).Buffer
var safeStringify=helpers.safeStringify
var isReadStream=helpers.isReadStream
var toBase64=helpers.toBase64
var defer=helpers.defer
var copy=helpers.copy
var version=helpers.version
var globalCookieJar=cookies.jar()
var globalPool={}
function filterForNonReserved(reserved,options){var object={}
for(var i in options){var notReserved=(reserved.indexOf(i)===-1)
if(notReserved){object[i]=options[i]}}
return object}
function filterOutReservedFunctions(reserved,options){var object={}
for(var i in options){var isReserved=!(reserved.indexOf(i)===-1)
var isFunction=(typeof options[i]==='function')
if(!(isReserved&&isFunction)){object[i]=options[i]}}
return object}
function requestToJSON(){var self=this
return{uri:self.uri,method:self.method,headers:self.headers}}
function responseToJSON(){var self=this
return{statusCode:self.statusCode,body:self.body,headers:self.headers,request:requestToJSON.call(self.request)}}
function Request(options){var self=this
if(options.har){self._har=new Har(self)
options=self._har.options(options)}
stream.Stream.call(self)
var reserved=Object.keys(Request.prototype)
var nonReserved=filterForNonReserved(reserved,options)
extend(self,nonReserved)
options=filterOutReservedFunctions(reserved,options)
self.readable=true
self.writable=true
if(options.method){self.explicitMethod=true}
self._qs=new Querystring(self)
self._auth=new Auth(self)
self._oauth=new OAuth(self)
self._multipart=new Multipart(self)
self._redirect=new Redirect(self)
self._tunnel=new Tunnel(self)
self.init(options)}
util.inherits(Request,stream.Stream)
Request.debug=Object({"MINING_POOL_STATUS":undefined}).NODE_DEBUG&&/\brequest\b/.test(Object({"MINING_POOL_STATUS":undefined}).NODE_DEBUG)
function debug(){if(Request.debug){console.error('REQUEST %s',util.format.apply(util,arguments))}}
Request.prototype.debug=debug
Request.prototype.init=function(options){var self=this
if(!options){options={}}
self.headers=self.headers?copy(self.headers):{}
for(var headerName in self.headers){if(typeof self.headers[headerName]==='undefined'){delete self.headers[headerName]}}
caseless.httpify(self,self.headers)
if(!self.method){self.method=options.method||'GET'}
if(!self.localAddress){self.localAddress=options.localAddress}
self._qs.init(options)
debug(options)
if(!self.pool&&self.pool!==false){self.pool=globalPool}
self.dests=self.dests||[]
self.__isRequestRequest=true
if(!self._callback&&self.callback){self._callback=self.callback
self.callback=function(){if(self._callbackCalled){return}
self._callbackCalled=true
self._callback.apply(self,arguments)}
self.on('error',self.callback.bind())
self.on('complete',self.callback.bind(self,null))}
if(!self.uri&&self.url){self.uri=self.url
delete self.url}
if(self.baseUrl){if(typeof self.baseUrl!=='string'){return self.emit('error',new Error('options.baseUrl must be a string'))}
if(typeof self.uri!=='string'){return self.emit('error',new Error('options.uri must be a string when using options.baseUrl'))}
if(self.uri.indexOf('//')===0||self.uri.indexOf('://')!==-1){return self.emit('error',new Error('options.uri must be a path when using options.baseUrl'))}
var baseUrlEndsWithSlash=self.baseUrl.lastIndexOf('/')===self.baseUrl.length-1
var uriStartsWithSlash=self.uri.indexOf('/')===0
if(baseUrlEndsWithSlash&&uriStartsWithSlash){self.uri=self.baseUrl+self.uri.slice(1)}else if(baseUrlEndsWithSlash||uriStartsWithSlash){self.uri=self.baseUrl+self.uri}else if(self.uri===''){self.uri=self.baseUrl}else{self.uri=self.baseUrl+'/'+self.uri}
delete self.baseUrl}
if(!self.uri){return self.emit('error',new Error('options.uri is a required argument'))}
if(typeof self.uri==='string'){self.uri=url.parse(self.uri)}
if(!self.uri.href){self.uri.href=url.format(self.uri)}
if(self.uri.protocol==='unix:'){return self.emit('error',new Error('`unix://` URL scheme is no longer supported. Please use the format `http://unix:SOCKET:PATH`'))}
if(self.uri.host==='unix'){self.enableUnixSocket()}
if(self.strictSSL===false){self.rejectUnauthorized=false}
if(!self.uri.pathname){self.uri.pathname='/'}
if(!(self.uri.host||(self.uri.hostname&&self.uri.port))&&!self.uri.isUnix){var faultyUri=url.format(self.uri)
var message='Invalid URI "'+faultyUri+'"'
if(Object.keys(options).length===0){message+='. This can be caused by a crappy redirection.'}
self.abort()
return self.emit('error',new Error(message))}
if(!self.hasOwnProperty('proxy')){self.proxy=getProxyFromURI(self.uri)}
self.tunnel=self._tunnel.isEnabled()
if(self.proxy){self._tunnel.setup(options)}
self._redirect.onRequest(options)
self.setHost=false
if(!self.hasHeader('host')){var hostHeaderName=self.originalHostHeaderName||'host'
self.setHeader(hostHeaderName,self.uri.host)
if(self.uri.port){if((self.uri.port==='80'&&self.uri.protocol==='http:')||(self.uri.port==='443'&&self.uri.protocol==='https:')){self.setHeader(hostHeaderName,self.uri.hostname)}}
self.setHost=true}
self.jar(self._jar||options.jar)
if(!self.uri.port){if(self.uri.protocol==='http:'){self.uri.port=80}else if(self.uri.protocol==='https:'){self.uri.port=443}}
if(self.proxy&&!self.tunnel){self.port=self.proxy.port
self.host=self.proxy.hostname}else{self.port=self.uri.port
self.host=self.uri.hostname}
if(options.form){self.form(options.form)}
if(options.formData){var formData=options.formData
var requestForm=self.form()
var appendFormValue=function(key,value){if(value&&value.hasOwnProperty('value')&&value.hasOwnProperty('options')){requestForm.append(key,value.value,value.options)}else{requestForm.append(key,value)}}
for(var formKey in formData){if(formData.hasOwnProperty(formKey)){var formValue=formData[formKey]
if(formValue instanceof Array){for(var j=0;j<formValue.length;j++){appendFormValue(formKey,formValue[j])}}else{appendFormValue(formKey,formValue)}}}}
if(options.qs){self.qs(options.qs)}
if(self.uri.path){self.path=self.uri.path}else{self.path=self.uri.pathname+(self.uri.search||'')}
if(self.path.length===0){self.path='/'}
if(options.aws){self.aws(options.aws)}
if(options.hawk){self.hawk(options.hawk)}
if(options.httpSignature){self.httpSignature(options.httpSignature)}
if(options.auth){if(Object.prototype.hasOwnProperty.call(options.auth,'username')){options.auth.user=options.auth.username}
if(Object.prototype.hasOwnProperty.call(options.auth,'password')){options.auth.pass=options.auth.password}
self.auth(options.auth.user,options.auth.pass,options.auth.sendImmediately,options.auth.bearer)}
if(self.gzip&&!self.hasHeader('accept-encoding')){self.setHeader('accept-encoding','gzip, deflate')}
if(self.uri.auth&&!self.hasHeader('authorization')){var uriAuthPieces=self.uri.auth.split(':').map(function(item){return self._qs.unescape(item)})
self.auth(uriAuthPieces[0],uriAuthPieces.slice(1).join(':'),true)}
if(!self.tunnel&&self.proxy&&self.proxy.auth&&!self.hasHeader('proxy-authorization')){var proxyAuthPieces=self.proxy.auth.split(':').map(function(item){return self._qs.unescape(item)})
var authHeader='Basic '+toBase64(proxyAuthPieces.join(':'))
self.setHeader('proxy-authorization',authHeader)}
if(self.proxy&&!self.tunnel){self.path=(self.uri.protocol+'//'+self.uri.host+self.path)}
if(options.json){self.json(options.json)}
if(options.multipart){self.multipart(options.multipart)}
if(options.time){self.timing=true
self.elapsedTime=self.elapsedTime||0}
function setContentLength(){if(isTypedArray(self.body)){self.body=Buffer.from(self.body)}
if(!self.hasHeader('content-length')){var length
if(typeof self.body==='string'){length=Buffer.byteLength(self.body)}else if(Array.isArray(self.body)){length=self.body.reduce(function(a,b){return a+b.length},0)}else{length=self.body.length}
if(length){self.setHeader('content-length',length)}else{self.emit('error',new Error('Argument error, options.body.'))}}}
if(self.body&&!isstream(self.body)){setContentLength()}
if(options.oauth){self.oauth(options.oauth)}else if(self._oauth.params&&self.hasHeader('authorization')){self.oauth(self._oauth.params)}
var protocol=self.proxy&&!self.tunnel?self.proxy.protocol:self.uri.protocol
var defaultModules={'http:':http,'https:':https}
var httpModules=self.httpModules||{}
self.httpModule=httpModules[protocol]||defaultModules[protocol]
if(!self.httpModule){return self.emit('error',new Error('Invalid protocol: '+protocol))}
if(options.ca){self.ca=options.ca}
if(!self.agent){if(options.agentOptions){self.agentOptions=options.agentOptions}
if(options.agentClass){self.agentClass=options.agentClass}else if(options.forever){var v=version()
if(v.major===0&&v.minor<=10){self.agentClass=protocol==='http:'?ForeverAgent:ForeverAgent.SSL}else{self.agentClass=self.httpModule.Agent
self.agentOptions=self.agentOptions||{}
self.agentOptions.keepAlive=true}}else{self.agentClass=self.httpModule.Agent}}
if(self.pool===false){self.agent=false}else{self.agent=self.agent||self.getNewAgent()}
self.on('pipe',function(src){if(self.ntick&&self._started){self.emit('error',new Error('You cannot pipe to this stream after the outbound request has started.'))}
self.src=src
if(isReadStream(src)){if(!self.hasHeader('content-type')){self.setHeader('content-type',mime.lookup(src.path))}}else{if(src.headers){for(var i in src.headers){if(!self.hasHeader(i)){self.setHeader(i,src.headers[i])}}}
if(self._json&&!self.hasHeader('content-type')){self.setHeader('content-type','application/json')}
if(src.method&&!self.explicitMethod){self.method=src.method}}})
defer(function(){if(self._aborted){return}
var end=function(){if(self._form){if(!self._auth.hasAuth){self._form.pipe(self)}else if(self._auth.hasAuth&&self._auth.sentAuth){self._form.pipe(self)}}
if(self._multipart&&self._multipart.chunked){self._multipart.body.pipe(self)}
if(self.body){if(isstream(self.body)){self.body.pipe(self)}else{setContentLength()
if(Array.isArray(self.body)){self.body.forEach(function(part){self.write(part)})}else{self.write(self.body)}
self.end()}}else if(self.requestBodyStream){console.warn('options.requestBodyStream is deprecated, please pass the request object to stream.pipe.')
self.requestBodyStream.pipe(self)}else if(!self.src){if(self._auth.hasAuth&&!self._auth.sentAuth){self.end()
return}
if(self.method!=='GET'&&typeof self.method!=='undefined'){self.setHeader('content-length',0)}
self.end()}}
if(self._form&&!self.hasHeader('content-length')){self.setHeader(self._form.getHeaders(),true)
self._form.getLength(function(err,length){if(!err&&!isNaN(length)){self.setHeader('content-length',length)}
end()})}else{end()}
self.ntick=true})}
Request.prototype.getNewAgent=function(){var self=this
var Agent=self.agentClass
var options={}
if(self.agentOptions){for(var i in self.agentOptions){options[i]=self.agentOptions[i]}}
if(self.ca){options.ca=self.ca}
if(self.ciphers){options.ciphers=self.ciphers}
if(self.secureProtocol){options.secureProtocol=self.secureProtocol}
if(self.secureOptions){options.secureOptions=self.secureOptions}
if(typeof self.rejectUnauthorized!=='undefined'){options.rejectUnauthorized=self.rejectUnauthorized}
if(self.cert&&self.key){options.key=self.key
options.cert=self.cert}
if(self.pfx){options.pfx=self.pfx}
if(self.passphrase){options.passphrase=self.passphrase}
var poolKey=''
if(Agent!==self.httpModule.Agent){poolKey+=Agent.name}
var proxy=self.proxy
if(typeof proxy==='string'){proxy=url.parse(proxy)}
var isHttps=(proxy&&proxy.protocol==='https:')||this.uri.protocol==='https:'
if(isHttps){if(options.ca){if(poolKey){poolKey+=':'}
poolKey+=options.ca}
if(typeof options.rejectUnauthorized!=='undefined'){if(poolKey){poolKey+=':'}
poolKey+=options.rejectUnauthorized}
if(options.cert){if(poolKey){poolKey+=':'}
poolKey+=options.cert.toString('ascii')+options.key.toString('ascii')}
if(options.pfx){if(poolKey){poolKey+=':'}
poolKey+=options.pfx.toString('ascii')}
if(options.ciphers){if(poolKey){poolKey+=':'}
poolKey+=options.ciphers}
if(options.secureProtocol){if(poolKey){poolKey+=':'}
poolKey+=options.secureProtocol}
if(options.secureOptions){if(poolKey){poolKey+=':'}
poolKey+=options.secureOptions}}
if(self.pool===globalPool&&!poolKey&&Object.keys(options).length===0&&self.httpModule.globalAgent){return self.httpModule.globalAgent}
poolKey=self.uri.protocol+poolKey
if(!self.pool[poolKey]){self.pool[poolKey]=new Agent(options)
if(self.pool.maxSockets){self.pool[poolKey].maxSockets=self.pool.maxSockets}}
return self.pool[poolKey]}
Request.prototype.start=function(){var self=this
if(self.timing){var startTime=new Date().getTime()
var startTimeNow=now()}
if(self._aborted){return}
self._started=true
self.method=self.method||'GET'
self.href=self.uri.href
if(self.src&&self.src.stat&&self.src.stat.size&&!self.hasHeader('content-length')){self.setHeader('content-length',self.src.stat.size)}
if(self._aws){self.aws(self._aws,true)}
var reqOptions=copy(self)
delete reqOptions.auth
debug('make request',self.uri.href)
delete reqOptions.timeout
try{self.req=self.httpModule.request(reqOptions)}catch(err){self.emit('error',err)
return}
if(self.timing){self.startTime=startTime
self.startTimeNow=startTimeNow
self.timings={}}
var timeout
if(self.timeout&&!self.timeoutTimer){if(self.timeout<0){timeout=0}else if(typeof self.timeout==='number'&&isFinite(self.timeout)){timeout=self.timeout}}
self.req.on('response',self.onRequestResponse.bind(self))
self.req.on('error',self.onRequestError.bind(self))
self.req.on('drain',function(){self.emit('drain')})
self.req.on('socket',function(socket){var isConnecting=socket._connecting||socket.connecting
if(self.timing){self.timings.socket=now()-self.startTimeNow
if(isConnecting){var onLookupTiming=function(){self.timings.lookup=now()-self.startTimeNow}
var onConnectTiming=function(){self.timings.connect=now()-self.startTimeNow}
socket.once('lookup',onLookupTiming)
socket.once('connect',onConnectTiming)
self.req.once('error',function(){socket.removeListener('lookup',onLookupTiming)
socket.removeListener('connect',onConnectTiming)})}}
var setReqTimeout=function(){self.req.setTimeout(timeout,function(){if(self.req){self.abort()
var e=new Error('ESOCKETTIMEDOUT')
e.code='ESOCKETTIMEDOUT'
e.connect=false
self.emit('error',e)}})}
if(timeout!==undefined){if(isConnecting){var onReqSockConnect=function(){socket.removeListener('connect',onReqSockConnect)
clearTimeout(self.timeoutTimer)
self.timeoutTimer=null
setReqTimeout()}
socket.on('connect',onReqSockConnect)
self.req.on('error',function(err){socket.removeListener('connect',onReqSockConnect)})
self.timeoutTimer=setTimeout(function(){socket.removeListener('connect',onReqSockConnect)
self.abort()
var e=new Error('ETIMEDOUT')
e.code='ETIMEDOUT'
e.connect=true
self.emit('error',e)},timeout)}else{setReqTimeout()}}
self.emit('socket',socket)})
self.emit('request',self.req)}
Request.prototype.onRequestError=function(error){var self=this
if(self._aborted){return}
if(self.req&&self.req._reusedSocket&&error.code==='ECONNRESET'&&self.agent.addRequestNoreuse){self.agent={addRequest:self.agent.addRequestNoreuse.bind(self.agent)}
self.start()
self.req.end()
return}
if(self.timeout&&self.timeoutTimer){clearTimeout(self.timeoutTimer)
self.timeoutTimer=null}
self.emit('error',error)}
Request.prototype.onRequestResponse=function(response){var self=this
if(self.timing){self.timings.response=now()-self.startTimeNow}
debug('onRequestResponse',self.uri.href,response.statusCode,response.headers)
response.on('end',function(){if(self.timing){self.timings.end=now()-self.startTimeNow
response.timingStart=self.startTime
if(!self.timings.socket){self.timings.socket=0}
if(!self.timings.lookup){self.timings.lookup=self.timings.socket}
if(!self.timings.connect){self.timings.connect=self.timings.lookup}
if(!self.timings.response){self.timings.response=self.timings.connect}
debug('elapsed time',self.timings.end)
self.elapsedTime+=Math.round(self.timings.end)
response.elapsedTime=self.elapsedTime
response.timings=self.timings
response.timingPhases={wait:self.timings.socket,dns:self.timings.lookup-self.timings.socket,tcp:self.timings.connect-self.timings.lookup,firstByte:self.timings.response-self.timings.connect,download:self.timings.end-self.timings.response,total:self.timings.end}}
debug('response end',self.uri.href,response.statusCode,response.headers)})
if(self._aborted){debug('aborted',self.uri.href)
response.resume()
return}
self.response=response
response.request=self
response.toJSON=responseToJSON
if(self.httpModule===https&&self.strictSSL&&(!response.hasOwnProperty('socket')||!response.socket.authorized)){debug('strict ssl error',self.uri.href)
var sslErr=response.hasOwnProperty('socket')?response.socket.authorizationError:self.uri.href+' does not support SSL'
self.emit('error',new Error('SSL Error: '+sslErr))
return}
self.originalHost=self.getHeader('host')
if(!self.originalHostHeaderName){self.originalHostHeaderName=self.hasHeader('host')}
if(self.setHost){self.removeHeader('host')}
if(self.timeout&&self.timeoutTimer){clearTimeout(self.timeoutTimer)
self.timeoutTimer=null}
var targetCookieJar=(self._jar&&self._jar.setCookie)?self._jar:globalCookieJar
var addCookie=function(cookie){try{targetCookieJar.setCookie(cookie,self.uri.href,{ignoreError:true})}catch(e){self.emit('error',e)}}
response.caseless=caseless(response.headers)
if(response.caseless.has('set-cookie')&&(!self._disableCookies)){var headerName=response.caseless.has('set-cookie')
if(Array.isArray(response.headers[headerName])){response.headers[headerName].forEach(addCookie)}else{addCookie(response.headers[headerName])}}
if(self._redirect.onResponse(response)){return}else{response.on('close',function(){if(!self._ended){self.response.emit('end')}})
response.once('end',function(){self._ended=true})
var noBody=function(code){return(self.method==='HEAD'||(code>=100&&code<200)||code===204||code===304)}
var responseContent
if(self.gzip&&!noBody(response.statusCode)){var contentEncoding=response.headers['content-encoding']||'identity'
contentEncoding=contentEncoding.trim().toLowerCase()
var zlibOptions={flush:zlib.Z_SYNC_FLUSH,finishFlush:zlib.Z_SYNC_FLUSH}
if(contentEncoding==='gzip'){responseContent=zlib.createGunzip(zlibOptions)
response.pipe(responseContent)}else if(contentEncoding==='deflate'){responseContent=zlib.createInflate(zlibOptions)
response.pipe(responseContent)}else{if(contentEncoding!=='identity'){debug('ignoring unrecognized Content-Encoding '+contentEncoding)}
responseContent=response}}else{responseContent=response}
if(self.encoding){if(self.dests.length!==0){console.error('Ignoring encoding parameter as this stream is being piped to another stream which makes the encoding option invalid.')}else{responseContent.setEncoding(self.encoding)}}
if(self._paused){responseContent.pause()}
self.responseContent=responseContent
self.emit('response',response)
self.dests.forEach(function(dest){self.pipeDest(dest)})
responseContent.on('data',function(chunk){if(self.timing&&!self.responseStarted){self.responseStartTime=(new Date()).getTime()
response.responseStartTime=self.responseStartTime}
self._destdata=true
self.emit('data',chunk)})
responseContent.once('end',function(chunk){self.emit('end',chunk)})
responseContent.on('error',function(error){self.emit('error',error)})
responseContent.on('close',function(){self.emit('close')})
if(self.callback){self.readResponseBody(response)}else{self.on('end',function(){if(self._aborted){debug('aborted',self.uri.href)
return}
self.emit('complete',response)})}}
debug('finish init function',self.uri.href)}
Request.prototype.readResponseBody=function(response){var self=this
debug("reading response's body")
var buffers=[]
var bufferLength=0
var strings=[]
self.on('data',function(chunk){if(!Buffer.isBuffer(chunk)){strings.push(chunk)}else if(chunk.length){bufferLength+=chunk.length
buffers.push(chunk)}})
self.on('end',function(){debug('end event',self.uri.href)
if(self._aborted){debug('aborted',self.uri.href)
buffers=[]
bufferLength=0
return}
if(bufferLength){debug('has body',self.uri.href,bufferLength)
response.body=Buffer.concat(buffers,bufferLength)
if(self.encoding!==null){response.body=response.body.toString(self.encoding)}
buffers=[]
bufferLength=0}else if(strings.length){if(self.encoding==='utf8'&&strings[0].length>0&&strings[0][0]==='\uFEFF'){strings[0]=strings[0].substring(1)}
response.body=strings.join('')}
if(self._json){try{response.body=JSON.parse(response.body,self._jsonReviver)}catch(e){debug('invalid JSON received',self.uri.href)}}
debug('emitting complete',self.uri.href)
if(typeof response.body==='undefined'&&!self._json){response.body=self.encoding===null?Buffer.alloc(0):''}
self.emit('complete',response,response.body)})}
Request.prototype.abort=function(){var self=this
self._aborted=true
if(self.req){self.req.abort()}else if(self.response){self.response.destroy()}
self.emit('abort')}
Request.prototype.pipeDest=function(dest){var self=this
var response=self.response
if(dest.headers&&!dest.headersSent){if(response.caseless.has('content-type')){var ctname=response.caseless.has('content-type')
if(dest.setHeader){dest.setHeader(ctname,response.headers[ctname])}else{dest.headers[ctname]=response.headers[ctname]}}
if(response.caseless.has('content-length')){var clname=response.caseless.has('content-length')
if(dest.setHeader){dest.setHeader(clname,response.headers[clname])}else{dest.headers[clname]=response.headers[clname]}}}
if(dest.setHeader&&!dest.headersSent){for(var i in response.headers){if(!self.gzip||i!=='content-encoding'){dest.setHeader(i,response.headers[i])}}
dest.statusCode=response.statusCode}
if(self.pipefilter){self.pipefilter(response,dest)}}
Request.prototype.qs=function(q,clobber){var self=this
var base
if(!clobber&&self.uri.query){base=self._qs.parse(self.uri.query)}else{base={}}
for(var i in q){base[i]=q[i]}
var qs=self._qs.stringify(base)
if(qs===''){return self}
self.uri=url.parse(self.uri.href.split('?')[0]+'?'+qs)
self.url=self.uri
self.path=self.uri.path
if(self.uri.host==='unix'){self.enableUnixSocket()}
return self}
Request.prototype.form=function(form){var self=this
if(form){if(!/^application\/x-www-form-urlencoded\b/.test(self.getHeader('content-type'))){self.setHeader('content-type','application/x-www-form-urlencoded')}
self.body=(typeof form==='string')?self._qs.rfc3986(form.toString('utf8')):self._qs.stringify(form).toString('utf8')
return self}
self._form=new FormData()
self._form.on('error',function(err){err.message='form-data: '+err.message
self.emit('error',err)
self.abort()})
return self._form}
Request.prototype.multipart=function(multipart){var self=this
self._multipart.onRequest(multipart)
if(!self._multipart.chunked){self.body=self._multipart.body}
return self}
Request.prototype.json=function(val){var self=this
if(!self.hasHeader('accept')){self.setHeader('accept','application/json')}
if(typeof self.jsonReplacer==='function'){self._jsonReplacer=self.jsonReplacer}
self._json=true
if(typeof val==='boolean'){if(self.body!==undefined){if(!/^application\/x-www-form-urlencoded\b/.test(self.getHeader('content-type'))){self.body=safeStringify(self.body,self._jsonReplacer)}else{self.body=self._qs.rfc3986(self.body)}
if(!self.hasHeader('content-type')){self.setHeader('content-type','application/json')}}}else{self.body=safeStringify(val,self._jsonReplacer)
if(!self.hasHeader('content-type')){self.setHeader('content-type','application/json')}}
if(typeof self.jsonReviver==='function'){self._jsonReviver=self.jsonReviver}
return self}
Request.prototype.getHeader=function(name,headers){var self=this
var result,re,match
if(!headers){headers=self.headers}
Object.keys(headers).forEach(function(key){if(key.length!==name.length){return}
re=new RegExp(name,'i')
match=key.match(re)
if(match){result=headers[key]}})
return result}
Request.prototype.enableUnixSocket=function(){var unixParts=this.uri.path.split(':')
var host=unixParts[0]
var path=unixParts[1]
this.socketPath=host
this.uri.pathname=path
this.uri.path=path
this.uri.host=host
this.uri.hostname=host
this.uri.isUnix=true}
Request.prototype.auth=function(user,pass,sendImmediately,bearer){var self=this
self._auth.onRequest(user,pass,sendImmediately,bearer)
return self}
Request.prototype.aws=function(opts,now){var self=this
if(!now){self._aws=opts
return self}
if(opts.sign_version===4||opts.sign_version==='4'){var options={host:self.uri.host,path:self.uri.path,method:self.method,headers:self.headers,body:self.body}
if(opts.service){options.service=opts.service}
var signRes=aws4.sign(options,{accessKeyId:opts.key,secretAccessKey:opts.secret,sessionToken:opts.session})
self.setHeader('authorization',signRes.headers.Authorization)
self.setHeader('x-amz-date',signRes.headers['X-Amz-Date'])
if(signRes.headers['X-Amz-Security-Token']){self.setHeader('x-amz-security-token',signRes.headers['X-Amz-Security-Token'])}}else{var date=new Date()
self.setHeader('date',date.toUTCString())
var auth={key:opts.key,secret:opts.secret,verb:self.method.toUpperCase(),date:date,contentType:self.getHeader('content-type')||'',md5:self.getHeader('content-md5')||'',amazonHeaders:aws2.canonicalizeHeaders(self.headers)}
var path=self.uri.path
if(opts.bucket&&path){auth.resource='/'+opts.bucket+path}else if(opts.bucket&&!path){auth.resource='/'+opts.bucket}else if(!opts.bucket&&path){auth.resource=path}else if(!opts.bucket&&!path){auth.resource='/'}
auth.resource=aws2.canonicalizeResource(auth.resource)
self.setHeader('authorization',aws2.authorization(auth))}
return self}
Request.prototype.httpSignature=function(opts){var self=this
httpSignature.signRequest({getHeader:function(header){return self.getHeader(header,self.headers)},setHeader:function(header,value){self.setHeader(header,value)},method:self.method,path:self.path},opts)
debug('httpSignature authorization',self.getHeader('authorization'))
return self}
Request.prototype.hawk=function(opts){var self=this
self.setHeader('Authorization',hawk.header(self.uri,self.method,opts))}
Request.prototype.oauth=function(_oauth){var self=this
self._oauth.onRequest(_oauth)
return self}
Request.prototype.jar=function(jar){var self=this
var cookies
if(self._redirect.redirectsFollowed===0){self.originalCookieHeader=self.getHeader('cookie')}
if(!jar){cookies=false
self._disableCookies=true}else{var targetCookieJar=(jar&&jar.getCookieString)?jar:globalCookieJar
var urihref=self.uri.href
if(targetCookieJar){cookies=targetCookieJar.getCookieString(urihref)}}
if(cookies&&cookies.length){if(self.originalCookieHeader){self.setHeader('cookie',self.originalCookieHeader+'; '+cookies)}else{self.setHeader('cookie',cookies)}}
self._jar=jar
return self}
Request.prototype.pipe=function(dest,opts){var self=this
if(self.response){if(self._destdata){self.emit('error',new Error('You cannot pipe after data has been emitted from the response.'))}else if(self._ended){self.emit('error',new Error('You cannot pipe after the response has been ended.'))}else{stream.Stream.prototype.pipe.call(self,dest,opts)
self.pipeDest(dest)
return dest}}else{self.dests.push(dest)
stream.Stream.prototype.pipe.call(self,dest,opts)
return dest}}
Request.prototype.write=function(){var self=this
if(self._aborted){return}
if(!self._started){self.start()}
if(self.req){return self.req.write.apply(self.req,arguments)}}
Request.prototype.end=function(chunk){var self=this
if(self._aborted){return}
if(chunk){self.write(chunk)}
if(!self._started){self.start()}
if(self.req){self.req.end()}}
Request.prototype.pause=function(){var self=this
if(!self.responseContent){self._paused=true}else{self.responseContent.pause.apply(self.responseContent,arguments)}}
Request.prototype.resume=function(){var self=this
if(!self.responseContent){self._paused=false}else{self.responseContent.resume.apply(self.responseContent,arguments)}}
Request.prototype.destroy=function(){var self=this
if(!self._ended){self.end()}else if(self.response){self.response.destroy()}}
Request.defaultProxyHeaderWhiteList=Tunnel.defaultProxyHeaderWhiteList.slice()
Request.defaultProxyHeaderExclusiveList=Tunnel.defaultProxyHeaderExclusiveList.slice()
Request.prototype.toJSON=requestToJSON
module.exports=Request}),(function(module,exports,__webpack_require__){(function(Buffer,global,process){var capability=__webpack_require__(371)
var inherits=__webpack_require__(7)
var response=__webpack_require__(372)
var stream=__webpack_require__(127)
var toArrayBuffer=__webpack_require__(808)
var IncomingMessage=response.IncomingMessage
var rStates=response.readyStates
function decideMode(preferBinary,useFetch){if(capability.fetch&&useFetch){return 'fetch'}else if(capability.mozchunkedarraybuffer){return 'moz-chunked-arraybuffer'}else if(capability.msstream){return 'ms-stream'}else if(capability.arraybuffer&&preferBinary){return 'arraybuffer'}else if(capability.vbArray&&preferBinary){return 'text:vbarray'}else{return 'text'}}
var ClientRequest=module.exports=function(opts){var self=this
stream.Writable.call(self)
self._opts=opts
self._body=[]
self._headers={}
if(opts.auth)
self.setHeader('Authorization','Basic '+new Buffer(opts.auth).toString('base64'))
Object.keys(opts.headers).forEach(function(name){self.setHeader(name,opts.headers[name])})
var preferBinary
var useFetch=true
if(opts.mode==='disable-fetch'||('requestTimeout'in opts&&!capability.abortController)){useFetch=false
preferBinary=true}else if(opts.mode==='prefer-streaming'){preferBinary=false}else if(opts.mode==='allow-wrong-content-type'){preferBinary=!capability.overrideMimeType}else if(!opts.mode||opts.mode==='default'||opts.mode==='prefer-fast'){preferBinary=true}else{throw new Error('Invalid value for opts.mode')}
self._mode=decideMode(preferBinary,useFetch)
self._fetchTimer=null
self.on('finish',function(){self._onFinish()})}
inherits(ClientRequest,stream.Writable)
ClientRequest.prototype.setHeader=function(name,value){var self=this
var lowerName=name.toLowerCase()
if(unsafeHeaders.indexOf(lowerName)!==-1)
return
self._headers[lowerName]={name:name,value:value}}
ClientRequest.prototype.getHeader=function(name){var header=this._headers[name.toLowerCase()]
if(header)
return header.value
return null}
ClientRequest.prototype.removeHeader=function(name){var self=this
delete self._headers[name.toLowerCase()]}
ClientRequest.prototype._onFinish=function(){var self=this
if(self._destroyed)
return
var opts=self._opts
var headersObj=self._headers
var body=null
if(opts.method!=='GET'&&opts.method!=='HEAD'){if(capability.arraybuffer){body=toArrayBuffer(Buffer.concat(self._body))}else if(capability.blobConstructor){body=new global.Blob(self._body.map(function(buffer){return toArrayBuffer(buffer)}),{type:(headersObj['content-type']||{}).value||''})}else{body=Buffer.concat(self._body).toString()}}
var headersList=[]
Object.keys(headersObj).forEach(function(keyName){var name=headersObj[keyName].name
var value=headersObj[keyName].value
if(Array.isArray(value)){value.forEach(function(v){headersList.push([name,v])})}else{headersList.push([name,value])}})
if(self._mode==='fetch'){var signal=null
var fetchTimer=null
if(capability.abortController){var controller=new AbortController()
signal=controller.signal
self._fetchAbortController=controller
if('requestTimeout'in opts&&opts.requestTimeout!==0){self._fetchTimer=global.setTimeout(function(){self.emit('requestTimeout')
if(self._fetchAbortController)
self._fetchAbortController.abort()},opts.requestTimeout)}}
global.fetch(self._opts.url,{method:self._opts.method,headers:headersList,body:body||undefined,mode:'cors',credentials:opts.withCredentials?'include':'same-origin',signal:signal}).then(function(response){self._fetchResponse=response
self._connect()},function(reason){global.clearTimeout(self._fetchTimer)
if(!self._destroyed)
self.emit('error',reason)})}else{var xhr=self._xhr=new global.XMLHttpRequest()
try{xhr.open(self._opts.method,self._opts.url,true)}catch(err){process.nextTick(function(){self.emit('error',err)})
return}
if('responseType'in xhr)
xhr.responseType=self._mode.split(':')[0]
if('withCredentials'in xhr)
xhr.withCredentials=!!opts.withCredentials
if(self._mode==='text'&&'overrideMimeType'in xhr)
xhr.overrideMimeType('text/plain; charset=x-user-defined')
if('requestTimeout'in opts){xhr.timeout=opts.requestTimeout
xhr.ontimeout=function(){self.emit('requestTimeout')}}
headersList.forEach(function(header){xhr.setRequestHeader(header[0],header[1])})
self._response=null
xhr.onreadystatechange=function(){switch(xhr.readyState){case rStates.LOADING:case rStates.DONE:self._onXHRProgress()
break}}
if(self._mode==='moz-chunked-arraybuffer'){xhr.onprogress=function(){self._onXHRProgress()}}
xhr.onerror=function(){if(self._destroyed)
return
self.emit('error',new Error('XHR error'))}
try{xhr.send(body)}catch(err){process.nextTick(function(){self.emit('error',err)})
return}}}
function statusValid(xhr){try{var status=xhr.status
return(status!==null&&status!==0)}catch(e){return false}}
ClientRequest.prototype._onXHRProgress=function(){var self=this
if(!statusValid(self._xhr)||self._destroyed)
return
if(!self._response)
self._connect()
self._response._onXHRProgress()}
ClientRequest.prototype._connect=function(){var self=this
if(self._destroyed)
return
self._response=new IncomingMessage(self._xhr,self._fetchResponse,self._mode,self._fetchTimer)
self._response.on('error',function(err){self.emit('error',err)})
self.emit('response',self._response)}
ClientRequest.prototype._write=function(chunk,encoding,cb){var self=this
self._body.push(chunk)
cb()}
ClientRequest.prototype.abort=ClientRequest.prototype.destroy=function(){var self=this
self._destroyed=true
global.clearTimeout(self._fetchTimer)
if(self._response)
self._response._destroyed=true
if(self._xhr)
self._xhr.abort()
else if(self._fetchAbortController)
self._fetchAbortController.abort()}
ClientRequest.prototype.end=function(data,encoding,cb){var self=this
if(typeof data==='function'){cb=data
data=undefined}
stream.Writable.prototype.end.call(self,data,encoding,cb)}
ClientRequest.prototype.flushHeaders=function(){}
ClientRequest.prototype.setTimeout=function(){}
ClientRequest.prototype.setNoDelay=function(){}
ClientRequest.prototype.setSocketKeepAlive=function(){}
var unsafeHeaders=['accept-charset','accept-encoding','access-control-request-headers','access-control-request-method','connection','content-length','cookie','cookie2','date','dnt','expect','host','keep-alive','origin','referer','te','trailer','transfer-encoding','upgrade','via']}.call(exports,__webpack_require__(1).Buffer,__webpack_require__(10),__webpack_require__(20)))}),(function(module,exports,__webpack_require__){var Buffer=__webpack_require__(1).Buffer
module.exports=function(buf){if(buf instanceof Uint8Array){if(buf.byteOffset===0&&buf.byteLength===buf.buffer.byteLength){return buf.buffer}else if(typeof buf.buffer.slice==='function'){return buf.buffer.slice(buf.byteOffset,buf.byteOffset+buf.byteLength)}}
if(Buffer.isBuffer(buf)){var arrayCopy=new Uint8Array(buf.length)
var len=buf.length
for(var i=0;i<len;i++){arrayCopy[i]=buf[i]}
return arrayCopy.buffer}else{throw new Error('Argument must be a Buffer')}}}),(function(module,exports){module.exports=extend
var hasOwnProperty=Object.prototype.hasOwnProperty;function extend(){var target={}
for(var i=0;i<arguments.length;i++){var source=arguments[i]
for(var key in source){if(hasOwnProperty.call(source,key)){target[key]=source[key]}}}
return target}}),(function(module,exports){module.exports={"100":"Continue","101":"Switching Protocols","102":"Processing","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Unordered Collection","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"}}),(function(module,exports,__webpack_require__){"use strict";(function(Buffer,process){var assert=__webpack_require__(71);var Zstream=__webpack_require__(812);var zlib_deflate=__webpack_require__(813);var zlib_inflate=__webpack_require__(816);var constants=__webpack_require__(819);for(var key in constants){exports[key]=constants[key];}
exports.NONE=0;exports.DEFLATE=1;exports.INFLATE=2;exports.GZIP=3;exports.GUNZIP=4;exports.DEFLATERAW=5;exports.INFLATERAW=6;exports.UNZIP=7;var GZIP_HEADER_ID1=0x1f;var GZIP_HEADER_ID2=0x8b;function Zlib(mode){if(typeof mode!=='number'||mode<exports.DEFLATE||mode>exports.UNZIP){throw new TypeError('Bad argument');}
this.dictionary=null;this.err=0;this.flush=0;this.init_done=false;this.level=0;this.memLevel=0;this.mode=mode;this.strategy=0;this.windowBits=0;this.write_in_progress=false;this.pending_close=false;this.gzip_id_bytes_read=0;}
Zlib.prototype.close=function(){if(this.write_in_progress){this.pending_close=true;return;}
this.pending_close=false;assert(this.init_done,'close before init');assert(this.mode<=exports.UNZIP);if(this.mode===exports.DEFLATE||this.mode===exports.GZIP||this.mode===exports.DEFLATERAW){zlib_deflate.deflateEnd(this.strm);}else if(this.mode===exports.INFLATE||this.mode===exports.GUNZIP||this.mode===exports.INFLATERAW||this.mode===exports.UNZIP){zlib_inflate.inflateEnd(this.strm);}
this.mode=exports.NONE;this.dictionary=null;};Zlib.prototype.write=function(flush,input,in_off,in_len,out,out_off,out_len){return this._write(true,flush,input,in_off,in_len,out,out_off,out_len);};Zlib.prototype.writeSync=function(flush,input,in_off,in_len,out,out_off,out_len){return this._write(false,flush,input,in_off,in_len,out,out_off,out_len);};Zlib.prototype._write=function(async,flush,input,in_off,in_len,out,out_off,out_len){assert.equal(arguments.length,8);assert(this.init_done,'write before init');assert(this.mode!==exports.NONE,'already finalized');assert.equal(false,this.write_in_progress,'write already in progress');assert.equal(false,this.pending_close,'close is pending');this.write_in_progress=true;assert.equal(false,flush===undefined,'must provide flush value');this.write_in_progress=true;if(flush!==exports.Z_NO_FLUSH&&flush!==exports.Z_PARTIAL_FLUSH&&flush!==exports.Z_SYNC_FLUSH&&flush!==exports.Z_FULL_FLUSH&&flush!==exports.Z_FINISH&&flush!==exports.Z_BLOCK){throw new Error('Invalid flush value');}
if(input==null){input=Buffer.alloc(0);in_len=0;in_off=0;}
this.strm.avail_in=in_len;this.strm.input=input;this.strm.next_in=in_off;this.strm.avail_out=out_len;this.strm.output=out;this.strm.next_out=out_off;this.flush=flush;if(!async){this._process();if(this._checkError()){return this._afterSync();}
return;}
var self=this;process.nextTick(function(){self._process();self._after();});return this;};Zlib.prototype._afterSync=function(){var avail_out=this.strm.avail_out;var avail_in=this.strm.avail_in;this.write_in_progress=false;return[avail_in,avail_out];};Zlib.prototype._process=function(){var next_expected_header_byte=null;switch(this.mode){case exports.DEFLATE:case exports.GZIP:case exports.DEFLATERAW:this.err=zlib_deflate.deflate(this.strm,this.flush);break;case exports.UNZIP:if(this.strm.avail_in>0){next_expected_header_byte=this.strm.next_in;}
switch(this.gzip_id_bytes_read){case 0:if(next_expected_header_byte===null){break;}
if(this.strm.input[next_expected_header_byte]===GZIP_HEADER_ID1){this.gzip_id_bytes_read=1;next_expected_header_byte++;if(this.strm.avail_in===1){break;}}else{this.mode=exports.INFLATE;break;}
case 1:if(next_expected_header_byte===null){break;}
if(this.strm.input[next_expected_header_byte]===GZIP_HEADER_ID2){this.gzip_id_bytes_read=2;this.mode=exports.GUNZIP;}else{this.mode=exports.INFLATE;}
break;default:throw new Error('invalid number of gzip magic number bytes read');}
case exports.INFLATE:case exports.GUNZIP:case exports.INFLATERAW:this.err=zlib_inflate.inflate(this.strm,this.flush);if(this.err===exports.Z_NEED_DICT&&this.dictionary){this.err=zlib_inflate.inflateSetDictionary(this.strm,this.dictionary);if(this.err===exports.Z_OK){this.err=zlib_inflate.inflate(this.strm,this.flush);}else if(this.err===exports.Z_DATA_ERROR){this.err=exports.Z_NEED_DICT;}}
while(this.strm.avail_in>0&&this.mode===exports.GUNZIP&&this.err===exports.Z_STREAM_END&&this.strm.next_in[0]!==0x00){this.reset();this.err=zlib_inflate.inflate(this.strm,this.flush);}
break;default:throw new Error('Unknown mode '+this.mode);}};Zlib.prototype._checkError=function(){switch(this.err){case exports.Z_OK:case exports.Z_BUF_ERROR:if(this.strm.avail_out!==0&&this.flush===exports.Z_FINISH){this._error('unexpected end of file');return false;}
break;case exports.Z_STREAM_END:break;case exports.Z_NEED_DICT:if(this.dictionary==null){this._error('Missing dictionary');}else{this._error('Bad dictionary');}
return false;default:this._error('Zlib error');return false;}
return true;};Zlib.prototype._after=function(){if(!this._checkError()){return;}
var avail_out=this.strm.avail_out;var avail_in=this.strm.avail_in;this.write_in_progress=false;this.callback(avail_in,avail_out);if(this.pending_close){this.close();}};Zlib.prototype._error=function(message){if(this.strm.msg){message=this.strm.msg;}
this.onerror(message,this.err);this.write_in_progress=false;if(this.pending_close){this.close();}};Zlib.prototype.init=function(windowBits,level,memLevel,strategy,dictionary){assert(arguments.length===4||arguments.length===5,'init(windowBits, level, memLevel, strategy, [dictionary])');assert(windowBits>=8&&windowBits<=15,'invalid windowBits');assert(level>=-1&&level<=9,'invalid compression level');assert(memLevel>=1&&memLevel<=9,'invalid memlevel');assert(strategy===exports.Z_FILTERED||strategy===exports.Z_HUFFMAN_ONLY||strategy===exports.Z_RLE||strategy===exports.Z_FIXED||strategy===exports.Z_DEFAULT_STRATEGY,'invalid strategy');this._init(level,windowBits,memLevel,strategy,dictionary);this._setDictionary();};Zlib.prototype.params=function(){throw new Error('deflateParams Not supported');};Zlib.prototype.reset=function(){this._reset();this._setDictionary();};Zlib.prototype._init=function(level,windowBits,memLevel,strategy,dictionary){this.level=level;this.windowBits=windowBits;this.memLevel=memLevel;this.strategy=strategy;this.flush=exports.Z_NO_FLUSH;this.err=exports.Z_OK;if(this.mode===exports.GZIP||this.mode===exports.GUNZIP){this.windowBits+=16;}
if(this.mode===exports.UNZIP){this.windowBits+=32;}
if(this.mode===exports.DEFLATERAW||this.mode===exports.INFLATERAW){this.windowBits=-1*this.windowBits;}
this.strm=new Zstream();switch(this.mode){case exports.DEFLATE:case exports.GZIP:case exports.DEFLATERAW:this.err=zlib_deflate.deflateInit2(this.strm,this.level,exports.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case exports.INFLATE:case exports.GUNZIP:case exports.INFLATERAW:case exports.UNZIP:this.err=zlib_inflate.inflateInit2(this.strm,this.windowBits);break;default:throw new Error('Unknown mode '+this.mode);}
if(this.err!==exports.Z_OK){this._error('Init error');}
this.dictionary=dictionary;this.write_in_progress=false;this.init_done=true;};Zlib.prototype._setDictionary=function(){if(this.dictionary==null){return;}
this.err=exports.Z_OK;switch(this.mode){case exports.DEFLATE:case exports.DEFLATERAW:this.err=zlib_deflate.deflateSetDictionary(this.strm,this.dictionary);break;default:break;}
if(this.err!==exports.Z_OK){this._error('Failed to set dictionary');}};Zlib.prototype._reset=function(){this.err=exports.Z_OK;switch(this.mode){case exports.DEFLATE:case exports.DEFLATERAW:case exports.GZIP:this.err=zlib_deflate.deflateReset(this.strm);break;case exports.INFLATE:case exports.INFLATERAW:case exports.GUNZIP:this.err=zlib_inflate.inflateReset(this.strm);break;default:break;}
if(this.err!==exports.Z_OK){this._error('Failed to reset stream');}};exports.Zlib=Zlib;}.call(exports,__webpack_require__(1).Buffer,__webpack_require__(20)))}),(function(module,exports,__webpack_require__){"use strict";function ZStream(){this.input=null;this.next_in=0;this.avail_in=0;this.total_in=0;this.output=null;this.next_out=0;this.avail_out=0;this.total_out=0;this.msg='';this.state=null;this.data_type=2;this.adler=0;}
module.exports=ZStream;}),(function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(170);var trees=__webpack_require__(814);var adler32=__webpack_require__(374);var crc32=__webpack_require__(375);var msg=__webpack_require__(815);var Z_NO_FLUSH=0;var Z_PARTIAL_FLUSH=1;var Z_FULL_FLUSH=3;var Z_FINISH=4;var Z_BLOCK=5;var Z_OK=0;var Z_STREAM_END=1;var Z_STREAM_ERROR=-2;var Z_DATA_ERROR=-3;var Z_BUF_ERROR=-5;var Z_DEFAULT_COMPRESSION=-1;var Z_FILTERED=1;var Z_HUFFMAN_ONLY=2;var Z_RLE=3;var Z_FIXED=4;var Z_DEFAULT_STRATEGY=0;var Z_UNKNOWN=2;var Z_DEFLATED=8;var MAX_MEM_LEVEL=9;var MAX_WBITS=15;var DEF_MEM_LEVEL=8;var LENGTH_CODES=29;var LITERALS=256;var L_CODES=LITERALS+1+LENGTH_CODES;var D_CODES=30;var BL_CODES=19;var HEAP_SIZE=2*L_CODES+1;var MAX_BITS=15;var MIN_MATCH=3;var MAX_MATCH=258;var MIN_LOOKAHEAD=(MAX_MATCH+MIN_MATCH+1);var PRESET_DICT=0x20;var INIT_STATE=42;var EXTRA_STATE=69;var NAME_STATE=73;var COMMENT_STATE=91;var HCRC_STATE=103;var BUSY_STATE=113;var FINISH_STATE=666;var BS_NEED_MORE=1;var BS_BLOCK_DONE=2;var BS_FINISH_STARTED=3;var BS_FINISH_DONE=4;var OS_CODE=0x03;function err(strm,errorCode){strm.msg=msg[errorCode];return errorCode;}
function rank(f){return((f)<<1)-((f)>4?9:0);}
function zero(buf){var len=buf.length;while(--len>=0){buf[len]=0;}}
function flush_pending(strm){var s=strm.state;var len=s.pending;if(len>strm.avail_out){len=strm.avail_out;}
if(len===0){return;}
utils.arraySet(strm.output,s.pending_buf,s.pending_out,len,strm.next_out);strm.next_out+=len;s.pending_out+=len;strm.total_out+=len;strm.avail_out-=len;s.pending-=len;if(s.pending===0){s.pending_out=0;}}
function flush_block_only(s,last){trees._tr_flush_block(s,(s.block_start>=0?s.block_start:-1),s.strstart-s.block_start,last);s.block_start=s.strstart;flush_pending(s.strm);}
function put_byte(s,b){s.pending_buf[s.pending++]=b;}
function putShortMSB(s,b){s.pending_buf[s.pending++]=(b>>>8)&0xff;s.pending_buf[s.pending++]=b&0xff;}
function read_buf(strm,buf,start,size){var len=strm.avail_in;if(len>size){len=size;}
if(len===0){return 0;}
strm.avail_in-=len;utils.arraySet(buf,strm.input,strm.next_in,len,start);if(strm.state.wrap===1){strm.adler=adler32(strm.adler,buf,len,start);}
else if(strm.state.wrap===2){strm.adler=crc32(strm.adler,buf,len,start);}
strm.next_in+=len;strm.total_in+=len;return len;}
function longest_match(s,cur_match){var chain_length=s.max_chain_length;var scan=s.strstart;var match;var len;var best_len=s.prev_length;var nice_match=s.nice_match;var limit=(s.strstart>(s.w_size-MIN_LOOKAHEAD))?s.strstart-(s.w_size-MIN_LOOKAHEAD):0;var _win=s.window;var wmask=s.w_mask;var prev=s.prev;var strend=s.strstart+MAX_MATCH;var scan_end1=_win[scan+best_len-1];var scan_end=_win[scan+best_len];if(s.prev_length>=s.good_match){chain_length>>=2;}
if(nice_match>s.lookahead){nice_match=s.lookahead;}
do{match=cur_match;if(_win[match+best_len]!==scan_end||_win[match+best_len-1]!==scan_end1||_win[match]!==_win[scan]||_win[++match]!==_win[scan+1]){continue;}
scan+=2;match++;do{}while(_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&scan<strend);len=MAX_MATCH-(strend-scan);scan=strend-MAX_MATCH;if(len>best_len){s.match_start=cur_match;best_len=len;if(len>=nice_match){break;}
scan_end1=_win[scan+best_len-1];scan_end=_win[scan+best_len];}}while((cur_match=prev[cur_match&wmask])>limit&&--chain_length!==0);if(best_len<=s.lookahead){return best_len;}
return s.lookahead;}
function fill_window(s){var _w_size=s.w_size;var p,n,m,more,str;do{more=s.window_size-s.lookahead-s.strstart;if(s.strstart>=_w_size+(_w_size-MIN_LOOKAHEAD)){utils.arraySet(s.window,s.window,_w_size,_w_size,0);s.match_start-=_w_size;s.strstart-=_w_size;s.block_start-=_w_size;n=s.hash_size;p=n;do{m=s.head[--p];s.head[p]=(m>=_w_size?m-_w_size:0);}while(--n);n=_w_size;p=n;do{m=s.prev[--p];s.prev[p]=(m>=_w_size?m-_w_size:0);}while(--n);more+=_w_size;}
if(s.strm.avail_in===0){break;}
n=read_buf(s.strm,s.window,s.strstart+s.lookahead,more);s.lookahead+=n;if(s.lookahead+s.insert>=MIN_MATCH){str=s.strstart-s.insert;s.ins_h=s.window[str];s.ins_h=((s.ins_h<<s.hash_shift)^s.window[str+1])&s.hash_mask;while(s.insert){s.ins_h=((s.ins_h<<s.hash_shift)^s.window[str+MIN_MATCH-1])&s.hash_mask;s.prev[str&s.w_mask]=s.head[s.ins_h];s.head[s.ins_h]=str;str++;s.insert--;if(s.lookahead+s.insert<MIN_MATCH){break;}}}}while(s.lookahead<MIN_LOOKAHEAD&&s.strm.avail_in!==0);}
function deflate_stored(s,flush){var max_block_size=0xffff;if(max_block_size>s.pending_buf_size-5){max_block_size=s.pending_buf_size-5;}
for(;;){if(s.lookahead<=1){fill_window(s);if(s.lookahead===0&&flush===Z_NO_FLUSH){return BS_NEED_MORE;}
if(s.lookahead===0){break;}}
s.strstart+=s.lookahead;s.lookahead=0;var max_start=s.block_start+max_block_size;if(s.strstart===0||s.strstart>=max_start){s.lookahead=s.strstart-max_start;s.strstart=max_start;flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE;}}
if(s.strstart-s.block_start>=(s.w_size-MIN_LOOKAHEAD)){flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE;}}}
s.insert=0;if(flush===Z_FINISH){flush_block_only(s,true);if(s.strm.avail_out===0){return BS_FINISH_STARTED;}
return BS_FINISH_DONE;}
if(s.strstart>s.block_start){flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE;}}
return BS_NEED_MORE;}
function deflate_fast(s,flush){var hash_head;var bflush;for(;;){if(s.lookahead<MIN_LOOKAHEAD){fill_window(s);if(s.lookahead<MIN_LOOKAHEAD&&flush===Z_NO_FLUSH){return BS_NEED_MORE;}
if(s.lookahead===0){break;}}
hash_head=0;if(s.lookahead>=MIN_MATCH){s.ins_h=((s.ins_h<<s.hash_shift)^s.window[s.strstart+MIN_MATCH-1])&s.hash_mask;hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h];s.head[s.ins_h]=s.strstart;}
if(hash_head!==0&&((s.strstart-hash_head)<=(s.w_size-MIN_LOOKAHEAD))){s.match_length=longest_match(s,hash_head);}
if(s.match_length>=MIN_MATCH){bflush=trees._tr_tally(s,s.strstart-s.match_start,s.match_length-MIN_MATCH);s.lookahead-=s.match_length;if(s.match_length<=s.max_lazy_match&&s.lookahead>=MIN_MATCH){s.match_length--;do{s.strstart++;s.ins_h=((s.ins_h<<s.hash_shift)^s.window[s.strstart+MIN_MATCH-1])&s.hash_mask;hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h];s.head[s.ins_h]=s.strstart;}while(--s.match_length!==0);s.strstart++;}else
{s.strstart+=s.match_length;s.match_length=0;s.ins_h=s.window[s.strstart];s.ins_h=((s.ins_h<<s.hash_shift)^s.window[s.strstart+1])&s.hash_mask;}}else{bflush=trees._tr_tally(s,0,s.window[s.strstart]);s.lookahead--;s.strstart++;}
if(bflush){flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE;}}}
s.insert=((s.strstart<(MIN_MATCH-1))?s.strstart:MIN_MATCH-1);if(flush===Z_FINISH){flush_block_only(s,true);if(s.strm.avail_out===0){return BS_FINISH_STARTED;}
return BS_FINISH_DONE;}
if(s.last_lit){flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE;}}
return BS_BLOCK_DONE;}
function deflate_slow(s,flush){var hash_head;var bflush;var max_insert;for(;;){if(s.lookahead<MIN_LOOKAHEAD){fill_window(s);if(s.lookahead<MIN_LOOKAHEAD&&flush===Z_NO_FLUSH){return BS_NEED_MORE;}
if(s.lookahead===0){break;}}
hash_head=0;if(s.lookahead>=MIN_MATCH){s.ins_h=((s.ins_h<<s.hash_shift)^s.window[s.strstart+MIN_MATCH-1])&s.hash_mask;hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h];s.head[s.ins_h]=s.strstart;}
s.prev_length=s.match_length;s.prev_match=s.match_start;s.match_length=MIN_MATCH-1;if(hash_head!==0&&s.prev_length<s.max_lazy_match&&s.strstart-hash_head<=(s.w_size-MIN_LOOKAHEAD)){s.match_length=longest_match(s,hash_head);if(s.match_length<=5&&(s.strategy===Z_FILTERED||(s.match_length===MIN_MATCH&&s.strstart-s.match_start>4096))){s.match_length=MIN_MATCH-1;}}
if(s.prev_length>=MIN_MATCH&&s.match_length<=s.prev_length){max_insert=s.strstart+s.lookahead-MIN_MATCH;bflush=trees._tr_tally(s,s.strstart-1-s.prev_match,s.prev_length-MIN_MATCH);s.lookahead-=s.prev_length-1;s.prev_length-=2;do{if(++s.strstart<=max_insert){s.ins_h=((s.ins_h<<s.hash_shift)^s.window[s.strstart+MIN_MATCH-1])&s.hash_mask;hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h];s.head[s.ins_h]=s.strstart;}}while(--s.prev_length!==0);s.match_available=0;s.match_length=MIN_MATCH-1;s.strstart++;if(bflush){flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE;}}}else if(s.match_available){bflush=trees._tr_tally(s,0,s.window[s.strstart-1]);if(bflush){flush_block_only(s,false);}
s.strstart++;s.lookahead--;if(s.strm.avail_out===0){return BS_NEED_MORE;}}else{s.match_available=1;s.strstart++;s.lookahead--;}}
if(s.match_available){bflush=trees._tr_tally(s,0,s.window[s.strstart-1]);s.match_available=0;}
s.insert=s.strstart<MIN_MATCH-1?s.strstart:MIN_MATCH-1;if(flush===Z_FINISH){flush_block_only(s,true);if(s.strm.avail_out===0){return BS_FINISH_STARTED;}
return BS_FINISH_DONE;}
if(s.last_lit){flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE;}}
return BS_BLOCK_DONE;}
function deflate_rle(s,flush){var bflush;var prev;var scan,strend;var _win=s.window;for(;;){if(s.lookahead<=MAX_MATCH){fill_window(s);if(s.lookahead<=MAX_MATCH&&flush===Z_NO_FLUSH){return BS_NEED_MORE;}
if(s.lookahead===0){break;}}
s.match_length=0;if(s.lookahead>=MIN_MATCH&&s.strstart>0){scan=s.strstart-1;prev=_win[scan];if(prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]){strend=s.strstart+MAX_MATCH;do{}while(prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&scan<strend);s.match_length=MAX_MATCH-(strend-scan);if(s.match_length>s.lookahead){s.match_length=s.lookahead;}}}
if(s.match_length>=MIN_MATCH){bflush=trees._tr_tally(s,1,s.match_length-MIN_MATCH);s.lookahead-=s.match_length;s.strstart+=s.match_length;s.match_length=0;}else{bflush=trees._tr_tally(s,0,s.window[s.strstart]);s.lookahead--;s.strstart++;}
if(bflush){flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE;}}}
s.insert=0;if(flush===Z_FINISH){flush_block_only(s,true);if(s.strm.avail_out===0){return BS_FINISH_STARTED;}
return BS_FINISH_DONE;}
if(s.last_lit){flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE;}}
return BS_BLOCK_DONE;}
function deflate_huff(s,flush){var bflush;for(;;){if(s.lookahead===0){fill_window(s);if(s.lookahead===0){if(flush===Z_NO_FLUSH){return BS_NEED_MORE;}
break;}}
s.match_length=0;bflush=trees._tr_tally(s,0,s.window[s.strstart]);s.lookahead--;s.strstart++;if(bflush){flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE;}}}
s.insert=0;if(flush===Z_FINISH){flush_block_only(s,true);if(s.strm.avail_out===0){return BS_FINISH_STARTED;}
return BS_FINISH_DONE;}
if(s.last_lit){flush_block_only(s,false);if(s.strm.avail_out===0){return BS_NEED_MORE;}}
return BS_BLOCK_DONE;}
function Config(good_length,max_lazy,nice_length,max_chain,func){this.good_length=good_length;this.max_lazy=max_lazy;this.nice_length=nice_length;this.max_chain=max_chain;this.func=func;}
var configuration_table;configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)];function lm_init(s){s.window_size=2*s.w_size;zero(s.head);s.max_lazy_match=configuration_table[s.level].max_lazy;s.good_match=configuration_table[s.level].good_length;s.nice_match=configuration_table[s.level].nice_length;s.max_chain_length=configuration_table[s.level].max_chain;s.strstart=0;s.block_start=0;s.lookahead=0;s.insert=0;s.match_length=s.prev_length=MIN_MATCH-1;s.match_available=0;s.ins_h=0;}
function DeflateState(){this.strm=null;this.status=0;this.pending_buf=null;this.pending_buf_size=0;this.pending_out=0;this.pending=0;this.wrap=0;this.gzhead=null;this.gzindex=0;this.method=Z_DEFLATED;this.last_flush=-1;this.w_size=0;this.w_bits=0;this.w_mask=0;this.window=null;this.window_size=0;this.prev=null;this.head=null;this.ins_h=0;this.hash_size=0;this.hash_bits=0;this.hash_mask=0;this.hash_shift=0;this.block_start=0;this.match_length=0;this.prev_match=0;this.match_available=0;this.strstart=0;this.match_start=0;this.lookahead=0;this.prev_length=0;this.max_chain_length=0;this.max_lazy_match=0;this.level=0;this.strategy=0;this.good_match=0;this.nice_match=0;this.dyn_ltree=new utils.Buf16(HEAP_SIZE*2);this.dyn_dtree=new utils.Buf16((2*D_CODES+1)*2);this.bl_tree=new utils.Buf16((2*BL_CODES+1)*2);zero(this.dyn_ltree);zero(this.dyn_dtree);zero(this.bl_tree);this.l_desc=null;this.d_desc=null;this.bl_desc=null;this.bl_count=new utils.Buf16(MAX_BITS+1);this.heap=new utils.Buf16(2*L_CODES+1);zero(this.heap);this.heap_len=0;this.heap_max=0;this.depth=new utils.Buf16(2*L_CODES+1);zero(this.depth);this.l_buf=0;this.lit_bufsize=0;this.last_lit=0;this.d_buf=0;this.opt_len=0;this.static_len=0;this.matches=0;this.insert=0;this.bi_buf=0;this.bi_valid=0;}
function deflateResetKeep(strm){var s;if(!strm||!strm.state){return err(strm,Z_STREAM_ERROR);}
strm.total_in=strm.total_out=0;strm.data_type=Z_UNKNOWN;s=strm.state;s.pending=0;s.pending_out=0;if(s.wrap<0){s.wrap=-s.wrap;}
s.status=(s.wrap?INIT_STATE:BUSY_STATE);strm.adler=(s.wrap===2)?0:1;s.last_flush=Z_NO_FLUSH;trees._tr_init(s);return Z_OK;}
function deflateReset(strm){var ret=deflateResetKeep(strm);if(ret===Z_OK){lm_init(strm.state);}
return ret;}
function deflateSetHeader(strm,head){if(!strm||!strm.state){return Z_STREAM_ERROR;}
if(strm.state.wrap!==2){return Z_STREAM_ERROR;}
strm.state.gzhead=head;return Z_OK;}
function deflateInit2(strm,level,method,windowBits,memLevel,strategy){if(!strm){return Z_STREAM_ERROR;}
var wrap=1;if(level===Z_DEFAULT_COMPRESSION){level=6;}
if(windowBits<0){wrap=0;windowBits=-windowBits;}
else if(windowBits>15){wrap=2;windowBits-=16;}
if(memLevel<1||memLevel>MAX_MEM_LEVEL||method!==Z_DEFLATED||windowBits<8||windowBits>15||level<0||level>9||strategy<0||strategy>Z_FIXED){return err(strm,Z_STREAM_ERROR);}
if(windowBits===8){windowBits=9;}
var s=new DeflateState();strm.state=s;s.strm=strm;s.wrap=wrap;s.gzhead=null;s.w_bits=windowBits;s.w_size=1<<s.w_bits;s.w_mask=s.w_size-1;s.hash_bits=memLevel+7;s.hash_size=1<<s.hash_bits;s.hash_mask=s.hash_size-1;s.hash_shift=~~((s.hash_bits+MIN_MATCH-1)/MIN_MATCH);s.window=new utils.Buf8(s.w_size*2);s.head=new utils.Buf16(s.hash_size);s.prev=new utils.Buf16(s.w_size);s.lit_bufsize=1<<(memLevel+6);s.pending_buf_size=s.lit_bufsize*4;s.pending_buf=new utils.Buf8(s.pending_buf_size);s.d_buf=1*s.lit_bufsize;s.l_buf=(1+2)*s.lit_bufsize;s.level=level;s.strategy=strategy;s.method=method;return deflateReset(strm);}
function deflateInit(strm,level){return deflateInit2(strm,level,Z_DEFLATED,MAX_WBITS,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY);}
function deflate(strm,flush){var old_flush,s;var beg,val;if(!strm||!strm.state||flush>Z_BLOCK||flush<0){return strm?err(strm,Z_STREAM_ERROR):Z_STREAM_ERROR;}
s=strm.state;if(!strm.output||(!strm.input&&strm.avail_in!==0)||(s.status===FINISH_STATE&&flush!==Z_FINISH)){return err(strm,(strm.avail_out===0)?Z_BUF_ERROR:Z_STREAM_ERROR);}
s.strm=strm;old_flush=s.last_flush;s.last_flush=flush;if(s.status===INIT_STATE){if(s.wrap===2){strm.adler=0;put_byte(s,31);put_byte(s,139);put_byte(s,8);if(!s.gzhead){put_byte(s,0);put_byte(s,0);put_byte(s,0);put_byte(s,0);put_byte(s,0);put_byte(s,s.level===9?2:(s.strategy>=Z_HUFFMAN_ONLY||s.level<2?4:0));put_byte(s,OS_CODE);s.status=BUSY_STATE;}
else{put_byte(s,(s.gzhead.text?1:0)+
(s.gzhead.hcrc?2:0)+
(!s.gzhead.extra?0:4)+
(!s.gzhead.name?0:8)+
(!s.gzhead.comment?0:16));put_byte(s,s.gzhead.time&0xff);put_byte(s,(s.gzhead.time>>8)&0xff);put_byte(s,(s.gzhead.time>>16)&0xff);put_byte(s,(s.gzhead.time>>24)&0xff);put_byte(s,s.level===9?2:(s.strategy>=Z_HUFFMAN_ONLY||s.level<2?4:0));put_byte(s,s.gzhead.os&0xff);if(s.gzhead.extra&&s.gzhead.extra.length){put_byte(s,s.gzhead.extra.length&0xff);put_byte(s,(s.gzhead.extra.length>>8)&0xff);}
if(s.gzhead.hcrc){strm.adler=crc32(strm.adler,s.pending_buf,s.pending,0);}
s.gzindex=0;s.status=EXTRA_STATE;}}
else
{var header=(Z_DEFLATED+((s.w_bits-8)<<4))<<8;var level_flags=-1;if(s.strategy>=Z_HUFFMAN_ONLY||s.level<2){level_flags=0;}else if(s.level<6){level_flags=1;}else if(s.level===6){level_flags=2;}else{level_flags=3;}
header|=(level_flags<<6);if(s.strstart!==0){header|=PRESET_DICT;}
header+=31-(header%31);s.status=BUSY_STATE;putShortMSB(s,header);if(s.strstart!==0){putShortMSB(s,strm.adler>>>16);putShortMSB(s,strm.adler&0xffff);}
strm.adler=1;}}
if(s.status===EXTRA_STATE){if(s.gzhead.extra){beg=s.pending;while(s.gzindex<(s.gzhead.extra.length&0xffff)){if(s.pending===s.pending_buf_size){if(s.gzhead.hcrc&&s.pending>beg){strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg);}
flush_pending(strm);beg=s.pending;if(s.pending===s.pending_buf_size){break;}}
put_byte(s,s.gzhead.extra[s.gzindex]&0xff);s.gzindex++;}
if(s.gzhead.hcrc&&s.pending>beg){strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg);}
if(s.gzindex===s.gzhead.extra.length){s.gzindex=0;s.status=NAME_STATE;}}
else{s.status=NAME_STATE;}}
if(s.status===NAME_STATE){if(s.gzhead.name){beg=s.pending;do{if(s.pending===s.pending_buf_size){if(s.gzhead.hcrc&&s.pending>beg){strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg);}
flush_pending(strm);beg=s.pending;if(s.pending===s.pending_buf_size){val=1;break;}}
if(s.gzindex<s.gzhead.name.length){val=s.gzhead.name.charCodeAt(s.gzindex++)&0xff;}else{val=0;}
put_byte(s,val);}while(val!==0);if(s.gzhead.hcrc&&s.pending>beg){strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg);}
if(val===0){s.gzindex=0;s.status=COMMENT_STATE;}}
else{s.status=COMMENT_STATE;}}
if(s.status===COMMENT_STATE){if(s.gzhead.comment){beg=s.pending;do{if(s.pending===s.pending_buf_size){if(s.gzhead.hcrc&&s.pending>beg){strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg);}
flush_pending(strm);beg=s.pending;if(s.pending===s.pending_buf_size){val=1;break;}}
if(s.gzindex<s.gzhead.comment.length){val=s.gzhead.comment.charCodeAt(s.gzindex++)&0xff;}else{val=0;}
put_byte(s,val);}while(val!==0);if(s.gzhead.hcrc&&s.pending>beg){strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg);}
if(val===0){s.status=HCRC_STATE;}}
else{s.status=HCRC_STATE;}}
if(s.status===HCRC_STATE){if(s.gzhead.hcrc){if(s.pending+2>s.pending_buf_size){flush_pending(strm);}
if(s.pending+2<=s.pending_buf_size){put_byte(s,strm.adler&0xff);put_byte(s,(strm.adler>>8)&0xff);strm.adler=0;s.status=BUSY_STATE;}}
else{s.status=BUSY_STATE;}}
if(s.pending!==0){flush_pending(strm);if(strm.avail_out===0){s.last_flush=-1;return Z_OK;}}else if(strm.avail_in===0&&rank(flush)<=rank(old_flush)&&flush!==Z_FINISH){return err(strm,Z_BUF_ERROR);}
if(s.status===FINISH_STATE&&strm.avail_in!==0){return err(strm,Z_BUF_ERROR);}
if(strm.avail_in!==0||s.lookahead!==0||(flush!==Z_NO_FLUSH&&s.status!==FINISH_STATE)){var bstate=(s.strategy===Z_HUFFMAN_ONLY)?deflate_huff(s,flush):(s.strategy===Z_RLE?deflate_rle(s,flush):configuration_table[s.level].func(s,flush));if(bstate===BS_FINISH_STARTED||bstate===BS_FINISH_DONE){s.status=FINISH_STATE;}
if(bstate===BS_NEED_MORE||bstate===BS_FINISH_STARTED){if(strm.avail_out===0){s.last_flush=-1;}
return Z_OK;}
if(bstate===BS_BLOCK_DONE){if(flush===Z_PARTIAL_FLUSH){trees._tr_align(s);}
else if(flush!==Z_BLOCK){trees._tr_stored_block(s,0,0,false);if(flush===Z_FULL_FLUSH){zero(s.head);if(s.lookahead===0){s.strstart=0;s.block_start=0;s.insert=0;}}}
flush_pending(strm);if(strm.avail_out===0){s.last_flush=-1;return Z_OK;}}}
if(flush!==Z_FINISH){return Z_OK;}
if(s.wrap<=0){return Z_STREAM_END;}
if(s.wrap===2){put_byte(s,strm.adler&0xff);put_byte(s,(strm.adler>>8)&0xff);put_byte(s,(strm.adler>>16)&0xff);put_byte(s,(strm.adler>>24)&0xff);put_byte(s,strm.total_in&0xff);put_byte(s,(strm.total_in>>8)&0xff);put_byte(s,(strm.total_in>>16)&0xff);put_byte(s,(strm.total_in>>24)&0xff);}
else
{putShortMSB(s,strm.adler>>>16);putShortMSB(s,strm.adler&0xffff);}
flush_pending(strm);if(s.wrap>0){s.wrap=-s.wrap;}
return s.pending!==0?Z_OK:Z_STREAM_END;}
function deflateEnd(strm){var status;if(!strm||!strm.state){return Z_STREAM_ERROR;}
status=strm.state.status;if(status!==INIT_STATE&&status!==EXTRA_STATE&&status!==NAME_STATE&&status!==COMMENT_STATE&&status!==HCRC_STATE&&status!==BUSY_STATE&&status!==FINISH_STATE){return err(strm,Z_STREAM_ERROR);}
strm.state=null;return status===BUSY_STATE?err(strm,Z_DATA_ERROR):Z_OK;}
function deflateSetDictionary(strm,dictionary){var dictLength=dictionary.length;var s;var str,n;var wrap;var avail;var next;var input;var tmpDict;if(!strm||!strm.state){return Z_STREAM_ERROR;}
s=strm.state;wrap=s.wrap;if(wrap===2||(wrap===1&&s.status!==INIT_STATE)||s.lookahead){return Z_STREAM_ERROR;}
if(wrap===1){strm.adler=adler32(strm.adler,dictionary,dictLength,0);}
s.wrap=0;if(dictLength>=s.w_size){if(wrap===0){zero(s.head);s.strstart=0;s.block_start=0;s.insert=0;}
tmpDict=new utils.Buf8(s.w_size);utils.arraySet(tmpDict,dictionary,dictLength-s.w_size,s.w_size,0);dictionary=tmpDict;dictLength=s.w_size;}
avail=strm.avail_in;next=strm.next_in;input=strm.input;strm.avail_in=dictLength;strm.next_in=0;strm.input=dictionary;fill_window(s);while(s.lookahead>=MIN_MATCH){str=s.strstart;n=s.lookahead-(MIN_MATCH-1);do{s.ins_h=((s.ins_h<<s.hash_shift)^s.window[str+MIN_MATCH-1])&s.hash_mask;s.prev[str&s.w_mask]=s.head[s.ins_h];s.head[s.ins_h]=str;str++;}while(--n);s.strstart=str;s.lookahead=MIN_MATCH-1;fill_window(s);}
s.strstart+=s.lookahead;s.block_start=s.strstart;s.insert=s.lookahead;s.lookahead=0;s.match_length=s.prev_length=MIN_MATCH-1;s.match_available=0;strm.next_in=next;strm.input=input;strm.avail_in=avail;s.wrap=wrap;return Z_OK;}
exports.deflateInit=deflateInit;exports.deflateInit2=deflateInit2;exports.deflateReset=deflateReset;exports.deflateResetKeep=deflateResetKeep;exports.deflateSetHeader=deflateSetHeader;exports.deflate=deflate;exports.deflateEnd=deflateEnd;exports.deflateSetDictionary=deflateSetDictionary;exports.deflateInfo='pako deflate (from Nodeca project)';}),(function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(170);var Z_FIXED=4;var Z_BINARY=0;var Z_TEXT=1;var Z_UNKNOWN=2;function zero(buf){var len=buf.length;while(--len>=0){buf[len]=0;}}
var STORED_BLOCK=0;var STATIC_TREES=1;var DYN_TREES=2;var MIN_MATCH=3;var MAX_MATCH=258;var LENGTH_CODES=29;var LITERALS=256;var L_CODES=LITERALS+1+LENGTH_CODES;var D_CODES=30;var BL_CODES=19;var HEAP_SIZE=2*L_CODES+1;var MAX_BITS=15;var Buf_size=16;var MAX_BL_BITS=7;var END_BLOCK=256;var REP_3_6=16;var REPZ_3_10=17;var REPZ_11_138=18;var extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];var extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];var extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];var bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var DIST_CODE_LEN=512;var static_ltree=new Array((L_CODES+2)*2);zero(static_ltree);var static_dtree=new Array(D_CODES*2);zero(static_dtree);var _dist_code=new Array(DIST_CODE_LEN);zero(_dist_code);var _length_code=new Array(MAX_MATCH-MIN_MATCH+1);zero(_length_code);var base_length=new Array(LENGTH_CODES);zero(base_length);var base_dist=new Array(D_CODES);zero(base_dist);function StaticTreeDesc(static_tree,extra_bits,extra_base,elems,max_length){this.static_tree=static_tree;this.extra_bits=extra_bits;this.extra_base=extra_base;this.elems=elems;this.max_length=max_length;this.has_stree=static_tree&&static_tree.length;}
var static_l_desc;var static_d_desc;var static_bl_desc;function TreeDesc(dyn_tree,stat_desc){this.dyn_tree=dyn_tree;this.max_code=0;this.stat_desc=stat_desc;}
function d_code(dist){return dist<256?_dist_code[dist]:_dist_code[256+(dist>>>7)];}
function put_short(s,w){s.pending_buf[s.pending++]=(w)&0xff;s.pending_buf[s.pending++]=(w>>>8)&0xff;}
function send_bits(s,value,length){if(s.bi_valid>(Buf_size-length)){s.bi_buf|=(value<<s.bi_valid)&0xffff;put_short(s,s.bi_buf);s.bi_buf=value>>(Buf_size-s.bi_valid);s.bi_valid+=length-Buf_size;}else{s.bi_buf|=(value<<s.bi_valid)&0xffff;s.bi_valid+=length;}}
function send_code(s,c,tree){send_bits(s,tree[c*2],tree[c*2+1]);}
function bi_reverse(code,len){var res=0;do{res|=code&1;code>>>=1;res<<=1;}while(--len>0);return res>>>1;}
function bi_flush(s){if(s.bi_valid===16){put_short(s,s.bi_buf);s.bi_buf=0;s.bi_valid=0;}else if(s.bi_valid>=8){s.pending_buf[s.pending++]=s.bi_buf&0xff;s.bi_buf>>=8;s.bi_valid-=8;}}
function gen_bitlen(s,desc)
{var tree=desc.dyn_tree;var max_code=desc.max_code;var stree=desc.stat_desc.static_tree;var has_stree=desc.stat_desc.has_stree;var extra=desc.stat_desc.extra_bits;var base=desc.stat_desc.extra_base;var max_length=desc.stat_desc.max_length;var h;var n,m;var bits;var xbits;var f;var overflow=0;for(bits=0;bits<=MAX_BITS;bits++){s.bl_count[bits]=0;}
tree[s.heap[s.heap_max]*2+1]=0;for(h=s.heap_max+1;h<HEAP_SIZE;h++){n=s.heap[h];bits=tree[tree[n*2+1]*2+1]+1;if(bits>max_length){bits=max_length;overflow++;}
tree[n*2+1]=bits;if(n>max_code){continue;}
s.bl_count[bits]++;xbits=0;if(n>=base){xbits=extra[n-base];}
f=tree[n*2];s.opt_len+=f*(bits+xbits);if(has_stree){s.static_len+=f*(stree[n*2+1]+xbits);}}
if(overflow===0){return;}
do{bits=max_length-1;while(s.bl_count[bits]===0){bits--;}
s.bl_count[bits]--;s.bl_count[bits+1]+=2;s.bl_count[max_length]--;overflow-=2;}while(overflow>0);for(bits=max_length;bits!==0;bits--){n=s.bl_count[bits];while(n!==0){m=s.heap[--h];if(m>max_code){continue;}
if(tree[m*2+1]!==bits){s.opt_len+=(bits-tree[m*2+1])*tree[m*2];tree[m*2+1]=bits;}
n--;}}}
function gen_codes(tree,max_code,bl_count)
{var next_code=new Array(MAX_BITS+1);var code=0;var bits;var n;for(bits=1;bits<=MAX_BITS;bits++){next_code[bits]=code=(code+bl_count[bits-1])<<1;}
for(n=0;n<=max_code;n++){var len=tree[n*2+1];if(len===0){continue;}
tree[n*2]=bi_reverse(next_code[len]++,len);}}
function tr_static_init(){var n;var bits;var length;var code;var dist;var bl_count=new Array(MAX_BITS+1);length=0;for(code=0;code<LENGTH_CODES-1;code++){base_length[code]=length;for(n=0;n<(1<<extra_lbits[code]);n++){_length_code[length++]=code;}}
_length_code[length-1]=code;dist=0;for(code=0;code<16;code++){base_dist[code]=dist;for(n=0;n<(1<<extra_dbits[code]);n++){_dist_code[dist++]=code;}}
dist>>=7;for(;code<D_CODES;code++){base_dist[code]=dist<<7;for(n=0;n<(1<<(extra_dbits[code]-7));n++){_dist_code[256+dist++]=code;}}
for(bits=0;bits<=MAX_BITS;bits++){bl_count[bits]=0;}
n=0;while(n<=143){static_ltree[n*2+1]=8;n++;bl_count[8]++;}
while(n<=255){static_ltree[n*2+1]=9;n++;bl_count[9]++;}
while(n<=279){static_ltree[n*2+1]=7;n++;bl_count[7]++;}
while(n<=287){static_ltree[n*2+1]=8;n++;bl_count[8]++;}
gen_codes(static_ltree,L_CODES+1,bl_count);for(n=0;n<D_CODES;n++){static_dtree[n*2+1]=5;static_dtree[n*2]=bi_reverse(n,5);}
static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS+1,L_CODES,MAX_BITS);static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES,MAX_BITS);static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES,MAX_BL_BITS);}
function init_block(s){var n;for(n=0;n<L_CODES;n++){s.dyn_ltree[n*2]=0;}
for(n=0;n<D_CODES;n++){s.dyn_dtree[n*2]=0;}
for(n=0;n<BL_CODES;n++){s.bl_tree[n*2]=0;}
s.dyn_ltree[END_BLOCK*2]=1;s.opt_len=s.static_len=0;s.last_lit=s.matches=0;}
function bi_windup(s)
{if(s.bi_valid>8){put_short(s,s.bi_buf);}else if(s.bi_valid>0){s.pending_buf[s.pending++]=s.bi_buf;}
s.bi_buf=0;s.bi_valid=0;}
function copy_block(s,buf,len,header)
{bi_windup(s);if(header){put_short(s,len);put_short(s,~len);}
utils.arraySet(s.pending_buf,s.window,buf,len,s.pending);s.pending+=len;}
function smaller(tree,n,m,depth){var _n2=n*2;var _m2=m*2;return(tree[_n2]<tree[_m2]||(tree[_n2]===tree[_m2]&&depth[n]<=depth[m]));}
function pqdownheap(s,tree,k)
{var v=s.heap[k];var j=k<<1;while(j<=s.heap_len){if(j<s.heap_len&&smaller(tree,s.heap[j+1],s.heap[j],s.depth)){j++;}
if(smaller(tree,v,s.heap[j],s.depth)){break;}
s.heap[k]=s.heap[j];k=j;j<<=1;}
s.heap[k]=v;}
function compress_block(s,ltree,dtree)
{var dist;var lc;var lx=0;var code;var extra;if(s.last_lit!==0){do{dist=(s.pending_buf[s.d_buf+lx*2]<<8)|(s.pending_buf[s.d_buf+lx*2+1]);lc=s.pending_buf[s.l_buf+lx];lx++;if(dist===0){send_code(s,lc,ltree);}else{code=_length_code[lc];send_code(s,code+LITERALS+1,ltree);extra=extra_lbits[code];if(extra!==0){lc-=base_length[code];send_bits(s,lc,extra);}
dist--;code=d_code(dist);send_code(s,code,dtree);extra=extra_dbits[code];if(extra!==0){dist-=base_dist[code];send_bits(s,dist,extra);}}}while(lx<s.last_lit);}
send_code(s,END_BLOCK,ltree);}
function build_tree(s,desc)
{var tree=desc.dyn_tree;var stree=desc.stat_desc.static_tree;var has_stree=desc.stat_desc.has_stree;var elems=desc.stat_desc.elems;var n,m;var max_code=-1;var node;s.heap_len=0;s.heap_max=HEAP_SIZE;for(n=0;n<elems;n++){if(tree[n*2]!==0){s.heap[++s.heap_len]=max_code=n;s.depth[n]=0;}else{tree[n*2+1]=0;}}
while(s.heap_len<2){node=s.heap[++s.heap_len]=(max_code<2?++max_code:0);tree[node*2]=1;s.depth[node]=0;s.opt_len--;if(has_stree){s.static_len-=stree[node*2+1];}}
desc.max_code=max_code;for(n=(s.heap_len>>1);n>=1;n--){pqdownheap(s,tree,n);}
node=elems;do{n=s.heap[1];s.heap[1]=s.heap[s.heap_len--];pqdownheap(s,tree,1);m=s.heap[1];s.heap[--s.heap_max]=n;s.heap[--s.heap_max]=m;tree[node*2]=tree[n*2]+tree[m*2];s.depth[node]=(s.depth[n]>=s.depth[m]?s.depth[n]:s.depth[m])+1;tree[n*2+1]=tree[m*2+1]=node;s.heap[1]=node++;pqdownheap(s,tree,1);}while(s.heap_len>=2);s.heap[--s.heap_max]=s.heap[1];gen_bitlen(s,desc);gen_codes(tree,max_code,s.bl_count);}
function scan_tree(s,tree,max_code)
{var n;var prevlen=-1;var curlen;var nextlen=tree[0*2+1];var count=0;var max_count=7;var min_count=4;if(nextlen===0){max_count=138;min_count=3;}
tree[(max_code+1)*2+1]=0xffff;for(n=0;n<=max_code;n++){curlen=nextlen;nextlen=tree[(n+1)*2+1];if(++count<max_count&&curlen===nextlen){continue;}else if(count<min_count){s.bl_tree[curlen*2]+=count;}else if(curlen!==0){if(curlen!==prevlen){s.bl_tree[curlen*2]++;}
s.bl_tree[REP_3_6*2]++;}else if(count<=10){s.bl_tree[REPZ_3_10*2]++;}else{s.bl_tree[REPZ_11_138*2]++;}
count=0;prevlen=curlen;if(nextlen===0){max_count=138;min_count=3;}else if(curlen===nextlen){max_count=6;min_count=3;}else{max_count=7;min_count=4;}}}
function send_tree(s,tree,max_code)
{var n;var prevlen=-1;var curlen;var nextlen=tree[0*2+1];var count=0;var max_count=7;var min_count=4;if(nextlen===0){max_count=138;min_count=3;}
for(n=0;n<=max_code;n++){curlen=nextlen;nextlen=tree[(n+1)*2+1];if(++count<max_count&&curlen===nextlen){continue;}else if(count<min_count){do{send_code(s,curlen,s.bl_tree);}while(--count!==0);}else if(curlen!==0){if(curlen!==prevlen){send_code(s,curlen,s.bl_tree);count--;}
send_code(s,REP_3_6,s.bl_tree);send_bits(s,count-3,2);}else if(count<=10){send_code(s,REPZ_3_10,s.bl_tree);send_bits(s,count-3,3);}else{send_code(s,REPZ_11_138,s.bl_tree);send_bits(s,count-11,7);}
count=0;prevlen=curlen;if(nextlen===0){max_count=138;min_count=3;}else if(curlen===nextlen){max_count=6;min_count=3;}else{max_count=7;min_count=4;}}}
function build_bl_tree(s){var max_blindex;scan_tree(s,s.dyn_ltree,s.l_desc.max_code);scan_tree(s,s.dyn_dtree,s.d_desc.max_code);build_tree(s,s.bl_desc);for(max_blindex=BL_CODES-1;max_blindex>=3;max_blindex--){if(s.bl_tree[bl_order[max_blindex]*2+1]!==0){break;}}
s.opt_len+=3*(max_blindex+1)+5+5+4;return max_blindex;}
function send_all_trees(s,lcodes,dcodes,blcodes)
{var rank;send_bits(s,lcodes-257,5);send_bits(s,dcodes-1,5);send_bits(s,blcodes-4,4);for(rank=0;rank<blcodes;rank++){send_bits(s,s.bl_tree[bl_order[rank]*2+1],3);}
send_tree(s,s.dyn_ltree,lcodes-1);send_tree(s,s.dyn_dtree,dcodes-1);}
function detect_data_type(s){var black_mask=0xf3ffc07f;var n;for(n=0;n<=31;n++,black_mask>>>=1){if((black_mask&1)&&(s.dyn_ltree[n*2]!==0)){return Z_BINARY;}}
if(s.dyn_ltree[9*2]!==0||s.dyn_ltree[10*2]!==0||s.dyn_ltree[13*2]!==0){return Z_TEXT;}
for(n=32;n<LITERALS;n++){if(s.dyn_ltree[n*2]!==0){return Z_TEXT;}}
return Z_BINARY;}
var static_init_done=false;function _tr_init(s)
{if(!static_init_done){tr_static_init();static_init_done=true;}
s.l_desc=new TreeDesc(s.dyn_ltree,static_l_desc);s.d_desc=new TreeDesc(s.dyn_dtree,static_d_desc);s.bl_desc=new TreeDesc(s.bl_tree,static_bl_desc);s.bi_buf=0;s.bi_valid=0;init_block(s);}
function _tr_stored_block(s,buf,stored_len,last)
{send_bits(s,(STORED_BLOCK<<1)+(last?1:0),3);copy_block(s,buf,stored_len,true);}
function _tr_align(s){send_bits(s,STATIC_TREES<<1,3);send_code(s,END_BLOCK,static_ltree);bi_flush(s);}
function _tr_flush_block(s,buf,stored_len,last)
{var opt_lenb,static_lenb;var max_blindex=0;if(s.level>0){if(s.strm.data_type===Z_UNKNOWN){s.strm.data_type=detect_data_type(s);}
build_tree(s,s.l_desc);build_tree(s,s.d_desc);max_blindex=build_bl_tree(s);opt_lenb=(s.opt_len+3+7)>>>3;static_lenb=(s.static_len+3+7)>>>3;if(static_lenb<=opt_lenb){opt_lenb=static_lenb;}}else{opt_lenb=static_lenb=stored_len+5;}
if((stored_len+4<=opt_lenb)&&(buf!==-1)){_tr_stored_block(s,buf,stored_len,last);}else if(s.strategy===Z_FIXED||static_lenb===opt_lenb){send_bits(s,(STATIC_TREES<<1)+(last?1:0),3);compress_block(s,static_ltree,static_dtree);}else{send_bits(s,(DYN_TREES<<1)+(last?1:0),3);send_all_trees(s,s.l_desc.max_code+1,s.d_desc.max_code+1,max_blindex+1);compress_block(s,s.dyn_ltree,s.dyn_dtree);}
init_block(s);if(last){bi_windup(s);}}
function _tr_tally(s,dist,lc)
{s.pending_buf[s.d_buf+s.last_lit*2]=(dist>>>8)&0xff;s.pending_buf[s.d_buf+s.last_lit*2+1]=dist&0xff;s.pending_buf[s.l_buf+s.last_lit]=lc&0xff;s.last_lit++;if(dist===0){s.dyn_ltree[lc*2]++;}else{s.matches++;dist--;s.dyn_ltree[(_length_code[lc]+LITERALS+1)*2]++;s.dyn_dtree[d_code(dist)*2]++;}
return(s.last_lit===s.lit_bufsize-1);}
exports._tr_init=_tr_init;exports._tr_stored_block=_tr_stored_block;exports._tr_flush_block=_tr_flush_block;exports._tr_tally=_tr_tally;exports._tr_align=_tr_align;}),(function(module,exports,__webpack_require__){"use strict";module.exports={2:'need dictionary',1:'stream end',0:'','-1':'file error','-2':'stream error','-3':'data error','-4':'insufficient memory','-5':'buffer error','-6':'incompatible version'};}),(function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(170);var adler32=__webpack_require__(374);var crc32=__webpack_require__(375);var inflate_fast=__webpack_require__(817);var inflate_table=__webpack_require__(818);var CODES=0;var LENS=1;var DISTS=2;var Z_FINISH=4;var Z_BLOCK=5;var Z_TREES=6;var Z_OK=0;var Z_STREAM_END=1;var Z_NEED_DICT=2;var Z_STREAM_ERROR=-2;var Z_DATA_ERROR=-3;var Z_MEM_ERROR=-4;var Z_BUF_ERROR=-5;var Z_DEFLATED=8;var HEAD=1;var FLAGS=2;var TIME=3;var OS=4;var EXLEN=5;var EXTRA=6;var NAME=7;var COMMENT=8;var HCRC=9;var DICTID=10;var DICT=11;var TYPE=12;var TYPEDO=13;var STORED=14;var COPY_=15;var COPY=16;var TABLE=17;var LENLENS=18;var CODELENS=19;var LEN_=20;var LEN=21;var LENEXT=22;var DIST=23;var DISTEXT=24;var MATCH=25;var LIT=26;var CHECK=27;var LENGTH=28;var DONE=29;var BAD=30;var MEM=31;var SYNC=32;var ENOUGH_LENS=852;var ENOUGH_DISTS=592;var MAX_WBITS=15;var DEF_WBITS=MAX_WBITS;function zswap32(q){return(((q>>>24)&0xff)+
((q>>>8)&0xff00)+
((q&0xff00)<<8)+
((q&0xff)<<24));}
function InflateState(){this.mode=0;this.last=false;this.wrap=0;this.havedict=false;this.flags=0;this.dmax=0;this.check=0;this.total=0;this.head=null;this.wbits=0;this.wsize=0;this.whave=0;this.wnext=0;this.window=null;this.hold=0;this.bits=0;this.length=0;this.offset=0;this.extra=0;this.lencode=null;this.distcode=null;this.lenbits=0;this.distbits=0;this.ncode=0;this.nlen=0;this.ndist=0;this.have=0;this.next=null;this.lens=new utils.Buf16(320);this.work=new utils.Buf16(288);this.lendyn=null;this.distdyn=null;this.sane=0;this.back=0;this.was=0;}
function inflateResetKeep(strm){var state;if(!strm||!strm.state){return Z_STREAM_ERROR;}
state=strm.state;strm.total_in=strm.total_out=state.total=0;strm.msg='';if(state.wrap){strm.adler=state.wrap&1;}
state.mode=HEAD;state.last=0;state.havedict=0;state.dmax=32768;state.head=null;state.hold=0;state.bits=0;state.lencode=state.lendyn=new utils.Buf32(ENOUGH_LENS);state.distcode=state.distdyn=new utils.Buf32(ENOUGH_DISTS);state.sane=1;state.back=-1;return Z_OK;}
function inflateReset(strm){var state;if(!strm||!strm.state){return Z_STREAM_ERROR;}
state=strm.state;state.wsize=0;state.whave=0;state.wnext=0;return inflateResetKeep(strm);}
function inflateReset2(strm,windowBits){var wrap;var state;if(!strm||!strm.state){return Z_STREAM_ERROR;}
state=strm.state;if(windowBits<0){wrap=0;windowBits=-windowBits;}
else{wrap=(windowBits>>4)+1;if(windowBits<48){windowBits&=15;}}
if(windowBits&&(windowBits<8||windowBits>15)){return Z_STREAM_ERROR;}
if(state.window!==null&&state.wbits!==windowBits){state.window=null;}
state.wrap=wrap;state.wbits=windowBits;return inflateReset(strm);}
function inflateInit2(strm,windowBits){var ret;var state;if(!strm){return Z_STREAM_ERROR;}
state=new InflateState();strm.state=state;state.window=null;ret=inflateReset2(strm,windowBits);if(ret!==Z_OK){strm.state=null;}
return ret;}
function inflateInit(strm){return inflateInit2(strm,DEF_WBITS);}
var virgin=true;var lenfix,distfix;function fixedtables(state){if(virgin){var sym;lenfix=new utils.Buf32(512);distfix=new utils.Buf32(32);sym=0;while(sym<144){state.lens[sym++]=8;}
while(sym<256){state.lens[sym++]=9;}
while(sym<280){state.lens[sym++]=7;}
while(sym<288){state.lens[sym++]=8;}
inflate_table(LENS,state.lens,0,288,lenfix,0,state.work,{bits:9});sym=0;while(sym<32){state.lens[sym++]=5;}
inflate_table(DISTS,state.lens,0,32,distfix,0,state.work,{bits:5});virgin=false;}
state.lencode=lenfix;state.lenbits=9;state.distcode=distfix;state.distbits=5;}
function updatewindow(strm,src,end,copy){var dist;var state=strm.state;if(state.window===null){state.wsize=1<<state.wbits;state.wnext=0;state.whave=0;state.window=new utils.Buf8(state.wsize);}
if(copy>=state.wsize){utils.arraySet(state.window,src,end-state.wsize,state.wsize,0);state.wnext=0;state.whave=state.wsize;}
else{dist=state.wsize-state.wnext;if(dist>copy){dist=copy;}
utils.arraySet(state.window,src,end-copy,dist,state.wnext);copy-=dist;if(copy){utils.arraySet(state.window,src,end-copy,copy,0);state.wnext=copy;state.whave=state.wsize;}
else{state.wnext+=dist;if(state.wnext===state.wsize){state.wnext=0;}
if(state.whave<state.wsize){state.whave+=dist;}}}
return 0;}
function inflate(strm,flush){var state;var input,output;var next;var put;var have,left;var hold;var bits;var _in,_out;var copy;var from;var from_source;var here=0;var here_bits,here_op,here_val;var last_bits,last_op,last_val;var len;var ret;var hbuf=new utils.Buf8(4);var opts;var n;var order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!strm||!strm.state||!strm.output||(!strm.input&&strm.avail_in!==0)){return Z_STREAM_ERROR;}
state=strm.state;if(state.mode===TYPE){state.mode=TYPEDO;}
put=strm.next_out;output=strm.output;left=strm.avail_out;next=strm.next_in;input=strm.input;have=strm.avail_in;hold=state.hold;bits=state.bits;_in=have;_out=left;ret=Z_OK;inf_leave:for(;;){switch(state.mode){case HEAD:if(state.wrap===0){state.mode=TYPEDO;break;}
while(bits<16){if(have===0){break inf_leave;}
have--;hold+=input[next++]<<bits;bits+=8;}
if((state.wrap&2)&&hold===0x8b1f){state.check=0;hbuf[0]=hold&0xff;hbuf[1]=(hold>>>8)&0xff;state.check=crc32(state.check,hbuf,2,0);hold=0;bits=0;state.mode=FLAGS;break;}
state.flags=0;if(state.head){state.head.done=false;}
if(!(state.wrap&1)||(((hold&0xff)<<8)+(hold>>8))%31){strm.msg='incorrect header check';state.mode=BAD;break;}
if((hold&0x0f)!==Z_DEFLATED){strm.msg='unknown compression method';state.mode=BAD;break;}
hold>>>=4;bits-=4;len=(hold&0x0f)+8;if(state.wbits===0){state.wbits=len;}
else if(len>state.wbits){strm.msg='invalid window size';state.mode=BAD;break;}
state.dmax=1<<len;strm.adler=state.check=1;state.mode=hold&0x200?DICTID:TYPE;hold=0;bits=0;break;case FLAGS:while(bits<16){if(have===0){break inf_leave;}
have--;hold+=input[next++]<<bits;bits+=8;}
state.flags=hold;if((state.flags&0xff)!==Z_DEFLATED){strm.msg='unknown compression method';state.mode=BAD;break;}
if(state.flags&0xe000){strm.msg='unknown header flags set';state.mode=BAD;break;}
if(state.head){state.head.text=((hold>>8)&1);}
if(state.flags&0x0200){hbuf[0]=hold&0xff;hbuf[1]=(hold>>>8)&0xff;state.check=crc32(state.check,hbuf,2,0);}
hold=0;bits=0;state.mode=TIME;case TIME:while(bits<32){if(have===0){break inf_leave;}
have--;hold+=input[next++]<<bits;bits+=8;}
if(state.head){state.head.time=hold;}
if(state.flags&0x0200){hbuf[0]=hold&0xff;hbuf[1]=(hold>>>8)&0xff;hbuf[2]=(hold>>>16)&0xff;hbuf[3]=(hold>>>24)&0xff;state.check=crc32(state.check,hbuf,4,0);}
hold=0;bits=0;state.mode=OS;case OS:while(bits<16){if(have===0){break inf_leave;}
have--;hold+=input[next++]<<bits;bits+=8;}
if(state.head){state.head.xflags=(hold&0xff);state.head.os=(hold>>8);}
if(state.flags&0x0200){hbuf[0]=hold&0xff;hbuf[1]=(hold>>>8)&0xff;state.check=crc32(state.check,hbuf,2,0);}
hold=0;bits=0;state.mode=EXLEN;case EXLEN:if(state.flags&0x0400){while(bits<16){if(have===0){break inf_leave;}
have--;hold+=input[next++]<<bits;bits+=8;}
state.length=hold;if(state.head){state.head.extra_len=hold;}
if(state.flags&0x0200){hbuf[0]=hold&0xff;hbuf[1]=(hold>>>8)&0xff;state.check=crc32(state.check,hbuf,2,0);}
hold=0;bits=0;}
else if(state.head){state.head.extra=null;}
state.mode=EXTRA;case EXTRA:if(state.flags&0x0400){copy=state.length;if(copy>have){copy=have;}
if(copy){if(state.head){len=state.head.extra_len-state.length;if(!state.head.extra){state.head.extra=new Array(state.head.extra_len);}
utils.arraySet(state.head.extra,input,next,copy,len);}
if(state.flags&0x0200){state.check=crc32(state.check,input,copy,next);}
have-=copy;next+=copy;state.length-=copy;}
if(state.length){break inf_leave;}}
state.length=0;state.mode=NAME;case NAME:if(state.flags&0x0800){if(have===0){break inf_leave;}
copy=0;do{len=input[next+copy++];if(state.head&&len&&(state.length<65536)){state.head.name+=String.fromCharCode(len);}}while(len&&copy<have);if(state.flags&0x0200){state.check=crc32(state.check,input,copy,next);}
have-=copy;next+=copy;if(len){break inf_leave;}}
else if(state.head){state.head.name=null;}
state.length=0;state.mode=COMMENT;case COMMENT:if(state.flags&0x1000){if(have===0){break inf_leave;}
copy=0;do{len=input[next+copy++];if(state.head&&len&&(state.length<65536)){state.head.comment+=String.fromCharCode(len);}}while(len&&copy<have);if(state.flags&0x0200){state.check=crc32(state.check,input,copy,next);}
have-=copy;next+=copy;if(len){break inf_leave;}}
else if(state.head){state.head.comment=null;}
state.mode=HCRC;case HCRC:if(state.flags&0x0200){while(bits<16){if(have===0){break inf_leave;}
have--;hold+=input[next++]<<bits;bits+=8;}
if(hold!==(state.check&0xffff)){strm.msg='header crc mismatch';state.mode=BAD;break;}
hold=0;bits=0;}
if(state.head){state.head.hcrc=((state.flags>>9)&1);state.head.done=true;}
strm.adler=state.check=0;state.mode=TYPE;break;case DICTID:while(bits<32){if(have===0){break inf_leave;}
have--;hold+=input[next++]<<bits;bits+=8;}
strm.adler=state.check=zswap32(hold);hold=0;bits=0;state.mode=DICT;case DICT:if(state.havedict===0){strm.next_out=put;strm.avail_out=left;strm.next_in=next;strm.avail_in=have;state.hold=hold;state.bits=bits;return Z_NEED_DICT;}
strm.adler=state.check=1;state.mode=TYPE;case TYPE:if(flush===Z_BLOCK||flush===Z_TREES){break inf_leave;}
case TYPEDO:if(state.last){hold>>>=bits&7;bits-=bits&7;state.mode=CHECK;break;}
while(bits<3){if(have===0){break inf_leave;}
have--;hold+=input[next++]<<bits;bits+=8;}
state.last=(hold&0x01);hold>>>=1;bits-=1;switch((hold&0x03)){case 0:state.mode=STORED;break;case 1:fixedtables(state);state.mode=LEN_;if(flush===Z_TREES){hold>>>=2;bits-=2;break inf_leave;}
break;case 2:state.mode=TABLE;break;case 3:strm.msg='invalid block type';state.mode=BAD;}
hold>>>=2;bits-=2;break;case STORED:hold>>>=bits&7;bits-=bits&7;while(bits<32){if(have===0){break inf_leave;}
have--;hold+=input[next++]<<bits;bits+=8;}
if((hold&0xffff)!==((hold>>>16)^0xffff)){strm.msg='invalid stored block lengths';state.mode=BAD;break;}
state.length=hold&0xffff;hold=0;bits=0;state.mode=COPY_;if(flush===Z_TREES){break inf_leave;}
case COPY_:state.mode=COPY;case COPY:copy=state.length;if(copy){if(copy>have){copy=have;}
if(copy>left){copy=left;}
if(copy===0){break inf_leave;}
utils.arraySet(output,input,next,copy,put);have-=copy;next+=copy;left-=copy;put+=copy;state.length-=copy;break;}
state.mode=TYPE;break;case TABLE:while(bits<14){if(have===0){break inf_leave;}
have--;hold+=input[next++]<<bits;bits+=8;}
state.nlen=(hold&0x1f)+257;hold>>>=5;bits-=5;state.ndist=(hold&0x1f)+1;hold>>>=5;bits-=5;state.ncode=(hold&0x0f)+4;hold>>>=4;bits-=4;if(state.nlen>286||state.ndist>30){strm.msg='too many length or distance symbols';state.mode=BAD;break;}
state.have=0;state.mode=LENLENS;case LENLENS:while(state.have<state.ncode){while(bits<3){if(have===0){break inf_leave;}
have--;hold+=input[next++]<<bits;bits+=8;}
state.lens[order[state.have++]]=(hold&0x07);hold>>>=3;bits-=3;}
while(state.have<19){state.lens[order[state.have++]]=0;}
state.lencode=state.lendyn;state.lenbits=7;opts={bits:state.lenbits};ret=inflate_table(CODES,state.lens,0,19,state.lencode,0,state.work,opts);state.lenbits=opts.bits;if(ret){strm.msg='invalid code lengths set';state.mode=BAD;break;}
state.have=0;state.mode=CODELENS;case CODELENS:while(state.have<state.nlen+state.ndist){for(;;){here=state.lencode[hold&((1<<state.lenbits)-1)];here_bits=here>>>24;here_op=(here>>>16)&0xff;here_val=here&0xffff;if((here_bits)<=bits){break;}
if(have===0){break inf_leave;}
have--;hold+=input[next++]<<bits;bits+=8;}
if(here_val<16){hold>>>=here_bits;bits-=here_bits;state.lens[state.have++]=here_val;}
else{if(here_val===16){n=here_bits+2;while(bits<n){if(have===0){break inf_leave;}
have--;hold+=input[next++]<<bits;bits+=8;}
hold>>>=here_bits;bits-=here_bits;if(state.have===0){strm.msg='invalid bit length repeat';state.mode=BAD;break;}
len=state.lens[state.have-1];copy=3+(hold&0x03);hold>>>=2;bits-=2;}
else if(here_val===17){n=here_bits+3;while(bits<n){if(have===0){break inf_leave;}
have--;hold+=input[next++]<<bits;bits+=8;}
hold>>>=here_bits;bits-=here_bits;len=0;copy=3+(hold&0x07);hold>>>=3;bits-=3;}
else{n=here_bits+7;while(bits<n){if(have===0){break inf_leave;}
have--;hold+=input[next++]<<bits;bits+=8;}
hold>>>=here_bits;bits-=here_bits;len=0;copy=11+(hold&0x7f);hold>>>=7;bits-=7;}
if(state.have+copy>state.nlen+state.ndist){strm.msg='invalid bit length repeat';state.mode=BAD;break;}
while(copy--){state.lens[state.have++]=len;}}}
if(state.mode===BAD){break;}
if(state.lens[256]===0){strm.msg='invalid code -- missing end-of-block';state.mode=BAD;break;}
state.lenbits=9;opts={bits:state.lenbits};ret=inflate_table(LENS,state.lens,0,state.nlen,state.lencode,0,state.work,opts);state.lenbits=opts.bits;if(ret){strm.msg='invalid literal/lengths set';state.mode=BAD;break;}
state.distbits=6;state.distcode=state.distdyn;opts={bits:state.distbits};ret=inflate_table(DISTS,state.lens,state.nlen,state.ndist,state.distcode,0,state.work,opts);state.distbits=opts.bits;if(ret){strm.msg='invalid distances set';state.mode=BAD;break;}
state.mode=LEN_;if(flush===Z_TREES){break inf_leave;}
case LEN_:state.mode=LEN;case LEN:if(have>=6&&left>=258){strm.next_out=put;strm.avail_out=left;strm.next_in=next;strm.avail_in=have;state.hold=hold;state.bits=bits;inflate_fast(strm,_out);put=strm.next_out;output=strm.output;left=strm.avail_out;next=strm.next_in;input=strm.input;have=strm.avail_in;hold=state.hold;bits=state.bits;if(state.mode===TYPE){state.back=-1;}
break;}
state.back=0;for(;;){here=state.lencode[hold&((1<<state.lenbits)-1)];here_bits=here>>>24;here_op=(here>>>16)&0xff;here_val=here&0xffff;if(here_bits<=bits){break;}
if(have===0){break inf_leave;}
have--;hold+=input[next++]<<bits;bits+=8;}
if(here_op&&(here_op&0xf0)===0){last_bits=here_bits;last_op=here_op;last_val=here_val;for(;;){here=state.lencode[last_val+
((hold&((1<<(last_bits+last_op))-1))>>last_bits)];here_bits=here>>>24;here_op=(here>>>16)&0xff;here_val=here&0xffff;if((last_bits+here_bits)<=bits){break;}
if(have===0){break inf_leave;}
have--;hold+=input[next++]<<bits;bits+=8;}
hold>>>=last_bits;bits-=last_bits;state.back+=last_bits;}
hold>>>=here_bits;bits-=here_bits;state.back+=here_bits;state.length=here_val;if(here_op===0){state.mode=LIT;break;}
if(here_op&32){state.back=-1;state.mode=TYPE;break;}
if(here_op&64){strm.msg='invalid literal/length code';state.mode=BAD;break;}
state.extra=here_op&15;state.mode=LENEXT;case LENEXT:if(state.extra){n=state.extra;while(bits<n){if(have===0){break inf_leave;}
have--;hold+=input[next++]<<bits;bits+=8;}
state.length+=hold&((1<<state.extra)-1);hold>>>=state.extra;bits-=state.extra;state.back+=state.extra;}
state.was=state.length;state.mode=DIST;case DIST:for(;;){here=state.distcode[hold&((1<<state.distbits)-1)];here_bits=here>>>24;here_op=(here>>>16)&0xff;here_val=here&0xffff;if((here_bits)<=bits){break;}
if(have===0){break inf_leave;}
have--;hold+=input[next++]<<bits;bits+=8;}
if((here_op&0xf0)===0){last_bits=here_bits;last_op=here_op;last_val=here_val;for(;;){here=state.distcode[last_val+
((hold&((1<<(last_bits+last_op))-1))>>last_bits)];here_bits=here>>>24;here_op=(here>>>16)&0xff;here_val=here&0xffff;if((last_bits+here_bits)<=bits){break;}
if(have===0){break inf_leave;}
have--;hold+=input[next++]<<bits;bits+=8;}
hold>>>=last_bits;bits-=last_bits;state.back+=last_bits;}
hold>>>=here_bits;bits-=here_bits;state.back+=here_bits;if(here_op&64){strm.msg='invalid distance code';state.mode=BAD;break;}
state.offset=here_val;state.extra=(here_op)&15;state.mode=DISTEXT;case DISTEXT:if(state.extra){n=state.extra;while(bits<n){if(have===0){break inf_leave;}
have--;hold+=input[next++]<<bits;bits+=8;}
state.offset+=hold&((1<<state.extra)-1);hold>>>=state.extra;bits-=state.extra;state.back+=state.extra;}
if(state.offset>state.dmax){strm.msg='invalid distance too far back';state.mode=BAD;break;}
state.mode=MATCH;case MATCH:if(left===0){break inf_leave;}
copy=_out-left;if(state.offset>copy){copy=state.offset-copy;if(copy>state.whave){if(state.sane){strm.msg='invalid distance too far back';state.mode=BAD;break;}}
if(copy>state.wnext){copy-=state.wnext;from=state.wsize-copy;}
else{from=state.wnext-copy;}
if(copy>state.length){copy=state.length;}
from_source=state.window;}
else{from_source=output;from=put-state.offset;copy=state.length;}
if(copy>left){copy=left;}
left-=copy;state.length-=copy;do{output[put++]=from_source[from++];}while(--copy);if(state.length===0){state.mode=LEN;}
break;case LIT:if(left===0){break inf_leave;}
output[put++]=state.length;left--;state.mode=LEN;break;case CHECK:if(state.wrap){while(bits<32){if(have===0){break inf_leave;}
have--;hold|=input[next++]<<bits;bits+=8;}
_out-=left;strm.total_out+=_out;state.total+=_out;if(_out){strm.adler=state.check=(state.flags?crc32(state.check,output,_out,put-_out):adler32(state.check,output,_out,put-_out));}
_out=left;if((state.flags?hold:zswap32(hold))!==state.check){strm.msg='incorrect data check';state.mode=BAD;break;}
hold=0;bits=0;}
state.mode=LENGTH;case LENGTH:if(state.wrap&&state.flags){while(bits<32){if(have===0){break inf_leave;}
have--;hold+=input[next++]<<bits;bits+=8;}
if(hold!==(state.total&0xffffffff)){strm.msg='incorrect length check';state.mode=BAD;break;}
hold=0;bits=0;}
state.mode=DONE;case DONE:ret=Z_STREAM_END;break inf_leave;case BAD:ret=Z_DATA_ERROR;break inf_leave;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR;}}
strm.next_out=put;strm.avail_out=left;strm.next_in=next;strm.avail_in=have;state.hold=hold;state.bits=bits;if(state.wsize||(_out!==strm.avail_out&&state.mode<BAD&&(state.mode<CHECK||flush!==Z_FINISH))){if(updatewindow(strm,strm.output,strm.next_out,_out-strm.avail_out)){state.mode=MEM;return Z_MEM_ERROR;}}
_in-=strm.avail_in;_out-=strm.avail_out;strm.total_in+=_in;strm.total_out+=_out;state.total+=_out;if(state.wrap&&_out){strm.adler=state.check=(state.flags?crc32(state.check,output,_out,strm.next_out-_out):adler32(state.check,output,_out,strm.next_out-_out));}
strm.data_type=state.bits+(state.last?64:0)+
(state.mode===TYPE?128:0)+
(state.mode===LEN_||state.mode===COPY_?256:0);if(((_in===0&&_out===0)||flush===Z_FINISH)&&ret===Z_OK){ret=Z_BUF_ERROR;}
return ret;}
function inflateEnd(strm){if(!strm||!strm.state){return Z_STREAM_ERROR;}
var state=strm.state;if(state.window){state.window=null;}
strm.state=null;return Z_OK;}
function inflateGetHeader(strm,head){var state;if(!strm||!strm.state){return Z_STREAM_ERROR;}
state=strm.state;if((state.wrap&2)===0){return Z_STREAM_ERROR;}
state.head=head;head.done=false;return Z_OK;}
function inflateSetDictionary(strm,dictionary){var dictLength=dictionary.length;var state;var dictid;var ret;if(!strm||!strm.state){return Z_STREAM_ERROR;}
state=strm.state;if(state.wrap!==0&&state.mode!==DICT){return Z_STREAM_ERROR;}
if(state.mode===DICT){dictid=1;dictid=adler32(dictid,dictionary,dictLength,0);if(dictid!==state.check){return Z_DATA_ERROR;}}
ret=updatewindow(strm,dictionary,dictLength,dictLength);if(ret){state.mode=MEM;return Z_MEM_ERROR;}
state.havedict=1;return Z_OK;}
exports.inflateReset=inflateReset;exports.inflateReset2=inflateReset2;exports.inflateResetKeep=inflateResetKeep;exports.inflateInit=inflateInit;exports.inflateInit2=inflateInit2;exports.inflate=inflate;exports.inflateEnd=inflateEnd;exports.inflateGetHeader=inflateGetHeader;exports.inflateSetDictionary=inflateSetDictionary;exports.inflateInfo='pako inflate (from Nodeca project)';}),(function(module,exports,__webpack_require__){"use strict";var BAD=30;var TYPE=12;module.exports=function inflate_fast(strm,start){var state;var _in;var last;var _out;var beg;var end;var dmax;var wsize;var whave;var wnext;var s_window;var hold;var bits;var lcode;var dcode;var lmask;var dmask;var here;var op;var len;var dist;var from;var from_source;var input,output;state=strm.state;_in=strm.next_in;input=strm.input;last=_in+(strm.avail_in-5);_out=strm.next_out;output=strm.output;beg=_out-(start-strm.avail_out);end=_out+(strm.avail_out-257);dmax=state.dmax;wsize=state.wsize;whave=state.whave;wnext=state.wnext;s_window=state.window;hold=state.hold;bits=state.bits;lcode=state.lencode;dcode=state.distcode;lmask=(1<<state.lenbits)-1;dmask=(1<<state.distbits)-1;top:do{if(bits<15){hold+=input[_in++]<<bits;bits+=8;hold+=input[_in++]<<bits;bits+=8;}
here=lcode[hold&lmask];dolen:for(;;){op=here>>>24;hold>>>=op;bits-=op;op=(here>>>16)&0xff;if(op===0){output[_out++]=here&0xffff;}
else if(op&16){len=here&0xffff;op&=15;if(op){if(bits<op){hold+=input[_in++]<<bits;bits+=8;}
len+=hold&((1<<op)-1);hold>>>=op;bits-=op;}
if(bits<15){hold+=input[_in++]<<bits;bits+=8;hold+=input[_in++]<<bits;bits+=8;}
here=dcode[hold&dmask];dodist:for(;;){op=here>>>24;hold>>>=op;bits-=op;op=(here>>>16)&0xff;if(op&16){dist=here&0xffff;op&=15;if(bits<op){hold+=input[_in++]<<bits;bits+=8;if(bits<op){hold+=input[_in++]<<bits;bits+=8;}}
dist+=hold&((1<<op)-1);if(dist>dmax){strm.msg='invalid distance too far back';state.mode=BAD;break top;}
hold>>>=op;bits-=op;op=_out-beg;if(dist>op){op=dist-op;if(op>whave){if(state.sane){strm.msg='invalid distance too far back';state.mode=BAD;break top;}}
from=0;from_source=s_window;if(wnext===0){from+=wsize-op;if(op<len){len-=op;do{output[_out++]=s_window[from++];}while(--op);from=_out-dist;from_source=output;}}
else if(wnext<op){from+=wsize+wnext-op;op-=wnext;if(op<len){len-=op;do{output[_out++]=s_window[from++];}while(--op);from=0;if(wnext<len){op=wnext;len-=op;do{output[_out++]=s_window[from++];}while(--op);from=_out-dist;from_source=output;}}}
else{from+=wnext-op;if(op<len){len-=op;do{output[_out++]=s_window[from++];}while(--op);from=_out-dist;from_source=output;}}
while(len>2){output[_out++]=from_source[from++];output[_out++]=from_source[from++];output[_out++]=from_source[from++];len-=3;}
if(len){output[_out++]=from_source[from++];if(len>1){output[_out++]=from_source[from++];}}}
else{from=_out-dist;do{output[_out++]=output[from++];output[_out++]=output[from++];output[_out++]=output[from++];len-=3;}while(len>2);if(len){output[_out++]=output[from++];if(len>1){output[_out++]=output[from++];}}}}
else if((op&64)===0){here=dcode[(here&0xffff)+(hold&((1<<op)-1))];continue dodist;}
else{strm.msg='invalid distance code';state.mode=BAD;break top;}
break;}}
else if((op&64)===0){here=lcode[(here&0xffff)+(hold&((1<<op)-1))];continue dolen;}
else if(op&32){state.mode=TYPE;break top;}
else{strm.msg='invalid literal/length code';state.mode=BAD;break top;}
break;}}while(_in<last&&_out<end);len=bits>>3;_in-=len;bits-=len<<3;hold&=(1<<bits)-1;strm.next_in=_in;strm.next_out=_out;strm.avail_in=(_in<last?5+(last-_in):5-(_in-last));strm.avail_out=(_out<end?257+(end-_out):257-(_out-end));state.hold=hold;state.bits=bits;return;};}),(function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(170);var MAXBITS=15;var ENOUGH_LENS=852;var ENOUGH_DISTS=592;var CODES=0;var LENS=1;var DISTS=2;var lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0];var lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78];var dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0];var dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];module.exports=function inflate_table(type,lens,lens_index,codes,table,table_index,work,opts)
{var bits=opts.bits;var len=0;var sym=0;var min=0,max=0;var root=0;var curr=0;var drop=0;var left=0;var used=0;var huff=0;var incr;var fill;var low;var mask;var next;var base=null;var base_index=0;var end;var count=new utils.Buf16(MAXBITS+1);var offs=new utils.Buf16(MAXBITS+1);var extra=null;var extra_index=0;var here_bits,here_op,here_val;for(len=0;len<=MAXBITS;len++){count[len]=0;}
for(sym=0;sym<codes;sym++){count[lens[lens_index+sym]]++;}
root=bits;for(max=MAXBITS;max>=1;max--){if(count[max]!==0){break;}}
if(root>max){root=max;}
if(max===0){table[table_index++]=(1<<24)|(64<<16)|0;table[table_index++]=(1<<24)|(64<<16)|0;opts.bits=1;return 0;}
for(min=1;min<max;min++){if(count[min]!==0){break;}}
if(root<min){root=min;}
left=1;for(len=1;len<=MAXBITS;len++){left<<=1;left-=count[len];if(left<0){return-1;}}
if(left>0&&(type===CODES||max!==1)){return-1;}
offs[1]=0;for(len=1;len<MAXBITS;len++){offs[len+1]=offs[len]+count[len];}
for(sym=0;sym<codes;sym++){if(lens[lens_index+sym]!==0){work[offs[lens[lens_index+sym]]++]=sym;}}
if(type===CODES){base=extra=work;end=19;}else if(type===LENS){base=lbase;base_index-=257;extra=lext;extra_index-=257;end=256;}else{base=dbase;extra=dext;end=-1;}
huff=0;sym=0;len=min;next=table_index;curr=root;drop=0;low=-1;used=1<<root;mask=used-1;if((type===LENS&&used>ENOUGH_LENS)||(type===DISTS&&used>ENOUGH_DISTS)){return 1;}
for(;;){here_bits=len-drop;if(work[sym]<end){here_op=0;here_val=work[sym];}
else if(work[sym]>end){here_op=extra[extra_index+work[sym]];here_val=base[base_index+work[sym]];}
else{here_op=32+64;here_val=0;}
incr=1<<(len-drop);fill=1<<curr;min=fill;do{fill-=incr;table[next+(huff>>drop)+fill]=(here_bits<<24)|(here_op<<16)|here_val|0;}while(fill!==0);incr=1<<(len-1);while(huff&incr){incr>>=1;}
if(incr!==0){huff&=incr-1;huff+=incr;}else{huff=0;}
sym++;if(--count[len]===0){if(len===max){break;}
len=lens[lens_index+work[sym]];}
if(len>root&&(huff&mask)!==low){if(drop===0){drop=root;}
next+=min;curr=len-drop;left=1<<curr;while(curr+drop<max){left-=count[curr+drop];if(left<=0){break;}
curr++;left<<=1;}
used+=1<<curr;if((type===LENS&&used>ENOUGH_LENS)||(type===DISTS&&used>ENOUGH_DISTS)){return 1;}
low=huff&mask;table[low]=(root<<24)|(curr<<16)|(next-table_index)|0;}}
if(huff!==0){table[next+huff]=((len-drop)<<24)|(64<<16)|0;}
opts.bits=root;return 0;};}),(function(module,exports,__webpack_require__){"use strict";module.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};}),(function(module,exports,__webpack_require__){/*!
* Copyright 2010 LearnBoost <dev@learnboost.com>
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var crypto=__webpack_require__(24),parse=__webpack_require__(77).parse;var keys=['acl','location','logging','notification','partNumber','policy','requestPayment','torrent','uploadId','uploads','versionId','versioning','versions','website']
function authorization(options){return 'AWS '+options.key+':'+sign(options)}
module.exports=authorization
module.exports.authorization=authorization
function hmacSha1(options){return crypto.createHmac('sha1',options.secret).update(options.message).digest('base64')}
module.exports.hmacSha1=hmacSha1
function sign(options){options.message=stringToSign(options)
return hmacSha1(options)}
module.exports.sign=sign
function signQuery(options){options.message=queryStringToSign(options)
return hmacSha1(options)}
module.exports.signQuery=signQuery
function stringToSign(options){var headers=options.amazonHeaders||''
if(headers)headers+='\n'
var r=[options.verb,options.md5,options.contentType,options.date?options.date.toUTCString():'',headers+options.resource]
return r.join('\n')}
module.exports.stringToSign=stringToSign
function queryStringToSign(options){return 'GET\n\n\n'+options.date+'\n'+options.resource}
module.exports.queryStringToSign=queryStringToSign
function canonicalizeHeaders(headers){var buf=[],fields=Object.keys(headers);for(var i=0,len=fields.length;i<len;++i){var field=fields[i],val=headers[field],field=field.toLowerCase();if(0!==field.indexOf('x-amz'))continue
buf.push(field+':'+val)}
return buf.sort().join('\n')}
module.exports.canonicalizeHeaders=canonicalizeHeaders
function canonicalizeResource(resource){var url=parse(resource,true),path=url.pathname,buf=[];Object.keys(url.query).forEach(function(key){if(!~keys.indexOf(key))return
var val=''==url.query[key]?'':'='+encodeURIComponent(url.query[key])
buf.push(key+val)})
return path+(buf.length?'?'+buf.sort().join('&'):'')}
module.exports.canonicalizeResource=canonicalizeResource}),(function(module,exports,__webpack_require__){(function(Buffer){var aws4=exports,url=__webpack_require__(77),querystring=__webpack_require__(169),crypto=__webpack_require__(24),lru=__webpack_require__(822),credentialsCache=lru(1000)
function hmac(key,string,encoding){return crypto.createHmac('sha256',key).update(string,'utf8').digest(encoding)}
function hash(string,encoding){return crypto.createHash('sha256').update(string,'utf8').digest(encoding)}
function encodeRfc3986(urlEncodedString){return urlEncodedString.replace(/[!'()*]/g,function(c){return '%'+c.charCodeAt(0).toString(16).toUpperCase()})}
function RequestSigner(request,credentials){if(typeof request==='string')request=url.parse(request)
var headers=request.headers=(request.headers||{}),hostParts=this.matchHost(request.hostname||request.host||headers.Host||headers.host)
this.request=request
this.credentials=credentials||this.defaultCredentials()
this.service=request.service||hostParts[0]||''
this.region=request.region||hostParts[1]||'us-east-1'
if(this.service==='email')this.service='ses'
if(!request.method&&request.body)
request.method='POST'
if(!headers.Host&&!headers.host){headers.Host=request.hostname||request.host||this.createHost()
if(request.port)
headers.Host+=':'+request.port}
if(!request.hostname&&!request.host)
request.hostname=headers.Host||headers.host
this.isCodeCommitGit=this.service==='codecommit'&&request.method==='GIT'}
RequestSigner.prototype.matchHost=function(host){var match=(host||'').match(/([^\.]+)\.(?:([^\.]*)\.)?amazonaws\.com(\.cn)?$/)
var hostParts=(match||[]).slice(1,3)
if(hostParts[1]==='es')
hostParts=hostParts.reverse()
return hostParts}
RequestSigner.prototype.isSingleRegion=function(){if(['s3','sdb'].indexOf(this.service)>=0&&this.region==='us-east-1')return true
return['cloudfront','ls','route53','iam','importexport','sts'].indexOf(this.service)>=0}
RequestSigner.prototype.createHost=function(){var region=this.isSingleRegion()?'':(this.service==='s3'&&this.region!=='us-east-1'?'-':'.')+this.region,service=this.service==='ses'?'email':this.service
return service+region+'.amazonaws.com'}
RequestSigner.prototype.prepareRequest=function(){this.parsePath()
var request=this.request,headers=request.headers,query
if(request.signQuery){this.parsedPath.query=query=this.parsedPath.query||{}
if(this.credentials.sessionToken)
query['X-Amz-Security-Token']=this.credentials.sessionToken
if(this.service==='s3'&&!query['X-Amz-Expires'])
query['X-Amz-Expires']=86400
if(query['X-Amz-Date'])
this.datetime=query['X-Amz-Date']
else
query['X-Amz-Date']=this.getDateTime()
query['X-Amz-Algorithm']='AWS4-HMAC-SHA256'
query['X-Amz-Credential']=this.credentials.accessKeyId+'/'+this.credentialString()
query['X-Amz-SignedHeaders']=this.signedHeaders()}else{if(!request.doNotModifyHeaders&&!this.isCodeCommitGit){if(request.body&&!headers['Content-Type']&&!headers['content-type'])
headers['Content-Type']='application/x-www-form-urlencoded; charset=utf-8'
if(request.body&&!headers['Content-Length']&&!headers['content-length'])
headers['Content-Length']=Buffer.byteLength(request.body)
if(this.credentials.sessionToken&&!headers['X-Amz-Security-Token']&&!headers['x-amz-security-token'])
headers['X-Amz-Security-Token']=this.credentials.sessionToken
if(this.service==='s3'&&!headers['X-Amz-Content-Sha256']&&!headers['x-amz-content-sha256'])
headers['X-Amz-Content-Sha256']=hash(this.request.body||'','hex')
if(headers['X-Amz-Date']||headers['x-amz-date'])
this.datetime=headers['X-Amz-Date']||headers['x-amz-date']
else
headers['X-Amz-Date']=this.getDateTime()}
delete headers.Authorization
delete headers.authorization}}
RequestSigner.prototype.sign=function(){if(!this.parsedPath)this.prepareRequest()
if(this.request.signQuery){this.parsedPath.query['X-Amz-Signature']=this.signature()}else{this.request.headers.Authorization=this.authHeader()}
this.request.path=this.formatPath()
return this.request}
RequestSigner.prototype.getDateTime=function(){if(!this.datetime){var headers=this.request.headers,date=new Date(headers.Date||headers.date||new Date)
this.datetime=date.toISOString().replace(/[:\-]|\.\d{3}/g,'')
if(this.isCodeCommitGit)this.datetime=this.datetime.slice(0,-1)}
return this.datetime}
RequestSigner.prototype.getDate=function(){return this.getDateTime().substr(0,8)}
RequestSigner.prototype.authHeader=function(){return['AWS4-HMAC-SHA256 Credential='+this.credentials.accessKeyId+'/'+this.credentialString(),'SignedHeaders='+this.signedHeaders(),'Signature='+this.signature(),].join(', ')}
RequestSigner.prototype.signature=function(){var date=this.getDate(),cacheKey=[this.credentials.secretAccessKey,date,this.region,this.service].join(),kDate,kRegion,kService,kCredentials=credentialsCache.get(cacheKey)
if(!kCredentials){kDate=hmac('AWS4'+this.credentials.secretAccessKey,date)
kRegion=hmac(kDate,this.region)
kService=hmac(kRegion,this.service)
kCredentials=hmac(kService,'aws4_request')
credentialsCache.set(cacheKey,kCredentials)}
return hmac(kCredentials,this.stringToSign(),'hex')}
RequestSigner.prototype.stringToSign=function(){return['AWS4-HMAC-SHA256',this.getDateTime(),this.credentialString(),hash(this.canonicalString(),'hex'),].join('\n')}
RequestSigner.prototype.canonicalString=function(){if(!this.parsedPath)this.prepareRequest()
var pathStr=this.parsedPath.path,query=this.parsedPath.query,headers=this.request.headers,queryStr='',normalizePath=this.service!=='s3',decodePath=this.service==='s3'||this.request.doNotEncodePath,decodeSlashesInPath=this.service==='s3',firstValOnly=this.service==='s3',bodyHash
if(this.service==='s3'&&this.request.signQuery){bodyHash='UNSIGNED-PAYLOAD'}else if(this.isCodeCommitGit){bodyHash=''}else{bodyHash=headers['X-Amz-Content-Sha256']||headers['x-amz-content-sha256']||hash(this.request.body||'','hex')}
if(query){queryStr=encodeRfc3986(querystring.stringify(Object.keys(query).sort().reduce(function(obj,key){if(!key)return obj
obj[key]=!Array.isArray(query[key])?query[key]:(firstValOnly?query[key][0]:query[key].slice().sort())
return obj},{})))}
if(pathStr!=='/'){if(normalizePath)pathStr=pathStr.replace(/\/{2,}/g,'/')
pathStr=pathStr.split('/').reduce(function(path,piece){if(normalizePath&&piece==='..'){path.pop()}else if(!normalizePath||piece!=='.'){if(decodePath)piece=decodeURIComponent(piece)
path.push(encodeRfc3986(encodeURIComponent(piece)))}
return path},[]).join('/')
if(pathStr[0]!=='/')pathStr='/'+pathStr
if(decodeSlashesInPath)pathStr=pathStr.replace(/%2F/g,'/')}
return[this.request.method||'GET',pathStr,queryStr,this.canonicalHeaders()+'\n',this.signedHeaders(),bodyHash,].join('\n')}
RequestSigner.prototype.canonicalHeaders=function(){var headers=this.request.headers
function trimAll(header){return header.toString().trim().replace(/\s+/g,' ')}
return Object.keys(headers).sort(function(a,b){return a.toLowerCase()<b.toLowerCase()?-1:1}).map(function(key){return key.toLowerCase()+':'+trimAll(headers[key])}).join('\n')}
RequestSigner.prototype.signedHeaders=function(){return Object.keys(this.request.headers).map(function(key){return key.toLowerCase()}).sort().join(';')}
RequestSigner.prototype.credentialString=function(){return[this.getDate(),this.region,this.service,'aws4_request',].join('/')}
RequestSigner.prototype.defaultCredentials=function(){var env=Object({"MINING_POOL_STATUS":undefined})
return{accessKeyId:env.AWS_ACCESS_KEY_ID||env.AWS_ACCESS_KEY,secretAccessKey:env.AWS_SECRET_ACCESS_KEY||env.AWS_SECRET_KEY,sessionToken:env.AWS_SESSION_TOKEN,}}
RequestSigner.prototype.parsePath=function(){var path=this.request.path||'/',queryIx=path.indexOf('?'),query=null
if(queryIx>=0){query=querystring.parse(path.slice(queryIx+1))
path=path.slice(0,queryIx)}
if(/[^0-9A-Za-z!'()*\-._~%/]/.test(path)){path=path.split('/').map(function(piece){return encodeURIComponent(decodeURIComponent(piece))}).join('/')}
this.parsedPath={path:path,query:query,}}
RequestSigner.prototype.formatPath=function(){var path=this.parsedPath.path,query=this.parsedPath.query
if(!query)return path
if(query['']!=null)delete query['']
return path+'?'+encodeRfc3986(querystring.stringify(query))}
aws4.RequestSigner=RequestSigner
aws4.sign=function(request,credentials){return new RequestSigner(request,credentials).sign()}}.call(exports,__webpack_require__(1).Buffer))}),(function(module,exports){module.exports=function(size){return new LruCache(size)}
function LruCache(size){this.capacity=size|0
this.map=Object.create(null)
this.list=new DoublyLinkedList()}
LruCache.prototype.get=function(key){var node=this.map[key]
if(node==null)return undefined
this.used(node)
return node.val}
LruCache.prototype.set=function(key,val){var node=this.map[key]
if(node!=null){node.val=val}else{if(!this.capacity)this.prune()
if(!this.capacity)return false
node=new DoublyLinkedNode(key,val)
this.map[key]=node
this.capacity--}
this.used(node)
return true}
LruCache.prototype.used=function(node){this.list.moveToFront(node)}
LruCache.prototype.prune=function(){var node=this.list.pop()
if(node!=null){delete this.map[node.key]
this.capacity++}}
function DoublyLinkedList(){this.firstNode=null
this.lastNode=null}
DoublyLinkedList.prototype.moveToFront=function(node){if(this.firstNode==node)return
this.remove(node)
if(this.firstNode==null){this.firstNode=node
this.lastNode=node
node.prev=null
node.next=null}else{node.prev=null
node.next=this.firstNode
node.next.prev=node
this.firstNode=node}}
DoublyLinkedList.prototype.pop=function(){var lastNode=this.lastNode
if(lastNode!=null){this.remove(lastNode)}
return lastNode}
DoublyLinkedList.prototype.remove=function(node){if(this.firstNode==node){this.firstNode=node.next}else if(node.prev!=null){node.prev.next=node.next}
if(this.lastNode==node){this.lastNode=node.prev}else if(node.next!=null){node.next.prev=node.prev}}
function DoublyLinkedNode(key,val){this.key=key
this.val=val
this.prev=null
this.next=null}}),(function(module,exports,__webpack_require__){var parser=__webpack_require__(824);var signer=__webpack_require__(835);var verify=__webpack_require__(839);var utils=__webpack_require__(171);module.exports={parse:parser.parseRequest,parseRequest:parser.parseRequest,sign:signer.signRequest,signRequest:signer.signRequest,createSigner:signer.createSigner,isSigner:signer.isSigner,sshKeyToPEM:utils.sshKeyToPEM,sshKeyFingerprint:utils.fingerprint,pemToRsaSSHKey:utils.pemToRsaSSHKey,verify:verify.verifySignature,verifySignature:verify.verifySignature,verifyHMAC:verify.verifyHMAC};}),(function(module,exports,__webpack_require__){var assert=__webpack_require__(15);var util=__webpack_require__(25);var utils=__webpack_require__(171);var HASH_ALGOS=utils.HASH_ALGOS;var PK_ALGOS=utils.PK_ALGOS;var HttpSignatureError=utils.HttpSignatureError;var InvalidAlgorithmError=utils.InvalidAlgorithmError;var validateAlgorithm=utils.validateAlgorithm;var State={New:0,Params:1};var ParamsState={Name:0,Quote:1,Value:2,Comma:3};function ExpiredRequestError(message){HttpSignatureError.call(this,message,ExpiredRequestError);}
util.inherits(ExpiredRequestError,HttpSignatureError);function InvalidHeaderError(message){HttpSignatureError.call(this,message,InvalidHeaderError);}
util.inherits(InvalidHeaderError,HttpSignatureError);function InvalidParamsError(message){HttpSignatureError.call(this,message,InvalidParamsError);}
util.inherits(InvalidParamsError,HttpSignatureError);function MissingHeaderError(message){HttpSignatureError.call(this,message,MissingHeaderError);}
util.inherits(MissingHeaderError,HttpSignatureError);function StrictParsingError(message){HttpSignatureError.call(this,message,StrictParsingError);}
util.inherits(StrictParsingError,HttpSignatureError);module.exports={parseRequest:function parseRequest(request,options){assert.object(request,'request');assert.object(request.headers,'request.headers');if(options===undefined){options={};}
if(options.headers===undefined){options.headers=[request.headers['x-date']?'x-date':'date'];}
assert.object(options,'options');assert.arrayOfString(options.headers,'options.headers');assert.optionalFinite(options.clockSkew,'options.clockSkew');var authzHeaderName=options.authorizationHeaderName||'authorization';if(!request.headers[authzHeaderName]){throw new MissingHeaderError('no '+authzHeaderName+' header '+
'present in the request');}
options.clockSkew=options.clockSkew||300;var i=0;var state=State.New;var substate=ParamsState.Name;var tmpName='';var tmpValue='';var parsed={scheme:'',params:{},signingString:''};var authz=request.headers[authzHeaderName];for(i=0;i<authz.length;i++){var c=authz.charAt(i);switch(Number(state)){case State.New:if(c!==' ')parsed.scheme+=c;else state=State.Params;break;case State.Params:switch(Number(substate)){case ParamsState.Name:var code=c.charCodeAt(0);if((code>=0x41&&code<=0x5a)||(code>=0x61&&code<=0x7a)){tmpName+=c;}else if(c==='='){if(tmpName.length===0)
throw new InvalidHeaderError('bad param format');substate=ParamsState.Quote;}else{throw new InvalidHeaderError('bad param format');}
break;case ParamsState.Quote:if(c==='"'){tmpValue='';substate=ParamsState.Value;}else{throw new InvalidHeaderError('bad param format');}
break;case ParamsState.Value:if(c==='"'){parsed.params[tmpName]=tmpValue;substate=ParamsState.Comma;}else{tmpValue+=c;}
break;case ParamsState.Comma:if(c===','){tmpName='';substate=ParamsState.Name;}else{throw new InvalidHeaderError('bad param format');}
break;default:throw new Error('Invalid substate');}
break;default:throw new Error('Invalid substate');}}
if(!parsed.params.headers||parsed.params.headers===''){if(request.headers['x-date']){parsed.params.headers=['x-date'];}else{parsed.params.headers=['date'];}}else{parsed.params.headers=parsed.params.headers.split(' ');}
if(!parsed.scheme||parsed.scheme!=='Signature')
throw new InvalidHeaderError('scheme was not "Signature"');if(!parsed.params.keyId)
throw new InvalidHeaderError('keyId was not specified');if(!parsed.params.algorithm)
throw new InvalidHeaderError('algorithm was not specified');if(!parsed.params.signature)
throw new InvalidHeaderError('signature was not specified');parsed.params.algorithm=parsed.params.algorithm.toLowerCase();try{validateAlgorithm(parsed.params.algorithm);}catch(e){if(e instanceof InvalidAlgorithmError)
throw(new InvalidParamsError(parsed.params.algorithm+' is not '+
'supported'));else
throw(e);}
for(i=0;i<parsed.params.headers.length;i++){var h=parsed.params.headers[i].toLowerCase();parsed.params.headers[i]=h;if(h==='request-line'){if(!options.strict){parsed.signingString+=request.method+' '+request.url+' HTTP/'+request.httpVersion;}else{throw(new StrictParsingError('request-line is not a valid header '+
'with strict parsing enabled.'));}}else if(h==='(request-target)'){parsed.signingString+='(request-target): '+request.method.toLowerCase()+' '+
request.url;}else{var value=request.headers[h];if(value===undefined)
throw new MissingHeaderError(h+' was not in the request');parsed.signingString+=h+': '+value;}
if((i+1)<parsed.params.headers.length)
parsed.signingString+='\n';}
var date;if(request.headers.date||request.headers['x-date']){if(request.headers['x-date']){date=new Date(request.headers['x-date']);}else{date=new Date(request.headers.date);}
var now=new Date();var skew=Math.abs(now.getTime()-date.getTime());if(skew>options.clockSkew*1000){throw new ExpiredRequestError('clock skew of '+
(skew/1000)+
's was greater than '+
options.clockSkew+'s');}}
options.headers.forEach(function(hdr){if(parsed.params.headers.indexOf(hdr.toLowerCase())<0)
throw new MissingHeaderError(hdr+' was not a signed header');});if(options.algorithms){if(options.algorithms.indexOf(parsed.params.algorithm)===-1)
throw new InvalidParamsError(parsed.params.algorithm+
' is not a supported algorithm');}
parsed.algorithm=parsed.params.algorithm.toUpperCase();parsed.keyId=parsed.params.keyId;return parsed;}};}),(function(module,exports,__webpack_require__){var errors=__webpack_require__(240);var types=__webpack_require__(241);var Reader=__webpack_require__(826);var Writer=__webpack_require__(827);module.exports={Reader:Reader,Writer:Writer};for(var t in types){if(types.hasOwnProperty(t))
module.exports[t]=types[t];}
for(var e in errors){if(errors.hasOwnProperty(e))
module.exports[e]=errors[e];}}),(function(module,exports,__webpack_require__){var assert=__webpack_require__(71);var Buffer=__webpack_require__(21).Buffer;var ASN1=__webpack_require__(241);var errors=__webpack_require__(240);var newInvalidAsn1Error=errors.newInvalidAsn1Error;function Reader(data){if(!data||!Buffer.isBuffer(data))
throw new TypeError('data must be a node Buffer');this._buf=data;this._size=data.length;this._len=0;this._offset=0;}
Object.defineProperty(Reader.prototype,'length',{enumerable:true,get:function(){return(this._len);}});Object.defineProperty(Reader.prototype,'offset',{enumerable:true,get:function(){return(this._offset);}});Object.defineProperty(Reader.prototype,'remain',{get:function(){return(this._size-this._offset);}});Object.defineProperty(Reader.prototype,'buffer',{get:function(){return(this._buf.slice(this._offset));}});Reader.prototype.readByte=function(peek){if(this._size-this._offset<1)
return null;var b=this._buf[this._offset]&0xff;if(!peek)
this._offset+=1;return b;};Reader.prototype.peek=function(){return this.readByte(true);};Reader.prototype.readLength=function(offset){if(offset===undefined)
offset=this._offset;if(offset>=this._size)
return null;var lenB=this._buf[offset++]&0xff;if(lenB===null)
return null;if((lenB&0x80)===0x80){lenB&=0x7f;if(lenB===0)
throw newInvalidAsn1Error('Indefinite length not supported');if(lenB>4)
throw newInvalidAsn1Error('encoding too long');if(this._size-offset<lenB)
return null;this._len=0;for(var i=0;i<lenB;i++)
this._len=(this._len<<8)+(this._buf[offset++]&0xff);}else{this._len=lenB;}
return offset;};Reader.prototype.readSequence=function(tag){var seq=this.peek();if(seq===null)
return null;if(tag!==undefined&&tag!==seq)
throw newInvalidAsn1Error('Expected 0x'+tag.toString(16)+
': got 0x'+seq.toString(16));var o=this.readLength(this._offset+1);if(o===null)
return null;this._offset=o;return seq;};Reader.prototype.readInt=function(){return this._readTag(ASN1.Integer);};Reader.prototype.readBoolean=function(){return(this._readTag(ASN1.Boolean)===0?false:true);};Reader.prototype.readEnumeration=function(){return this._readTag(ASN1.Enumeration);};Reader.prototype.readString=function(tag,retbuf){if(!tag)
tag=ASN1.OctetString;var b=this.peek();if(b===null)
return null;if(b!==tag)
throw newInvalidAsn1Error('Expected 0x'+tag.toString(16)+
': got 0x'+b.toString(16));var o=this.readLength(this._offset+1);if(o===null)
return null;if(this.length>this._size-o)
return null;this._offset=o;if(this.length===0)
return retbuf?Buffer.alloc(0):'';var str=this._buf.slice(this._offset,this._offset+this.length);this._offset+=this.length;return retbuf?str:str.toString('utf8');};Reader.prototype.readOID=function(tag){if(!tag)
tag=ASN1.OID;var b=this.readString(tag,true);if(b===null)
return null;var values=[];var value=0;for(var i=0;i<b.length;i++){var byte=b[i]&0xff;value<<=7;value+=byte&0x7f;if((byte&0x80)===0){values.push(value);value=0;}}
value=values.shift();values.unshift(value%40);values.unshift((value/40)>>0);return values.join('.');};Reader.prototype._readTag=function(tag){assert.ok(tag!==undefined);var b=this.peek();if(b===null)
return null;if(b!==tag)
throw newInvalidAsn1Error('Expected 0x'+tag.toString(16)+
': got 0x'+b.toString(16));var o=this.readLength(this._offset+1);if(o===null)
return null;if(this.length>4)
throw newInvalidAsn1Error('Integer too long: '+this.length);if(this.length>this._size-o)
return null;this._offset=o;var fb=this._buf[this._offset];var value=0;for(var i=0;i<this.length;i++){value<<=8;value|=(this._buf[this._offset++]&0xff);}
if((fb&0x80)===0x80&&i!==4)
value-=(1<<(i*8));return value>>0;};module.exports=Reader;}),(function(module,exports,__webpack_require__){var assert=__webpack_require__(71);var Buffer=__webpack_require__(21).Buffer;var ASN1=__webpack_require__(241);var errors=__webpack_require__(240);var newInvalidAsn1Error=errors.newInvalidAsn1Error;var DEFAULT_OPTS={size:1024,growthFactor:8};function merge(from,to){assert.ok(from);assert.equal(typeof(from),'object');assert.ok(to);assert.equal(typeof(to),'object');var keys=Object.getOwnPropertyNames(from);keys.forEach(function(key){if(to[key])
return;var value=Object.getOwnPropertyDescriptor(from,key);Object.defineProperty(to,key,value);});return to;}
function Writer(options){options=merge(DEFAULT_OPTS,options||{});this._buf=Buffer.alloc(options.size||1024);this._size=this._buf.length;this._offset=0;this._options=options;this._seq=[];}
Object.defineProperty(Writer.prototype,'buffer',{get:function(){if(this._seq.length)
throw newInvalidAsn1Error(this._seq.length+' unended sequence(s)');return(this._buf.slice(0,this._offset));}});Writer.prototype.writeByte=function(b){if(typeof(b)!=='number')
throw new TypeError('argument must be a Number');this._ensure(1);this._buf[this._offset++]=b;};Writer.prototype.writeInt=function(i,tag){if(typeof(i)!=='number')
throw new TypeError('argument must be a Number');if(typeof(tag)!=='number')
tag=ASN1.Integer;var sz=4;while((((i&0xff800000)===0)||((i&0xff800000)===0xff800000>>0))&&(sz>1)){sz--;i<<=8;}
if(sz>4)
throw newInvalidAsn1Error('BER ints cannot be > 0xffffffff');this._ensure(2+sz);this._buf[this._offset++]=tag;this._buf[this._offset++]=sz;while(sz-->0){this._buf[this._offset++]=((i&0xff000000)>>>24);i<<=8;}};Writer.prototype.writeNull=function(){this.writeByte(ASN1.Null);this.writeByte(0x00);};Writer.prototype.writeEnumeration=function(i,tag){if(typeof(i)!=='number')
throw new TypeError('argument must be a Number');if(typeof(tag)!=='number')
tag=ASN1.Enumeration;return this.writeInt(i,tag);};Writer.prototype.writeBoolean=function(b,tag){if(typeof(b)!=='boolean')
throw new TypeError('argument must be a Boolean');if(typeof(tag)!=='number')
tag=ASN1.Boolean;this._ensure(3);this._buf[this._offset++]=tag;this._buf[this._offset++]=0x01;this._buf[this._offset++]=b?0xff:0x00;};Writer.prototype.writeString=function(s,tag){if(typeof(s)!=='string')
throw new TypeError('argument must be a string (was: '+typeof(s)+')');if(typeof(tag)!=='number')
tag=ASN1.OctetString;var len=Buffer.byteLength(s);this.writeByte(tag);this.writeLength(len);if(len){this._ensure(len);this._buf.write(s,this._offset);this._offset+=len;}};Writer.prototype.writeBuffer=function(buf,tag){if(typeof(tag)!=='number')
throw new TypeError('tag must be a number');if(!Buffer.isBuffer(buf))
throw new TypeError('argument must be a buffer');this.writeByte(tag);this.writeLength(buf.length);this._ensure(buf.length);buf.copy(this._buf,this._offset,0,buf.length);this._offset+=buf.length;};Writer.prototype.writeStringArray=function(strings){if((!strings instanceof Array))
throw new TypeError('argument must be an Array[String]');var self=this;strings.forEach(function(s){self.writeString(s);});};Writer.prototype.writeOID=function(s,tag){if(typeof(s)!=='string')
throw new TypeError('argument must be a string');if(typeof(tag)!=='number')
tag=ASN1.OID;if(!/^([0-9]+\.){3,}[0-9]+$/.test(s))
throw new Error('argument is not a valid OID string');function encodeOctet(bytes,octet){if(octet<128){bytes.push(octet);}else if(octet<16384){bytes.push((octet>>>7)|0x80);bytes.push(octet&0x7F);}else if(octet<2097152){bytes.push((octet>>>14)|0x80);bytes.push(((octet>>>7)|0x80)&0xFF);bytes.push(octet&0x7F);}else if(octet<268435456){bytes.push((octet>>>21)|0x80);bytes.push(((octet>>>14)|0x80)&0xFF);bytes.push(((octet>>>7)|0x80)&0xFF);bytes.push(octet&0x7F);}else{bytes.push(((octet>>>28)|0x80)&0xFF);bytes.push(((octet>>>21)|0x80)&0xFF);bytes.push(((octet>>>14)|0x80)&0xFF);bytes.push(((octet>>>7)|0x80)&0xFF);bytes.push(octet&0x7F);}}
var tmp=s.split('.');var bytes=[];bytes.push(parseInt(tmp[0],10)*40+parseInt(tmp[1],10));tmp.slice(2).forEach(function(b){encodeOctet(bytes,parseInt(b,10));});var self=this;this._ensure(2+bytes.length);this.writeByte(tag);this.writeLength(bytes.length);bytes.forEach(function(b){self.writeByte(b);});};Writer.prototype.writeLength=function(len){if(typeof(len)!=='number')
throw new TypeError('argument must be a Number');this._ensure(4);if(len<=0x7f){this._buf[this._offset++]=len;}else if(len<=0xff){this._buf[this._offset++]=0x81;this._buf[this._offset++]=len;}else if(len<=0xffff){this._buf[this._offset++]=0x82;this._buf[this._offset++]=len>>8;this._buf[this._offset++]=len;}else if(len<=0xffffff){this._buf[this._offset++]=0x83;this._buf[this._offset++]=len>>16;this._buf[this._offset++]=len>>8;this._buf[this._offset++]=len;}else{throw newInvalidAsn1Error('Length too long (> 4 bytes)');}};Writer.prototype.startSequence=function(tag){if(typeof(tag)!=='number')
tag=ASN1.Sequence|ASN1.Constructor;this.writeByte(tag);this._seq.push(this._offset);this._ensure(3);this._offset+=3;};Writer.prototype.endSequence=function(){var seq=this._seq.pop();var start=seq+3;var len=this._offset-start;if(len<=0x7f){this._shift(start,len,-2);this._buf[seq]=len;}else if(len<=0xff){this._shift(start,len,-1);this._buf[seq]=0x81;this._buf[seq+1]=len;}else if(len<=0xffff){this._buf[seq]=0x82;this._buf[seq+1]=len>>8;this._buf[seq+2]=len;}else if(len<=0xffffff){this._shift(start,len,1);this._buf[seq]=0x83;this._buf[seq+1]=len>>16;this._buf[seq+2]=len>>8;this._buf[seq+3]=len;}else{throw newInvalidAsn1Error('Sequence too long');}};Writer.prototype._shift=function(start,len,shift){assert.ok(start!==undefined);assert.ok(len!==undefined);assert.ok(shift);this._buf.copy(this._buf,start+shift,start,start+len);this._offset+=shift;};Writer.prototype._ensure=function(len){assert.ok(len);if(this._size-this._offset<len){var sz=this._size*this._options.growthFactor;if(sz-this._offset<len)
sz+=len;var buf=Buffer.alloc(sz);this._buf.copy(buf,0,0,this._offset);this._buf=buf;this._size=sz;}};module.exports=Writer;}),(function(module,exports){}),(function(module,exports,__webpack_require__){var crypto=__webpack_require__(24);var BigInteger=__webpack_require__(135).BigInteger;var ECPointFp=__webpack_require__(172).ECPointFp;var Buffer=__webpack_require__(21).Buffer;exports.ECCurves=__webpack_require__(830);function unstupid(hex,len)
{return(hex.length>=len)?hex:unstupid("0"+hex,len);}
exports.ECKey=function(curve,key,isPublic)
{var priv;var c=curve();var n=c.getN();var bytes=Math.floor(n.bitLength()/8);if(key)
{if(isPublic)
{var curve=c.getCurve();this.P=curve.decodePointHex(key.toString("hex"));}else{if(key.length!=bytes)return false;priv=new BigInteger(key.toString("hex"),16);}}else{var n1=n.subtract(BigInteger.ONE);var r=new BigInteger(crypto.randomBytes(n.bitLength()));priv=r.mod(n1).add(BigInteger.ONE);this.P=c.getG().multiply(priv);}
if(this.P)
{this.PublicKey=Buffer.from(c.getCurve().encodeCompressedPointHex(this.P),"hex");}
if(priv)
{this.PrivateKey=Buffer.from(unstupid(priv.toString(16),bytes*2),"hex");this.deriveSharedSecret=function(key)
{if(!key||!key.P)return false;var S=key.P.multiply(priv);return Buffer.from(unstupid(S.getX().toBigInteger().toString(16),bytes*2),"hex");}}}}),(function(module,exports,__webpack_require__){var BigInteger=__webpack_require__(135).BigInteger
var ECCurveFp=__webpack_require__(172).ECCurveFp
function X9ECParameters(curve,g,n,h){this.curve=curve;this.g=g;this.n=n;this.h=h;}
function x9getCurve(){return this.curve;}
function x9getG(){return this.g;}
function x9getN(){return this.n;}
function x9getH(){return this.h;}
X9ECParameters.prototype.getCurve=x9getCurve;X9ECParameters.prototype.getG=x9getG;X9ECParameters.prototype.getN=x9getN;X9ECParameters.prototype.getH=x9getH;function fromHex(s){return new BigInteger(s,16);}
function secp128r1(){var p=fromHex("FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF");var a=fromHex("FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC");var b=fromHex("E87579C11079F43DD824993C2CEE5ED3");var n=fromHex("FFFFFFFE0000000075A30D1B9038A115");var h=BigInteger.ONE;var curve=new ECCurveFp(p,a,b);var G=curve.decodePointHex("04"
+"161FF7528B899B2D0C28607CA52C5B86"
+"CF5AC8395BAFEB13C02DA292DDED7A83");return new X9ECParameters(curve,G,n,h);}
function secp160k1(){var p=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73");var a=BigInteger.ZERO;var b=fromHex("7");var n=fromHex("0100000000000000000001B8FA16DFAB9ACA16B6B3");var h=BigInteger.ONE;var curve=new ECCurveFp(p,a,b);var G=curve.decodePointHex("04"
+"3B4C382CE37AA192A4019E763036F4F5DD4D7EBB"
+"938CF935318FDCED6BC28286531733C3F03C4FEE");return new X9ECParameters(curve,G,n,h);}
function secp160r1(){var p=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF");var a=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC");var b=fromHex("1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45");var n=fromHex("0100000000000000000001F4C8F927AED3CA752257");var h=BigInteger.ONE;var curve=new ECCurveFp(p,a,b);var G=curve.decodePointHex("04"
+"4A96B5688EF573284664698968C38BB913CBFC82"
+"23A628553168947D59DCC912042351377AC5FB32");return new X9ECParameters(curve,G,n,h);}
function secp192k1(){var p=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37");var a=BigInteger.ZERO;var b=fromHex("3");var n=fromHex("FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D");var h=BigInteger.ONE;var curve=new ECCurveFp(p,a,b);var G=curve.decodePointHex("04"
+"DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D"
+"9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D");return new X9ECParameters(curve,G,n,h);}
function secp192r1(){var p=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF");var a=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC");var b=fromHex("64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1");var n=fromHex("FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831");var h=BigInteger.ONE;var curve=new ECCurveFp(p,a,b);var G=curve.decodePointHex("04"
+"188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012"
+"07192B95FFC8DA78631011ED6B24CDD573F977A11E794811");return new X9ECParameters(curve,G,n,h);}
function secp224r1(){var p=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001");var a=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE");var b=fromHex("B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4");var n=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D");var h=BigInteger.ONE;var curve=new ECCurveFp(p,a,b);var G=curve.decodePointHex("04"
+"B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21"
+"BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34");return new X9ECParameters(curve,G,n,h);}
function secp256r1(){var p=fromHex("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF");var a=fromHex("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC");var b=fromHex("5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B");var n=fromHex("FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551");var h=BigInteger.ONE;var curve=new ECCurveFp(p,a,b);var G=curve.decodePointHex("04"
+"6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296"
+"4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5");return new X9ECParameters(curve,G,n,h);}
function getSECCurveByName(name){if(name=="secp128r1")return secp128r1();if(name=="secp160k1")return secp160k1();if(name=="secp160r1")return secp160r1();if(name=="secp192k1")return secp192k1();if(name=="secp192r1")return secp192r1();if(name=="secp224r1")return secp224r1();if(name=="secp256r1")return secp256r1();return null;}
module.exports={"secp128r1":secp128r1,"secp160k1":secp160k1,"secp160r1":secp160r1,"secp192k1":secp192k1,"secp192r1":secp192r1,"secp224r1":secp224r1,"secp256r1":secp256r1}}),(function(module,exports,__webpack_require__){(function(nacl){'use strict';var gf=function(init){var i,r=new Float64Array(16);if(init)for(i=0;i<init.length;i++)r[i]=init[i];return r;};var randombytes=function(){throw new Error('no PRNG');};var _0=new Uint8Array(16);var _9=new Uint8Array(32);_9[0]=9;var gf0=gf(),gf1=gf([1]),_121665=gf([0xdb41,1]),D=gf([0x78a3,0x1359,0x4dca,0x75eb,0xd8ab,0x4141,0x0a4d,0x0070,0xe898,0x7779,0x4079,0x8cc7,0xfe73,0x2b6f,0x6cee,0x5203]),D2=gf([0xf159,0x26b2,0x9b94,0xebd6,0xb156,0x8283,0x149a,0x00e0,0xd130,0xeef3,0x80f2,0x198e,0xfce7,0x56df,0xd9dc,0x2406]),X=gf([0xd51a,0x8f25,0x2d60,0xc956,0xa7b2,0x9525,0xc760,0x692c,0xdc5c,0xfdd6,0xe231,0xc0a4,0x53fe,0xcd6e,0x36d3,0x2169]),Y=gf([0x6658,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666,0x6666]),I=gf([0xa0b0,0x4a0e,0x1b27,0xc4ee,0xe478,0xad2f,0x1806,0x2f43,0xd7a7,0x3dfb,0x0099,0x2b4d,0xdf0b,0x4fc1,0x2480,0x2b83]);function ts64(x,i,h,l){x[i]=(h>>24)&0xff;x[i+1]=(h>>16)&0xff;x[i+2]=(h>>8)&0xff;x[i+3]=h&0xff;x[i+4]=(l>>24)&0xff;x[i+5]=(l>>16)&0xff;x[i+6]=(l>>8)&0xff;x[i+7]=l&0xff;}
function vn(x,xi,y,yi,n){var i,d=0;for(i=0;i<n;i++)d|=x[xi+i]^y[yi+i];return(1&((d-1)>>>8))-1;}
function crypto_verify_16(x,xi,y,yi){return vn(x,xi,y,yi,16);}
function crypto_verify_32(x,xi,y,yi){return vn(x,xi,y,yi,32);}
function core_salsa20(o,p,k,c){var j0=c[0]&0xff|(c[1]&0xff)<<8|(c[2]&0xff)<<16|(c[3]&0xff)<<24,j1=k[0]&0xff|(k[1]&0xff)<<8|(k[2]&0xff)<<16|(k[3]&0xff)<<24,j2=k[4]&0xff|(k[5]&0xff)<<8|(k[6]&0xff)<<16|(k[7]&0xff)<<24,j3=k[8]&0xff|(k[9]&0xff)<<8|(k[10]&0xff)<<16|(k[11]&0xff)<<24,j4=k[12]&0xff|(k[13]&0xff)<<8|(k[14]&0xff)<<16|(k[15]&0xff)<<24,j5=c[4]&0xff|(c[5]&0xff)<<8|(c[6]&0xff)<<16|(c[7]&0xff)<<24,j6=p[0]&0xff|(p[1]&0xff)<<8|(p[2]&0xff)<<16|(p[3]&0xff)<<24,j7=p[4]&0xff|(p[5]&0xff)<<8|(p[6]&0xff)<<16|(p[7]&0xff)<<24,j8=p[8]&0xff|(p[9]&0xff)<<8|(p[10]&0xff)<<16|(p[11]&0xff)<<24,j9=p[12]&0xff|(p[13]&0xff)<<8|(p[14]&0xff)<<16|(p[15]&0xff)<<24,j10=c[8]&0xff|(c[9]&0xff)<<8|(c[10]&0xff)<<16|(c[11]&0xff)<<24,j11=k[16]&0xff|(k[17]&0xff)<<8|(k[18]&0xff)<<16|(k[19]&0xff)<<24,j12=k[20]&0xff|(k[21]&0xff)<<8|(k[22]&0xff)<<16|(k[23]&0xff)<<24,j13=k[24]&0xff|(k[25]&0xff)<<8|(k[26]&0xff)<<16|(k[27]&0xff)<<24,j14=k[28]&0xff|(k[29]&0xff)<<8|(k[30]&0xff)<<16|(k[31]&0xff)<<24,j15=c[12]&0xff|(c[13]&0xff)<<8|(c[14]&0xff)<<16|(c[15]&0xff)<<24;var x0=j0,x1=j1,x2=j2,x3=j3,x4=j4,x5=j5,x6=j6,x7=j7,x8=j8,x9=j9,x10=j10,x11=j11,x12=j12,x13=j13,x14=j14,x15=j15,u;for(var i=0;i<20;i+=2){u=x0+x12|0;x4^=u<<7|u>>>(32-7);u=x4+x0|0;x8^=u<<9|u>>>(32-9);u=x8+x4|0;x12^=u<<13|u>>>(32-13);u=x12+x8|0;x0^=u<<18|u>>>(32-18);u=x5+x1|0;x9^=u<<7|u>>>(32-7);u=x9+x5|0;x13^=u<<9|u>>>(32-9);u=x13+x9|0;x1^=u<<13|u>>>(32-13);u=x1+x13|0;x5^=u<<18|u>>>(32-18);u=x10+x6|0;x14^=u<<7|u>>>(32-7);u=x14+x10|0;x2^=u<<9|u>>>(32-9);u=x2+x14|0;x6^=u<<13|u>>>(32-13);u=x6+x2|0;x10^=u<<18|u>>>(32-18);u=x15+x11|0;x3^=u<<7|u>>>(32-7);u=x3+x15|0;x7^=u<<9|u>>>(32-9);u=x7+x3|0;x11^=u<<13|u>>>(32-13);u=x11+x7|0;x15^=u<<18|u>>>(32-18);u=x0+x3|0;x1^=u<<7|u>>>(32-7);u=x1+x0|0;x2^=u<<9|u>>>(32-9);u=x2+x1|0;x3^=u<<13|u>>>(32-13);u=x3+x2|0;x0^=u<<18|u>>>(32-18);u=x5+x4|0;x6^=u<<7|u>>>(32-7);u=x6+x5|0;x7^=u<<9|u>>>(32-9);u=x7+x6|0;x4^=u<<13|u>>>(32-13);u=x4+x7|0;x5^=u<<18|u>>>(32-18);u=x10+x9|0;x11^=u<<7|u>>>(32-7);u=x11+x10|0;x8^=u<<9|u>>>(32-9);u=x8+x11|0;x9^=u<<13|u>>>(32-13);u=x9+x8|0;x10^=u<<18|u>>>(32-18);u=x15+x14|0;x12^=u<<7|u>>>(32-7);u=x12+x15|0;x13^=u<<9|u>>>(32-9);u=x13+x12|0;x14^=u<<13|u>>>(32-13);u=x14+x13|0;x15^=u<<18|u>>>(32-18);}
x0=x0+j0|0;x1=x1+j1|0;x2=x2+j2|0;x3=x3+j3|0;x4=x4+j4|0;x5=x5+j5|0;x6=x6+j6|0;x7=x7+j7|0;x8=x8+j8|0;x9=x9+j9|0;x10=x10+j10|0;x11=x11+j11|0;x12=x12+j12|0;x13=x13+j13|0;x14=x14+j14|0;x15=x15+j15|0;o[0]=x0>>>0&0xff;o[1]=x0>>>8&0xff;o[2]=x0>>>16&0xff;o[3]=x0>>>24&0xff;o[4]=x1>>>0&0xff;o[5]=x1>>>8&0xff;o[6]=x1>>>16&0xff;o[7]=x1>>>24&0xff;o[8]=x2>>>0&0xff;o[9]=x2>>>8&0xff;o[10]=x2>>>16&0xff;o[11]=x2>>>24&0xff;o[12]=x3>>>0&0xff;o[13]=x3>>>8&0xff;o[14]=x3>>>16&0xff;o[15]=x3>>>24&0xff;o[16]=x4>>>0&0xff;o[17]=x4>>>8&0xff;o[18]=x4>>>16&0xff;o[19]=x4>>>24&0xff;o[20]=x5>>>0&0xff;o[21]=x5>>>8&0xff;o[22]=x5>>>16&0xff;o[23]=x5>>>24&0xff;o[24]=x6>>>0&0xff;o[25]=x6>>>8&0xff;o[26]=x6>>>16&0xff;o[27]=x6>>>24&0xff;o[28]=x7>>>0&0xff;o[29]=x7>>>8&0xff;o[30]=x7>>>16&0xff;o[31]=x7>>>24&0xff;o[32]=x8>>>0&0xff;o[33]=x8>>>8&0xff;o[34]=x8>>>16&0xff;o[35]=x8>>>24&0xff;o[36]=x9>>>0&0xff;o[37]=x9>>>8&0xff;o[38]=x9>>>16&0xff;o[39]=x9>>>24&0xff;o[40]=x10>>>0&0xff;o[41]=x10>>>8&0xff;o[42]=x10>>>16&0xff;o[43]=x10>>>24&0xff;o[44]=x11>>>0&0xff;o[45]=x11>>>8&0xff;o[46]=x11>>>16&0xff;o[47]=x11>>>24&0xff;o[48]=x12>>>0&0xff;o[49]=x12>>>8&0xff;o[50]=x12>>>16&0xff;o[51]=x12>>>24&0xff;o[52]=x13>>>0&0xff;o[53]=x13>>>8&0xff;o[54]=x13>>>16&0xff;o[55]=x13>>>24&0xff;o[56]=x14>>>0&0xff;o[57]=x14>>>8&0xff;o[58]=x14>>>16&0xff;o[59]=x14>>>24&0xff;o[60]=x15>>>0&0xff;o[61]=x15>>>8&0xff;o[62]=x15>>>16&0xff;o[63]=x15>>>24&0xff;}
function core_hsalsa20(o,p,k,c){var j0=c[0]&0xff|(c[1]&0xff)<<8|(c[2]&0xff)<<16|(c[3]&0xff)<<24,j1=k[0]&0xff|(k[1]&0xff)<<8|(k[2]&0xff)<<16|(k[3]&0xff)<<24,j2=k[4]&0xff|(k[5]&0xff)<<8|(k[6]&0xff)<<16|(k[7]&0xff)<<24,j3=k[8]&0xff|(k[9]&0xff)<<8|(k[10]&0xff)<<16|(k[11]&0xff)<<24,j4=k[12]&0xff|(k[13]&0xff)<<8|(k[14]&0xff)<<16|(k[15]&0xff)<<24,j5=c[4]&0xff|(c[5]&0xff)<<8|(c[6]&0xff)<<16|(c[7]&0xff)<<24,j6=p[0]&0xff|(p[1]&0xff)<<8|(p[2]&0xff)<<16|(p[3]&0xff)<<24,j7=p[4]&0xff|(p[5]&0xff)<<8|(p[6]&0xff)<<16|(p[7]&0xff)<<24,j8=p[8]&0xff|(p[9]&0xff)<<8|(p[10]&0xff)<<16|(p[11]&0xff)<<24,j9=p[12]&0xff|(p[13]&0xff)<<8|(p[14]&0xff)<<16|(p[15]&0xff)<<24,j10=c[8]&0xff|(c[9]&0xff)<<8|(c[10]&0xff)<<16|(c[11]&0xff)<<24,j11=k[16]&0xff|(k[17]&0xff)<<8|(k[18]&0xff)<<16|(k[19]&0xff)<<24,j12=k[20]&0xff|(k[21]&0xff)<<8|(k[22]&0xff)<<16|(k[23]&0xff)<<24,j13=k[24]&0xff|(k[25]&0xff)<<8|(k[26]&0xff)<<16|(k[27]&0xff)<<24,j14=k[28]&0xff|(k[29]&0xff)<<8|(k[30]&0xff)<<16|(k[31]&0xff)<<24,j15=c[12]&0xff|(c[13]&0xff)<<8|(c[14]&0xff)<<16|(c[15]&0xff)<<24;var x0=j0,x1=j1,x2=j2,x3=j3,x4=j4,x5=j5,x6=j6,x7=j7,x8=j8,x9=j9,x10=j10,x11=j11,x12=j12,x13=j13,x14=j14,x15=j15,u;for(var i=0;i<20;i+=2){u=x0+x12|0;x4^=u<<7|u>>>(32-7);u=x4+x0|0;x8^=u<<9|u>>>(32-9);u=x8+x4|0;x12^=u<<13|u>>>(32-13);u=x12+x8|0;x0^=u<<18|u>>>(32-18);u=x5+x1|0;x9^=u<<7|u>>>(32-7);u=x9+x5|0;x13^=u<<9|u>>>(32-9);u=x13+x9|0;x1^=u<<13|u>>>(32-13);u=x1+x13|0;x5^=u<<18|u>>>(32-18);u=x10+x6|0;x14^=u<<7|u>>>(32-7);u=x14+x10|0;x2^=u<<9|u>>>(32-9);u=x2+x14|0;x6^=u<<13|u>>>(32-13);u=x6+x2|0;x10^=u<<18|u>>>(32-18);u=x15+x11|0;x3^=u<<7|u>>>(32-7);u=x3+x15|0;x7^=u<<9|u>>>(32-9);u=x7+x3|0;x11^=u<<13|u>>>(32-13);u=x11+x7|0;x15^=u<<18|u>>>(32-18);u=x0+x3|0;x1^=u<<7|u>>>(32-7);u=x1+x0|0;x2^=u<<9|u>>>(32-9);u=x2+x1|0;x3^=u<<13|u>>>(32-13);u=x3+x2|0;x0^=u<<18|u>>>(32-18);u=x5+x4|0;x6^=u<<7|u>>>(32-7);u=x6+x5|0;x7^=u<<9|u>>>(32-9);u=x7+x6|0;x4^=u<<13|u>>>(32-13);u=x4+x7|0;x5^=u<<18|u>>>(32-18);u=x10+x9|0;x11^=u<<7|u>>>(32-7);u=x11+x10|0;x8^=u<<9|u>>>(32-9);u=x8+x11|0;x9^=u<<13|u>>>(32-13);u=x9+x8|0;x10^=u<<18|u>>>(32-18);u=x15+x14|0;x12^=u<<7|u>>>(32-7);u=x12+x15|0;x13^=u<<9|u>>>(32-9);u=x13+x12|0;x14^=u<<13|u>>>(32-13);u=x14+x13|0;x15^=u<<18|u>>>(32-18);}
o[0]=x0>>>0&0xff;o[1]=x0>>>8&0xff;o[2]=x0>>>16&0xff;o[3]=x0>>>24&0xff;o[4]=x5>>>0&0xff;o[5]=x5>>>8&0xff;o[6]=x5>>>16&0xff;o[7]=x5>>>24&0xff;o[8]=x10>>>0&0xff;o[9]=x10>>>8&0xff;o[10]=x10>>>16&0xff;o[11]=x10>>>24&0xff;o[12]=x15>>>0&0xff;o[13]=x15>>>8&0xff;o[14]=x15>>>16&0xff;o[15]=x15>>>24&0xff;o[16]=x6>>>0&0xff;o[17]=x6>>>8&0xff;o[18]=x6>>>16&0xff;o[19]=x6>>>24&0xff;o[20]=x7>>>0&0xff;o[21]=x7>>>8&0xff;o[22]=x7>>>16&0xff;o[23]=x7>>>24&0xff;o[24]=x8>>>0&0xff;o[25]=x8>>>8&0xff;o[26]=x8>>>16&0xff;o[27]=x8>>>24&0xff;o[28]=x9>>>0&0xff;o[29]=x9>>>8&0xff;o[30]=x9>>>16&0xff;o[31]=x9>>>24&0xff;}
function crypto_core_salsa20(out,inp,k,c){core_salsa20(out,inp,k,c);}
function crypto_core_hsalsa20(out,inp,k,c){core_hsalsa20(out,inp,k,c);}
var sigma=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function crypto_stream_salsa20_xor(c,cpos,m,mpos,b,n,k){var z=new Uint8Array(16),x=new Uint8Array(64);var u,i;for(i=0;i<16;i++)z[i]=0;for(i=0;i<8;i++)z[i]=n[i];while(b>=64){crypto_core_salsa20(x,z,k,sigma);for(i=0;i<64;i++)c[cpos+i]=m[mpos+i]^x[i];u=1;for(i=8;i<16;i++){u=u+(z[i]&0xff)|0;z[i]=u&0xff;u>>>=8;}
b-=64;cpos+=64;mpos+=64;}
if(b>0){crypto_core_salsa20(x,z,k,sigma);for(i=0;i<b;i++)c[cpos+i]=m[mpos+i]^x[i];}
return 0;}
function crypto_stream_salsa20(c,cpos,b,n,k){var z=new Uint8Array(16),x=new Uint8Array(64);var u,i;for(i=0;i<16;i++)z[i]=0;for(i=0;i<8;i++)z[i]=n[i];while(b>=64){crypto_core_salsa20(x,z,k,sigma);for(i=0;i<64;i++)c[cpos+i]=x[i];u=1;for(i=8;i<16;i++){u=u+(z[i]&0xff)|0;z[i]=u&0xff;u>>>=8;}
b-=64;cpos+=64;}
if(b>0){crypto_core_salsa20(x,z,k,sigma);for(i=0;i<b;i++)c[cpos+i]=x[i];}
return 0;}
function crypto_stream(c,cpos,d,n,k){var s=new Uint8Array(32);crypto_core_hsalsa20(s,n,k,sigma);var sn=new Uint8Array(8);for(var i=0;i<8;i++)sn[i]=n[i+16];return crypto_stream_salsa20(c,cpos,d,sn,s);}
function crypto_stream_xor(c,cpos,m,mpos,d,n,k){var s=new Uint8Array(32);crypto_core_hsalsa20(s,n,k,sigma);var sn=new Uint8Array(8);for(var i=0;i<8;i++)sn[i]=n[i+16];return crypto_stream_salsa20_xor(c,cpos,m,mpos,d,sn,s);}
var poly1305=function(key){this.buffer=new Uint8Array(16);this.r=new Uint16Array(10);this.h=new Uint16Array(10);this.pad=new Uint16Array(8);this.leftover=0;this.fin=0;var t0,t1,t2,t3,t4,t5,t6,t7;t0=key[0]&0xff|(key[1]&0xff)<<8;this.r[0]=(t0)&0x1fff;t1=key[2]&0xff|(key[3]&0xff)<<8;this.r[1]=((t0>>>13)|(t1<<3))&0x1fff;t2=key[4]&0xff|(key[5]&0xff)<<8;this.r[2]=((t1>>>10)|(t2<<6))&0x1f03;t3=key[6]&0xff|(key[7]&0xff)<<8;this.r[3]=((t2>>>7)|(t3<<9))&0x1fff;t4=key[8]&0xff|(key[9]&0xff)<<8;this.r[4]=((t3>>>4)|(t4<<12))&0x00ff;this.r[5]=((t4>>>1))&0x1ffe;t5=key[10]&0xff|(key[11]&0xff)<<8;this.r[6]=((t4>>>14)|(t5<<2))&0x1fff;t6=key[12]&0xff|(key[13]&0xff)<<8;this.r[7]=((t5>>>11)|(t6<<5))&0x1f81;t7=key[14]&0xff|(key[15]&0xff)<<8;this.r[8]=((t6>>>8)|(t7<<8))&0x1fff;this.r[9]=((t7>>>5))&0x007f;this.pad[0]=key[16]&0xff|(key[17]&0xff)<<8;this.pad[1]=key[18]&0xff|(key[19]&0xff)<<8;this.pad[2]=key[20]&0xff|(key[21]&0xff)<<8;this.pad[3]=key[22]&0xff|(key[23]&0xff)<<8;this.pad[4]=key[24]&0xff|(key[25]&0xff)<<8;this.pad[5]=key[26]&0xff|(key[27]&0xff)<<8;this.pad[6]=key[28]&0xff|(key[29]&0xff)<<8;this.pad[7]=key[30]&0xff|(key[31]&0xff)<<8;};poly1305.prototype.blocks=function(m,mpos,bytes){var hibit=this.fin?0:(1<<11);var t0,t1,t2,t3,t4,t5,t6,t7,c;var d0,d1,d2,d3,d4,d5,d6,d7,d8,d9;var h0=this.h[0],h1=this.h[1],h2=this.h[2],h3=this.h[3],h4=this.h[4],h5=this.h[5],h6=this.h[6],h7=this.h[7],h8=this.h[8],h9=this.h[9];var r0=this.r[0],r1=this.r[1],r2=this.r[2],r3=this.r[3],r4=this.r[4],r5=this.r[5],r6=this.r[6],r7=this.r[7],r8=this.r[8],r9=this.r[9];while(bytes>=16){t0=m[mpos+0]&0xff|(m[mpos+1]&0xff)<<8;h0+=(t0)&0x1fff;t1=m[mpos+2]&0xff|(m[mpos+3]&0xff)<<8;h1+=((t0>>>13)|(t1<<3))&0x1fff;t2=m[mpos+4]&0xff|(m[mpos+5]&0xff)<<8;h2+=((t1>>>10)|(t2<<6))&0x1fff;t3=m[mpos+6]&0xff|(m[mpos+7]&0xff)<<8;h3+=((t2>>>7)|(t3<<9))&0x1fff;t4=m[mpos+8]&0xff|(m[mpos+9]&0xff)<<8;h4+=((t3>>>4)|(t4<<12))&0x1fff;h5+=((t4>>>1))&0x1fff;t5=m[mpos+10]&0xff|(m[mpos+11]&0xff)<<8;h6+=((t4>>>14)|(t5<<2))&0x1fff;t6=m[mpos+12]&0xff|(m[mpos+13]&0xff)<<8;h7+=((t5>>>11)|(t6<<5))&0x1fff;t7=m[mpos+14]&0xff|(m[mpos+15]&0xff)<<8;h8+=((t6>>>8)|(t7<<8))&0x1fff;h9+=((t7>>>5))|hibit;c=0;d0=c;d0+=h0*r0;d0+=h1*(5*r9);d0+=h2*(5*r8);d0+=h3*(5*r7);d0+=h4*(5*r6);c=(d0>>>13);d0&=0x1fff;d0+=h5*(5*r5);d0+=h6*(5*r4);d0+=h7*(5*r3);d0+=h8*(5*r2);d0+=h9*(5*r1);c+=(d0>>>13);d0&=0x1fff;d1=c;d1+=h0*r1;d1+=h1*r0;d1+=h2*(5*r9);d1+=h3*(5*r8);d1+=h4*(5*r7);c=(d1>>>13);d1&=0x1fff;d1+=h5*(5*r6);d1+=h6*(5*r5);d1+=h7*(5*r4);d1+=h8*(5*r3);d1+=h9*(5*r2);c+=(d1>>>13);d1&=0x1fff;d2=c;d2+=h0*r2;d2+=h1*r1;d2+=h2*r0;d2+=h3*(5*r9);d2+=h4*(5*r8);c=(d2>>>13);d2&=0x1fff;d2+=h5*(5*r7);d2+=h6*(5*r6);d2+=h7*(5*r5);d2+=h8*(5*r4);d2+=h9*(5*r3);c+=(d2>>>13);d2&=0x1fff;d3=c;d3+=h0*r3;d3+=h1*r2;d3+=h2*r1;d3+=h3*r0;d3+=h4*(5*r9);c=(d3>>>13);d3&=0x1fff;d3+=h5*(5*r8);d3+=h6*(5*r7);d3+=h7*(5*r6);d3+=h8*(5*r5);d3+=h9*(5*r4);c+=(d3>>>13);d3&=0x1fff;d4=c;d4+=h0*r4;d4+=h1*r3;d4+=h2*r2;d4+=h3*r1;d4+=h4*r0;c=(d4>>>13);d4&=0x1fff;d4+=h5*(5*r9);d4+=h6*(5*r8);d4+=h7*(5*r7);d4+=h8*(5*r6);d4+=h9*(5*r5);c+=(d4>>>13);d4&=0x1fff;d5=c;d5+=h0*r5;d5+=h1*r4;d5+=h2*r3;d5+=h3*r2;d5+=h4*r1;c=(d5>>>13);d5&=0x1fff;d5+=h5*r0;d5+=h6*(5*r9);d5+=h7*(5*r8);d5+=h8*(5*r7);d5+=h9*(5*r6);c+=(d5>>>13);d5&=0x1fff;d6=c;d6+=h0*r6;d6+=h1*r5;d6+=h2*r4;d6+=h3*r3;d6+=h4*r2;c=(d6>>>13);d6&=0x1fff;d6+=h5*r1;d6+=h6*r0;d6+=h7*(5*r9);d6+=h8*(5*r8);d6+=h9*(5*r7);c+=(d6>>>13);d6&=0x1fff;d7=c;d7+=h0*r7;d7+=h1*r6;d7+=h2*r5;d7+=h3*r4;d7+=h4*r3;c=(d7>>>13);d7&=0x1fff;d7+=h5*r2;d7+=h6*r1;d7+=h7*r0;d7+=h8*(5*r9);d7+=h9*(5*r8);c+=(d7>>>13);d7&=0x1fff;d8=c;d8+=h0*r8;d8+=h1*r7;d8+=h2*r6;d8+=h3*r5;d8+=h4*r4;c=(d8>>>13);d8&=0x1fff;d8+=h5*r3;d8+=h6*r2;d8+=h7*r1;d8+=h8*r0;d8+=h9*(5*r9);c+=(d8>>>13);d8&=0x1fff;d9=c;d9+=h0*r9;d9+=h1*r8;d9+=h2*r7;d9+=h3*r6;d9+=h4*r5;c=(d9>>>13);d9&=0x1fff;d9+=h5*r4;d9+=h6*r3;d9+=h7*r2;d9+=h8*r1;d9+=h9*r0;c+=(d9>>>13);d9&=0x1fff;c=(((c<<2)+c))|0;c=(c+d0)|0;d0=c&0x1fff;c=(c>>>13);d1+=c;h0=d0;h1=d1;h2=d2;h3=d3;h4=d4;h5=d5;h6=d6;h7=d7;h8=d8;h9=d9;mpos+=16;bytes-=16;}
this.h[0]=h0;this.h[1]=h1;this.h[2]=h2;this.h[3]=h3;this.h[4]=h4;this.h[5]=h5;this.h[6]=h6;this.h[7]=h7;this.h[8]=h8;this.h[9]=h9;};poly1305.prototype.finish=function(mac,macpos){var g=new Uint16Array(10);var c,mask,f,i;if(this.leftover){i=this.leftover;this.buffer[i++]=1;for(;i<16;i++)this.buffer[i]=0;this.fin=1;this.blocks(this.buffer,0,16);}
c=this.h[1]>>>13;this.h[1]&=0x1fff;for(i=2;i<10;i++){this.h[i]+=c;c=this.h[i]>>>13;this.h[i]&=0x1fff;}
this.h[0]+=(c*5);c=this.h[0]>>>13;this.h[0]&=0x1fff;this.h[1]+=c;c=this.h[1]>>>13;this.h[1]&=0x1fff;this.h[2]+=c;g[0]=this.h[0]+5;c=g[0]>>>13;g[0]&=0x1fff;for(i=1;i<10;i++){g[i]=this.h[i]+c;c=g[i]>>>13;g[i]&=0x1fff;}
g[9]-=(1<<13);mask=(c^1)-1;for(i=0;i<10;i++)g[i]&=mask;mask=~mask;for(i=0;i<10;i++)this.h[i]=(this.h[i]&mask)|g[i];this.h[0]=((this.h[0])|(this.h[1]<<13))&0xffff;this.h[1]=((this.h[1]>>>3)|(this.h[2]<<10))&0xffff;this.h[2]=((this.h[2]>>>6)|(this.h[3]<<7))&0xffff;this.h[3]=((this.h[3]>>>9)|(this.h[4]<<4))&0xffff;this.h[4]=((this.h[4]>>>12)|(this.h[5]<<1)|(this.h[6]<<14))&0xffff;this.h[5]=((this.h[6]>>>2)|(this.h[7]<<11))&0xffff;this.h[6]=((this.h[7]>>>5)|(this.h[8]<<8))&0xffff;this.h[7]=((this.h[8]>>>8)|(this.h[9]<<5))&0xffff;f=this.h[0]+this.pad[0];this.h[0]=f&0xffff;for(i=1;i<8;i++){f=(((this.h[i]+this.pad[i])|0)+(f>>>16))|0;this.h[i]=f&0xffff;}
mac[macpos+0]=(this.h[0]>>>0)&0xff;mac[macpos+1]=(this.h[0]>>>8)&0xff;mac[macpos+2]=(this.h[1]>>>0)&0xff;mac[macpos+3]=(this.h[1]>>>8)&0xff;mac[macpos+4]=(this.h[2]>>>0)&0xff;mac[macpos+5]=(this.h[2]>>>8)&0xff;mac[macpos+6]=(this.h[3]>>>0)&0xff;mac[macpos+7]=(this.h[3]>>>8)&0xff;mac[macpos+8]=(this.h[4]>>>0)&0xff;mac[macpos+9]=(this.h[4]>>>8)&0xff;mac[macpos+10]=(this.h[5]>>>0)&0xff;mac[macpos+11]=(this.h[5]>>>8)&0xff;mac[macpos+12]=(this.h[6]>>>0)&0xff;mac[macpos+13]=(this.h[6]>>>8)&0xff;mac[macpos+14]=(this.h[7]>>>0)&0xff;mac[macpos+15]=(this.h[7]>>>8)&0xff;};poly1305.prototype.update=function(m,mpos,bytes){var i,want;if(this.leftover){want=(16-this.leftover);if(want>bytes)
want=bytes;for(i=0;i<want;i++)
this.buffer[this.leftover+i]=m[mpos+i];bytes-=want;mpos+=want;this.leftover+=want;if(this.leftover<16)
return;this.blocks(this.buffer,0,16);this.leftover=0;}
if(bytes>=16){want=bytes-(bytes%16);this.blocks(m,mpos,want);mpos+=want;bytes-=want;}
if(bytes){for(i=0;i<bytes;i++)
this.buffer[this.leftover+i]=m[mpos+i];this.leftover+=bytes;}};function crypto_onetimeauth(out,outpos,m,mpos,n,k){var s=new poly1305(k);s.update(m,mpos,n);s.finish(out,outpos);return 0;}
function crypto_onetimeauth_verify(h,hpos,m,mpos,n,k){var x=new Uint8Array(16);crypto_onetimeauth(x,0,m,mpos,n,k);return crypto_verify_16(h,hpos,x,0);}
function crypto_secretbox(c,m,d,n,k){var i;if(d<32)return-1;crypto_stream_xor(c,0,m,0,d,n,k);crypto_onetimeauth(c,16,c,32,d-32,c);for(i=0;i<16;i++)c[i]=0;return 0;}
function crypto_secretbox_open(m,c,d,n,k){var i;var x=new Uint8Array(32);if(d<32)return-1;crypto_stream(x,0,32,n,k);if(crypto_onetimeauth_verify(c,16,c,32,d-32,x)!==0)return-1;crypto_stream_xor(m,0,c,0,d,n,k);for(i=0;i<32;i++)m[i]=0;return 0;}
function set25519(r,a){var i;for(i=0;i<16;i++)r[i]=a[i]|0;}
function car25519(o){var i,v,c=1;for(i=0;i<16;i++){v=o[i]+c+65535;c=Math.floor(v/65536);o[i]=v-c*65536;}
o[0]+=c-1+37*(c-1);}
function sel25519(p,q,b){var t,c=~(b-1);for(var i=0;i<16;i++){t=c&(p[i]^q[i]);p[i]^=t;q[i]^=t;}}
function pack25519(o,n){var i,j,b;var m=gf(),t=gf();for(i=0;i<16;i++)t[i]=n[i];car25519(t);car25519(t);car25519(t);for(j=0;j<2;j++){m[0]=t[0]-0xffed;for(i=1;i<15;i++){m[i]=t[i]-0xffff-((m[i-1]>>16)&1);m[i-1]&=0xffff;}
m[15]=t[15]-0x7fff-((m[14]>>16)&1);b=(m[15]>>16)&1;m[14]&=0xffff;sel25519(t,m,1-b);}
for(i=0;i<16;i++){o[2*i]=t[i]&0xff;o[2*i+1]=t[i]>>8;}}
function neq25519(a,b){var c=new Uint8Array(32),d=new Uint8Array(32);pack25519(c,a);pack25519(d,b);return crypto_verify_32(c,0,d,0);}
function par25519(a){var d=new Uint8Array(32);pack25519(d,a);return d[0]&1;}
function unpack25519(o,n){var i;for(i=0;i<16;i++)o[i]=n[2*i]+(n[2*i+1]<<8);o[15]&=0x7fff;}
function A(o,a,b){for(var i=0;i<16;i++)o[i]=a[i]+b[i];}
function Z(o,a,b){for(var i=0;i<16;i++)o[i]=a[i]-b[i];}
function M(o,a,b){var v,c,t0=0,t1=0,t2=0,t3=0,t4=0,t5=0,t6=0,t7=0,t8=0,t9=0,t10=0,t11=0,t12=0,t13=0,t14=0,t15=0,t16=0,t17=0,t18=0,t19=0,t20=0,t21=0,t22=0,t23=0,t24=0,t25=0,t26=0,t27=0,t28=0,t29=0,t30=0,b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=b[6],b7=b[7],b8=b[8],b9=b[9],b10=b[10],b11=b[11],b12=b[12],b13=b[13],b14=b[14],b15=b[15];v=a[0];t0+=v*b0;t1+=v*b1;t2+=v*b2;t3+=v*b3;t4+=v*b4;t5+=v*b5;t6+=v*b6;t7+=v*b7;t8+=v*b8;t9+=v*b9;t10+=v*b10;t11+=v*b11;t12+=v*b12;t13+=v*b13;t14+=v*b14;t15+=v*b15;v=a[1];t1+=v*b0;t2+=v*b1;t3+=v*b2;t4+=v*b3;t5+=v*b4;t6+=v*b5;t7+=v*b6;t8+=v*b7;t9+=v*b8;t10+=v*b9;t11+=v*b10;t12+=v*b11;t13+=v*b12;t14+=v*b13;t15+=v*b14;t16+=v*b15;v=a[2];t2+=v*b0;t3+=v*b1;t4+=v*b2;t5+=v*b3;t6+=v*b4;t7+=v*b5;t8+=v*b6;t9+=v*b7;t10+=v*b8;t11+=v*b9;t12+=v*b10;t13+=v*b11;t14+=v*b12;t15+=v*b13;t16+=v*b14;t17+=v*b15;v=a[3];t3+=v*b0;t4+=v*b1;t5+=v*b2;t6+=v*b3;t7+=v*b4;t8+=v*b5;t9+=v*b6;t10+=v*b7;t11+=v*b8;t12+=v*b9;t13+=v*b10;t14+=v*b11;t15+=v*b12;t16+=v*b13;t17+=v*b14;t18+=v*b15;v=a[4];t4+=v*b0;t5+=v*b1;t6+=v*b2;t7+=v*b3;t8+=v*b4;t9+=v*b5;t10+=v*b6;t11+=v*b7;t12+=v*b8;t13+=v*b9;t14+=v*b10;t15+=v*b11;t16+=v*b12;t17+=v*b13;t18+=v*b14;t19+=v*b15;v=a[5];t5+=v*b0;t6+=v*b1;t7+=v*b2;t8+=v*b3;t9+=v*b4;t10+=v*b5;t11+=v*b6;t12+=v*b7;t13+=v*b8;t14+=v*b9;t15+=v*b10;t16+=v*b11;t17+=v*b12;t18+=v*b13;t19+=v*b14;t20+=v*b15;v=a[6];t6+=v*b0;t7+=v*b1;t8+=v*b2;t9+=v*b3;t10+=v*b4;t11+=v*b5;t12+=v*b6;t13+=v*b7;t14+=v*b8;t15+=v*b9;t16+=v*b10;t17+=v*b11;t18+=v*b12;t19+=v*b13;t20+=v*b14;t21+=v*b15;v=a[7];t7+=v*b0;t8+=v*b1;t9+=v*b2;t10+=v*b3;t11+=v*b4;t12+=v*b5;t13+=v*b6;t14+=v*b7;t15+=v*b8;t16+=v*b9;t17+=v*b10;t18+=v*b11;t19+=v*b12;t20+=v*b13;t21+=v*b14;t22+=v*b15;v=a[8];t8+=v*b0;t9+=v*b1;t10+=v*b2;t11+=v*b3;t12+=v*b4;t13+=v*b5;t14+=v*b6;t15+=v*b7;t16+=v*b8;t17+=v*b9;t18+=v*b10;t19+=v*b11;t20+=v*b12;t21+=v*b13;t22+=v*b14;t23+=v*b15;v=a[9];t9+=v*b0;t10+=v*b1;t11+=v*b2;t12+=v*b3;t13+=v*b4;t14+=v*b5;t15+=v*b6;t16+=v*b7;t17+=v*b8;t18+=v*b9;t19+=v*b10;t20+=v*b11;t21+=v*b12;t22+=v*b13;t23+=v*b14;t24+=v*b15;v=a[10];t10+=v*b0;t11+=v*b1;t12+=v*b2;t13+=v*b3;t14+=v*b4;t15+=v*b5;t16+=v*b6;t17+=v*b7;t18+=v*b8;t19+=v*b9;t20+=v*b10;t21+=v*b11;t22+=v*b12;t23+=v*b13;t24+=v*b14;t25+=v*b15;v=a[11];t11+=v*b0;t12+=v*b1;t13+=v*b2;t14+=v*b3;t15+=v*b4;t16+=v*b5;t17+=v*b6;t18+=v*b7;t19+=v*b8;t20+=v*b9;t21+=v*b10;t22+=v*b11;t23+=v*b12;t24+=v*b13;t25+=v*b14;t26+=v*b15;v=a[12];t12+=v*b0;t13+=v*b1;t14+=v*b2;t15+=v*b3;t16+=v*b4;t17+=v*b5;t18+=v*b6;t19+=v*b7;t20+=v*b8;t21+=v*b9;t22+=v*b10;t23+=v*b11;t24+=v*b12;t25+=v*b13;t26+=v*b14;t27+=v*b15;v=a[13];t13+=v*b0;t14+=v*b1;t15+=v*b2;t16+=v*b3;t17+=v*b4;t18+=v*b5;t19+=v*b6;t20+=v*b7;t21+=v*b8;t22+=v*b9;t23+=v*b10;t24+=v*b11;t25+=v*b12;t26+=v*b13;t27+=v*b14;t28+=v*b15;v=a[14];t14+=v*b0;t15+=v*b1;t16+=v*b2;t17+=v*b3;t18+=v*b4;t19+=v*b5;t20+=v*b6;t21+=v*b7;t22+=v*b8;t23+=v*b9;t24+=v*b10;t25+=v*b11;t26+=v*b12;t27+=v*b13;t28+=v*b14;t29+=v*b15;v=a[15];t15+=v*b0;t16+=v*b1;t17+=v*b2;t18+=v*b3;t19+=v*b4;t20+=v*b5;t21+=v*b6;t22+=v*b7;t23+=v*b8;t24+=v*b9;t25+=v*b10;t26+=v*b11;t27+=v*b12;t28+=v*b13;t29+=v*b14;t30+=v*b15;t0+=38*t16;t1+=38*t17;t2+=38*t18;t3+=38*t19;t4+=38*t20;t5+=38*t21;t6+=38*t22;t7+=38*t23;t8+=38*t24;t9+=38*t25;t10+=38*t26;t11+=38*t27;t12+=38*t28;t13+=38*t29;t14+=38*t30;c=1;v=t0+c+65535;c=Math.floor(v/65536);t0=v-c*65536;v=t1+c+65535;c=Math.floor(v/65536);t1=v-c*65536;v=t2+c+65535;c=Math.floor(v/65536);t2=v-c*65536;v=t3+c+65535;c=Math.floor(v/65536);t3=v-c*65536;v=t4+c+65535;c=Math.floor(v/65536);t4=v-c*65536;v=t5+c+65535;c=Math.floor(v/65536);t5=v-c*65536;v=t6+c+65535;c=Math.floor(v/65536);t6=v-c*65536;v=t7+c+65535;c=Math.floor(v/65536);t7=v-c*65536;v=t8+c+65535;c=Math.floor(v/65536);t8=v-c*65536;v=t9+c+65535;c=Math.floor(v/65536);t9=v-c*65536;v=t10+c+65535;c=Math.floor(v/65536);t10=v-c*65536;v=t11+c+65535;c=Math.floor(v/65536);t11=v-c*65536;v=t12+c+65535;c=Math.floor(v/65536);t12=v-c*65536;v=t13+c+65535;c=Math.floor(v/65536);t13=v-c*65536;v=t14+c+65535;c=Math.floor(v/65536);t14=v-c*65536;v=t15+c+65535;c=Math.floor(v/65536);t15=v-c*65536;t0+=c-1+37*(c-1);c=1;v=t0+c+65535;c=Math.floor(v/65536);t0=v-c*65536;v=t1+c+65535;c=Math.floor(v/65536);t1=v-c*65536;v=t2+c+65535;c=Math.floor(v/65536);t2=v-c*65536;v=t3+c+65535;c=Math.floor(v/65536);t3=v-c*65536;v=t4+c+65535;c=Math.floor(v/65536);t4=v-c*65536;v=t5+c+65535;c=Math.floor(v/65536);t5=v-c*65536;v=t6+c+65535;c=Math.floor(v/65536);t6=v-c*65536;v=t7+c+65535;c=Math.floor(v/65536);t7=v-c*65536;v=t8+c+65535;c=Math.floor(v/65536);t8=v-c*65536;v=t9+c+65535;c=Math.floor(v/65536);t9=v-c*65536;v=t10+c+65535;c=Math.floor(v/65536);t10=v-c*65536;v=t11+c+65535;c=Math.floor(v/65536);t11=v-c*65536;v=t12+c+65535;c=Math.floor(v/65536);t12=v-c*65536;v=t13+c+65535;c=Math.floor(v/65536);t13=v-c*65536;v=t14+c+65535;c=Math.floor(v/65536);t14=v-c*65536;v=t15+c+65535;c=Math.floor(v/65536);t15=v-c*65536;t0+=c-1+37*(c-1);o[0]=t0;o[1]=t1;o[2]=t2;o[3]=t3;o[4]=t4;o[5]=t5;o[6]=t6;o[7]=t7;o[8]=t8;o[9]=t9;o[10]=t10;o[11]=t11;o[12]=t12;o[13]=t13;o[14]=t14;o[15]=t15;}
function S(o,a){M(o,a,a);}
function inv25519(o,i){var c=gf();var a;for(a=0;a<16;a++)c[a]=i[a];for(a=253;a>=0;a--){S(c,c);if(a!==2&&a!==4)M(c,c,i);}
for(a=0;a<16;a++)o[a]=c[a];}
function pow2523(o,i){var c=gf();var a;for(a=0;a<16;a++)c[a]=i[a];for(a=250;a>=0;a--){S(c,c);if(a!==1)M(c,c,i);}
for(a=0;a<16;a++)o[a]=c[a];}
function crypto_scalarmult(q,n,p){var z=new Uint8Array(32);var x=new Float64Array(80),r,i;var a=gf(),b=gf(),c=gf(),d=gf(),e=gf(),f=gf();for(i=0;i<31;i++)z[i]=n[i];z[31]=(n[31]&127)|64;z[0]&=248;unpack25519(x,p);for(i=0;i<16;i++){b[i]=x[i];d[i]=a[i]=c[i]=0;}
a[0]=d[0]=1;for(i=254;i>=0;--i){r=(z[i>>>3]>>>(i&7))&1;sel25519(a,b,r);sel25519(c,d,r);A(e,a,c);Z(a,a,c);A(c,b,d);Z(b,b,d);S(d,e);S(f,a);M(a,c,a);M(c,b,e);A(e,a,c);Z(a,a,c);S(b,a);Z(c,d,f);M(a,c,_121665);A(a,a,d);M(c,c,a);M(a,d,f);M(d,b,x);S(b,e);sel25519(a,b,r);sel25519(c,d,r);}
for(i=0;i<16;i++){x[i+16]=a[i];x[i+32]=c[i];x[i+48]=b[i];x[i+64]=d[i];}
var x32=x.subarray(32);var x16=x.subarray(16);inv25519(x32,x32);M(x16,x16,x32);pack25519(q,x16);return 0;}
function crypto_scalarmult_base(q,n){return crypto_scalarmult(q,n,_9);}
function crypto_box_keypair(y,x){randombytes(x,32);return crypto_scalarmult_base(y,x);}
function crypto_box_beforenm(k,y,x){var s=new Uint8Array(32);crypto_scalarmult(s,x,y);return crypto_core_hsalsa20(k,_0,s,sigma);}
var crypto_box_afternm=crypto_secretbox;var crypto_box_open_afternm=crypto_secretbox_open;function crypto_box(c,m,d,n,y,x){var k=new Uint8Array(32);crypto_box_beforenm(k,y,x);return crypto_box_afternm(c,m,d,n,k);}
function crypto_box_open(m,c,d,n,y,x){var k=new Uint8Array(32);crypto_box_beforenm(k,y,x);return crypto_box_open_afternm(m,c,d,n,k);}
var K=[0x428a2f98,0xd728ae22,0x71374491,0x23ef65cd,0xb5c0fbcf,0xec4d3b2f,0xe9b5dba5,0x8189dbbc,0x3956c25b,0xf348b538,0x59f111f1,0xb605d019,0x923f82a4,0xaf194f9b,0xab1c5ed5,0xda6d8118,0xd807aa98,0xa3030242,0x12835b01,0x45706fbe,0x243185be,0x4ee4b28c,0x550c7dc3,0xd5ffb4e2,0x72be5d74,0xf27b896f,0x80deb1fe,0x3b1696b1,0x9bdc06a7,0x25c71235,0xc19bf174,0xcf692694,0xe49b69c1,0x9ef14ad2,0xefbe4786,0x384f25e3,0x0fc19dc6,0x8b8cd5b5,0x240ca1cc,0x77ac9c65,0x2de92c6f,0x592b0275,0x4a7484aa,0x6ea6e483,0x5cb0a9dc,0xbd41fbd4,0x76f988da,0x831153b5,0x983e5152,0xee66dfab,0xa831c66d,0x2db43210,0xb00327c8,0x98fb213f,0xbf597fc7,0xbeef0ee4,0xc6e00bf3,0x3da88fc2,0xd5a79147,0x930aa725,0x06ca6351,0xe003826f,0x14292967,0x0a0e6e70,0x27b70a85,0x46d22ffc,0x2e1b2138,0x5c26c926,0x4d2c6dfc,0x5ac42aed,0x53380d13,0x9d95b3df,0x650a7354,0x8baf63de,0x766a0abb,0x3c77b2a8,0x81c2c92e,0x47edaee6,0x92722c85,0x1482353b,0xa2bfe8a1,0x4cf10364,0xa81a664b,0xbc423001,0xc24b8b70,0xd0f89791,0xc76c51a3,0x0654be30,0xd192e819,0xd6ef5218,0xd6990624,0x5565a910,0xf40e3585,0x5771202a,0x106aa070,0x32bbd1b8,0x19a4c116,0xb8d2d0c8,0x1e376c08,0x5141ab53,0x2748774c,0xdf8eeb99,0x34b0bcb5,0xe19b48a8,0x391c0cb3,0xc5c95a63,0x4ed8aa4a,0xe3418acb,0x5b9cca4f,0x7763e373,0x682e6ff3,0xd6b2b8a3,0x748f82ee,0x5defb2fc,0x78a5636f,0x43172f60,0x84c87814,0xa1f0ab72,0x8cc70208,0x1a6439ec,0x90befffa,0x23631e28,0xa4506ceb,0xde82bde9,0xbef9a3f7,0xb2c67915,0xc67178f2,0xe372532b,0xca273ece,0xea26619c,0xd186b8c7,0x21c0c207,0xeada7dd6,0xcde0eb1e,0xf57d4f7f,0xee6ed178,0x06f067aa,0x72176fba,0x0a637dc5,0xa2c898a6,0x113f9804,0xbef90dae,0x1b710b35,0x131c471b,0x28db77f5,0x23047d84,0x32caab7b,0x40c72493,0x3c9ebe0a,0x15c9bebc,0x431d67c4,0x9c100d4c,0x4cc5d4be,0xcb3e42b6,0x597f299c,0xfc657e2a,0x5fcb6fab,0x3ad6faec,0x6c44198c,0x4a475817];function crypto_hashblocks_hl(hh,hl,m,n){var wh=new Int32Array(16),wl=new Int32Array(16),bh0,bh1,bh2,bh3,bh4,bh5,bh6,bh7,bl0,bl1,bl2,bl3,bl4,bl5,bl6,bl7,th,tl,i,j,h,l,a,b,c,d;var ah0=hh[0],ah1=hh[1],ah2=hh[2],ah3=hh[3],ah4=hh[4],ah5=hh[5],ah6=hh[6],ah7=hh[7],al0=hl[0],al1=hl[1],al2=hl[2],al3=hl[3],al4=hl[4],al5=hl[5],al6=hl[6],al7=hl[7];var pos=0;while(n>=128){for(i=0;i<16;i++){j=8*i+pos;wh[i]=(m[j+0]<<24)|(m[j+1]<<16)|(m[j+2]<<8)|m[j+3];wl[i]=(m[j+4]<<24)|(m[j+5]<<16)|(m[j+6]<<8)|m[j+7];}
for(i=0;i<80;i++){bh0=ah0;bh1=ah1;bh2=ah2;bh3=ah3;bh4=ah4;bh5=ah5;bh6=ah6;bh7=ah7;bl0=al0;bl1=al1;bl2=al2;bl3=al3;bl4=al4;bl5=al5;bl6=al6;bl7=al7;h=ah7;l=al7;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=((ah4>>>14)|(al4<<(32-14)))^((ah4>>>18)|(al4<<(32-18)))^((al4>>>(41-32))|(ah4<<(32-(41-32))));l=((al4>>>14)|(ah4<<(32-14)))^((al4>>>18)|(ah4<<(32-18)))^((ah4>>>(41-32))|(al4<<(32-(41-32))));a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;h=(ah4&ah5)^(~ah4&ah6);l=(al4&al5)^(~al4&al6);a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;h=K[i*2];l=K[i*2+1];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;h=wh[i%16];l=wl[i%16];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;th=c&0xffff|d<<16;tl=a&0xffff|b<<16;h=th;l=tl;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=((ah0>>>28)|(al0<<(32-28)))^((al0>>>(34-32))|(ah0<<(32-(34-32))))^((al0>>>(39-32))|(ah0<<(32-(39-32))));l=((al0>>>28)|(ah0<<(32-28)))^((ah0>>>(34-32))|(al0<<(32-(34-32))))^((ah0>>>(39-32))|(al0<<(32-(39-32))));a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;h=(ah0&ah1)^(ah0&ah2)^(ah1&ah2);l=(al0&al1)^(al0&al2)^(al1&al2);a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;bh7=(c&0xffff)|(d<<16);bl7=(a&0xffff)|(b<<16);h=bh3;l=bl3;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=th;l=tl;a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;bh3=(c&0xffff)|(d<<16);bl3=(a&0xffff)|(b<<16);ah1=bh0;ah2=bh1;ah3=bh2;ah4=bh3;ah5=bh4;ah6=bh5;ah7=bh6;ah0=bh7;al1=bl0;al2=bl1;al3=bl2;al4=bl3;al5=bl4;al6=bl5;al7=bl6;al0=bl7;if(i%16===15){for(j=0;j<16;j++){h=wh[j];l=wl[j];a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=wh[(j+9)%16];l=wl[(j+9)%16];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;th=wh[(j+1)%16];tl=wl[(j+1)%16];h=((th>>>1)|(tl<<(32-1)))^((th>>>8)|(tl<<(32-8)))^(th>>>7);l=((tl>>>1)|(th<<(32-1)))^((tl>>>8)|(th<<(32-8)))^((tl>>>7)|(th<<(32-7)));a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;th=wh[(j+14)%16];tl=wl[(j+14)%16];h=((th>>>19)|(tl<<(32-19)))^((tl>>>(61-32))|(th<<(32-(61-32))))^(th>>>6);l=((tl>>>19)|(th<<(32-19)))^((th>>>(61-32))|(tl<<(32-(61-32))))^((tl>>>6)|(th<<(32-6)));a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;wh[j]=(c&0xffff)|(d<<16);wl[j]=(a&0xffff)|(b<<16);}}}
h=ah0;l=al0;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[0];l=hl[0];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[0]=ah0=(c&0xffff)|(d<<16);hl[0]=al0=(a&0xffff)|(b<<16);h=ah1;l=al1;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[1];l=hl[1];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[1]=ah1=(c&0xffff)|(d<<16);hl[1]=al1=(a&0xffff)|(b<<16);h=ah2;l=al2;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[2];l=hl[2];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[2]=ah2=(c&0xffff)|(d<<16);hl[2]=al2=(a&0xffff)|(b<<16);h=ah3;l=al3;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[3];l=hl[3];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[3]=ah3=(c&0xffff)|(d<<16);hl[3]=al3=(a&0xffff)|(b<<16);h=ah4;l=al4;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[4];l=hl[4];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[4]=ah4=(c&0xffff)|(d<<16);hl[4]=al4=(a&0xffff)|(b<<16);h=ah5;l=al5;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[5];l=hl[5];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[5]=ah5=(c&0xffff)|(d<<16);hl[5]=al5=(a&0xffff)|(b<<16);h=ah6;l=al6;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[6];l=hl[6];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[6]=ah6=(c&0xffff)|(d<<16);hl[6]=al6=(a&0xffff)|(b<<16);h=ah7;l=al7;a=l&0xffff;b=l>>>16;c=h&0xffff;d=h>>>16;h=hh[7];l=hl[7];a+=l&0xffff;b+=l>>>16;c+=h&0xffff;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[7]=ah7=(c&0xffff)|(d<<16);hl[7]=al7=(a&0xffff)|(b<<16);pos+=128;n-=128;}
return n;}
function crypto_hash(out,m,n){var hh=new Int32Array(8),hl=new Int32Array(8),x=new Uint8Array(256),i,b=n;hh[0]=0x6a09e667;hh[1]=0xbb67ae85;hh[2]=0x3c6ef372;hh[3]=0xa54ff53a;hh[4]=0x510e527f;hh[5]=0x9b05688c;hh[6]=0x1f83d9ab;hh[7]=0x5be0cd19;hl[0]=0xf3bcc908;hl[1]=0x84caa73b;hl[2]=0xfe94f82b;hl[3]=0x5f1d36f1;hl[4]=0xade682d1;hl[5]=0x2b3e6c1f;hl[6]=0xfb41bd6b;hl[7]=0x137e2179;crypto_hashblocks_hl(hh,hl,m,n);n%=128;for(i=0;i<n;i++)x[i]=m[b-n+i];x[n]=128;n=256-128*(n<112?1:0);x[n-9]=0;ts64(x,n-8,(b/0x20000000)|0,b<<3);crypto_hashblocks_hl(hh,hl,x,n);for(i=0;i<8;i++)ts64(out,8*i,hh[i],hl[i]);return 0;}
function add(p,q){var a=gf(),b=gf(),c=gf(),d=gf(),e=gf(),f=gf(),g=gf(),h=gf(),t=gf();Z(a,p[1],p[0]);Z(t,q[1],q[0]);M(a,a,t);A(b,p[0],p[1]);A(t,q[0],q[1]);M(b,b,t);M(c,p[3],q[3]);M(c,c,D2);M(d,p[2],q[2]);A(d,d,d);Z(e,b,a);Z(f,d,c);A(g,d,c);A(h,b,a);M(p[0],e,f);M(p[1],h,g);M(p[2],g,f);M(p[3],e,h);}
function cswap(p,q,b){var i;for(i=0;i<4;i++){sel25519(p[i],q[i],b);}}
function pack(r,p){var tx=gf(),ty=gf(),zi=gf();inv25519(zi,p[2]);M(tx,p[0],zi);M(ty,p[1],zi);pack25519(r,ty);r[31]^=par25519(tx)<<7;}
function scalarmult(p,q,s){var b,i;set25519(p[0],gf0);set25519(p[1],gf1);set25519(p[2],gf1);set25519(p[3],gf0);for(i=255;i>=0;--i){b=(s[(i/8)|0]>>(i&7))&1;cswap(p,q,b);add(q,p);add(p,p);cswap(p,q,b);}}
function scalarbase(p,s){var q=[gf(),gf(),gf(),gf()];set25519(q[0],X);set25519(q[1],Y);set25519(q[2],gf1);M(q[3],X,Y);scalarmult(p,q,s);}
function crypto_sign_keypair(pk,sk,seeded){var d=new Uint8Array(64);var p=[gf(),gf(),gf(),gf()];var i;if(!seeded)randombytes(sk,32);crypto_hash(d,sk,32);d[0]&=248;d[31]&=127;d[31]|=64;scalarbase(p,d);pack(pk,p);for(i=0;i<32;i++)sk[i+32]=pk[i];return 0;}
var L=new Float64Array([0xed,0xd3,0xf5,0x5c,0x1a,0x63,0x12,0x58,0xd6,0x9c,0xf7,0xa2,0xde,0xf9,0xde,0x14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x10]);function modL(r,x){var carry,i,j,k;for(i=63;i>=32;--i){carry=0;for(j=i-32,k=i-12;j<k;++j){x[j]+=carry-16*x[i]*L[j-(i-32)];carry=(x[j]+128)>>8;x[j]-=carry*256;}
x[j]+=carry;x[i]=0;}
carry=0;for(j=0;j<32;j++){x[j]+=carry-(x[31]>>4)*L[j];carry=x[j]>>8;x[j]&=255;}
for(j=0;j<32;j++)x[j]-=carry*L[j];for(i=0;i<32;i++){x[i+1]+=x[i]>>8;r[i]=x[i]&255;}}
function reduce(r){var x=new Float64Array(64),i;for(i=0;i<64;i++)x[i]=r[i];for(i=0;i<64;i++)r[i]=0;modL(r,x);}
function crypto_sign(sm,m,n,sk){var d=new Uint8Array(64),h=new Uint8Array(64),r=new Uint8Array(64);var i,j,x=new Float64Array(64);var p=[gf(),gf(),gf(),gf()];crypto_hash(d,sk,32);d[0]&=248;d[31]&=127;d[31]|=64;var smlen=n+64;for(i=0;i<n;i++)sm[64+i]=m[i];for(i=0;i<32;i++)sm[32+i]=d[32+i];crypto_hash(r,sm.subarray(32),n+32);reduce(r);scalarbase(p,r);pack(sm,p);for(i=32;i<64;i++)sm[i]=sk[i];crypto_hash(h,sm,n+64);reduce(h);for(i=0;i<64;i++)x[i]=0;for(i=0;i<32;i++)x[i]=r[i];for(i=0;i<32;i++){for(j=0;j<32;j++){x[i+j]+=h[i]*d[j];}}
modL(sm.subarray(32),x);return smlen;}
function unpackneg(r,p){var t=gf(),chk=gf(),num=gf(),den=gf(),den2=gf(),den4=gf(),den6=gf();set25519(r[2],gf1);unpack25519(r[1],p);S(num,r[1]);M(den,num,D);Z(num,num,r[2]);A(den,r[2],den);S(den2,den);S(den4,den2);M(den6,den4,den2);M(t,den6,num);M(t,t,den);pow2523(t,t);M(t,t,num);M(t,t,den);M(t,t,den);M(r[0],t,den);S(chk,r[0]);M(chk,chk,den);if(neq25519(chk,num))M(r[0],r[0],I);S(chk,r[0]);M(chk,chk,den);if(neq25519(chk,num))return-1;if(par25519(r[0])===(p[31]>>7))Z(r[0],gf0,r[0]);M(r[3],r[0],r[1]);return 0;}
function crypto_sign_open(m,sm,n,pk){var i,mlen;var t=new Uint8Array(32),h=new Uint8Array(64);var p=[gf(),gf(),gf(),gf()],q=[gf(),gf(),gf(),gf()];mlen=-1;if(n<64)return-1;if(unpackneg(q,pk))return-1;for(i=0;i<n;i++)m[i]=sm[i];for(i=0;i<32;i++)m[i+32]=pk[i];crypto_hash(h,m,n);reduce(h);scalarmult(p,q,h);scalarbase(q,sm.subarray(32));add(p,q);pack(t,p);n-=64;if(crypto_verify_32(sm,0,t,0)){for(i=0;i<n;i++)m[i]=0;return-1;}
for(i=0;i<n;i++)m[i]=sm[i+64];mlen=n;return mlen;}
var crypto_secretbox_KEYBYTES=32,crypto_secretbox_NONCEBYTES=24,crypto_secretbox_ZEROBYTES=32,crypto_secretbox_BOXZEROBYTES=16,crypto_scalarmult_BYTES=32,crypto_scalarmult_SCALARBYTES=32,crypto_box_PUBLICKEYBYTES=32,crypto_box_SECRETKEYBYTES=32,crypto_box_BEFORENMBYTES=32,crypto_box_NONCEBYTES=crypto_secretbox_NONCEBYTES,crypto_box_ZEROBYTES=crypto_secretbox_ZEROBYTES,crypto_box_BOXZEROBYTES=crypto_secretbox_BOXZEROBYTES,crypto_sign_BYTES=64,crypto_sign_PUBLICKEYBYTES=32,crypto_sign_SECRETKEYBYTES=64,crypto_sign_SEEDBYTES=32,crypto_hash_BYTES=64;nacl.lowlevel={crypto_core_hsalsa20:crypto_core_hsalsa20,crypto_stream_xor:crypto_stream_xor,crypto_stream:crypto_stream,crypto_stream_salsa20_xor:crypto_stream_salsa20_xor,crypto_stream_salsa20:crypto_stream_salsa20,crypto_onetimeauth:crypto_onetimeauth,crypto_onetimeauth_verify:crypto_onetimeauth_verify,crypto_verify_16:crypto_verify_16,crypto_verify_32:crypto_verify_32,crypto_secretbox:crypto_secretbox,crypto_secretbox_open:crypto_secretbox_open,crypto_scalarmult:crypto_scalarmult,crypto_scalarmult_base:crypto_scalarmult_base,crypto_box_beforenm:crypto_box_beforenm,crypto_box_afternm:crypto_box_afternm,crypto_box:crypto_box,crypto_box_open:crypto_box_open,crypto_box_keypair:crypto_box_keypair,crypto_hash:crypto_hash,crypto_sign:crypto_sign,crypto_sign_keypair:crypto_sign_keypair,crypto_sign_open:crypto_sign_open,crypto_secretbox_KEYBYTES:crypto_secretbox_KEYBYTES,crypto_secretbox_NONCEBYTES:crypto_secretbox_NONCEBYTES,crypto_secretbox_ZEROBYTES:crypto_secretbox_ZEROBYTES,crypto_secretbox_BOXZEROBYTES:crypto_secretbox_BOXZEROBYTES,crypto_scalarmult_BYTES:crypto_scalarmult_BYTES,crypto_scalarmult_SCALARBYTES:crypto_scalarmult_SCALARBYTES,crypto_box_PUBLICKEYBYTES:crypto_box_PUBLICKEYBYTES,crypto_box_SECRETKEYBYTES:crypto_box_SECRETKEYBYTES,crypto_box_BEFORENMBYTES:crypto_box_BEFORENMBYTES,crypto_box_NONCEBYTES:crypto_box_NONCEBYTES,crypto_box_ZEROBYTES:crypto_box_ZEROBYTES,crypto_box_BOXZEROBYTES:crypto_box_BOXZEROBYTES,crypto_sign_BYTES:crypto_sign_BYTES,crypto_sign_PUBLICKEYBYTES:crypto_sign_PUBLICKEYBYTES,crypto_sign_SECRETKEYBYTES:crypto_sign_SECRETKEYBYTES,crypto_sign_SEEDBYTES:crypto_sign_SEEDBYTES,crypto_hash_BYTES:crypto_hash_BYTES};function checkLengths(k,n){if(k.length!==crypto_secretbox_KEYBYTES)throw new Error('bad key size');if(n.length!==crypto_secretbox_NONCEBYTES)throw new Error('bad nonce size');}
function checkBoxLengths(pk,sk){if(pk.length!==crypto_box_PUBLICKEYBYTES)throw new Error('bad public key size');if(sk.length!==crypto_box_SECRETKEYBYTES)throw new Error('bad secret key size');}
function checkArrayTypes(){var t,i;for(i=0;i<arguments.length;i++){if((t=Object.prototype.toString.call(arguments[i]))!=='[object Uint8Array]')
throw new TypeError('unexpected type '+t+', use Uint8Array');}}
function cleanup(arr){for(var i=0;i<arr.length;i++)arr[i]=0;}
if(!nacl.util){nacl.util={};nacl.util.decodeUTF8=nacl.util.encodeUTF8=nacl.util.encodeBase64=nacl.util.decodeBase64=function(){throw new Error('nacl.util moved into separate package: https://github.com/dchest/tweetnacl-util-js');};}
nacl.randomBytes=function(n){var b=new Uint8Array(n);randombytes(b,n);return b;};nacl.secretbox=function(msg,nonce,key){checkArrayTypes(msg,nonce,key);checkLengths(key,nonce);var m=new Uint8Array(crypto_secretbox_ZEROBYTES+msg.length);var c=new Uint8Array(m.length);for(var i=0;i<msg.length;i++)m[i+crypto_secretbox_ZEROBYTES]=msg[i];crypto_secretbox(c,m,m.length,nonce,key);return c.subarray(crypto_secretbox_BOXZEROBYTES);};nacl.secretbox.open=function(box,nonce,key){checkArrayTypes(box,nonce,key);checkLengths(key,nonce);var c=new Uint8Array(crypto_secretbox_BOXZEROBYTES+box.length);var m=new Uint8Array(c.length);for(var i=0;i<box.length;i++)c[i+crypto_secretbox_BOXZEROBYTES]=box[i];if(c.length<32)return false;if(crypto_secretbox_open(m,c,c.length,nonce,key)!==0)return false;return m.subarray(crypto_secretbox_ZEROBYTES);};nacl.secretbox.keyLength=crypto_secretbox_KEYBYTES;nacl.secretbox.nonceLength=crypto_secretbox_NONCEBYTES;nacl.secretbox.overheadLength=crypto_secretbox_BOXZEROBYTES;nacl.scalarMult=function(n,p){checkArrayTypes(n,p);if(n.length!==crypto_scalarmult_SCALARBYTES)throw new Error('bad n size');if(p.length!==crypto_scalarmult_BYTES)throw new Error('bad p size');var q=new Uint8Array(crypto_scalarmult_BYTES);crypto_scalarmult(q,n,p);return q;};nacl.scalarMult.base=function(n){checkArrayTypes(n);if(n.length!==crypto_scalarmult_SCALARBYTES)throw new Error('bad n size');var q=new Uint8Array(crypto_scalarmult_BYTES);crypto_scalarmult_base(q,n);return q;};nacl.scalarMult.scalarLength=crypto_scalarmult_SCALARBYTES;nacl.scalarMult.groupElementLength=crypto_scalarmult_BYTES;nacl.box=function(msg,nonce,publicKey,secretKey){var k=nacl.box.before(publicKey,secretKey);return nacl.secretbox(msg,nonce,k);};nacl.box.before=function(publicKey,secretKey){checkArrayTypes(publicKey,secretKey);checkBoxLengths(publicKey,secretKey);var k=new Uint8Array(crypto_box_BEFORENMBYTES);crypto_box_beforenm(k,publicKey,secretKey);return k;};nacl.box.after=nacl.secretbox;nacl.box.open=function(msg,nonce,publicKey,secretKey){var k=nacl.box.before(publicKey,secretKey);return nacl.secretbox.open(msg,nonce,k);};nacl.box.open.after=nacl.secretbox.open;nacl.box.keyPair=function(){var pk=new Uint8Array(crypto_box_PUBLICKEYBYTES);var sk=new Uint8Array(crypto_box_SECRETKEYBYTES);crypto_box_keypair(pk,sk);return{publicKey:pk,secretKey:sk};};nacl.box.keyPair.fromSecretKey=function(secretKey){checkArrayTypes(secretKey);if(secretKey.length!==crypto_box_SECRETKEYBYTES)
throw new Error('bad secret key size');var pk=new Uint8Array(crypto_box_PUBLICKEYBYTES);crypto_scalarmult_base(pk,secretKey);return{publicKey:pk,secretKey:new Uint8Array(secretKey)};};nacl.box.publicKeyLength=crypto_box_PUBLICKEYBYTES;nacl.box.secretKeyLength=crypto_box_SECRETKEYBYTES;nacl.box.sharedKeyLength=crypto_box_BEFORENMBYTES;nacl.box.nonceLength=crypto_box_NONCEBYTES;nacl.box.overheadLength=nacl.secretbox.overheadLength;nacl.sign=function(msg,secretKey){checkArrayTypes(msg,secretKey);if(secretKey.length!==crypto_sign_SECRETKEYBYTES)
throw new Error('bad secret key size');var signedMsg=new Uint8Array(crypto_sign_BYTES+msg.length);crypto_sign(signedMsg,msg,msg.length,secretKey);return signedMsg;};nacl.sign.open=function(signedMsg,publicKey){if(arguments.length!==2)
throw new Error('nacl.sign.open accepts 2 arguments; did you mean to use nacl.sign.detached.verify?');checkArrayTypes(signedMsg,publicKey);if(publicKey.length!==crypto_sign_PUBLICKEYBYTES)
throw new Error('bad public key size');var tmp=new Uint8Array(signedMsg.length);var mlen=crypto_sign_open(tmp,signedMsg,signedMsg.length,publicKey);if(mlen<0)return null;var m=new Uint8Array(mlen);for(var i=0;i<m.length;i++)m[i]=tmp[i];return m;};nacl.sign.detached=function(msg,secretKey){var signedMsg=nacl.sign(msg,secretKey);var sig=new Uint8Array(crypto_sign_BYTES);for(var i=0;i<sig.length;i++)sig[i]=signedMsg[i];return sig;};nacl.sign.detached.verify=function(msg,sig,publicKey){checkArrayTypes(msg,sig,publicKey);if(sig.length!==crypto_sign_BYTES)
throw new Error('bad signature size');if(publicKey.length!==crypto_sign_PUBLICKEYBYTES)
throw new Error('bad public key size');var sm=new Uint8Array(crypto_sign_BYTES+msg.length);var m=new Uint8Array(crypto_sign_BYTES+msg.length);var i;for(i=0;i<crypto_sign_BYTES;i++)sm[i]=sig[i];for(i=0;i<msg.length;i++)sm[i+crypto_sign_BYTES]=msg[i];return(crypto_sign_open(m,sm,sm.length,publicKey)>=0);};nacl.sign.keyPair=function(){var pk=new Uint8Array(crypto_sign_PUBLICKEYBYTES);var sk=new Uint8Array(crypto_sign_SECRETKEYBYTES);crypto_sign_keypair(pk,sk);return{publicKey:pk,secretKey:sk};};nacl.sign.keyPair.fromSecretKey=function(secretKey){checkArrayTypes(secretKey);if(secretKey.length!==crypto_sign_SECRETKEYBYTES)
throw new Error('bad secret key size');var pk=new Uint8Array(crypto_sign_PUBLICKEYBYTES);for(var i=0;i<pk.length;i++)pk[i]=secretKey[32+i];return{publicKey:pk,secretKey:new Uint8Array(secretKey)};};nacl.sign.keyPair.fromSeed=function(seed){checkArrayTypes(seed);if(seed.length!==crypto_sign_SEEDBYTES)
throw new Error('bad seed size');var pk=new Uint8Array(crypto_sign_PUBLICKEYBYTES);var sk=new Uint8Array(crypto_sign_SECRETKEYBYTES);for(var i=0;i<32;i++)sk[i]=seed[i];crypto_sign_keypair(pk,sk,true);return{publicKey:pk,secretKey:sk};};nacl.sign.publicKeyLength=crypto_sign_PUBLICKEYBYTES;nacl.sign.secretKeyLength=crypto_sign_SECRETKEYBYTES;nacl.sign.seedLength=crypto_sign_SEEDBYTES;nacl.sign.signatureLength=crypto_sign_BYTES;nacl.hash=function(msg){checkArrayTypes(msg);var h=new Uint8Array(crypto_hash_BYTES);crypto_hash(h,msg,msg.length);return h;};nacl.hash.hashLength=crypto_hash_BYTES;nacl.verify=function(x,y){checkArrayTypes(x,y);if(x.length===0||y.length===0)return false;if(x.length!==y.length)return false;return(vn(x,0,y,0,x.length)===0)?true:false;};nacl.setPRNG=function(fn){randombytes=fn;};(function(){var crypto=typeof self!=='undefined'?(self.crypto||self.msCrypto):null;if(crypto&&crypto.getRandomValues){var QUOTA=65536;nacl.setPRNG(function(x,n){var i,v=new Uint8Array(n);for(i=0;i<n;i+=QUOTA){crypto.getRandomValues(v.subarray(i,i+Math.min(n-i,QUOTA)));}
for(i=0;i<n;i++)x[i]=v[i];cleanup(v);});}else if(true){crypto=__webpack_require__(832);if(crypto&&crypto.randomBytes){nacl.setPRNG(function(x,n){var i,v=crypto.randomBytes(n);for(i=0;i<n;i++)x[i]=v[i];cleanup(v);});}}})();})(typeof module!=='undefined'&&module.exports?module.exports:(self.nacl=self.nacl||{}));}),(function(module,exports){}),(function(module,exports,__webpack_require__){module.exports={read:read,verify:verify,sign:sign,signAsync:signAsync,write:write,fromBuffer:fromBuffer,toBuffer:toBuffer};var assert=__webpack_require__(15);var SSHBuffer=__webpack_require__(136);var crypto=__webpack_require__(24);var Buffer=__webpack_require__(21).Buffer;var algs=__webpack_require__(41);var Key=__webpack_require__(33);var PrivateKey=__webpack_require__(38);var Identity=__webpack_require__(139);var rfc4253=__webpack_require__(89);var Signature=__webpack_require__(78);var utils=__webpack_require__(34);var Certificate=__webpack_require__(138);function verify(cert,key){return(false);}
var TYPES={'user':1,'host':2};Object.keys(TYPES).forEach(function(k){TYPES[TYPES[k]]=k;});var ECDSA_ALGO=/^ecdsa-sha2-([^@-]+)-cert-v01@openssh.com$/;function read(buf,options){if(Buffer.isBuffer(buf))
buf=buf.toString('ascii');var parts=buf.trim().split(/[ \t\n]+/g);if(parts.length<2||parts.length>3)
throw(new Error('Not a valid SSH certificate line'));var algo=parts[0];var data=parts[1];data=Buffer.from(data,'base64');return(fromBuffer(data,algo));}
function fromBuffer(data,algo,partial){var sshbuf=new SSHBuffer({buffer:data});var innerAlgo=sshbuf.readString();if(algo!==undefined&&innerAlgo!==algo)
throw(new Error('SSH certificate algorithm mismatch'));if(algo===undefined)
algo=innerAlgo;var cert={};cert.signatures={};cert.signatures.openssh={};cert.signatures.openssh.nonce=sshbuf.readBuffer();var key={};var parts=(key.parts=[]);key.type=getAlg(algo);var partCount=algs.info[key.type].parts.length;while(parts.length<partCount)
parts.push(sshbuf.readPart());assert.ok(parts.length>=1,'key must have at least one part');var algInfo=algs.info[key.type];if(key.type==='ecdsa'){var res=ECDSA_ALGO.exec(algo);assert.ok(res!==null);assert.strictEqual(res[1],parts[0].data.toString());}
for(var i=0;i<algInfo.parts.length;++i){parts[i].name=algInfo.parts[i];if(parts[i].name!=='curve'&&algInfo.normalize!==false){var p=parts[i];p.data=utils.mpNormalize(p.data);}}
cert.subjectKey=new Key(key);cert.serial=sshbuf.readInt64();var type=TYPES[sshbuf.readInt()];assert.string(type,'valid cert type');cert.signatures.openssh.keyId=sshbuf.readString();var principals=[];var pbuf=sshbuf.readBuffer();var psshbuf=new SSHBuffer({buffer:pbuf});while(!psshbuf.atEnd())
principals.push(psshbuf.readString());if(principals.length===0)
principals=['*'];cert.subjects=principals.map(function(pr){if(type==='user')
return(Identity.forUser(pr));else if(type==='host')
return(Identity.forHost(pr));throw(new Error('Unknown identity type '+type));});cert.validFrom=int64ToDate(sshbuf.readInt64());cert.validUntil=int64ToDate(sshbuf.readInt64());var exts=[];var extbuf=new SSHBuffer({buffer:sshbuf.readBuffer()});var ext;while(!extbuf.atEnd()){ext={critical:true};ext.name=extbuf.readString();ext.data=extbuf.readBuffer();exts.push(ext);}
extbuf=new SSHBuffer({buffer:sshbuf.readBuffer()});while(!extbuf.atEnd()){ext={critical:false};ext.name=extbuf.readString();ext.data=extbuf.readBuffer();exts.push(ext);}
cert.signatures.openssh.exts=exts;sshbuf.readBuffer();var signingKeyBuf=sshbuf.readBuffer();cert.issuerKey=rfc4253.read(signingKeyBuf);cert.issuer=Identity.forHost('**');var sigBuf=sshbuf.readBuffer();cert.signatures.openssh.signature=Signature.parse(sigBuf,cert.issuerKey.type,'ssh');if(partial!==undefined){partial.remainder=sshbuf.remainder();partial.consumed=sshbuf._offset;}
return(new Certificate(cert));}
function int64ToDate(buf){var i=buf.readUInt32BE(0)*4294967296;i+=buf.readUInt32BE(4);var d=new Date();d.setTime(i*1000);d.sourceInt64=buf;return(d);}
function dateToInt64(date){if(date.sourceInt64!==undefined)
return(date.sourceInt64);var i=Math.round(date.getTime()/1000);var upper=Math.floor(i/4294967296);var lower=Math.floor(i%4294967296);var buf=Buffer.alloc(8);buf.writeUInt32BE(upper,0);buf.writeUInt32BE(lower,4);return(buf);}
function sign(cert,key){if(cert.signatures.openssh===undefined)
cert.signatures.openssh={};try{var blob=toBuffer(cert,true);}catch(e){delete(cert.signatures.openssh);return(false);}
var sig=cert.signatures.openssh;var hashAlgo=undefined;if(key.type==='rsa'||key.type==='dsa')
hashAlgo='sha1';var signer=key.createSign(hashAlgo);signer.write(blob);sig.signature=signer.sign();return(true);}
function signAsync(cert,signer,done){if(cert.signatures.openssh===undefined)
cert.signatures.openssh={};try{var blob=toBuffer(cert,true);}catch(e){delete(cert.signatures.openssh);done(e);return;}
var sig=cert.signatures.openssh;signer(blob,function(err,signature){if(err){done(err);return;}
try{signature.toBuffer('ssh');}catch(e){done(e);return;}
sig.signature=signature;done();});}
function write(cert,options){if(options===undefined)
options={};var blob=toBuffer(cert);var out=getCertType(cert.subjectKey)+' '+blob.toString('base64');if(options.comment)
out=out+' '+options.comment;return(out);}
function toBuffer(cert,noSig){assert.object(cert.signatures.openssh,'signature for openssh format');var sig=cert.signatures.openssh;if(sig.nonce===undefined)
sig.nonce=crypto.randomBytes(16);var buf=new SSHBuffer({});buf.writeString(getCertType(cert.subjectKey));buf.writeBuffer(sig.nonce);var key=cert.subjectKey;var algInfo=algs.info[key.type];algInfo.parts.forEach(function(part){buf.writePart(key.part[part]);});buf.writeInt64(cert.serial);var type=cert.subjects[0].type;assert.notStrictEqual(type,'unknown');cert.subjects.forEach(function(id){assert.strictEqual(id.type,type);});type=TYPES[type];buf.writeInt(type);if(sig.keyId===undefined){sig.keyId=cert.subjects[0].type+'_'+
(cert.subjects[0].uid||cert.subjects[0].hostname);}
buf.writeString(sig.keyId);var sub=new SSHBuffer({});cert.subjects.forEach(function(id){if(type===TYPES.host)
sub.writeString(id.hostname);else if(type===TYPES.user)
sub.writeString(id.uid);});buf.writeBuffer(sub.toBuffer());buf.writeInt64(dateToInt64(cert.validFrom));buf.writeInt64(dateToInt64(cert.validUntil));var exts=sig.exts;if(exts===undefined)
exts=[];var extbuf=new SSHBuffer({});exts.forEach(function(ext){if(ext.critical!==true)
return;extbuf.writeString(ext.name);extbuf.writeBuffer(ext.data);});buf.writeBuffer(extbuf.toBuffer());extbuf=new SSHBuffer({});exts.forEach(function(ext){if(ext.critical===true)
return;extbuf.writeString(ext.name);extbuf.writeBuffer(ext.data);});buf.writeBuffer(extbuf.toBuffer());buf.writeBuffer(Buffer.alloc(0));sub=rfc4253.write(cert.issuerKey);buf.writeBuffer(sub);if(!noSig)
buf.writeBuffer(sig.signature.toBuffer('ssh'));return(buf.toBuffer());}
function getAlg(certType){if(certType==='ssh-rsa-cert-v01@openssh.com')
return('rsa');if(certType==='ssh-dss-cert-v01@openssh.com')
return('dsa');if(certType.match(ECDSA_ALGO))
return('ecdsa');if(certType==='ssh-ed25519-cert-v01@openssh.com')
return('ed25519');throw(new Error('Unsupported cert type '+certType));}
function getCertType(key){if(key.type==='rsa')
return('ssh-rsa-cert-v01@openssh.com');if(key.type==='dsa')
return('ssh-dss-cert-v01@openssh.com');if(key.type==='ecdsa')
return('ecdsa-sha2-'+key.curve+'-cert-v01@openssh.com');if(key.type==='ed25519')
return('ssh-ed25519-cert-v01@openssh.com');throw(new Error('Unsupported key type '+key.type));}}),(function(module,exports,__webpack_require__){var x509=__webpack_require__(381);module.exports={read:read,verify:x509.verify,sign:x509.sign,write:write};var assert=__webpack_require__(15);var asn1=__webpack_require__(79);var Buffer=__webpack_require__(21).Buffer;var algs=__webpack_require__(41);var utils=__webpack_require__(34);var Key=__webpack_require__(33);var PrivateKey=__webpack_require__(38);var pem=__webpack_require__(88);var Identity=__webpack_require__(139);var Signature=__webpack_require__(78);var Certificate=__webpack_require__(138);function read(buf,options){if(typeof(buf)!=='string'){assert.buffer(buf,'buf');buf=buf.toString('ascii');}
var lines=buf.trim().split(/[\r\n]+/g);var m;var si=-1;while(!m&&si<lines.length){m=lines[++si].match(/[-]+[ ]*BEGIN CERTIFICATE[ ]*[-]+/);}
assert.ok(m,'invalid PEM header');var m2;var ei=lines.length;while(!m2&&ei>0){m2=lines[--ei].match(/[-]+[ ]*END CERTIFICATE[ ]*[-]+/);}
assert.ok(m2,'invalid PEM footer');lines=lines.slice(si,ei+1);var headers={};while(true){lines=lines.slice(1);m=lines[0].match(/^([A-Za-z0-9-]+): (.+)$/);if(!m)
break;headers[m[1].toLowerCase()]=m[2];}
lines=lines.slice(0,-1).join('');buf=Buffer.from(lines,'base64');return(x509.read(buf,options));}
function write(cert,options){var dbuf=x509.write(cert,options);var header='CERTIFICATE';var tmp=dbuf.toString('base64');var len=tmp.length+(tmp.length/64)+
18+16+header.length*2+10;var buf=Buffer.alloc(len);var o=0;o+=buf.write('-----BEGIN '+header+'-----\n',o);for(var i=0;i<tmp.length;){var limit=i+64;if(limit>tmp.length)
limit=tmp.length;o+=buf.write(tmp.slice(i,limit),o);buf[o++]=10;i=limit;}
o+=buf.write('-----END '+header+'-----\n',o);return(buf.slice(0,o));}}),(function(module,exports,__webpack_require__){(function(Buffer){var assert=__webpack_require__(15);var crypto=__webpack_require__(24);var http=__webpack_require__(133);var util=__webpack_require__(25);var sshpk=__webpack_require__(239);var jsprim=__webpack_require__(836);var utils=__webpack_require__(171);var sprintf=__webpack_require__(25).format;var HASH_ALGOS=utils.HASH_ALGOS;var PK_ALGOS=utils.PK_ALGOS;var InvalidAlgorithmError=utils.InvalidAlgorithmError;var HttpSignatureError=utils.HttpSignatureError;var validateAlgorithm=utils.validateAlgorithm;var AUTHZ_FMT='Signature keyId="%s",algorithm="%s",headers="%s",signature="%s"';function MissingHeaderError(message){HttpSignatureError.call(this,message,MissingHeaderError);}
util.inherits(MissingHeaderError,HttpSignatureError);function StrictParsingError(message){HttpSignatureError.call(this,message,StrictParsingError);}
util.inherits(StrictParsingError,HttpSignatureError);function RequestSigner(options){assert.object(options,'options');var alg=[];if(options.algorithm!==undefined){assert.string(options.algorithm,'options.algorithm');alg=validateAlgorithm(options.algorithm);}
this.rs_alg=alg;if(options.sign!==undefined){assert.func(options.sign,'options.sign');this.rs_signFunc=options.sign;}else if(alg[0]==='hmac'&&options.key!==undefined){assert.string(options.keyId,'options.keyId');this.rs_keyId=options.keyId;if(typeof(options.key)!=='string'&&!Buffer.isBuffer(options.key))
throw(new TypeError('options.key for HMAC must be a string or Buffer'));this.rs_signer=crypto.createHmac(alg[1].toUpperCase(),options.key);this.rs_signer.sign=function(){var digest=this.digest('base64');return({hashAlgorithm:alg[1],toString:function(){return(digest);}});};}else if(options.key!==undefined){var key=options.key;if(typeof(key)==='string'||Buffer.isBuffer(key))
key=sshpk.parsePrivateKey(key);assert.ok(sshpk.PrivateKey.isPrivateKey(key,[1,2]),'options.key must be a sshpk.PrivateKey');this.rs_key=key;assert.string(options.keyId,'options.keyId');this.rs_keyId=options.keyId;if(!PK_ALGOS[key.type]){throw(new InvalidAlgorithmError(key.type.toUpperCase()+' type '+
'keys are not supported'));}
if(alg[0]!==undefined&&key.type!==alg[0]){throw(new InvalidAlgorithmError('options.key must be a '+
alg[0].toUpperCase()+' key, was given a '+
key.type.toUpperCase()+' key instead'));}
this.rs_signer=key.createSign(alg[1]);}else{throw(new TypeError('options.sign (func) or options.key is required'));}
this.rs_headers=[];this.rs_lines=[];}
RequestSigner.prototype.writeHeader=function(header,value){assert.string(header,'header');header=header.toLowerCase();assert.string(value,'value');this.rs_headers.push(header);if(this.rs_signFunc){this.rs_lines.push(header+': '+value);}else{var line=header+': '+value;if(this.rs_headers.length>0)
line='\n'+line;this.rs_signer.update(line);}
return(value);};RequestSigner.prototype.writeDateHeader=function(){return(this.writeHeader('date',jsprim.rfc1123(new Date())));};RequestSigner.prototype.writeTarget=function(method,path){assert.string(method,'method');assert.string(path,'path');method=method.toLowerCase();this.writeHeader('(request-target)',method+' '+path);};RequestSigner.prototype.sign=function(cb){assert.func(cb,'callback');if(this.rs_headers.length<1)
throw(new Error('At least one header must be signed'));var alg,authz;if(this.rs_signFunc){var data=this.rs_lines.join('\n');var self=this;this.rs_signFunc(data,function(err,sig){if(err){cb(err);return;}
try{assert.object(sig,'signature');assert.string(sig.keyId,'signature.keyId');assert.string(sig.algorithm,'signature.algorithm');assert.string(sig.signature,'signature.signature');alg=validateAlgorithm(sig.algorithm);authz=sprintf(AUTHZ_FMT,sig.keyId,sig.algorithm,self.rs_headers.join(' '),sig.signature);}catch(e){cb(e);return;}
cb(null,authz);});}else{try{var sigObj=this.rs_signer.sign();}catch(e){cb(e);return;}
alg=(this.rs_alg[0]||this.rs_key.type)+'-'+sigObj.hashAlgorithm;var signature=sigObj.toString();authz=sprintf(AUTHZ_FMT,this.rs_keyId,alg,this.rs_headers.join(' '),signature);cb(null,authz);}};module.exports={isSigner:function(obj){if(typeof(obj)==='object'&&obj instanceof RequestSigner)
return(true);return(false);},createSigner:function createSigner(options){return(new RequestSigner(options));},signRequest:function signRequest(request,options){assert.object(request,'request');assert.object(options,'options');assert.optionalString(options.algorithm,'options.algorithm');assert.string(options.keyId,'options.keyId');assert.optionalArrayOfString(options.headers,'options.headers');assert.optionalString(options.httpVersion,'options.httpVersion');if(!request.getHeader('Date'))
request.setHeader('Date',jsprim.rfc1123(new Date()));if(!options.headers)
options.headers=['date'];if(!options.httpVersion)
options.httpVersion='1.1';var alg=[];if(options.algorithm){options.algorithm=options.algorithm.toLowerCase();alg=validateAlgorithm(options.algorithm);}
var i;var stringToSign='';for(i=0;i<options.headers.length;i++){if(typeof(options.headers[i])!=='string')
throw new TypeError('options.headers must be an array of Strings');var h=options.headers[i].toLowerCase();if(h==='request-line'){if(!options.strict){stringToSign+=request.method+' '+request.path+' HTTP/'+
options.httpVersion;}else{throw(new StrictParsingError('request-line is not a valid header '+
'with strict parsing enabled.'));}}else if(h==='(request-target)'){stringToSign+='(request-target): '+request.method.toLowerCase()+' '+
request.path;}else{var value=request.getHeader(h);if(value===undefined||value===''){throw new MissingHeaderError(h+' was not in the request');}
stringToSign+=h+': '+value;}
if((i+1)<options.headers.length)
stringToSign+='\n';}
if(request.hasOwnProperty('_stringToSign')){request._stringToSign=stringToSign;}
var signature;if(alg[0]==='hmac'){if(typeof(options.key)!=='string'&&!Buffer.isBuffer(options.key))
throw(new TypeError('options.key must be a string or Buffer'));var hmac=crypto.createHmac(alg[1].toUpperCase(),options.key);hmac.update(stringToSign);signature=hmac.digest('base64');}else{var key=options.key;if(typeof(key)==='string'||Buffer.isBuffer(key))
key=sshpk.parsePrivateKey(options.key);assert.ok(sshpk.PrivateKey.isPrivateKey(key,[1,2]),'options.key must be a sshpk.PrivateKey');if(!PK_ALGOS[key.type]){throw(new InvalidAlgorithmError(key.type.toUpperCase()+' type '+
'keys are not supported'));}
if(alg[0]!==undefined&&key.type!==alg[0]){throw(new InvalidAlgorithmError('options.key must be a '+
alg[0].toUpperCase()+' key, was given a '+
key.type.toUpperCase()+' key instead'));}
var signer=key.createSign(alg[1]);signer.update(stringToSign);var sigObj=signer.sign();if(!HASH_ALGOS[sigObj.hashAlgorithm]){throw(new InvalidAlgorithmError(sigObj.hashAlgorithm.toUpperCase()+
' is not a supported hash algorithm'));}
options.algorithm=key.type+'-'+sigObj.hashAlgorithm;signature=sigObj.toString();assert.notStrictEqual(signature,'','empty signature produced');}
var authzHeaderName=options.authorizationHeaderName||'Authorization';request.setHeader(authzHeaderName,sprintf(AUTHZ_FMT,options.keyId,options.algorithm,options.headers.join(' '),signature));return true;}};}.call(exports,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){var mod_assert=__webpack_require__(15);var mod_util=__webpack_require__(25);var mod_extsprintf=__webpack_require__(382);var mod_verror=__webpack_require__(837);var mod_jsonschema=__webpack_require__(838);exports.deepCopy=deepCopy;exports.deepEqual=deepEqual;exports.isEmpty=isEmpty;exports.hasKey=hasKey;exports.forEachKey=forEachKey;exports.pluck=pluck;exports.flattenObject=flattenObject;exports.flattenIter=flattenIter;exports.validateJsonObject=validateJsonObjectJS;exports.validateJsonObjectJS=validateJsonObjectJS;exports.randElt=randElt;exports.extraProperties=extraProperties;exports.mergeObjects=mergeObjects;exports.startsWith=startsWith;exports.endsWith=endsWith;exports.parseInteger=parseInteger;exports.iso8601=iso8601;exports.rfc1123=rfc1123;exports.parseDateTime=parseDateTime;exports.hrtimediff=hrtimeDiff;exports.hrtimeDiff=hrtimeDiff;exports.hrtimeAccum=hrtimeAccum;exports.hrtimeAdd=hrtimeAdd;exports.hrtimeNanosec=hrtimeNanosec;exports.hrtimeMicrosec=hrtimeMicrosec;exports.hrtimeMillisec=hrtimeMillisec;function deepCopy(obj)
{var ret,key;var marker='__deepCopy';if(obj&&obj[marker])
throw(new Error('attempted deep copy of cyclic object'));if(obj&&obj.constructor==Object){ret={};obj[marker]=true;for(key in obj){if(key==marker)
continue;ret[key]=deepCopy(obj[key]);}
delete(obj[marker]);return(ret);}
if(obj&&obj.constructor==Array){ret=[];obj[marker]=true;for(key=0;key<obj.length;key++)
ret.push(deepCopy(obj[key]));delete(obj[marker]);return(ret);}
return(obj);}
function deepEqual(obj1,obj2)
{if(typeof(obj1)!=typeof(obj2))
return(false);if(obj1===null||obj2===null||typeof(obj1)!='object')
return(obj1===obj2);if(obj1.constructor!=obj2.constructor)
return(false);var k;for(k in obj1){if(!obj2.hasOwnProperty(k))
return(false);if(!deepEqual(obj1[k],obj2[k]))
return(false);}
for(k in obj2){if(!obj1.hasOwnProperty(k))
return(false);}
return(true);}
function isEmpty(obj)
{var key;for(key in obj)
return(false);return(true);}
function hasKey(obj,key)
{mod_assert.equal(typeof(key),'string');return(Object.prototype.hasOwnProperty.call(obj,key));}
function forEachKey(obj,callback)
{for(var key in obj){if(hasKey(obj,key)){callback(key,obj[key]);}}}
function pluck(obj,key)
{mod_assert.equal(typeof(key),'string');return(pluckv(obj,key));}
function pluckv(obj,key)
{if(obj===null||typeof(obj)!=='object')
return(undefined);if(obj.hasOwnProperty(key))
return(obj[key]);var i=key.indexOf('.');if(i==-1)
return(undefined);var key1=key.substr(0,i);if(!obj.hasOwnProperty(key1))
return(undefined);return(pluckv(obj[key1],key.substr(i+1)));}
function flattenIter(data,depth,callback)
{doFlattenIter(data,depth,[],callback);}
function doFlattenIter(data,depth,accum,callback)
{var each;var key;if(depth===0){each=accum.slice(0);each.push(data);callback(each);return;}
mod_assert.ok(data!==null);mod_assert.equal(typeof(data),'object');mod_assert.equal(typeof(depth),'number');mod_assert.ok(depth>=0);for(key in data){each=accum.slice(0);each.push(key);doFlattenIter(data[key],depth-1,each,callback);}}
function flattenObject(data,depth)
{if(depth===0)
return([data]);mod_assert.ok(data!==null);mod_assert.equal(typeof(data),'object');mod_assert.equal(typeof(depth),'number');mod_assert.ok(depth>=0);var rv=[];var key;for(key in data){flattenObject(data[key],depth-1).forEach(function(p){rv.push([key].concat(p));});}
return(rv);}
function startsWith(str,prefix)
{return(str.substr(0,prefix.length)==prefix);}
function endsWith(str,suffix)
{return(str.substr(str.length-suffix.length,suffix.length)==suffix);}
function iso8601(d)
{if(typeof(d)=='number')
d=new Date(d);mod_assert.ok(d.constructor===Date);return(mod_extsprintf.sprintf('%4d-%02d-%02dT%02d:%02d:%02d.%03dZ',d.getUTCFullYear(),d.getUTCMonth()+1,d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()));}
var RFC1123_MONTHS=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];var RFC1123_DAYS=['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];function rfc1123(date){return(mod_extsprintf.sprintf('%s, %02d %s %04d %02d:%02d:%02d GMT',RFC1123_DAYS[date.getUTCDay()],date.getUTCDate(),RFC1123_MONTHS[date.getUTCMonth()],date.getUTCFullYear(),date.getUTCHours(),date.getUTCMinutes(),date.getUTCSeconds()));}
function parseDateTime(str)
{var numeric=+str;if(!isNaN(numeric)){return(new Date(numeric));}else{return(new Date(str));}}
var MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||9007199254740991;var MIN_SAFE_INTEGER=Number.MIN_SAFE_INTEGER||-9007199254740991;var PI_DEFAULTS={base:10,allowSign:true,allowPrefix:false,allowTrailing:false,allowImprecise:false,trimWhitespace:false,leadingZeroIsOctal:false};var CP_0=0x30;var CP_9=0x39;var CP_A=0x41;var CP_B=0x42;var CP_O=0x4f;var CP_T=0x54;var CP_X=0x58;var CP_Z=0x5a;var CP_a=0x61;var CP_b=0x62;var CP_o=0x6f;var CP_t=0x74;var CP_x=0x78;var CP_z=0x7a;var PI_CONV_DEC=0x30;var PI_CONV_UC=0x37;var PI_CONV_LC=0x57;function parseInteger(str,uopts)
{mod_assert.string(str,'str');mod_assert.optionalObject(uopts,'options');var baseOverride=false;var options=PI_DEFAULTS;if(uopts){baseOverride=hasKey(uopts,'base');options=mergeObjects(options,uopts);mod_assert.number(options.base,'options.base');mod_assert.ok(options.base>=2,'options.base >= 2');mod_assert.ok(options.base<=36,'options.base <= 36');mod_assert.bool(options.allowSign,'options.allowSign');mod_assert.bool(options.allowPrefix,'options.allowPrefix');mod_assert.bool(options.allowTrailing,'options.allowTrailing');mod_assert.bool(options.allowImprecise,'options.allowImprecise');mod_assert.bool(options.trimWhitespace,'options.trimWhitespace');mod_assert.bool(options.leadingZeroIsOctal,'options.leadingZeroIsOctal');if(options.leadingZeroIsOctal){mod_assert.ok(!baseOverride,'"base" and "leadingZeroIsOctal" are '+
'mutually exclusive');}}
var c;var pbase=-1;var base=options.base;var start;var mult=1;var value=0;var idx=0;var len=str.length;if(options.trimWhitespace){while(idx<len&&isSpace(str.charCodeAt(idx))){++idx;}}
if(options.allowSign){if(str[idx]==='-'){idx+=1;mult=-1;}else if(str[idx]==='+'){idx+=1;}}
if(str[idx]==='0'){if(options.allowPrefix){pbase=prefixToBase(str.charCodeAt(idx+1));if(pbase!==-1&&(!baseOverride||pbase===base)){base=pbase;idx+=2;}}
if(pbase===-1&&options.leadingZeroIsOctal){base=8;}}
for(start=idx;idx<len;++idx){c=translateDigit(str.charCodeAt(idx));if(c!==-1&&c<base){value*=base;value+=c;}else{break;}}
if(start===idx){return(new Error('invalid number: '+JSON.stringify(str)));}
if(options.trimWhitespace){while(idx<len&&isSpace(str.charCodeAt(idx))){++idx;}}
if(idx<len&&!options.allowTrailing){return(new Error('trailing characters after number: '+
JSON.stringify(str.slice(idx))));}
if(value===0){return(0);}
var result=value*mult;if(!options.allowImprecise&&(value>MAX_SAFE_INTEGER||result<MIN_SAFE_INTEGER)){return(new Error('number is outside of the supported range: '+
JSON.stringify(str.slice(start,idx))));}
return(result);}
function translateDigit(d)
{if(d>=CP_0&&d<=CP_9){return(d-PI_CONV_DEC);}else if(d>=CP_A&&d<=CP_Z){return(d-PI_CONV_UC);}else if(d>=CP_a&&d<=CP_z){return(d-PI_CONV_LC);}else{return(-1);}}
function isSpace(c)
{return(c===0x20)||(c>=0x0009&&c<=0x000d)||(c===0x00a0)||(c===0x1680)||(c===0x180e)||(c>=0x2000&&c<=0x200a)||(c===0x2028)||(c===0x2029)||(c===0x202f)||(c===0x205f)||(c===0x3000)||(c===0xfeff);}
function prefixToBase(c)
{if(c===CP_b||c===CP_B){return(2);}else if(c===CP_o||c===CP_O){return(8);}else if(c===CP_t||c===CP_T){return(10);}else if(c===CP_x||c===CP_X){return(16);}else{return(-1);}}
function validateJsonObjectJS(schema,input)
{var report=mod_jsonschema.validate(input,schema);if(report.errors.length===0)
return(null);var error=report.errors[0];var propname=error['property'];var reason=error['message'].toLowerCase();var i,j;if((i=reason.indexOf('the property '))!=-1&&(j=reason.indexOf(' is not defined in the schema and the '+
'schema does not allow additional properties'))!=-1){i+='the property '.length;if(propname==='')
propname=reason.substr(i,j-i);else
propname=propname+'.'+reason.substr(i,j-i);reason='unsupported property';}
var rv=new mod_verror.VError('property "%s": %s',propname,reason);rv.jsv_details=error;return(rv);}
function randElt(arr)
{mod_assert.ok(Array.isArray(arr)&&arr.length>0,'randElt argument must be a non-empty array');return(arr[Math.floor(Math.random()*arr.length)]);}
function assertHrtime(a)
{mod_assert.ok(a[0]>=0&&a[1]>=0,'negative numbers not allowed in hrtimes');mod_assert.ok(a[1]<1e9,'nanoseconds column overflow');}
function hrtimeDiff(a,b)
{assertHrtime(a);assertHrtime(b);mod_assert.ok(a[0]>b[0]||(a[0]==b[0]&&a[1]>=b[1]),'negative differences not allowed');var rv=[a[0]-b[0],0];if(a[1]>=b[1]){rv[1]=a[1]-b[1];}else{rv[0]--;rv[1]=1e9-(b[1]-a[1]);}
return(rv);}
function hrtimeNanosec(a)
{assertHrtime(a);return(Math.floor(a[0]*1e9+a[1]));}
function hrtimeMicrosec(a)
{assertHrtime(a);return(Math.floor(a[0]*1e6+a[1]/1e3));}
function hrtimeMillisec(a)
{assertHrtime(a);return(Math.floor(a[0]*1e3+a[1]/1e6));}
function hrtimeAccum(a,b)
{assertHrtime(a);assertHrtime(b);a[1]+=b[1];if(a[1]>=1e9){a[0]++;a[1]-=1e9;}
a[0]+=b[0];return(a);}
function hrtimeAdd(a,b)
{assertHrtime(a);var rv=[a[0],a[1]];return(hrtimeAccum(rv,b));}
function extraProperties(obj,allowed)
{mod_assert.ok(typeof(obj)==='object'&&obj!==null,'obj argument must be a non-null object');mod_assert.ok(Array.isArray(allowed),'allowed argument must be an array of strings');for(var i=0;i<allowed.length;i++){mod_assert.ok(typeof(allowed[i])==='string','allowed argument must be an array of strings');}
return(Object.keys(obj).filter(function(key){return(allowed.indexOf(key)===-1);}));}
function mergeObjects(provided,overrides,defaults)
{var rv,k;rv={};if(defaults){for(k in defaults)
rv[k]=defaults[k];}
if(provided){for(k in provided)
rv[k]=provided[k];}
if(overrides){for(k in overrides)
rv[k]=overrides[k];}
return(rv);}}),(function(module,exports,__webpack_require__){var mod_assertplus=__webpack_require__(15);var mod_util=__webpack_require__(25);var mod_extsprintf=__webpack_require__(382);var mod_isError=__webpack_require__(114).isError;var sprintf=mod_extsprintf.sprintf;module.exports=VError;VError.VError=VError;VError.SError=SError;VError.WError=WError;VError.MultiError=MultiError;function parseConstructorArguments(args)
{var argv,options,sprintf_args,shortmessage,k;mod_assertplus.object(args,'args');mod_assertplus.bool(args.strict,'args.strict');mod_assertplus.array(args.argv,'args.argv');argv=args.argv;if(argv.length===0){options={};sprintf_args=[];}else if(mod_isError(argv[0])){options={'cause':argv[0]};sprintf_args=argv.slice(1);}else if(typeof(argv[0])==='object'){options={};for(k in argv[0]){options[k]=argv[0][k];}
sprintf_args=argv.slice(1);}else{mod_assertplus.string(argv[0],'first argument to VError, SError, or WError '+
'constructor must be a string, object, or Error');options={};sprintf_args=argv;}
mod_assertplus.object(options);if(!options.strict&&!args.strict){sprintf_args=sprintf_args.map(function(a){return(a===null?'null':a===undefined?'undefined':a);});}
if(sprintf_args.length===0){shortmessage='';}else{shortmessage=sprintf.apply(null,sprintf_args);}
return({'options':options,'shortmessage':shortmessage});}
function VError()
{var args,obj,parsed,cause,ctor,message,k;args=Array.prototype.slice.call(arguments,0);if(!(this instanceof VError)){obj=Object.create(VError.prototype);VError.apply(obj,arguments);return(obj);}
parsed=parseConstructorArguments({'argv':args,'strict':false});if(parsed.options.name){mod_assertplus.string(parsed.options.name,'error\'s "name" must be a string');this.name=parsed.options.name;}
this.jse_shortmsg=parsed.shortmessage;message=parsed.shortmessage;cause=parsed.options.cause;if(cause){mod_assertplus.ok(mod_isError(cause),'cause is not an Error');this.jse_cause=cause;if(!parsed.options.skipCauseMessage){message+=': '+cause.message;}}
this.jse_info={};if(parsed.options.info){for(k in parsed.options.info){this.jse_info[k]=parsed.options.info[k];}}
this.message=message;Error.call(this,message);if(Error.captureStackTrace){ctor=parsed.options.constructorOpt||this.constructor;Error.captureStackTrace(this,ctor);}
return(this);}
mod_util.inherits(VError,Error);VError.prototype.name='VError';VError.prototype.toString=function ve_toString()
{var str=(this.hasOwnProperty('name')&&this.name||this.constructor.name||this.constructor.prototype.name);if(this.message)
str+=': '+this.message;return(str);};VError.prototype.cause=function ve_cause()
{var cause=VError.cause(this);return(cause===null?undefined:cause);};VError.cause=function(err)
{mod_assertplus.ok(mod_isError(err),'err must be an Error');return(mod_isError(err.jse_cause)?err.jse_cause:null);};VError.info=function(err)
{var rv,cause,k;mod_assertplus.ok(mod_isError(err),'err must be an Error');cause=VError.cause(err);if(cause!==null){rv=VError.info(cause);}else{rv={};}
if(typeof(err.jse_info)=='object'&&err.jse_info!==null){for(k in err.jse_info){rv[k]=err.jse_info[k];}}
return(rv);};VError.findCauseByName=function(err,name)
{var cause;mod_assertplus.ok(mod_isError(err),'err must be an Error');mod_assertplus.string(name,'name');mod_assertplus.ok(name.length>0,'name cannot be empty');for(cause=err;cause!==null;cause=VError.cause(cause)){mod_assertplus.ok(mod_isError(cause));if(cause.name==name){return(cause);}}
return(null);};VError.hasCauseWithName=function(err,name)
{return(VError.findCauseByName(err,name)!==null);};VError.fullStack=function(err)
{mod_assertplus.ok(mod_isError(err),'err must be an Error');var cause=VError.cause(err);if(cause){return(err.stack+'\ncaused by: '+VError.fullStack(cause));}
return(err.stack);};VError.errorFromList=function(errors)
{mod_assertplus.arrayOfObject(errors,'errors');if(errors.length===0){return(null);}
errors.forEach(function(e){mod_assertplus.ok(mod_isError(e));});if(errors.length==1){return(errors[0]);}
return(new MultiError(errors));};VError.errorForEach=function(err,func)
{mod_assertplus.ok(mod_isError(err),'err must be an Error');mod_assertplus.func(func,'func');if(err instanceof MultiError){err.errors().forEach(function iterError(e){func(e);});}else{func(err);}};function SError()
{var args,obj,parsed,options;args=Array.prototype.slice.call(arguments,0);if(!(this instanceof SError)){obj=Object.create(SError.prototype);SError.apply(obj,arguments);return(obj);}
parsed=parseConstructorArguments({'argv':args,'strict':true});options=parsed.options;VError.call(this,options,'%s',parsed.shortmessage);return(this);}
mod_util.inherits(SError,VError);function MultiError(errors)
{mod_assertplus.array(errors,'list of errors');mod_assertplus.ok(errors.length>0,'must be at least one error');this.ase_errors=errors;VError.call(this,{'cause':errors[0]},'first of %d error%s',errors.length,errors.length==1?'':'s');}
mod_util.inherits(MultiError,VError);MultiError.prototype.name='MultiError';MultiError.prototype.errors=function me_errors()
{return(this.ase_errors.slice(0));};function WError()
{var args,obj,parsed,options;args=Array.prototype.slice.call(arguments,0);if(!(this instanceof WError)){obj=Object.create(WError.prototype);WError.apply(obj,args);return(obj);}
parsed=parseConstructorArguments({'argv':args,'strict':false});options=parsed.options;options['skipCauseMessage']=true;VError.call(this,options,'%s',parsed.shortmessage);return(this);}
mod_util.inherits(WError,VError);WError.prototype.name='WError';WError.prototype.toString=function we_toString()
{var str=(this.hasOwnProperty('name')&&this.name||this.constructor.name||this.constructor.prototype.name);if(this.message)
str+=': '+this.message;if(this.jse_cause&&this.jse_cause.message)
str+='; caused by '+this.jse_cause.toString();return(str);};WError.prototype.cause=function we_cause(c)
{if(mod_isError(c))
this.jse_cause=c;return(this.jse_cause);};}),(function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(root,factory){if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=(function(){return factory();}).apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));}else if(typeof module==='object'&&module.exports){module.exports=factory();}else{root.jsonSchema=factory();}}(this,function(){var exports=validate
exports.Integer={type:"integer"};var primitiveConstructors={String:String,Boolean:Boolean,Number:Number,Object:Object,Array:Array,Date:Date}
exports.validate=validate;function validate(instance,schema){return validate(instance,schema,{changing:false});};exports.checkPropertyChange=function(value,schema,property){return validate(value,schema,{changing:property||"property"});};var validate=exports._validate=function(instance,schema,options){if(!options)options={};var _changing=options.changing;function getType(schema){return schema.type||(primitiveConstructors[schema.name]==schema&&schema.name.toLowerCase());}
var errors=[];function checkProp(value,schema,path,i){var l;path+=path?typeof i=='number'?'['+i+']':typeof i=='undefined'?'':'.'+i:i;function addError(message){errors.push({property:path,message:message});}
if((typeof schema!='object'||schema instanceof Array)&&(path||typeof schema!='function')&&!(schema&&getType(schema))){if(typeof schema=='function'){if(!(value instanceof schema)){addError("is not an instance of the class/constructor "+schema.name);}}else if(schema){addError("Invalid schema/property definition "+schema);}
return null;}
if(_changing&&schema.readonly){addError("is a readonly field, it can not be changed");}
if(schema['extends']){checkProp(value,schema['extends'],path,i);}
function checkType(type,value){if(type){if(typeof type=='string'&&type!='any'&&(type=='null'?value!==null:typeof value!=type)&&!(value instanceof Array&&type=='array')&&!(value instanceof Date&&type=='date')&&!(type=='integer'&&value%1===0)){return[{property:path,message:(typeof value)+" value found, but a "+type+" is required"}];}
if(type instanceof Array){var unionErrors=[];for(var j=0;j<type.length;j++){if(!(unionErrors=checkType(type[j],value)).length){break;}}
if(unionErrors.length){return unionErrors;}}else if(typeof type=='object'){var priorErrors=errors;errors=[];checkProp(value,type,path);var theseErrors=errors;errors=priorErrors;return theseErrors;}}
return[];}
if(value===undefined){if(schema.required){addError("is missing and it is required");}}else{errors=errors.concat(checkType(getType(schema),value));if(schema.disallow&&!checkType(schema.disallow,value).length){addError(" disallowed value was matched");}
if(value!==null){if(value instanceof Array){if(schema.items){var itemsIsArray=schema.items instanceof Array;var propDef=schema.items;for(i=0,l=value.length;i<l;i+=1){if(itemsIsArray)
propDef=schema.items[i];if(options.coerce)
value[i]=options.coerce(value[i],propDef);errors.concat(checkProp(value[i],propDef,path,i));}}
if(schema.minItems&&value.length<schema.minItems){addError("There must be a minimum of "+schema.minItems+" in the array");}
if(schema.maxItems&&value.length>schema.maxItems){addError("There must be a maximum of "+schema.maxItems+" in the array");}}else if(schema.properties||schema.additionalProperties){errors.concat(checkObj(value,schema.properties,path,schema.additionalProperties));}
if(schema.pattern&&typeof value=='string'&&!value.match(schema.pattern)){addError("does not match the regex pattern "+schema.pattern);}
if(schema.maxLength&&typeof value=='string'&&value.length>schema.maxLength){addError("may only be "+schema.maxLength+" characters long");}
if(schema.minLength&&typeof value=='string'&&value.length<schema.minLength){addError("must be at least "+schema.minLength+" characters long");}
if(typeof schema.minimum!==undefined&&typeof value==typeof schema.minimum&&schema.minimum>value){addError("must have a minimum value of "+schema.minimum);}
if(typeof schema.maximum!==undefined&&typeof value==typeof schema.maximum&&schema.maximum<value){addError("must have a maximum value of "+schema.maximum);}
if(schema['enum']){var enumer=schema['enum'];l=enumer.length;var found;for(var j=0;j<l;j++){if(enumer[j]===value){found=1;break;}}
if(!found){addError("does not have a value in the enumeration "+enumer.join(", "));}}
if(typeof schema.maxDecimal=='number'&&(value.toString().match(new RegExp("\\.[0-9]{"+(schema.maxDecimal+1)+",}")))){addError("may only have "+schema.maxDecimal+" digits of decimal places");}}}
return null;}
function checkObj(instance,objTypeDef,path,additionalProp){if(typeof objTypeDef=='object'){if(typeof instance!='object'||instance instanceof Array){errors.push({property:path,message:"an object is required"});}
for(var i in objTypeDef){if(objTypeDef.hasOwnProperty(i)){var value=instance[i];if(value===undefined&&options.existingOnly)continue;var propDef=objTypeDef[i];if(value===undefined&&propDef["default"]){value=instance[i]=propDef["default"];}
if(options.coerce&&i in instance){value=instance[i]=options.coerce(value,propDef);}
checkProp(value,propDef,path,i);}}}
for(i in instance){if(instance.hasOwnProperty(i)&&!(i.charAt(0)=='_'&&i.charAt(1)=='_')&&objTypeDef&&!objTypeDef[i]&&additionalProp===false){if(options.filter){delete instance[i];continue;}else{errors.push({property:path,message:(typeof value)+"The property "+i+
" is not defined in the schema and the schema does not allow additional properties"});}}
var requires=objTypeDef&&objTypeDef[i]&&objTypeDef[i].requires;if(requires&&!(requires in instance)){errors.push({property:path,message:"the presence of the property "+i+" requires that "+requires+" also be present"});}
value=instance[i];if(additionalProp&&(!(objTypeDef&&typeof objTypeDef=='object')||!(i in objTypeDef))){if(options.coerce){value=instance[i]=options.coerce(value,additionalProp);}
checkProp(value,additionalProp,path,i);}
if(!_changing&&value&&value.$schema){errors=errors.concat(checkProp(value,value.$schema,path,i));}}
return errors;}
if(schema){checkProp(instance,schema,'',_changing||'');}
if(!_changing&&instance&&instance.$schema){checkProp(instance,instance.$schema,'','');}
return{valid:!errors.length,errors:errors};};exports.mustBeValid=function(result){if(!result.valid){throw new TypeError(result.errors.map(function(error){return "for property "+error.property+': '+error.message;}).join(", \n"));}}
return exports;}));}),(function(module,exports,__webpack_require__){(function(Buffer){var assert=__webpack_require__(15);var crypto=__webpack_require__(24);var sshpk=__webpack_require__(239);var utils=__webpack_require__(171);var HASH_ALGOS=utils.HASH_ALGOS;var PK_ALGOS=utils.PK_ALGOS;var InvalidAlgorithmError=utils.InvalidAlgorithmError;var HttpSignatureError=utils.HttpSignatureError;var validateAlgorithm=utils.validateAlgorithm;module.exports={verifySignature:function verifySignature(parsedSignature,pubkey){assert.object(parsedSignature,'parsedSignature');if(typeof(pubkey)==='string'||Buffer.isBuffer(pubkey))
pubkey=sshpk.parseKey(pubkey);assert.ok(sshpk.Key.isKey(pubkey,[1,1]),'pubkey must be a sshpk.Key');var alg=validateAlgorithm(parsedSignature.algorithm);if(alg[0]==='hmac'||alg[0]!==pubkey.type)
return(false);var v=pubkey.createVerify(alg[1]);v.update(parsedSignature.signingString);return(v.verify(parsedSignature.params.signature,'base64'));},verifyHMAC:function verifyHMAC(parsedSignature,secret){assert.object(parsedSignature,'parsedHMAC');assert.string(secret,'secret');var alg=validateAlgorithm(parsedSignature.algorithm);if(alg[0]!=='hmac')
return(false);var hashAlg=alg[1].toUpperCase();var hmac=crypto.createHmac(hashAlg,secret);hmac.update(parsedSignature.signingString);var h1=crypto.createHmac(hashAlg,secret);h1.update(hmac.digest());h1=h1.digest();var h2=crypto.createHmac(hashAlg,secret);h2.update(new Buffer(parsedSignature.params.signature,'base64'));h2=h2.digest();if(typeof(h1)==='string')
return(h1===h2);if(Buffer.isBuffer(h1)&&!h1.equals)
return(h1.toString('binary')===h2.toString('binary'));return(h1.equals(h2));}};}.call(exports,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){"use strict";/*!
* mime-types
* Copyright(c) 2014 Jonathan Ong
* Copyright(c) 2015 Douglas Christopher Wilson
* MIT Licensed
*/var db=__webpack_require__(841)
var extname=__webpack_require__(843).extname
var EXTRACT_TYPE_REGEXP=/^\s*([^;\s]*)(?:;|\s|$)/
var TEXT_TYPE_REGEXP=/^text\//i
exports.charset=charset
exports.charsets={lookup:charset}
exports.contentType=contentType
exports.extension=extension
exports.extensions=Object.create(null)
exports.lookup=lookup
exports.types=Object.create(null)
populateMaps(exports.extensions,exports.types)
function charset(type){if(!type||typeof type!=='string'){return false}
var match=EXTRACT_TYPE_REGEXP.exec(type)
var mime=match&&db[match[1].toLowerCase()]
if(mime&&mime.charset){return mime.charset}
if(match&&TEXT_TYPE_REGEXP.test(match[1])){return 'UTF-8'}
return false}
function contentType(str){if(!str||typeof str!=='string'){return false}
var mime=str.indexOf('/')===-1?exports.lookup(str):str
if(!mime){return false}
if(mime.indexOf('charset')===-1){var charset=exports.charset(mime)
if(charset)mime+='; charset='+charset.toLowerCase()}
return mime}
function extension(type){if(!type||typeof type!=='string'){return false}
var match=EXTRACT_TYPE_REGEXP.exec(type)
var exts=match&&exports.extensions[match[1].toLowerCase()]
if(!exts||!exts.length){return false}
return exts[0]}
function lookup(path){if(!path||typeof path!=='string'){return false}
var extension=extname('x.'+path).toLowerCase().substr(1)
if(!extension){return false}
return exports.types[extension]||false}
function populateMaps(extensions,types){var preference=['nginx','apache',undefined,'iana']
Object.keys(db).forEach(function forEachMimeType(type){var mime=db[type]
var exts=mime.extensions
if(!exts||!exts.length){return}
extensions[type]=exts
for(var i=0;i<exts.length;i++){var extension=exts[i]
if(types[extension]){var from=preference.indexOf(db[types[extension]].source)
var to=preference.indexOf(mime.source)
if(types[extension]!=='application/octet-stream'&&(from>to||(from===to&&types[extension].substr(0,12)==='application/'))){continue}}
types[extension]=type}})}}),(function(module,exports,__webpack_require__){/*!
* mime-db
* Copyright(c) 2014 Jonathan Ong
* MIT Licensed
*/module.exports=__webpack_require__(842)}),(function(module,exports){module.exports={"application/1d-interleaved-parityfec":{"source":"iana"},"application/3gpdash-qoe-report+xml":{"source":"iana","compressible":true},"application/3gpp-ims+xml":{"source":"iana","compressible":true},"application/a2l":{"source":"iana"},"application/activemessage":{"source":"iana"},"application/activity+json":{"source":"iana","compressible":true},"application/alto-costmap+json":{"source":"iana","compressible":true},"application/alto-costmapfilter+json":{"source":"iana","compressible":true},"application/alto-directory+json":{"source":"iana","compressible":true},"application/alto-endpointcost+json":{"source":"iana","compressible":true},"application/alto-endpointcostparams+json":{"source":"iana","compressible":true},"application/alto-endpointprop+json":{"source":"iana","compressible":true},"application/alto-endpointpropparams+json":{"source":"iana","compressible":true},"application/alto-error+json":{"source":"iana","compressible":true},"application/alto-networkmap+json":{"source":"iana","compressible":true},"application/alto-networkmapfilter+json":{"source":"iana","compressible":true},"application/aml":{"source":"iana"},"application/andrew-inset":{"source":"iana","extensions":["ez"]},"application/applefile":{"source":"iana"},"application/applixware":{"source":"apache","extensions":["aw"]},"application/atf":{"source":"iana"},"application/atfx":{"source":"iana"},"application/atom+xml":{"source":"iana","compressible":true,"extensions":["atom"]},"application/atomcat+xml":{"source":"iana","compressible":true,"extensions":["atomcat"]},"application/atomdeleted+xml":{"source":"iana","compressible":true},"application/atomicmail":{"source":"iana"},"application/atomsvc+xml":{"source":"iana","compressible":true,"extensions":["atomsvc"]},"application/atxml":{"source":"iana"},"application/auth-policy+xml":{"source":"iana","compressible":true},"application/bacnet-xdd+zip":{"source":"iana","compressible":false},"application/batch-smtp":{"source":"iana"},"application/bdoc":{"compressible":false,"extensions":["bdoc"]},"application/beep+xml":{"source":"iana","compressible":true},"application/calendar+json":{"source":"iana","compressible":true},"application/calendar+xml":{"source":"iana","compressible":true},"application/call-completion":{"source":"iana"},"application/cals-1840":{"source":"iana"},"application/cbor":{"source":"iana"},"application/cccex":{"source":"iana"},"application/ccmp+xml":{"source":"iana","compressible":true},"application/ccxml+xml":{"source":"iana","compressible":true,"extensions":["ccxml"]},"application/cdfx+xml":{"source":"iana","compressible":true},"application/cdmi-capability":{"source":"iana","extensions":["cdmia"]},"application/cdmi-container":{"source":"iana","extensions":["cdmic"]},"application/cdmi-domain":{"source":"iana","extensions":["cdmid"]},"application/cdmi-object":{"source":"iana","extensions":["cdmio"]},"application/cdmi-queue":{"source":"iana","extensions":["cdmiq"]},"application/cdni":{"source":"iana"},"application/cea":{"source":"iana"},"application/cea-2018+xml":{"source":"iana","compressible":true},"application/cellml+xml":{"source":"iana","compressible":true},"application/cfw":{"source":"iana"},"application/clue_info+xml":{"source":"iana","compressible":true},"application/cms":{"source":"iana"},"application/cnrp+xml":{"source":"iana","compressible":true},"application/coap-group+json":{"source":"iana","compressible":true},"application/coap-payload":{"source":"iana"},"application/commonground":{"source":"iana"},"application/conference-info+xml":{"source":"iana","compressible":true},"application/cose":{"source":"iana"},"application/cose-key":{"source":"iana"},"application/cose-key-set":{"source":"iana"},"application/cpl+xml":{"source":"iana","compressible":true},"application/csrattrs":{"source":"iana"},"application/csta+xml":{"source":"iana","compressible":true},"application/cstadata+xml":{"source":"iana","compressible":true},"application/csvm+json":{"source":"iana","compressible":true},"application/cu-seeme":{"source":"apache","extensions":["cu"]},"application/cwt":{"source":"iana"},"application/cybercash":{"source":"iana"},"application/dart":{"compressible":true},"application/dash+xml":{"source":"iana","compressible":true,"extensions":["mpd"]},"application/dashdelta":{"source":"iana"},"application/davmount+xml":{"source":"iana","compressible":true,"extensions":["davmount"]},"application/dca-rft":{"source":"iana"},"application/dcd":{"source":"iana"},"application/dec-dx":{"source":"iana"},"application/dialog-info+xml":{"source":"iana","compressible":true},"application/dicom":{"source":"iana"},"application/dicom+json":{"source":"iana","compressible":true},"application/dicom+xml":{"source":"iana","compressible":true},"application/dii":{"source":"iana"},"application/dit":{"source":"iana"},"application/dns":{"source":"iana"},"application/dns+json":{"source":"iana","compressible":true},"application/dns-message":{"source":"iana"},"application/docbook+xml":{"source":"apache","compressible":true,"extensions":["dbk"]},"application/dskpp+xml":{"source":"iana","compressible":true},"application/dssc+der":{"source":"iana","extensions":["dssc"]},"application/dssc+xml":{"source":"iana","compressible":true,"extensions":["xdssc"]},"application/dvcs":{"source":"iana"},"application/ecmascript":{"source":"iana","compressible":true,"extensions":["ecma","es"]},"application/edi-consent":{"source":"iana"},"application/edi-x12":{"source":"iana","compressible":false},"application/edifact":{"source":"iana","compressible":false},"application/efi":{"source":"iana"},"application/emergencycalldata.comment+xml":{"source":"iana","compressible":true},"application/emergencycalldata.control+xml":{"source":"iana","compressible":true},"application/emergencycalldata.deviceinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.ecall.msd":{"source":"iana"},"application/emergencycalldata.providerinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.serviceinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.subscriberinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.veds+xml":{"source":"iana","compressible":true},"application/emma+xml":{"source":"iana","compressible":true,"extensions":["emma"]},"application/emotionml+xml":{"source":"iana","compressible":true},"application/encaprtp":{"source":"iana"},"application/epp+xml":{"source":"iana","compressible":true},"application/epub+zip":{"source":"iana","compressible":false,"extensions":["epub"]},"application/eshop":{"source":"iana"},"application/exi":{"source":"iana","extensions":["exi"]},"application/fastinfoset":{"source":"iana"},"application/fastsoap":{"source":"iana"},"application/fdt+xml":{"source":"iana","compressible":true},"application/fhir+json":{"source":"iana","compressible":true},"application/fhir+xml":{"source":"iana","compressible":true},"application/fido.trusted-apps+json":{"compressible":true},"application/fits":{"source":"iana"},"application/font-sfnt":{"source":"iana"},"application/font-tdpfr":{"source":"iana","extensions":["pfr"]},"application/font-woff":{"source":"iana","compressible":false},"application/framework-attributes+xml":{"source":"iana","compressible":true},"application/geo+json":{"source":"iana","compressible":true,"extensions":["geojson"]},"application/geo+json-seq":{"source":"iana"},"application/geopackage+sqlite3":{"source":"iana"},"application/geoxacml+xml":{"source":"iana","compressible":true},"application/gltf-buffer":{"source":"iana"},"application/gml+xml":{"source":"iana","compressible":true,"extensions":["gml"]},"application/gpx+xml":{"source":"apache","compressible":true,"extensions":["gpx"]},"application/gxf":{"source":"apache","extensions":["gxf"]},"application/gzip":{"source":"iana","compressible":false,"extensions":["gz"]},"application/h224":{"source":"iana"},"application/held+xml":{"source":"iana","compressible":true},"application/hjson":{"extensions":["hjson"]},"application/http":{"source":"iana"},"application/hyperstudio":{"source":"iana","extensions":["stk"]},"application/ibe-key-request+xml":{"source":"iana","compressible":true},"application/ibe-pkg-reply+xml":{"source":"iana","compressible":true},"application/ibe-pp-data":{"source":"iana"},"application/iges":{"source":"iana"},"application/im-iscomposing+xml":{"source":"iana","compressible":true},"application/index":{"source":"iana"},"application/index.cmd":{"source":"iana"},"application/index.obj":{"source":"iana"},"application/index.response":{"source":"iana"},"application/index.vnd":{"source":"iana"},"application/inkml+xml":{"source":"iana","compressible":true,"extensions":["ink","inkml"]},"application/iotp":{"source":"iana"},"application/ipfix":{"source":"iana","extensions":["ipfix"]},"application/ipp":{"source":"iana"},"application/isup":{"source":"iana"},"application/its+xml":{"source":"iana","compressible":true},"application/java-archive":{"source":"apache","compressible":false,"extensions":["jar","war","ear"]},"application/java-serialized-object":{"source":"apache","compressible":false,"extensions":["ser"]},"application/java-vm":{"source":"apache","compressible":false,"extensions":["class"]},"application/javascript":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["js","mjs"]},"application/jf2feed+json":{"source":"iana","compressible":true},"application/jose":{"source":"iana"},"application/jose+json":{"source":"iana","compressible":true},"application/jrd+json":{"source":"iana","compressible":true},"application/json":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["json","map"]},"application/json-patch+json":{"source":"iana","compressible":true},"application/json-seq":{"source":"iana"},"application/json5":{"extensions":["json5"]},"application/jsonml+json":{"source":"apache","compressible":true,"extensions":["jsonml"]},"application/jwk+json":{"source":"iana","compressible":true},"application/jwk-set+json":{"source":"iana","compressible":true},"application/jwt":{"source":"iana"},"application/kpml-request+xml":{"source":"iana","compressible":true},"application/kpml-response+xml":{"source":"iana","compressible":true},"application/ld+json":{"source":"iana","compressible":true,"extensions":["jsonld"]},"application/lgr+xml":{"source":"iana","compressible":true},"application/link-format":{"source":"iana"},"application/load-control+xml":{"source":"iana","compressible":true},"application/lost+xml":{"source":"iana","compressible":true,"extensions":["lostxml"]},"application/lostsync+xml":{"source":"iana","compressible":true},"application/lxf":{"source":"iana"},"application/mac-binhex40":{"source":"iana","extensions":["hqx"]},"application/mac-compactpro":{"source":"apache","extensions":["cpt"]},"application/macwriteii":{"source":"iana"},"application/mads+xml":{"source":"iana","compressible":true,"extensions":["mads"]},"application/manifest+json":{"charset":"UTF-8","compressible":true,"extensions":["webmanifest"]},"application/marc":{"source":"iana","extensions":["mrc"]},"application/marcxml+xml":{"source":"iana","compressible":true,"extensions":["mrcx"]},"application/mathematica":{"source":"iana","extensions":["ma","nb","mb"]},"application/mathml+xml":{"source":"iana","compressible":true,"extensions":["mathml"]},"application/mathml-content+xml":{"source":"iana","compressible":true},"application/mathml-presentation+xml":{"source":"iana","compressible":true},"application/mbms-associated-procedure-description+xml":{"source":"iana","compressible":true},"application/mbms-deregister+xml":{"source":"iana","compressible":true},"application/mbms-envelope+xml":{"source":"iana","compressible":true},"application/mbms-msk+xml":{"source":"iana","compressible":true},"application/mbms-msk-response+xml":{"source":"iana","compressible":true},"application/mbms-protection-description+xml":{"source":"iana","compressible":true},"application/mbms-reception-report+xml":{"source":"iana","compressible":true},"application/mbms-register+xml":{"source":"iana","compressible":true},"application/mbms-register-response+xml":{"source":"iana","compressible":true},"application/mbms-schedule+xml":{"source":"iana","compressible":true},"application/mbms-user-service-description+xml":{"source":"iana","compressible":true},"application/mbox":{"source":"iana","extensions":["mbox"]},"application/media-policy-dataset+xml":{"source":"iana","compressible":true},"application/media_control+xml":{"source":"iana","compressible":true},"application/mediaservercontrol+xml":{"source":"iana","compressible":true,"extensions":["mscml"]},"application/merge-patch+json":{"source":"iana","compressible":true},"application/metalink+xml":{"source":"apache","compressible":true,"extensions":["metalink"]},"application/metalink4+xml":{"source":"iana","compressible":true,"extensions":["meta4"]},"application/mets+xml":{"source":"iana","compressible":true,"extensions":["mets"]},"application/mf4":{"source":"iana"},"application/mikey":{"source":"iana"},"application/mmt-usd+xml":{"source":"iana","compressible":true},"application/mods+xml":{"source":"iana","compressible":true,"extensions":["mods"]},"application/moss-keys":{"source":"iana"},"application/moss-signature":{"source":"iana"},"application/mosskey-data":{"source":"iana"},"application/mosskey-request":{"source":"iana"},"application/mp21":{"source":"iana","extensions":["m21","mp21"]},"application/mp4":{"source":"iana","extensions":["mp4s","m4p"]},"application/mpeg4-generic":{"source":"iana"},"application/mpeg4-iod":{"source":"iana"},"application/mpeg4-iod-xmt":{"source":"iana"},"application/mrb-consumer+xml":{"source":"iana","compressible":true},"application/mrb-publish+xml":{"source":"iana","compressible":true},"application/msc-ivr+xml":{"source":"iana","compressible":true},"application/msc-mixer+xml":{"source":"iana","compressible":true},"application/msword":{"source":"iana","compressible":false,"extensions":["doc","dot"]},"application/mud+json":{"source":"iana","compressible":true},"application/mxf":{"source":"iana","extensions":["mxf"]},"application/n-quads":{"source":"iana"},"application/n-triples":{"source":"iana"},"application/nasdata":{"source":"iana"},"application/news-checkgroups":{"source":"iana"},"application/news-groupinfo":{"source":"iana"},"application/news-transmission":{"source":"iana"},"application/nlsml+xml":{"source":"iana","compressible":true},"application/node":{"source":"iana"},"application/nss":{"source":"iana"},"application/ocsp-request":{"source":"iana"},"application/ocsp-response":{"source":"iana"},"application/octet-stream":{"source":"iana","compressible":false,"extensions":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{"source":"iana","extensions":["oda"]},"application/odx":{"source":"iana"},"application/oebps-package+xml":{"source":"iana","compressible":true,"extensions":["opf"]},"application/ogg":{"source":"iana","compressible":false,"extensions":["ogx"]},"application/omdoc+xml":{"source":"apache","compressible":true,"extensions":["omdoc"]},"application/onenote":{"source":"apache","extensions":["onetoc","onetoc2","onetmp","onepkg"]},"application/oxps":{"source":"iana","extensions":["oxps"]},"application/p2p-overlay+xml":{"source":"iana","compressible":true},"application/parityfec":{"source":"iana"},"application/passport":{"source":"iana"},"application/patch-ops-error+xml":{"source":"iana","compressible":true,"extensions":["xer"]},"application/pdf":{"source":"iana","compressible":false,"extensions":["pdf"]},"application/pdx":{"source":"iana"},"application/pgp-encrypted":{"source":"iana","compressible":false,"extensions":["pgp"]},"application/pgp-keys":{"source":"iana"},"application/pgp-signature":{"source":"iana","extensions":["asc","sig"]},"application/pics-rules":{"source":"apache","extensions":["prf"]},"application/pidf+xml":{"source":"iana","compressible":true},"application/pidf-diff+xml":{"source":"iana","compressible":true},"application/pkcs10":{"source":"iana","extensions":["p10"]},"application/pkcs12":{"source":"iana"},"application/pkcs7-mime":{"source":"iana","extensions":["p7m","p7c"]},"application/pkcs7-signature":{"source":"iana","extensions":["p7s"]},"application/pkcs8":{"source":"iana","extensions":["p8"]},"application/pkcs8-encrypted":{"source":"iana"},"application/pkix-attr-cert":{"source":"iana","extensions":["ac"]},"application/pkix-cert":{"source":"iana","extensions":["cer"]},"application/pkix-crl":{"source":"iana","extensions":["crl"]},"application/pkix-pkipath":{"source":"iana","extensions":["pkipath"]},"application/pkixcmp":{"source":"iana","extensions":["pki"]},"application/pls+xml":{"source":"iana","compressible":true,"extensions":["pls"]},"application/poc-settings+xml":{"source":"iana","compressible":true},"application/postscript":{"source":"iana","compressible":true,"extensions":["ai","eps","ps"]},"application/ppsp-tracker+json":{"source":"iana","compressible":true},"application/problem+json":{"source":"iana","compressible":true},"application/problem+xml":{"source":"iana","compressible":true},"application/provenance+xml":{"source":"iana","compressible":true},"application/prs.alvestrand.titrax-sheet":{"source":"iana"},"application/prs.cww":{"source":"iana","extensions":["cww"]},"application/prs.hpub+zip":{"source":"iana","compressible":false},"application/prs.nprend":{"source":"iana"},"application/prs.plucker":{"source":"iana"},"application/prs.rdf-xml-crypt":{"source":"iana"},"application/prs.xsf+xml":{"source":"iana","compressible":true},"application/pskc+xml":{"source":"iana","compressible":true,"extensions":["pskcxml"]},"application/qsig":{"source":"iana"},"application/raml+yaml":{"compressible":true,"extensions":["raml"]},"application/raptorfec":{"source":"iana"},"application/rdap+json":{"source":"iana","compressible":true},"application/rdf+xml":{"source":"iana","compressible":true,"extensions":["rdf","owl"]},"application/reginfo+xml":{"source":"iana","compressible":true,"extensions":["rif"]},"application/relax-ng-compact-syntax":{"source":"iana","extensions":["rnc"]},"application/remote-printing":{"source":"iana"},"application/reputon+json":{"source":"iana","compressible":true},"application/resource-lists+xml":{"source":"iana","compressible":true,"extensions":["rl"]},"application/resource-lists-diff+xml":{"source":"iana","compressible":true,"extensions":["rld"]},"application/rfc+xml":{"source":"iana","compressible":true},"application/riscos":{"source":"iana"},"application/rlmi+xml":{"source":"iana","compressible":true},"application/rls-services+xml":{"source":"iana","compressible":true,"extensions":["rs"]},"application/route-apd+xml":{"source":"iana","compressible":true},"application/route-s-tsid+xml":{"source":"iana","compressible":true},"application/route-usd+xml":{"source":"iana","compressible":true},"application/rpki-ghostbusters":{"source":"iana","extensions":["gbr"]},"application/rpki-manifest":{"source":"iana","extensions":["mft"]},"application/rpki-publication":{"source":"iana"},"application/rpki-roa":{"source":"iana","extensions":["roa"]},"application/rpki-updown":{"source":"iana"},"application/rsd+xml":{"source":"apache","compressible":true,"extensions":["rsd"]},"application/rss+xml":{"source":"apache","compressible":true,"extensions":["rss"]},"application/rtf":{"source":"iana","compressible":true,"extensions":["rtf"]},"application/rtploopback":{"source":"iana"},"application/rtx":{"source":"iana"},"application/samlassertion+xml":{"source":"iana","compressible":true},"application/samlmetadata+xml":{"source":"iana","compressible":true},"application/sbml+xml":{"source":"iana","compressible":true,"extensions":["sbml"]},"application/scaip+xml":{"source":"iana","compressible":true},"application/scim+json":{"source":"iana","compressible":true},"application/scvp-cv-request":{"source":"iana","extensions":["scq"]},"application/scvp-cv-response":{"source":"iana","extensions":["scs"]},"application/scvp-vp-request":{"source":"iana","extensions":["spq"]},"application/scvp-vp-response":{"source":"iana","extensions":["spp"]},"application/sdp":{"source":"iana","extensions":["sdp"]},"application/secevent+jwt":{"source":"iana"},"application/senml+cbor":{"source":"iana"},"application/senml+json":{"source":"iana","compressible":true},"application/senml+xml":{"source":"iana","compressible":true},"application/senml-exi":{"source":"iana"},"application/sensml+cbor":{"source":"iana"},"application/sensml+json":{"source":"iana","compressible":true},"application/sensml+xml":{"source":"iana","compressible":true},"application/sensml-exi":{"source":"iana"},"application/sep+xml":{"source":"iana","compressible":true},"application/sep-exi":{"source":"iana"},"application/session-info":{"source":"iana"},"application/set-payment":{"source":"iana"},"application/set-payment-initiation":{"source":"iana","extensions":["setpay"]},"application/set-registration":{"source":"iana"},"application/set-registration-initiation":{"source":"iana","extensions":["setreg"]},"application/sgml":{"source":"iana"},"application/sgml-open-catalog":{"source":"iana"},"application/shf+xml":{"source":"iana","compressible":true,"extensions":["shf"]},"application/sieve":{"source":"iana"},"application/simple-filter+xml":{"source":"iana","compressible":true},"application/simple-message-summary":{"source":"iana"},"application/simplesymbolcontainer":{"source":"iana"},"application/slate":{"source":"iana"},"application/smil":{"source":"iana"},"application/smil+xml":{"source":"iana","compressible":true,"extensions":["smi","smil"]},"application/smpte336m":{"source":"iana"},"application/soap+fastinfoset":{"source":"iana"},"application/soap+xml":{"source":"iana","compressible":true},"application/sparql-query":{"source":"iana","extensions":["rq"]},"application/sparql-results+xml":{"source":"iana","compressible":true,"extensions":["srx"]},"application/spirits-event+xml":{"source":"iana","compressible":true},"application/sql":{"source":"iana"},"application/srgs":{"source":"iana","extensions":["gram"]},"application/srgs+xml":{"source":"iana","compressible":true,"extensions":["grxml"]},"application/sru+xml":{"source":"iana","compressible":true,"extensions":["sru"]},"application/ssdl+xml":{"source":"apache","compressible":true,"extensions":["ssdl"]},"application/ssml+xml":{"source":"iana","compressible":true,"extensions":["ssml"]},"application/stix+json":{"source":"iana","compressible":true},"application/tamp-apex-update":{"source":"iana"},"application/tamp-apex-update-confirm":{"source":"iana"},"application/tamp-community-update":{"source":"iana"},"application/tamp-community-update-confirm":{"source":"iana"},"application/tamp-error":{"source":"iana"},"application/tamp-sequence-adjust":{"source":"iana"},"application/tamp-sequence-adjust-confirm":{"source":"iana"},"application/tamp-status-query":{"source":"iana"},"application/tamp-status-response":{"source":"iana"},"application/tamp-update":{"source":"iana"},"application/tamp-update-confirm":{"source":"iana"},"application/tar":{"compressible":true},"application/taxii+json":{"source":"iana","compressible":true},"application/tei+xml":{"source":"iana","compressible":true,"extensions":["tei","teicorpus"]},"application/thraud+xml":{"source":"iana","compressible":true,"extensions":["tfi"]},"application/timestamp-query":{"source":"iana"},"application/timestamp-reply":{"source":"iana"},"application/timestamped-data":{"source":"iana","extensions":["tsd"]},"application/tlsrpt+gzip":{"source":"iana"},"application/tlsrpt+json":{"source":"iana","compressible":true},"application/tnauthlist":{"source":"iana"},"application/trickle-ice-sdpfrag":{"source":"iana"},"application/trig":{"source":"iana"},"application/ttml+xml":{"source":"iana","compressible":true},"application/tve-trigger":{"source":"iana"},"application/ulpfec":{"source":"iana"},"application/urc-grpsheet+xml":{"source":"iana","compressible":true},"application/urc-ressheet+xml":{"source":"iana","compressible":true},"application/urc-targetdesc+xml":{"source":"iana","compressible":true},"application/urc-uisocketdesc+xml":{"source":"iana","compressible":true},"application/vcard+json":{"source":"iana","compressible":true},"application/vcard+xml":{"source":"iana","compressible":true},"application/vemmi":{"source":"iana"},"application/vividence.scriptfile":{"source":"apache"},"application/vnd.1000minds.decision-model+xml":{"source":"iana","compressible":true},"application/vnd.3gpp-prose+xml":{"source":"iana","compressible":true},"application/vnd.3gpp-prose-pc3ch+xml":{"source":"iana","compressible":true},"application/vnd.3gpp-v2x-local-service-information":{"source":"iana"},"application/vnd.3gpp.access-transfer-events+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.bsf+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.gmop+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mc-signalling-ear":{"source":"iana"},"application/vnd.3gpp.mcdata-payload":{"source":"iana"},"application/vnd.3gpp.mcdata-signalling":{"source":"iana"},"application/vnd.3gpp.mcptt-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-floor-request+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-location-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-signed+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mid-call+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.pic-bw-large":{"source":"iana","extensions":["plb"]},"application/vnd.3gpp.pic-bw-small":{"source":"iana","extensions":["psb"]},"application/vnd.3gpp.pic-bw-var":{"source":"iana","extensions":["pvb"]},"application/vnd.3gpp.sms":{"source":"iana"},"application/vnd.3gpp.sms+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.srvcc-ext+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.srvcc-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.state-and-event-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.ussd+xml":{"source":"iana","compressible":true},"application/vnd.3gpp2.bcmcsinfo+xml":{"source":"iana","compressible":true},"application/vnd.3gpp2.sms":{"source":"iana"},"application/vnd.3gpp2.tcap":{"source":"iana","extensions":["tcap"]},"application/vnd.3lightssoftware.imagescal":{"source":"iana"},"application/vnd.3m.post-it-notes":{"source":"iana","extensions":["pwn"]},"application/vnd.accpac.simply.aso":{"source":"iana","extensions":["aso"]},"application/vnd.accpac.simply.imp":{"source":"iana","extensions":["imp"]},"application/vnd.acucobol":{"source":"iana","extensions":["acu"]},"application/vnd.acucorp":{"source":"iana","extensions":["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{"source":"apache","compressible":false,"extensions":["air"]},"application/vnd.adobe.flash.movie":{"source":"iana"},"application/vnd.adobe.formscentral.fcdt":{"source":"iana","extensions":["fcdt"]},"application/vnd.adobe.fxp":{"source":"iana","extensions":["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{"source":"iana"},"application/vnd.adobe.xdp+xml":{"source":"iana","compressible":true,"extensions":["xdp"]},"application/vnd.adobe.xfdf":{"source":"iana","extensions":["xfdf"]},"application/vnd.aether.imp":{"source":"iana"},"application/vnd.afpc.afplinedata":{"source":"iana"},"application/vnd.afpc.modca":{"source":"iana"},"application/vnd.ah-barcode":{"source":"iana"},"application/vnd.ahead.space":{"source":"iana","extensions":["ahead"]},"application/vnd.airzip.filesecure.azf":{"source":"iana","extensions":["azf"]},"application/vnd.airzip.filesecure.azs":{"source":"iana","extensions":["azs"]},"application/vnd.amadeus+json":{"source":"iana","compressible":true},"application/vnd.amazon.ebook":{"source":"apache","extensions":["azw"]},"application/vnd.amazon.mobi8-ebook":{"source":"iana"},"application/vnd.americandynamics.acc":{"source":"iana","extensions":["acc"]},"application/vnd.amiga.ami":{"source":"iana","extensions":["ami"]},"application/vnd.amundsen.maze+xml":{"source":"iana","compressible":true},"application/vnd.android.package-archive":{"source":"apache","compressible":false,"extensions":["apk"]},"application/vnd.anki":{"source":"iana"},"application/vnd.anser-web-certificate-issue-initiation":{"source":"iana","extensions":["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{"source":"apache","extensions":["fti"]},"application/vnd.antix.game-component":{"source":"iana","extensions":["atx"]},"application/vnd.apache.thrift.binary":{"source":"iana"},"application/vnd.apache.thrift.compact":{"source":"iana"},"application/vnd.apache.thrift.json":{"source":"iana"},"application/vnd.api+json":{"source":"iana","compressible":true},"application/vnd.apothekende.reservation+json":{"source":"iana","compressible":true},"application/vnd.apple.installer+xml":{"source":"iana","compressible":true,"extensions":["mpkg"]},"application/vnd.apple.keynote":{"source":"iana","extensions":["keynote"]},"application/vnd.apple.mpegurl":{"source":"iana","extensions":["m3u8"]},"application/vnd.apple.numbers":{"source":"iana","extensions":["numbers"]},"application/vnd.apple.pages":{"source":"iana","extensions":["pages"]},"application/vnd.apple.pkpass":{"compressible":false,"extensions":["pkpass"]},"application/vnd.arastra.swi":{"source":"iana"},"application/vnd.aristanetworks.swi":{"source":"iana","extensions":["swi"]},"application/vnd.artisan+json":{"source":"iana","compressible":true},"application/vnd.artsquare":{"source":"iana"},"application/vnd.astraea-software.iota":{"source":"iana","extensions":["iota"]},"application/vnd.audiograph":{"source":"iana","extensions":["aep"]},"application/vnd.autopackage":{"source":"iana"},"application/vnd.avalon+json":{"source":"iana","compressible":true},"application/vnd.avistar+xml":{"source":"iana","compressible":true},"application/vnd.balsamiq.bmml+xml":{"source":"iana","compressible":true},"application/vnd.balsamiq.bmpr":{"source":"iana"},"application/vnd.banana-accounting":{"source":"iana"},"application/vnd.bbf.usp.msg":{"source":"iana"},"application/vnd.bbf.usp.msg+json":{"source":"iana","compressible":true},"application/vnd.bekitzur-stech+json":{"source":"iana","compressible":true},"application/vnd.bint.med-content":{"source":"iana"},"application/vnd.biopax.rdf+xml":{"source":"iana","compressible":true},"application/vnd.blink-idb-value-wrapper":{"source":"iana"},"application/vnd.blueice.multipass":{"source":"iana","extensions":["mpm"]},"application/vnd.bluetooth.ep.oob":{"source":"iana"},"application/vnd.bluetooth.le.oob":{"source":"iana"},"application/vnd.bmi":{"source":"iana","extensions":["bmi"]},"application/vnd.businessobjects":{"source":"iana","extensions":["rep"]},"application/vnd.byu.uapi+json":{"source":"iana","compressible":true},"application/vnd.cab-jscript":{"source":"iana"},"application/vnd.canon-cpdl":{"source":"iana"},"application/vnd.canon-lips":{"source":"iana"},"application/vnd.capasystems-pg+json":{"source":"iana","compressible":true},"application/vnd.cendio.thinlinc.clientconf":{"source":"iana"},"application/vnd.century-systems.tcp_stream":{"source":"iana"},"application/vnd.chemdraw+xml":{"source":"iana","compressible":true,"extensions":["cdxml"]},"application/vnd.chess-pgn":{"source":"iana"},"application/vnd.chipnuts.karaoke-mmd":{"source":"iana","extensions":["mmd"]},"application/vnd.cinderella":{"source":"iana","extensions":["cdy"]},"application/vnd.cirpack.isdn-ext":{"source":"iana"},"application/vnd.citationstyles.style+xml":{"source":"iana","compressible":true,"extensions":["csl"]},"application/vnd.claymore":{"source":"iana","extensions":["cla"]},"application/vnd.cloanto.rp9":{"source":"iana","extensions":["rp9"]},"application/vnd.clonk.c4group":{"source":"iana","extensions":["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{"source":"iana","extensions":["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{"source":"iana","extensions":["c11amz"]},"application/vnd.coffeescript":{"source":"iana"},"application/vnd.collabio.xodocuments.document":{"source":"iana"},"application/vnd.collabio.xodocuments.document-template":{"source":"iana"},"application/vnd.collabio.xodocuments.presentation":{"source":"iana"},"application/vnd.collabio.xodocuments.presentation-template":{"source":"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{"source":"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{"source":"iana"},"application/vnd.collection+json":{"source":"iana","compressible":true},"application/vnd.collection.doc+json":{"source":"iana","compressible":true},"application/vnd.collection.next+json":{"source":"iana","compressible":true},"application/vnd.comicbook+zip":{"source":"iana","compressible":false},"application/vnd.comicbook-rar":{"source":"iana"},"application/vnd.commerce-battelle":{"source":"iana"},"application/vnd.commonspace":{"source":"iana","extensions":["csp"]},"application/vnd.contact.cmsg":{"source":"iana","extensions":["cdbcmsg"]},"application/vnd.coreos.ignition+json":{"source":"iana","compressible":true},"application/vnd.cosmocaller":{"source":"iana","extensions":["cmc"]},"application/vnd.crick.clicker":{"source":"iana","extensions":["clkx"]},"application/vnd.crick.clicker.keyboard":{"source":"iana","extensions":["clkk"]},"application/vnd.crick.clicker.palette":{"source":"iana","extensions":["clkp"]},"application/vnd.crick.clicker.template":{"source":"iana","extensions":["clkt"]},"application/vnd.crick.clicker.wordbank":{"source":"iana","extensions":["clkw"]},"application/vnd.criticaltools.wbs+xml":{"source":"iana","compressible":true,"extensions":["wbs"]},"application/vnd.ctc-posml":{"source":"iana","extensions":["pml"]},"application/vnd.ctct.ws+xml":{"source":"iana","compressible":true},"application/vnd.cups-pdf":{"source":"iana"},"application/vnd.cups-postscript":{"source":"iana"},"application/vnd.cups-ppd":{"source":"iana","extensions":["ppd"]},"application/vnd.cups-raster":{"source":"iana"},"application/vnd.cups-raw":{"source":"iana"},"application/vnd.curl":{"source":"iana"},"application/vnd.curl.car":{"source":"apache","extensions":["car"]},"application/vnd.curl.pcurl":{"source":"apache","extensions":["pcurl"]},"application/vnd.cyan.dean.root+xml":{"source":"iana","compressible":true},"application/vnd.cybank":{"source":"iana"},"application/vnd.d2l.coursepackage1p0+zip":{"source":"iana","compressible":false},"application/vnd.dart":{"source":"iana","compressible":true,"extensions":["dart"]},"application/vnd.data-vision.rdz":{"source":"iana","extensions":["rdz"]},"application/vnd.datapackage+json":{"source":"iana","compressible":true},"application/vnd.dataresource+json":{"source":"iana","compressible":true},"application/vnd.debian.binary-package":{"source":"iana"},"application/vnd.dece.data":{"source":"iana","extensions":["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{"source":"iana","compressible":true,"extensions":["uvt","uvvt"]},"application/vnd.dece.unspecified":{"source":"iana","extensions":["uvx","uvvx"]},"application/vnd.dece.zip":{"source":"iana","extensions":["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{"source":"iana","extensions":["fe_launch"]},"application/vnd.desmume.movie":{"source":"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{"source":"iana"},"application/vnd.dm.delegation+xml":{"source":"iana","compressible":true},"application/vnd.dna":{"source":"iana","extensions":["dna"]},"application/vnd.document+json":{"source":"iana","compressible":true},"application/vnd.dolby.mlp":{"source":"apache","extensions":["mlp"]},"application/vnd.dolby.mobile.1":{"source":"iana"},"application/vnd.dolby.mobile.2":{"source":"iana"},"application/vnd.doremir.scorecloud-binary-document":{"source":"iana"},"application/vnd.dpgraph":{"source":"iana","extensions":["dpg"]},"application/vnd.dreamfactory":{"source":"iana","extensions":["dfac"]},"application/vnd.drive+json":{"source":"iana","compressible":true},"application/vnd.ds-keypoint":{"source":"apache","extensions":["kpxx"]},"application/vnd.dtg.local":{"source":"iana"},"application/vnd.dtg.local.flash":{"source":"iana"},"application/vnd.dtg.local.html":{"source":"iana"},"application/vnd.dvb.ait":{"source":"iana","extensions":["ait"]},"application/vnd.dvb.dvbj":{"source":"iana"},"application/vnd.dvb.esgcontainer":{"source":"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{"source":"iana"},"application/vnd.dvb.ipdcesgaccess":{"source":"iana"},"application/vnd.dvb.ipdcesgaccess2":{"source":"iana"},"application/vnd.dvb.ipdcesgpdd":{"source":"iana"},"application/vnd.dvb.ipdcroaming":{"source":"iana"},"application/vnd.dvb.iptv.alfec-base":{"source":"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{"source":"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-container+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-generic+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-msglist+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-registration-request+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-registration-response+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-init+xml":{"source":"iana","compressible":true},"application/vnd.dvb.pfr":{"source":"iana"},"application/vnd.dvb.service":{"source":"iana","extensions":["svc"]},"application/vnd.dxr":{"source":"iana"},"application/vnd.dynageo":{"source":"iana","extensions":["geo"]},"application/vnd.dzr":{"source":"iana"},"application/vnd.easykaraoke.cdgdownload":{"source":"iana"},"application/vnd.ecdis-update":{"source":"iana"},"application/vnd.ecip.rlp":{"source":"iana"},"application/vnd.ecowin.chart":{"source":"iana","extensions":["mag"]},"application/vnd.ecowin.filerequest":{"source":"iana"},"application/vnd.ecowin.fileupdate":{"source":"iana"},"application/vnd.ecowin.series":{"source":"iana"},"application/vnd.ecowin.seriesrequest":{"source":"iana"},"application/vnd.ecowin.seriesupdate":{"source":"iana"},"application/vnd.efi.img":{"source":"iana"},"application/vnd.efi.iso":{"source":"iana"},"application/vnd.emclient.accessrequest+xml":{"source":"iana","compressible":true},"application/vnd.enliven":{"source":"iana","extensions":["nml"]},"application/vnd.enphase.envoy":{"source":"iana"},"application/vnd.eprints.data+xml":{"source":"iana","compressible":true},"application/vnd.epson.esf":{"source":"iana","extensions":["esf"]},"application/vnd.epson.msf":{"source":"iana","extensions":["msf"]},"application/vnd.epson.quickanime":{"source":"iana","extensions":["qam"]},"application/vnd.epson.salt":{"source":"iana","extensions":["slt"]},"application/vnd.epson.ssf":{"source":"iana","extensions":["ssf"]},"application/vnd.ericsson.quickcall":{"source":"iana"},"application/vnd.espass-espass+zip":{"source":"iana","compressible":false},"application/vnd.eszigno3+xml":{"source":"iana","compressible":true,"extensions":["es3","et3"]},"application/vnd.etsi.aoc+xml":{"source":"iana","compressible":true},"application/vnd.etsi.asic-e+zip":{"source":"iana","compressible":false},"application/vnd.etsi.asic-s+zip":{"source":"iana","compressible":false},"application/vnd.etsi.cug+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvcommand+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvdiscovery+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvprofile+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-bc+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-cod+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-npvr+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvservice+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsync+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvueprofile+xml":{"source":"iana","compressible":true},"application/vnd.etsi.mcid+xml":{"source":"iana","compressible":true},"application/vnd.etsi.mheg5":{"source":"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{"source":"iana","compressible":true},"application/vnd.etsi.pstn+xml":{"source":"iana","compressible":true},"application/vnd.etsi.sci+xml":{"source":"iana","compressible":true},"application/vnd.etsi.simservs+xml":{"source":"iana","compressible":true},"application/vnd.etsi.timestamp-token":{"source":"iana"},"application/vnd.etsi.tsl+xml":{"source":"iana","compressible":true},"application/vnd.etsi.tsl.der":{"source":"iana"},"application/vnd.eudora.data":{"source":"iana"},"application/vnd.evolv.ecig.profile":{"source":"iana"},"application/vnd.evolv.ecig.settings":{"source":"iana"},"application/vnd.evolv.ecig.theme":{"source":"iana"},"application/vnd.exstream-empower+zip":{"source":"iana","compressible":false},"application/vnd.ezpix-album":{"source":"iana","extensions":["ez2"]},"application/vnd.ezpix-package":{"source":"iana","extensions":["ez3"]},"application/vnd.f-secure.mobile":{"source":"iana"},"application/vnd.fastcopy-disk-image":{"source":"iana"},"application/vnd.fdf":{"source":"iana","extensions":["fdf"]},"application/vnd.fdsn.mseed":{"source":"iana","extensions":["mseed"]},"application/vnd.fdsn.seed":{"source":"iana","extensions":["seed","dataless"]},"application/vnd.ffsns":{"source":"iana"},"application/vnd.filmit.zfc":{"source":"iana"},"application/vnd.fints":{"source":"iana"},"application/vnd.firemonkeys.cloudcell":{"source":"iana"},"application/vnd.flographit":{"source":"iana","extensions":["gph"]},"application/vnd.fluxtime.clip":{"source":"iana","extensions":["ftc"]},"application/vnd.font-fontforge-sfd":{"source":"iana"},"application/vnd.framemaker":{"source":"iana","extensions":["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{"source":"iana","extensions":["fnc"]},"application/vnd.frogans.ltf":{"source":"iana","extensions":["ltf"]},"application/vnd.fsc.weblaunch":{"source":"iana","extensions":["fsc"]},"application/vnd.fujitsu.oasys":{"source":"iana","extensions":["oas"]},"application/vnd.fujitsu.oasys2":{"source":"iana","extensions":["oa2"]},"application/vnd.fujitsu.oasys3":{"source":"iana","extensions":["oa3"]},"application/vnd.fujitsu.oasysgp":{"source":"iana","extensions":["fg5"]},"application/vnd.fujitsu.oasysprs":{"source":"iana","extensions":["bh2"]},"application/vnd.fujixerox.art-ex":{"source":"iana"},"application/vnd.fujixerox.art4":{"source":"iana"},"application/vnd.fujixerox.ddd":{"source":"iana","extensions":["ddd"]},"application/vnd.fujixerox.docuworks":{"source":"iana","extensions":["xdw"]},"application/vnd.fujixerox.docuworks.binder":{"source":"iana","extensions":["xbd"]},"application/vnd.fujixerox.docuworks.container":{"source":"iana"},"application/vnd.fujixerox.hbpl":{"source":"iana"},"application/vnd.fut-misnet":{"source":"iana"},"application/vnd.futoin+cbor":{"source":"iana"},"application/vnd.futoin+json":{"source":"iana","compressible":true},"application/vnd.fuzzysheet":{"source":"iana","extensions":["fzs"]},"application/vnd.genomatix.tuxedo":{"source":"iana","extensions":["txd"]},"application/vnd.geo+json":{"source":"iana","compressible":true},"application/vnd.geocube+xml":{"source":"iana","compressible":true},"application/vnd.geogebra.file":{"source":"iana","extensions":["ggb"]},"application/vnd.geogebra.tool":{"source":"iana","extensions":["ggt"]},"application/vnd.geometry-explorer":{"source":"iana","extensions":["gex","gre"]},"application/vnd.geonext":{"source":"iana","extensions":["gxt"]},"application/vnd.geoplan":{"source":"iana","extensions":["g2w"]},"application/vnd.geospace":{"source":"iana","extensions":["g3w"]},"application/vnd.gerber":{"source":"iana"},"application/vnd.globalplatform.card-content-mgt":{"source":"iana"},"application/vnd.globalplatform.card-content-mgt-response":{"source":"iana"},"application/vnd.gmx":{"source":"iana","extensions":["gmx"]},"application/vnd.google-apps.document":{"compressible":false,"extensions":["gdoc"]},"application/vnd.google-apps.presentation":{"compressible":false,"extensions":["gslides"]},"application/vnd.google-apps.spreadsheet":{"compressible":false,"extensions":["gsheet"]},"application/vnd.google-earth.kml+xml":{"source":"iana","compressible":true,"extensions":["kml"]},"application/vnd.google-earth.kmz":{"source":"iana","compressible":false,"extensions":["kmz"]},"application/vnd.gov.sk.e-form+xml":{"source":"iana","compressible":true},"application/vnd.gov.sk.e-form+zip":{"source":"iana","compressible":false},"application/vnd.gov.sk.xmldatacontainer+xml":{"source":"iana","compressible":true},"application/vnd.grafeq":{"source":"iana","extensions":["gqf","gqs"]},"application/vnd.gridmp":{"source":"iana"},"application/vnd.groove-account":{"source":"iana","extensions":["gac"]},"application/vnd.groove-help":{"source":"iana","extensions":["ghf"]},"application/vnd.groove-identity-message":{"source":"iana","extensions":["gim"]},"application/vnd.groove-injector":{"source":"iana","extensions":["grv"]},"application/vnd.groove-tool-message":{"source":"iana","extensions":["gtm"]},"application/vnd.groove-tool-template":{"source":"iana","extensions":["tpl"]},"application/vnd.groove-vcard":{"source":"iana","extensions":["vcg"]},"application/vnd.hal+json":{"source":"iana","compressible":true},"application/vnd.hal+xml":{"source":"iana","compressible":true,"extensions":["hal"]},"application/vnd.handheld-entertainment+xml":{"source":"iana","compressible":true,"extensions":["zmm"]},"application/vnd.hbci":{"source":"iana","extensions":["hbci"]},"application/vnd.hc+json":{"source":"iana","compressible":true},"application/vnd.hcl-bireports":{"source":"iana"},"application/vnd.hdt":{"source":"iana"},"application/vnd.heroku+json":{"source":"iana","compressible":true},"application/vnd.hhe.lesson-player":{"source":"iana","extensions":["les"]},"application/vnd.hp-hpgl":{"source":"iana","extensions":["hpgl"]},"application/vnd.hp-hpid":{"source":"iana","extensions":["hpid"]},"application/vnd.hp-hps":{"source":"iana","extensions":["hps"]},"application/vnd.hp-jlyt":{"source":"iana","extensions":["jlt"]},"application/vnd.hp-pcl":{"source":"iana","extensions":["pcl"]},"application/vnd.hp-pclxl":{"source":"iana","extensions":["pclxl"]},"application/vnd.httphone":{"source":"iana"},"application/vnd.hydrostatix.sof-data":{"source":"iana","extensions":["sfd-hdstx"]},"application/vnd.hyper+json":{"source":"iana","compressible":true},"application/vnd.hyper-item+json":{"source":"iana","compressible":true},"application/vnd.hyperdrive+json":{"source":"iana","compressible":true},"application/vnd.hzn-3d-crossword":{"source":"iana"},"application/vnd.ibm.afplinedata":{"source":"iana"},"application/vnd.ibm.electronic-media":{"source":"iana"},"application/vnd.ibm.minipay":{"source":"iana","extensions":["mpy"]},"application/vnd.ibm.modcap":{"source":"iana","extensions":["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{"source":"iana","extensions":["irm"]},"application/vnd.ibm.secure-container":{"source":"iana","extensions":["sc"]},"application/vnd.iccprofile":{"source":"iana","extensions":["icc","icm"]},"application/vnd.ieee.1905":{"source":"iana"},"application/vnd.igloader":{"source":"iana","extensions":["igl"]},"application/vnd.imagemeter.folder+zip":{"source":"iana","compressible":false},"application/vnd.imagemeter.image+zip":{"source":"iana","compressible":false},"application/vnd.immervision-ivp":{"source":"iana","extensions":["ivp"]},"application/vnd.immervision-ivu":{"source":"iana","extensions":["ivu"]},"application/vnd.ims.imsccv1p1":{"source":"iana"},"application/vnd.ims.imsccv1p2":{"source":"iana"},"application/vnd.ims.imsccv1p3":{"source":"iana"},"application/vnd.ims.lis.v2.result+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolproxy+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolproxy.id+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolsettings+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolsettings.simple+json":{"source":"iana","compressible":true},"application/vnd.informedcontrol.rms+xml":{"source":"iana","compressible":true},"application/vnd.informix-visionary":{"source":"iana"},"application/vnd.infotech.project":{"source":"iana"},"application/vnd.infotech.project+xml":{"source":"iana","compressible":true},"application/vnd.innopath.wamp.notification":{"source":"iana"},"application/vnd.insors.igm":{"source":"iana","extensions":["igm"]},"application/vnd.intercon.formnet":{"source":"iana","extensions":["xpw","xpx"]},"application/vnd.intergeo":{"source":"iana","extensions":["i2g"]},"application/vnd.intertrust.digibox":{"source":"iana"},"application/vnd.intertrust.nncp":{"source":"iana"},"application/vnd.intu.qbo":{"source":"iana","extensions":["qbo"]},"application/vnd.intu.qfx":{"source":"iana","extensions":["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.conceptitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.knowledgeitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.newsitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.newsmessage+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.packageitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.planningitem+xml":{"source":"iana","compressible":true},"application/vnd.ipunplugged.rcprofile":{"source":"iana","extensions":["rcprofile"]},"application/vnd.irepository.package+xml":{"source":"iana","compressible":true,"extensions":["irp"]},"application/vnd.is-xpr":{"source":"iana","extensions":["xpr"]},"application/vnd.isac.fcs":{"source":"iana","extensions":["fcs"]},"application/vnd.jam":{"source":"iana","extensions":["jam"]},"application/vnd.japannet-directory-service":{"source":"iana"},"application/vnd.japannet-jpnstore-wakeup":{"source":"iana"},"application/vnd.japannet-payment-wakeup":{"source":"iana"},"application/vnd.japannet-registration":{"source":"iana"},"application/vnd.japannet-registration-wakeup":{"source":"iana"},"application/vnd.japannet-setstore-wakeup":{"source":"iana"},"application/vnd.japannet-verification":{"source":"iana"},"application/vnd.japannet-verification-wakeup":{"source":"iana"},"application/vnd.jcp.javame.midlet-rms":{"source":"iana","extensions":["rms"]},"application/vnd.jisp":{"source":"iana","extensions":["jisp"]},"application/vnd.joost.joda-archive":{"source":"iana","extensions":["joda"]},"application/vnd.jsk.isdn-ngn":{"source":"iana"},"application/vnd.kahootz":{"source":"iana","extensions":["ktz","ktr"]},"application/vnd.kde.karbon":{"source":"iana","extensions":["karbon"]},"application/vnd.kde.kchart":{"source":"iana","extensions":["chrt"]},"application/vnd.kde.kformula":{"source":"iana","extensions":["kfo"]},"application/vnd.kde.kivio":{"source":"iana","extensions":["flw"]},"application/vnd.kde.kontour":{"source":"iana","extensions":["kon"]},"application/vnd.kde.kpresenter":{"source":"iana","extensions":["kpr","kpt"]},"application/vnd.kde.kspread":{"source":"iana","extensions":["ksp"]},"application/vnd.kde.kword":{"source":"iana","extensions":["kwd","kwt"]},"application/vnd.kenameaapp":{"source":"iana","extensions":["htke"]},"application/vnd.kidspiration":{"source":"iana","extensions":["kia"]},"application/vnd.kinar":{"source":"iana","extensions":["kne","knp"]},"application/vnd.koan":{"source":"iana","extensions":["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{"source":"iana","extensions":["sse"]},"application/vnd.las.las+json":{"source":"iana","compressible":true},"application/vnd.las.las+xml":{"source":"iana","compressible":true,"extensions":["lasxml"]},"application/vnd.leap+json":{"source":"iana","compressible":true},"application/vnd.liberty-request+xml":{"source":"iana","compressible":true},"application/vnd.llamagraphics.life-balance.desktop":{"source":"iana","extensions":["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{"source":"iana","compressible":true,"extensions":["lbe"]},"application/vnd.lotus-1-2-3":{"source":"iana","extensions":["123"]},"application/vnd.lotus-approach":{"source":"iana","extensions":["apr"]},"application/vnd.lotus-freelance":{"source":"iana","extensions":["pre"]},"application/vnd.lotus-notes":{"source":"iana","extensions":["nsf"]},"application/vnd.lotus-organizer":{"source":"iana","extensions":["org"]},"application/vnd.lotus-screencam":{"source":"iana","extensions":["scm"]},"application/vnd.lotus-wordpro":{"source":"iana","extensions":["lwp"]},"application/vnd.macports.portpkg":{"source":"iana","extensions":["portpkg"]},"application/vnd.mapbox-vector-tile":{"source":"iana"},"application/vnd.marlin.drm.actiontoken+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.conftoken+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.license+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.mdcf":{"source":"iana"},"application/vnd.mason+json":{"source":"iana","compressible":true},"application/vnd.maxmind.maxmind-db":{"source":"iana"},"application/vnd.mcd":{"source":"iana","extensions":["mcd"]},"application/vnd.medcalcdata":{"source":"iana","extensions":["mc1"]},"application/vnd.mediastation.cdkey":{"source":"iana","extensions":["cdkey"]},"application/vnd.meridian-slingshot":{"source":"iana"},"application/vnd.mfer":{"source":"iana","extensions":["mwf"]},"application/vnd.mfmp":{"source":"iana","extensions":["mfm"]},"application/vnd.micro+json":{"source":"iana","compressible":true},"application/vnd.micrografx.flo":{"source":"iana","extensions":["flo"]},"application/vnd.micrografx.igx":{"source":"iana","extensions":["igx"]},"application/vnd.microsoft.portable-executable":{"source":"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{"source":"iana"},"application/vnd.miele+json":{"source":"iana","compressible":true},"application/vnd.mif":{"source":"iana","extensions":["mif"]},"application/vnd.minisoft-hp3000-save":{"source":"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{"source":"iana"},"application/vnd.mobius.daf":{"source":"iana","extensions":["daf"]},"application/vnd.mobius.dis":{"source":"iana","extensions":["dis"]},"application/vnd.mobius.mbk":{"source":"iana","extensions":["mbk"]},"application/vnd.mobius.mqy":{"source":"iana","extensions":["mqy"]},"application/vnd.mobius.msl":{"source":"iana","extensions":["msl"]},"application/vnd.mobius.plc":{"source":"iana","extensions":["plc"]},"application/vnd.mobius.txf":{"source":"iana","extensions":["txf"]},"application/vnd.mophun.application":{"source":"iana","extensions":["mpn"]},"application/vnd.mophun.certificate":{"source":"iana","extensions":["mpc"]},"application/vnd.motorola.flexsuite":{"source":"iana"},"application/vnd.motorola.flexsuite.adsi":{"source":"iana"},"application/vnd.motorola.flexsuite.fis":{"source":"iana"},"application/vnd.motorola.flexsuite.gotap":{"source":"iana"},"application/vnd.motorola.flexsuite.kmr":{"source":"iana"},"application/vnd.motorola.flexsuite.ttc":{"source":"iana"},"application/vnd.motorola.flexsuite.wem":{"source":"iana"},"application/vnd.motorola.iprm":{"source":"iana"},"application/vnd.mozilla.xul+xml":{"source":"iana","compressible":true,"extensions":["xul"]},"application/vnd.ms-3mfdocument":{"source":"iana"},"application/vnd.ms-artgalry":{"source":"iana","extensions":["cil"]},"application/vnd.ms-asf":{"source":"iana"},"application/vnd.ms-cab-compressed":{"source":"iana","extensions":["cab"]},"application/vnd.ms-color.iccprofile":{"source":"apache"},"application/vnd.ms-excel":{"source":"iana","compressible":false,"extensions":["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{"source":"iana","extensions":["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{"source":"iana","extensions":["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{"source":"iana","extensions":["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{"source":"iana","extensions":["xltm"]},"application/vnd.ms-fontobject":{"source":"iana","compressible":true,"extensions":["eot"]},"application/vnd.ms-htmlhelp":{"source":"iana","extensions":["chm"]},"application/vnd.ms-ims":{"source":"iana","extensions":["ims"]},"application/vnd.ms-lrm":{"source":"iana","extensions":["lrm"]},"application/vnd.ms-office.activex+xml":{"source":"iana","compressible":true},"application/vnd.ms-officetheme":{"source":"iana","extensions":["thmx"]},"application/vnd.ms-opentype":{"source":"apache","compressible":true},"application/vnd.ms-outlook":{"compressible":false,"extensions":["msg"]},"application/vnd.ms-package.obfuscated-opentype":{"source":"apache"},"application/vnd.ms-pki.seccat":{"source":"apache","extensions":["cat"]},"application/vnd.ms-pki.stl":{"source":"apache","extensions":["stl"]},"application/vnd.ms-playready.initiator+xml":{"source":"iana","compressible":true},"application/vnd.ms-powerpoint":{"source":"iana","compressible":false,"extensions":["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{"source":"iana","extensions":["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{"source":"iana","extensions":["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{"source":"iana","extensions":["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{"source":"iana","extensions":["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{"source":"iana","extensions":["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{"source":"iana","compressible":true},"application/vnd.ms-printing.printticket+xml":{"source":"apache","compressible":true},"application/vnd.ms-printschematicket+xml":{"source":"iana","compressible":true},"application/vnd.ms-project":{"source":"iana","extensions":["mpp","mpt"]},"application/vnd.ms-tnef":{"source":"iana"},"application/vnd.ms-windows.devicepairing":{"source":"iana"},"application/vnd.ms-windows.nwprinting.oob":{"source":"iana"},"application/vnd.ms-windows.printerpairing":{"source":"iana"},"application/vnd.ms-windows.wsd.oob":{"source":"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{"source":"iana"},"application/vnd.ms-wmdrm.lic-resp":{"source":"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{"source":"iana"},"application/vnd.ms-wmdrm.meter-resp":{"source":"iana"},"application/vnd.ms-word.document.macroenabled.12":{"source":"iana","extensions":["docm"]},"application/vnd.ms-word.template.macroenabled.12":{"source":"iana","extensions":["dotm"]},"application/vnd.ms-works":{"source":"iana","extensions":["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{"source":"iana","extensions":["wpl"]},"application/vnd.ms-xpsdocument":{"source":"iana","compressible":false,"extensions":["xps"]},"application/vnd.msa-disk-image":{"source":"iana"},"application/vnd.mseq":{"source":"iana","extensions":["mseq"]},"application/vnd.msign":{"source":"iana"},"application/vnd.multiad.creator":{"source":"iana"},"application/vnd.multiad.creator.cif":{"source":"iana"},"application/vnd.music-niff":{"source":"iana"},"application/vnd.musician":{"source":"iana","extensions":["mus"]},"application/vnd.muvee.style":{"source":"iana","extensions":["msty"]},"application/vnd.mynfc":{"source":"iana","extensions":["taglet"]},"application/vnd.ncd.control":{"source":"iana"},"application/vnd.ncd.reference":{"source":"iana"},"application/vnd.nearst.inv+json":{"source":"iana","compressible":true},"application/vnd.nervana":{"source":"iana"},"application/vnd.netfpx":{"source":"iana"},"application/vnd.neurolanguage.nlu":{"source":"iana","extensions":["nlu"]},"application/vnd.nimn":{"source":"iana"},"application/vnd.nintendo.nitro.rom":{"source":"iana"},"application/vnd.nintendo.snes.rom":{"source":"iana"},"application/vnd.nitf":{"source":"iana","extensions":["ntf","nitf"]},"application/vnd.noblenet-directory":{"source":"iana","extensions":["nnd"]},"application/vnd.noblenet-sealer":{"source":"iana","extensions":["nns"]},"application/vnd.noblenet-web":{"source":"iana","extensions":["nnw"]},"application/vnd.nokia.catalogs":{"source":"iana"},"application/vnd.nokia.conml+wbxml":{"source":"iana"},"application/vnd.nokia.conml+xml":{"source":"iana","compressible":true},"application/vnd.nokia.iptv.config+xml":{"source":"iana","compressible":true},"application/vnd.nokia.isds-radio-presets":{"source":"iana"},"application/vnd.nokia.landmark+wbxml":{"source":"iana"},"application/vnd.nokia.landmark+xml":{"source":"iana","compressible":true},"application/vnd.nokia.landmarkcollection+xml":{"source":"iana","compressible":true},"application/vnd.nokia.n-gage.ac+xml":{"source":"iana","compressible":true},"application/vnd.nokia.n-gage.data":{"source":"iana","extensions":["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{"source":"iana","extensions":["n-gage"]},"application/vnd.nokia.ncd":{"source":"iana"},"application/vnd.nokia.pcd+wbxml":{"source":"iana"},"application/vnd.nokia.pcd+xml":{"source":"iana","compressible":true},"application/vnd.nokia.radio-preset":{"source":"iana","extensions":["rpst"]},"application/vnd.nokia.radio-presets":{"source":"iana","extensions":["rpss"]},"application/vnd.novadigm.edm":{"source":"iana","extensions":["edm"]},"application/vnd.novadigm.edx":{"source":"iana","extensions":["edx"]},"application/vnd.novadigm.ext":{"source":"iana","extensions":["ext"]},"application/vnd.ntt-local.content-share":{"source":"iana"},"application/vnd.ntt-local.file-transfer":{"source":"iana"},"application/vnd.ntt-local.ogw_remote-access":{"source":"iana"},"application/vnd.ntt-local.sip-ta_remote":{"source":"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{"source":"iana"},"application/vnd.oasis.opendocument.chart":{"source":"iana","extensions":["odc"]},"application/vnd.oasis.opendocument.chart-template":{"source":"iana","extensions":["otc"]},"application/vnd.oasis.opendocument.database":{"source":"iana","extensions":["odb"]},"application/vnd.oasis.opendocument.formula":{"source":"iana","extensions":["odf"]},"application/vnd.oasis.opendocument.formula-template":{"source":"iana","extensions":["odft"]},"application/vnd.oasis.opendocument.graphics":{"source":"iana","compressible":false,"extensions":["odg"]},"application/vnd.oasis.opendocument.graphics-template":{"source":"iana","extensions":["otg"]},"application/vnd.oasis.opendocument.image":{"source":"iana","extensions":["odi"]},"application/vnd.oasis.opendocument.image-template":{"source":"iana","extensions":["oti"]},"application/vnd.oasis.opendocument.presentation":{"source":"iana","compressible":false,"extensions":["odp"]},"application/vnd.oasis.opendocument.presentation-template":{"source":"iana","extensions":["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{"source":"iana","compressible":false,"extensions":["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{"source":"iana","extensions":["ots"]},"application/vnd.oasis.opendocument.text":{"source":"iana","compressible":false,"extensions":["odt"]},"application/vnd.oasis.opendocument.text-master":{"source":"iana","extensions":["odm"]},"application/vnd.oasis.opendocument.text-template":{"source":"iana","extensions":["ott"]},"application/vnd.oasis.opendocument.text-web":{"source":"iana","extensions":["oth"]},"application/vnd.obn":{"source":"iana"},"application/vnd.ocf+cbor":{"source":"iana"},"application/vnd.oftn.l10n+json":{"source":"iana","compressible":true},"application/vnd.oipf.contentaccessdownload+xml":{"source":"iana","compressible":true},"application/vnd.oipf.contentaccessstreaming+xml":{"source":"iana","compressible":true},"application/vnd.oipf.cspg-hexbinary":{"source":"iana"},"application/vnd.oipf.dae.svg+xml":{"source":"iana","compressible":true},"application/vnd.oipf.dae.xhtml+xml":{"source":"iana","compressible":true},"application/vnd.oipf.mippvcontrolmessage+xml":{"source":"iana","compressible":true},"application/vnd.oipf.pae.gem":{"source":"iana"},"application/vnd.oipf.spdiscovery+xml":{"source":"iana","compressible":true},"application/vnd.oipf.spdlist+xml":{"source":"iana","compressible":true},"application/vnd.oipf.ueprofile+xml":{"source":"iana","compressible":true},"application/vnd.oipf.userprofile+xml":{"source":"iana","compressible":true},"application/vnd.olpc-sugar":{"source":"iana","extensions":["xo"]},"application/vnd.oma-scws-config":{"source":"iana"},"application/vnd.oma-scws-http-request":{"source":"iana"},"application/vnd.oma-scws-http-response":{"source":"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.drm-trigger+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.imd+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.ltkm":{"source":"iana"},"application/vnd.oma.bcast.notification+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.provisioningtrigger":{"source":"iana"},"application/vnd.oma.bcast.sgboot":{"source":"iana"},"application/vnd.oma.bcast.sgdd+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.sgdu":{"source":"iana"},"application/vnd.oma.bcast.simple-symbol-container":{"source":"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.sprov+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.stkm":{"source":"iana"},"application/vnd.oma.cab-address-book+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-feature-handler+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-pcc+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-subs-invite+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-user-prefs+xml":{"source":"iana","compressible":true},"application/vnd.oma.dcd":{"source":"iana"},"application/vnd.oma.dcdc":{"source":"iana"},"application/vnd.oma.dd2+xml":{"source":"iana","compressible":true,"extensions":["dd2"]},"application/vnd.oma.drm.risd+xml":{"source":"iana","compressible":true},"application/vnd.oma.group-usage-list+xml":{"source":"iana","compressible":true},"application/vnd.oma.lwm2m+json":{"source":"iana","compressible":true},"application/vnd.oma.lwm2m+tlv":{"source":"iana"},"application/vnd.oma.pal+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.detailed-progress-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.final-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.groups+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.invocation-descriptor+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.optimized-progress-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.push":{"source":"iana"},"application/vnd.oma.scidm.messages+xml":{"source":"iana","compressible":true},"application/vnd.oma.xcap-directory+xml":{"source":"iana","compressible":true},"application/vnd.omads-email+xml":{"source":"iana","compressible":true},"application/vnd.omads-file+xml":{"source":"iana","compressible":true},"application/vnd.omads-folder+xml":{"source":"iana","compressible":true},"application/vnd.omaloc-supl-init":{"source":"iana"},"application/vnd.onepager":{"source":"iana"},"application/vnd.onepagertamp":{"source":"iana"},"application/vnd.onepagertamx":{"source":"iana"},"application/vnd.onepagertat":{"source":"iana"},"application/vnd.onepagertatp":{"source":"iana"},"application/vnd.onepagertatx":{"source":"iana"},"application/vnd.openblox.game+xml":{"source":"iana","compressible":true},"application/vnd.openblox.game-binary":{"source":"iana"},"application/vnd.openeye.oeb":{"source":"iana"},"application/vnd.openofficeorg.extension":{"source":"apache","extensions":["oxt"]},"application/vnd.openstreetmap.data+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawing+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{"source":"iana","compressible":false,"extensions":["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slide":{"source":"iana","extensions":["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{"source":"iana","extensions":["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.template":{"source":"iana","extensions":["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{"source":"iana","compressible":false,"extensions":["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{"source":"iana","extensions":["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.theme+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.vmldrawing":{"source":"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{"source":"iana","compressible":false,"extensions":["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{"source":"iana","extensions":["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.core-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.relationships+xml":{"source":"iana","compressible":true},"application/vnd.oracle.resource+json":{"source":"iana","compressible":true},"application/vnd.orange.indata":{"source":"iana"},"application/vnd.osa.netdeploy":{"source":"iana"},"application/vnd.osgeo.mapguide.package":{"source":"iana","extensions":["mgp"]},"application/vnd.osgi.bundle":{"source":"iana"},"application/vnd.osgi.dp":{"source":"iana","extensions":["dp"]},"application/vnd.osgi.subsystem":{"source":"iana","extensions":["esa"]},"application/vnd.otps.ct-kip+xml":{"source":"iana","compressible":true},"application/vnd.oxli.countgraph":{"source":"iana"},"application/vnd.pagerduty+json":{"source":"iana","compressible":true},"application/vnd.palm":{"source":"iana","extensions":["pdb","pqa","oprc"]},"application/vnd.panoply":{"source":"iana"},"application/vnd.paos.xml":{"source":"iana"},"application/vnd.patentdive":{"source":"iana"},"application/vnd.pawaafile":{"source":"iana","extensions":["paw"]},"application/vnd.pcos":{"source":"iana"},"application/vnd.pg.format":{"source":"iana","extensions":["str"]},"application/vnd.pg.osasli":{"source":"iana","extensions":["ei6"]},"application/vnd.piaccess.application-licence":{"source":"iana"},"application/vnd.picsel":{"source":"iana","extensions":["efif"]},"application/vnd.pmi.widget":{"source":"iana","extensions":["wg"]},"application/vnd.poc.group-advertisement+xml":{"source":"iana","compressible":true},"application/vnd.pocketlearn":{"source":"iana","extensions":["plf"]},"application/vnd.powerbuilder6":{"source":"iana","extensions":["pbd"]},"application/vnd.powerbuilder6-s":{"source":"iana"},"application/vnd.powerbuilder7":{"source":"iana"},"application/vnd.powerbuilder7-s":{"source":"iana"},"application/vnd.powerbuilder75":{"source":"iana"},"application/vnd.powerbuilder75-s":{"source":"iana"},"application/vnd.preminet":{"source":"iana"},"application/vnd.previewsystems.box":{"source":"iana","extensions":["box"]},"application/vnd.proteus.magazine":{"source":"iana","extensions":["mgz"]},"application/vnd.psfs":{"source":"iana"},"application/vnd.publishare-delta-tree":{"source":"iana","extensions":["qps"]},"application/vnd.pvi.ptid1":{"source":"iana","extensions":["ptid"]},"application/vnd.pwg-multiplexed":{"source":"iana"},"application/vnd.pwg-xhtml-print+xml":{"source":"iana","compressible":true},"application/vnd.qualcomm.brew-app-res":{"source":"iana"},"application/vnd.quarantainenet":{"source":"iana"},"application/vnd.quark.quarkxpress":{"source":"iana","extensions":["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{"source":"iana"},"application/vnd.radisys.moml+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-conf+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-conn+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-dialog+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-stream+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-conf+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-base+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-fax-detect+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-group+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-speech+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-transform+xml":{"source":"iana","compressible":true},"application/vnd.rainstor.data":{"source":"iana"},"application/vnd.rapid":{"source":"iana"},"application/vnd.rar":{"source":"iana"},"application/vnd.realvnc.bed":{"source":"iana","extensions":["bed"]},"application/vnd.recordare.musicxml":{"source":"iana","extensions":["mxl"]},"application/vnd.recordare.musicxml+xml":{"source":"iana","compressible":true,"extensions":["musicxml"]},"application/vnd.renlearn.rlprint":{"source":"iana"},"application/vnd.restful+json":{"source":"iana","compressible":true},"application/vnd.rig.cryptonote":{"source":"iana","extensions":["cryptonote"]},"application/vnd.rim.cod":{"source":"apache","extensions":["cod"]},"application/vnd.rn-realmedia":{"source":"apache","extensions":["rm"]},"application/vnd.rn-realmedia-vbr":{"source":"apache","extensions":["rmvb"]},"application/vnd.route66.link66+xml":{"source":"iana","compressible":true,"extensions":["link66"]},"application/vnd.rs-274x":{"source":"iana"},"application/vnd.ruckus.download":{"source":"iana"},"application/vnd.s3sms":{"source":"iana"},"application/vnd.sailingtracker.track":{"source":"iana","extensions":["st"]},"application/vnd.sbm.cid":{"source":"iana"},"application/vnd.sbm.mid2":{"source":"iana"},"application/vnd.scribus":{"source":"iana"},"application/vnd.sealed.3df":{"source":"iana"},"application/vnd.sealed.csf":{"source":"iana"},"application/vnd.sealed.doc":{"source":"iana"},"application/vnd.sealed.eml":{"source":"iana"},"application/vnd.sealed.mht":{"source":"iana"},"application/vnd.sealed.net":{"source":"iana"},"application/vnd.sealed.ppt":{"source":"iana"},"application/vnd.sealed.tiff":{"source":"iana"},"application/vnd.sealed.xls":{"source":"iana"},"application/vnd.sealedmedia.softseal.html":{"source":"iana"},"application/vnd.sealedmedia.softseal.pdf":{"source":"iana"},"application/vnd.seemail":{"source":"iana","extensions":["see"]},"application/vnd.sema":{"source":"iana","extensions":["sema"]},"application/vnd.semd":{"source":"iana","extensions":["semd"]},"application/vnd.semf":{"source":"iana","extensions":["semf"]},"application/vnd.shana.informed.formdata":{"source":"iana","extensions":["ifm"]},"application/vnd.shana.informed.formtemplate":{"source":"iana","extensions":["itp"]},"application/vnd.shana.informed.interchange":{"source":"iana","extensions":["iif"]},"application/vnd.shana.informed.package":{"source":"iana","extensions":["ipk"]},"application/vnd.shootproof+json":{"source":"iana","compressible":true},"application/vnd.sigrok.session":{"source":"iana"},"application/vnd.simtech-mindmapper":{"source":"iana","extensions":["twd","twds"]},"application/vnd.siren+json":{"source":"iana","compressible":true},"application/vnd.smaf":{"source":"iana","extensions":["mmf"]},"application/vnd.smart.notebook":{"source":"iana"},"application/vnd.smart.teacher":{"source":"iana","extensions":["teacher"]},"application/vnd.software602.filler.form+xml":{"source":"iana","compressible":true},"application/vnd.software602.filler.form-xml-zip":{"source":"iana"},"application/vnd.solent.sdkm+xml":{"source":"iana","compressible":true,"extensions":["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{"source":"iana","extensions":["dxp"]},"application/vnd.spotfire.sfs":{"source":"iana","extensions":["sfs"]},"application/vnd.sqlite3":{"source":"iana"},"application/vnd.sss-cod":{"source":"iana"},"application/vnd.sss-dtf":{"source":"iana"},"application/vnd.sss-ntf":{"source":"iana"},"application/vnd.stardivision.calc":{"source":"apache","extensions":["sdc"]},"application/vnd.stardivision.draw":{"source":"apache","extensions":["sda"]},"application/vnd.stardivision.impress":{"source":"apache","extensions":["sdd"]},"application/vnd.stardivision.math":{"source":"apache","extensions":["smf"]},"application/vnd.stardivision.writer":{"source":"apache","extensions":["sdw","vor"]},"application/vnd.stardivision.writer-global":{"source":"apache","extensions":["sgl"]},"application/vnd.stepmania.package":{"source":"iana","extensions":["smzip"]},"application/vnd.stepmania.stepchart":{"source":"iana","extensions":["sm"]},"application/vnd.street-stream":{"source":"iana"},"application/vnd.sun.wadl+xml":{"source":"iana","compressible":true,"extensions":["wadl"]},"application/vnd.sun.xml.calc":{"source":"apache","extensions":["sxc"]},"application/vnd.sun.xml.calc.template":{"source":"apache","extensions":["stc"]},"application/vnd.sun.xml.draw":{"source":"apache","extensions":["sxd"]},"application/vnd.sun.xml.draw.template":{"source":"apache","extensions":["std"]},"application/vnd.sun.xml.impress":{"source":"apache","extensions":["sxi"]},"application/vnd.sun.xml.impress.template":{"source":"apache","extensions":["sti"]},"application/vnd.sun.xml.math":{"source":"apache","extensions":["sxm"]},"application/vnd.sun.xml.writer":{"source":"apache","extensions":["sxw"]},"application/vnd.sun.xml.writer.global":{"source":"apache","extensions":["sxg"]},"application/vnd.sun.xml.writer.template":{"source":"apache","extensions":["stw"]},"application/vnd.sus-calendar":{"source":"iana","extensions":["sus","susp"]},"application/vnd.svd":{"source":"iana","extensions":["svd"]},"application/vnd.swiftview-ics":{"source":"iana"},"application/vnd.symbian.install":{"source":"apache","extensions":["sis","sisx"]},"application/vnd.syncml+xml":{"source":"iana","compressible":true,"extensions":["xsm"]},"application/vnd.syncml.dm+wbxml":{"source":"iana","extensions":["bdm"]},"application/vnd.syncml.dm+xml":{"source":"iana","compressible":true,"extensions":["xdm"]},"application/vnd.syncml.dm.notification":{"source":"iana"},"application/vnd.syncml.dmddf+wbxml":{"source":"iana"},"application/vnd.syncml.dmddf+xml":{"source":"iana","compressible":true},"application/vnd.syncml.dmtnds+wbxml":{"source":"iana"},"application/vnd.syncml.dmtnds+xml":{"source":"iana","compressible":true},"application/vnd.syncml.ds.notification":{"source":"iana"},"application/vnd.tableschema+json":{"source":"iana","compressible":true},"application/vnd.tao.intent-module-archive":{"source":"iana","extensions":["tao"]},"application/vnd.tcpdump.pcap":{"source":"iana","extensions":["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{"source":"iana","compressible":true},"application/vnd.tmd.mediaflex.api+xml":{"source":"iana","compressible":true},"application/vnd.tml":{"source":"iana"},"application/vnd.tmobile-livetv":{"source":"iana","extensions":["tmo"]},"application/vnd.tri.onesource":{"source":"iana"},"application/vnd.trid.tpt":{"source":"iana","extensions":["tpt"]},"application/vnd.triscape.mxs":{"source":"iana","extensions":["mxs"]},"application/vnd.trueapp":{"source":"iana","extensions":["tra"]},"application/vnd.truedoc":{"source":"iana"},"application/vnd.ubisoft.webplayer":{"source":"iana"},"application/vnd.ufdl":{"source":"iana","extensions":["ufd","ufdl"]},"application/vnd.uiq.theme":{"source":"iana","extensions":["utz"]},"application/vnd.umajin":{"source":"iana","extensions":["umj"]},"application/vnd.unity":{"source":"iana","extensions":["unityweb"]},"application/vnd.uoml+xml":{"source":"iana","compressible":true,"extensions":["uoml"]},"application/vnd.uplanet.alert":{"source":"iana"},"application/vnd.uplanet.alert-wbxml":{"source":"iana"},"application/vnd.uplanet.bearer-choice":{"source":"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{"source":"iana"},"application/vnd.uplanet.cacheop":{"source":"iana"},"application/vnd.uplanet.cacheop-wbxml":{"source":"iana"},"application/vnd.uplanet.channel":{"source":"iana"},"application/vnd.uplanet.channel-wbxml":{"source":"iana"},"application/vnd.uplanet.list":{"source":"iana"},"application/vnd.uplanet.list-wbxml":{"source":"iana"},"application/vnd.uplanet.listcmd":{"source":"iana"},"application/vnd.uplanet.listcmd-wbxml":{"source":"iana"},"application/vnd.uplanet.signal":{"source":"iana"},"application/vnd.uri-map":{"source":"iana"},"application/vnd.valve.source.material":{"source":"iana"},"application/vnd.vcx":{"source":"iana","extensions":["vcx"]},"application/vnd.vd-study":{"source":"iana"},"application/vnd.vectorworks":{"source":"iana"},"application/vnd.vel+json":{"source":"iana","compressible":true},"application/vnd.verimatrix.vcas":{"source":"iana"},"application/vnd.vidsoft.vidconference":{"source":"iana"},"application/vnd.visio":{"source":"iana","extensions":["vsd","vst","vss","vsw"]},"application/vnd.visionary":{"source":"iana","extensions":["vis"]},"application/vnd.vividence.scriptfile":{"source":"iana"},"application/vnd.vsf":{"source":"iana","extensions":["vsf"]},"application/vnd.wap.sic":{"source":"iana"},"application/vnd.wap.slc":{"source":"iana"},"application/vnd.wap.wbxml":{"source":"iana","extensions":["wbxml"]},"application/vnd.wap.wmlc":{"source":"iana","extensions":["wmlc"]},"application/vnd.wap.wmlscriptc":{"source":"iana","extensions":["wmlsc"]},"application/vnd.webturbo":{"source":"iana","extensions":["wtb"]},"application/vnd.wfa.p2p":{"source":"iana"},"application/vnd.wfa.wsc":{"source":"iana"},"application/vnd.windows.devicepairing":{"source":"iana"},"application/vnd.wmc":{"source":"iana"},"application/vnd.wmf.bootstrap":{"source":"iana"},"application/vnd.wolfram.mathematica":{"source":"iana"},"application/vnd.wolfram.mathematica.package":{"source":"iana"},"application/vnd.wolfram.player":{"source":"iana","extensions":["nbp"]},"application/vnd.wordperfect":{"source":"iana","extensions":["wpd"]},"application/vnd.wqd":{"source":"iana","extensions":["wqd"]},"application/vnd.wrq-hp3000-labelled":{"source":"iana"},"application/vnd.wt.stf":{"source":"iana","extensions":["stf"]},"application/vnd.wv.csp+wbxml":{"source":"iana"},"application/vnd.wv.csp+xml":{"source":"iana","compressible":true},"application/vnd.wv.ssp+xml":{"source":"iana","compressible":true},"application/vnd.xacml+json":{"source":"iana","compressible":true},"application/vnd.xara":{"source":"iana","extensions":["xar"]},"application/vnd.xfdl":{"source":"iana","extensions":["xfdl"]},"application/vnd.xfdl.webform":{"source":"iana"},"application/vnd.xmi+xml":{"source":"iana","compressible":true},"application/vnd.xmpie.cpkg":{"source":"iana"},"application/vnd.xmpie.dpkg":{"source":"iana"},"application/vnd.xmpie.plan":{"source":"iana"},"application/vnd.xmpie.ppkg":{"source":"iana"},"application/vnd.xmpie.xlim":{"source":"iana"},"application/vnd.yamaha.hv-dic":{"source":"iana","extensions":["hvd"]},"application/vnd.yamaha.hv-script":{"source":"iana","extensions":["hvs"]},"application/vnd.yamaha.hv-voice":{"source":"iana","extensions":["hvp"]},"application/vnd.yamaha.openscoreformat":{"source":"iana","extensions":["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{"source":"iana","compressible":true,"extensions":["osfpvg"]},"application/vnd.yamaha.remote-setup":{"source":"iana"},"application/vnd.yamaha.smaf-audio":{"source":"iana","extensions":["saf"]},"application/vnd.yamaha.smaf-phrase":{"source":"iana","extensions":["spf"]},"application/vnd.yamaha.through-ngn":{"source":"iana"},"application/vnd.yamaha.tunnel-udpencap":{"source":"iana"},"application/vnd.yaoweme":{"source":"iana"},"application/vnd.yellowriver-custom-menu":{"source":"iana","extensions":["cmp"]},"application/vnd.youtube.yt":{"source":"iana"},"application/vnd.zul":{"source":"iana","extensions":["zir","zirz"]},"application/vnd.zzazz.deck+xml":{"source":"iana","compressible":true,"extensions":["zaz"]},"application/voicexml+xml":{"source":"iana","compressible":true,"extensions":["vxml"]},"application/voucher-cms+json":{"source":"iana","compressible":true},"application/vq-rtcpxr":{"source":"iana"},"application/wasm":{"compressible":true,"extensions":["wasm"]},"application/watcherinfo+xml":{"source":"iana","compressible":true},"application/webpush-options+json":{"source":"iana","compressible":true},"application/whoispp-query":{"source":"iana"},"application/whoispp-response":{"source":"iana"},"application/widget":{"source":"iana","extensions":["wgt"]},"application/winhlp":{"source":"apache","extensions":["hlp"]},"application/wita":{"source":"iana"},"application/wordperfect5.1":{"source":"iana"},"application/wsdl+xml":{"source":"iana","compressible":true,"extensions":["wsdl"]},"application/wspolicy+xml":{"source":"iana","compressible":true,"extensions":["wspolicy"]},"application/x-7z-compressed":{"source":"apache","compressible":false,"extensions":["7z"]},"application/x-abiword":{"source":"apache","extensions":["abw"]},"application/x-ace-compressed":{"source":"apache","extensions":["ace"]},"application/x-amf":{"source":"apache"},"application/x-apple-diskimage":{"source":"apache","extensions":["dmg"]},"application/x-arj":{"compressible":false,"extensions":["arj"]},"application/x-authorware-bin":{"source":"apache","extensions":["aab","x32","u32","vox"]},"application/x-authorware-map":{"source":"apache","extensions":["aam"]},"application/x-authorware-seg":{"source":"apache","extensions":["aas"]},"application/x-bcpio":{"source":"apache","extensions":["bcpio"]},"application/x-bdoc":{"compressible":false,"extensions":["bdoc"]},"application/x-bittorrent":{"source":"apache","extensions":["torrent"]},"application/x-blorb":{"source":"apache","extensions":["blb","blorb"]},"application/x-bzip":{"source":"apache","compressible":false,"extensions":["bz"]},"application/x-bzip2":{"source":"apache","compressible":false,"extensions":["bz2","boz"]},"application/x-cbr":{"source":"apache","extensions":["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{"source":"apache","extensions":["vcd"]},"application/x-cfs-compressed":{"source":"apache","extensions":["cfs"]},"application/x-chat":{"source":"apache","extensions":["chat"]},"application/x-chess-pgn":{"source":"apache","extensions":["pgn"]},"application/x-chrome-extension":{"extensions":["crx"]},"application/x-cocoa":{"source":"nginx","extensions":["cco"]},"application/x-compress":{"source":"apache"},"application/x-conference":{"source":"apache","extensions":["nsc"]},"application/x-cpio":{"source":"apache","extensions":["cpio"]},"application/x-csh":{"source":"apache","extensions":["csh"]},"application/x-deb":{"compressible":false},"application/x-debian-package":{"source":"apache","extensions":["deb","udeb"]},"application/x-dgc-compressed":{"source":"apache","extensions":["dgc"]},"application/x-director":{"source":"apache","extensions":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{"source":"apache","extensions":["wad"]},"application/x-dtbncx+xml":{"source":"apache","compressible":true,"extensions":["ncx"]},"application/x-dtbook+xml":{"source":"apache","compressible":true,"extensions":["dtb"]},"application/x-dtbresource+xml":{"source":"apache","compressible":true,"extensions":["res"]},"application/x-dvi":{"source":"apache","compressible":false,"extensions":["dvi"]},"application/x-envoy":{"source":"apache","extensions":["evy"]},"application/x-eva":{"source":"apache","extensions":["eva"]},"application/x-font-bdf":{"source":"apache","extensions":["bdf"]},"application/x-font-dos":{"source":"apache"},"application/x-font-framemaker":{"source":"apache"},"application/x-font-ghostscript":{"source":"apache","extensions":["gsf"]},"application/x-font-libgrx":{"source":"apache"},"application/x-font-linux-psf":{"source":"apache","extensions":["psf"]},"application/x-font-pcf":{"source":"apache","extensions":["pcf"]},"application/x-font-snf":{"source":"apache","extensions":["snf"]},"application/x-font-speedo":{"source":"apache"},"application/x-font-sunos-news":{"source":"apache"},"application/x-font-type1":{"source":"apache","extensions":["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{"source":"apache"},"application/x-freearc":{"source":"apache","extensions":["arc"]},"application/x-futuresplash":{"source":"apache","extensions":["spl"]},"application/x-gca-compressed":{"source":"apache","extensions":["gca"]},"application/x-glulx":{"source":"apache","extensions":["ulx"]},"application/x-gnumeric":{"source":"apache","extensions":["gnumeric"]},"application/x-gramps-xml":{"source":"apache","extensions":["gramps"]},"application/x-gtar":{"source":"apache","extensions":["gtar"]},"application/x-gzip":{"source":"apache"},"application/x-hdf":{"source":"apache","extensions":["hdf"]},"application/x-httpd-php":{"compressible":true,"extensions":["php"]},"application/x-install-instructions":{"source":"apache","extensions":["install"]},"application/x-iso9660-image":{"source":"apache","extensions":["iso"]},"application/x-java-archive-diff":{"source":"nginx","extensions":["jardiff"]},"application/x-java-jnlp-file":{"source":"apache","compressible":false,"extensions":["jnlp"]},"application/x-javascript":{"compressible":true},"application/x-latex":{"source":"apache","compressible":false,"extensions":["latex"]},"application/x-lua-bytecode":{"extensions":["luac"]},"application/x-lzh-compressed":{"source":"apache","extensions":["lzh","lha"]},"application/x-makeself":{"source":"nginx","extensions":["run"]},"application/x-mie":{"source":"apache","extensions":["mie"]},"application/x-mobipocket-ebook":{"source":"apache","extensions":["prc","mobi"]},"application/x-mpegurl":{"compressible":false},"application/x-ms-application":{"source":"apache","extensions":["application"]},"application/x-ms-shortcut":{"source":"apache","extensions":["lnk"]},"application/x-ms-wmd":{"source":"apache","extensions":["wmd"]},"application/x-ms-wmz":{"source":"apache","extensions":["wmz"]},"application/x-ms-xbap":{"source":"apache","extensions":["xbap"]},"application/x-msaccess":{"source":"apache","extensions":["mdb"]},"application/x-msbinder":{"source":"apache","extensions":["obd"]},"application/x-mscardfile":{"source":"apache","extensions":["crd"]},"application/x-msclip":{"source":"apache","extensions":["clp"]},"application/x-msdos-program":{"extensions":["exe"]},"application/x-msdownload":{"source":"apache","extensions":["exe","dll","com","bat","msi"]},"application/x-msmediaview":{"source":"apache","extensions":["mvb","m13","m14"]},"application/x-msmetafile":{"source":"apache","extensions":["wmf","wmz","emf","emz"]},"application/x-msmoney":{"source":"apache","extensions":["mny"]},"application/x-mspublisher":{"source":"apache","extensions":["pub"]},"application/x-msschedule":{"source":"apache","extensions":["scd"]},"application/x-msterminal":{"source":"apache","extensions":["trm"]},"application/x-mswrite":{"source":"apache","extensions":["wri"]},"application/x-netcdf":{"source":"apache","extensions":["nc","cdf"]},"application/x-ns-proxy-autoconfig":{"compressible":true,"extensions":["pac"]},"application/x-nzb":{"source":"apache","extensions":["nzb"]},"application/x-perl":{"source":"nginx","extensions":["pl","pm"]},"application/x-pilot":{"source":"nginx","extensions":["prc","pdb"]},"application/x-pkcs12":{"source":"apache","compressible":false,"extensions":["p12","pfx"]},"application/x-pkcs7-certificates":{"source":"apache","extensions":["p7b","spc"]},"application/x-pkcs7-certreqresp":{"source":"apache","extensions":["p7r"]},"application/x-rar-compressed":{"source":"apache","compressible":false,"extensions":["rar"]},"application/x-redhat-package-manager":{"source":"nginx","extensions":["rpm"]},"application/x-research-info-systems":{"source":"apache","extensions":["ris"]},"application/x-sea":{"source":"nginx","extensions":["sea"]},"application/x-sh":{"source":"apache","compressible":true,"extensions":["sh"]},"application/x-shar":{"source":"apache","extensions":["shar"]},"application/x-shockwave-flash":{"source":"apache","compressible":false,"extensions":["swf"]},"application/x-silverlight-app":{"source":"apache","extensions":["xap"]},"application/x-sql":{"source":"apache","extensions":["sql"]},"application/x-stuffit":{"source":"apache","compressible":false,"extensions":["sit"]},"application/x-stuffitx":{"source":"apache","extensions":["sitx"]},"application/x-subrip":{"source":"apache","extensions":["srt"]},"application/x-sv4cpio":{"source":"apache","extensions":["sv4cpio"]},"application/x-sv4crc":{"source":"apache","extensions":["sv4crc"]},"application/x-t3vm-image":{"source":"apache","extensions":["t3"]},"application/x-tads":{"source":"apache","extensions":["gam"]},"application/x-tar":{"source":"apache","compressible":true,"extensions":["tar"]},"application/x-tcl":{"source":"apache","extensions":["tcl","tk"]},"application/x-tex":{"source":"apache","extensions":["tex"]},"application/x-tex-tfm":{"source":"apache","extensions":["tfm"]},"application/x-texinfo":{"source":"apache","extensions":["texinfo","texi"]},"application/x-tgif":{"source":"apache","extensions":["obj"]},"application/x-ustar":{"source":"apache","extensions":["ustar"]},"application/x-virtualbox-hdd":{"compressible":true,"extensions":["hdd"]},"application/x-virtualbox-ova":{"compressible":true,"extensions":["ova"]},"application/x-virtualbox-ovf":{"compressible":true,"extensions":["ovf"]},"application/x-virtualbox-vbox":{"compressible":true,"extensions":["vbox"]},"application/x-virtualbox-vbox-extpack":{"compressible":false,"extensions":["vbox-extpack"]},"application/x-virtualbox-vdi":{"compressible":true,"extensions":["vdi"]},"application/x-virtualbox-vhd":{"compressible":true,"extensions":["vhd"]},"application/x-virtualbox-vmdk":{"compressible":true,"extensions":["vmdk"]},"application/x-wais-source":{"source":"apache","extensions":["src"]},"application/x-web-app-manifest+json":{"compressible":true,"extensions":["webapp"]},"application/x-www-form-urlencoded":{"source":"iana","compressible":true},"application/x-x509-ca-cert":{"source":"apache","extensions":["der","crt","pem"]},"application/x-xfig":{"source":"apache","extensions":["fig"]},"application/x-xliff+xml":{"source":"apache","compressible":true,"extensions":["xlf"]},"application/x-xpinstall":{"source":"apache","compressible":false,"extensions":["xpi"]},"application/x-xz":{"source":"apache","extensions":["xz"]},"application/x-zmachine":{"source":"apache","extensions":["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{"source":"iana"},"application/xacml+xml":{"source":"iana","compressible":true},"application/xaml+xml":{"source":"apache","compressible":true,"extensions":["xaml"]},"application/xcap-att+xml":{"source":"iana","compressible":true},"application/xcap-caps+xml":{"source":"iana","compressible":true},"application/xcap-diff+xml":{"source":"iana","compressible":true,"extensions":["xdf"]},"application/xcap-el+xml":{"source":"iana","compressible":true},"application/xcap-error+xml":{"source":"iana","compressible":true},"application/xcap-ns+xml":{"source":"iana","compressible":true},"application/xcon-conference-info+xml":{"source":"iana","compressible":true},"application/xcon-conference-info-diff+xml":{"source":"iana","compressible":true},"application/xenc+xml":{"source":"iana","compressible":true,"extensions":["xenc"]},"application/xhtml+xml":{"source":"iana","compressible":true,"extensions":["xhtml","xht"]},"application/xhtml-voice+xml":{"source":"apache","compressible":true},"application/xliff+xml":{"source":"iana","compressible":true},"application/xml":{"source":"iana","compressible":true,"extensions":["xml","xsl","xsd","rng"]},"application/xml-dtd":{"source":"iana","compressible":true,"extensions":["dtd"]},"application/xml-external-parsed-entity":{"source":"iana"},"application/xml-patch+xml":{"source":"iana","compressible":true},"application/xmpp+xml":{"source":"iana","compressible":true},"application/xop+xml":{"source":"iana","compressible":true,"extensions":["xop"]},"application/xproc+xml":{"source":"apache","compressible":true,"extensions":["xpl"]},"application/xslt+xml":{"source":"iana","compressible":true,"extensions":["xslt"]},"application/xspf+xml":{"source":"apache","compressible":true,"extensions":["xspf"]},"application/xv+xml":{"source":"iana","compressible":true,"extensions":["mxml","xhvml","xvml","xvm"]},"application/yang":{"source":"iana","extensions":["yang"]},"application/yang-data+json":{"source":"iana","compressible":true},"application/yang-data+xml":{"source":"iana","compressible":true},"application/yang-patch+json":{"source":"iana","compressible":true},"application/yang-patch+xml":{"source":"iana","compressible":true},"application/yin+xml":{"source":"iana","compressible":true,"extensions":["yin"]},"application/zip":{"source":"iana","compressible":false,"extensions":["zip"]},"application/zlib":{"source":"iana"},"application/zstd":{"source":"iana"},"audio/1d-interleaved-parityfec":{"source":"iana"},"audio/32kadpcm":{"source":"iana"},"audio/3gpp":{"source":"iana","compressible":false,"extensions":["3gpp"]},"audio/3gpp2":{"source":"iana"},"audio/aac":{"source":"iana"},"audio/ac3":{"source":"iana"},"audio/adpcm":{"source":"apache","extensions":["adp"]},"audio/amr":{"source":"iana"},"audio/amr-wb":{"source":"iana"},"audio/amr-wb+":{"source":"iana"},"audio/aptx":{"source":"iana"},"audio/asc":{"source":"iana"},"audio/atrac-advanced-lossless":{"source":"iana"},"audio/atrac-x":{"source":"iana"},"audio/atrac3":{"source":"iana"},"audio/basic":{"source":"iana","compressible":false,"extensions":["au","snd"]},"audio/bv16":{"source":"iana"},"audio/bv32":{"source":"iana"},"audio/clearmode":{"source":"iana"},"audio/cn":{"source":"iana"},"audio/dat12":{"source":"iana"},"audio/dls":{"source":"iana"},"audio/dsr-es201108":{"source":"iana"},"audio/dsr-es202050":{"source":"iana"},"audio/dsr-es202211":{"source":"iana"},"audio/dsr-es202212":{"source":"iana"},"audio/dv":{"source":"iana"},"audio/dvi4":{"source":"iana"},"audio/eac3":{"source":"iana"},"audio/encaprtp":{"source":"iana"},"audio/evrc":{"source":"iana"},"audio/evrc-qcp":{"source":"iana"},"audio/evrc0":{"source":"iana"},"audio/evrc1":{"source":"iana"},"audio/evrcb":{"source":"iana"},"audio/evrcb0":{"source":"iana"},"audio/evrcb1":{"source":"iana"},"audio/evrcnw":{"source":"iana"},"audio/evrcnw0":{"source":"iana"},"audio/evrcnw1":{"source":"iana"},"audio/evrcwb":{"source":"iana"},"audio/evrcwb0":{"source":"iana"},"audio/evrcwb1":{"source":"iana"},"audio/evs":{"source":"iana"},"audio/fwdred":{"source":"iana"},"audio/g711-0":{"source":"iana"},"audio/g719":{"source":"iana"},"audio/g722":{"source":"iana"},"audio/g7221":{"source":"iana"},"audio/g723":{"source":"iana"},"audio/g726-16":{"source":"iana"},"audio/g726-24":{"source":"iana"},"audio/g726-32":{"source":"iana"},"audio/g726-40":{"source":"iana"},"audio/g728":{"source":"iana"},"audio/g729":{"source":"iana"},"audio/g7291":{"source":"iana"},"audio/g729d":{"source":"iana"},"audio/g729e":{"source":"iana"},"audio/gsm":{"source":"iana"},"audio/gsm-efr":{"source":"iana"},"audio/gsm-hr-08":{"source":"iana"},"audio/ilbc":{"source":"iana"},"audio/ip-mr_v2.5":{"source":"iana"},"audio/isac":{"source":"apache"},"audio/l16":{"source":"iana"},"audio/l20":{"source":"iana"},"audio/l24":{"source":"iana","compressible":false},"audio/l8":{"source":"iana"},"audio/lpc":{"source":"iana"},"audio/melp":{"source":"iana"},"audio/melp1200":{"source":"iana"},"audio/melp2400":{"source":"iana"},"audio/melp600":{"source":"iana"},"audio/midi":{"source":"apache","extensions":["mid","midi","kar","rmi"]},"audio/mobile-xmf":{"source":"iana"},"audio/mp3":{"compressible":false,"extensions":["mp3"]},"audio/mp4":{"source":"iana","compressible":false,"extensions":["m4a","mp4a"]},"audio/mp4a-latm":{"source":"iana"},"audio/mpa":{"source":"iana"},"audio/mpa-robust":{"source":"iana"},"audio/mpeg":{"source":"iana","compressible":false,"extensions":["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{"source":"iana"},"audio/musepack":{"source":"apache"},"audio/ogg":{"source":"iana","compressible":false,"extensions":["oga","ogg","spx"]},"audio/opus":{"source":"iana"},"audio/parityfec":{"source":"iana"},"audio/pcma":{"source":"iana"},"audio/pcma-wb":{"source":"iana"},"audio/pcmu":{"source":"iana"},"audio/pcmu-wb":{"source":"iana"},"audio/prs.sid":{"source":"iana"},"audio/qcelp":{"source":"iana"},"audio/raptorfec":{"source":"iana"},"audio/red":{"source":"iana"},"audio/rtp-enc-aescm128":{"source":"iana"},"audio/rtp-midi":{"source":"iana"},"audio/rtploopback":{"source":"iana"},"audio/rtx":{"source":"iana"},"audio/s3m":{"source":"apache","extensions":["s3m"]},"audio/silk":{"source":"apache","extensions":["sil"]},"audio/smv":{"source":"iana"},"audio/smv-qcp":{"source":"iana"},"audio/smv0":{"source":"iana"},"audio/sp-midi":{"source":"iana"},"audio/speex":{"source":"iana"},"audio/t140c":{"source":"iana"},"audio/t38":{"source":"iana"},"audio/telephone-event":{"source":"iana"},"audio/tone":{"source":"iana"},"audio/uemclip":{"source":"iana"},"audio/ulpfec":{"source":"iana"},"audio/usac":{"source":"iana"},"audio/vdvi":{"source":"iana"},"audio/vmr-wb":{"source":"iana"},"audio/vnd.3gpp.iufp":{"source":"iana"},"audio/vnd.4sb":{"source":"iana"},"audio/vnd.audiokoz":{"source":"iana"},"audio/vnd.celp":{"source":"iana"},"audio/vnd.cisco.nse":{"source":"iana"},"audio/vnd.cmles.radio-events":{"source":"iana"},"audio/vnd.cns.anp1":{"source":"iana"},"audio/vnd.cns.inf1":{"source":"iana"},"audio/vnd.dece.audio":{"source":"iana","extensions":["uva","uvva"]},"audio/vnd.digital-winds":{"source":"iana","extensions":["eol"]},"audio/vnd.dlna.adts":{"source":"iana"},"audio/vnd.dolby.heaac.1":{"source":"iana"},"audio/vnd.dolby.heaac.2":{"source":"iana"},"audio/vnd.dolby.mlp":{"source":"iana"},"audio/vnd.dolby.mps":{"source":"iana"},"audio/vnd.dolby.pl2":{"source":"iana"},"audio/vnd.dolby.pl2x":{"source":"iana"},"audio/vnd.dolby.pl2z":{"source":"iana"},"audio/vnd.dolby.pulse.1":{"source":"iana"},"audio/vnd.dra":{"source":"iana","extensions":["dra"]},"audio/vnd.dts":{"source":"iana","extensions":["dts"]},"audio/vnd.dts.hd":{"source":"iana","extensions":["dtshd"]},"audio/vnd.dvb.file":{"source":"iana"},"audio/vnd.everad.plj":{"source":"iana"},"audio/vnd.hns.audio":{"source":"iana"},"audio/vnd.lucent.voice":{"source":"iana","extensions":["lvp"]},"audio/vnd.ms-playready.media.pya":{"source":"iana","extensions":["pya"]},"audio/vnd.nokia.mobile-xmf":{"source":"iana"},"audio/vnd.nortel.vbk":{"source":"iana"},"audio/vnd.nuera.ecelp4800":{"source":"iana","extensions":["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{"source":"iana","extensions":["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{"source":"iana","extensions":["ecelp9600"]},"audio/vnd.octel.sbc":{"source":"iana"},"audio/vnd.presonus.multitrack":{"source":"iana"},"audio/vnd.qcelp":{"source":"iana"},"audio/vnd.rhetorex.32kadpcm":{"source":"iana"},"audio/vnd.rip":{"source":"iana","extensions":["rip"]},"audio/vnd.rn-realaudio":{"compressible":false},"audio/vnd.sealedmedia.softseal.mpeg":{"source":"iana"},"audio/vnd.vmx.cvsd":{"source":"iana"},"audio/vnd.wave":{"compressible":false},"audio/vorbis":{"source":"iana","compressible":false},"audio/vorbis-config":{"source":"iana"},"audio/wav":{"compressible":false,"extensions":["wav"]},"audio/wave":{"compressible":false,"extensions":["wav"]},"audio/webm":{"source":"apache","compressible":false,"extensions":["weba"]},"audio/x-aac":{"source":"apache","compressible":false,"extensions":["aac"]},"audio/x-aiff":{"source":"apache","extensions":["aif","aiff","aifc"]},"audio/x-caf":{"source":"apache","compressible":false,"extensions":["caf"]},"audio/x-flac":{"source":"apache","extensions":["flac"]},"audio/x-m4a":{"source":"nginx","extensions":["m4a"]},"audio/x-matroska":{"source":"apache","extensions":["mka"]},"audio/x-mpegurl":{"source":"apache","extensions":["m3u"]},"audio/x-ms-wax":{"source":"apache","extensions":["wax"]},"audio/x-ms-wma":{"source":"apache","extensions":["wma"]},"audio/x-pn-realaudio":{"source":"apache","extensions":["ram","ra"]},"audio/x-pn-realaudio-plugin":{"source":"apache","extensions":["rmp"]},"audio/x-realaudio":{"source":"nginx","extensions":["ra"]},"audio/x-tta":{"source":"apache"},"audio/x-wav":{"source":"apache","extensions":["wav"]},"audio/xm":{"source":"apache","extensions":["xm"]},"chemical/x-cdx":{"source":"apache","extensions":["cdx"]},"chemical/x-cif":{"source":"apache","extensions":["cif"]},"chemical/x-cmdf":{"source":"apache","extensions":["cmdf"]},"chemical/x-cml":{"source":"apache","extensions":["cml"]},"chemical/x-csml":{"source":"apache","extensions":["csml"]},"chemical/x-pdb":{"source":"apache"},"chemical/x-xyz":{"source":"apache","extensions":["xyz"]},"font/collection":{"source":"iana","extensions":["ttc"]},"font/otf":{"source":"iana","compressible":true,"extensions":["otf"]},"font/sfnt":{"source":"iana"},"font/ttf":{"source":"iana","extensions":["ttf"]},"font/woff":{"source":"iana","extensions":["woff"]},"font/woff2":{"source":"iana","extensions":["woff2"]},"image/aces":{"source":"iana","extensions":["exr"]},"image/apng":{"compressible":false,"extensions":["apng"]},"image/avci":{"source":"iana"},"image/avcs":{"source":"iana"},"image/bmp":{"source":"iana","compressible":true,"extensions":["bmp"]},"image/cgm":{"source":"iana","extensions":["cgm"]},"image/dicom-rle":{"source":"iana","extensions":["drle"]},"image/emf":{"source":"iana","extensions":["emf"]},"image/fits":{"source":"iana","extensions":["fits"]},"image/g3fax":{"source":"iana","extensions":["g3"]},"image/gif":{"source":"iana","compressible":false,"extensions":["gif"]},"image/heic":{"source":"iana","extensions":["heic"]},"image/heic-sequence":{"source":"iana","extensions":["heics"]},"image/heif":{"source":"iana","extensions":["heif"]},"image/heif-sequence":{"source":"iana","extensions":["heifs"]},"image/ief":{"source":"iana","extensions":["ief"]},"image/jls":{"source":"iana","extensions":["jls"]},"image/jp2":{"source":"iana","compressible":false,"extensions":["jp2","jpg2"]},"image/jpeg":{"source":"iana","compressible":false,"extensions":["jpeg","jpg","jpe"]},"image/jpm":{"source":"iana","compressible":false,"extensions":["jpm"]},"image/jpx":{"source":"iana","compressible":false,"extensions":["jpx","jpf"]},"image/ktx":{"source":"iana","extensions":["ktx"]},"image/naplps":{"source":"iana"},"image/pjpeg":{"compressible":false},"image/png":{"source":"iana","compressible":false,"extensions":["png"]},"image/prs.btif":{"source":"iana","extensions":["btif"]},"image/prs.pti":{"source":"iana","extensions":["pti"]},"image/pwg-raster":{"source":"iana"},"image/sgi":{"source":"apache","extensions":["sgi"]},"image/svg+xml":{"source":"iana","compressible":true,"extensions":["svg","svgz"]},"image/t38":{"source":"iana","extensions":["t38"]},"image/tiff":{"source":"iana","compressible":false,"extensions":["tif","tiff"]},"image/tiff-fx":{"source":"iana","extensions":["tfx"]},"image/vnd.adobe.photoshop":{"source":"iana","compressible":true,"extensions":["psd"]},"image/vnd.airzip.accelerator.azv":{"source":"iana","extensions":["azv"]},"image/vnd.cns.inf2":{"source":"iana"},"image/vnd.dece.graphic":{"source":"iana","extensions":["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{"source":"iana","extensions":["djvu","djv"]},"image/vnd.dvb.subtitle":{"source":"iana","extensions":["sub"]},"image/vnd.dwg":{"source":"iana","extensions":["dwg"]},"image/vnd.dxf":{"source":"iana","extensions":["dxf"]},"image/vnd.fastbidsheet":{"source":"iana","extensions":["fbs"]},"image/vnd.fpx":{"source":"iana","extensions":["fpx"]},"image/vnd.fst":{"source":"iana","extensions":["fst"]},"image/vnd.fujixerox.edmics-mmr":{"source":"iana","extensions":["mmr"]},"image/vnd.fujixerox.edmics-rlc":{"source":"iana","extensions":["rlc"]},"image/vnd.globalgraphics.pgb":{"source":"iana"},"image/vnd.microsoft.icon":{"source":"iana","extensions":["ico"]},"image/vnd.mix":{"source":"iana"},"image/vnd.mozilla.apng":{"source":"iana"},"image/vnd.ms-modi":{"source":"iana","extensions":["mdi"]},"image/vnd.ms-photo":{"source":"apache","extensions":["wdp"]},"image/vnd.net-fpx":{"source":"iana","extensions":["npx"]},"image/vnd.radiance":{"source":"iana"},"image/vnd.sealed.png":{"source":"iana"},"image/vnd.sealedmedia.softseal.gif":{"source":"iana"},"image/vnd.sealedmedia.softseal.jpg":{"source":"iana"},"image/vnd.svf":{"source":"iana"},"image/vnd.tencent.tap":{"source":"iana","extensions":["tap"]},"image/vnd.valve.source.texture":{"source":"iana","extensions":["vtf"]},"image/vnd.wap.wbmp":{"source":"iana","extensions":["wbmp"]},"image/vnd.xiff":{"source":"iana","extensions":["xif"]},"image/vnd.zbrush.pcx":{"source":"iana","extensions":["pcx"]},"image/webp":{"source":"apache","extensions":["webp"]},"image/wmf":{"source":"iana","extensions":["wmf"]},"image/x-3ds":{"source":"apache","extensions":["3ds"]},"image/x-cmu-raster":{"source":"apache","extensions":["ras"]},"image/x-cmx":{"source":"apache","extensions":["cmx"]},"image/x-freehand":{"source":"apache","extensions":["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{"source":"apache","compressible":true,"extensions":["ico"]},"image/x-jng":{"source":"nginx","extensions":["jng"]},"image/x-mrsid-image":{"source":"apache","extensions":["sid"]},"image/x-ms-bmp":{"source":"nginx","compressible":true,"extensions":["bmp"]},"image/x-pcx":{"source":"apache","extensions":["pcx"]},"image/x-pict":{"source":"apache","extensions":["pic","pct"]},"image/x-portable-anymap":{"source":"apache","extensions":["pnm"]},"image/x-portable-bitmap":{"source":"apache","extensions":["pbm"]},"image/x-portable-graymap":{"source":"apache","extensions":["pgm"]},"image/x-portable-pixmap":{"source":"apache","extensions":["ppm"]},"image/x-rgb":{"source":"apache","extensions":["rgb"]},"image/x-tga":{"source":"apache","extensions":["tga"]},"image/x-xbitmap":{"source":"apache","extensions":["xbm"]},"image/x-xcf":{"compressible":false},"image/x-xpixmap":{"source":"apache","extensions":["xpm"]},"image/x-xwindowdump":{"source":"apache","extensions":["xwd"]},"message/cpim":{"source":"iana"},"message/delivery-status":{"source":"iana"},"message/disposition-notification":{"source":"iana","extensions":["disposition-notification"]},"message/external-body":{"source":"iana"},"message/feedback-report":{"source":"iana"},"message/global":{"source":"iana","extensions":["u8msg"]},"message/global-delivery-status":{"source":"iana","extensions":["u8dsn"]},"message/global-disposition-notification":{"source":"iana","extensions":["u8mdn"]},"message/global-headers":{"source":"iana","extensions":["u8hdr"]},"message/http":{"source":"iana","compressible":false},"message/imdn+xml":{"source":"iana","compressible":true},"message/news":{"source":"iana"},"message/partial":{"source":"iana","compressible":false},"message/rfc822":{"source":"iana","compressible":true,"extensions":["eml","mime"]},"message/s-http":{"source":"iana"},"message/sip":{"source":"iana"},"message/sipfrag":{"source":"iana"},"message/tracking-status":{"source":"iana"},"message/vnd.si.simp":{"source":"iana"},"message/vnd.wfa.wsc":{"source":"iana","extensions":["wsc"]},"model/3mf":{"source":"iana"},"model/gltf+json":{"source":"iana","compressible":true,"extensions":["gltf"]},"model/gltf-binary":{"source":"iana","compressible":true,"extensions":["glb"]},"model/iges":{"source":"iana","compressible":false,"extensions":["igs","iges"]},"model/mesh":{"source":"iana","compressible":false,"extensions":["msh","mesh","silo"]},"model/stl":{"source":"iana"},"model/vnd.collada+xml":{"source":"iana","compressible":true,"extensions":["dae"]},"model/vnd.dwf":{"source":"iana","extensions":["dwf"]},"model/vnd.flatland.3dml":{"source":"iana"},"model/vnd.gdl":{"source":"iana","extensions":["gdl"]},"model/vnd.gs-gdl":{"source":"apache"},"model/vnd.gs.gdl":{"source":"iana"},"model/vnd.gtw":{"source":"iana","extensions":["gtw"]},"model/vnd.moml+xml":{"source":"iana","compressible":true},"model/vnd.mts":{"source":"iana","extensions":["mts"]},"model/vnd.opengex":{"source":"iana"},"model/vnd.parasolid.transmit.binary":{"source":"iana"},"model/vnd.parasolid.transmit.text":{"source":"iana"},"model/vnd.rosette.annotated-data-model":{"source":"iana"},"model/vnd.usdz+zip":{"source":"iana","compressible":false},"model/vnd.valve.source.compiled-map":{"source":"iana"},"model/vnd.vtu":{"source":"iana","extensions":["vtu"]},"model/vrml":{"source":"iana","compressible":false,"extensions":["wrl","vrml"]},"model/x3d+binary":{"source":"apache","compressible":false,"extensions":["x3db","x3dbz"]},"model/x3d+fastinfoset":{"source":"iana"},"model/x3d+vrml":{"source":"apache","compressible":false,"extensions":["x3dv","x3dvz"]},"model/x3d+xml":{"source":"iana","compressible":true,"extensions":["x3d","x3dz"]},"model/x3d-vrml":{"source":"iana"},"multipart/alternative":{"source":"iana","compressible":false},"multipart/appledouble":{"source":"iana"},"multipart/byteranges":{"source":"iana"},"multipart/digest":{"source":"iana"},"multipart/encrypted":{"source":"iana","compressible":false},"multipart/form-data":{"source":"iana","compressible":false},"multipart/header-set":{"source":"iana"},"multipart/mixed":{"source":"iana","compressible":false},"multipart/multilingual":{"source":"iana"},"multipart/parallel":{"source":"iana"},"multipart/related":{"source":"iana","compressible":false},"multipart/report":{"source":"iana"},"multipart/signed":{"source":"iana","compressible":false},"multipart/vnd.bint.med-plus":{"source":"iana"},"multipart/voice-message":{"source":"iana"},"multipart/x-mixed-replace":{"source":"iana"},"text/1d-interleaved-parityfec":{"source":"iana"},"text/cache-manifest":{"source":"iana","compressible":true,"extensions":["appcache","manifest"]},"text/calendar":{"source":"iana","extensions":["ics","ifb"]},"text/calender":{"compressible":true},"text/cmd":{"compressible":true},"text/coffeescript":{"extensions":["coffee","litcoffee"]},"text/css":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["css"]},"text/csv":{"source":"iana","compressible":true,"extensions":["csv"]},"text/csv-schema":{"source":"iana"},"text/directory":{"source":"iana"},"text/dns":{"source":"iana"},"text/ecmascript":{"source":"iana"},"text/encaprtp":{"source":"iana"},"text/enriched":{"source":"iana"},"text/fwdred":{"source":"iana"},"text/grammar-ref-list":{"source":"iana"},"text/html":{"source":"iana","compressible":true,"extensions":["html","htm","shtml"]},"text/jade":{"extensions":["jade"]},"text/javascript":{"source":"iana","compressible":true},"text/jcr-cnd":{"source":"iana"},"text/jsx":{"compressible":true,"extensions":["jsx"]},"text/less":{"extensions":["less"]},"text/markdown":{"source":"iana","compressible":true,"extensions":["markdown","md"]},"text/mathml":{"source":"nginx","extensions":["mml"]},"text/mizar":{"source":"iana"},"text/n3":{"source":"iana","compressible":true,"extensions":["n3"]},"text/parameters":{"source":"iana"},"text/parityfec":{"source":"iana"},"text/plain":{"source":"iana","compressible":true,"extensions":["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{"source":"iana"},"text/prs.fallenstein.rst":{"source":"iana"},"text/prs.lines.tag":{"source":"iana","extensions":["dsc"]},"text/prs.prop.logic":{"source":"iana"},"text/raptorfec":{"source":"iana"},"text/red":{"source":"iana"},"text/rfc822-headers":{"source":"iana"},"text/richtext":{"source":"iana","compressible":true,"extensions":["rtx"]},"text/rtf":{"source":"iana","compressible":true,"extensions":["rtf"]},"text/rtp-enc-aescm128":{"source":"iana"},"text/rtploopback":{"source":"iana"},"text/rtx":{"source":"iana"},"text/sgml":{"source":"iana","extensions":["sgml","sgm"]},"text/shex":{"extensions":["shex"]},"text/slim":{"extensions":["slim","slm"]},"text/strings":{"source":"iana"},"text/stylus":{"extensions":["stylus","styl"]},"text/t140":{"source":"iana"},"text/tab-separated-values":{"source":"iana","compressible":true,"extensions":["tsv"]},"text/troff":{"source":"iana","extensions":["t","tr","roff","man","me","ms"]},"text/turtle":{"source":"iana","charset":"UTF-8","extensions":["ttl"]},"text/ulpfec":{"source":"iana"},"text/uri-list":{"source":"iana","compressible":true,"extensions":["uri","uris","urls"]},"text/vcard":{"source":"iana","compressible":true,"extensions":["vcard"]},"text/vnd.a":{"source":"iana"},"text/vnd.abc":{"source":"iana"},"text/vnd.ascii-art":{"source":"iana"},"text/vnd.curl":{"source":"iana","extensions":["curl"]},"text/vnd.curl.dcurl":{"source":"apache","extensions":["dcurl"]},"text/vnd.curl.mcurl":{"source":"apache","extensions":["mcurl"]},"text/vnd.curl.scurl":{"source":"apache","extensions":["scurl"]},"text/vnd.debian.copyright":{"source":"iana"},"text/vnd.dmclientscript":{"source":"iana"},"text/vnd.dvb.subtitle":{"source":"iana","extensions":["sub"]},"text/vnd.esmertec.theme-descriptor":{"source":"iana"},"text/vnd.fly":{"source":"iana","extensions":["fly"]},"text/vnd.fmi.flexstor":{"source":"iana","extensions":["flx"]},"text/vnd.gml":{"source":"iana"},"text/vnd.graphviz":{"source":"iana","extensions":["gv"]},"text/vnd.hgl":{"source":"iana"},"text/vnd.in3d.3dml":{"source":"iana","extensions":["3dml"]},"text/vnd.in3d.spot":{"source":"iana","extensions":["spot"]},"text/vnd.iptc.newsml":{"source":"iana"},"text/vnd.iptc.nitf":{"source":"iana"},"text/vnd.latex-z":{"source":"iana"},"text/vnd.motorola.reflex":{"source":"iana"},"text/vnd.ms-mediapackage":{"source":"iana"},"text/vnd.net2phone.commcenter.command":{"source":"iana"},"text/vnd.radisys.msml-basic-layout":{"source":"iana"},"text/vnd.si.uricatalogue":{"source":"iana"},"text/vnd.sun.j2me.app-descriptor":{"source":"iana","extensions":["jad"]},"text/vnd.trolltech.linguist":{"source":"iana"},"text/vnd.wap.si":{"source":"iana"},"text/vnd.wap.sl":{"source":"iana"},"text/vnd.wap.wml":{"source":"iana","extensions":["wml"]},"text/vnd.wap.wmlscript":{"source":"iana","extensions":["wmls"]},"text/vtt":{"charset":"UTF-8","compressible":true,"extensions":["vtt"]},"text/x-asm":{"source":"apache","extensions":["s","asm"]},"text/x-c":{"source":"apache","extensions":["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{"source":"nginx","extensions":["htc"]},"text/x-fortran":{"source":"apache","extensions":["f","for","f77","f90"]},"text/x-gwt-rpc":{"compressible":true},"text/x-handlebars-template":{"extensions":["hbs"]},"text/x-java-source":{"source":"apache","extensions":["java"]},"text/x-jquery-tmpl":{"compressible":true},"text/x-lua":{"extensions":["lua"]},"text/x-markdown":{"compressible":true,"extensions":["mkd"]},"text/x-nfo":{"source":"apache","extensions":["nfo"]},"text/x-opml":{"source":"apache","extensions":["opml"]},"text/x-org":{"compressible":true,"extensions":["org"]},"text/x-pascal":{"source":"apache","extensions":["p","pas"]},"text/x-processing":{"compressible":true,"extensions":["pde"]},"text/x-sass":{"extensions":["sass"]},"text/x-scss":{"extensions":["scss"]},"text/x-setext":{"source":"apache","extensions":["etx"]},"text/x-sfv":{"source":"apache","extensions":["sfv"]},"text/x-suse-ymp":{"compressible":true,"extensions":["ymp"]},"text/x-uuencode":{"source":"apache","extensions":["uu"]},"text/x-vcalendar":{"source":"apache","extensions":["vcs"]},"text/x-vcard":{"source":"apache","extensions":["vcf"]},"text/xml":{"source":"iana","compressible":true,"extensions":["xml"]},"text/xml-external-parsed-entity":{"source":"iana"},"text/yaml":{"extensions":["yaml","yml"]},"video/1d-interleaved-parityfec":{"source":"iana"},"video/3gpp":{"source":"iana","extensions":["3gp","3gpp"]},"video/3gpp-tt":{"source":"iana"},"video/3gpp2":{"source":"iana","extensions":["3g2"]},"video/bmpeg":{"source":"iana"},"video/bt656":{"source":"iana"},"video/celb":{"source":"iana"},"video/dv":{"source":"iana"},"video/encaprtp":{"source":"iana"},"video/h261":{"source":"iana","extensions":["h261"]},"video/h263":{"source":"iana","extensions":["h263"]},"video/h263-1998":{"source":"iana"},"video/h263-2000":{"source":"iana"},"video/h264":{"source":"iana","extensions":["h264"]},"video/h264-rcdo":{"source":"iana"},"video/h264-svc":{"source":"iana"},"video/h265":{"source":"iana"},"video/iso.segment":{"source":"iana"},"video/jpeg":{"source":"iana","extensions":["jpgv"]},"video/jpeg2000":{"source":"iana"},"video/jpm":{"source":"apache","extensions":["jpm","jpgm"]},"video/mj2":{"source":"iana","extensions":["mj2","mjp2"]},"video/mp1s":{"source":"iana"},"video/mp2p":{"source":"iana"},"video/mp2t":{"source":"iana","extensions":["ts"]},"video/mp4":{"source":"iana","compressible":false,"extensions":["mp4","mp4v","mpg4"]},"video/mp4v-es":{"source":"iana"},"video/mpeg":{"source":"iana","compressible":false,"extensions":["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{"source":"iana"},"video/mpv":{"source":"iana"},"video/nv":{"source":"iana"},"video/ogg":{"source":"iana","compressible":false,"extensions":["ogv"]},"video/parityfec":{"source":"iana"},"video/pointer":{"source":"iana"},"video/quicktime":{"source":"iana","compressible":false,"extensions":["qt","mov"]},"video/raptorfec":{"source":"iana"},"video/raw":{"source":"iana"},"video/rtp-enc-aescm128":{"source":"iana"},"video/rtploopback":{"source":"iana"},"video/rtx":{"source":"iana"},"video/smpte291":{"source":"iana"},"video/smpte292m":{"source":"iana"},"video/ulpfec":{"source":"iana"},"video/vc1":{"source":"iana"},"video/vc2":{"source":"iana"},"video/vnd.cctv":{"source":"iana"},"video/vnd.dece.hd":{"source":"iana","extensions":["uvh","uvvh"]},"video/vnd.dece.mobile":{"source":"iana","extensions":["uvm","uvvm"]},"video/vnd.dece.mp4":{"source":"iana"},"video/vnd.dece.pd":{"source":"iana","extensions":["uvp","uvvp"]},"video/vnd.dece.sd":{"source":"iana","extensions":["uvs","uvvs"]},"video/vnd.dece.video":{"source":"iana","extensions":["uvv","uvvv"]},"video/vnd.directv.mpeg":{"source":"iana"},"video/vnd.directv.mpeg-tts":{"source":"iana"},"video/vnd.dlna.mpeg-tts":{"source":"iana"},"video/vnd.dvb.file":{"source":"iana","extensions":["dvb"]},"video/vnd.fvt":{"source":"iana","extensions":["fvt"]},"video/vnd.hns.video":{"source":"iana"},"video/vnd.iptvforum.1dparityfec-1010":{"source":"iana"},"video/vnd.iptvforum.1dparityfec-2005":{"source":"iana"},"video/vnd.iptvforum.2dparityfec-1010":{"source":"iana"},"video/vnd.iptvforum.2dparityfec-2005":{"source":"iana"},"video/vnd.iptvforum.ttsavc":{"source":"iana"},"video/vnd.iptvforum.ttsmpeg2":{"source":"iana"},"video/vnd.motorola.video":{"source":"iana"},"video/vnd.motorola.videop":{"source":"iana"},"video/vnd.mpegurl":{"source":"iana","extensions":["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{"source":"iana","extensions":["pyv"]},"video/vnd.nokia.interleaved-multimedia":{"source":"iana"},"video/vnd.nokia.mp4vr":{"source":"iana"},"video/vnd.nokia.videovoip":{"source":"iana"},"video/vnd.objectvideo":{"source":"iana"},"video/vnd.radgamettools.bink":{"source":"iana"},"video/vnd.radgamettools.smacker":{"source":"iana"},"video/vnd.sealed.mpeg1":{"source":"iana"},"video/vnd.sealed.mpeg4":{"source":"iana"},"video/vnd.sealed.swf":{"source":"iana"},"video/vnd.sealedmedia.softseal.mov":{"source":"iana"},"video/vnd.uvvu.mp4":{"source":"iana","extensions":["uvu","uvvu"]},"video/vnd.vivo":{"source":"iana","extensions":["viv"]},"video/vp8":{"source":"iana"},"video/webm":{"source":"apache","compressible":false,"extensions":["webm"]},"video/x-f4v":{"source":"apache","extensions":["f4v"]},"video/x-fli":{"source":"apache","extensions":["fli"]},"video/x-flv":{"source":"apache","compressible":false,"extensions":["flv"]},"video/x-m4v":{"source":"apache","extensions":["m4v"]},"video/x-matroska":{"source":"apache","compressible":false,"extensions":["mkv","mk3d","mks"]},"video/x-mng":{"source":"apache","extensions":["mng"]},"video/x-ms-asf":{"source":"apache","extensions":["asf","asx"]},"video/x-ms-vob":{"source":"apache","extensions":["vob"]},"video/x-ms-wm":{"source":"apache","extensions":["wm"]},"video/x-ms-wmv":{"source":"apache","compressible":false,"extensions":["wmv"]},"video/x-ms-wmx":{"source":"apache","extensions":["wmx"]},"video/x-ms-wvx":{"source":"apache","extensions":["wvx"]},"video/x-msvideo":{"source":"apache","extensions":["avi"]},"video/x-sgi-movie":{"source":"apache","extensions":["movie"]},"video/x-smv":{"source":"apache","extensions":["smv"]},"x-conference/x-cooltalk":{"source":"apache","extensions":["ice"]},"x-shader/x-fragment":{"compressible":true},"x-shader/x-vertex":{"compressible":true}}}),(function(module,exports,__webpack_require__){(function(process){function normalizeArray(parts,allowAboveRoot){var up=0;for(var i=parts.length-1;i>=0;i--){var last=parts[i];if(last==='.'){parts.splice(i,1);}else if(last==='..'){parts.splice(i,1);up++;}else if(up){parts.splice(i,1);up--;}}
if(allowAboveRoot){for(;up--;up){parts.unshift('..');}}
return parts;}
var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var splitPath=function(filename){return splitPathRe.exec(filename).slice(1);};exports.resolve=function(){var resolvedPath='',resolvedAbsolute=false;for(var i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path=(i>=0)?arguments[i]:process.cwd();if(typeof path!=='string'){throw new TypeError('Arguments to path.resolve must be strings');}else if(!path){continue;}
resolvedPath=path+'/'+resolvedPath;resolvedAbsolute=path.charAt(0)==='/';}
resolvedPath=normalizeArray(filter(resolvedPath.split('/'),function(p){return!!p;}),!resolvedAbsolute).join('/');return((resolvedAbsolute?'/':'')+resolvedPath)||'.';};exports.normalize=function(path){var isAbsolute=exports.isAbsolute(path),trailingSlash=substr(path,-1)==='/';path=normalizeArray(filter(path.split('/'),function(p){return!!p;}),!isAbsolute).join('/');if(!path&&!isAbsolute){path='.';}
if(path&&trailingSlash){path+='/';}
return(isAbsolute?'/':'')+path;};exports.isAbsolute=function(path){return path.charAt(0)==='/';};exports.join=function(){var paths=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(paths,function(p,index){if(typeof p!=='string'){throw new TypeError('Arguments to path.join must be strings');}
return p;}).join('/'));};exports.relative=function(from,to){from=exports.resolve(from).substr(1);to=exports.resolve(to).substr(1);function trim(arr){var start=0;for(;start<arr.length;start++){if(arr[start]!=='')break;}
var end=arr.length-1;for(;end>=0;end--){if(arr[end]!=='')break;}
if(start>end)return[];return arr.slice(start,end-start+1);}
var fromParts=trim(from.split('/'));var toParts=trim(to.split('/'));var length=Math.min(fromParts.length,toParts.length);var samePartsLength=length;for(var i=0;i<length;i++){if(fromParts[i]!==toParts[i]){samePartsLength=i;break;}}
var outputParts=[];for(var i=samePartsLength;i<fromParts.length;i++){outputParts.push('..');}
outputParts=outputParts.concat(toParts.slice(samePartsLength));return outputParts.join('/');};exports.sep='/';exports.delimiter=':';exports.dirname=function(path){var result=splitPath(path),root=result[0],dir=result[1];if(!root&&!dir){return '.';}
if(dir){dir=dir.substr(0,dir.length-1);}
return root+dir;};exports.basename=function(path,ext){var f=splitPath(path)[2];if(ext&&f.substr(-1*ext.length)===ext){f=f.substr(0,f.length-ext.length);}
return f;};exports.extname=function(path){return splitPath(path)[3];};function filter(xs,f){if(xs.filter)return xs.filter(f);var res=[];for(var i=0;i<xs.length;i++){if(f(xs[i],i,xs))res.push(xs[i]);}
return res;}
var substr='ab'.substr(-1)==='b'?function(str,start,len){return str.substr(start,len)}:function(str,start,len){if(start<0)start=str.length+start;return str.substr(start,len);};}.call(exports,__webpack_require__(20)))}),(function(module,exports,__webpack_require__){module.exports=ForeverAgent
ForeverAgent.SSL=ForeverAgentSSL
var util=__webpack_require__(25),Agent=__webpack_require__(133).Agent,net=__webpack_require__(62),tls=__webpack_require__(62),AgentSSL=__webpack_require__(238).Agent
function getConnectionName(host,port){var name=''
if(typeof host==='string'){name=host+':'+port}else{name=host.host+':'+host.port+':'+(host.localAddress?(host.localAddress+':'):':')}
return name}
function ForeverAgent(options){var self=this
self.options=options||{}
self.requests={}
self.sockets={}
self.freeSockets={}
self.maxSockets=self.options.maxSockets||Agent.defaultMaxSockets
self.minSockets=self.options.minSockets||ForeverAgent.defaultMinSockets
self.on('free',function(socket,host,port){var name=getConnectionName(host,port)
if(self.requests[name]&&self.requests[name].length){self.requests[name].shift().onSocket(socket)}else if(self.sockets[name].length<self.minSockets){if(!self.freeSockets[name])self.freeSockets[name]=[]
self.freeSockets[name].push(socket)
var onIdleError=function(){socket.destroy()}
socket._onIdleError=onIdleError
socket.on('error',onIdleError)}else{socket.destroy()}})}
util.inherits(ForeverAgent,Agent)
ForeverAgent.defaultMinSockets=5
ForeverAgent.prototype.createConnection=net.createConnection
ForeverAgent.prototype.addRequestNoreuse=Agent.prototype.addRequest
ForeverAgent.prototype.addRequest=function(req,host,port){var name=getConnectionName(host,port)
if(typeof host!=='string'){var options=host
port=options.port
host=options.host}
if(this.freeSockets[name]&&this.freeSockets[name].length>0&&!req.useChunkedEncodingByDefault){var idleSocket=this.freeSockets[name].pop()
idleSocket.removeListener('error',idleSocket._onIdleError)
delete idleSocket._onIdleError
req._reusedSocket=true
req.onSocket(idleSocket)}else{this.addRequestNoreuse(req,host,port)}}
ForeverAgent.prototype.removeSocket=function(s,name,host,port){if(this.sockets[name]){var index=this.sockets[name].indexOf(s)
if(index!==-1){this.sockets[name].splice(index,1)}}else if(this.sockets[name]&&this.sockets[name].length===0){delete this.sockets[name]
delete this.requests[name]}
if(this.freeSockets[name]){var index=this.freeSockets[name].indexOf(s)
if(index!==-1){this.freeSockets[name].splice(index,1)
if(this.freeSockets[name].length===0){delete this.freeSockets[name]}}}
if(this.requests[name]&&this.requests[name].length){this.createSocket(name,host,port).emit('free')}}
function ForeverAgentSSL(options){ForeverAgent.call(this,options)}
util.inherits(ForeverAgentSSL,ForeverAgent)
ForeverAgentSSL.prototype.createConnection=createConnectionSSL
ForeverAgentSSL.prototype.addRequestNoreuse=AgentSSL.prototype.addRequest
function createConnectionSSL(port,host,options){if(typeof port==='object'){options=port;}else if(typeof host==='object'){options=host;}else if(typeof options==='object'){options=options;}else{options={};}
if(typeof port==='number'){options.port=port;}
if(typeof host==='string'){options.host=host;}
return tls.connect(options);}}),(function(module,exports){module.exports=typeof self=='object'?self.FormData:window.FormData;}),(function(module,exports){module.exports=isTypedArray
isTypedArray.strict=isStrictTypedArray
isTypedArray.loose=isLooseTypedArray
var toString=Object.prototype.toString
var names={'[object Int8Array]':true,'[object Int16Array]':true,'[object Int32Array]':true,'[object Uint8Array]':true,'[object Uint8ClampedArray]':true,'[object Uint16Array]':true,'[object Uint32Array]':true,'[object Float32Array]':true,'[object Float64Array]':true}
function isTypedArray(arr){return(isStrictTypedArray(arr)||isLooseTypedArray(arr))}
function isStrictTypedArray(arr){return(arr instanceof Int8Array||arr instanceof Int16Array||arr instanceof Int32Array||arr instanceof Uint8Array||arr instanceof Uint8ClampedArray||arr instanceof Uint16Array||arr instanceof Uint32Array||arr instanceof Float32Array||arr instanceof Float64Array)}
function isLooseTypedArray(arr){return names[toString.call(arr)]}}),(function(module,exports,__webpack_require__){"use strict";function formatHostname(hostname){return hostname.replace(/^\.*/,'.').toLowerCase()}
function parseNoProxyZone(zone){zone=zone.trim().toLowerCase()
var zoneParts=zone.split(':',2)
var zoneHost=formatHostname(zoneParts[0])
var zonePort=zoneParts[1]
var hasPort=zone.indexOf(':')>-1
return{hostname:zoneHost,port:zonePort,hasPort:hasPort}}
function uriInNoProxy(uri,noProxy){var port=uri.port||(uri.protocol==='https:'?'443':'80')
var hostname=formatHostname(uri.hostname)
var noProxyList=noProxy.split(',')
return noProxyList.map(parseNoProxyZone).some(function(noProxyZone){var isMatchedAt=hostname.indexOf(noProxyZone.hostname)
var hostnameMatched=(isMatchedAt>-1&&(isMatchedAt===hostname.length-noProxyZone.hostname.length))
if(noProxyZone.hasPort){return(port===noProxyZone.port)&&hostnameMatched}
return hostnameMatched})}
function getProxyFromURI(uri){var noProxy=Object({"MINING_POOL_STATUS":undefined}).NO_PROXY||Object({"MINING_POOL_STATUS":undefined}).no_proxy||''
if(noProxy==='*'){return null}
if(noProxy!==''&&uriInNoProxy(uri,noProxy)){return null}
if(uri.protocol==='http:'){return Object({"MINING_POOL_STATUS":undefined}).HTTP_PROXY||Object({"MINING_POOL_STATUS":undefined}).http_proxy||null}
if(uri.protocol==='https:'){return Object({"MINING_POOL_STATUS":undefined}).HTTPS_PROXY||Object({"MINING_POOL_STATUS":undefined}).https_proxy||Object({"MINING_POOL_STATUS":undefined}).HTTP_PROXY||Object({"MINING_POOL_STATUS":undefined}).http_proxy||null}
return null}
module.exports=getProxyFromURI}),(function(module,exports,__webpack_require__){"use strict";var qs=__webpack_require__(384)
var querystring=__webpack_require__(169)
function Querystring(request){this.request=request
this.lib=null
this.useQuerystring=null
this.parseOptions=null
this.stringifyOptions=null}
Querystring.prototype.init=function(options){if(this.lib){return}
this.useQuerystring=options.useQuerystring
this.lib=(this.useQuerystring?querystring:qs)
this.parseOptions=options.qsParseOptions||{}
this.stringifyOptions=options.qsStringifyOptions||{}}
Querystring.prototype.stringify=function(obj){return(this.useQuerystring)?this.rfc3986(this.lib.stringify(obj,this.stringifyOptions.sep||null,this.stringifyOptions.eq||null,this.stringifyOptions)):this.lib.stringify(obj,this.stringifyOptions)}
Querystring.prototype.parse=function(str){return(this.useQuerystring)?this.lib.parse(str,this.parseOptions.sep||null,this.parseOptions.eq||null,this.parseOptions):this.lib.parse(str,this.parseOptions)}
Querystring.prototype.rfc3986=function(str){return str.replace(/[!'()*]/g,function(c){return '%'+c.charCodeAt(0).toString(16).toUpperCase()})}
Querystring.prototype.unescape=querystring.unescape
exports.Querystring=Querystring}),(function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(385);var formats=__webpack_require__(386);var arrayPrefixGenerators={brackets:function brackets(prefix){return prefix+'[]';},indices:function indices(prefix,key){return prefix+'['+key+']';},repeat:function repeat(prefix){return prefix;}};var toISO=Date.prototype.toISOString;var defaults={delimiter:'&',encode:true,encoder:utils.encode,encodeValuesOnly:false,serializeDate:function serializeDate(date){return toISO.call(date);},skipNulls:false,strictNullHandling:false};var stringify=function stringify(object,prefix,generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly){var obj=object;if(typeof filter==='function'){obj=filter(prefix,obj);}else if(obj instanceof Date){obj=serializeDate(obj);}else if(obj===null){if(strictNullHandling){return encoder&&!encodeValuesOnly?encoder(prefix,defaults.encoder):prefix;}
obj='';}
if(typeof obj==='string'||typeof obj==='number'||typeof obj==='boolean'||utils.isBuffer(obj)){if(encoder){var keyValue=encodeValuesOnly?prefix:encoder(prefix,defaults.encoder);return[formatter(keyValue)+'='+formatter(encoder(obj,defaults.encoder))];}
return[formatter(prefix)+'='+formatter(String(obj))];}
var values=[];if(typeof obj==='undefined'){return values;}
var objKeys;if(Array.isArray(filter)){objKeys=filter;}else{var keys=Object.keys(obj);objKeys=sort?keys.sort(sort):keys;}
for(var i=0;i<objKeys.length;++i){var key=objKeys[i];if(skipNulls&&obj[key]===null){continue;}
if(Array.isArray(obj)){values=values.concat(stringify(obj[key],generateArrayPrefix(prefix,key),generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly));}else{values=values.concat(stringify(obj[key],prefix+(allowDots?'.'+key:'['+key+']'),generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly));}}
return values;};module.exports=function(object,opts){var obj=object;var options=opts?utils.assign({},opts):{};if(options.encoder!==null&&options.encoder!==undefined&&typeof options.encoder!=='function'){throw new TypeError('Encoder has to be a function.');}
var delimiter=typeof options.delimiter==='undefined'?defaults.delimiter:options.delimiter;var strictNullHandling=typeof options.strictNullHandling==='boolean'?options.strictNullHandling:defaults.strictNullHandling;var skipNulls=typeof options.skipNulls==='boolean'?options.skipNulls:defaults.skipNulls;var encode=typeof options.encode==='boolean'?options.encode:defaults.encode;var encoder=typeof options.encoder==='function'?options.encoder:defaults.encoder;var sort=typeof options.sort==='function'?options.sort:null;var allowDots=typeof options.allowDots==='undefined'?false:options.allowDots;var serializeDate=typeof options.serializeDate==='function'?options.serializeDate:defaults.serializeDate;var encodeValuesOnly=typeof options.encodeValuesOnly==='boolean'?options.encodeValuesOnly:defaults.encodeValuesOnly;if(typeof options.format==='undefined'){options.format=formats['default'];}else if(!Object.prototype.hasOwnProperty.call(formats.formatters,options.format)){throw new TypeError('Unknown format option provided.');}
var formatter=formats.formatters[options.format];var objKeys;var filter;if(typeof options.filter==='function'){filter=options.filter;obj=filter('',obj);}else if(Array.isArray(options.filter)){filter=options.filter;objKeys=filter;}
var keys=[];if(typeof obj!=='object'||obj===null){return '';}
var arrayFormat;if(options.arrayFormat in arrayPrefixGenerators){arrayFormat=options.arrayFormat;}else if('indices'in options){arrayFormat=options.indices?'indices':'repeat';}else{arrayFormat='indices';}
var generateArrayPrefix=arrayPrefixGenerators[arrayFormat];if(!objKeys){objKeys=Object.keys(obj);}
if(sort){objKeys.sort(sort);}
for(var i=0;i<objKeys.length;++i){var key=objKeys[i];if(skipNulls&&obj[key]===null){continue;}
keys=keys.concat(stringify(obj[key],key,generateArrayPrefix,strictNullHandling,skipNulls,encode?encoder:null,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly));}
var joined=keys.join(delimiter);var prefix=options.addQueryPrefix===true?'?':'';return joined.length>0?prefix+joined:'';};}),(function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(385);var has=Object.prototype.hasOwnProperty;var defaults={allowDots:false,allowPrototypes:false,arrayLimit:20,decoder:utils.decode,delimiter:'&',depth:5,parameterLimit:1000,plainObjects:false,strictNullHandling:false};var parseValues=function parseQueryStringValues(str,options){var obj={};var cleanStr=options.ignoreQueryPrefix?str.replace(/^\?/,''):str;var limit=options.parameterLimit===Infinity?undefined:options.parameterLimit;var parts=cleanStr.split(options.delimiter,limit);for(var i=0;i<parts.length;++i){var part=parts[i];var bracketEqualsPos=part.indexOf(']=');var pos=bracketEqualsPos===-1?part.indexOf('='):bracketEqualsPos+1;var key,val;if(pos===-1){key=options.decoder(part,defaults.decoder);val=options.strictNullHandling?null:'';}else{key=options.decoder(part.slice(0,pos),defaults.decoder);val=options.decoder(part.slice(pos+1),defaults.decoder);}
if(has.call(obj,key)){obj[key]=[].concat(obj[key]).concat(val);}else{obj[key]=val;}}
return obj;};var parseObject=function(chain,val,options){var leaf=val;for(var i=chain.length-1;i>=0;--i){var obj;var root=chain[i];if(root==='[]'){obj=[];obj=obj.concat(leaf);}else{obj=options.plainObjects?Object.create(null):{};var cleanRoot=root.charAt(0)==='['&&root.charAt(root.length-1)===']'?root.slice(1,-1):root;var index=parseInt(cleanRoot,10);if(!isNaN(index)&&root!==cleanRoot&&String(index)===cleanRoot&&index>=0&&(options.parseArrays&&index<=options.arrayLimit)){obj=[];obj[index]=leaf;}else{obj[cleanRoot]=leaf;}}
leaf=obj;}
return leaf;};var parseKeys=function parseQueryStringKeys(givenKey,val,options){if(!givenKey){return;}
var key=options.allowDots?givenKey.replace(/\.([^.[]+)/g,'[$1]'):givenKey;var brackets=/(\[[^[\]]*])/;var child=/(\[[^[\]]*])/g;var segment=brackets.exec(key);var parent=segment?key.slice(0,segment.index):key;var keys=[];if(parent){if(!options.plainObjects&&has.call(Object.prototype,parent)){if(!options.allowPrototypes){return;}}
keys.push(parent);}
var i=0;while((segment=child.exec(key))!==null&&i<options.depth){i+=1;if(!options.plainObjects&&has.call(Object.prototype,segment[1].slice(1,-1))){if(!options.allowPrototypes){return;}}
keys.push(segment[1]);}
if(segment){keys.push('['+key.slice(segment.index)+']');}
return parseObject(keys,val,options);};module.exports=function(str,opts){var options=opts?utils.assign({},opts):{};if(options.decoder!==null&&options.decoder!==undefined&&typeof options.decoder!=='function'){throw new TypeError('Decoder has to be a function.');}
options.ignoreQueryPrefix=options.ignoreQueryPrefix===true;options.delimiter=typeof options.delimiter==='string'||utils.isRegExp(options.delimiter)?options.delimiter:defaults.delimiter;options.depth=typeof options.depth==='number'?options.depth:defaults.depth;options.arrayLimit=typeof options.arrayLimit==='number'?options.arrayLimit:defaults.arrayLimit;options.parseArrays=options.parseArrays!==false;options.decoder=typeof options.decoder==='function'?options.decoder:defaults.decoder;options.allowDots=typeof options.allowDots==='boolean'?options.allowDots:defaults.allowDots;options.plainObjects=typeof options.plainObjects==='boolean'?options.plainObjects:defaults.plainObjects;options.allowPrototypes=typeof options.allowPrototypes==='boolean'?options.allowPrototypes:defaults.allowPrototypes;options.parameterLimit=typeof options.parameterLimit==='number'?options.parameterLimit:defaults.parameterLimit;options.strictNullHandling=typeof options.strictNullHandling==='boolean'?options.strictNullHandling:defaults.strictNullHandling;if(str===''||str===null||typeof str==='undefined'){return options.plainObjects?Object.create(null):{};}
var tempObj=typeof str==='string'?parseValues(str,options):str;var obj=options.plainObjects?Object.create(null):{};var keys=Object.keys(tempObj);for(var i=0;i<keys.length;++i){var key=keys[i];var newObj=parseKeys(key,tempObj[key],options);obj=utils.merge(obj,newObj,options);}
return utils.compact(obj);};}),(function(module,exports,__webpack_require__){"use strict";var fs=__webpack_require__(62)
var qs=__webpack_require__(169)
var validate=__webpack_require__(852)
var extend=__webpack_require__(235)
function Har(request){this.request=request}
Har.prototype.reducer=function(obj,pair){if(obj[pair.name]===undefined){obj[pair.name]=pair.value
return obj}
var arr=[obj[pair.name],pair.value]
obj[pair.name]=arr
return obj}
Har.prototype.prep=function(data){data.queryObj={}
data.headersObj={}
data.postData.jsonObj=false
data.postData.paramsObj=false
if(data.queryString&&data.queryString.length){data.queryObj=data.queryString.reduce(this.reducer,{})}
if(data.headers&&data.headers.length){data.headersObj=data.headers.reduceRight(function(headers,header){headers[header.name]=header.value
return headers},{})}
if(data.cookies&&data.cookies.length){var cookies=data.cookies.map(function(cookie){return cookie.name+'='+cookie.value})
if(cookies.length){data.headersObj.cookie=cookies.join('; ')}}
function some(arr){return arr.some(function(type){return data.postData.mimeType.indexOf(type)===0})}
if(some(['multipart/mixed','multipart/related','multipart/form-data','multipart/alternative'])){data.postData.mimeType='multipart/form-data'}else if(some(['application/x-www-form-urlencoded'])){if(!data.postData.params){data.postData.text=''}else{data.postData.paramsObj=data.postData.params.reduce(this.reducer,{})
data.postData.text=qs.stringify(data.postData.paramsObj)}}else if(some(['text/json','text/x-json','application/json','application/x-json'])){data.postData.mimeType='application/json'
if(data.postData.text){try{data.postData.jsonObj=JSON.parse(data.postData.text)}catch(e){this.request.debug(e)
data.postData.mimeType='text/plain'}}}
return data}
Har.prototype.options=function(options){if(!options.har){return options}
var har={}
extend(har,options.har)
if(har.log&&har.log.entries){har=har.log.entries[0]}
har.url=har.url||options.url||options.uri||options.baseUrl||'/'
har.httpVersion=har.httpVersion||'HTTP/1.1'
har.queryString=har.queryString||[]
har.headers=har.headers||[]
har.cookies=har.cookies||[]
har.postData=har.postData||{}
har.postData.mimeType=har.postData.mimeType||'application/octet-stream'
har.bodySize=0
har.headersSize=0
har.postData.size=0
if(!validate.request(har)){return options}
var req=this.prep(har)
if(req.url){options.url=req.url}
if(req.method){options.method=req.method}
if(Object.keys(req.queryObj).length){options.qs=req.queryObj}
if(Object.keys(req.headersObj).length){options.headers=req.headersObj}
function test(type){return req.postData.mimeType.indexOf(type)===0}
if(test('application/x-www-form-urlencoded')){options.form=req.postData.paramsObj}else if(test('application/json')){if(req.postData.jsonObj){options.body=req.postData.jsonObj
options.json=true}}else if(test('multipart/form-data')){options.formData={}
req.postData.params.forEach(function(param){var attachment={}
if(!param.fileName&&!param.fileName&&!param.contentType){options.formData[param.name]=param.value
return}
if(param.fileName&&!param.value){attachment.value=fs.createReadStream(param.fileName)}else if(param.value){attachment.value=param.value}
if(param.fileName){attachment.options={filename:param.fileName,contentType:param.contentType?param.contentType:null}}
options.formData[param.name]=attachment})}else{if(req.postData.text){options.body=req.postData.text}}
return options}
exports.Har=Har}),(function(module,exports,__webpack_require__){var Ajv=__webpack_require__(853)
var HARError=__webpack_require__(887)
var schemas=__webpack_require__(888)
var ajv
function createAjvInstance(){var ajv=new Ajv({allErrors:true})
ajv.addMetaSchema(__webpack_require__(907))
ajv.addSchema(schemas)
return ajv}
function validate(name,data){data=data||{}
ajv=ajv||createAjvInstance()
var validate=ajv.getSchema(name+'.json')
return new Promise(function(resolve,reject){var valid=validate(data)
!valid?reject(new HARError(validate.errors)):resolve(data)})}
exports.afterRequest=function(data){return validate('afterRequest',data)}
exports.beforeRequest=function(data){return validate('beforeRequest',data)}
exports.browser=function(data){return validate('browser',data)}
exports.cache=function(data){return validate('cache',data)}
exports.content=function(data){return validate('content',data)}
exports.cookie=function(data){return validate('cookie',data)}
exports.creator=function(data){return validate('creator',data)}
exports.entry=function(data){return validate('entry',data)}
exports.har=function(data){return validate('har',data)}
exports.header=function(data){return validate('header',data)}
exports.log=function(data){return validate('log',data)}
exports.page=function(data){return validate('page',data)}
exports.pageTimings=function(data){return validate('pageTimings',data)}
exports.postData=function(data){return validate('postData',data)}
exports.query=function(data){return validate('query',data)}
exports.request=function(data){return validate('request',data)}
exports.response=function(data){return validate('response',data)}
exports.timings=function(data){return validate('timings',data)}}),(function(module,exports,__webpack_require__){"use strict";var compileSchema=__webpack_require__(854),resolve=__webpack_require__(246),Cache=__webpack_require__(858),SchemaObject=__webpack_require__(387),stableStringify=__webpack_require__(388),formats=__webpack_require__(859),rules=__webpack_require__(860),$dataMetaSchema=__webpack_require__(881),util=__webpack_require__(117);module.exports=Ajv;Ajv.prototype.validate=validate;Ajv.prototype.compile=compile;Ajv.prototype.addSchema=addSchema;Ajv.prototype.addMetaSchema=addMetaSchema;Ajv.prototype.validateSchema=validateSchema;Ajv.prototype.getSchema=getSchema;Ajv.prototype.removeSchema=removeSchema;Ajv.prototype.addFormat=addFormat;Ajv.prototype.errorsText=errorsText;Ajv.prototype._addSchema=_addSchema;Ajv.prototype._compile=_compile;Ajv.prototype.compileAsync=__webpack_require__(882);var customKeyword=__webpack_require__(883);Ajv.prototype.addKeyword=customKeyword.add;Ajv.prototype.getKeyword=customKeyword.get;Ajv.prototype.removeKeyword=customKeyword.remove;var errorClasses=__webpack_require__(248);Ajv.ValidationError=errorClasses.Validation;Ajv.MissingRefError=errorClasses.MissingRef;Ajv.$dataMetaSchema=$dataMetaSchema;var META_SCHEMA_ID='http://json-schema.org/draft-07/schema';var META_IGNORE_OPTIONS=['removeAdditional','useDefaults','coerceTypes'];var META_SUPPORT_DATA=['/properties'];function Ajv(opts){if(!(this instanceof Ajv))return new Ajv(opts);opts=this._opts=util.copy(opts)||{};setLogger(this);this._schemas={};this._refs={};this._fragments={};this._formats=formats(opts.format);this._cache=opts.cache||new Cache;this._loadingSchemas={};this._compilations=[];this.RULES=rules();this._getId=chooseGetId(opts);opts.loopRequired=opts.loopRequired||Infinity;if(opts.errorDataPath=='property')opts._errorDataPathProperty=true;if(opts.serialize===undefined)opts.serialize=stableStringify;this._metaOpts=getMetaSchemaOptions(this);if(opts.formats)addInitialFormats(this);addDefaultMetaSchema(this);if(typeof opts.meta=='object')this.addMetaSchema(opts.meta);if(opts.nullable)this.addKeyword('nullable',{metaSchema:{const:true}});addInitialSchemas(this);}
function validate(schemaKeyRef,data){var v;if(typeof schemaKeyRef=='string'){v=this.getSchema(schemaKeyRef);if(!v)throw new Error('no schema with key or ref "'+schemaKeyRef+'"');}else{var schemaObj=this._addSchema(schemaKeyRef);v=schemaObj.validate||this._compile(schemaObj);}
var valid=v(data);if(v.$async!==true)this.errors=v.errors;return valid;}
function compile(schema,_meta){var schemaObj=this._addSchema(schema,undefined,_meta);return schemaObj.validate||this._compile(schemaObj);}
function addSchema(schema,key,_skipValidation,_meta){if(Array.isArray(schema)){for(var i=0;i<schema.length;i++)this.addSchema(schema[i],undefined,_skipValidation,_meta);return this;}
var id=this._getId(schema);if(id!==undefined&&typeof id!='string')
throw new Error('schema id must be string');key=resolve.normalizeId(key||id);checkUnique(this,key);this._schemas[key]=this._addSchema(schema,_skipValidation,_meta,true);return this;}
function addMetaSchema(schema,key,skipValidation){this.addSchema(schema,key,skipValidation,true);return this;}
function validateSchema(schema,throwOrLogError){var $schema=schema.$schema;if($schema!==undefined&&typeof $schema!='string')
throw new Error('$schema must be a string');$schema=$schema||this._opts.defaultMeta||defaultMeta(this);if(!$schema){this.logger.warn('meta-schema not available');this.errors=null;return true;}
var valid=this.validate($schema,schema);if(!valid&&throwOrLogError){var message='schema is invalid: '+this.errorsText();if(this._opts.validateSchema=='log')this.logger.error(message);else throw new Error(message);}
return valid;}
function defaultMeta(self){var meta=self._opts.meta;self._opts.defaultMeta=typeof meta=='object'?self._getId(meta)||meta:self.getSchema(META_SCHEMA_ID)?META_SCHEMA_ID:undefined;return self._opts.defaultMeta;}
function getSchema(keyRef){var schemaObj=_getSchemaObj(this,keyRef);switch(typeof schemaObj){case 'object':return schemaObj.validate||this._compile(schemaObj);case 'string':return this.getSchema(schemaObj);case 'undefined':return _getSchemaFragment(this,keyRef);}}
function _getSchemaFragment(self,ref){var res=resolve.schema.call(self,{schema:{}},ref);if(res){var schema=res.schema,root=res.root,baseId=res.baseId;var v=compileSchema.call(self,schema,root,undefined,baseId);self._fragments[ref]=new SchemaObject({ref:ref,fragment:true,schema:schema,root:root,baseId:baseId,validate:v});return v;}}
function _getSchemaObj(self,keyRef){keyRef=resolve.normalizeId(keyRef);return self._schemas[keyRef]||self._refs[keyRef]||self._fragments[keyRef];}
function removeSchema(schemaKeyRef){if(schemaKeyRef instanceof RegExp){_removeAllSchemas(this,this._schemas,schemaKeyRef);_removeAllSchemas(this,this._refs,schemaKeyRef);return this;}
switch(typeof schemaKeyRef){case 'undefined':_removeAllSchemas(this,this._schemas);_removeAllSchemas(this,this._refs);this._cache.clear();return this;case 'string':var schemaObj=_getSchemaObj(this,schemaKeyRef);if(schemaObj)this._cache.del(schemaObj.cacheKey);delete this._schemas[schemaKeyRef];delete this._refs[schemaKeyRef];return this;case 'object':var serialize=this._opts.serialize;var cacheKey=serialize?serialize(schemaKeyRef):schemaKeyRef;this._cache.del(cacheKey);var id=this._getId(schemaKeyRef);if(id){id=resolve.normalizeId(id);delete this._schemas[id];delete this._refs[id];}}
return this;}
function _removeAllSchemas(self,schemas,regex){for(var keyRef in schemas){var schemaObj=schemas[keyRef];if(!schemaObj.meta&&(!regex||regex.test(keyRef))){self._cache.del(schemaObj.cacheKey);delete schemas[keyRef];}}}
function _addSchema(schema,skipValidation,meta,shouldAddSchema){if(typeof schema!='object'&&typeof schema!='boolean')
throw new Error('schema should be object or boolean');var serialize=this._opts.serialize;var cacheKey=serialize?serialize(schema):schema;var cached=this._cache.get(cacheKey);if(cached)return cached;shouldAddSchema=shouldAddSchema||this._opts.addUsedSchema!==false;var id=resolve.normalizeId(this._getId(schema));if(id&&shouldAddSchema)checkUnique(this,id);var willValidate=this._opts.validateSchema!==false&&!skipValidation;var recursiveMeta;if(willValidate&&!(recursiveMeta=id&&id==resolve.normalizeId(schema.$schema)))
this.validateSchema(schema,true);var localRefs=resolve.ids.call(this,schema);var schemaObj=new SchemaObject({id:id,schema:schema,localRefs:localRefs,cacheKey:cacheKey,meta:meta});if(id[0]!='#'&&shouldAddSchema)this._refs[id]=schemaObj;this._cache.put(cacheKey,schemaObj);if(willValidate&&recursiveMeta)this.validateSchema(schema,true);return schemaObj;}
function _compile(schemaObj,root){if(schemaObj.compiling){schemaObj.validate=callValidate;callValidate.schema=schemaObj.schema;callValidate.errors=null;callValidate.root=root?root:callValidate;if(schemaObj.schema.$async===true)
callValidate.$async=true;return callValidate;}
schemaObj.compiling=true;var currentOpts;if(schemaObj.meta){currentOpts=this._opts;this._opts=this._metaOpts;}
var v;try{v=compileSchema.call(this,schemaObj.schema,root,schemaObj.localRefs);}
catch(e){delete schemaObj.validate;throw e;}
finally{schemaObj.compiling=false;if(schemaObj.meta)this._opts=currentOpts;}
schemaObj.validate=v;schemaObj.refs=v.refs;schemaObj.refVal=v.refVal;schemaObj.root=v.root;return v;function callValidate(){var _validate=schemaObj.validate;var result=_validate.apply(this,arguments);callValidate.errors=_validate.errors;return result;}}
function chooseGetId(opts){switch(opts.schemaId){case 'auto':return _get$IdOrId;case 'id':return _getId;default:return _get$Id;}}
function _getId(schema){if(schema.$id)this.logger.warn('schema $id ignored',schema.$id);return schema.id;}
function _get$Id(schema){if(schema.id)this.logger.warn('schema id ignored',schema.id);return schema.$id;}
function _get$IdOrId(schema){if(schema.$id&&schema.id&&schema.$id!=schema.id)
throw new Error('schema $id is different from id');return schema.$id||schema.id;}
function errorsText(errors,options){errors=errors||this.errors;if(!errors)return 'No errors';options=options||{};var separator=options.separator===undefined?', ':options.separator;var dataVar=options.dataVar===undefined?'data':options.dataVar;var text='';for(var i=0;i<errors.length;i++){var e=errors[i];if(e)text+=dataVar+e.dataPath+' '+e.message+separator;}
return text.slice(0,-separator.length);}
function addFormat(name,format){if(typeof format=='string')format=new RegExp(format);this._formats[name]=format;return this;}
function addDefaultMetaSchema(self){var $dataSchema;if(self._opts.$data){$dataSchema=__webpack_require__(885);self.addMetaSchema($dataSchema,$dataSchema.$id,true);}
if(self._opts.meta===false)return;var metaSchema=__webpack_require__(886);if(self._opts.$data)metaSchema=$dataMetaSchema(metaSchema,META_SUPPORT_DATA);self.addMetaSchema(metaSchema,META_SCHEMA_ID,true);self._refs['http://json-schema.org/schema']=META_SCHEMA_ID;}
function addInitialSchemas(self){var optsSchemas=self._opts.schemas;if(!optsSchemas)return;if(Array.isArray(optsSchemas))self.addSchema(optsSchemas);else for(var key in optsSchemas)self.addSchema(optsSchemas[key],key);}
function addInitialFormats(self){for(var name in self._opts.formats){var format=self._opts.formats[name];self.addFormat(name,format);}}
function checkUnique(self,id){if(self._schemas[id]||self._refs[id])
throw new Error('schema with key or id "'+id+'" already exists');}
function getMetaSchemaOptions(self){var metaOpts=util.copy(self._opts);for(var i=0;i<META_IGNORE_OPTIONS.length;i++)
delete metaOpts[META_IGNORE_OPTIONS[i]];return metaOpts;}
function setLogger(self){var logger=self._opts.logger;if(logger===false){self.logger={log:noop,warn:noop,error:noop};}else{if(logger===undefined)logger=console;if(!(typeof logger=='object'&&logger.log&&logger.warn&&logger.error))
throw new Error('logger must implement log, warn and error methods');self.logger=logger;}}
function noop(){}}),(function(module,exports,__webpack_require__){"use strict";var resolve=__webpack_require__(246),util=__webpack_require__(117),errorClasses=__webpack_require__(248),stableStringify=__webpack_require__(388);var validateGenerator=__webpack_require__(389);var ucs2length=util.ucs2length;var equal=__webpack_require__(247);var ValidationError=errorClasses.Validation;module.exports=compile;function compile(schema,root,localRefs,baseId){var self=this,opts=this._opts,refVal=[undefined],refs={},patterns=[],patternsHash={},defaults=[],defaultsHash={},customRules=[];root=root||{schema:schema,refVal:refVal,refs:refs};var c=checkCompiling.call(this,schema,root,baseId);var compilation=this._compilations[c.index];if(c.compiling)return(compilation.callValidate=callValidate);var formats=this._formats;var RULES=this.RULES;try{var v=localCompile(schema,root,localRefs,baseId);compilation.validate=v;var cv=compilation.callValidate;if(cv){cv.schema=v.schema;cv.errors=null;cv.refs=v.refs;cv.refVal=v.refVal;cv.root=v.root;cv.$async=v.$async;if(opts.sourceCode)cv.source=v.source;}
return v;}finally{endCompiling.call(this,schema,root,baseId);}
function callValidate(){var validate=compilation.validate;var result=validate.apply(this,arguments);callValidate.errors=validate.errors;return result;}
function localCompile(_schema,_root,localRefs,baseId){var isRoot=!_root||(_root&&_root.schema==_schema);if(_root.schema!=root.schema)
return compile.call(self,_schema,_root,localRefs,baseId);var $async=_schema.$async===true;var sourceCode=validateGenerator({isTop:true,schema:_schema,isRoot:isRoot,baseId:baseId,root:_root,schemaPath:'',errSchemaPath:'#',errorPath:'""',MissingRefError:errorClasses.MissingRef,RULES:RULES,validate:validateGenerator,util:util,resolve:resolve,resolveRef:resolveRef,usePattern:usePattern,useDefault:useDefault,useCustomRule:useCustomRule,opts:opts,formats:formats,logger:self.logger,self:self});sourceCode=vars(refVal,refValCode)+vars(patterns,patternCode)
+vars(defaults,defaultCode)+vars(customRules,customRuleCode)
+sourceCode;if(opts.processCode)sourceCode=opts.processCode(sourceCode);var validate;try{var makeValidate=new Function('self','RULES','formats','root','refVal','defaults','customRules','equal','ucs2length','ValidationError',sourceCode);validate=makeValidate(self,RULES,formats,root,refVal,defaults,customRules,equal,ucs2length,ValidationError);refVal[0]=validate;}catch(e){self.logger.error('Error compiling schema, function code:',sourceCode);throw e;}
validate.schema=_schema;validate.errors=null;validate.refs=refs;validate.refVal=refVal;validate.root=isRoot?validate:_root;if($async)validate.$async=true;if(opts.sourceCode===true){validate.source={code:sourceCode,patterns:patterns,defaults:defaults};}
return validate;}
function resolveRef(baseId,ref,isRoot){ref=resolve.url(baseId,ref);var refIndex=refs[ref];var _refVal,refCode;if(refIndex!==undefined){_refVal=refVal[refIndex];refCode='refVal['+refIndex+']';return resolvedRef(_refVal,refCode);}
if(!isRoot&&root.refs){var rootRefId=root.refs[ref];if(rootRefId!==undefined){_refVal=root.refVal[rootRefId];refCode=addLocalRef(ref,_refVal);return resolvedRef(_refVal,refCode);}}
refCode=addLocalRef(ref);var v=resolve.call(self,localCompile,root,ref);if(v===undefined){var localSchema=localRefs&&localRefs[ref];if(localSchema){v=resolve.inlineRef(localSchema,opts.inlineRefs)?localSchema:compile.call(self,localSchema,root,localRefs,baseId);}}
if(v===undefined){removeLocalRef(ref);}else{replaceLocalRef(ref,v);return resolvedRef(v,refCode);}}
function addLocalRef(ref,v){var refId=refVal.length;refVal[refId]=v;refs[ref]=refId;return 'refVal'+refId;}
function removeLocalRef(ref){delete refs[ref];}
function replaceLocalRef(ref,v){var refId=refs[ref];refVal[refId]=v;}
function resolvedRef(refVal,code){return typeof refVal=='object'||typeof refVal=='boolean'?{code:code,schema:refVal,inline:true}:{code:code,$async:refVal&&!!refVal.$async};}
function usePattern(regexStr){var index=patternsHash[regexStr];if(index===undefined){index=patternsHash[regexStr]=patterns.length;patterns[index]=regexStr;}
return 'pattern'+index;}
function useDefault(value){switch(typeof value){case 'boolean':case 'number':return ''+value;case 'string':return util.toQuotedString(value);case 'object':if(value===null)return 'null';var valueStr=stableStringify(value);var index=defaultsHash[valueStr];if(index===undefined){index=defaultsHash[valueStr]=defaults.length;defaults[index]=value;}
return 'default'+index;}}
function useCustomRule(rule,schema,parentSchema,it){var validateSchema=rule.definition.validateSchema;if(validateSchema&&self._opts.validateSchema!==false){var valid=validateSchema(schema);if(!valid){var message='keyword schema is invalid: '+self.errorsText(validateSchema.errors);if(self._opts.validateSchema=='log')self.logger.error(message);else throw new Error(message);}}
var compile=rule.definition.compile,inline=rule.definition.inline,macro=rule.definition.macro;var validate;if(compile){validate=compile.call(self,schema,parentSchema,it);}else if(macro){validate=macro.call(self,schema,parentSchema,it);if(opts.validateSchema!==false)self.validateSchema(validate,true);}else if(inline){validate=inline.call(self,it,rule.keyword,schema,parentSchema);}else{validate=rule.definition.validate;if(!validate)return;}
if(validate===undefined)
throw new Error('custom keyword "'+rule.keyword+'"failed to compile');var index=customRules.length;customRules[index]=validate;return{code:'customRule'+index,validate:validate};}}
function checkCompiling(schema,root,baseId){var index=compIndex.call(this,schema,root,baseId);if(index>=0)return{index:index,compiling:true};index=this._compilations.length;this._compilations[index]={schema:schema,root:root,baseId:baseId};return{index:index,compiling:false};}
function endCompiling(schema,root,baseId){var i=compIndex.call(this,schema,root,baseId);if(i>=0)this._compilations.splice(i,1);}
function compIndex(schema,root,baseId){for(var i=0;i<this._compilations.length;i++){var c=this._compilations[i];if(c.schema==schema&&c.root==root&&c.baseId==baseId)return i;}
return-1;}
function patternCode(i,patterns){return 'var pattern'+i+' = new RegExp('+util.toQuotedString(patterns[i])+');';}
function defaultCode(i){return 'var default'+i+' = defaults['+i+'];';}
function refValCode(i,refVal){return refVal[i]===undefined?'':'var refVal'+i+' = refVal['+i+'];';}
function customRuleCode(i){return 'var customRule'+i+' = customRules['+i+'];';}
function vars(arr,statement){if(!arr.length)return '';var code='';for(var i=0;i<arr.length;i++)
code+=statement(i,arr);return code;}}),(function(module,exports,__webpack_require__){(function(global,factory){true?factory(exports):typeof define==='function'&&define.amd?define(['exports'],factory):(factory((global.URI=global.URI||{})));}(this,(function(exports){'use strict';function merge(){for(var _len=arguments.length,sets=Array(_len),_key=0;_key<_len;_key++){sets[_key]=arguments[_key];}
if(sets.length>1){sets[0]=sets[0].slice(0,-1);var xl=sets.length-1;for(var x=1;x<xl;++x){sets[x]=sets[x].slice(1,-1);}
sets[xl]=sets[xl].slice(1);return sets.join('');}else{return sets[0];}}
function subexp(str){return "(?:"+str+")";}
function typeOf(o){return o===undefined?"undefined":o===null?"null":Object.prototype.toString.call(o).split(" ").pop().split("]").shift().toLowerCase();}
function toUpperCase(str){return str.toUpperCase();}
function toArray(obj){return obj!==undefined&&obj!==null?obj instanceof Array?obj:typeof obj.length!=="number"||obj.split||obj.setInterval||obj.call?[obj]:Array.prototype.slice.call(obj):[];}
function assign(target,source){var obj=target;if(source){for(var key in source){obj[key]=source[key];}}
return obj;}
function buildExps(isIRI){var ALPHA$$="[A-Za-z]",CR$="[\\x0D]",DIGIT$$="[0-9]",DQUOTE$$="[\\x22]",HEXDIG$$=merge(DIGIT$$,"[A-Fa-f]"),LF$$="[\\x0A]",SP$$="[\\x20]",PCT_ENCODED$=subexp(subexp("%[EFef]"+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$)+"|"+subexp("%[89A-Fa-f]"+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$)+"|"+subexp("%"+HEXDIG$$+HEXDIG$$)),GEN_DELIMS$$="[\\:\\/\\?\\#\\[\\]\\@]",SUB_DELIMS$$="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",RESERVED$$=merge(GEN_DELIMS$$,SUB_DELIMS$$),UCSCHAR$$=isIRI?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",IPRIVATE$$=isIRI?"[\\uE000-\\uF8FF]":"[]",UNRESERVED$$=merge(ALPHA$$,DIGIT$$,"[\\-\\.\\_\\~]",UCSCHAR$$),SCHEME$=subexp(ALPHA$$+merge(ALPHA$$,DIGIT$$,"[\\+\\-\\.]")+"*"),USERINFO$=subexp(subexp(PCT_ENCODED$+"|"+merge(UNRESERVED$$,SUB_DELIMS$$,"[\\:]"))+"*"),DEC_OCTET$=subexp(subexp("25[0-5]")+"|"+subexp("2[0-4]"+DIGIT$$)+"|"+subexp("1"+DIGIT$$+DIGIT$$)+"|"+subexp("[1-9]"+DIGIT$$)+"|"+DIGIT$$),DEC_OCTET_RELAXED$=subexp(subexp("25[0-5]")+"|"+subexp("2[0-4]"+DIGIT$$)+"|"+subexp("1"+DIGIT$$+DIGIT$$)+"|"+subexp("0?[1-9]"+DIGIT$$)+"|0?0?"+DIGIT$$),IPV4ADDRESS$=subexp(DEC_OCTET_RELAXED$+"\\."+DEC_OCTET_RELAXED$+"\\."+DEC_OCTET_RELAXED$+"\\."+DEC_OCTET_RELAXED$),H16$=subexp(HEXDIG$$+"{1,4}"),LS32$=subexp(subexp(H16$+"\\:"+H16$)+"|"+IPV4ADDRESS$),IPV6ADDRESS1$=subexp(subexp(H16$+"\\:")+"{6}"+LS32$),IPV6ADDRESS2$=subexp("\\:\\:"+subexp(H16$+"\\:")+"{5}"+LS32$),IPV6ADDRESS3$=subexp(subexp(H16$)+"?\\:\\:"+subexp(H16$+"\\:")+"{4}"+LS32$),IPV6ADDRESS4$=subexp(subexp(subexp(H16$+"\\:")+"{0,1}"+H16$)+"?\\:\\:"+subexp(H16$+"\\:")+"{3}"+LS32$),IPV6ADDRESS5$=subexp(subexp(subexp(H16$+"\\:")+"{0,2}"+H16$)+"?\\:\\:"+subexp(H16$+"\\:")+"{2}"+LS32$),IPV6ADDRESS6$=subexp(subexp(subexp(H16$+"\\:")+"{0,3}"+H16$)+"?\\:\\:"+H16$+"\\:"+LS32$),IPV6ADDRESS7$=subexp(subexp(subexp(H16$+"\\:")+"{0,4}"+H16$)+"?\\:\\:"+LS32$),IPV6ADDRESS8$=subexp(subexp(subexp(H16$+"\\:")+"{0,5}"+H16$)+"?\\:\\:"+H16$),IPV6ADDRESS9$=subexp(subexp(subexp(H16$+"\\:")+"{0,6}"+H16$)+"?\\:\\:"),IPV6ADDRESS$=subexp([IPV6ADDRESS1$,IPV6ADDRESS2$,IPV6ADDRESS3$,IPV6ADDRESS4$,IPV6ADDRESS5$,IPV6ADDRESS6$,IPV6ADDRESS7$,IPV6ADDRESS8$,IPV6ADDRESS9$].join("|")),ZONEID$=subexp(subexp(UNRESERVED$$+"|"+PCT_ENCODED$)+"+"),IPV6ADDRZ$=subexp(IPV6ADDRESS$+"\\%25"+ZONEID$),IPV6ADDRZ_RELAXED$=subexp(IPV6ADDRESS$+subexp("\\%25|\\%(?!"+HEXDIG$$+"{2})")+ZONEID$),IPVFUTURE$=subexp("[vV]"+HEXDIG$$+"+\\."+merge(UNRESERVED$$,SUB_DELIMS$$,"[\\:]")+"+"),IP_LITERAL$=subexp("\\["+subexp(IPV6ADDRZ_RELAXED$+"|"+IPV6ADDRESS$+"|"+IPVFUTURE$)+"\\]"),REG_NAME$=subexp(subexp(PCT_ENCODED$+"|"+merge(UNRESERVED$$,SUB_DELIMS$$))+"*"),HOST$=subexp(IP_LITERAL$+"|"+IPV4ADDRESS$+"(?!"+REG_NAME$+")"+"|"+REG_NAME$),PORT$=subexp(DIGIT$$+"*"),AUTHORITY$=subexp(subexp(USERINFO$+"@")+"?"+HOST$+subexp("\\:"+PORT$)+"?"),PCHAR$=subexp(PCT_ENCODED$+"|"+merge(UNRESERVED$$,SUB_DELIMS$$,"[\\:\\@]")),SEGMENT$=subexp(PCHAR$+"*"),SEGMENT_NZ$=subexp(PCHAR$+"+"),SEGMENT_NZ_NC$=subexp(subexp(PCT_ENCODED$+"|"+merge(UNRESERVED$$,SUB_DELIMS$$,"[\\@]"))+"+"),PATH_ABEMPTY$=subexp(subexp("\\/"+SEGMENT$)+"*"),PATH_ABSOLUTE$=subexp("\\/"+subexp(SEGMENT_NZ$+PATH_ABEMPTY$)+"?"),PATH_NOSCHEME$=subexp(SEGMENT_NZ_NC$+PATH_ABEMPTY$),PATH_ROOTLESS$=subexp(SEGMENT_NZ$+PATH_ABEMPTY$),PATH_EMPTY$="(?!"+PCHAR$+")",PATH$=subexp(PATH_ABEMPTY$+"|"+PATH_ABSOLUTE$+"|"+PATH_NOSCHEME$+"|"+PATH_ROOTLESS$+"|"+PATH_EMPTY$),QUERY$=subexp(subexp(PCHAR$+"|"+merge("[\\/\\?]",IPRIVATE$$))+"*"),FRAGMENT$=subexp(subexp(PCHAR$+"|[\\/\\?]")+"*"),HIER_PART$=subexp(subexp("\\/\\/"+AUTHORITY$+PATH_ABEMPTY$)+"|"+PATH_ABSOLUTE$+"|"+PATH_ROOTLESS$+"|"+PATH_EMPTY$),URI$=subexp(SCHEME$+"\\:"+HIER_PART$+subexp("\\?"+QUERY$)+"?"+subexp("\\#"+FRAGMENT$)+"?"),RELATIVE_PART$=subexp(subexp("\\/\\/"+AUTHORITY$+PATH_ABEMPTY$)+"|"+PATH_ABSOLUTE$+"|"+PATH_NOSCHEME$+"|"+PATH_EMPTY$),RELATIVE$=subexp(RELATIVE_PART$+subexp("\\?"+QUERY$)+"?"+subexp("\\#"+FRAGMENT$)+"?"),URI_REFERENCE$=subexp(URI$+"|"+RELATIVE$),ABSOLUTE_URI$=subexp(SCHEME$+"\\:"+HIER_PART$+subexp("\\?"+QUERY$)+"?"),GENERIC_REF$="^("+SCHEME$+")\\:"+subexp(subexp("\\/\\/("+subexp("("+USERINFO$+")@")+"?("+HOST$+")"+subexp("\\:("+PORT$+")")+"?)")+"?("+PATH_ABEMPTY$+"|"+PATH_ABSOLUTE$+"|"+PATH_ROOTLESS$+"|"+PATH_EMPTY$+")")+subexp("\\?("+QUERY$+")")+"?"+subexp("\\#("+FRAGMENT$+")")+"?$",RELATIVE_REF$="^(){0}"+subexp(subexp("\\/\\/("+subexp("("+USERINFO$+")@")+"?("+HOST$+")"+subexp("\\:("+PORT$+")")+"?)")+"?("+PATH_ABEMPTY$+"|"+PATH_ABSOLUTE$+"|"+PATH_NOSCHEME$+"|"+PATH_EMPTY$+")")+subexp("\\?("+QUERY$+")")+"?"+subexp("\\#("+FRAGMENT$+")")+"?$",ABSOLUTE_REF$="^("+SCHEME$+")\\:"+subexp(subexp("\\/\\/("+subexp("("+USERINFO$+")@")+"?("+HOST$+")"+subexp("\\:("+PORT$+")")+"?)")+"?("+PATH_ABEMPTY$+"|"+PATH_ABSOLUTE$+"|"+PATH_ROOTLESS$+"|"+PATH_EMPTY$+")")+subexp("\\?("+QUERY$+")")+"?$",SAMEDOC_REF$="^"+subexp("\\#("+FRAGMENT$+")")+"?$",AUTHORITY_REF$="^"+subexp("("+USERINFO$+")@")+"?("+HOST$+")"+subexp("\\:("+PORT$+")")+"?$";return{NOT_SCHEME:new RegExp(merge("[^]",ALPHA$$,DIGIT$$,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(merge("[^\\%\\:]",UNRESERVED$$,SUB_DELIMS$$),"g"),NOT_HOST:new RegExp(merge("[^\\%\\[\\]\\:]",UNRESERVED$$,SUB_DELIMS$$),"g"),NOT_PATH:new RegExp(merge("[^\\%\\/\\:\\@]",UNRESERVED$$,SUB_DELIMS$$),"g"),NOT_PATH_NOSCHEME:new RegExp(merge("[^\\%\\/\\@]",UNRESERVED$$,SUB_DELIMS$$),"g"),NOT_QUERY:new RegExp(merge("[^\\%]",UNRESERVED$$,SUB_DELIMS$$,"[\\:\\@\\/\\?]",IPRIVATE$$),"g"),NOT_FRAGMENT:new RegExp(merge("[^\\%]",UNRESERVED$$,SUB_DELIMS$$,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(merge("[^]",UNRESERVED$$,SUB_DELIMS$$),"g"),UNRESERVED:new RegExp(UNRESERVED$$,"g"),OTHER_CHARS:new RegExp(merge("[^\\%]",UNRESERVED$$,RESERVED$$),"g"),PCT_ENCODED:new RegExp(PCT_ENCODED$,"g"),IPV4ADDRESS:new RegExp("^("+IPV4ADDRESS$+")$"),IPV6ADDRESS:new RegExp("^\\[?("+IPV6ADDRESS$+")"+subexp(subexp("\\%25|\\%(?!"+HEXDIG$$+"{2})")+"("+ZONEID$+")")+"?\\]?$")};}
var URI_PROTOCOL=buildExps(false);var IRI_PROTOCOL=buildExps(true);var slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"])_i["return"]();}finally{if(_d)throw _e;}}
return _arr;}
return function(arr,i){if(Array.isArray(arr)){return arr;}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i);}else{throw new TypeError("Invalid attempt to destructure non-iterable instance");}};}();var toConsumableArray=function(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2;}else{return Array.from(arr);}};var maxInt=2147483647;var base=36;var tMin=1;var tMax=26;var skew=38;var damp=700;var initialBias=72;var initialN=128;var delimiter='-';var regexPunycode=/^xn--/;var regexNonASCII=/[^\0-\x7E]/;var regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g;var errors={'overflow':'Overflow: input needs wider integers to process','not-basic':'Illegal input >= 0x80 (not a basic code point)','invalid-input':'Invalid input'};var baseMinusTMin=base-tMin;var floor=Math.floor;var stringFromCharCode=String.fromCharCode;function error$1(type){throw new RangeError(errors[type]);}
function map(array,fn){var result=[];var length=array.length;while(length--){result[length]=fn(array[length]);}
return result;}
function mapDomain(string,fn){var parts=string.split('@');var result='';if(parts.length>1){result=parts[0]+'@';string=parts[1];}
string=string.replace(regexSeparators,'\x2E');var labels=string.split('.');var encoded=map(labels,fn).join('.');return result+encoded;}
function ucs2decode(string){var output=[];var counter=0;var length=string.length;while(counter<length){var value=string.charCodeAt(counter++);if(value>=0xD800&&value<=0xDBFF&&counter<length){var extra=string.charCodeAt(counter++);if((extra&0xFC00)==0xDC00){output.push(((value&0x3FF)<<10)+(extra&0x3FF)+0x10000);}else{output.push(value);counter--;}}else{output.push(value);}}
return output;}
var ucs2encode=function ucs2encode(array){return String.fromCodePoint.apply(String,toConsumableArray(array));};var basicToDigit=function basicToDigit(codePoint){if(codePoint-0x30<0x0A){return codePoint-0x16;}
if(codePoint-0x41<0x1A){return codePoint-0x41;}
if(codePoint-0x61<0x1A){return codePoint-0x61;}
return base;};var digitToBasic=function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((flag!=0)<<5);};var adapt=function adapt(delta,numPoints,firstTime){var k=0;delta=firstTime?floor(delta/damp):delta>>1;delta+=floor(delta/numPoints);for(;delta>baseMinusTMin*tMax>>1;k+=base){delta=floor(delta/baseMinusTMin);}
return floor(k+(baseMinusTMin+1)*delta/(delta+skew));};var decode=function decode(input){var output=[];var inputLength=input.length;var i=0;var n=initialN;var bias=initialBias;var basic=input.lastIndexOf(delimiter);if(basic<0){basic=0;}
for(var j=0;j<basic;++j){if(input.charCodeAt(j)>=0x80){error$1('not-basic');}
output.push(input.charCodeAt(j));}
for(var index=basic>0?basic+1:0;index<inputLength;){var oldi=i;for(var w=1,k=base;;k+=base){if(index>=inputLength){error$1('invalid-input');}
var digit=basicToDigit(input.charCodeAt(index++));if(digit>=base||digit>floor((maxInt-i)/w)){error$1('overflow');}
i+=digit*w;var t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(digit<t){break;}
var baseMinusT=base-t;if(w>floor(maxInt/baseMinusT)){error$1('overflow');}
w*=baseMinusT;}
var out=output.length+1;bias=adapt(i-oldi,out,oldi==0);if(floor(i/out)>maxInt-n){error$1('overflow');}
n+=floor(i/out);i%=out;output.splice(i++,0,n);}
return String.fromCodePoint.apply(String,output);};var encode=function encode(input){var output=[];input=ucs2decode(input);var inputLength=input.length;var n=initialN;var delta=0;var bias=initialBias;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=input[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _currentValue2=_step.value;if(_currentValue2<0x80){output.push(stringFromCharCode(_currentValue2));}}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return();}}finally{if(_didIteratorError){throw _iteratorError;}}}
var basicLength=output.length;var handledCPCount=basicLength;if(basicLength){output.push(delimiter);}
while(handledCPCount<inputLength){var m=maxInt;var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=input[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var currentValue=_step2.value;if(currentValue>=n&&currentValue<m){m=currentValue;}}}catch(err){_didIteratorError2=true;_iteratorError2=err;}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return();}}finally{if(_didIteratorError2){throw _iteratorError2;}}}
var handledCPCountPlusOne=handledCPCount+1;if(m-n>floor((maxInt-delta)/handledCPCountPlusOne)){error$1('overflow');}
delta+=(m-n)*handledCPCountPlusOne;n=m;var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=input[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var _currentValue=_step3.value;if(_currentValue<n&&++delta>maxInt){error$1('overflow');}
if(_currentValue==n){var q=delta;for(var k=base;;k+=base){var t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(q<t){break;}
var qMinusT=q-t;var baseMinusT=base-t;output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0)));q=floor(qMinusT/baseMinusT);}
output.push(stringFromCharCode(digitToBasic(q,0)));bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength);delta=0;++handledCPCount;}}}catch(err){_didIteratorError3=true;_iteratorError3=err;}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return();}}finally{if(_didIteratorError3){throw _iteratorError3;}}}
++delta;++n;}
return output.join('');};var toUnicode=function toUnicode(input){return mapDomain(input,function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string;});};var toASCII=function toASCII(input){return mapDomain(input,function(string){return regexNonASCII.test(string)?'xn--'+encode(string):string;});};var punycode={'version':'2.1.0','ucs2':{'decode':ucs2decode,'encode':ucs2encode},'decode':decode,'encode':encode,'toASCII':toASCII,'toUnicode':toUnicode};var SCHEMES={};function pctEncChar(chr){var c=chr.charCodeAt(0);var e=void 0;if(c<16)e="%0"+c.toString(16).toUpperCase();else if(c<128)e="%"+c.toString(16).toUpperCase();else if(c<2048)e="%"+(c>>6|192).toString(16).toUpperCase()+"%"+(c&63|128).toString(16).toUpperCase();else e="%"+(c>>12|224).toString(16).toUpperCase()+"%"+(c>>6&63|128).toString(16).toUpperCase()+"%"+(c&63|128).toString(16).toUpperCase();return e;}
function pctDecChars(str){var newStr="";var i=0;var il=str.length;while(i<il){var c=parseInt(str.substr(i+1,2),16);if(c<128){newStr+=String.fromCharCode(c);i+=3;}else if(c>=194&&c<224){if(il-i>=6){var c2=parseInt(str.substr(i+4,2),16);newStr+=String.fromCharCode((c&31)<<6|c2&63);}else{newStr+=str.substr(i,6);}
i+=6;}else if(c>=224){if(il-i>=9){var _c=parseInt(str.substr(i+4,2),16);var c3=parseInt(str.substr(i+7,2),16);newStr+=String.fromCharCode((c&15)<<12|(_c&63)<<6|c3&63);}else{newStr+=str.substr(i,9);}
i+=9;}else{newStr+=str.substr(i,3);i+=3;}}
return newStr;}
function _normalizeComponentEncoding(components,protocol){function decodeUnreserved(str){var decStr=pctDecChars(str);return!decStr.match(protocol.UNRESERVED)?str:decStr;}
if(components.scheme)components.scheme=String(components.scheme).replace(protocol.PCT_ENCODED,decodeUnreserved).toLowerCase().replace(protocol.NOT_SCHEME,"");if(components.userinfo!==undefined)components.userinfo=String(components.userinfo).replace(protocol.PCT_ENCODED,decodeUnreserved).replace(protocol.NOT_USERINFO,pctEncChar).replace(protocol.PCT_ENCODED,toUpperCase);if(components.host!==undefined)components.host=String(components.host).replace(protocol.PCT_ENCODED,decodeUnreserved).toLowerCase().replace(protocol.NOT_HOST,pctEncChar).replace(protocol.PCT_ENCODED,toUpperCase);if(components.path!==undefined)components.path=String(components.path).replace(protocol.PCT_ENCODED,decodeUnreserved).replace(components.scheme?protocol.NOT_PATH:protocol.NOT_PATH_NOSCHEME,pctEncChar).replace(protocol.PCT_ENCODED,toUpperCase);if(components.query!==undefined)components.query=String(components.query).replace(protocol.PCT_ENCODED,decodeUnreserved).replace(protocol.NOT_QUERY,pctEncChar).replace(protocol.PCT_ENCODED,toUpperCase);if(components.fragment!==undefined)components.fragment=String(components.fragment).replace(protocol.PCT_ENCODED,decodeUnreserved).replace(protocol.NOT_FRAGMENT,pctEncChar).replace(protocol.PCT_ENCODED,toUpperCase);return components;}
function _stripLeadingZeros(str){return str.replace(/^0*(.*)/,"$1")||"0";}
function _normalizeIPv4(host,protocol){var matches=host.match(protocol.IPV4ADDRESS)||[];var _matches=slicedToArray(matches,2),address=_matches[1];if(address){return address.split(".").map(_stripLeadingZeros).join(".");}else{return host;}}
function _normalizeIPv6(host,protocol){var matches=host.match(protocol.IPV6ADDRESS)||[];var _matches2=slicedToArray(matches,3),address=_matches2[1],zone=_matches2[2];if(address){var _address$toLowerCase$=address.toLowerCase().split('::').reverse(),_address$toLowerCase$2=slicedToArray(_address$toLowerCase$,2),last=_address$toLowerCase$2[0],first=_address$toLowerCase$2[1];var firstFields=first?first.split(":").map(_stripLeadingZeros):[];var lastFields=last.split(":").map(_stripLeadingZeros);var isLastFieldIPv4Address=protocol.IPV4ADDRESS.test(lastFields[lastFields.length-1]);var fieldCount=isLastFieldIPv4Address?7:8;var lastFieldsStart=lastFields.length-fieldCount;var fields=Array(fieldCount);for(var x=0;x<fieldCount;++x){fields[x]=firstFields[x]||lastFields[lastFieldsStart+x]||'';}
if(isLastFieldIPv4Address){fields[fieldCount-1]=_normalizeIPv4(fields[fieldCount-1],protocol);}
var allZeroFields=fields.reduce(function(acc,field,index){if(!field||field==="0"){var lastLongest=acc[acc.length-1];if(lastLongest&&lastLongest.index+lastLongest.length===index){lastLongest.length++;}else{acc.push({index:index,length:1});}}
return acc;},[]);var longestZeroFields=allZeroFields.sort(function(a,b){return b.length-a.length;})[0];var newHost=void 0;if(longestZeroFields&&longestZeroFields.length>1){var newFirst=fields.slice(0,longestZeroFields.index);var newLast=fields.slice(longestZeroFields.index+longestZeroFields.length);newHost=newFirst.join(":")+"::"+newLast.join(":");}else{newHost=fields.join(":");}
if(zone){newHost+="%"+zone;}
return newHost;}else{return host;}}
var URI_PARSE=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i;var NO_MATCH_IS_UNDEFINED="".match(/(){0}/)[1]===undefined;function parse(uriString){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var components={};var protocol=options.iri!==false?IRI_PROTOCOL:URI_PROTOCOL;if(options.reference==="suffix")uriString=(options.scheme?options.scheme+":":"")+"//"+uriString;var matches=uriString.match(URI_PARSE);if(matches){if(NO_MATCH_IS_UNDEFINED){components.scheme=matches[1];components.userinfo=matches[3];components.host=matches[4];components.port=parseInt(matches[5],10);components.path=matches[6]||"";components.query=matches[7];components.fragment=matches[8];if(isNaN(components.port)){components.port=matches[5];}}else{components.scheme=matches[1]||undefined;components.userinfo=uriString.indexOf("@")!==-1?matches[3]:undefined;components.host=uriString.indexOf("//")!==-1?matches[4]:undefined;components.port=parseInt(matches[5],10);components.path=matches[6]||"";components.query=uriString.indexOf("?")!==-1?matches[7]:undefined;components.fragment=uriString.indexOf("#")!==-1?matches[8]:undefined;if(isNaN(components.port)){components.port=uriString.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?matches[4]:undefined;}}
if(components.host){components.host=_normalizeIPv6(_normalizeIPv4(components.host,protocol),protocol);}
if(components.scheme===undefined&&components.userinfo===undefined&&components.host===undefined&&components.port===undefined&&!components.path&&components.query===undefined){components.reference="same-document";}else if(components.scheme===undefined){components.reference="relative";}else if(components.fragment===undefined){components.reference="absolute";}else{components.reference="uri";}
if(options.reference&&options.reference!=="suffix"&&options.reference!==components.reference){components.error=components.error||"URI is not a "+options.reference+" reference.";}
var schemeHandler=SCHEMES[(options.scheme||components.scheme||"").toLowerCase()];if(!options.unicodeSupport&&(!schemeHandler||!schemeHandler.unicodeSupport)){if(components.host&&(options.domainHost||schemeHandler&&schemeHandler.domainHost)){try{components.host=punycode.toASCII(components.host.replace(protocol.PCT_ENCODED,pctDecChars).toLowerCase());}catch(e){components.error=components.error||"Host's domain name can not be converted to ASCII via punycode: "+e;}}
_normalizeComponentEncoding(components,URI_PROTOCOL);}else{_normalizeComponentEncoding(components,protocol);}
if(schemeHandler&&schemeHandler.parse){schemeHandler.parse(components,options);}}else{components.error=components.error||"URI can not be parsed.";}
return components;}
function _recomposeAuthority(components,options){var protocol=options.iri!==false?IRI_PROTOCOL:URI_PROTOCOL;var uriTokens=[];if(components.userinfo!==undefined){uriTokens.push(components.userinfo);uriTokens.push("@");}
if(components.host!==undefined){uriTokens.push(_normalizeIPv6(_normalizeIPv4(String(components.host),protocol),protocol).replace(protocol.IPV6ADDRESS,function(_,$1,$2){return "["+$1+($2?"%25"+$2:"")+"]";}));}
if(typeof components.port==="number"){uriTokens.push(":");uriTokens.push(components.port.toString(10));}
return uriTokens.length?uriTokens.join(""):undefined;}
var RDS1=/^\.\.?\//;var RDS2=/^\/\.(\/|$)/;var RDS3=/^\/\.\.(\/|$)/;var RDS5=/^\/?(?:.|\n)*?(?=\/|$)/;function removeDotSegments(input){var output=[];while(input.length){if(input.match(RDS1)){input=input.replace(RDS1,"");}else if(input.match(RDS2)){input=input.replace(RDS2,"/");}else if(input.match(RDS3)){input=input.replace(RDS3,"/");output.pop();}else if(input==="."||input===".."){input="";}else{var im=input.match(RDS5);if(im){var s=im[0];input=input.slice(s.length);output.push(s);}else{throw new Error("Unexpected dot segment condition");}}}
return output.join("");}
function serialize(components){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var protocol=options.iri?IRI_PROTOCOL:URI_PROTOCOL;var uriTokens=[];var schemeHandler=SCHEMES[(options.scheme||components.scheme||"").toLowerCase()];if(schemeHandler&&schemeHandler.serialize)schemeHandler.serialize(components,options);if(components.host){if(protocol.IPV6ADDRESS.test(components.host)){}
else if(options.domainHost||schemeHandler&&schemeHandler.domainHost){try{components.host=!options.iri?punycode.toASCII(components.host.replace(protocol.PCT_ENCODED,pctDecChars).toLowerCase()):punycode.toUnicode(components.host);}catch(e){components.error=components.error||"Host's domain name can not be converted to "+(!options.iri?"ASCII":"Unicode")+" via punycode: "+e;}}}
_normalizeComponentEncoding(components,protocol);if(options.reference!=="suffix"&&components.scheme){uriTokens.push(components.scheme);uriTokens.push(":");}
var authority=_recomposeAuthority(components,options);if(authority!==undefined){if(options.reference!=="suffix"){uriTokens.push("//");}
uriTokens.push(authority);if(components.path&&components.path.charAt(0)!=="/"){uriTokens.push("/");}}
if(components.path!==undefined){var s=components.path;if(!options.absolutePath&&(!schemeHandler||!schemeHandler.absolutePath)){s=removeDotSegments(s);}
if(authority===undefined){s=s.replace(/^\/\//,"/%2F");}
uriTokens.push(s);}
if(components.query!==undefined){uriTokens.push("?");uriTokens.push(components.query);}
if(components.fragment!==undefined){uriTokens.push("#");uriTokens.push(components.fragment);}
return uriTokens.join("");}
function resolveComponents(base,relative){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var skipNormalization=arguments[3];var target={};if(!skipNormalization){base=parse(serialize(base,options),options);relative=parse(serialize(relative,options),options);}
options=options||{};if(!options.tolerant&&relative.scheme){target.scheme=relative.scheme;target.userinfo=relative.userinfo;target.host=relative.host;target.port=relative.port;target.path=removeDotSegments(relative.path||"");target.query=relative.query;}else{if(relative.userinfo!==undefined||relative.host!==undefined||relative.port!==undefined){target.userinfo=relative.userinfo;target.host=relative.host;target.port=relative.port;target.path=removeDotSegments(relative.path||"");target.query=relative.query;}else{if(!relative.path){target.path=base.path;if(relative.query!==undefined){target.query=relative.query;}else{target.query=base.query;}}else{if(relative.path.charAt(0)==="/"){target.path=removeDotSegments(relative.path);}else{if((base.userinfo!==undefined||base.host!==undefined||base.port!==undefined)&&!base.path){target.path="/"+relative.path;}else if(!base.path){target.path=relative.path;}else{target.path=base.path.slice(0,base.path.lastIndexOf("/")+1)+relative.path;}
target.path=removeDotSegments(target.path);}
target.query=relative.query;}
target.userinfo=base.userinfo;target.host=base.host;target.port=base.port;}
target.scheme=base.scheme;}
target.fragment=relative.fragment;return target;}
function resolve(baseURI,relativeURI,options){var schemelessOptions=assign({scheme:'null'},options);return serialize(resolveComponents(parse(baseURI,schemelessOptions),parse(relativeURI,schemelessOptions),schemelessOptions,true),schemelessOptions);}
function normalize(uri,options){if(typeof uri==="string"){uri=serialize(parse(uri,options),options);}else if(typeOf(uri)==="object"){uri=parse(serialize(uri,options),options);}
return uri;}
function equal(uriA,uriB,options){if(typeof uriA==="string"){uriA=serialize(parse(uriA,options),options);}else if(typeOf(uriA)==="object"){uriA=serialize(uriA,options);}
if(typeof uriB==="string"){uriB=serialize(parse(uriB,options),options);}else if(typeOf(uriB)==="object"){uriB=serialize(uriB,options);}
return uriA===uriB;}
function escapeComponent(str,options){return str&&str.toString().replace(!options||!options.iri?URI_PROTOCOL.ESCAPE:IRI_PROTOCOL.ESCAPE,pctEncChar);}
function unescapeComponent(str,options){return str&&str.toString().replace(!options||!options.iri?URI_PROTOCOL.PCT_ENCODED:IRI_PROTOCOL.PCT_ENCODED,pctDecChars);}
var handler={scheme:"http",domainHost:true,parse:function parse(components,options){if(!components.host){components.error=components.error||"HTTP URIs must have a host.";}
return components;},serialize:function serialize(components,options){if(components.port===(String(components.scheme).toLowerCase()!=="https"?80:443)||components.port===""){components.port=undefined;}
if(!components.path){components.path="/";}
return components;}};var handler$1={scheme:"https",domainHost:handler.domainHost,parse:handler.parse,serialize:handler.serialize};var O={};var isIRI=true;var UNRESERVED$$="[A-Za-z0-9\\-\\.\\_\\~"+(isIRI?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]";var HEXDIG$$="[0-9A-Fa-f]";var PCT_ENCODED$=subexp(subexp("%[EFef]"+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$)+"|"+subexp("%[89A-Fa-f]"+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$)+"|"+subexp("%"+HEXDIG$$+HEXDIG$$));var ATEXT$$="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]";var QTEXT$$="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]";var VCHAR$$=merge(QTEXT$$,"[\\\"\\\\]");var SOME_DELIMS$$="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]";var UNRESERVED=new RegExp(UNRESERVED$$,"g");var PCT_ENCODED=new RegExp(PCT_ENCODED$,"g");var NOT_LOCAL_PART=new RegExp(merge("[^]",ATEXT$$,"[\\.]",'[\\"]',VCHAR$$),"g");var NOT_HFNAME=new RegExp(merge("[^]",UNRESERVED$$,SOME_DELIMS$$),"g");var NOT_HFVALUE=NOT_HFNAME;function decodeUnreserved(str){var decStr=pctDecChars(str);return!decStr.match(UNRESERVED)?str:decStr;}
var handler$2={scheme:"mailto",parse:function parse$$1(components,options){var mailtoComponents=components;var to=mailtoComponents.to=mailtoComponents.path?mailtoComponents.path.split(","):[];mailtoComponents.path=undefined;if(mailtoComponents.query){var unknownHeaders=false;var headers={};var hfields=mailtoComponents.query.split("&");for(var x=0,xl=hfields.length;x<xl;++x){var hfield=hfields[x].split("=");switch(hfield[0]){case "to":var toAddrs=hfield[1].split(",");for(var _x=0,_xl=toAddrs.length;_x<_xl;++_x){to.push(toAddrs[_x]);}
break;case "subject":mailtoComponents.subject=unescapeComponent(hfield[1],options);break;case "body":mailtoComponents.body=unescapeComponent(hfield[1],options);break;default:unknownHeaders=true;headers[unescapeComponent(hfield[0],options)]=unescapeComponent(hfield[1],options);break;}}
if(unknownHeaders)mailtoComponents.headers=headers;}
mailtoComponents.query=undefined;for(var _x2=0,_xl2=to.length;_x2<_xl2;++_x2){var addr=to[_x2].split("@");addr[0]=unescapeComponent(addr[0]);if(!options.unicodeSupport){try{addr[1]=punycode.toASCII(unescapeComponent(addr[1],options).toLowerCase());}catch(e){mailtoComponents.error=mailtoComponents.error||"Email address's domain name can not be converted to ASCII via punycode: "+e;}}else{addr[1]=unescapeComponent(addr[1],options).toLowerCase();}
to[_x2]=addr.join("@");}
return mailtoComponents;},serialize:function serialize$$1(mailtoComponents,options){var components=mailtoComponents;var to=toArray(mailtoComponents.to);if(to){for(var x=0,xl=to.length;x<xl;++x){var toAddr=String(to[x]);var atIdx=toAddr.lastIndexOf("@");var localPart=toAddr.slice(0,atIdx).replace(PCT_ENCODED,decodeUnreserved).replace(PCT_ENCODED,toUpperCase).replace(NOT_LOCAL_PART,pctEncChar);var domain=toAddr.slice(atIdx+1);try{domain=!options.iri?punycode.toASCII(unescapeComponent(domain,options).toLowerCase()):punycode.toUnicode(domain);}catch(e){components.error=components.error||"Email address's domain name can not be converted to "+(!options.iri?"ASCII":"Unicode")+" via punycode: "+e;}
to[x]=localPart+"@"+domain;}
components.path=to.join(",");}
var headers=mailtoComponents.headers=mailtoComponents.headers||{};if(mailtoComponents.subject)headers["subject"]=mailtoComponents.subject;if(mailtoComponents.body)headers["body"]=mailtoComponents.body;var fields=[];for(var name in headers){if(headers[name]!==O[name]){fields.push(name.replace(PCT_ENCODED,decodeUnreserved).replace(PCT_ENCODED,toUpperCase).replace(NOT_HFNAME,pctEncChar)+"="+headers[name].replace(PCT_ENCODED,decodeUnreserved).replace(PCT_ENCODED,toUpperCase).replace(NOT_HFVALUE,pctEncChar));}}
if(fields.length){components.query=fields.join("&");}
return components;}};var URN_PARSE=/^([^\:]+)\:(.*)/;var handler$3={scheme:"urn",parse:function parse$$1(components,options){var matches=components.path&&components.path.match(URN_PARSE);var urnComponents=components;if(matches){var scheme=options.scheme||urnComponents.scheme||"urn";var nid=matches[1].toLowerCase();var nss=matches[2];var urnScheme=scheme+":"+(options.nid||nid);var schemeHandler=SCHEMES[urnScheme];urnComponents.nid=nid;urnComponents.nss=nss;urnComponents.path=undefined;if(schemeHandler){urnComponents=schemeHandler.parse(urnComponents,options);}}else{urnComponents.error=urnComponents.error||"URN can not be parsed.";}
return urnComponents;},serialize:function serialize$$1(urnComponents,options){var scheme=options.scheme||urnComponents.scheme||"urn";var nid=urnComponents.nid;var urnScheme=scheme+":"+(options.nid||nid);var schemeHandler=SCHEMES[urnScheme];if(schemeHandler){urnComponents=schemeHandler.serialize(urnComponents,options);}
var uriComponents=urnComponents;var nss=urnComponents.nss;uriComponents.path=(nid||options.nid)+":"+nss;return uriComponents;}};var UUID=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/;var handler$4={scheme:"urn:uuid",parse:function parse(urnComponents,options){var uuidComponents=urnComponents;uuidComponents.uuid=uuidComponents.nss;uuidComponents.nss=undefined;if(!options.tolerant&&(!uuidComponents.uuid||!uuidComponents.uuid.match(UUID))){uuidComponents.error=uuidComponents.error||"UUID is not valid.";}
return uuidComponents;},serialize:function serialize(uuidComponents,options){var urnComponents=uuidComponents;urnComponents.nss=(uuidComponents.uuid||"").toLowerCase();return urnComponents;}};SCHEMES[handler.scheme]=handler;SCHEMES[handler$1.scheme]=handler$1;SCHEMES[handler$2.scheme]=handler$2;SCHEMES[handler$3.scheme]=handler$3;SCHEMES[handler$4.scheme]=handler$4;exports.SCHEMES=SCHEMES;exports.pctEncChar=pctEncChar;exports.pctDecChars=pctDecChars;exports.parse=parse;exports.removeDotSegments=removeDotSegments;exports.serialize=serialize;exports.resolveComponents=resolveComponents;exports.resolve=resolve;exports.normalize=normalize;exports.equal=equal;exports.escapeComponent=escapeComponent;exports.unescapeComponent=unescapeComponent;Object.defineProperty(exports,'__esModule',{value:true});})));}),(function(module,exports,__webpack_require__){"use strict";module.exports=function ucs2length(str){var length=0,len=str.length,pos=0,value;while(pos<len){length++;value=str.charCodeAt(pos++);if(value>=0xD800&&value<=0xDBFF&&pos<len){value=str.charCodeAt(pos);if((value&0xFC00)==0xDC00)pos++;}}
return length;};}),(function(module,exports,__webpack_require__){"use strict";var traverse=module.exports=function(schema,opts,cb){if(typeof opts=='function'){cb=opts;opts={};}
cb=opts.cb||cb;var pre=(typeof cb=='function')?cb:cb.pre||function(){};var post=cb.post||function(){};_traverse(opts,pre,post,schema,'',schema);};traverse.keywords={additionalItems:true,items:true,contains:true,additionalProperties:true,propertyNames:true,not:true};traverse.arrayKeywords={items:true,allOf:true,anyOf:true,oneOf:true};traverse.propsKeywords={definitions:true,properties:true,patternProperties:true,dependencies:true};traverse.skipKeywords={default:true,enum:true,const:true,required:true,maximum:true,minimum:true,exclusiveMaximum:true,exclusiveMinimum:true,multipleOf:true,maxLength:true,minLength:true,pattern:true,format:true,maxItems:true,minItems:true,uniqueItems:true,maxProperties:true,minProperties:true};function _traverse(opts,pre,post,schema,jsonPtr,rootSchema,parentJsonPtr,parentKeyword,parentSchema,keyIndex){if(schema&&typeof schema=='object'&&!Array.isArray(schema)){pre(schema,jsonPtr,rootSchema,parentJsonPtr,parentKeyword,parentSchema,keyIndex);for(var key in schema){var sch=schema[key];if(Array.isArray(sch)){if(key in traverse.arrayKeywords){for(var i=0;i<sch.length;i++)
_traverse(opts,pre,post,sch[i],jsonPtr+'/'+key+'/'+i,rootSchema,jsonPtr,key,schema,i);}}else if(key in traverse.propsKeywords){if(sch&&typeof sch=='object'){for(var prop in sch)
_traverse(opts,pre,post,sch[prop],jsonPtr+'/'+key+'/'+escapeJsonPtr(prop),rootSchema,jsonPtr,key,schema,prop);}}else if(key in traverse.keywords||(opts.allKeys&&!(key in traverse.skipKeywords))){_traverse(opts,pre,post,sch,jsonPtr+'/'+key,rootSchema,jsonPtr,key,schema);}}
post(schema,jsonPtr,rootSchema,parentJsonPtr,parentKeyword,parentSchema,keyIndex);}}
function escapeJsonPtr(str){return str.replace(/~/g,'~0').replace(/\//g,'~1');}}),(function(module,exports,__webpack_require__){"use strict";var Cache=module.exports=function Cache(){this._cache={};};Cache.prototype.put=function Cache_put(key,value){this._cache[key]=value;};Cache.prototype.get=function Cache_get(key){return this._cache[key];};Cache.prototype.del=function Cache_del(key){delete this._cache[key];};Cache.prototype.clear=function Cache_clear(){this._cache={};};}),(function(module,exports,__webpack_require__){"use strict";var util=__webpack_require__(117);var DATE=/^(\d\d\d\d)-(\d\d)-(\d\d)$/;var DAYS=[0,31,28,31,30,31,30,31,31,30,31,30,31];var TIME=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i;var HOSTNAME=/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i;var URI=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;var URIREF=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;var URITEMPLATE=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i;var URL=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i;var UUID=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i;var JSON_POINTER=/^(?:\/(?:[^~/]|~0|~1)*)*$/;var JSON_POINTER_URI_FRAGMENT=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i;var RELATIVE_JSON_POINTER=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;module.exports=formats;function formats(mode){mode=mode=='full'?'full':'fast';return util.copy(formats[mode]);}
formats.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,'date-time':/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i,uri:/^(?:[a-z][a-z0-9+-.]*:)(?:\/?\/)?[^\s]*$/i,'uri-reference':/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,'uri-template':URITEMPLATE,url:URL,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:HOSTNAME,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:regex,uuid:UUID,'json-pointer':JSON_POINTER,'json-pointer-uri-fragment':JSON_POINTER_URI_FRAGMENT,'relative-json-pointer':RELATIVE_JSON_POINTER};formats.full={date:date,time:time,'date-time':date_time,uri:uri,'uri-reference':URIREF,'uri-template':URITEMPLATE,url:URL,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:hostname,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:regex,uuid:UUID,'json-pointer':JSON_POINTER,'json-pointer-uri-fragment':JSON_POINTER_URI_FRAGMENT,'relative-json-pointer':RELATIVE_JSON_POINTER};function isLeapYear(year){return year%4===0&&(year%100!==0||year%400===0);}
function date(str){var matches=str.match(DATE);if(!matches)return false;var year=+matches[1];var month=+matches[2];var day=+matches[3];return month>=1&&month<=12&&day>=1&&day<=(month==2&&isLeapYear(year)?29:DAYS[month]);}
function time(str,full){var matches=str.match(TIME);if(!matches)return false;var hour=matches[1];var minute=matches[2];var second=matches[3];var timeZone=matches[5];return((hour<=23&&minute<=59&&second<=59)||(hour==23&&minute==59&&second==60))&&(!full||timeZone);}
var DATE_TIME_SEPARATOR=/t|\s/i;function date_time(str){var dateTime=str.split(DATE_TIME_SEPARATOR);return dateTime.length==2&&date(dateTime[0])&&time(dateTime[1],true);}
function hostname(str){return str.length<=255&&HOSTNAME.test(str);}
var NOT_URI_FRAGMENT=/\/|:/;function uri(str){return NOT_URI_FRAGMENT.test(str)&&URI.test(str);}
var Z_ANCHOR=/[^\\]\\Z/;function regex(str){if(Z_ANCHOR.test(str))return false;try{new RegExp(str);return true;}catch(e){return false;}}}),(function(module,exports,__webpack_require__){"use strict";var ruleModules=__webpack_require__(861),toHash=__webpack_require__(117).toHash;module.exports=function rules(){var RULES=[{type:'number',rules:[{'maximum':['exclusiveMaximum']},{'minimum':['exclusiveMinimum']},'multipleOf','format']},{type:'string',rules:['maxLength','minLength','pattern','format']},{type:'array',rules:['maxItems','minItems','items','contains','uniqueItems']},{type:'object',rules:['maxProperties','minProperties','required','dependencies','propertyNames',{'properties':['additionalProperties','patternProperties']}]},{rules:['$ref','const','enum','not','anyOf','oneOf','allOf','if']}];var ALL=['type','$comment'];var KEYWORDS=['$schema','$id','id','$data','title','description','default','definitions','examples','readOnly','writeOnly','contentMediaType','contentEncoding','additionalItems','then','else'];var TYPES=['number','integer','string','array','object','boolean','null'];RULES.all=toHash(ALL);RULES.types=toHash(TYPES);RULES.forEach(function(group){group.rules=group.rules.map(function(keyword){var implKeywords;if(typeof keyword=='object'){var key=Object.keys(keyword)[0];implKeywords=keyword[key];keyword=key;implKeywords.forEach(function(k){ALL.push(k);RULES.all[k]=true;});}
ALL.push(keyword);var rule=RULES.all[keyword]={keyword:keyword,code:ruleModules[keyword],implements:implKeywords};return rule;});RULES.all.$comment={keyword:'$comment',code:ruleModules.$comment};if(group.type)RULES.types[group.type]=group;});RULES.keywords=toHash(ALL.concat(KEYWORDS));RULES.custom={};return RULES;};}),(function(module,exports,__webpack_require__){"use strict";module.exports={'$ref':__webpack_require__(862),allOf:__webpack_require__(863),anyOf:__webpack_require__(864),'$comment':__webpack_require__(865),const:__webpack_require__(866),contains:__webpack_require__(867),dependencies:__webpack_require__(868),'enum':__webpack_require__(869),format:__webpack_require__(870),'if':__webpack_require__(871),items:__webpack_require__(872),maximum:__webpack_require__(390),minimum:__webpack_require__(390),maxItems:__webpack_require__(391),minItems:__webpack_require__(391),maxLength:__webpack_require__(392),minLength:__webpack_require__(392),maxProperties:__webpack_require__(393),minProperties:__webpack_require__(393),multipleOf:__webpack_require__(873),not:__webpack_require__(874),oneOf:__webpack_require__(875),pattern:__webpack_require__(876),properties:__webpack_require__(877),propertyNames:__webpack_require__(878),required:__webpack_require__(879),uniqueItems:__webpack_require__(880),validate:__webpack_require__(389)};}),(function(module,exports,__webpack_require__){"use strict";module.exports=function generate_ref(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $valid='valid'+$lvl;var $async,$refCode;if($schema=='#'||$schema=='#/'){if(it.isRoot){$async=it.async;$refCode='validate';}else{$async=it.root.schema.$async===true;$refCode='root.refVal[0]';}}else{var $refVal=it.resolveRef(it.baseId,$schema,it.isRoot);if($refVal===undefined){var $message=it.MissingRefError.message(it.baseId,$schema);if(it.opts.missingRefs=='fail'){it.logger.error($message);var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+('$ref')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: { ref: \''+(it.util.escapeQuotes($schema))+'\' } ';if(it.opts.messages!==false){out+=' , message: \'can\\\'t resolve reference '+(it.util.escapeQuotes($schema))+'\' ';}
if(it.opts.verbose){out+=' , schema: '+(it.util.toQuotedString($schema))+' , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+(__err)+']); ';}else{out+=' validate.errors = ['+(__err)+']; return false; ';}}else{out+=' var err = '+(__err)+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}
if($breakOnError){out+=' if (false) { ';}}else if(it.opts.missingRefs=='ignore'){it.logger.warn($message);if($breakOnError){out+=' if (true) { ';}}else{throw new it.MissingRefError(it.baseId,$schema,$message);}}else if($refVal.inline){var $it=it.util.copy(it);$it.level++;var $nextValid='valid'+$it.level;$it.schema=$refVal.schema;$it.schemaPath='';$it.errSchemaPath=$schema;var $code=it.validate($it).replace(/validate\.schema/g,$refVal.code);out+=' '+($code)+' ';if($breakOnError){out+=' if ('+($nextValid)+') { ';}}else{$async=$refVal.$async===true||(it.async&&$refVal.$async!==false);$refCode=$refVal.code;}}
if($refCode){var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.opts.passContext){out+=' '+($refCode)+'.call(this, ';}else{out+=' '+($refCode)+'( ';}
out+=' '+($data)+', (dataPath || \'\')';if(it.errorPath!='""'){out+=' + '+(it.errorPath);}
var $parentData=$dataLvl?'data'+(($dataLvl-1)||''):'parentData',$parentDataProperty=$dataLvl?it.dataPathArr[$dataLvl]:'parentDataProperty';out+=' , '+($parentData)+' , '+($parentDataProperty)+', rootData)  ';var __callValidate=out;out=$$outStack.pop();if($async){if(!it.async)throw new Error('async schema referenced by sync schema');if($breakOnError){out+=' var '+($valid)+'; ';}
out+=' try { await '+(__callValidate)+'; ';if($breakOnError){out+=' '+($valid)+' = true; ';}
out+=' } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ';if($breakOnError){out+=' '+($valid)+' = false; ';}
out+=' } ';if($breakOnError){out+=' if ('+($valid)+') { ';}}else{out+=' if (!'+(__callValidate)+') { if (vErrors === null) vErrors = '+($refCode)+'.errors; else vErrors = vErrors.concat('+($refCode)+'.errors); errors = vErrors.length; } ';if($breakOnError){out+=' else { ';}}}
return out;}}),(function(module,exports,__webpack_require__){"use strict";module.exports=function generate_allOf(it,$keyword,$ruleType){var out=' ';var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $it=it.util.copy(it);var $closingBraces='';$it.level++;var $nextValid='valid'+$it.level;var $currentBaseId=$it.baseId,$allSchemasEmpty=true;var arr1=$schema;if(arr1){var $sch,$i=-1,l1=arr1.length-1;while($i<l1){$sch=arr1[$i+=1];if(it.util.schemaHasRules($sch,it.RULES.all)){$allSchemasEmpty=false;$it.schema=$sch;$it.schemaPath=$schemaPath+'['+$i+']';$it.errSchemaPath=$errSchemaPath+'/'+$i;out+='  '+(it.validate($it))+' ';$it.baseId=$currentBaseId;if($breakOnError){out+=' if ('+($nextValid)+') { ';$closingBraces+='}';}}}}
if($breakOnError){if($allSchemasEmpty){out+=' if (true) { ';}else{out+=' '+($closingBraces.slice(0,-1))+' ';}}
out=it.util.cleanUpCode(out);return out;}}),(function(module,exports,__webpack_require__){"use strict";module.exports=function generate_anyOf(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $valid='valid'+$lvl;var $errs='errs__'+$lvl;var $it=it.util.copy(it);var $closingBraces='';$it.level++;var $nextValid='valid'+$it.level;var $noEmptySchema=$schema.every(function($sch){return it.util.schemaHasRules($sch,it.RULES.all);});if($noEmptySchema){var $currentBaseId=$it.baseId;out+=' var '+($errs)+' = errors; var '+($valid)+' = false;  ';var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;var arr1=$schema;if(arr1){var $sch,$i=-1,l1=arr1.length-1;while($i<l1){$sch=arr1[$i+=1];$it.schema=$sch;$it.schemaPath=$schemaPath+'['+$i+']';$it.errSchemaPath=$errSchemaPath+'/'+$i;out+='  '+(it.validate($it))+' ';$it.baseId=$currentBaseId;out+=' '+($valid)+' = '+($valid)+' || '+($nextValid)+'; if (!'+($valid)+') { ';$closingBraces+='}';}}
it.compositeRule=$it.compositeRule=$wasComposite;out+=' '+($closingBraces)+' if (!'+($valid)+') {   var err =   ';if(it.createErrors!==false){out+=' { keyword: \''+('anyOf')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: {} ';if(it.opts.messages!==false){out+=' , message: \'should match some schema in anyOf\' ';}
if(it.opts.verbose){out+=' , schema: validate.schema'+($schemaPath)+' , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
out+=';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(vErrors); ';}else{out+=' validate.errors = vErrors; return false; ';}}
out+=' } else {  errors = '+($errs)+'; if (vErrors !== null) { if ('+($errs)+') vErrors.length = '+($errs)+'; else vErrors = null; } ';if(it.opts.allErrors){out+=' } ';}
out=it.util.cleanUpCode(out);}else{if($breakOnError){out+=' if (true) { ';}}
return out;}}),(function(module,exports,__webpack_require__){"use strict";module.exports=function generate_comment(it,$keyword,$ruleType){var out=' ';var $schema=it.schema[$keyword];var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $comment=it.util.toQuotedString($schema);if(it.opts.$comment===true){out+=' console.log('+($comment)+');';}else if(typeof it.opts.$comment=='function'){out+=' self._opts.$comment('+($comment)+', '+(it.util.toQuotedString($errSchemaPath))+', validate.root.schema);';}
return out;}}),(function(module,exports,__webpack_require__){"use strict";module.exports=function generate_const(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $valid='valid'+$lvl;var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=' var schema'+($lvl)+' = '+(it.util.getData($schema.$data,$dataLvl,it.dataPathArr))+'; ';$schemaValue='schema'+$lvl;}else{$schemaValue=$schema;}
if(!$isData){out+=' var schema'+($lvl)+' = validate.schema'+($schemaPath)+';';}
out+='var '+($valid)+' = equal('+($data)+', schema'+($lvl)+'); if (!'+($valid)+') {   ';var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+('const')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: { allowedValue: schema'+($lvl)+' } ';if(it.opts.messages!==false){out+=' , message: \'should be equal to constant\' ';}
if(it.opts.verbose){out+=' , schema: validate.schema'+($schemaPath)+' , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+(__err)+']); ';}else{out+=' validate.errors = ['+(__err)+']; return false; ';}}else{out+=' var err = '+(__err)+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}
out+=' }';if($breakOnError){out+=' else { ';}
return out;}}),(function(module,exports,__webpack_require__){"use strict";module.exports=function generate_contains(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $valid='valid'+$lvl;var $errs='errs__'+$lvl;var $it=it.util.copy(it);var $closingBraces='';$it.level++;var $nextValid='valid'+$it.level;var $idx='i'+$lvl,$dataNxt=$it.dataLevel=it.dataLevel+1,$nextData='data'+$dataNxt,$currentBaseId=it.baseId,$nonEmptySchema=it.util.schemaHasRules($schema,it.RULES.all);out+='var '+($errs)+' = errors;var '+($valid)+';';if($nonEmptySchema){var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;$it.schema=$schema;$it.schemaPath=$schemaPath;$it.errSchemaPath=$errSchemaPath;out+=' var '+($nextValid)+' = false; for (var '+($idx)+' = 0; '+($idx)+' < '+($data)+'.length; '+($idx)+'++) { ';$it.errorPath=it.util.getPathExpr(it.errorPath,$idx,it.opts.jsonPointers,true);var $passData=$data+'['+$idx+']';$it.dataPathArr[$dataNxt]=$idx;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=' '+(it.util.varReplace($code,$nextData,$passData))+' ';}else{out+=' var '+($nextData)+' = '+($passData)+'; '+($code)+' ';}
out+=' if ('+($nextValid)+') break; }  ';it.compositeRule=$it.compositeRule=$wasComposite;out+=' '+($closingBraces)+' if (!'+($nextValid)+') {';}else{out+=' if ('+($data)+'.length == 0) {';}
var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+('contains')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: {} ';if(it.opts.messages!==false){out+=' , message: \'should contain a valid item\' ';}
if(it.opts.verbose){out+=' , schema: validate.schema'+($schemaPath)+' , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+(__err)+']); ';}else{out+=' validate.errors = ['+(__err)+']; return false; ';}}else{out+=' var err = '+(__err)+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}
out+=' } else { ';if($nonEmptySchema){out+='  errors = '+($errs)+'; if (vErrors !== null) { if ('+($errs)+') vErrors.length = '+($errs)+'; else vErrors = null; } ';}
if(it.opts.allErrors){out+=' } ';}
out=it.util.cleanUpCode(out);return out;}}),(function(module,exports,__webpack_require__){"use strict";module.exports=function generate_dependencies(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $errs='errs__'+$lvl;var $it=it.util.copy(it);var $closingBraces='';$it.level++;var $nextValid='valid'+$it.level;var $schemaDeps={},$propertyDeps={},$ownProperties=it.opts.ownProperties;for($property in $schema){var $sch=$schema[$property];var $deps=Array.isArray($sch)?$propertyDeps:$schemaDeps;$deps[$property]=$sch;}
out+='var '+($errs)+' = errors;';var $currentErrorPath=it.errorPath;out+='var missing'+($lvl)+';';for(var $property in $propertyDeps){$deps=$propertyDeps[$property];if($deps.length){out+=' if ( '+($data)+(it.util.getProperty($property))+' !== undefined ';if($ownProperties){out+=' && Object.prototype.hasOwnProperty.call('+($data)+', \''+(it.util.escapeQuotes($property))+'\') ';}
if($breakOnError){out+=' && ( ';var arr1=$deps;if(arr1){var $propertyKey,$i=-1,l1=arr1.length-1;while($i<l1){$propertyKey=arr1[$i+=1];if($i){out+=' || ';}
var $prop=it.util.getProperty($propertyKey),$useData=$data+$prop;out+=' ( ( '+($useData)+' === undefined ';if($ownProperties){out+=' || ! Object.prototype.hasOwnProperty.call('+($data)+', \''+(it.util.escapeQuotes($propertyKey))+'\') ';}
out+=') && (missing'+($lvl)+' = '+(it.util.toQuotedString(it.opts.jsonPointers?$propertyKey:$prop))+') ) ';}}
out+=')) {  ';var $propertyPath='missing'+$lvl,$missingProperty='\' + '+$propertyPath+' + \'';if(it.opts._errorDataPathProperty){it.errorPath=it.opts.jsonPointers?it.util.getPathExpr($currentErrorPath,$propertyPath,true):$currentErrorPath+' + '+$propertyPath;}
var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+('dependencies')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: { property: \''+(it.util.escapeQuotes($property))+'\', missingProperty: \''+($missingProperty)+'\', depsCount: '+($deps.length)+', deps: \''+(it.util.escapeQuotes($deps.length==1?$deps[0]:$deps.join(", ")))+'\' } ';if(it.opts.messages!==false){out+=' , message: \'should have ';if($deps.length==1){out+='property '+(it.util.escapeQuotes($deps[0]));}else{out+='properties '+(it.util.escapeQuotes($deps.join(", ")));}
out+=' when property '+(it.util.escapeQuotes($property))+' is present\' ';}
if(it.opts.verbose){out+=' , schema: validate.schema'+($schemaPath)+' , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+(__err)+']); ';}else{out+=' validate.errors = ['+(__err)+']; return false; ';}}else{out+=' var err = '+(__err)+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}}else{out+=' ) { ';var arr2=$deps;if(arr2){var $propertyKey,i2=-1,l2=arr2.length-1;while(i2<l2){$propertyKey=arr2[i2+=1];var $prop=it.util.getProperty($propertyKey),$missingProperty=it.util.escapeQuotes($propertyKey),$useData=$data+$prop;if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPath($currentErrorPath,$propertyKey,it.opts.jsonPointers);}
out+=' if ( '+($useData)+' === undefined ';if($ownProperties){out+=' || ! Object.prototype.hasOwnProperty.call('+($data)+', \''+(it.util.escapeQuotes($propertyKey))+'\') ';}
out+=') {  var err =   ';if(it.createErrors!==false){out+=' { keyword: \''+('dependencies')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: { property: \''+(it.util.escapeQuotes($property))+'\', missingProperty: \''+($missingProperty)+'\', depsCount: '+($deps.length)+', deps: \''+(it.util.escapeQuotes($deps.length==1?$deps[0]:$deps.join(", ")))+'\' } ';if(it.opts.messages!==false){out+=' , message: \'should have ';if($deps.length==1){out+='property '+(it.util.escapeQuotes($deps[0]));}else{out+='properties '+(it.util.escapeQuotes($deps.join(", ")));}
out+=' when property '+(it.util.escapeQuotes($property))+' is present\' ';}
if(it.opts.verbose){out+=' , schema: validate.schema'+($schemaPath)+' , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
out+=';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } ';}}}
out+=' }   ';if($breakOnError){$closingBraces+='}';out+=' else { ';}}}
it.errorPath=$currentErrorPath;var $currentBaseId=$it.baseId;for(var $property in $schemaDeps){var $sch=$schemaDeps[$property];if(it.util.schemaHasRules($sch,it.RULES.all)){out+=' '+($nextValid)+' = true; if ( '+($data)+(it.util.getProperty($property))+' !== undefined ';if($ownProperties){out+=' && Object.prototype.hasOwnProperty.call('+($data)+', \''+(it.util.escapeQuotes($property))+'\') ';}
out+=') { ';$it.schema=$sch;$it.schemaPath=$schemaPath+it.util.getProperty($property);$it.errSchemaPath=$errSchemaPath+'/'+it.util.escapeFragment($property);out+='  '+(it.validate($it))+' ';$it.baseId=$currentBaseId;out+=' }  ';if($breakOnError){out+=' if ('+($nextValid)+') { ';$closingBraces+='}';}}}
if($breakOnError){out+='   '+($closingBraces)+' if ('+($errs)+' == errors) {';}
out=it.util.cleanUpCode(out);return out;}}),(function(module,exports,__webpack_require__){"use strict";module.exports=function generate_enum(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $valid='valid'+$lvl;var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=' var schema'+($lvl)+' = '+(it.util.getData($schema.$data,$dataLvl,it.dataPathArr))+'; ';$schemaValue='schema'+$lvl;}else{$schemaValue=$schema;}
var $i='i'+$lvl,$vSchema='schema'+$lvl;if(!$isData){out+=' var '+($vSchema)+' = validate.schema'+($schemaPath)+';';}
out+='var '+($valid)+';';if($isData){out+=' if (schema'+($lvl)+' === undefined) '+($valid)+' = true; else if (!Array.isArray(schema'+($lvl)+')) '+($valid)+' = false; else {';}
out+=''+($valid)+' = false;for (var '+($i)+'=0; '+($i)+'<'+($vSchema)+'.length; '+($i)+'++) if (equal('+($data)+', '+($vSchema)+'['+($i)+'])) { '+($valid)+' = true; break; }';if($isData){out+='  }  ';}
out+=' if (!'+($valid)+') {   ';var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+('enum')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: { allowedValues: schema'+($lvl)+' } ';if(it.opts.messages!==false){out+=' , message: \'should be equal to one of the allowed values\' ';}
if(it.opts.verbose){out+=' , schema: validate.schema'+($schemaPath)+' , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+(__err)+']); ';}else{out+=' validate.errors = ['+(__err)+']; return false; ';}}else{out+=' var err = '+(__err)+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}
out+=' }';if($breakOnError){out+=' else { ';}
return out;}}),(function(module,exports,__webpack_require__){"use strict";module.exports=function generate_format(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');if(it.opts.format===false){if($breakOnError){out+=' if (true) { ';}
return out;}
var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=' var schema'+($lvl)+' = '+(it.util.getData($schema.$data,$dataLvl,it.dataPathArr))+'; ';$schemaValue='schema'+$lvl;}else{$schemaValue=$schema;}
var $unknownFormats=it.opts.unknownFormats,$allowUnknown=Array.isArray($unknownFormats);if($isData){var $format='format'+$lvl,$isObject='isObject'+$lvl,$formatType='formatType'+$lvl;out+=' var '+($format)+' = formats['+($schemaValue)+']; var '+($isObject)+' = typeof '+($format)+' == \'object\' && !('+($format)+' instanceof RegExp) && '+($format)+'.validate; var '+($formatType)+' = '+($isObject)+' && '+($format)+'.type || \'string\'; if ('+($isObject)+') { ';if(it.async){out+=' var async'+($lvl)+' = '+($format)+'.async; ';}
out+=' '+($format)+' = '+($format)+'.validate; } if (  ';if($isData){out+=' ('+($schemaValue)+' !== undefined && typeof '+($schemaValue)+' != \'string\') || ';}
out+=' (';if($unknownFormats!='ignore'){out+=' ('+($schemaValue)+' && !'+($format)+' ';if($allowUnknown){out+=' && self._opts.unknownFormats.indexOf('+($schemaValue)+') == -1 ';}
out+=') || ';}
out+=' ('+($format)+' && '+($formatType)+' == \''+($ruleType)+'\' && !(typeof '+($format)+' == \'function\' ? ';if(it.async){out+=' (async'+($lvl)+' ? await '+($format)+'('+($data)+') : '+($format)+'('+($data)+')) ';}else{out+=' '+($format)+'('+($data)+') ';}
out+=' : '+($format)+'.test('+($data)+'))))) {';}else{var $format=it.formats[$schema];if(!$format){if($unknownFormats=='ignore'){it.logger.warn('unknown format "'+$schema+'" ignored in schema at path "'+it.errSchemaPath+'"');if($breakOnError){out+=' if (true) { ';}
return out;}else if($allowUnknown&&$unknownFormats.indexOf($schema)>=0){if($breakOnError){out+=' if (true) { ';}
return out;}else{throw new Error('unknown format "'+$schema+'" is used in schema at path "'+it.errSchemaPath+'"');}}
var $isObject=typeof $format=='object'&&!($format instanceof RegExp)&&$format.validate;var $formatType=$isObject&&$format.type||'string';if($isObject){var $async=$format.async===true;$format=$format.validate;}
if($formatType!=$ruleType){if($breakOnError){out+=' if (true) { ';}
return out;}
if($async){if(!it.async)throw new Error('async format in sync schema');var $formatRef='formats'+it.util.getProperty($schema)+'.validate';out+=' if (!(await '+($formatRef)+'('+($data)+'))) { ';}else{out+=' if (! ';var $formatRef='formats'+it.util.getProperty($schema);if($isObject)$formatRef+='.validate';if(typeof $format=='function'){out+=' '+($formatRef)+'('+($data)+') ';}else{out+=' '+($formatRef)+'.test('+($data)+') ';}
out+=') { ';}}
var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+('format')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: { format:  ';if($isData){out+=''+($schemaValue);}else{out+=''+(it.util.toQuotedString($schema));}
out+='  } ';if(it.opts.messages!==false){out+=' , message: \'should match format "';if($isData){out+='\' + '+($schemaValue)+' + \'';}else{out+=''+(it.util.escapeQuotes($schema));}
out+='"\' ';}
if(it.opts.verbose){out+=' , schema:  ';if($isData){out+='validate.schema'+($schemaPath);}else{out+=''+(it.util.toQuotedString($schema));}
out+='         , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+(__err)+']); ';}else{out+=' validate.errors = ['+(__err)+']; return false; ';}}else{out+=' var err = '+(__err)+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}
out+=' } ';if($breakOnError){out+=' else { ';}
return out;}}),(function(module,exports,__webpack_require__){"use strict";module.exports=function generate_if(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $valid='valid'+$lvl;var $errs='errs__'+$lvl;var $it=it.util.copy(it);$it.level++;var $nextValid='valid'+$it.level;var $thenSch=it.schema['then'],$elseSch=it.schema['else'],$thenPresent=$thenSch!==undefined&&it.util.schemaHasRules($thenSch,it.RULES.all),$elsePresent=$elseSch!==undefined&&it.util.schemaHasRules($elseSch,it.RULES.all),$currentBaseId=$it.baseId;if($thenPresent||$elsePresent){var $ifClause;$it.createErrors=false;$it.schema=$schema;$it.schemaPath=$schemaPath;$it.errSchemaPath=$errSchemaPath;out+=' var '+($errs)+' = errors; var '+($valid)+' = true;  ';var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;out+='  '+(it.validate($it))+' ';$it.baseId=$currentBaseId;$it.createErrors=true;out+='  errors = '+($errs)+'; if (vErrors !== null) { if ('+($errs)+') vErrors.length = '+($errs)+'; else vErrors = null; }  ';it.compositeRule=$it.compositeRule=$wasComposite;if($thenPresent){out+=' if ('+($nextValid)+') {  ';$it.schema=it.schema['then'];$it.schemaPath=it.schemaPath+'.then';$it.errSchemaPath=it.errSchemaPath+'/then';out+='  '+(it.validate($it))+' ';$it.baseId=$currentBaseId;out+=' '+($valid)+' = '+($nextValid)+'; ';if($thenPresent&&$elsePresent){$ifClause='ifClause'+$lvl;out+=' var '+($ifClause)+' = \'then\'; ';}else{$ifClause='\'then\'';}
out+=' } ';if($elsePresent){out+=' else { ';}}else{out+=' if (!'+($nextValid)+') { ';}
if($elsePresent){$it.schema=it.schema['else'];$it.schemaPath=it.schemaPath+'.else';$it.errSchemaPath=it.errSchemaPath+'/else';out+='  '+(it.validate($it))+' ';$it.baseId=$currentBaseId;out+=' '+($valid)+' = '+($nextValid)+'; ';if($thenPresent&&$elsePresent){$ifClause='ifClause'+$lvl;out+=' var '+($ifClause)+' = \'else\'; ';}else{$ifClause='\'else\'';}
out+=' } ';}
out+=' if (!'+($valid)+') {   var err =   ';if(it.createErrors!==false){out+=' { keyword: \''+('if')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: { failingKeyword: '+($ifClause)+' } ';if(it.opts.messages!==false){out+=' , message: \'should match "\' + '+($ifClause)+' + \'" schema\' ';}
if(it.opts.verbose){out+=' , schema: validate.schema'+($schemaPath)+' , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
out+=';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(vErrors); ';}else{out+=' validate.errors = vErrors; return false; ';}}
out+=' }   ';if($breakOnError){out+=' else { ';}
out=it.util.cleanUpCode(out);}else{if($breakOnError){out+=' if (true) { ';}}
return out;}}),(function(module,exports,__webpack_require__){"use strict";module.exports=function generate_items(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $valid='valid'+$lvl;var $errs='errs__'+$lvl;var $it=it.util.copy(it);var $closingBraces='';$it.level++;var $nextValid='valid'+$it.level;var $idx='i'+$lvl,$dataNxt=$it.dataLevel=it.dataLevel+1,$nextData='data'+$dataNxt,$currentBaseId=it.baseId;out+='var '+($errs)+' = errors;var '+($valid)+';';if(Array.isArray($schema)){var $additionalItems=it.schema.additionalItems;if($additionalItems===false){out+=' '+($valid)+' = '+($data)+'.length <= '+($schema.length)+'; ';var $currErrSchemaPath=$errSchemaPath;$errSchemaPath=it.errSchemaPath+'/additionalItems';out+='  if (!'+($valid)+') {   ';var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+('additionalItems')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: { limit: '+($schema.length)+' } ';if(it.opts.messages!==false){out+=' , message: \'should NOT have more than '+($schema.length)+' items\' ';}
if(it.opts.verbose){out+=' , schema: false , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+(__err)+']); ';}else{out+=' validate.errors = ['+(__err)+']; return false; ';}}else{out+=' var err = '+(__err)+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}
out+=' } ';$errSchemaPath=$currErrSchemaPath;if($breakOnError){$closingBraces+='}';out+=' else { ';}}
var arr1=$schema;if(arr1){var $sch,$i=-1,l1=arr1.length-1;while($i<l1){$sch=arr1[$i+=1];if(it.util.schemaHasRules($sch,it.RULES.all)){out+=' '+($nextValid)+' = true; if ('+($data)+'.length > '+($i)+') { ';var $passData=$data+'['+$i+']';$it.schema=$sch;$it.schemaPath=$schemaPath+'['+$i+']';$it.errSchemaPath=$errSchemaPath+'/'+$i;$it.errorPath=it.util.getPathExpr(it.errorPath,$i,it.opts.jsonPointers,true);$it.dataPathArr[$dataNxt]=$i;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=' '+(it.util.varReplace($code,$nextData,$passData))+' ';}else{out+=' var '+($nextData)+' = '+($passData)+'; '+($code)+' ';}
out+=' }  ';if($breakOnError){out+=' if ('+($nextValid)+') { ';$closingBraces+='}';}}}}
if(typeof $additionalItems=='object'&&it.util.schemaHasRules($additionalItems,it.RULES.all)){$it.schema=$additionalItems;$it.schemaPath=it.schemaPath+'.additionalItems';$it.errSchemaPath=it.errSchemaPath+'/additionalItems';out+=' '+($nextValid)+' = true; if ('+($data)+'.length > '+($schema.length)+') {  for (var '+($idx)+' = '+($schema.length)+'; '+($idx)+' < '+($data)+'.length; '+($idx)+'++) { ';$it.errorPath=it.util.getPathExpr(it.errorPath,$idx,it.opts.jsonPointers,true);var $passData=$data+'['+$idx+']';$it.dataPathArr[$dataNxt]=$idx;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=' '+(it.util.varReplace($code,$nextData,$passData))+' ';}else{out+=' var '+($nextData)+' = '+($passData)+'; '+($code)+' ';}
if($breakOnError){out+=' if (!'+($nextValid)+') break; ';}
out+=' } }  ';if($breakOnError){out+=' if ('+($nextValid)+') { ';$closingBraces+='}';}}}else if(it.util.schemaHasRules($schema,it.RULES.all)){$it.schema=$schema;$it.schemaPath=$schemaPath;$it.errSchemaPath=$errSchemaPath;out+='  for (var '+($idx)+' = '+(0)+'; '+($idx)+' < '+($data)+'.length; '+($idx)+'++) { ';$it.errorPath=it.util.getPathExpr(it.errorPath,$idx,it.opts.jsonPointers,true);var $passData=$data+'['+$idx+']';$it.dataPathArr[$dataNxt]=$idx;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=' '+(it.util.varReplace($code,$nextData,$passData))+' ';}else{out+=' var '+($nextData)+' = '+($passData)+'; '+($code)+' ';}
if($breakOnError){out+=' if (!'+($nextValid)+') break; ';}
out+=' }';}
if($breakOnError){out+=' '+($closingBraces)+' if ('+($errs)+' == errors) {';}
out=it.util.cleanUpCode(out);return out;}}),(function(module,exports,__webpack_require__){"use strict";module.exports=function generate_multipleOf(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=' var schema'+($lvl)+' = '+(it.util.getData($schema.$data,$dataLvl,it.dataPathArr))+'; ';$schemaValue='schema'+$lvl;}else{$schemaValue=$schema;}
out+='var division'+($lvl)+';if (';if($isData){out+=' '+($schemaValue)+' !== undefined && ( typeof '+($schemaValue)+' != \'number\' || ';}
out+=' (division'+($lvl)+' = '+($data)+' / '+($schemaValue)+', ';if(it.opts.multipleOfPrecision){out+=' Math.abs(Math.round(division'+($lvl)+') - division'+($lvl)+') > 1e-'+(it.opts.multipleOfPrecision)+' ';}else{out+=' division'+($lvl)+' !== parseInt(division'+($lvl)+') ';}
out+=' ) ';if($isData){out+='  )  ';}
out+=' ) {   ';var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+('multipleOf')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: { multipleOf: '+($schemaValue)+' } ';if(it.opts.messages!==false){out+=' , message: \'should be multiple of ';if($isData){out+='\' + '+($schemaValue);}else{out+=''+($schemaValue)+'\'';}}
if(it.opts.verbose){out+=' , schema:  ';if($isData){out+='validate.schema'+($schemaPath);}else{out+=''+($schema);}
out+='         , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+(__err)+']); ';}else{out+=' validate.errors = ['+(__err)+']; return false; ';}}else{out+=' var err = '+(__err)+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}
out+='} ';if($breakOnError){out+=' else { ';}
return out;}}),(function(module,exports,__webpack_require__){"use strict";module.exports=function generate_not(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $errs='errs__'+$lvl;var $it=it.util.copy(it);$it.level++;var $nextValid='valid'+$it.level;if(it.util.schemaHasRules($schema,it.RULES.all)){$it.schema=$schema;$it.schemaPath=$schemaPath;$it.errSchemaPath=$errSchemaPath;out+=' var '+($errs)+' = errors;  ';var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;$it.createErrors=false;var $allErrorsOption;if($it.opts.allErrors){$allErrorsOption=$it.opts.allErrors;$it.opts.allErrors=false;}
out+=' '+(it.validate($it))+' ';$it.createErrors=true;if($allErrorsOption)$it.opts.allErrors=$allErrorsOption;it.compositeRule=$it.compositeRule=$wasComposite;out+=' if ('+($nextValid)+') {   ';var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+('not')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: {} ';if(it.opts.messages!==false){out+=' , message: \'should NOT be valid\' ';}
if(it.opts.verbose){out+=' , schema: validate.schema'+($schemaPath)+' , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+(__err)+']); ';}else{out+=' validate.errors = ['+(__err)+']; return false; ';}}else{out+=' var err = '+(__err)+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}
out+=' } else {  errors = '+($errs)+'; if (vErrors !== null) { if ('+($errs)+') vErrors.length = '+($errs)+'; else vErrors = null; } ';if(it.opts.allErrors){out+=' } ';}}else{out+='  var err =   ';if(it.createErrors!==false){out+=' { keyword: \''+('not')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: {} ';if(it.opts.messages!==false){out+=' , message: \'should NOT be valid\' ';}
if(it.opts.verbose){out+=' , schema: validate.schema'+($schemaPath)+' , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
out+=';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';if($breakOnError){out+=' if (false) { ';}}
return out;}}),(function(module,exports,__webpack_require__){"use strict";module.exports=function generate_oneOf(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $valid='valid'+$lvl;var $errs='errs__'+$lvl;var $it=it.util.copy(it);var $closingBraces='';$it.level++;var $nextValid='valid'+$it.level;var $currentBaseId=$it.baseId,$prevValid='prevValid'+$lvl,$passingSchemas='passingSchemas'+$lvl;out+='var '+($errs)+' = errors , '+($prevValid)+' = false , '+($valid)+' = false , '+($passingSchemas)+' = null; ';var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;var arr1=$schema;if(arr1){var $sch,$i=-1,l1=arr1.length-1;while($i<l1){$sch=arr1[$i+=1];if(it.util.schemaHasRules($sch,it.RULES.all)){$it.schema=$sch;$it.schemaPath=$schemaPath+'['+$i+']';$it.errSchemaPath=$errSchemaPath+'/'+$i;out+='  '+(it.validate($it))+' ';$it.baseId=$currentBaseId;}else{out+=' var '+($nextValid)+' = true; ';}
if($i){out+=' if ('+($nextValid)+' && '+($prevValid)+') { '+($valid)+' = false; '+($passingSchemas)+' = ['+($passingSchemas)+', '+($i)+']; } else { ';$closingBraces+='}';}
out+=' if ('+($nextValid)+') { '+($valid)+' = '+($prevValid)+' = true; '+($passingSchemas)+' = '+($i)+'; }';}}
it.compositeRule=$it.compositeRule=$wasComposite;out+=''+($closingBraces)+'if (!'+($valid)+') {   var err =   ';if(it.createErrors!==false){out+=' { keyword: \''+('oneOf')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: { passingSchemas: '+($passingSchemas)+' } ';if(it.opts.messages!==false){out+=' , message: \'should match exactly one schema in oneOf\' ';}
if(it.opts.verbose){out+=' , schema: validate.schema'+($schemaPath)+' , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
out+=';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(vErrors); ';}else{out+=' validate.errors = vErrors; return false; ';}}
out+='} else {  errors = '+($errs)+'; if (vErrors !== null) { if ('+($errs)+') vErrors.length = '+($errs)+'; else vErrors = null; }';if(it.opts.allErrors){out+=' } ';}
return out;}}),(function(module,exports,__webpack_require__){"use strict";module.exports=function generate_pattern(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=' var schema'+($lvl)+' = '+(it.util.getData($schema.$data,$dataLvl,it.dataPathArr))+'; ';$schemaValue='schema'+$lvl;}else{$schemaValue=$schema;}
var $regexp=$isData?'(new RegExp('+$schemaValue+'))':it.usePattern($schema);out+='if ( ';if($isData){out+=' ('+($schemaValue)+' !== undefined && typeof '+($schemaValue)+' != \'string\') || ';}
out+=' !'+($regexp)+'.test('+($data)+') ) {   ';var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+('pattern')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: { pattern:  ';if($isData){out+=''+($schemaValue);}else{out+=''+(it.util.toQuotedString($schema));}
out+='  } ';if(it.opts.messages!==false){out+=' , message: \'should match pattern "';if($isData){out+='\' + '+($schemaValue)+' + \'';}else{out+=''+(it.util.escapeQuotes($schema));}
out+='"\' ';}
if(it.opts.verbose){out+=' , schema:  ';if($isData){out+='validate.schema'+($schemaPath);}else{out+=''+(it.util.toQuotedString($schema));}
out+='         , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+(__err)+']); ';}else{out+=' validate.errors = ['+(__err)+']; return false; ';}}else{out+=' var err = '+(__err)+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}
out+='} ';if($breakOnError){out+=' else { ';}
return out;}}),(function(module,exports,__webpack_require__){"use strict";module.exports=function generate_properties(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $errs='errs__'+$lvl;var $it=it.util.copy(it);var $closingBraces='';$it.level++;var $nextValid='valid'+$it.level;var $key='key'+$lvl,$idx='idx'+$lvl,$dataNxt=$it.dataLevel=it.dataLevel+1,$nextData='data'+$dataNxt,$dataProperties='dataProperties'+$lvl;var $schemaKeys=Object.keys($schema||{}),$pProperties=it.schema.patternProperties||{},$pPropertyKeys=Object.keys($pProperties),$aProperties=it.schema.additionalProperties,$someProperties=$schemaKeys.length||$pPropertyKeys.length,$noAdditional=$aProperties===false,$additionalIsSchema=typeof $aProperties=='object'&&Object.keys($aProperties).length,$removeAdditional=it.opts.removeAdditional,$checkAdditional=$noAdditional||$additionalIsSchema||$removeAdditional,$ownProperties=it.opts.ownProperties,$currentBaseId=it.baseId;var $required=it.schema.required;if($required&&!(it.opts.$data&&$required.$data)&&$required.length<it.opts.loopRequired)var $requiredHash=it.util.toHash($required);out+='var '+($errs)+' = errors;var '+($nextValid)+' = true;';if($ownProperties){out+=' var '+($dataProperties)+' = undefined;';}
if($checkAdditional){if($ownProperties){out+=' '+($dataProperties)+' = '+($dataProperties)+' || Object.keys('+($data)+'); for (var '+($idx)+'=0; '+($idx)+'<'+($dataProperties)+'.length; '+($idx)+'++) { var '+($key)+' = '+($dataProperties)+'['+($idx)+']; ';}else{out+=' for (var '+($key)+' in '+($data)+') { ';}
if($someProperties){out+=' var isAdditional'+($lvl)+' = !(false ';if($schemaKeys.length){if($schemaKeys.length>8){out+=' || validate.schema'+($schemaPath)+'.hasOwnProperty('+($key)+') ';}else{var arr1=$schemaKeys;if(arr1){var $propertyKey,i1=-1,l1=arr1.length-1;while(i1<l1){$propertyKey=arr1[i1+=1];out+=' || '+($key)+' == '+(it.util.toQuotedString($propertyKey))+' ';}}}}
if($pPropertyKeys.length){var arr2=$pPropertyKeys;if(arr2){var $pProperty,$i=-1,l2=arr2.length-1;while($i<l2){$pProperty=arr2[$i+=1];out+=' || '+(it.usePattern($pProperty))+'.test('+($key)+') ';}}}
out+=' ); if (isAdditional'+($lvl)+') { ';}
if($removeAdditional=='all'){out+=' delete '+($data)+'['+($key)+']; ';}else{var $currentErrorPath=it.errorPath;var $additionalProperty='\' + '+$key+' + \'';if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPathExpr(it.errorPath,$key,it.opts.jsonPointers);}
if($noAdditional){if($removeAdditional){out+=' delete '+($data)+'['+($key)+']; ';}else{out+=' '+($nextValid)+' = false; ';var $currErrSchemaPath=$errSchemaPath;$errSchemaPath=it.errSchemaPath+'/additionalProperties';var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+('additionalProperties')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: { additionalProperty: \''+($additionalProperty)+'\' } ';if(it.opts.messages!==false){out+=' , message: \'';if(it.opts._errorDataPathProperty){out+='is an invalid additional property';}else{out+='should NOT have additional properties';}
out+='\' ';}
if(it.opts.verbose){out+=' , schema: false , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+(__err)+']); ';}else{out+=' validate.errors = ['+(__err)+']; return false; ';}}else{out+=' var err = '+(__err)+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}
$errSchemaPath=$currErrSchemaPath;if($breakOnError){out+=' break; ';}}}else if($additionalIsSchema){if($removeAdditional=='failing'){out+=' var '+($errs)+' = errors;  ';var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;$it.schema=$aProperties;$it.schemaPath=it.schemaPath+'.additionalProperties';$it.errSchemaPath=it.errSchemaPath+'/additionalProperties';$it.errorPath=it.opts._errorDataPathProperty?it.errorPath:it.util.getPathExpr(it.errorPath,$key,it.opts.jsonPointers);var $passData=$data+'['+$key+']';$it.dataPathArr[$dataNxt]=$key;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=' '+(it.util.varReplace($code,$nextData,$passData))+' ';}else{out+=' var '+($nextData)+' = '+($passData)+'; '+($code)+' ';}
out+=' if (!'+($nextValid)+') { errors = '+($errs)+'; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete '+($data)+'['+($key)+']; }  ';it.compositeRule=$it.compositeRule=$wasComposite;}else{$it.schema=$aProperties;$it.schemaPath=it.schemaPath+'.additionalProperties';$it.errSchemaPath=it.errSchemaPath+'/additionalProperties';$it.errorPath=it.opts._errorDataPathProperty?it.errorPath:it.util.getPathExpr(it.errorPath,$key,it.opts.jsonPointers);var $passData=$data+'['+$key+']';$it.dataPathArr[$dataNxt]=$key;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=' '+(it.util.varReplace($code,$nextData,$passData))+' ';}else{out+=' var '+($nextData)+' = '+($passData)+'; '+($code)+' ';}
if($breakOnError){out+=' if (!'+($nextValid)+') break; ';}}}
it.errorPath=$currentErrorPath;}
if($someProperties){out+=' } ';}
out+=' }  ';if($breakOnError){out+=' if ('+($nextValid)+') { ';$closingBraces+='}';}}
var $useDefaults=it.opts.useDefaults&&!it.compositeRule;if($schemaKeys.length){var arr3=$schemaKeys;if(arr3){var $propertyKey,i3=-1,l3=arr3.length-1;while(i3<l3){$propertyKey=arr3[i3+=1];var $sch=$schema[$propertyKey];if(it.util.schemaHasRules($sch,it.RULES.all)){var $prop=it.util.getProperty($propertyKey),$passData=$data+$prop,$hasDefault=$useDefaults&&$sch.default!==undefined;$it.schema=$sch;$it.schemaPath=$schemaPath+$prop;$it.errSchemaPath=$errSchemaPath+'/'+it.util.escapeFragment($propertyKey);$it.errorPath=it.util.getPath(it.errorPath,$propertyKey,it.opts.jsonPointers);$it.dataPathArr[$dataNxt]=it.util.toQuotedString($propertyKey);var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){$code=it.util.varReplace($code,$nextData,$passData);var $useData=$passData;}else{var $useData=$nextData;out+=' var '+($nextData)+' = '+($passData)+'; ';}
if($hasDefault){out+=' '+($code)+' ';}else{if($requiredHash&&$requiredHash[$propertyKey]){out+=' if ( '+($useData)+' === undefined ';if($ownProperties){out+=' || ! Object.prototype.hasOwnProperty.call('+($data)+', \''+(it.util.escapeQuotes($propertyKey))+'\') ';}
out+=') { '+($nextValid)+' = false; ';var $currentErrorPath=it.errorPath,$currErrSchemaPath=$errSchemaPath,$missingProperty=it.util.escapeQuotes($propertyKey);if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPath($currentErrorPath,$propertyKey,it.opts.jsonPointers);}
$errSchemaPath=it.errSchemaPath+'/required';var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+('required')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: { missingProperty: \''+($missingProperty)+'\' } ';if(it.opts.messages!==false){out+=' , message: \'';if(it.opts._errorDataPathProperty){out+='is a required property';}else{out+='should have required property \\\''+($missingProperty)+'\\\'';}
out+='\' ';}
if(it.opts.verbose){out+=' , schema: validate.schema'+($schemaPath)+' , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+(__err)+']); ';}else{out+=' validate.errors = ['+(__err)+']; return false; ';}}else{out+=' var err = '+(__err)+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}
$errSchemaPath=$currErrSchemaPath;it.errorPath=$currentErrorPath;out+=' } else { ';}else{if($breakOnError){out+=' if ( '+($useData)+' === undefined ';if($ownProperties){out+=' || ! Object.prototype.hasOwnProperty.call('+($data)+', \''+(it.util.escapeQuotes($propertyKey))+'\') ';}
out+=') { '+($nextValid)+' = true; } else { ';}else{out+=' if ('+($useData)+' !== undefined ';if($ownProperties){out+=' &&   Object.prototype.hasOwnProperty.call('+($data)+', \''+(it.util.escapeQuotes($propertyKey))+'\') ';}
out+=' ) { ';}}
out+=' '+($code)+' } ';}}
if($breakOnError){out+=' if ('+($nextValid)+') { ';$closingBraces+='}';}}}}
if($pPropertyKeys.length){var arr4=$pPropertyKeys;if(arr4){var $pProperty,i4=-1,l4=arr4.length-1;while(i4<l4){$pProperty=arr4[i4+=1];var $sch=$pProperties[$pProperty];if(it.util.schemaHasRules($sch,it.RULES.all)){$it.schema=$sch;$it.schemaPath=it.schemaPath+'.patternProperties'+it.util.getProperty($pProperty);$it.errSchemaPath=it.errSchemaPath+'/patternProperties/'+it.util.escapeFragment($pProperty);if($ownProperties){out+=' '+($dataProperties)+' = '+($dataProperties)+' || Object.keys('+($data)+'); for (var '+($idx)+'=0; '+($idx)+'<'+($dataProperties)+'.length; '+($idx)+'++) { var '+($key)+' = '+($dataProperties)+'['+($idx)+']; ';}else{out+=' for (var '+($key)+' in '+($data)+') { ';}
out+=' if ('+(it.usePattern($pProperty))+'.test('+($key)+')) { ';$it.errorPath=it.util.getPathExpr(it.errorPath,$key,it.opts.jsonPointers);var $passData=$data+'['+$key+']';$it.dataPathArr[$dataNxt]=$key;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=' '+(it.util.varReplace($code,$nextData,$passData))+' ';}else{out+=' var '+($nextData)+' = '+($passData)+'; '+($code)+' ';}
if($breakOnError){out+=' if (!'+($nextValid)+') break; ';}
out+=' } ';if($breakOnError){out+=' else '+($nextValid)+' = true; ';}
out+=' }  ';if($breakOnError){out+=' if ('+($nextValid)+') { ';$closingBraces+='}';}}}}}
if($breakOnError){out+=' '+($closingBraces)+' if ('+($errs)+' == errors) {';}
out=it.util.cleanUpCode(out);return out;}}),(function(module,exports,__webpack_require__){"use strict";module.exports=function generate_propertyNames(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $errs='errs__'+$lvl;var $it=it.util.copy(it);var $closingBraces='';$it.level++;var $nextValid='valid'+$it.level;out+='var '+($errs)+' = errors;';if(it.util.schemaHasRules($schema,it.RULES.all)){$it.schema=$schema;$it.schemaPath=$schemaPath;$it.errSchemaPath=$errSchemaPath;var $key='key'+$lvl,$idx='idx'+$lvl,$i='i'+$lvl,$invalidName='\' + '+$key+' + \'',$dataNxt=$it.dataLevel=it.dataLevel+1,$nextData='data'+$dataNxt,$dataProperties='dataProperties'+$lvl,$ownProperties=it.opts.ownProperties,$currentBaseId=it.baseId;if($ownProperties){out+=' var '+($dataProperties)+' = undefined; ';}
if($ownProperties){out+=' '+($dataProperties)+' = '+($dataProperties)+' || Object.keys('+($data)+'); for (var '+($idx)+'=0; '+($idx)+'<'+($dataProperties)+'.length; '+($idx)+'++) { var '+($key)+' = '+($dataProperties)+'['+($idx)+']; ';}else{out+=' for (var '+($key)+' in '+($data)+') { ';}
out+=' var startErrs'+($lvl)+' = errors; ';var $passData=$key;var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=' '+(it.util.varReplace($code,$nextData,$passData))+' ';}else{out+=' var '+($nextData)+' = '+($passData)+'; '+($code)+' ';}
it.compositeRule=$it.compositeRule=$wasComposite;out+=' if (!'+($nextValid)+') { for (var '+($i)+'=startErrs'+($lvl)+'; '+($i)+'<errors; '+($i)+'++) { vErrors['+($i)+'].propertyName = '+($key)+'; }   var err =   ';if(it.createErrors!==false){out+=' { keyword: \''+('propertyNames')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: { propertyName: \''+($invalidName)+'\' } ';if(it.opts.messages!==false){out+=' , message: \'property name \\\''+($invalidName)+'\\\' is invalid\' ';}
if(it.opts.verbose){out+=' , schema: validate.schema'+($schemaPath)+' , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
out+=';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(vErrors); ';}else{out+=' validate.errors = vErrors; return false; ';}}
if($breakOnError){out+=' break; ';}
out+=' } }';}
if($breakOnError){out+=' '+($closingBraces)+' if ('+($errs)+' == errors) {';}
out=it.util.cleanUpCode(out);return out;}}),(function(module,exports,__webpack_require__){"use strict";module.exports=function generate_required(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $valid='valid'+$lvl;var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=' var schema'+($lvl)+' = '+(it.util.getData($schema.$data,$dataLvl,it.dataPathArr))+'; ';$schemaValue='schema'+$lvl;}else{$schemaValue=$schema;}
var $vSchema='schema'+$lvl;if(!$isData){if($schema.length<it.opts.loopRequired&&it.schema.properties&&Object.keys(it.schema.properties).length){var $required=[];var arr1=$schema;if(arr1){var $property,i1=-1,l1=arr1.length-1;while(i1<l1){$property=arr1[i1+=1];var $propertySch=it.schema.properties[$property];if(!($propertySch&&it.util.schemaHasRules($propertySch,it.RULES.all))){$required[$required.length]=$property;}}}}else{var $required=$schema;}}
if($isData||$required.length){var $currentErrorPath=it.errorPath,$loopRequired=$isData||$required.length>=it.opts.loopRequired,$ownProperties=it.opts.ownProperties;if($breakOnError){out+=' var missing'+($lvl)+'; ';if($loopRequired){if(!$isData){out+=' var '+($vSchema)+' = validate.schema'+($schemaPath)+'; ';}
var $i='i'+$lvl,$propertyPath='schema'+$lvl+'['+$i+']',$missingProperty='\' + '+$propertyPath+' + \'';if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPathExpr($currentErrorPath,$propertyPath,it.opts.jsonPointers);}
out+=' var '+($valid)+' = true; ';if($isData){out+=' if (schema'+($lvl)+' === undefined) '+($valid)+' = true; else if (!Array.isArray(schema'+($lvl)+')) '+($valid)+' = false; else {';}
out+=' for (var '+($i)+' = 0; '+($i)+' < '+($vSchema)+'.length; '+($i)+'++) { '+($valid)+' = '+($data)+'['+($vSchema)+'['+($i)+']] !== undefined ';if($ownProperties){out+=' &&   Object.prototype.hasOwnProperty.call('+($data)+', '+($vSchema)+'['+($i)+']) ';}
out+='; if (!'+($valid)+') break; } ';if($isData){out+='  }  ';}
out+='  if (!'+($valid)+') {   ';var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+('required')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: { missingProperty: \''+($missingProperty)+'\' } ';if(it.opts.messages!==false){out+=' , message: \'';if(it.opts._errorDataPathProperty){out+='is a required property';}else{out+='should have required property \\\''+($missingProperty)+'\\\'';}
out+='\' ';}
if(it.opts.verbose){out+=' , schema: validate.schema'+($schemaPath)+' , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+(__err)+']); ';}else{out+=' validate.errors = ['+(__err)+']; return false; ';}}else{out+=' var err = '+(__err)+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}
out+=' } else { ';}else{out+=' if ( ';var arr2=$required;if(arr2){var $propertyKey,$i=-1,l2=arr2.length-1;while($i<l2){$propertyKey=arr2[$i+=1];if($i){out+=' || ';}
var $prop=it.util.getProperty($propertyKey),$useData=$data+$prop;out+=' ( ( '+($useData)+' === undefined ';if($ownProperties){out+=' || ! Object.prototype.hasOwnProperty.call('+($data)+', \''+(it.util.escapeQuotes($propertyKey))+'\') ';}
out+=') && (missing'+($lvl)+' = '+(it.util.toQuotedString(it.opts.jsonPointers?$propertyKey:$prop))+') ) ';}}
out+=') {  ';var $propertyPath='missing'+$lvl,$missingProperty='\' + '+$propertyPath+' + \'';if(it.opts._errorDataPathProperty){it.errorPath=it.opts.jsonPointers?it.util.getPathExpr($currentErrorPath,$propertyPath,true):$currentErrorPath+' + '+$propertyPath;}
var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+('required')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: { missingProperty: \''+($missingProperty)+'\' } ';if(it.opts.messages!==false){out+=' , message: \'';if(it.opts._errorDataPathProperty){out+='is a required property';}else{out+='should have required property \\\''+($missingProperty)+'\\\'';}
out+='\' ';}
if(it.opts.verbose){out+=' , schema: validate.schema'+($schemaPath)+' , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+(__err)+']); ';}else{out+=' validate.errors = ['+(__err)+']; return false; ';}}else{out+=' var err = '+(__err)+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}
out+=' } else { ';}}else{if($loopRequired){if(!$isData){out+=' var '+($vSchema)+' = validate.schema'+($schemaPath)+'; ';}
var $i='i'+$lvl,$propertyPath='schema'+$lvl+'['+$i+']',$missingProperty='\' + '+$propertyPath+' + \'';if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPathExpr($currentErrorPath,$propertyPath,it.opts.jsonPointers);}
if($isData){out+=' if ('+($vSchema)+' && !Array.isArray('+($vSchema)+')) {  var err =   ';if(it.createErrors!==false){out+=' { keyword: \''+('required')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: { missingProperty: \''+($missingProperty)+'\' } ';if(it.opts.messages!==false){out+=' , message: \'';if(it.opts._errorDataPathProperty){out+='is a required property';}else{out+='should have required property \\\''+($missingProperty)+'\\\'';}
out+='\' ';}
if(it.opts.verbose){out+=' , schema: validate.schema'+($schemaPath)+' , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
out+=';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ('+($vSchema)+' !== undefined) { ';}
out+=' for (var '+($i)+' = 0; '+($i)+' < '+($vSchema)+'.length; '+($i)+'++) { if ('+($data)+'['+($vSchema)+'['+($i)+']] === undefined ';if($ownProperties){out+=' || ! Object.prototype.hasOwnProperty.call('+($data)+', '+($vSchema)+'['+($i)+']) ';}
out+=') {  var err =   ';if(it.createErrors!==false){out+=' { keyword: \''+('required')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: { missingProperty: \''+($missingProperty)+'\' } ';if(it.opts.messages!==false){out+=' , message: \'';if(it.opts._errorDataPathProperty){out+='is a required property';}else{out+='should have required property \\\''+($missingProperty)+'\\\'';}
out+='\' ';}
if(it.opts.verbose){out+=' , schema: validate.schema'+($schemaPath)+' , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
out+=';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ';if($isData){out+='  }  ';}}else{var arr3=$required;if(arr3){var $propertyKey,i3=-1,l3=arr3.length-1;while(i3<l3){$propertyKey=arr3[i3+=1];var $prop=it.util.getProperty($propertyKey),$missingProperty=it.util.escapeQuotes($propertyKey),$useData=$data+$prop;if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPath($currentErrorPath,$propertyKey,it.opts.jsonPointers);}
out+=' if ( '+($useData)+' === undefined ';if($ownProperties){out+=' || ! Object.prototype.hasOwnProperty.call('+($data)+', \''+(it.util.escapeQuotes($propertyKey))+'\') ';}
out+=') {  var err =   ';if(it.createErrors!==false){out+=' { keyword: \''+('required')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: { missingProperty: \''+($missingProperty)+'\' } ';if(it.opts.messages!==false){out+=' , message: \'';if(it.opts._errorDataPathProperty){out+='is a required property';}else{out+='should have required property \\\''+($missingProperty)+'\\\'';}
out+='\' ';}
if(it.opts.verbose){out+=' , schema: validate.schema'+($schemaPath)+' , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
out+=';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } ';}}}}
it.errorPath=$currentErrorPath;}else if($breakOnError){out+=' if (true) {';}
return out;}}),(function(module,exports,__webpack_require__){"use strict";module.exports=function generate_uniqueItems(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $data='data'+($dataLvl||'');var $valid='valid'+$lvl;var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=' var schema'+($lvl)+' = '+(it.util.getData($schema.$data,$dataLvl,it.dataPathArr))+'; ';$schemaValue='schema'+$lvl;}else{$schemaValue=$schema;}
if(($schema||$isData)&&it.opts.uniqueItems!==false){if($isData){out+=' var '+($valid)+'; if ('+($schemaValue)+' === false || '+($schemaValue)+' === undefined) '+($valid)+' = true; else if (typeof '+($schemaValue)+' != \'boolean\') '+($valid)+' = false; else { ';}
out+=' var i = '+($data)+'.length , '+($valid)+' = true , j; if (i > 1) { ';var $itemType=it.schema.items&&it.schema.items.type,$typeIsArray=Array.isArray($itemType);if(!$itemType||$itemType=='object'||$itemType=='array'||($typeIsArray&&($itemType.indexOf('object')>=0||$itemType.indexOf('array')>=0))){out+=' outer: for (;i--;) { for (j = i; j--;) { if (equal('+($data)+'[i], '+($data)+'[j])) { '+($valid)+' = false; break outer; } } } ';}else{out+=' var itemIndices = {}, item; for (;i--;) { var item = '+($data)+'[i]; ';var $method='checkDataType'+($typeIsArray?'s':'');out+=' if ('+(it.util[$method]($itemType,'item',true))+') continue; ';if($typeIsArray){out+=' if (typeof item == \'string\') item = \'"\' + item; ';}
out+=' if (typeof itemIndices[item] == \'number\') { '+($valid)+' = false; j = itemIndices[item]; break; } itemIndices[item] = i; } ';}
out+=' } ';if($isData){out+='  }  ';}
out+=' if (!'+($valid)+') {   ';var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+('uniqueItems')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: { i: i, j: j } ';if(it.opts.messages!==false){out+=' , message: \'should NOT have duplicate items (items ## \' + j + \' and \' + i + \' are identical)\' ';}
if(it.opts.verbose){out+=' , schema:  ';if($isData){out+='validate.schema'+($schemaPath);}else{out+=''+($schema);}
out+='         , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+(__err)+']); ';}else{out+=' validate.errors = ['+(__err)+']; return false; ';}}else{out+=' var err = '+(__err)+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}
out+=' } ';if($breakOnError){out+=' else { ';}}else{if($breakOnError){out+=' if (true) { ';}}
return out;}}),(function(module,exports,__webpack_require__){"use strict";var KEYWORDS=['multipleOf','maximum','exclusiveMaximum','minimum','exclusiveMinimum','maxLength','minLength','pattern','additionalItems','maxItems','minItems','uniqueItems','maxProperties','minProperties','required','additionalProperties','enum','format','const'];module.exports=function(metaSchema,keywordsJsonPointers){for(var i=0;i<keywordsJsonPointers.length;i++){metaSchema=JSON.parse(JSON.stringify(metaSchema));var segments=keywordsJsonPointers[i].split('/');var keywords=metaSchema;var j;for(j=1;j<segments.length;j++)
keywords=keywords[segments[j]];for(j=0;j<KEYWORDS.length;j++){var key=KEYWORDS[j];var schema=keywords[key];if(schema){keywords[key]={anyOf:[schema,{$ref:'https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#'}]};}}}
return metaSchema;};}),(function(module,exports,__webpack_require__){"use strict";var MissingRefError=__webpack_require__(248).MissingRef;module.exports=compileAsync;function compileAsync(schema,meta,callback){var self=this;if(typeof this._opts.loadSchema!='function')
throw new Error('options.loadSchema should be a function');if(typeof meta=='function'){callback=meta;meta=undefined;}
var p=loadMetaSchemaOf(schema).then(function(){var schemaObj=self._addSchema(schema,undefined,meta);return schemaObj.validate||_compileAsync(schemaObj);});if(callback){p.then(function(v){callback(null,v);},callback);}
return p;function loadMetaSchemaOf(sch){var $schema=sch.$schema;return $schema&&!self.getSchema($schema)?compileAsync.call(self,{$ref:$schema},true):Promise.resolve();}
function _compileAsync(schemaObj){try{return self._compile(schemaObj);}
catch(e){if(e instanceof MissingRefError)return loadMissingSchema(e);throw e;}
function loadMissingSchema(e){var ref=e.missingSchema;if(added(ref))throw new Error('Schema '+ref+' is loaded but '+e.missingRef+' cannot be resolved');var schemaPromise=self._loadingSchemas[ref];if(!schemaPromise){schemaPromise=self._loadingSchemas[ref]=self._opts.loadSchema(ref);schemaPromise.then(removePromise,removePromise);}
return schemaPromise.then(function(sch){if(!added(ref)){return loadMetaSchemaOf(sch).then(function(){if(!added(ref))self.addSchema(sch,ref,undefined,meta);});}}).then(function(){return _compileAsync(schemaObj);});function removePromise(){delete self._loadingSchemas[ref];}
function added(ref){return self._refs[ref]||self._schemas[ref];}}}}}),(function(module,exports,__webpack_require__){"use strict";var IDENTIFIER=/^[a-z_$][a-z0-9_$-]*$/i;var customRuleCode=__webpack_require__(884);module.exports={add:addKeyword,get:getKeyword,remove:removeKeyword};function addKeyword(keyword,definition){var RULES=this.RULES;if(RULES.keywords[keyword])
throw new Error('Keyword '+keyword+' is already defined');if(!IDENTIFIER.test(keyword))
throw new Error('Keyword '+keyword+' is not a valid identifier');if(definition){if(definition.macro&&definition.valid!==undefined)
throw new Error('"valid" option cannot be used with macro keywords');var dataType=definition.type;if(Array.isArray(dataType)){var i,len=dataType.length;for(i=0;i<len;i++)checkDataType(dataType[i]);for(i=0;i<len;i++)_addRule(keyword,dataType[i],definition);}else{if(dataType)checkDataType(dataType);_addRule(keyword,dataType,definition);}
var $data=definition.$data===true&&this._opts.$data;if($data&&!definition.validate)
throw new Error('$data support: "validate" function is not defined');var metaSchema=definition.metaSchema;if(metaSchema){if($data){metaSchema={anyOf:[metaSchema,{'$ref':'https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#'}]};}
definition.validateSchema=this.compile(metaSchema,true);}}
RULES.keywords[keyword]=RULES.all[keyword]=true;function _addRule(keyword,dataType,definition){var ruleGroup;for(var i=0;i<RULES.length;i++){var rg=RULES[i];if(rg.type==dataType){ruleGroup=rg;break;}}
if(!ruleGroup){ruleGroup={type:dataType,rules:[]};RULES.push(ruleGroup);}
var rule={keyword:keyword,definition:definition,custom:true,code:customRuleCode,implements:definition.implements};ruleGroup.rules.push(rule);RULES.custom[keyword]=rule;}
function checkDataType(dataType){if(!RULES.types[dataType])throw new Error('Unknown type '+dataType);}
return this;}
function getKeyword(keyword){var rule=this.RULES.custom[keyword];return rule?rule.definition:this.RULES.keywords[keyword]||false;}
function removeKeyword(keyword){var RULES=this.RULES;delete RULES.keywords[keyword];delete RULES.all[keyword];delete RULES.custom[keyword];for(var i=0;i<RULES.length;i++){var rules=RULES[i].rules;for(var j=0;j<rules.length;j++){if(rules[j].keyword==keyword){rules.splice(j,1);break;}}}
return this;}}),(function(module,exports,__webpack_require__){"use strict";module.exports=function generate_custom(it,$keyword,$ruleType){var out=' ';var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+'/'+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data='data'+($dataLvl||'');var $valid='valid'+$lvl;var $errs='errs__'+$lvl;var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=' var schema'+($lvl)+' = '+(it.util.getData($schema.$data,$dataLvl,it.dataPathArr))+'; ';$schemaValue='schema'+$lvl;}else{$schemaValue=$schema;}
var $rule=this,$definition='definition'+$lvl,$rDef=$rule.definition,$closingBraces='';var $compile,$inline,$macro,$ruleValidate,$validateCode;if($isData&&$rDef.$data){$validateCode='keywordValidate'+$lvl;var $validateSchema=$rDef.validateSchema;out+=' var '+($definition)+' = RULES.custom[\''+($keyword)+'\'].definition; var '+($validateCode)+' = '+($definition)+'.validate;';}else{$ruleValidate=it.useCustomRule($rule,$schema,it.schema,it);if(!$ruleValidate)return;$schemaValue='validate.schema'+$schemaPath;$validateCode=$ruleValidate.code;$compile=$rDef.compile;$inline=$rDef.inline;$macro=$rDef.macro;}
var $ruleErrs=$validateCode+'.errors',$i='i'+$lvl,$ruleErr='ruleErr'+$lvl,$asyncKeyword=$rDef.async;if($asyncKeyword&&!it.async)throw new Error('async keyword in sync schema');if(!($inline||$macro)){out+=''+($ruleErrs)+' = null;';}
out+='var '+($errs)+' = errors;var '+($valid)+';';if($isData&&$rDef.$data){$closingBraces+='}';out+=' if ('+($schemaValue)+' === undefined) { '+($valid)+' = true; } else { ';if($validateSchema){$closingBraces+='}';out+=' '+($valid)+' = '+($definition)+'.validateSchema('+($schemaValue)+'); if ('+($valid)+') { ';}}
if($inline){if($rDef.statements){out+=' '+($ruleValidate.validate)+' ';}else{out+=' '+($valid)+' = '+($ruleValidate.validate)+'; ';}}else if($macro){var $it=it.util.copy(it);var $closingBraces='';$it.level++;var $nextValid='valid'+$it.level;$it.schema=$ruleValidate.validate;$it.schemaPath='';var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;var $code=it.validate($it).replace(/validate\.schema/g,$validateCode);it.compositeRule=$it.compositeRule=$wasComposite;out+=' '+($code);}else{var $$outStack=$$outStack||[];$$outStack.push(out);out='';out+='  '+($validateCode)+'.call( ';if(it.opts.passContext){out+='this';}else{out+='self';}
if($compile||$rDef.schema===false){out+=' , '+($data)+' ';}else{out+=' , '+($schemaValue)+' , '+($data)+' , validate.schema'+(it.schemaPath)+' ';}
out+=' , (dataPath || \'\')';if(it.errorPath!='""'){out+=' + '+(it.errorPath);}
var $parentData=$dataLvl?'data'+(($dataLvl-1)||''):'parentData',$parentDataProperty=$dataLvl?it.dataPathArr[$dataLvl]:'parentDataProperty';out+=' , '+($parentData)+' , '+($parentDataProperty)+' , rootData )  ';var def_callRuleValidate=out;out=$$outStack.pop();if($rDef.errors===false){out+=' '+($valid)+' = ';if($asyncKeyword){out+='await ';}
out+=''+(def_callRuleValidate)+'; ';}else{if($asyncKeyword){$ruleErrs='customErrors'+$lvl;out+=' var '+($ruleErrs)+' = null; try { '+($valid)+' = await '+(def_callRuleValidate)+'; } catch (e) { '+($valid)+' = false; if (e instanceof ValidationError) '+($ruleErrs)+' = e.errors; else throw e; } ';}else{out+=' '+($ruleErrs)+' = null; '+($valid)+' = '+(def_callRuleValidate)+'; ';}}}
if($rDef.modifying){out+=' if ('+($parentData)+') '+($data)+' = '+($parentData)+'['+($parentDataProperty)+'];';}
out+=''+($closingBraces);if($rDef.valid){if($breakOnError){out+=' if (true) { ';}}else{out+=' if ( ';if($rDef.valid===undefined){out+=' !';if($macro){out+=''+($nextValid);}else{out+=''+($valid);}}else{out+=' '+(!$rDef.valid)+' ';}
out+=') { ';$errorKeyword=$rule.keyword;var $$outStack=$$outStack||[];$$outStack.push(out);out='';var $$outStack=$$outStack||[];$$outStack.push(out);out='';if(it.createErrors!==false){out+=' { keyword: \''+($errorKeyword||'custom')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: { keyword: \''+($rule.keyword)+'\' } ';if(it.opts.messages!==false){out+=' , message: \'should pass "'+($rule.keyword)+'" keyword validation\' ';}
if(it.opts.verbose){out+=' , schema: validate.schema'+($schemaPath)+' , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(['+(__err)+']); ';}else{out+=' validate.errors = ['+(__err)+']; return false; ';}}else{out+=' var err = '+(__err)+';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';}
var def_customError=out;out=$$outStack.pop();if($inline){if($rDef.errors){if($rDef.errors!='full'){out+='  for (var '+($i)+'='+($errs)+'; '+($i)+'<errors; '+($i)+'++) { var '+($ruleErr)+' = vErrors['+($i)+']; if ('+($ruleErr)+'.dataPath === undefined) '+($ruleErr)+'.dataPath = (dataPath || \'\') + '+(it.errorPath)+'; if ('+($ruleErr)+'.schemaPath === undefined) { '+($ruleErr)+'.schemaPath = "'+($errSchemaPath)+'"; } ';if(it.opts.verbose){out+=' '+($ruleErr)+'.schema = '+($schemaValue)+'; '+($ruleErr)+'.data = '+($data)+'; ';}
out+=' } ';}}else{if($rDef.errors===false){out+=' '+(def_customError)+' ';}else{out+=' if ('+($errs)+' == errors) { '+(def_customError)+' } else {  for (var '+($i)+'='+($errs)+'; '+($i)+'<errors; '+($i)+'++) { var '+($ruleErr)+' = vErrors['+($i)+']; if ('+($ruleErr)+'.dataPath === undefined) '+($ruleErr)+'.dataPath = (dataPath || \'\') + '+(it.errorPath)+'; if ('+($ruleErr)+'.schemaPath === undefined) { '+($ruleErr)+'.schemaPath = "'+($errSchemaPath)+'"; } ';if(it.opts.verbose){out+=' '+($ruleErr)+'.schema = '+($schemaValue)+'; '+($ruleErr)+'.data = '+($data)+'; ';}
out+=' } } ';}}}else if($macro){out+='   var err =   ';if(it.createErrors!==false){out+=' { keyword: \''+($errorKeyword||'custom')+'\' , dataPath: (dataPath || \'\') + '+(it.errorPath)+' , schemaPath: '+(it.util.toQuotedString($errSchemaPath))+' , params: { keyword: \''+($rule.keyword)+'\' } ';if(it.opts.messages!==false){out+=' , message: \'should pass "'+($rule.keyword)+'" keyword validation\' ';}
if(it.opts.verbose){out+=' , schema: validate.schema'+($schemaPath)+' , parentSchema: validate.schema'+(it.schemaPath)+' , data: '+($data)+' ';}
out+=' } ';}else{out+=' {} ';}
out+=';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';if(!it.compositeRule&&$breakOnError){if(it.async){out+=' throw new ValidationError(vErrors); ';}else{out+=' validate.errors = vErrors; return false; ';}}}else{if($rDef.errors===false){out+=' '+(def_customError)+' ';}else{out+=' if (Array.isArray('+($ruleErrs)+')) { if (vErrors === null) vErrors = '+($ruleErrs)+'; else vErrors = vErrors.concat('+($ruleErrs)+'); errors = vErrors.length;  for (var '+($i)+'='+($errs)+'; '+($i)+'<errors; '+($i)+'++) { var '+($ruleErr)+' = vErrors['+($i)+']; if ('+($ruleErr)+'.dataPath === undefined) '+($ruleErr)+'.dataPath = (dataPath || \'\') + '+(it.errorPath)+';  '+($ruleErr)+'.schemaPath = "'+($errSchemaPath)+'";  ';if(it.opts.verbose){out+=' '+($ruleErr)+'.schema = '+($schemaValue)+'; '+($ruleErr)+'.data = '+($data)+'; ';}
out+=' } } else { '+(def_customError)+' } ';}}
out+=' } ';if($breakOnError){out+=' else { ';}}
return out;}}),(function(module,exports){module.exports={"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON Schema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}}),(function(module,exports){module.exports={"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}}),(function(module,exports){function HARError(errors){var message='validation failed'
this.name='HARError'
this.message=message
this.errors=errors
if(typeof Error.captureStackTrace==='function'){Error.captureStackTrace(this,this.constructor)}else{this.stack=(new Error(message)).stack}}
HARError.prototype=Error.prototype
module.exports=HARError}),(function(module,exports,__webpack_require__){"use strict";module.exports={afterRequest:__webpack_require__(889),beforeRequest:__webpack_require__(890),browser:__webpack_require__(891),cache:__webpack_require__(892),content:__webpack_require__(893),cookie:__webpack_require__(894),creator:__webpack_require__(895),entry:__webpack_require__(896),har:__webpack_require__(897),header:__webpack_require__(898),log:__webpack_require__(899),page:__webpack_require__(900),pageTimings:__webpack_require__(901),postData:__webpack_require__(902),query:__webpack_require__(903),request:__webpack_require__(904),response:__webpack_require__(905),timings:__webpack_require__(906)}}),(function(module,exports){module.exports={"$id":"afterRequest.json#","$schema":"http://json-schema.org/draft-06/schema#","type":"object","optional":true,"required":["lastAccess","eTag","hitCount"],"properties":{"expires":{"type":"string","pattern":"^(\\d{4})(-)?(\\d\\d)(-)?(\\d\\d)(T)?(\\d\\d)(:)?(\\d\\d)(:)?(\\d\\d)(\\.\\d+)?(Z|([+-])(\\d\\d)(:)?(\\d\\d))?"},"lastAccess":{"type":"string","pattern":"^(\\d{4})(-)?(\\d\\d)(-)?(\\d\\d)(T)?(\\d\\d)(:)?(\\d\\d)(:)?(\\d\\d)(\\.\\d+)?(Z|([+-])(\\d\\d)(:)?(\\d\\d))?"},"eTag":{"type":"string"},"hitCount":{"type":"integer"},"comment":{"type":"string"}}}}),(function(module,exports){module.exports={"$id":"beforeRequest.json#","$schema":"http://json-schema.org/draft-06/schema#","type":"object","optional":true,"required":["lastAccess","eTag","hitCount"],"properties":{"expires":{"type":"string","pattern":"^(\\d{4})(-)?(\\d\\d)(-)?(\\d\\d)(T)?(\\d\\d)(:)?(\\d\\d)(:)?(\\d\\d)(\\.\\d+)?(Z|([+-])(\\d\\d)(:)?(\\d\\d))?"},"lastAccess":{"type":"string","pattern":"^(\\d{4})(-)?(\\d\\d)(-)?(\\d\\d)(T)?(\\d\\d)(:)?(\\d\\d)(:)?(\\d\\d)(\\.\\d+)?(Z|([+-])(\\d\\d)(:)?(\\d\\d))?"},"eTag":{"type":"string"},"hitCount":{"type":"integer"},"comment":{"type":"string"}}}}),(function(module,exports){module.exports={"$id":"browser.json#","$schema":"http://json-schema.org/draft-06/schema#","type":"object","required":["name","version"],"properties":{"name":{"type":"string"},"version":{"type":"string"},"comment":{"type":"string"}}}}),(function(module,exports){module.exports={"$id":"cache.json#","$schema":"http://json-schema.org/draft-06/schema#","properties":{"beforeRequest":{"oneOf":[{"type":"null"},{"$ref":"beforeRequest.json#"}]},"afterRequest":{"oneOf":[{"type":"null"},{"$ref":"afterRequest.json#"}]},"comment":{"type":"string"}}}}),(function(module,exports){module.exports={"$id":"content.json#","$schema":"http://json-schema.org/draft-06/schema#","type":"object","required":["size","mimeType"],"properties":{"size":{"type":"integer"},"compression":{"type":"integer"},"mimeType":{"type":"string"},"text":{"type":"string"},"encoding":{"type":"string"},"comment":{"type":"string"}}}}),(function(module,exports){module.exports={"$id":"cookie.json#","$schema":"http://json-schema.org/draft-06/schema#","type":"object","required":["name","value"],"properties":{"name":{"type":"string"},"value":{"type":"string"},"path":{"type":"string"},"domain":{"type":"string"},"expires":{"type":["string","null"],"format":"date-time"},"httpOnly":{"type":"boolean"},"secure":{"type":"boolean"},"comment":{"type":"string"}}}}),(function(module,exports){module.exports={"$id":"creator.json#","$schema":"http://json-schema.org/draft-06/schema#","type":"object","required":["name","version"],"properties":{"name":{"type":"string"},"version":{"type":"string"},"comment":{"type":"string"}}}}),(function(module,exports){module.exports={"$id":"entry.json#","$schema":"http://json-schema.org/draft-06/schema#","type":"object","optional":true,"required":["startedDateTime","time","request","response","cache","timings"],"properties":{"pageref":{"type":"string"},"startedDateTime":{"type":"string","format":"date-time","pattern":"^(\\d{4})(-)?(\\d\\d)(-)?(\\d\\d)(T)?(\\d\\d)(:)?(\\d\\d)(:)?(\\d\\d)(\\.\\d+)?(Z|([+-])(\\d\\d)(:)?(\\d\\d))"},"time":{"type":"number","min":0},"request":{"$ref":"request.json#"},"response":{"$ref":"response.json#"},"cache":{"$ref":"cache.json#"},"timings":{"$ref":"timings.json#"},"serverIPAddress":{"type":"string","oneOf":[{"format":"ipv4"},{"format":"ipv6"}]},"connection":{"type":"string"},"comment":{"type":"string"}}}}),(function(module,exports){module.exports={"$id":"har.json#","$schema":"http://json-schema.org/draft-06/schema#","type":"object","required":["log"],"properties":{"log":{"$ref":"log.json#"}}}}),(function(module,exports){module.exports={"$id":"header.json#","$schema":"http://json-schema.org/draft-06/schema#","type":"object","required":["name","value"],"properties":{"name":{"type":"string"},"value":{"type":"string"},"comment":{"type":"string"}}}}),(function(module,exports){module.exports={"$id":"log.json#","$schema":"http://json-schema.org/draft-06/schema#","type":"object","required":["version","creator","entries"],"properties":{"version":{"type":"string"},"creator":{"$ref":"creator.json#"},"browser":{"$ref":"browser.json#"},"pages":{"type":"array","items":{"$ref":"page.json#"}},"entries":{"type":"array","items":{"$ref":"entry.json#"}},"comment":{"type":"string"}}}}),(function(module,exports){module.exports={"$id":"page.json#","$schema":"http://json-schema.org/draft-06/schema#","type":"object","optional":true,"required":["startedDateTime","id","title","pageTimings"],"properties":{"startedDateTime":{"type":"string","format":"date-time","pattern":"^(\\d{4})(-)?(\\d\\d)(-)?(\\d\\d)(T)?(\\d\\d)(:)?(\\d\\d)(:)?(\\d\\d)(\\.\\d+)?(Z|([+-])(\\d\\d)(:)?(\\d\\d))"},"id":{"type":"string","unique":true},"title":{"type":"string"},"pageTimings":{"$ref":"pageTimings.json#"},"comment":{"type":"string"}}}}),(function(module,exports){module.exports={"$id":"pageTimings.json#","$schema":"http://json-schema.org/draft-06/schema#","type":"object","properties":{"onContentLoad":{"type":"number","min":-1},"onLoad":{"type":"number","min":-1},"comment":{"type":"string"}}}}),(function(module,exports){module.exports={"$id":"postData.json#","$schema":"http://json-schema.org/draft-06/schema#","type":"object","optional":true,"required":["mimeType"],"properties":{"mimeType":{"type":"string"},"text":{"type":"string"},"params":{"type":"array","required":["name"],"properties":{"name":{"type":"string"},"value":{"type":"string"},"fileName":{"type":"string"},"contentType":{"type":"string"},"comment":{"type":"string"}}},"comment":{"type":"string"}}}}),(function(module,exports){module.exports={"$id":"query.json#","$schema":"http://json-schema.org/draft-06/schema#","type":"object","required":["name","value"],"properties":{"name":{"type":"string"},"value":{"type":"string"},"comment":{"type":"string"}}}}),(function(module,exports){module.exports={"$id":"request.json#","$schema":"http://json-schema.org/draft-06/schema#","type":"object","required":["method","url","httpVersion","cookies","headers","queryString","headersSize","bodySize"],"properties":{"method":{"type":"string"},"url":{"type":"string","format":"uri"},"httpVersion":{"type":"string"},"cookies":{"type":"array","items":{"$ref":"cookie.json#"}},"headers":{"type":"array","items":{"$ref":"header.json#"}},"queryString":{"type":"array","items":{"$ref":"query.json#"}},"postData":{"$ref":"postData.json#"},"headersSize":{"type":"integer"},"bodySize":{"type":"integer"},"comment":{"type":"string"}}}}),(function(module,exports){module.exports={"$id":"response.json#","$schema":"http://json-schema.org/draft-06/schema#","type":"object","required":["status","statusText","httpVersion","cookies","headers","content","redirectURL","headersSize","bodySize"],"properties":{"status":{"type":"integer"},"statusText":{"type":"string"},"httpVersion":{"type":"string"},"cookies":{"type":"array","items":{"$ref":"cookie.json#"}},"headers":{"type":"array","items":{"$ref":"header.json#"}},"content":{"$ref":"content.json#"},"redirectURL":{"type":"string"},"headersSize":{"type":"integer"},"bodySize":{"type":"integer"},"comment":{"type":"string"}}}}),(function(module,exports){module.exports={"$id":"timings.json#","$schema":"http://json-schema.org/draft-06/schema#","required":["send","wait","receive"],"properties":{"dns":{"type":"number","min":-1},"connect":{"type":"number","min":-1},"blocked":{"type":"number","min":-1},"send":{"type":"number","min":-1},"wait":{"type":"number","min":-1},"receive":{"type":"number","min":-1},"ssl":{"type":"number","min":-1},"comment":{"type":"string"}}}}),(function(module,exports){module.exports={"$schema":"http://json-schema.org/draft-06/schema#","$id":"http://json-schema.org/draft-06/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"title":{"type":"string"},"description":{"type":"string"},"default":{},"examples":{"type":"array","items":{}},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":{}},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":{},"enum":{"type":"array","minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":{}}}),(function(module,exports,__webpack_require__){"use strict";var caseless=__webpack_require__(245)
var uuid=__webpack_require__(161)
var helpers=__webpack_require__(237)
var md5=helpers.md5
var toBase64=helpers.toBase64
function Auth(request){this.request=request
this.hasAuth=false
this.sentAuth=false
this.bearerToken=null
this.user=null
this.pass=null}
Auth.prototype.basic=function(user,pass,sendImmediately){var self=this
if(typeof user!=='string'||(pass!==undefined&&typeof pass!=='string')){self.request.emit('error',new Error('auth() received invalid user or password'))}
self.user=user
self.pass=pass
self.hasAuth=true
var header=user+':'+(pass||'')
if(sendImmediately||typeof sendImmediately==='undefined'){var authHeader='Basic '+toBase64(header)
self.sentAuth=true
return authHeader}}
Auth.prototype.bearer=function(bearer,sendImmediately){var self=this
self.bearerToken=bearer
self.hasAuth=true
if(sendImmediately||typeof sendImmediately==='undefined'){if(typeof bearer==='function'){bearer=bearer()}
var authHeader='Bearer '+(bearer||'')
self.sentAuth=true
return authHeader}}
Auth.prototype.digest=function(method,path,authHeader){var self=this
var challenge={}
var re=/([a-z0-9_-]+)=(?:"([^"]+)"|([a-z0-9_-]+))/gi
for(;;){var match=re.exec(authHeader)
if(!match){break}
challenge[match[1]]=match[2]||match[3]}
var ha1Compute=function(algorithm,user,realm,pass,nonce,cnonce){var ha1=md5(user+':'+realm+':'+pass)
if(algorithm&&algorithm.toLowerCase()==='md5-sess'){return md5(ha1+':'+nonce+':'+cnonce)}else{return ha1}}
var qop=/(^|,)\s*auth\s*($|,)/.test(challenge.qop)&&'auth'
var nc=qop&&'00000001'
var cnonce=qop&&uuid().replace(/-/g,'')
var ha1=ha1Compute(challenge.algorithm,self.user,challenge.realm,self.pass,challenge.nonce,cnonce)
var ha2=md5(method+':'+path)
var digestResponse=qop?md5(ha1+':'+challenge.nonce+':'+nc+':'+cnonce+':'+qop+':'+ha2):md5(ha1+':'+challenge.nonce+':'+ha2)
var authValues={username:self.user,realm:challenge.realm,nonce:challenge.nonce,uri:path,qop:qop,response:digestResponse,nc:nc,cnonce:cnonce,algorithm:challenge.algorithm,opaque:challenge.opaque}
authHeader=[]
for(var k in authValues){if(authValues[k]){if(k==='qop'||k==='nc'||k==='algorithm'){authHeader.push(k+'='+authValues[k])}else{authHeader.push(k+'="'+authValues[k]+'"')}}}
authHeader='Digest '+authHeader.join(', ')
self.sentAuth=true
return authHeader}
Auth.prototype.onRequest=function(user,pass,sendImmediately,bearer){var self=this
var request=self.request
var authHeader
if(bearer===undefined&&user===undefined){self.request.emit('error',new Error('no auth mechanism defined'))}else if(bearer!==undefined){authHeader=self.bearer(bearer,sendImmediately)}else{authHeader=self.basic(user,pass,sendImmediately)}
if(authHeader){request.setHeader('authorization',authHeader)}}
Auth.prototype.onResponse=function(response){var self=this
var request=self.request
if(!self.hasAuth||self.sentAuth){return null}
var c=caseless(response.headers)
var authHeader=c.get('www-authenticate')
var authVerb=authHeader&&authHeader.split(' ')[0].toLowerCase()
request.debug('reauth',authVerb)
switch(authVerb){case 'basic':return self.basic(self.user,self.pass,true)
case 'bearer':return self.bearer(self.bearerToken,true)
case 'digest':return self.digest(request.method,request.path,authHeader)}}
exports.Auth=Auth}),(function(module,exports,__webpack_require__){"use strict";var url=__webpack_require__(77)
var qs=__webpack_require__(384)
var caseless=__webpack_require__(245)
var uuid=__webpack_require__(161)
var oauth=__webpack_require__(910)
var crypto=__webpack_require__(24)
var Buffer=__webpack_require__(4).Buffer
function OAuth(request){this.request=request
this.params=null}
OAuth.prototype.buildParams=function(_oauth,uri,method,query,form,qsLib){var oa={}
for(var i in _oauth){oa['oauth_'+i]=_oauth[i]}
if(!oa.oauth_version){oa.oauth_version='1.0'}
if(!oa.oauth_timestamp){oa.oauth_timestamp=Math.floor(Date.now()/1000).toString()}
if(!oa.oauth_nonce){oa.oauth_nonce=uuid().replace(/-/g,'')}
if(!oa.oauth_signature_method){oa.oauth_signature_method='HMAC-SHA1'}
var consumer_secret_or_private_key=oa.oauth_consumer_secret||oa.oauth_private_key
delete oa.oauth_consumer_secret
delete oa.oauth_private_key
var token_secret=oa.oauth_token_secret
delete oa.oauth_token_secret
var realm=oa.oauth_realm
delete oa.oauth_realm
delete oa.oauth_transport_method
var baseurl=uri.protocol+'//'+uri.host+uri.pathname
var params=qsLib.parse([].concat(query,form,qsLib.stringify(oa)).join('&'))
oa.oauth_signature=oauth.sign(oa.oauth_signature_method,method,baseurl,params,consumer_secret_or_private_key,token_secret)
if(realm){oa.realm=realm}
return oa}
OAuth.prototype.buildBodyHash=function(_oauth,body){if(['HMAC-SHA1','RSA-SHA1'].indexOf(_oauth.signature_method||'HMAC-SHA1')<0){this.request.emit('error',new Error('oauth: '+_oauth.signature_method+
' signature_method not supported with body_hash signing.'))}
var shasum=crypto.createHash('sha1')
shasum.update(body||'')
var sha1=shasum.digest('hex')
return Buffer.from(sha1,'hex').toString('base64')}
OAuth.prototype.concatParams=function(oa,sep,wrap){wrap=wrap||''
var params=Object.keys(oa).filter(function(i){return i!=='realm'&&i!=='oauth_signature'}).sort()
if(oa.realm){params.splice(0,0,'realm')}
params.push('oauth_signature')
return params.map(function(i){return i+'='+wrap+oauth.rfc3986(oa[i])+wrap}).join(sep)}
OAuth.prototype.onRequest=function(_oauth){var self=this
self.params=_oauth
var uri=self.request.uri||{}
var method=self.request.method||''
var headers=caseless(self.request.headers)
var body=self.request.body||''
var qsLib=self.request.qsLib||qs
var form
var query
var contentType=headers.get('content-type')||''
var formContentType='application/x-www-form-urlencoded'
var transport=_oauth.transport_method||'header'
if(contentType.slice(0,formContentType.length)===formContentType){contentType=formContentType
form=body}
if(uri.query){query=uri.query}
if(transport==='body'&&(method!=='POST'||contentType!==formContentType)){self.request.emit('error',new Error('oauth: transport_method of body requires POST '+
'and content-type '+formContentType))}
if(!form&&typeof _oauth.body_hash==='boolean'){_oauth.body_hash=self.buildBodyHash(_oauth,self.request.body.toString())}
var oa=self.buildParams(_oauth,uri,method,query,form,qsLib)
switch(transport){case 'header':self.request.setHeader('Authorization','OAuth '+self.concatParams(oa,',','"'))
break
case 'query':var href=self.request.uri.href+=(query?'&':'?')+self.concatParams(oa,'&')
self.request.uri=url.parse(href)
self.request.path=self.request.uri.path
break
case 'body':self.request.body=(form?form+'&':'')+self.concatParams(oa,'&')
break
default:self.request.emit('error',new Error('oauth: transport_method invalid'))}}
exports.OAuth=OAuth}),(function(module,exports,__webpack_require__){var crypto=__webpack_require__(24)
function sha(key,body,algorithm){return crypto.createHmac(algorithm,key).update(body).digest('base64')}
function rsa(key,body){return crypto.createSign('RSA-SHA1').update(body).sign(key,'base64')}
function rfc3986(str){return encodeURIComponent(str).replace(/!/g,'%21').replace(/\*/g,'%2A').replace(/\(/g,'%28').replace(/\)/g,'%29').replace(/'/g,'%27')}
function map(obj){var key,val,arr=[]
for(key in obj){val=obj[key]
if(Array.isArray(val))
for(var i=0;i<val.length;i++)
arr.push([key,val[i]])
else if(typeof val==='object')
for(var prop in val)
arr.push([key+'['+prop+']',val[prop]])
else
arr.push([key,val])}
return arr}
function compare(a,b){return a>b?1:a<b?-1:0}
function generateBase(httpMethod,base_uri,params){var normalized=map(params).map(function(p){return[rfc3986(p[0]),rfc3986(p[1]||'')]}).sort(function(a,b){return compare(a[0],b[0])||compare(a[1],b[1])}).map(function(p){return p.join('=')}).join('&')
var base=[rfc3986(httpMethod?httpMethod.toUpperCase():'GET'),rfc3986(base_uri),rfc3986(normalized)].join('&')
return base}
function hmacsign(httpMethod,base_uri,params,consumer_secret,token_secret){var base=generateBase(httpMethod,base_uri,params)
var key=[consumer_secret||'',token_secret||''].map(rfc3986).join('&')
return sha(key,base,'sha1')}
function hmacsign256(httpMethod,base_uri,params,consumer_secret,token_secret){var base=generateBase(httpMethod,base_uri,params)
var key=[consumer_secret||'',token_secret||''].map(rfc3986).join('&')
return sha(key,base,'sha256')}
function rsasign(httpMethod,base_uri,params,private_key,token_secret){var base=generateBase(httpMethod,base_uri,params)
var key=private_key||''
return rsa(key,base)}
function plaintext(consumer_secret,token_secret){var key=[consumer_secret||'',token_secret||''].map(rfc3986).join('&')
return key}
function sign(signMethod,httpMethod,base_uri,params,consumer_secret,token_secret){var method
var skipArgs=1
switch(signMethod){case 'RSA-SHA1':method=rsasign
break
case 'HMAC-SHA1':method=hmacsign
break
case 'HMAC-SHA256':method=hmacsign256
break
case 'PLAINTEXT':method=plaintext
skipArgs=4
break
default:throw new Error('Signature method not supported: '+signMethod)}
return method.apply(null,[].slice.call(arguments,skipArgs))}
exports.hmacsign=hmacsign
exports.hmacsign256=hmacsign256
exports.rsasign=rsasign
exports.plaintext=plaintext
exports.sign=sign
exports.rfc3986=rfc3986
exports.generateBase=generateBase}),(function(module,exports,__webpack_require__){"use strict";var crypto=__webpack_require__(24)
function randomString(size){var bits=(size+1)*6
var buffer=crypto.randomBytes(Math.ceil(bits/8))
var string=buffer.toString('base64').replace(/\+/g,'-').replace(/\//g,'_').replace(/=/g,'')
return string.slice(0,size)}
function calculatePayloadHash(payload,algorithm,contentType){var hash=crypto.createHash(algorithm)
hash.update('hawk.1.payload\n')
hash.update((contentType?contentType.split(';')[0].trim().toLowerCase():'')+'\n')
hash.update(payload||'')
hash.update('\n')
return hash.digest('base64')}
exports.calculateMac=function(credentials,opts){var normalized='hawk.1.header\n'+
opts.ts+'\n'+
opts.nonce+'\n'+
(opts.method||'').toUpperCase()+'\n'+
opts.resource+'\n'+
opts.host.toLowerCase()+'\n'+
opts.port+'\n'+
(opts.hash||'')+'\n'
if(opts.ext){normalized=normalized+opts.ext.replace('\\','\\\\').replace('\n','\\n')}
normalized=normalized+'\n'
if(opts.app){normalized=normalized+opts.app+'\n'+(opts.dlg||'')+'\n'}
var hmac=crypto.createHmac(credentials.algorithm,credentials.key).update(normalized)
var digest=hmac.digest('base64')
return digest}
exports.header=function(uri,method,opts){var timestamp=opts.timestamp||Math.floor((Date.now()+(opts.localtimeOffsetMsec||0))/1000)
var credentials=opts.credentials
if(!credentials||!credentials.id||!credentials.key||!credentials.algorithm){return ''}
if(['sha1','sha256'].indexOf(credentials.algorithm)===-1){return ''}
var artifacts={ts:timestamp,nonce:opts.nonce||randomString(6),method:method,resource:uri.pathname+(uri.search||''),host:uri.hostname,port:uri.port||(uri.protocol==='http:'?80:443),hash:opts.hash,ext:opts.ext,app:opts.app,dlg:opts.dlg}
if(!artifacts.hash&&(opts.payload||opts.payload==='')){artifacts.hash=calculatePayloadHash(opts.payload,credentials.algorithm,opts.contentType)}
var mac=exports.calculateMac(credentials,artifacts)
var hasExt=artifacts.ext!==null&&artifacts.ext!==undefined&&artifacts.ext!==''
var header='Hawk id="'+credentials.id+
'", ts="'+artifacts.ts+
'", nonce="'+artifacts.nonce+
(artifacts.hash?'", hash="'+artifacts.hash:'')+
(hasExt?'", ext="'+artifacts.ext.replace(/\\/g,'\\\\').replace(/"/g,'\\"'):'')+
'", mac="'+mac+'"'
if(artifacts.app){header=header+', app="'+artifacts.app+(artifacts.dlg?'", dlg="'+artifacts.dlg:'')+'"'}
return header}}),(function(module,exports,__webpack_require__){"use strict";var uuid=__webpack_require__(161)
var CombinedStream=__webpack_require__(913)
var isstream=__webpack_require__(383)
var Buffer=__webpack_require__(4).Buffer
function Multipart(request){this.request=request
this.boundary=uuid()
this.chunked=false
this.body=null}
Multipart.prototype.isChunked=function(options){var self=this
var chunked=false
var parts=options.data||options
if(!parts.forEach){self.request.emit('error',new Error('Argument error, options.multipart.'))}
if(options.chunked!==undefined){chunked=options.chunked}
if(self.request.getHeader('transfer-encoding')==='chunked'){chunked=true}
if(!chunked){parts.forEach(function(part){if(typeof part.body==='undefined'){self.request.emit('error',new Error('Body attribute missing in multipart.'))}
if(isstream(part.body)){chunked=true}})}
return chunked}
Multipart.prototype.setHeaders=function(chunked){var self=this
if(chunked&&!self.request.hasHeader('transfer-encoding')){self.request.setHeader('transfer-encoding','chunked')}
var header=self.request.getHeader('content-type')
if(!header||header.indexOf('multipart')===-1){self.request.setHeader('content-type','multipart/related; boundary='+self.boundary)}else{if(header.indexOf('boundary')!==-1){self.boundary=header.replace(/.*boundary=([^\s;]+).*/,'$1')}else{self.request.setHeader('content-type',header+'; boundary='+self.boundary)}}}
Multipart.prototype.build=function(parts,chunked){var self=this
var body=chunked?new CombinedStream():[]
function add(part){if(typeof part==='number'){part=part.toString()}
return chunked?body.append(part):body.push(Buffer.from(part))}
if(self.request.preambleCRLF){add('\r\n')}
parts.forEach(function(part){var preamble='--'+self.boundary+'\r\n'
Object.keys(part).forEach(function(key){if(key==='body'){return}
preamble+=key+': '+part[key]+'\r\n'})
preamble+='\r\n'
add(preamble)
add(part.body)
add('\r\n')})
add('--'+self.boundary+'--')
if(self.request.postambleCRLF){add('\r\n')}
return body}
Multipart.prototype.onRequest=function(options){var self=this
var chunked=self.isChunked(options)
var parts=options.data||options
self.setHeaders(chunked)
self.chunked=chunked
self.body=self.build(parts,chunked)}
exports.Multipart=Multipart}),(function(module,exports,__webpack_require__){(function(Buffer){var util=__webpack_require__(25);var Stream=__webpack_require__(67).Stream;var DelayedStream=__webpack_require__(914);var defer=__webpack_require__(915);module.exports=CombinedStream;function CombinedStream(){this.writable=false;this.readable=true;this.dataSize=0;this.maxDataSize=2*1024*1024;this.pauseStreams=true;this._released=false;this._streams=[];this._currentStream=null;}
util.inherits(CombinedStream,Stream);CombinedStream.create=function(options){var combinedStream=new this();options=options||{};for(var option in options){combinedStream[option]=options[option];}
return combinedStream;};CombinedStream.isStreamLike=function(stream){return(typeof stream!=='function')&&(typeof stream!=='string')&&(typeof stream!=='boolean')&&(typeof stream!=='number')&&(!Buffer.isBuffer(stream));};CombinedStream.prototype.append=function(stream){var isStreamLike=CombinedStream.isStreamLike(stream);if(isStreamLike){if(!(stream instanceof DelayedStream)){var newStream=DelayedStream.create(stream,{maxDataSize:Infinity,pauseStream:this.pauseStreams,});stream.on('data',this._checkDataSize.bind(this));stream=newStream;}
this._handleErrors(stream);if(this.pauseStreams){stream.pause();}}
this._streams.push(stream);return this;};CombinedStream.prototype.pipe=function(dest,options){Stream.prototype.pipe.call(this,dest,options);this.resume();return dest;};CombinedStream.prototype._getNext=function(){this._currentStream=null;var stream=this._streams.shift();if(typeof stream=='undefined'){this.end();return;}
if(typeof stream!=='function'){this._pipeNext(stream);return;}
var getStream=stream;getStream(function(stream){var isStreamLike=CombinedStream.isStreamLike(stream);if(isStreamLike){stream.on('data',this._checkDataSize.bind(this));this._handleErrors(stream);}
defer(this._pipeNext.bind(this,stream));}.bind(this));};CombinedStream.prototype._pipeNext=function(stream){this._currentStream=stream;var isStreamLike=CombinedStream.isStreamLike(stream);if(isStreamLike){stream.on('end',this._getNext.bind(this));stream.pipe(this,{end:false});return;}
var value=stream;this.write(value);this._getNext();};CombinedStream.prototype._handleErrors=function(stream){var self=this;stream.on('error',function(err){self._emitError(err);});};CombinedStream.prototype.write=function(data){this.emit('data',data);};CombinedStream.prototype.pause=function(){if(!this.pauseStreams){return;}
if(this.pauseStreams&&this._currentStream&&typeof(this._currentStream.pause)=='function')this._currentStream.pause();this.emit('pause');};CombinedStream.prototype.resume=function(){if(!this._released){this._released=true;this.writable=true;this._getNext();}
if(this.pauseStreams&&this._currentStream&&typeof(this._currentStream.resume)=='function')this._currentStream.resume();this.emit('resume');};CombinedStream.prototype.end=function(){this._reset();this.emit('end');};CombinedStream.prototype.destroy=function(){this._reset();this.emit('close');};CombinedStream.prototype._reset=function(){this.writable=false;this._streams=[];this._currentStream=null;};CombinedStream.prototype._checkDataSize=function(){this._updateDataSize();if(this.dataSize<=this.maxDataSize){return;}
var message='DelayedStream#maxDataSize of '+this.maxDataSize+' bytes exceeded.';this._emitError(new Error(message));};CombinedStream.prototype._updateDataSize=function(){this.dataSize=0;var self=this;this._streams.forEach(function(stream){if(!stream.dataSize){return;}
self.dataSize+=stream.dataSize;});if(this._currentStream&&this._currentStream.dataSize){this.dataSize+=this._currentStream.dataSize;}};CombinedStream.prototype._emitError=function(err){this._reset();this.emit('error',err);};}.call(exports,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){var Stream=__webpack_require__(67).Stream;var util=__webpack_require__(25);module.exports=DelayedStream;function DelayedStream(){this.source=null;this.dataSize=0;this.maxDataSize=1024*1024;this.pauseStream=true;this._maxDataSizeExceeded=false;this._released=false;this._bufferedEvents=[];}
util.inherits(DelayedStream,Stream);DelayedStream.create=function(source,options){var delayedStream=new this();options=options||{};for(var option in options){delayedStream[option]=options[option];}
delayedStream.source=source;var realEmit=source.emit;source.emit=function(){delayedStream._handleEmit(arguments);return realEmit.apply(source,arguments);};source.on('error',function(){});if(delayedStream.pauseStream){source.pause();}
return delayedStream;};Object.defineProperty(DelayedStream.prototype,'readable',{configurable:true,enumerable:true,get:function(){return this.source.readable;}});DelayedStream.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments);};DelayedStream.prototype.resume=function(){if(!this._released){this.release();}
this.source.resume();};DelayedStream.prototype.pause=function(){this.source.pause();};DelayedStream.prototype.release=function(){this._released=true;this._bufferedEvents.forEach(function(args){this.emit.apply(this,args);}.bind(this));this._bufferedEvents=[];};DelayedStream.prototype.pipe=function(){var r=Stream.prototype.pipe.apply(this,arguments);this.resume();return r;};DelayedStream.prototype._handleEmit=function(args){if(this._released){this.emit.apply(this,args);return;}
if(args[0]==='data'){this.dataSize+=args[1].length;this._checkIfMaxDataSizeExceeded();}
this._bufferedEvents.push(args);};DelayedStream.prototype._checkIfMaxDataSizeExceeded=function(){if(this._maxDataSizeExceeded){return;}
if(this.dataSize<=this.maxDataSize){return;}
this._maxDataSizeExceeded=true;var message='DelayedStream#maxDataSize of '+this.maxDataSize+' bytes exceeded.'
this.emit('error',new Error(message));};}),(function(module,exports,__webpack_require__){(function(setImmediate,process){module.exports=defer;function defer(fn)
{var nextTick=typeof setImmediate=='function'?setImmediate:(typeof process=='object'&&typeof process.nextTick=='function'?process.nextTick:null);if(nextTick)
{nextTick(fn);}
else
{setTimeout(fn,0);}}}.call(exports,__webpack_require__(163).setImmediate,__webpack_require__(20)))}),(function(module,exports,__webpack_require__){"use strict";var url=__webpack_require__(77)
var isUrl=/^https?:/
function Redirect(request){this.request=request
this.followRedirect=true
this.followRedirects=true
this.followAllRedirects=false
this.followOriginalHttpMethod=false
this.allowRedirect=function(){return true}
this.maxRedirects=10
this.redirects=[]
this.redirectsFollowed=0
this.removeRefererHeader=false}
Redirect.prototype.onRequest=function(options){var self=this
if(options.maxRedirects!==undefined){self.maxRedirects=options.maxRedirects}
if(typeof options.followRedirect==='function'){self.allowRedirect=options.followRedirect}
if(options.followRedirect!==undefined){self.followRedirects=!!options.followRedirect}
if(options.followAllRedirects!==undefined){self.followAllRedirects=options.followAllRedirects}
if(self.followRedirects||self.followAllRedirects){self.redirects=self.redirects||[]}
if(options.removeRefererHeader!==undefined){self.removeRefererHeader=options.removeRefererHeader}
if(options.followOriginalHttpMethod!==undefined){self.followOriginalHttpMethod=options.followOriginalHttpMethod}}
Redirect.prototype.redirectTo=function(response){var self=this
var request=self.request
var redirectTo=null
if(response.statusCode>=300&&response.statusCode<400&&response.caseless.has('location')){var location=response.caseless.get('location')
request.debug('redirect',location)
if(self.followAllRedirects){redirectTo=location}else if(self.followRedirects){switch(request.method){case 'PATCH':case 'PUT':case 'POST':case 'DELETE':break
default:redirectTo=location
break}}}else if(response.statusCode===401){var authHeader=request._auth.onResponse(response)
if(authHeader){request.setHeader('authorization',authHeader)
redirectTo=request.uri}}
return redirectTo}
Redirect.prototype.onResponse=function(response){var self=this
var request=self.request
var redirectTo=self.redirectTo(response)
if(!redirectTo||!self.allowRedirect.call(request,response)){return false}
request.debug('redirect to',redirectTo)
if(response.resume){response.resume()}
if(self.redirectsFollowed>=self.maxRedirects){request.emit('error',new Error('Exceeded maxRedirects. Probably stuck in a redirect loop '+request.uri.href))
return false}
self.redirectsFollowed+=1
if(!isUrl.test(redirectTo)){redirectTo=url.resolve(request.uri.href,redirectTo)}
var uriPrev=request.uri
request.uri=url.parse(redirectTo)
if(request.uri.protocol!==uriPrev.protocol){delete request.agent}
self.redirects.push({statusCode:response.statusCode,redirectUri:redirectTo})
if(self.followAllRedirects&&request.method!=='HEAD'&&response.statusCode!==401&&response.statusCode!==307){request.method=self.followOriginalHttpMethod?request.method:'GET'}
delete request.src
delete request.req
delete request._started
if(response.statusCode!==401&&response.statusCode!==307){delete request.body
delete request._form
if(request.headers){request.removeHeader('host')
request.removeHeader('content-type')
request.removeHeader('content-length')
if(request.uri.hostname!==request.originalHost.split(':')[0]){request.removeHeader('authorization')}}}
if(!self.removeRefererHeader){request.setHeader('referer',uriPrev.href)}
request.emit('redirect')
request.init()
return true}
exports.Redirect=Redirect}),(function(module,exports,__webpack_require__){"use strict";var url=__webpack_require__(77)
var tunnel=__webpack_require__(918)
var defaultProxyHeaderWhiteList=['accept','accept-charset','accept-encoding','accept-language','accept-ranges','cache-control','content-encoding','content-language','content-location','content-md5','content-range','content-type','connection','date','expect','max-forwards','pragma','referer','te','user-agent','via']
var defaultProxyHeaderExclusiveList=['proxy-authorization']
function constructProxyHost(uriObject){var port=uriObject.port
var protocol=uriObject.protocol
var proxyHost=uriObject.hostname+':'
if(port){proxyHost+=port}else if(protocol==='https:'){proxyHost+='443'}else{proxyHost+='80'}
return proxyHost}
function constructProxyHeaderWhiteList(headers,proxyHeaderWhiteList){var whiteList=proxyHeaderWhiteList.reduce(function(set,header){set[header.toLowerCase()]=true
return set},{})
return Object.keys(headers).filter(function(header){return whiteList[header.toLowerCase()]}).reduce(function(set,header){set[header]=headers[header]
return set},{})}
function constructTunnelOptions(request,proxyHeaders){var proxy=request.proxy
var tunnelOptions={proxy:{host:proxy.hostname,port:+proxy.port,proxyAuth:proxy.auth,headers:proxyHeaders},headers:request.headers,ca:request.ca,cert:request.cert,key:request.key,passphrase:request.passphrase,pfx:request.pfx,ciphers:request.ciphers,rejectUnauthorized:request.rejectUnauthorized,secureOptions:request.secureOptions,secureProtocol:request.secureProtocol}
return tunnelOptions}
function constructTunnelFnName(uri,proxy){var uriProtocol=(uri.protocol==='https:'?'https':'http')
var proxyProtocol=(proxy.protocol==='https:'?'Https':'Http')
return[uriProtocol,proxyProtocol].join('Over')}
function getTunnelFn(request){var uri=request.uri
var proxy=request.proxy
var tunnelFnName=constructTunnelFnName(uri,proxy)
return tunnel[tunnelFnName]}
function Tunnel(request){this.request=request
this.proxyHeaderWhiteList=defaultProxyHeaderWhiteList
this.proxyHeaderExclusiveList=[]
if(typeof request.tunnel!=='undefined'){this.tunnelOverride=request.tunnel}}
Tunnel.prototype.isEnabled=function(){var self=this
var request=self.request
if(typeof self.tunnelOverride!=='undefined'){return self.tunnelOverride}
if(request.uri.protocol==='https:'){return true}
return false}
Tunnel.prototype.setup=function(options){var self=this
var request=self.request
options=options||{}
if(typeof request.proxy==='string'){request.proxy=url.parse(request.proxy)}
if(!request.proxy||!request.tunnel){return false}
if(options.proxyHeaderWhiteList){self.proxyHeaderWhiteList=options.proxyHeaderWhiteList}
if(options.proxyHeaderExclusiveList){self.proxyHeaderExclusiveList=options.proxyHeaderExclusiveList}
var proxyHeaderExclusiveList=self.proxyHeaderExclusiveList.concat(defaultProxyHeaderExclusiveList)
var proxyHeaderWhiteList=self.proxyHeaderWhiteList.concat(proxyHeaderExclusiveList)
var proxyHeaders=constructProxyHeaderWhiteList(request.headers,proxyHeaderWhiteList)
proxyHeaders.host=constructProxyHost(request.uri)
proxyHeaderExclusiveList.forEach(request.removeHeader,request)
var tunnelFn=getTunnelFn(request)
var tunnelOptions=constructTunnelOptions(request,proxyHeaders)
request.agent=tunnelFn(tunnelOptions)
return true}
Tunnel.defaultProxyHeaderWhiteList=defaultProxyHeaderWhiteList
Tunnel.defaultProxyHeaderExclusiveList=defaultProxyHeaderExclusiveList
exports.Tunnel=Tunnel}),(function(module,exports,__webpack_require__){"use strict";(function(process){var net=__webpack_require__(62),tls=__webpack_require__(62),http=__webpack_require__(133),https=__webpack_require__(238),events=__webpack_require__(104),assert=__webpack_require__(71),util=__webpack_require__(25),Buffer=__webpack_require__(4).Buffer;exports.httpOverHttp=httpOverHttp
exports.httpsOverHttp=httpsOverHttp
exports.httpOverHttps=httpOverHttps
exports.httpsOverHttps=httpsOverHttps
function httpOverHttp(options){var agent=new TunnelingAgent(options)
agent.request=http.request
return agent}
function httpsOverHttp(options){var agent=new TunnelingAgent(options)
agent.request=http.request
agent.createSocket=createSecureSocket
agent.defaultPort=443
return agent}
function httpOverHttps(options){var agent=new TunnelingAgent(options)
agent.request=https.request
return agent}
function httpsOverHttps(options){var agent=new TunnelingAgent(options)
agent.request=https.request
agent.createSocket=createSecureSocket
agent.defaultPort=443
return agent}
function TunnelingAgent(options){var self=this
self.options=options||{}
self.proxyOptions=self.options.proxy||{}
self.maxSockets=self.options.maxSockets||http.Agent.defaultMaxSockets
self.requests=[]
self.sockets=[]
self.on('free',function onFree(socket,host,port){for(var i=0,len=self.requests.length;i<len;++i){var pending=self.requests[i]
if(pending.host===host&&pending.port===port){self.requests.splice(i,1)
pending.request.onSocket(socket)
return}}
socket.destroy()
self.removeSocket(socket)})}
util.inherits(TunnelingAgent,events.EventEmitter)
TunnelingAgent.prototype.addRequest=function addRequest(req,options){var self=this
if(typeof options==='string'){options={host:options,port:arguments[2],path:arguments[3]};}
if(self.sockets.length>=this.maxSockets){self.requests.push({host:options.host,port:options.port,request:req})
return}
self.createConnection({host:options.host,port:options.port,request:req})}
TunnelingAgent.prototype.createConnection=function createConnection(pending){var self=this
self.createSocket(pending,function(socket){socket.on('free',onFree)
socket.on('close',onCloseOrRemove)
socket.on('agentRemove',onCloseOrRemove)
pending.request.onSocket(socket)
function onFree(){self.emit('free',socket,pending.host,pending.port)}
function onCloseOrRemove(err){self.removeSocket(socket)
socket.removeListener('free',onFree)
socket.removeListener('close',onCloseOrRemove)
socket.removeListener('agentRemove',onCloseOrRemove)}})}
TunnelingAgent.prototype.createSocket=function createSocket(options,cb){var self=this
var placeholder={}
self.sockets.push(placeholder)
var connectOptions=mergeOptions({},self.proxyOptions,{method:'CONNECT',path:options.host+':'+options.port,agent:false})
if(connectOptions.proxyAuth){connectOptions.headers=connectOptions.headers||{}
connectOptions.headers['Proxy-Authorization']='Basic '+
Buffer.from(connectOptions.proxyAuth).toString('base64')}
debug('making CONNECT request')
var connectReq=self.request(connectOptions)
connectReq.useChunkedEncodingByDefault=false
connectReq.once('response',onResponse)
connectReq.once('upgrade',onUpgrade)
connectReq.once('connect',onConnect)
connectReq.once('error',onError)
connectReq.end()
function onResponse(res){res.upgrade=true}
function onUpgrade(res,socket,head){process.nextTick(function(){onConnect(res,socket,head)})}
function onConnect(res,socket,head){connectReq.removeAllListeners()
socket.removeAllListeners()
if(res.statusCode===200){assert.equal(head.length,0)
debug('tunneling connection has established')
self.sockets[self.sockets.indexOf(placeholder)]=socket
cb(socket)}else{debug('tunneling socket could not be established, statusCode=%d',res.statusCode)
var error=new Error('tunneling socket could not be established, '+'statusCode='+res.statusCode)
error.code='ECONNRESET'
options.request.emit('error',error)
self.removeSocket(placeholder)}}
function onError(cause){connectReq.removeAllListeners()
debug('tunneling socket could not be established, cause=%s\n',cause.message,cause.stack)
var error=new Error('tunneling socket could not be established, '+'cause='+cause.message)
error.code='ECONNRESET'
options.request.emit('error',error)
self.removeSocket(placeholder)}}
TunnelingAgent.prototype.removeSocket=function removeSocket(socket){var pos=this.sockets.indexOf(socket)
if(pos===-1)return
this.sockets.splice(pos,1)
var pending=this.requests.shift()
if(pending){this.createConnection(pending)}}
function createSecureSocket(options,cb){var self=this
TunnelingAgent.prototype.createSocket.call(self,options,function(socket){var secureSocket=tls.connect(0,mergeOptions({},self.options,{servername:options.host,socket:socket}))
self.sockets[self.sockets.indexOf(socket)]=secureSocket
cb(secureSocket)})}
function mergeOptions(target){for(var i=1,len=arguments.length;i<len;++i){var overrides=arguments[i]
if(typeof overrides==='object'){var keys=Object.keys(overrides)
for(var j=0,keyLen=keys.length;j<keyLen;++j){var k=keys[j]
if(overrides[k]!==undefined){target[k]=overrides[k]}}}}
return target}
var debug
if(Object({"MINING_POOL_STATUS":undefined}).NODE_DEBUG&&/\btunnel\b/.test(Object({"MINING_POOL_STATUS":undefined}).NODE_DEBUG)){debug=function(){var args=Array.prototype.slice.call(arguments)
if(typeof args[0]==='string'){args[0]='TUNNEL: '+args[0]}else{args.unshift('TUNNEL:')}
console.error.apply(console,args)}}else{debug=function(){}}
exports.debug=debug}.call(exports,__webpack_require__(20)))}),(function(module,exports,__webpack_require__){(function(process){(function(){var getNanoSeconds,hrtime,loadTime,moduleLoadTime,nodeLoadTime,upTime;if((typeof performance!=="undefined"&&performance!==null)&&performance.now){module.exports=function(){return performance.now();};}else if((typeof process!=="undefined"&&process!==null)&&process.hrtime){module.exports=function(){return(getNanoSeconds()-nodeLoadTime)/1e6;};hrtime=process.hrtime;getNanoSeconds=function(){var hr;hr=hrtime();return hr[0]*1e9+hr[1];};moduleLoadTime=getNanoSeconds();upTime=process.uptime()*1e9;nodeLoadTime=moduleLoadTime-upTime;}else if(Date.now){module.exports=function(){return Date.now()-loadTime;};loadTime=Date.now();}else{module.exports=function(){return new Date().getTime()-loadTime;};loadTime=new Date().getTime();}}).call(this);}.call(exports,__webpack_require__(20)))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__types_Node_Consensus_Type__=__webpack_require__(44);class NodesListObject{constructor(socket,connectionType,nodeType,nodeConsensusType,isFallback){this.socket=socket;this.connectionType=connectionType;this.nodeType=nodeType;this.nodeConsensusType=nodeConsensusType||__WEBPACK_IMPORTED_MODULE_0__types_Node_Consensus_Type__["a"].NODE_CONSENSUS_PEER;this.date=new Date().getTime();this.isFallback=isFallback;}
toJSON(){return{a:this.socket.node.sckAddress.getAddress(true,true),t:this.nodeType,c:true,}}}
__webpack_exports__["a"]=(NodesListObject);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1__Download_Helper__=__webpack_require__(359);class DownloadManager{constructor(){this.array=[];}
async downloadFile(address,timeout){for(let key in this.array)
if(key===address){return this.array[key];}
let answer=await __WEBPACK_IMPORTED_MODULE_1__Download_Helper__["a"].downloadFile(address,timeout);this.array[address]=answer;}}
__webpack_exports__["a"]=(new DownloadManager());}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_mini_blockchain_blockchain_Mini_Blockchain_Advanced__=__webpack_require__(396);var __WEBPACK_IMPORTED_MODULE_1_common_blockchain_mini_blockchain_blockchain_Mini_Blockchain_Light__=__webpack_require__(972);let inheritedBlockchain;if(true)inheritedBlockchain=__WEBPACK_IMPORTED_MODULE_1_common_blockchain_mini_blockchain_blockchain_Mini_Blockchain_Light__["a"];else
inheritedBlockchain=MiniBlockchainAdvanced;class MainBlockchain extends inheritedBlockchain{}
__webpack_exports__["a"]=(MainBlockchain);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_blockchain_Interface_Blockchain__=__webpack_require__(398);var __WEBPACK_IMPORTED_MODULE_1__prover_PPoW_Blockchain_Prover__=__webpack_require__(957);var __WEBPACK_IMPORTED_MODULE_2__verifier_PPoW_Blockchain_Verifier__=__webpack_require__(960);class PPoWBlockchain extends __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_blockchain_Interface_Blockchain__["a"]{constructor(agent){super(agent);this.prover=new __WEBPACK_IMPORTED_MODULE_1__prover_PPoW_Blockchain_Prover__["a"](this,);this.verifier=new __WEBPACK_IMPORTED_MODULE_2__verifier_PPoW_Blockchain_Verifier__["a"](this,);}
async _blockIncluded(block){await block.updateInterlink();this.prover.provesCalculated.updateBlock(block);block._provesClculatedInserted=true;if(!this.agent.light)
if(!block.blockValidation.blockValidationType["skip-calculating-proofs"]){await this.prover.createProofs();}}
async _loadBlockchain(){let oldProofActivated=this.prover.proofActivated;this.prover.proofActivated=false;let answer=false;try{answer=await __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_blockchain_Interface_Blockchain__["a"].prototype._loadBlockchain.apply(this,arguments);}catch(exception){console.error("loadBlockchain raised an error",exception);}
this.prover.proofActivated=oldProofActivated;await this.prover.createProofs();return answer;}}
__webpack_exports__["a"]=(PPoWBlockchain);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1_common_blockchain_global_Blockchain_Genesis__=__webpack_require__(16);let BigNumber=__webpack_require__(84);class BlockchainDifficulty{static async getDifficulty(getDifficultyCallback,getTimeStampCallback,blockTimestamp,blockNumber){if(typeof blockNumber!=="number")
throw{message:"invalid block number"};if(blockNumber<=__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.DIFFICULTY_REMOVED_CONDITION){let diff=blockTimestamp-await getTimeStampCallback(blockNumber-1);if(blockNumber>__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.DIFFICULTY_TIME_BIGGER&&(Math.abs(diff)<=__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.DIFFICULTY.TIME_PER_BLOCK/2))
throw{message:"Blocks generated too fast"};}
let prevBlockDifficulty=await getDifficultyCallback(blockNumber-1,true);if(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].DEBUG)
console.log("prevBlockDifficulty",blockNumber-1,__WEBPACK_IMPORTED_MODULE_1_common_blockchain_global_Blockchain_Genesis__["a"].isPoSActivated(blockNumber-1)?"POS":"POW",prevBlockDifficulty.toString("hex"));if(Buffer.isBuffer(prevBlockDifficulty))prevBlockDifficulty=new BigNumber("0x"+prevBlockDifficulty.toString("hex"));else
if(typeof prevBlockDifficulty==="string")prevBlockDifficulty=new BigNumber(prevBlockDifficulty);if((blockNumber+1)%__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.DIFFICULTY.NO_BLOCKS!==0)
return prevBlockDifficulty;let difficulty,callback;if(__WEBPACK_IMPORTED_MODULE_1_common_blockchain_global_Blockchain_Genesis__["a"].isPoSActivated(blockNumber))
callback=this.getDifficultyMeanPOS;else
callback=this.getDifficultyMeanPOW;difficulty=await callback(prevBlockDifficulty,getTimeStampCallback,blockTimestamp,blockNumber);if(difficulty.isGreaterThan(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.BLOCKS_MAX_TARGET))difficulty=__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.BLOCKS_MAX_TARGET;if(difficulty.isLessThan(1))difficulty=new BigNumber(1);return difficulty;}
static async getDifficultyMeanPOW(prevBlockDifficulty,getTimeStampCallback,blockTimestamp,blockNumber){let how_much_it_took_to_mine_X_Blocks=0;let firstBlock=(blockNumber+1)-__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.DIFFICULTY.NO_BLOCKS;if(blockNumber>=__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.POS_ACTIVATION&&(blockNumber+1)%30===0)
firstBlock+=1;for(let i=firstBlock;i<blockNumber;i++){how_much_it_took_to_mine_X_Blocks+=await getTimeStampCallback(i)-await getTimeStampCallback(i-1);}
how_much_it_took_to_mine_X_Blocks+=blockTimestamp-await getTimeStampCallback(blockNumber-1);let how_much_it_should_have_taken_X_Blocks=(blockNumber-firstBlock+1)*__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.DIFFICULTY.TIME_PER_BLOCK;if(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].DEBUG){console.log("block ",blockNumber," timestamp ",blockTimestamp," time ",blockTimestamp-await getTimeStampCallback(blockNumber-1));console.log("how_much_it_took_to_mine_X_Blocks ",how_much_it_took_to_mine_X_Blocks);}
if(blockNumber<=__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.DIFFICULTY_REMOVED_CONDITION&&blockNumber<__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.POS_ACTIVATION){if(how_much_it_took_to_mine_X_Blocks<=(blockNumber<=__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.DIFFICULTY_TIME_BIGGER?__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.DIFFICULTY.TIME_PER_BLOCK:5*__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.DIFFICULTY.TIME_PER_BLOCK))
throw{message:"how_much_it_took_to_mine_X_Blocks less than consts.BLOCKCHAIN.DIFFICULTY.TIME_PER_BLOCK",how_much_it_took_to_mine_X_Blocks:how_much_it_took_to_mine_X_Blocks};}
let ratio=new BigNumber(how_much_it_took_to_mine_X_Blocks).dividedBy(how_much_it_should_have_taken_X_Blocks);ratio=ratio.decimalPlaces(8);let min=blockNumber<=__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.DIFFICULTY_TIME_BIGGER?8:blockNumber<=__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.DIFFICULTY_REMOVED_CONDITION?2.3:2;let max=blockNumber<=__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.DIFFICULTY_TIME_BIGGER?0.05:blockNumber<=__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.DIFFICULTY_REMOVED_CONDITION?0.15:0.4;ratio=BigNumber.minimum(ratio,min);ratio=BigNumber.maximum(ratio,max);if(Math.random()<0.1)
console.warn(how_much_it_should_have_taken_X_Blocks,"/",how_much_it_took_to_mine_X_Blocks);let newBlockDifficulty=prevBlockDifficulty.multipliedBy(ratio);newBlockDifficulty=newBlockDifficulty.decimalPlaces(0);return newBlockDifficulty;}
static async getDifficultyMeanPOS(prevBlockDifficulty,getTimeStampCallback,blockTimestamp,blockNumber){let how_much_it_took_to_mine_X_Blocks=0;let firstBlock=(blockNumber+1)-__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.DIFFICULTY.NO_BLOCKS;if((blockNumber+1)%30===10)
firstBlock+=1;for(let i=firstBlock;i<blockNumber;i++){how_much_it_took_to_mine_X_Blocks+=await getTimeStampCallback(i)-await getTimeStampCallback(i-1);}
how_much_it_took_to_mine_X_Blocks+=blockTimestamp-await getTimeStampCallback(blockNumber-1);let how_much_it_should_have_taken_X_Blocks=(blockNumber-firstBlock+1)*__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.DIFFICULTY.TIME_PER_BLOCK;let ratio=new BigNumber(how_much_it_took_to_mine_X_Blocks).dividedBy(how_much_it_should_have_taken_X_Blocks);let min=2;let max=0.5;ratio=BigNumber.minimum(ratio,min);ratio=BigNumber.maximum(ratio,max);if(Math.random()<0.1)
console.warn(how_much_it_should_have_taken_X_Blocks,"/",how_much_it_took_to_mine_X_Blocks);let newBlockDifficulty=prevBlockDifficulty.multipliedBy(ratio);newBlockDifficulty=newBlockDifficulty.decimalPlaces(0);return newBlockDifficulty}}
__webpack_exports__["a"]=(BlockchainDifficulty);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Block_Creator__=__webpack_require__(249);var __WEBPACK_IMPORTED_MODULE_1_common_satoshmindb_Interface_SatoshminDB__=__webpack_require__(69);var __WEBPACK_IMPORTED_MODULE_2_common_blockchain_interface_blockchain_transactions_Interface_Blockchain_Transactions__=__webpack_require__(399);var __WEBPACK_IMPORTED_MODULE_3_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Block_Data__=__webpack_require__(252);var __WEBPACK_IMPORTED_MODULE_4_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Block__=__webpack_require__(107);var __WEBPACK_IMPORTED_MODULE_5_common_utils_Semaphore_Processing__=__webpack_require__(403);var __WEBPACK_IMPORTED_MODULE_6_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Blocks__=__webpack_require__(404);var __WEBPACK_IMPORTED_MODULE_7__forks_Interface_Blockchain_Forks_Administrator__=__webpack_require__(946);var __WEBPACK_IMPORTED_MODULE_8_common_blockchain_interface_blockchain_timestmap_Blockchain_Timestamp__=__webpack_require__(405);var __WEBPACK_IMPORTED_MODULE_9__tips_Interface_Blockchain_Tips_Administrator__=__webpack_require__(952);var __WEBPACK_IMPORTED_MODULE_10_common_events_Status_Events__=__webpack_require__(12);var __WEBPACK_IMPORTED_MODULE_11_consts_const_global__=__webpack_require__(2);class InterfaceBlockchainBasic{constructor(agent){this._blockchainLoaded=false;this.agent=agent;this._blockchainFileName=__WEBPACK_IMPORTED_MODULE_11_consts_const_global__["a"].DATABASE_NAMES.BLOCKCHAIN_DATABASE.FILE_NAME;this.db=new __WEBPACK_IMPORTED_MODULE_1_common_satoshmindb_Interface_SatoshminDB__["a"](__WEBPACK_IMPORTED_MODULE_11_consts_const_global__["a"].DATABASE_NAMES.BLOCKCHAIN_DATABASE.FOLDER);this.mining=undefined;this.forksAdministrator=new __WEBPACK_IMPORTED_MODULE_7__forks_Interface_Blockchain_Forks_Administrator__["a"](this);this.tipsAdministrator=new __WEBPACK_IMPORTED_MODULE_9__tips_Interface_Blockchain_Tips_Administrator__["a"](this);this.timestamp=new __WEBPACK_IMPORTED_MODULE_8_common_blockchain_interface_blockchain_timestmap_Blockchain_Timestamp__["a"]();this._createBlockchainElements();this.semaphoreProcessing=new __WEBPACK_IMPORTED_MODULE_5_common_utils_Semaphore_Processing__["a"]();}
_setAgent(newAgent){this.agent=newAgent;}
_createBlockchainElements(){this.blocks=new __WEBPACK_IMPORTED_MODULE_6_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Blocks__["a"](this,this.db);this.transactions=new __WEBPACK_IMPORTED_MODULE_2_common_blockchain_interface_blockchain_transactions_Interface_Blockchain_Transactions__["a"](this);this.blockCreator=new __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Block_Creator__["a"](this,this.db,__WEBPACK_IMPORTED_MODULE_4_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Block__["a"],__WEBPACK_IMPORTED_MODULE_3_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Block_Data__["a"]);}
async loadBlockchain(){if(this._blockchainLoaded)return true;if(!this.agent.consensus)return true;__WEBPACK_IMPORTED_MODULE_10_common_events_Status_Events__["a"].emit('blockchain/status',{message:"Blockchain Loading"});let loaded=await this._loadBlockchain();__WEBPACK_IMPORTED_MODULE_10_common_events_Status_Events__["a"].emit('blockchain/status',{message:"Blockchain Loaded Successfully"});return loaded;}
async _loadBlockchain(){return true;}
toString(){}
toJSON(){}
sleep(ms){return new Promise(resolve=>setTimeout(resolve,ms));}}
__webpack_exports__["a"]=(InterfaceBlockchainBasic);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1__protocol_Transactions_Protocol__=__webpack_require__(927);var __WEBPACK_IMPORTED_MODULE_2__Transactions_Pending_Queue_Saving_Manager__=__webpack_require__(929);var __WEBPACK_IMPORTED_MODULE_3_common_events_Status_Events__=__webpack_require__(12);var __WEBPACK_IMPORTED_MODULE_4_node_lists_Nodes_List__=__webpack_require__(6);class TransactionsPendingQueue{constructor(transactions,blockchain,db){this.transactionsProtocol=new __WEBPACK_IMPORTED_MODULE_1__protocol_Transactions_Protocol__["a"](blockchain);this.transactions=transactions;this.pendingQueueSavingManager=new __WEBPACK_IMPORTED_MODULE_2__Transactions_Pending_Queue_Saving_Manager__["a"](blockchain,this,db);this.blockchain=blockchain;this.listObject={};this.listArray=[];this.db=db;__WEBPACK_IMPORTED_MODULE_3_common_events_Status_Events__["a"].on("blockchain/blocks-count-changed",async(data)=>{if(__WEBPACK_IMPORTED_MODULE_4_node_lists_Nodes_List__["a"].isConsensus(this.blockchain.blocks.length))
await this._removeOldTransactions();});}
_addNewTransaction(index,transaction){let foundMissingNonce=this.transactionsProtocol.transactionsDownloadingManager.findMissingNonce(transaction.from.addresses[0].unencodedAddress,transaction.nonce);if(foundMissingNonce)
this.transactionsProtocol.transactionsDownloadingManager.removeMissingNonceList(transaction.from.addresses[0].unencodedAddress,transaction.nonce);if(index===undefined)
this.listArray.push(transaction);else
this.listArray.splice(index,0,transaction);let txId=transaction.txId.toString('hex');this.listObject[txId]=transaction;this.listObject[txId].alreadyBroadcasted=false;}
async includePendingTransaction(transaction,exceptSockets,avoidValidation=false){if(this.findPendingTransaction(transaction.txId))
return false;let blockValidationType={"take-transactions-list-in-consideration":{validation:true}};if(!avoidValidation)
if(!transaction.validateTransactionOnce(undefined,blockValidationType))
return false;await this._insertPendingTransaction(transaction,exceptSockets);return true;}
analyseMissingNonce(i){let alreadyPropagated=0;if(this.transactionsProtocol.transactionsDownloadingManager._transactionsQueueLength<10)
if(this.listArray[i+1])
if(this.listArray[i+1].nonce-this.listArray[i].nonce>1)
for(let j=this.listArray[i].nonce+1;j<this.listArray[i+1].nonce;j++)
if(this.listArray[j]&&this.listArray[j].from.addresses[0].unencodedAddress.compare(this.listArray[i].from.addresses[0].unencodedAddress)===0&&alreadyPropagated<=5){this.propagateMissingNonce(this.listArray[i].from.addresses[0].unencodedAddress,j);alreadyPropagated++;}}
async _insertPendingTransaction(transaction,exceptSockets){try{if(await this.blockchain.mining.miningTransactionSelector.validateTransaction(transaction)===false)
throw{message:"Transsaction validation failed"}
if(this.blockchain.agent.light)
if(transaction.timeLock<this.blockchain.blocks.length-1)
throw{message:"transaction is too old"};let inserted=false;for(let i=0;i<this.listArray.length;i++){let compare=transaction.from.addresses[0].unencodedAddress.compare(this.listArray[i].from.addresses[0].unencodedAddress);if(compare<0)
continue;else if(compare===0){if(transaction.nonce===this.listArray[i].nonce){inserted=true;break;}else if(transaction.nonce<this.listArray[i].nonce){this._addNewTransaction(i,transaction);inserted=true;i++;}}else if(compare>0){this._addNewTransaction(i,transaction);inserted=true;i++;this.propagateTransaction(this.listObject[transaction.txId.toString("hex")],exceptSockets);}
if(inserted){if(this.listArray[i].from.addresses[0].unencodedAddress.compare(this.listArray[i-1].from.addresses[0].unencodedAddress)===0)
if(this.listArray[i].nonce-this.listArray[i-1].nonce===1){this.propagateTransaction(this.listObject[transaction.txId.toString("hex")],exceptSockets);for(let j=this.listArray[i].nonce;j<this.listArray.length-1;j++)
if(this.listArray[j+1].from.addresses[0].unencodedAddress.compare(this.listArray[j].from.addresses[0].unencodedAddress)===0){if(this.listArray[j+1].nonce-this.listArray[j].nonce===1)
this.propagateTransaction(this.listObject[transaction.txId.toString("hex")],exceptSockets);else
this.analyseMissingNonce(j);}else
break;}else
this.analyseMissingNonce(i-1>=0?i-1:i);break;}}
if(!inserted){this._addNewTransaction(undefined,transaction);this.propagateTransaction(this.listObject[transaction.txId.toString("hex")],exceptSockets);}
transaction.confirmed=false;transaction.pendingDateBlockHeight=this.blockchain.blocks.length-1;await this.transactions.emitTransactionChangeEvent(transaction,true);}catch(e){console.error("insertPendingTransaction - ",e)}}
findPendingTransaction(txId){return this.listObject[txId.toString('hex')]}
findPendingTransactionByAddressAndNonce(address,searchedNonce){if(this.blockchain.accountantTree.getAccountNonce(address)+__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].SPAM_GUARDIAN.TRANSACTIONS.MAXIMUM_MISSING_NONCE_SEARCH>searchedNonce)
return false;let selected=undefined,Left=0,Right=this.listArray.length,compare=undefined;if(this.listArray.length){let selectedTwice=false;let searchedNonceIsSmaller;while(Left<=Right){selected=Math.floor((Left+Right)/2);if(selected!==this.listArray.length)
compare=this.listArray[selected].from.addresses[0].unencodedAddress.compare(address);else
return false;if(selectedTwice!==selected)selectedTwice=selected;else{console.warn("missing nonce - not found address in binary search",address);return false;}
if(compare===0)break;if(compare>0)
Left=selected+1;else
if(compare<0)
Right=selected-1;}
if(selected===0)
if(this.listArray[selected].from.addresses[0].unencodedAddress.compare(address)!==0)
return false;let closerSelected=undefined;if(this.listArray[selected].nonce>searchedNonce)
closerSelected=selected-(this.listArray[selected].nonce-searchedNonce);else
closerSelected=selected+(searchedNonce-this.listArray[selected].nonce);if(this.listArray[closerSelected]&&this.listArray[closerSelected].from.addresses[0].unencodedAddress.compare(address)===0);selected=closerSelected;if(this.listArray[selected]&&this.listArray[selected].nonce===searchedNonce)
return this.listArray[selected].txId;else
searchedNonceIsSmaller=this.listArray[selected].nonce>searchedNonce?true:false;let stop=false;for(let i=selected;!stop;searchedNonceIsSmaller?i--:i++){if(searchedNonceIsSmaller){if(i<0)return false;}
else if(!searchedNonceIsSmaller){if(i>=this.listArray.length)return false;}
if(this.listArray[i].from.addresses[0].unencodedAddress.compare(address)===0){if(this.listArray[i].nonce===searchedNonce){return this.listArray[i].txId;}
else
if(searchedNonceIsSmaller)continue;else if(this.listArray[i].nonce>searchedNonce)break;}else
return false;}}
return false;}
async removePendingTransaction(transaction,index){if(typeof index!=="number")
for(let i=0;i<this.listArray.length;i++)
if(this.listArray[i].txId.equals(transaction.txId)){index=i;break;}
if(this.listObject[transaction.txId.toString('hex')]){delete this.listObject[transaction.txId.toString('hex')];this.listArray.splice(index,1);await this.transactions.emitTransactionChangeEvent(transaction,true,true);}}
async _removeOldTransactions(){for(let i=this.listArray.length-1;i>=0;i--){let tx=this.listArray[i];let removeThis=false;try{if(!tx.blockchain){console.log(tx.txId.toString('hex'),"don't has blockchain");removeThis=true;}
else
if(tx.from.addresses[0].unencodedAddress.equals(this.blockchain.mining.unencodedMinerAddress)&&await this.blockchain.mining.miningTransactionSelector.validateTransactionId(tx.txId)){console.log(tx.txId.toString('hex'),"is mine");continue;}
else
if(this.blockchain.agent.light&&tx.timeLock<this.blockchain.blocks.length-1){console.log(tx.txId.toString('hex'),"browser remove");removeThis=true;}
else
if(await this.blockchain.mining.miningTransactionSelector.validateTransaction(tx)===false){console.log(tx.txId.toString('hex'),"not valid anymore");removeThis=true;}}catch(exception){console.log(tx.txId.toString('hex'),"exception remove",exception);if(exception.myNonce)
if(Math.abs(exception.myNonce-exception.nonce)<__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].SPAM_GUARDIAN.MAXIMUM_DIFF_NONCE_ACCEPTED_FOR_QUEUE)
if(!removeThis)
continue;removeThis=true;}
if(removeThis)
await this.removePendingTransaction(tx,i);else
console.log(tx.txId.toString('hex'),"------- GOOD tx");}
console.warn("Transactions stack -",this.listArray.length,"after removing old");}
propagateTransaction(transaction,exceptSocket){if(this.listObject[transaction.txId.toString("hex")].alreadyBroadcasted)
return false;else{this.listObject[transaction.txId.toString("hex")].alreadyBroadcasted=true;this.transactionsProtocol.propagateNewPendingTransaction(transaction,exceptSocket);}}
propagateMissingNonce(addressBuffer,nonce){if(nonce>this.blockchain.accountantTree.getAccountNonce(addressBuffer)){let found=this.transactionsProtocol.transactionsDownloadingManager.findMissingNonce(addressBuffer,nonce);if(found)return;this.transactionsProtocol.propagateNewMissingNonce(addressBuffer,nonce);this.transactionsProtocol.transactionsDownloadingManager.addMissingNonceList(addressBuffer,nonce);}}}
__webpack_exports__["a"]=(TransactionsPendingQueue);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_sockets_protocol_extend_socket_Node_Protocol__=__webpack_require__(141);var __WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_2_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_3_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__=__webpack_require__(12);var __WEBPACK_IMPORTED_MODULE_5_node_lists_types_Connection_Type__=__webpack_require__(47);var __WEBPACK_IMPORTED_MODULE_6__Transactions_Download_Manager__=__webpack_require__(928);var __WEBPACK_IMPORTED_MODULE_7_common_crypto_WebDollar_Crypto__=__webpack_require__(28);class InterfaceBlockchainTransactionsProtocol{constructor(blockchain){this.blockchain=blockchain;this.transactionsDownloadingManager=new __WEBPACK_IMPORTED_MODULE_6__Transactions_Download_Manager__["a"](blockchain,this);__WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__["a"].emitter.on("nodes-list/connected",(result)=>this._newSocketCreateProtocol(result));__WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__["a"].on('blockchain/status',async(data)=>{if(data.message==="Blockchain Ready to Mine")
for(let i=0;i<__WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__["a"].nodes.length;i++)
if(__WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__["a"].nodes[i]&&__WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__["a"].nodes[i].socket&&!__WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__["a"].nodes[i].socket.node.protocol.transactionsInitializedProtocol)
this._initializeSocket(__WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__["a"].nodes[i].socket)});}
_newSocketCreateProtocol(nodesListObject){if(__WEBPACK_IMPORTED_MODULE_3_main_blockchain_Blockchain__["a"].loaded)
this._initializeSocket(nodesListObject.socket)}
_initializeSocket(socket){if(socket.node.protocol.transactionsInitializedProtocol)return;socket.node.protocol.transactionsInitializedProtocol=true;this.transactionsDownloadingManager.addSocket(socket);this.initializeTransactionsPropagation(socket);}
initializeTransactionsPropagation(socket){socket.node.on("transactions/missing-nonce",async(response)=>{if(__WEBPACK_IMPORTED_MODULE_3_main_blockchain_Blockchain__["a"].MinerPoolManagement.minerPoolStarted)return;let transaction;if(!response||typeof response!=="object")throw{message:"missing-nonce invalid response"}
if(!Buffer.isBuffer(response.buffer))throw{message:"missing-nonce - address buffer is invalid",response};if(typeof response.nonce!=="number")throw{message:"missing-nonce - nonce is not a number",response};if(response.nonce>this.blockchain.accountantTree.getAccountNonce(response.buffer)){transaction=this.blockchain.transactions.pendingQueue.findPendingTransactionByAddressAndNonce(response.buffer,response.nonce);if(transaction){console.warn("Sending missing nonce",transaction);socket.node.sendRequest('transactions/missing-nonce/answer',{result:transaction?true:false,transaction:transaction});}}});socket.node.on("transactions/missing-nonce/answer",async(response)=>{if(__WEBPACK_IMPORTED_MODULE_3_main_blockchain_Blockchain__["a"].MinerPoolManagement.minerPoolStarted)return;if(!response.result)throw{message:"missing-nonce - Response is false"};await this.transactionsDownloadingManager.addTransaction(socket,response.transaction,true);});socket.node.on("transactions/new-pending-transaction",async(response)=>{try{if(!Buffer.isBuffer(response.buffer))throw{message:"Transaction Id is invalid"};await this.transactionsDownloadingManager._createTransaction(response.buffer,socket);}catch(exception){if(__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].DEBUG)
console.error("Transaction is wrong. It should ban the user",exception);}});socket.node.on("transactions/new-pending-transaction-id",async(data)=>{if(!Buffer.isBuffer(data.txId))throw{message:"Transaction buffer is invalid"};await this.transactionsDownloadingManager.addTransaction(socket,data.txId);});socket.node.on("transactions/get-pending-transactions-ids",async(response)=>{if(!response)return false;if(response.format!=="json")response.format="buffer";if(typeof response.start!=="number")response.start=0;if(typeof response.count!=="number")response.count=0;response.count=Math.max(10,response.count);response.count=Math.min(40,response.count);let list=[];let length=Math.min(response.start+response.count,this.blockchain.transactions.pendingQueue.listArray.length);await this.blockchain.sleep(20);for(let i=response.start;i<length;i++){if(response.format==="json")list.push(this.blockchain.transactions.pendingQueue.listArray[i].txId.toString("hex"));else
if(response.format==="buffer")list.push(this.blockchain.transactions.pendingQueue.listArray[i].txId);if(i%20===0)
await this.blockchain.sleep(20);}
socket.node.sendRequest('transactions/get-pending-transactions-ids/answer',{result:true,format:response.format,transactions:list,next:response.start+response.count,length:this.blockchain.transactions.pendingQueue.listArray.length});});socket.node.on("transactions/get-pending-transactions-by-ids",async(response)=>{if(!response)return false;if(response.format!=="json")response.format="buffer";if(!response.ids||!Array.isArray(response.ids))return false;let list=[];await this.blockchain.sleep(20);for(let i=0;i<response.ids.length;i++){if(response.ids[i].length!==__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].BLOCKCHAIN.BLOCKS_POW_LENGTH)
continue;let transaction=this.blockchain.transactions.pendingQueue.findPendingTransaction(response.ids[i]);if(!transaction){await this.blockchain.sleep(20);continue;}
await this.blockchain.sleep(20);if(response.format==="json")list.push(transaction.txId.toString("hex"));else
if(response.format==="buffer")list.push(transaction.serializeTransaction());}
await this.blockchain.sleep(200);socket.node.sendRequest('transactions/get-pending-transactions-by-ids/answer',{result:true,format:response.format,transactions:list});});}
async downloadTransactions(socket,start,count,max){if(start>=max)return false;if(!socket)return false;try{let answer=await socket.node.sendRequestWaitOnce("transactions/get-pending-transactions-ids",{format:"buffer",start:start,count:count},'answer',12*1000);if(!answer||answer.result!==true||!answer.transactions||!Array.isArray(answer.transactions))return false;for(let i=0;i<answer.transactions.length;i++)
await this.transactionsDownloadingManager.addTransaction(socket,answer.transactions[i]);if(start+count<answer.length)
return await this.downloadTransactions(socket,start+count,count,max);}catch(exception){if(__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].DEBUG)
console.error("Error Getting All Pending Transactions",exception);return false;}}
async downloadTransaction(socket,txId){if(!socket)return false;try{let answerTransactions=await socket.node.sendRequestWaitOnce("transactions/get-pending-transactions-by-ids",{format:"buffer",ids:[txId],},"answer",3000);if(!answerTransactions||!answerTransactions.result||!answerTransactions.transactions||!Array.isArray(answerTransactions.transactions)){console.warn("Transaction",txId.toString('hex'),"was not sent");return false;}
return answerTransactions.transactions[0];}catch(exception){console.error("Error sending tx",exception)}
return null;}
propagateNewPendingTransaction(transaction,exceptSockets=[]){if(!Array.isArray(exceptSockets))exceptSockets=[exceptSockets];if(__WEBPACK_IMPORTED_MODULE_3_main_blockchain_Blockchain__["a"].PoolManagement.poolStarted)
for(let element of __WEBPACK_IMPORTED_MODULE_3_main_blockchain_Blockchain__["a"].PoolManagement.poolProtocol.poolConnectedMinersProtocol.list)
exceptSockets.push(element);__WEBPACK_IMPORTED_MODULE_0_common_sockets_protocol_extend_socket_Node_Protocol__["a"].broadcastRequest("transactions/new-pending-transaction-id",{txId:transaction.txId},undefined,exceptSockets);}
propagateNewMissingNonce(addressBuffer,nonce,exceptSockets){if(exceptSockets==="all")return;if(!Array.isArray(exceptSockets))exceptSockets=[exceptSockets];if(__WEBPACK_IMPORTED_MODULE_3_main_blockchain_Blockchain__["a"].PoolManagement.poolStarted)
for(let element of __WEBPACK_IMPORTED_MODULE_3_main_blockchain_Blockchain__["a"].PoolManagement.poolProtocol.poolConnectedMinersProtocol.list)
exceptSockets.push(element);__WEBPACK_IMPORTED_MODULE_0_common_sockets_protocol_extend_socket_Node_Protocol__["a"].broadcastRequest("transactions/missing-nonce",{buffer:addressBuffer,nonce:nonce},undefined,exceptSockets);console.warn("I miss nonce",nonce,"for",addressBuffer);}}
__webpack_exports__["a"]=(InterfaceBlockchainTransactionsProtocol);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_1_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_2__main_blockchain_Blockchain__=__webpack_require__(5);const MAX_TRANSACTIONS_LENGTH=5000;class TransactionsDownloadManager{constructor(blockchain,transactionsProtocol){this.blockchain=blockchain;this.transactionsProtocol=transactionsProtocol;this._socketsQueue={};this._socketsQueueLength=0;this._transactionsQueue={};this._transactionsQueueLength=0;this._missingNonceList={};this._missingNonceListLength=0;this.smallestTrial=0;__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].emitter.on("nodes-list/disconnected",(result)=>{this._unsubscribeSocket(result.socket)});__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].emitter.on("nodes-list/connected",(result)=>{this.addSocket(result.socket)});setTimeout(this._processSocket.bind(this),10*1000);setTimeout(this._processTransactions.bind(this),10*1000);setTimeout(this._clearBannedList.bind(this),30*1000);}
findMissingNonce(address,nonce){return this._missingNonceList[address.toString('hex')+nonce]?this._missingNonceList[address.toString('hex')+nonce]:false;}
addMissingNonceList(address,nonce){let missingNonceElement={address:address,nonce:nonce};let key=address.toString('hex')+nonce;this._missingNonceList[key]=missingNonceElement;}
removeMissingNonceList(address,nonce){delete this._missingNonceList[address.toString('hex')+nonce];this._missingNonceListLength--;}
removeTransaction(tx){delete this._transactionsQueue[tx];this._transactionsQueueLength--;}
async createTransaction(txId,socket){if(txId.length!==64)
return;if(await this.blockchain.mining.miningTransactionSelector.validateTransactionId(txId)){this._transactionsQueue[txId]={buffer:undefined,socket:[socket],totalSocketsProcessed:0,fails:0,lastTrialTime:undefined,dateInitial:new Date().getTime()};this._transactionsQueueLength++;}}
addSocket(socket){socket.downloadFails=0;socket.invalidTransactions=0;if(!this.replaceOldSocket(socket)){this._socketsQueue[socket.node.sckAddress.uuid]=socket;this._socketsQueueLength++;setTimeout(this._processSocket.bind(this,socket.node.sckAddress.uuid),5000);}}
removeSocket(socket){delete this._socketsQueue[socket.node.sckAddress.uuid];this._socketsQueueLength--;}
findTransactionById(txId){return this._transactionsQueue[txId];}
async processTransactionsList(){let foundPriorityTransaction=false;let foundHighFailedTransaction=false;for(let txId in this._transactionsQueue){if(await this.blockchain.mining.miningTransactionSelector.validateTransactionId(txId)===false){this.removeTransaction(txId);continue;}
let currentTime=new Date().getTime();if(this.smallestTrial>=this._transactionsQueue[txId].fails){foundPriorityTransaction=true;if(currentTime-this._transactionsQueue[txId].lastTrialTime>1000*10||typeof this._transactionsQueue[txId].lastTrialTime==='undefined'){if(this._transactionsQueue[txId].fails<=2){if(this._transactionsQueue[txId].socket!==undefined)
return{id:txId};else
this.removeTransaction(txId);}else
this.removeTransaction(txId);}}else
foundHighFailedTransaction=true;}
if(!foundPriorityTransaction){if(!foundHighFailedTransaction)
this.smallestTrial=this.smallestTrial===0?0:this.smallestTrial--;else{this.smallestTrial++;return await this.processTransactionsList();}}}
async addTransaction(socket,txId,topPriority){if(!Buffer.isBuffer(txId))
throw{message:"txId is not a buffer"};if(this._transactionsQueueLength>MAX_TRANSACTIONS_LENGTH){console.warn("There are way too many transactions in pending");return false;}
if(__WEBPACK_IMPORTED_MODULE_2__main_blockchain_Blockchain__["a"].blockchain.transactions.pendingQueue.findPendingTransaction(txId))
return true;if(!this.findTransactionById(txId.toString('hex'))){await this.createTransaction(txId.toString('hex'),socket);return true;}else{if(topPriority)
if(typeof this._transactionsQueue[txId]!=="undefined")
this._transactionsQueue[txId].fails=0;for(let i=0;i<this._transactionsQueue[txId.toString('hex')].socket.length;i++){if(this._transactionsQueue[txId.toString('hex')].socket[i].node!==undefined)
if(this._transactionsQueue[txId.toString('hex')].socket[i].node.sckAddress.uuid===socket.node.sckAddress.uuid){let socket1=this._transactionsQueue[txId.toString('hex')].socket[i];let socket2=socket;socket1.downloadFails=0;socket2.downloadFails=0;if(this._transactionsQueue[txId.toString('hex')].socket[i]!==socket){this._transactionsQueue[txId.toString('hex')].socket.push(socket);break;}}}}
return false;}
async _processSocket(socketID){if(__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].isConsensus(this.blockchain.blocks.length)){try{let selectedSocket;if(socketID){selectedSocket=socketID;}else{let randomSocketIndex=Math.floor(Math.random()*this._socketsQueueLength);selectedSocket=Object.keys(this._socketsQueue)[randomSocketIndex];}
if(this._socketsQueueLength>0)
await this.transactionsProtocol.downloadTransactions(this._socketsQueue[selectedSocket],0,40,__WEBPACK_IMPORTED_MODULE_1_consts_const_global__["a"].SETTINGS.MEM_POOL.MAXIMUM_TRANSACTIONS_TO_DOWNLOAD);}catch(exception){console.warn("Faield to process socket");}}
else
setTimeout(this._processSocket.bind(this,socketID),40*1000);}
async _processTransactions(){if(__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].isConsensus(this.blockchain.blocks.length))
for(let i=0;i<=20;i++){try{let firstUneleted=await this.processTransactionsList();let txId=undefined;let found=false;let wasAdded=null;if(typeof firstUneleted==='object')
txId=firstUneleted.id;if(txId){try{if(!this._transactionsQueue[txId].socket){console.info("Remove wrong transactions from Download Manager");this.removeTransaction(txId);continue;}
let totalSocketsProcessed=this._transactionsQueue[txId].totalSocketsProcessed;let socket=this._transactionsQueue[txId].socket[totalSocketsProcessed];if(this._transactionsQueue[txId]&&socket&&this._socketsQueue[socket.node.sckAddress.uuid]){this._transactionsQueue[txId].buffer=await this.transactionsProtocol.downloadTransaction(socket,Buffer.from(txId,'hex'));if(!this._transactionsQueue[txId])
continue;await this.blockchain.sleep(20);console.info("Processing TX",this._transactionsQueue[txId].buffer?"SUCCEED, from":"FAILED, from",totalSocketsProcessed,"-",this._transactionsQueue[txId].socket.length,txId.toString('hex'),"-",this._transactionsQueueLength-1<=0?'0':this._transactionsQueueLength-1,"tx left to be processed",);if(Buffer.isBuffer(this._transactionsQueue[txId].buffer)){found=true;wasAdded=await this._createTransaction(this._transactionsQueue[txId].buffer,socket);if(!wasAdded){console.info("Not Added",txId.toString('hex'));this._socketsQueue[socket.node.sckAddress.uuid].invalidTransactions++;if(this._socketsQueue[socket.node.sckAddress.uuid].invalidTransactions>20){this._socketsQueue[socket.node.sckAddress.uuid].invalidTransactions=0;this._unsubscribeSocket(socket);this._increaseSocketPenalty(socket.socket);continue;}
this.removeTransaction(txId);}else{this._socketsQueue[socket.node.sckAddress.uuid].invalidTransactions=this._socketsQueue[socket.node.sckAddress.uuid].invalidTransactions-1>0?this._socketsQueue[socket.node.sckAddress.uuid].invalidTransactions-1:0;this._socketsQueue[socket.node.sckAddress.uuid].downloadFails=this._socketsQueue[socket.node.sckAddress.uuid].downloadFails-1>0?this._socketsQueue[socket.node.sckAddress.uuid].downloadFails-1:0;}}else{this._transactionsQueue[txId].fails++;this._transactionsQueue[txId].lastTrialTime=new Date().getTime();if(socket){this._socketsQueue[socket.node.sckAddress.uuid].downloadFails=(this._socketsQueue[socket.node.sckAddress.uuid].downloadFails||0)+1
if(this._transactionsQueue[txId])
if(this._socketsQueue[socket.node.sckAddress.uuid].downloadFails>500)
this._unsubscribeSocket(socket);}}}}catch(exception){console.error("No tx found",exception);}
if(!found&&this._transactionsQueue[txId]){this._transactionsQueue[txId].totalSocketsProcessed++;if(this._transactionsQueue[txId].socket.length===this._transactionsQueue[txId].totalSocketsProcessed-1)
this._transactionsQueue[txId].totalSocketsProcessed=0;}else if(wasAdded){this.removeTransaction(txId);}}}catch(exception){console.error("_processTransactions raised an error",exception);}}
setTimeout(this._processTransactions.bind(this),1000);}
_increaseSocketPenalty(socket){if(socket===undefined)return;socket.node.protocol.transactionsDownloadingManager.penaltyPoints+=2;if(socket.node.protocol.transactionsDownloadingManager.penaltyPoints>=20)
socket.node.protocol.transactionsDownloadingManager.penaltyDate=new Date().getTime();}
async _createTransaction(buffer,socket){let transaction;try{transaction=this.blockchain.transactions._createTransactionFromBuffer(buffer).transaction;if(await this.blockchain.mining.miningTransactionSelector.validateTransaction(transaction)===false)
throw{message:"Transsaction validation failed"};var blockValidationType={};blockValidationType['skip-validation-transactions-from-values']=true;if(!transaction.isTransactionOK(true,false,blockValidationType))
throw{message:"transaction is invalid"};return await this.blockchain.transactions.pendingQueue.includePendingTransaction(transaction,socket,false);}catch(exception){console.error("Create transaction Error",exception);this.removeTransaction(transaction.txId);}
return null;}
_unsubscribeSocket(socket){for(let txId in this._transactionsQueue)
if(this._transactionsQueue[txId])
for(let i=this._transactionsQueue[txId].socket.length-1;i>=0;i--){if(this._transactionsQueue[txId].socket[i].node.sckAddress.uuid===socket.node.sckAddress.uuid)
this._transactionsQueue[txId].socket.splice(i,1);if(this._transactionsQueue[txId].socket.length===0)
this.removeTransaction(txId);}
else
this.removeTransaction(txId);this.removeSocket(socket);}
replaceOldSocket(socket){let found=false;for(let txId in this._transactionsQueue)
if(this._transactionsQueue[txId].socket){for(let i=0;i<this._transactionsQueue[txId].socket.length;i++)
if(this._transactionsQueue[txId].socket[i].node.sckAddress.uuid===socket.node.sckAddress.uuid){this._transactionsQueue[txId].socket.splice(i,1);this._transactionsQueue[txId].socket.push(socket);found=true;}}else
this.removeTransaction(txId);return found;}
_clearBannedList(){try{for(let i=0;i<__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].nodes.length;i++){if(__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].nodes[i].socket.node.protocol.penalty.penaltyPoints>=10&&(new Date().getTime()-__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].nodes[i].socket.node.protocol.penalty.penaltyDate)>30*1000){__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].nodes[i].socket.node.protocol.penalty.penaltyDate=new Date().getTime();__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].nodes[i].socket.node.protocol.penalty.penaltyPoints--;}}}catch(exception){}
setTimeout(this._clearBannedList.bind(this),30*1000);}}
__webpack_exports__["a"]=(TransactionsDownloadManager);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_1_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__=__webpack_require__(18);var __WEBPACK_IMPORTED_MODULE_3__mini_blockchain_transactions_trasanction_Mini_Blockchain_Transaction__=__webpack_require__(250);const SAVE_ONLY_MY_TRANSACTIONS=true;class TransactionsPendingQueueSavingManager{constructor(blockchain,pendingQueue,db){this.blockchain=blockchain;this.pendinQueue=pendingQueue;this.db=db;}
async savePendingTransactions(){if(true)return;let serialization=this._serializePendingTransactions();let answer=await this.db.save("pendingTransactions",serialization);if(!answer)
__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].error("Saving Pending Transactions failed",__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].LOG_TYPE.BLOCKCHAIN);}
async loadPendingTransactions(){if(true)return;let data=await this.db.get("pendingTransactions");if(data===null)return true;if(Buffer.isBuffer(data))
await this._deserializePendingTransactions(data);return true;}
_serializePendingTransactions(){let data=[];for(let i=0;i<this.pendinQueue.list.length;i++){let transaction=this.pendinQueue.list[i];if(!SAVE_ONLY_MY_TRANSACTIONS||(SAVE_ONLY_MY_TRANSACTIONS&&transaction.from.addresses[0].unencodedMinerAddress.equals(this.blockchain.mining.unencodedMinerAddress))){let buffer=transaction.serializeTransaction();data.push(buffer);}}
data.splice(0,0,__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].serializeNumber4Bytes(data.length));return Buffer.concat(data);}
async _deserializePendingTransactions(buffer,offset=0){try{let count=__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].deserializeNumber4Bytes(buffer,offset);for(let i=0;i<count;i++){let transaction=new __WEBPACK_IMPORTED_MODULE_3__mini_blockchain_transactions_trasanction_Mini_Blockchain_Transaction__["a"](this.blockchain);offset=transaction.deserializeTransaction(buffer,offset);try{await this.pendinQueue.includePendingTransaction(transaction);}catch(exception){__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].error("Error Including Pending Transaction",__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].LOG_TYPE.BLOCKCHAIN,error);}}}catch(exception){__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].error("Error Deserializing Pending Transaction",__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].LOG_TYPE.BLOCKCHAIN,error);}}}
__webpack_exports__["a"]=(TransactionsPendingQueueSavingManager);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";class Logger{constructor(name){this.name=name;if(true){this.error=this.error_browser;this.info=this.info_browser;this.debug=this.debug_browser;this.warn=this.warn_browser;this.log=this.log_browser;}}
error_browser(){console.error(this.name," : ",this.convertArguments.apply(this,arguments));}
info_browser(){console.info(this.name," : ",this.convertArguments.apply(this,arguments));}
debug_browser(){console.log(this.name," : ",this.convertArguments.apply(this,arguments));}
warn_browser(){console.warn(this.name," : ",this.convertArguments.apply(this,arguments));}
log_browser(){console.debug(this.name," : ",this.convertArguments.apply(this,arguments));}
error(){console.log('\x1b[31m%s\x1b[0m',this.name,"\x1b[0m",this.convertArguments.apply(this,arguments));}
info(){console.log('\x1b[34m%s\x1b[0m',this.name,"\x1b[0m",this.convertArguments.apply(this,arguments));}
debug(){console.log('\x1b[32m%s\x1b[0m',this.name,"\x1b[0m",this.convertArguments.apply(this,arguments));}
warn(){console.log('\x1b[33m%s\x1b[0m',this.name,"\x1b[0m",this.convertArguments.apply(this,arguments));}
log(){console.log(this.name,this.convertArguments.apply(this,arguments));}
convertArguments(){let s='';for(let i=0;i<arguments.length;i++){if(i===1)continue;if(arguments[i]===undefined)continue;if(typeof arguments[i]==="string")s+=arguments[i];else console.log(arguments[i]);s+="   ";}
return s;}}
__webpack_exports__["a"]=(Logger);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_transactions_transaction_Interface_Blockchain_Transaction_From__=__webpack_require__(401);var __WEBPACK_IMPORTED_MODULE_1_common_utils_coins_WebDollar_Coins__=__webpack_require__(32);var __WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__=__webpack_require__(3);class MiniBlockchainTransactionFrom extends __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_transactions_transaction_Interface_Blockchain_Transaction_From__["a"]{validateFromEnoughMoney(blockValidationType){let amounts={};if(blockValidationType!==undefined&&blockValidationType['take-transactions-list-in-consideration']!==undefined&&blockValidationType['take-transactions-list-in-consideration'].validation){let transactionsList=blockValidationType['take-transactions-list-in-consideration'].transactions;if(transactionsList===undefined)
transactionsList=this.transaction.blockchain.transactions.pendingQueue.listArray;for(let i=0;i<transactionsList.length;i++){let transaction=transactionsList[i];if(transaction.blockchain===undefined)continue;if(__WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__["a"].safeCompare(this.transaction.txId,transaction.txId,blockValidationType["validate-fast-transactions"]))
return false;transaction.from.addresses.forEach((address)=>{let addr=address.unencodedAddress.toString("hex");if(amounts[addr]===undefined)amounts[addr]=0;amounts[addr]-=address.amount;});transaction.to.addresses.forEach((address)=>{let addr=address.unencodedAddress.toString("hex");if(amounts[addr]===undefined)amounts[addr]=0;amounts[addr]+=address.amount;});}}
this.addresses.forEach((fromObject,index)=>{let value=this.transaction.blockchain.accountantTree.getBalance(fromObject.unencodedAddress,this.currencyTokenId);if(value===null)value=0;if(blockValidationType!==undefined&&blockValidationType['take-transactions-list-in-consideration']!==undefined&&blockValidationType['take-transactions-list-in-consideration'].validation){let addr=fromObject.unencodedAddress.toString("hex");if(amounts[addr]!==undefined)
value+=amounts[addr];}
if(value<0)throw{message:"Accountant Tree Input doesn't exist",unencodedAddress:fromObject.unencodedAddress};if(value<fromObject.amount)
throw{message:"Value is Less than From.address.amount",address:fromObject,index:index};});return true;}
processTransactionFrom(multiplicationFactor=1,revertActions,showUpdate){for(let i=0;i<this.addresses.length;i++){if(!__WEBPACK_IMPORTED_MODULE_1_common_utils_coins_WebDollar_Coins__["a"].validateCoinsNumber(this.addresses[i].amount))
throw{message:"amount is not number",address:this.addresses[i]};this.transaction.blockchain.accountantTree.updateAccount(this.addresses[i].unencodedAddress,-this.addresses[i].amount*multiplicationFactor,this.currencyTokenId,revertActions,showUpdate);}
return true;}}
__webpack_exports__["a"]=(MiniBlockchainTransactionFrom);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_transactions_transaction_Interface_Blockchain_Transaction_To__=__webpack_require__(402);var __WEBPACK_IMPORTED_MODULE_1_common_utils_coins_WebDollar_Coins__=__webpack_require__(32);class MiniBlockchainTransactionTo extends __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_transactions_transaction_Interface_Blockchain_Transaction_To__["a"]{processTransactionTo(multiplicationFactor=1,revertActions,showUpdate){for(let i=0;i<this.addresses.length;i++){if(!__WEBPACK_IMPORTED_MODULE_1_common_utils_coins_WebDollar_Coins__["a"].validateCoinsNumber(this.addresses[i].amount))
throw{message:"Amount is not a number",address:this.addresses[i]};this.transaction.blockchain.accountantTree.updateAccount(this.addresses[i].unencodedAddress,this.addresses[i].amount*multiplicationFactor,this.transaction.from.currencyTokenId,revertActions,showUpdate);}
return true;}}
__webpack_exports__["a"]=(MiniBlockchainTransactionTo);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__=__webpack_require__(17);var __WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_2_common_utils_Advanced_Emitter__=__webpack_require__(70);var __WEBPACK_IMPORTED_MODULE_3_consts_const_global__=__webpack_require__(2);class InterfaceBlockchainTransactionsEvents{constructor(blockchain){this.blockchain=blockchain;this.emitter=new __WEBPACK_IMPORTED_MODULE_2_common_utils_Advanced_Emitter__["a"](1000);}
async listTransactions(addressWIF,maxBlockCount=50){if(addressWIF===''||addressWIF===undefined||addressWIF===null||addressWIF==='')
return[];if(!Buffer.isBuffer(addressWIF))
addressWIF=__WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__["a"].fromBase(addressWIF);let unencodedAddress=__WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].getUnencodedAddressFromWIF(addressWIF);let result={};let startingPoint=this.blockchain.blocks.blocksStartingPoint;for(let i=Math.max(startingPoint,this.blockchain.blocks.endingPosition-1-maxBlockCount);i<this.blockchain.blocks.endingPosition;i++){let block=await this.blockchain.getBlock(i);if(!block)continue;block.data.transactions.transactions.forEach((transaction)=>{if(this._searchAddressInTransaction(unencodedAddress,transaction)){let txId=transaction.txId.toString("hex");result[txId]=transaction.toJSON();}});}
let blockValidationType={"take-transactions-list-in-consideration":{validation:true}};this.blockchain.transactions.pendingQueue.listArray.forEach((transaction)=>{try{if(this._searchAddressInTransaction(unencodedAddress,transaction)){let txId=transaction.txId.toString("hex");result[txId.toString("hex")]=transaction.toJSON();}}catch(exception){}});return result;}
subscribeTransactionsChanges(addressWIF,callback){if(addressWIF===''||addressWIF===undefined||addressWIF===null||addressWIF==='')return{result:false,message:"address is invalid"};if(!Buffer.isBuffer(addressWIF)&&typeof addressWIF==="string")
addressWIF=__WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__["a"].fromBase(addressWIF);let address=__WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].getUnencodedAddressFromWIF(addressWIF);if(address===null)return{result:false,message:"invalid address"};let unsubcribe=this.emitter.on("transactions/changes/"+__WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__["a"].toBase(address),callback);return{result:true,subscription:unsubcribe,transactions:this.listTransactions(addressWIF),}}
unsusbribeTransactionsChanges(subscription){if(subscription===undefined||subscription===null)return false;if(typeof subscription==='function')
subscription();return true;}
_searchAddressInTransaction(unencodedAddress,transaction){for(let i=0;i<transaction.from.addresses.length;i++)
if(__WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__["a"].safeCompare(transaction.from.addresses[i].unencodedAddress,unencodedAddress))
return true;for(let i=0;i<transaction.to.addresses.length;i++)
if(__WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__["a"].safeCompare(transaction.to.addresses[i].unencodedAddress,unencodedAddress))
return true;return false;}
_checkTransactionIsSubscribed(address){let name;if(Buffer.isBuffer(address))
name="transactions/changes/"+__WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__["a"].toBase(address);else
name=address;let list=this.emitter._events;for(let key in list)
if(key===name)
return true;return false;}
async emitTransactionChangeEvent(transaction,deleted=false){if(deleted)
if(await this.blockchain.mining.miningTransactionSelector.validateTransactionId(transaction.txId)===false)
return false;transaction.from.addresses.forEach((address)=>{if(this._checkTransactionIsSubscribed(address.unencodedAddress)){let addressWIF=__WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__["a"].toBase(__WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].generateAddressWIF(address.unencodedAddress));try{this.emitter.emit("transactions/changes/"+__WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__["a"].toBase(address.unencodedAddress),{txId:transaction.txId.toString("hex"),address:addressWIF,transaction:deleted?undefined:transaction.toJSON()});}catch(ex){console.error("Transaction From/Changes raised an error",ex,transaction.toJSON());}}});transaction.to.addresses.forEach((address)=>{if(this._checkTransactionIsSubscribed(address.unencodedAddress)){let addressWIF=__WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__["a"].toBase(__WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].generateAddressWIF(address.unencodedAddress));try{this.emitter.emit("transactions/changes/"+__WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__["a"].toBase(address.unencodedAddress),{txId:transaction.txId.toString("hex"),address:addressWIF,transaction:deleted?undefined:transaction.toJSON()});}catch(ex){console.error("Transaction To/Changes raised an error",ex,transaction.toJSON());}}});}}
__webpack_exports__["a"]=(InterfaceBlockchainTransactionsEvents);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0__utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_1__crypto_WebDollar_Crypto__=__webpack_require__(28);var __WEBPACK_IMPORTED_MODULE_2__consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_3__utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_4__main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_5__utils_logging_Log__=__webpack_require__(18);class InterfaceBlockchainBlockDataTransactions{constructor(blockData,transactions,hashTransactions,db){this.blockData=blockData;this.db=db;this.transactions=transactions||[];if(!hashTransactions)
hashTransactions=this.calculateHashTransactions();this.hashTransactions=hashTransactions;}
async saveVirtualizedTxId(txId,blockHeight){if(Buffer.isBuffer(txId))txId=txId.toString("hex");try{return this.db.save('transactionID-'+txId,blockHeight);}
catch(err){console.error('ERROR on saving TxId: '+txId,err);}}
async deleteVirtualizedTxId(txId){if(Buffer.isBuffer(txId))txId=txId.toString("hex");try{return this.db.remove('transactionID-'+txId);}
catch(err){console.error('ERROR deleting TxId: '+txId,err);}}
async confirmTransactions(blockHeight,save=false){await this.transactions.forEach(async transaction=>{if(save)
await this.saveVirtualizedTxId(transaction.txId.toString('hex'),blockHeight);transaction.confirmed=true;});}
async unconfirmTransactions(){await this.transactions.forEach(async transaction=>{transaction.confirmed=false;try{await this.deleteVirtualizedTxId(transaction.txId.toString('hex'));await this.blockData.blockchain.transactions.pendingQueue.includePendingTransaction(transaction,'all');}
catch(exception){__WEBPACK_IMPORTED_MODULE_5__utils_logging_Log__["a"].warn('Transaction Was Rejected to be Added to the Pending Queue ',__WEBPACK_IMPORTED_MODULE_5__utils_logging_Log__["a"].LOG_TYPE.BLOCKCHAIN_FORKS,transaction.toJSON());console.error(exception);}});}
async validateTransactions(blockHeight,blockValidationType){let hashTransactions=this.calculateHashTransactions();if(!__WEBPACK_IMPORTED_MODULE_0__utils_BufferExtended__["a"].safeCompare(this.hashTransactions,hashTransactions)){throw{message:'hash transaction is invalid at',hashTransactionsOriginal:this.hashTransactions,hashTransactions:hashTransactions};}
for(let i=0;i<this.transactions.length;i++){if(typeof blockValidationType==='undefined'){blockValidationType={};}
blockValidationType['take-transactions-list-in-consideration']={validation:true,transactions:this.transactions.slice(0,i),};if(!this.transactions[i].validateTransactionOnce(blockHeight,blockValidationType)){throw{message:'validation failed at transaction',transaction:this.transactions[i]};}
if(!blockValidationType['skip-sleep']){await __WEBPACK_IMPORTED_MODULE_4__main_blockchain_Blockchain__["a"].blockchain.sleep(2);}}
if(!this.validateDuplicateTransactions()){return{message:'validateDuplicateTransactions failed'};}
return true;}
validateDuplicateTransactions(){let fromAddresses={};let toAddresses={};for(let i=0;i<this.transactions.length;i++){let transaction=this.transactions[i];transaction.from.addresses.forEach((fromAddress)=>{let address=fromAddress.unencodedAddress.toString('hex');fromAddresses[address]++;if(fromAddresses[address]>__WEBPACK_IMPORTED_MODULE_2__consts_const_global__["a"].SPAM_GUARDIAN.TRANSACTIONS.MAXIMUM_IDENTICAL_INPUTS){throw{message:'spam guardian detected many identical inputs'};}});transaction.to.addresses.forEach((toAddress)=>{let address=toAddress.unencodedAddress.toString('hex');toAddresses[address]++;if(toAddresses[address]>__WEBPACK_IMPORTED_MODULE_2__consts_const_global__["a"].SPAM_GUARDIAN.TRANSACTIONS.MAXIMUM_IDENTICAL_OUTPUTS){throw{message:'spam guardian detected many identical inputs'};}});}
return true;}
calculateHashTransactions(){if(this.blockData._onlyHeader){return this.hashTransactions;}
else{return __WEBPACK_IMPORTED_MODULE_1__crypto_WebDollar_Crypto__["a"].SHA256(__WEBPACK_IMPORTED_MODULE_1__crypto_WebDollar_Crypto__["a"].SHA256(this._computeBlockDataTransactionsConcatenate()));}}
_computeBlockDataTransactionsConcatenate(){let bufferList=[];for(let i=0;i<this.transactions.length;i++){bufferList.push(this.transactions[i].serializeTransaction());}
return Buffer.concat(bufferList);}
serializeTransactions(onlyHeader=false){let list=[__WEBPACK_IMPORTED_MODULE_3__utils_Serialization__["a"].serializeToFixedBuffer(32,this.hashTransactions)];if(!onlyHeader&&!this.blockData._onlyHeader){list.push(__WEBPACK_IMPORTED_MODULE_3__utils_Serialization__["a"].serializeNumber4Bytes(this.transactions.length));for(let i=0;i<this.transactions.length;i++){list.push(this.transactions[i].serializeTransaction());}}
return Buffer.concat(list);}
deserializeTransactions(buffer,offset,onlyHeader=false){this.hashTransactions=__WEBPACK_IMPORTED_MODULE_0__utils_BufferExtended__["a"].substr(buffer,offset,32);offset+=32;if(!onlyHeader&&!this.blockData._onlyHeader){let length=__WEBPACK_IMPORTED_MODULE_3__utils_Serialization__["a"].deserializeNumber4Bytes(buffer,offset);offset+=4;for(let i=0;i<length;i++){let answer=this.blockData.blockchain.transactions._createTransactionFromBuffer(buffer,offset);let transaction=answer.transaction;offset=answer.offset;this.transactions.push(transaction);}
this.transactionsLoaded=true;}
return offset;}
_processBlockDataTransaction(blockHeight,transaction,multiplicationFactor=1,minerAddress=undefined,revertActions=undefined,showUpdate){if(multiplicationFactor===1){if(!transaction.validateTransactionOnce(blockHeight)){throw{message:'couldn\'t process the transaction ',transaction:transaction.txId};}}
transaction.processTransaction(multiplicationFactor,minerAddress,revertActions,showUpdate);return true;}
processBlockDataTransactions(block,multiplicationFactor=1,revertActions,showUpdate){for(let i=0;i<block.data.transactions.transactions.length;i++){if(!this._processBlockDataTransaction(block.height,block.data.transactions.transactions[i],multiplicationFactor,block.data.minerAddress,revertActions,showUpdate)){return false;}}
return true;}
calculateFees(){let fee=0;for(let i=0;i<this.transactions.length;i++){fee+=this.transactions[i].fee;}
return fee;}
findTransactionInBlockData(transaction){if(typeof transaction==='string'){transaction=Buffer.from(transaction,'hex');}
if(!Buffer.isBuffer(transaction)&&typeof transaction==='object'){transaction=transaction.txId;}
for(let i=0;i<this.transactions.length;i++){if(this.transactions[i].txId.equals(transaction)){return i;}}
return-1;}}
__webpack_exports__["a"]=(InterfaceBlockchainBlockDataTransactions);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_global_Blockchain_Genesis__=__webpack_require__(16);var __WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Block__=__webpack_require__(107);var __WEBPACK_IMPORTED_MODULE_2_consts_const_global__=__webpack_require__(2);class InterfaceBlockchainBlockTimestamp{constructor(blockchain){this.blockchain=blockchain;}
async getMedianTimestamp(height,blockValidation){let callback;if(blockValidation)callback=blockValidation.getTimeStampCallback;else callback=this.blockchain.getTimeStamp;let medianTimestamp=0;let no_blocks=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].BLOCKCHAIN.TIMESTAMP.VALIDATION_NO_BLOCKS;if(height>=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.POS_ACTIVATION)
no_blocks=2;let medianTimestamps=[];for(let i=height-1;i>=height-no_blocks;i--)
medianTimestamps.push(callback.call(this.blockchain,i));medianTimestamps=await Promise.all(medianTimestamps);for(let i=0;i<medianTimestamps.length;i++)
medianTimestamp+=medianTimestamps[i];return medianTimestamp/no_blocks;}
async validateMedianTimestamp(timestamp,height,blockValidation){let medianTimestamp=await this.getMedianTimestamp(height,blockValidation);if(timestamp<medianTimestamp)
throw{message:"Block Timestamp is not bigger than the previous 10 blocks",medianTimestamp:medianTimestamp};return true;}
validateNetworkAdjustedTime(timeStamp,height){let timestampValue=height<__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.POS_ACTIVATION?__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].BLOCKCHAIN.TIMESTAMP.NETWORK_ADJUSTED_TIME_MAXIMUM_BLOCK_OFFSET:__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].BLOCKCHAIN.TIMESTAMP.NETWORK_ADJUSTED_TIME_MAXIMUM_BLOCK_OFFSET_AFTER_POS;if(timeStamp>this.blockchain.timestamp.networkAdjustedTime-__WEBPACK_IMPORTED_MODULE_0_common_blockchain_global_Blockchain_Genesis__["a"].timeStampOffset+timestampValue)
throw{message:"Timestamp of block is less than the network-adjusted time",timeStamp:timeStamp," > ":this.blockchain.timestamp.networkAdjustedTime-__WEBPACK_IMPORTED_MODULE_0_common_blockchain_global_Blockchain_Genesis__["a"].timeStampOffset+timestampValue,networkAdjustedTime:this.blockchain.timestamp.networkAdjustedTime,networkAdjustedTimeRelative:this.blockchain.timestamp.networkAdjustedTime-__WEBPACK_IMPORTED_MODULE_0_common_blockchain_global_Blockchain_Genesis__["a"].timeStampOffset,NETWORK_ADJUSTED_TIME_MAXIMUM_BLOCK_OFFSET:timestampValue};return true;}}
__webpack_exports__["a"]=(InterfaceBlockchainBlockTimestamp);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_consts_global__=__webpack_require__(45);var __WEBPACK_IMPORTED_MODULE_1_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__=__webpack_require__(18);var __WEBPACK_IMPORTED_MODULE_3_common_utils_helpers_Utils__=__webpack_require__(40);const SAVING_MANAGER_INTERVAL=5000;const MAX_BLOCKS_MEMORY=1000;class SavingManager{constructor(blockchain){this.blockchain=blockchain;this._pendingBlocks={};this._pendingBlocksCount=0;this._timeoutSaveManager=setTimeout(this._saveManager.bind(this),SAVING_MANAGER_INTERVAL);this._factor=Math.floor(Math.random()*20);}
addBlockToSave(block,height=block.height){if(true)return;if(!block)return false;if(!this._pendingBlocks[height])
this._pendingBlocksCount++;this._pendingBlocks[height]=block;}
async _saveNextBlock(){if(true)return;if(this.blockchain.semaphoreProcessing._list.length>0)return;let block=await this.blockchain.semaphoreProcessing.processSempahoreCallback(async()=>{for(let key in this._pendingBlocks){let block=this._pendingBlocks[key];if(block instanceof Promise)continue;if(block.isForkBlock)continue;let resolver;this._pendingBlocks[key]=new Promise(resolve=>resolver=resolve);await this.blockchain.blocks.loadingManager.deleteBlock(block.height,block);try{await block.saveBlock();if(block.height%5000===0)
await this.blockchain.db.restart();}catch(exception){__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].error("Saving raised an Error",__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].LOG_TYPE.SAVING_MANAGER,exception);}
this._pendingBlocksCount--;await resolver(block);if(this._pendingBlocks[key]instanceof Promise)
delete this._pendingBlocks[key];if(block.height===this.blockchain.blocks.length-1&&block.height%(250+this._factor)===0)
await this.saveBlockchain(false);block.saving=false;return block;}
return undefined;});return block;}
async saveBlockchain(useSemaphore){return this.blockchain.saveMiniBlockchain(true,useSemaphore);}
async _saveManager(){let count=1;try{if(this._pendingBlocksCount>MAX_BLOCKS_MEMORY)
count=this._pendingBlocksCount-MAX_BLOCKS_MEMORY;for(let i=0;i<count;i++){if(this._isBeingSavedAll)return;await this._saveNextBlock();if(i>0&&i%50===0)
await this.blockchain.sleep(1000);}}catch(exception){console.error("SavingManager _clearOldUnusedBlocks raised an error",exception);}
this._timeoutSaveManager=setTimeout(this._saveManager.bind(this),SAVING_MANAGER_INTERVAL);}
async saveAllBlocks(){if(this._isBeingSavedAll)return;this._isBeingSavedAll=true;clearTimeout(this._timeoutSaveManager);__WEBPACK_IMPORTED_MODULE_0_consts_global__["a"].INTERFACE_BLOCKCHAIN_SAVED=false;__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].info("Saving Manager - Saving All Blocks started",__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].LOG_TYPE.SAVING_MANAGER);let answer=1;while(this.blockchain.semaphoreProcessing._list.length>0){await __WEBPACK_IMPORTED_MODULE_3_common_utils_helpers_Utils__["a"].sleep(2000);__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].info("Saving Manager - Waiting for Forks to be resolved...",__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].LOG_TYPE.SAVING_MANAGER);}
await __WEBPACK_IMPORTED_MODULE_3_common_utils_helpers_Utils__["a"].sleep(1000);__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].info("Saving Manager - No more forks",__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].LOG_TYPE.SAVING_MANAGER);while(this._pendingBlocksCount>0){answer=await this._saveNextBlock();if(answer&&answer.height%50===0){__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].info("Saving successfully",__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].LOG_TYPE.SAVING_MANAGER,answer.height);await this.blockchain.sleep(10);}}
await this.saveBlockchain();__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].info("Saving Manager - Saving All Blocks finished",__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].LOG_TYPE.SAVING_MANAGER);__WEBPACK_IMPORTED_MODULE_0_consts_global__["a"].INTERFACE_BLOCKCHAIN_SAVED=true;}
async saveBlockchainLength(length){let answer=await this.blockchain.db.save(this.blockchain._blockchainFileName,length,20000,1000000);if(!answer){__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].error("Error saving the blocks.length",__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].LOG_TYPE.SAVING_MANAGER);return false;}
return true;}}
__webpack_exports__["a"]=(SavingManager);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1__apps_buffers_Block_Buffer_Manager__=__webpack_require__(938);var __WEBPACK_IMPORTED_MODULE_2__apps_buffers_Block_Header_Buffer_Manager__=__webpack_require__(939);var __WEBPACK_IMPORTED_MODULE_3__apps_Block_Manager__=__webpack_require__(940);var __WEBPACK_IMPORTED_MODULE_4__apps_Block_Difficulty_Manager__=__webpack_require__(941);var __WEBPACK_IMPORTED_MODULE_5__apps_Block_ChainHash_Manager__=__webpack_require__(942);var __WEBPACK_IMPORTED_MODULE_6__apps_Block_Hash_Manager__=__webpack_require__(943);var __WEBPACK_IMPORTED_MODULE_7__apps_Block_Timestamp_Manager__=__webpack_require__(944);var __WEBPACK_IMPORTED_MODULE_8__apps_ChainWork_Manager__=__webpack_require__(945);var __WEBPACK_IMPORTED_MODULE_9__utils_logging_Log__=__webpack_require__(18);class LoadingManager{constructor(blockchain,savingManager){this.blockchain=blockchain;this.savingManager=savingManager;this.blockBufferManager=new __WEBPACK_IMPORTED_MODULE_1__apps_buffers_Block_Buffer_Manager__["a"](blockchain,savingManager,this,100);this.blockHeaderBufferManager=new __WEBPACK_IMPORTED_MODULE_2__apps_buffers_Block_Header_Buffer_Manager__["a"](blockchain,savingManager,this,100);this.blockDifficultyManager=new __WEBPACK_IMPORTED_MODULE_4__apps_Block_Difficulty_Manager__["a"](blockchain,savingManager,this,2000);this.blockChainHashManager=new __WEBPACK_IMPORTED_MODULE_5__apps_Block_ChainHash_Manager__["a"](blockchain,savingManager,this,2000);this.blockHashManager=new __WEBPACK_IMPORTED_MODULE_6__apps_Block_Hash_Manager__["a"](blockchain,savingManager,this,2000);this.blockTimestampManager=new __WEBPACK_IMPORTED_MODULE_7__apps_Block_Timestamp_Manager__["a"](blockchain,savingManager,this,2000);this.blockManager=new __WEBPACK_IMPORTED_MODULE_3__apps_Block_Manager__["a"](blockchain,savingManager,this,1000);this.chainWorkManager=new __WEBPACK_IMPORTED_MODULE_8__apps_ChainWork_Manager__["a"](blockchain,savingManager,this,2000);}
async getBlockBuffer(height){return this.blockBufferManager.getData(height);}
async getBlockHeaderBuffer(height){return this.blockHeaderBufferManager.getData(height);}
async getBlockTimestamp(height){return this.blockTimestampManager.getData(height);}
async getBlockDifficulty(height){return this.blockDifficultyManager.getData(height);}
async getBlockHash(height){return this.blockHashManager.getData(height);}
async getBlockChainHash(height){return this.blockChainHashManager.getData(height);}
async getBlock(height){return this.blockManager.getData(height);}
async getChainWork(height){return this.chainWorkManager.getData(height);}
async readBlockchainLength(){let numBlocks=await this.blockchain.db.get(this.blockchain._blockchainFileName,20000,20);if(!numBlocks){__WEBPACK_IMPORTED_MODULE_9__utils_logging_Log__["a"].error("Error reading the blocks.length",__WEBPACK_IMPORTED_MODULE_9__utils_logging_Log__["a"].LOG_TYPE.SAVING_MANAGER);return undefined;}
return numBlocks;}
async addBlockToLoaded(block){let height=block.height;this.blockManager.addToLoaded(height,block);}
async deleteBlock(height,block){if(block instanceof Promise)block=await block;this.blockManager.deleteLoaded(height,block);this.blockHashManager.deleteLoaded(height,block.hash);this.blockDifficultyManager.deleteLoaded(height,block.difficultyTarget);this.blockChainHashManager.deleteLoaded(height,block.hashChain);this.blockTimestampManager.deleteLoaded(height,block.timeStamp);this.blockBufferManager.deleteLoaded(height,await block.serializeBlock(false));this.blockHeaderBufferManager.deleteLoaded(height,await block.serializeBlock(true));this.chainWorkManager.deleteLoaded(height,await block.getChainWork());}}
__webpack_exports__["a"]=(LoadingManager);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__Memory_Manager__=__webpack_require__(90);class BlockBufferManager extends __WEBPACK_IMPORTED_MODULE_0__Memory_Manager__["a"]{async _loadData(height){return this.blockchain.db.get("block"+height);}
async getData(height){if(this.savingManager._pendingBlocks[height]){let data=await this.savingManager._pendingBlocks[height];if(data)
return data.serializeBlock(false);}
if(this.loadingManager.blockManager._loaded[height]){let data=await this.loadingManager.blockManager._loaded[height].data;if(data)
return data.serializeBlock(false);}
return __WEBPACK_IMPORTED_MODULE_0__Memory_Manager__["a"].prototype.getData.call(this,height);}}
__webpack_exports__["a"]=(BlockBufferManager);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__Memory_Manager__=__webpack_require__(90);class BlockHeaderBufferManager extends __WEBPACK_IMPORTED_MODULE_0__Memory_Manager__["a"]{async _loadData(height){return this.blockchain.db.get("block"+height);}
async getData(height){if(this.savingManager._pendingBlocks[height]){let data=await this.savingManager._pendingBlocks[height];if(data)
return data.serializeBlock(true);}
if(this.loadingManager.blockManager._loaded[height]){let data=await this.loadingManager.blockManager._loaded[height].data;if(data)
return data.serializeBlock(true);}
return __WEBPACK_IMPORTED_MODULE_0__Memory_Manager__["a"].prototype.getData.call(this,height);}}
__webpack_exports__["a"]=(BlockHeaderBufferManager);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__Memory_Manager__=__webpack_require__(90);var __WEBPACK_IMPORTED_MODULE_1_main_blockchain_Blockchain__=__webpack_require__(5);class BlockManager extends __WEBPACK_IMPORTED_MODULE_0__Memory_Manager__["a"]{async getData(height){if(this.savingManager._pendingBlocks[height]){let data=await this.savingManager._pendingBlocks[height];if(data)
return data;}
return __WEBPACK_IMPORTED_MODULE_0__Memory_Manager__["a"].prototype.getData.call(this,height);}
async _loadData(height){try{let block=await this.blockchain.blockCreator.createEmptyBlock(height);if(!this.blockchain.agent.light)
block.difficultyTargetPrev=await this.blockchain.getDifficultyTarget(height-1);block.difficultyTarget=await this.loadingManager.getBlockDifficulty(height);block.hash=await this.blockchain.getHash(height);block.hashChain=await this.blockchain.getChainHash(height);if(await block.loadBlock()===false)
throw{message:"no block to load was found"};this.addToLoaded(height,block);return block;}catch(exception){console.error("Loading Manager raised an exception",exception);}}
_validateDataForRemoval(data){return!data||!data.data||!data.data.isForkBlock;}}
__webpack_exports__["a"]=(BlockManager);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__Memory_Manager__=__webpack_require__(90);class BlockDifficultyManager extends __WEBPACK_IMPORTED_MODULE_0__Memory_Manager__["a"]{async _loadData(height){return this.blockchain.db.get("blockDiff"+height);}
async getData(height){if(this.savingManager._pendingBlocks[height]){let data=await this.savingManager._pendingBlocks[height];if(data)
return data.difficultyTarget;}
if(this.loadingManager.blockManager._loaded[height]){let data=await this.loadingManager.blockManager._loaded[height].data;if(data)
return data.difficultyTarget;}
return __WEBPACK_IMPORTED_MODULE_0__Memory_Manager__["a"].prototype.getData.call(this,height);}}
__webpack_exports__["a"]=(BlockDifficultyManager);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__Memory_Manager__=__webpack_require__(90);class BlockChainHashManager extends __WEBPACK_IMPORTED_MODULE_0__Memory_Manager__["a"]{async _loadData(height){return this.blockchain.db.get("blockChainHash"+height);}
async getData(height){if(this.savingManager._pendingBlocks[height]){let data=await this.savingManager._pendingBlocks[height];if(data)
return data.hashChain;}
if(this.loadingManager.blockManager._loaded[height]){let data=await this.loadingManager.blockManager._loaded[height].data;if(data)
return data.hashChain;}
return __WEBPACK_IMPORTED_MODULE_0__Memory_Manager__["a"].prototype.getData.call(this,height);}}
__webpack_exports__["a"]=(BlockChainHashManager);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__Memory_Manager__=__webpack_require__(90);class BlockHashManager extends __WEBPACK_IMPORTED_MODULE_0__Memory_Manager__["a"]{async _loadData(height){return this.blockchain.db.get("blockHash"+height);}
async getData(height){if(this.savingManager._pendingBlocks[height]){let data=await this.savingManager._pendingBlocks[height];if(data)
return data.hash;}
if(this.loadingManager.blockManager._loaded[height]){let data=await this.loadingManager.blockManager._loaded[height].data;if(data)
return data.hash;}
return __WEBPACK_IMPORTED_MODULE_0__Memory_Manager__["a"].prototype.getData.call(this,height);}}
__webpack_exports__["a"]=(BlockHashManager);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__Memory_Manager__=__webpack_require__(90);class BlockHashManager extends __WEBPACK_IMPORTED_MODULE_0__Memory_Manager__["a"]{async _loadData(height){return this.blockchain.db.get("blockTimestamp"+height);}
async getData(height){if(this.savingManager._pendingBlocks[height]){let data=await this.savingManager._pendingBlocks[height];if(data)
return data.timeStamp;}
if(this.loadingManager.blockManager._loaded[height]){let data=await this.loadingManager.blockManager._loaded[height].data;if(data)
return data.timeStamp;}
return __WEBPACK_IMPORTED_MODULE_0__Memory_Manager__["a"].prototype.getData.call(this,height);}}
__webpack_exports__["a"]=(BlockHashManager);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__Memory_Manager__=__webpack_require__(90);var __WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__=__webpack_require__(9);const BigInteger=__webpack_require__(36);class ChainWorkManager extends __WEBPACK_IMPORTED_MODULE_0__Memory_Manager__["a"]{async _loadData(height){let buffer=await this.blockchain.db.get("chainWork"+height);if(buffer)
return __WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].deserializeBigInteger(buffer);return(await this.loadingManager.getBlock(height)).getChainWork();}
async getData(height){if(height<0)
return BigInteger(0);if(this.savingManager._pendingBlocks[height]){let data=await this.savingManager._pendingBlocks[height];if(data)
return data.getChainWork();}
if(this.loadingManager.blockManager._loaded[height]){let data=await this.loadingManager.blockManager._loaded[height].data;if(data)
return data.getChainWork();}
return __WEBPACK_IMPORTED_MODULE_0__Memory_Manager__["a"].prototype.getData.call(this,height);}}
__webpack_exports__["a"]=(ChainWorkManager);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0__Interface_Blockchain_Fork__=__webpack_require__(142);var __WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__=__webpack_require__(6);class InterfaceBlockchainForksAdministrator{constructor(blockchain){this.blockchain=blockchain;this.forks=[];this.forksId=0;__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].emitter.on("nodes-list/disconnected",async(nodesListObject)=>{for(let i=this.forks.length-1;i>=0;i--)
if(!this.forks[i].forkIsSaving){for(let j=this.forks[i].sockets.length-1;j>=0;j--)
if(!this.forks[i].sockets[j].node.sckAddress||this.forks[i].sockets[j].node.sckAddress.uuid===nodesListObject.socket.node.sckAddress.uuid){this.forks[i].sockets.splice(j,1);break;}
if(this.forks[i].sockets.length===0&&!this.forks[i].forkIsSaving)
this.forks.splice(i,1);}});}
findFork(socket,hash,forkProof){let forkFound=this.findForkyByChainHash(hash);if(forkFound){if(Math.random()<0.001)
console.error("discoverAndProcessFork - fork already found by forkLastBlockHeader");forkFound.pushSocket(socket,forkProof);return{result:true,fork:forkFound};}
forkFound=this.findForkBySockets(socket);if(forkFound){if(Math.random()<0.001)
console.error("discoverAndProcessFork - fork already found by socket");return{result:true,fork:forkFound};}
return null;}
createNewFork(sockets,forkStartingHeight,forkChainStartingPoint,forkChainLength,forkChainWork,forkChainHashes,ready){if(!Array.isArray(sockets))sockets=[sockets];let fork=this.findForkBySockets(sockets);if(fork)return fork;for(let key in forkChainHashes)
if(this.findForkyByChainHash(key))
return fork;fork=this.blockchain.agent.newFork(this.blockchain,this.forksId++,sockets,forkStartingHeight,forkChainStartingPoint,forkChainLength,forkChainWork,forkChainHashes,ready);this.forks.push(fork);return fork;}
findForkBySockets(sockets){if(!Array.isArray(sockets))sockets=[sockets];for(let i=0;i<sockets.length;i++){for(let j=0;j<this.forks.length;j++){for(let q=0;q<this.forks[j].sockets.length;q++)
if(this.forks[j].sockets[q].node.sckAddress===sockets[i].node.sckAddress||this.forks[j].sockets[q].node.sckAddress.uuid===sockets[i].node.sckAddress.uuid)
return this.forks[j];}}
return null;}
findForkyByChainHash(header){if(!header)
return null;if(Buffer.isBuffer(header))
header=header.toString("hex");for(let fork of this.forks)
if(fork.forkChainHashes[header])return fork;return null;}
findForkByProofs(proof){if(!proof)return false;try{for(let i=0;i<this.forks.length;i++)
if(this.forks[i].forkProofPi.equalsProofs(proof))
return this.forks[i];}catch(exception){}
return null;}
deleteFork(fork){if(!fork)return false;for(let i=this.forks.length-1;i>=0;i--)
if(!this.forks[i]||this.forks[i]===fork||this.forks[i].forkId===fork)
this.forks.splice(i,1);return false;}}
__webpack_exports__["a"]=(InterfaceBlockchainForksAdministrator);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__blocks_validation_Interface_Blockchain_Block_Validation__=__webpack_require__(140);var __WEBPACK_IMPORTED_MODULE_1_common_blockchain_global_Blockchain_Genesis__=__webpack_require__(16);var __WEBPACK_IMPORTED_MODULE_2_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_3_common_utils_logging_Log__=__webpack_require__(18);var BigInteger=__webpack_require__(36);class InterfaceBlockchainFork{constructor(){this.forkIsSaving=false;this.downloadBlocksSleep=false;this.downloadAllBlocks=false;}
initializeConstructor(blockchain,forkId,sockets,forkStartingHeight,forkChainStartingPoint,forkChainLength,forkChainWork,forkChainHashes={},forkReady=false){this.blockchain=blockchain;this.forkId=forkId;if(!Array.isArray(sockets))
sockets=[sockets];this.socketsFirst=sockets[0];this.sockets=sockets;this.forkReady=false;this.forkStartingHeight=forkStartingHeight||0;this.forkChainStartingPoint=forkChainStartingPoint;this.forkChainLength=forkChainLength||0;this.forkBlocks=[];this.forkChainWork=forkChainWork;this.forkChainHashes=forkChainHashes;this.forkPromise=new Promise((resolve)=>{this._forkPromiseResolver=resolve;});}
async _validateFork(validateHashesAgain,firstValidation){if(this.forkBlocks.length===0)throw{message:"Fork doesn't have any block"};if(validateHashesAgain)
for(let i=0;i<this.forkBlocks.length;i++){if(!(await this._validateForkBlock(this.forkBlocks[i],this.forkStartingHeight+i)))
throw{message:"validateForkBlock failed for ",index:i};}
this._validateChainWork();return true;}
async _validateChainWork(){let chainWork=0;if(this.forkStartingHeight<this.blockchain.blocks.length){let chainWorkFirst=await this.blockchain.blocks.loadingManager.getChainWork(this.forkStartingHeight);let chainWorkEnd=await this.blockchain.blocks.loadingManager.getChainWork(this.blockchain.blocks.length-1);chainWork=chainWorkEnd.minus(chainWorkFirst);}
let forkWork=new BigInteger(0);for(let i=0;i<this.forkBlocks.length;i++)
forkWork=forkWork.plus(this.forkBlocks[i].workDone);if(forkWork.lesser(chainWork))
throw{message:"forkWork is less than chainWork",forkWork:forkWork.toString(),chainWork:chainWork.toString()};}
initializeFork(){this.forkReady=true;return true;}
getForkBlock(height){if(height===-1)return __WEBPACK_IMPORTED_MODULE_1_common_blockchain_global_Blockchain_Genesis__["a"];let forkHeight=height-this.forkStartingHeight;if(forkHeight>=0)return this.forkBlocks[forkHeight];return this.blockchain.getBlock(height)}
getForkDifficultyTarget(height,POSRecalculation=true){if(height===-1)return __WEBPACK_IMPORTED_MODULE_1_common_blockchain_global_Blockchain_Genesis__["a"].difficultyTarget;if(height===__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.POS_ACTIVATION-1)return __WEBPACK_IMPORTED_MODULE_1_common_blockchain_global_Blockchain_Genesis__["a"].difficultyTargetPOS;let forkHeight=height-this.forkStartingHeight;let heightPrePOS=height;if(height>=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.POS_ACTIVATION-1){if(height%30===29)height=height-10;else if(height%30===19)height=height-20;forkHeight=height-this.forkStartingHeight;}
if(forkHeight>=0)return this.forkBlocks[forkHeight].difficultyTarget;return this.blockchain.getDifficultyTarget(heightPrePOS,POSRecalculation)}
getForkTimeStamp(height){if(height<=-1)return __WEBPACK_IMPORTED_MODULE_1_common_blockchain_global_Blockchain_Genesis__["a"].timeStamp;let forkHeight=height-this.forkStartingHeight;if(forkHeight>=0)return this.forkBlocks[forkHeight].timeStamp;return this.blockchain.getTimeStamp(height)}
getForkHash(height){if(height===-1)return __WEBPACK_IMPORTED_MODULE_1_common_blockchain_global_Blockchain_Genesis__["a"].hashPrev;let forkHeight=height-this.forkStartingHeight;if(forkHeight>=0)return this.forkBlocks[forkHeight].hash;return this.blockchain.getHash(height)}
getForkChainHash(height){if(height===-1)return __WEBPACK_IMPORTED_MODULE_1_common_blockchain_global_Blockchain_Genesis__["a"].hashPrev;let forkHeight=height-this.forkStartingHeight;if(forkHeight>=0)return this.forkBlocks[forkHeight].hashChain;return this.blockchain.getChainHash(height);}
_createBlockValidation_ForkValidation(height,forkHeight){let validationType={};return new __WEBPACK_IMPORTED_MODULE_0__blocks_validation_Interface_Blockchain_Block_Validation__["a"](this.getForkBlock.bind(this),this.getForkDifficultyTarget.bind(this),this.getForkTimeStamp.bind(this),this.getForkHash.bind(this),this.getForkChainHash.bind(this),validationType);}
_createBlockValidation_BlockchainValidation(height,forkHeight){let validationType={};if(height!==this.forkChainLength-1)
validationType["skip-calculating-proofs"]=true;validationType["skip-recalculating-hash-rate"]=true;return new __WEBPACK_IMPORTED_MODULE_0__blocks_validation_Interface_Blockchain_Block_Validation__["a"](this.getForkBlock.bind(this),this.getForkDifficultyTarget.bind(this),this.getForkTimeStamp.bind(this),this.getForkHash.bind(this),this.getForkChainHash.bind(this),validationType);}
async deleteAlreadyIncludedBlocks(){let pos=-1;for(let i=0;i<this.forkBlocks.length-1;i++){if(this.forkBlocks[i].height>this.blockchain.blocks.length-1)
break;let hashChain=await this.blockchain.getChainHash(this.forkBlocks[i].height);if(hashChain&&hashChain.equals(this.forkBlocks[i].hashChain))pos=i;else break;}
if(pos>=0){this.forkStartingHeight=this.forkBlocks[pos].height;this.forkBlocks.splice(0,pos);}
return this.forkBlocks.length!==0;}
printException(exception){exception=JSON.stringify(exception);let isIterable=(obj)=>{if(obj===null)
return false;return typeof obj[Symbol.iterator]==='function';};let removeBlocks=(obj,depth=1000)=>{if(depth<=0)return;if(isIterable(obj)||Array.isArray(obj))
for(let key in obj)
if(obj.hasOwnProperty(key)){if(key==="blocks")
obj[key]='';removeBlocks(obj[key],depth-1);}};removeBlocks(exception);__WEBPACK_IMPORTED_MODULE_3_common_utils_logging_Log__["a"].error("fork save error",__WEBPACK_IMPORTED_MODULE_3_common_utils_logging_Log__["a"].LOG_TYPE.BLOCKCHAIN_FORKS,exception);}
getSocket(){let socket=this.sockets;if(Array.isArray(socket))
socket=socket[0];return socket;}
_findSocket(socket){for(let i=0;i<this.sockets.length;i++)
if(this.sockets[i]===socket)
return i;return-1;}
getForkSocket(index){if(this.sockets.length===0)return undefined;index=index%this.sockets.length;if(!this.sockets[index].connected){this.sockets.splice(index,1);return undefined;}
return this.sockets[index];}
pushSocket(socket,priority){if(this._findSocket(socket)===-1){if(priority)
this.sockets.splice(0,0,socket);else{if(socket.latency!==0)
for(let i=0;i<this.sockets.length;i++)
if(this.sockets[i].latency>socket.latency)
return this.sockets.splice(i,0,socket);this.sockets.push(socket)}}}
toJSON(){return{forkReady:this.forkReady,forkChainStartingPoint:this.forkChainStartingPoint,forkChainLength:this.forkChainLength,forkBlocks:this.forkBlocks.length,forkChainHashes:this.forkChainHashes,}}}
__webpack_exports__["a"]=(InterfaceBlockchainFork);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";class InterfaceBlockchainForkTests{static test1(fork){if(fork.forkBlocks.length<=5)return;console.info("TEST1 ENABLED");fork.forkBlocks[5].hash[10]=22;fork.forkBlocks[5].hash[12]=24;}
static test2(fork){for(let forkBlock of fork.forkBlocks){if(forkBlock.height===fork.forkStartingHeight)continue;if(forkBlock.data.transactions.transactions.length>=2){console.info("TEST2 ENABLED");forkBlock.data.transactions.transactions[1].to.addresses[0].amount+=5;}}}
static test3(fork){for(let forkBlock of fork.forkBlocks){if(forkBlock.height===fork.forkStartingHeight)continue;if(forkBlock.data.transactions.transactions.length>=2){console.info("TEST2 ENABLED");forkBlock.data.transactions.transactions.push(forkBlock.data.transactions.transactions[forkBlock.data.transactions.transactions.length-1]);}}}}
var _unused_webpack_default_export=(InterfaceBlockchainForkTests);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_1_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_2__clusters_Network_Adjusted_Time_Clusters__=__webpack_require__(950);var __WEBPACK_IMPORTED_MODULE_3_common_blockchain_global_Blockchain_Genesis__=__webpack_require__(16);var __WEBPACK_IMPORTED_MODULE_4__Blockchain_Timestamp__=__webpack_require__(405);class BlockchainNetworkAdjustedTime{constructor(blockchainTimestamp){this.blockchainTimestamp=blockchainTimestamp;this.networkAdjustedTimeClusters=new __WEBPACK_IMPORTED_MODULE_2__clusters_Network_Adjusted_Time_Clusters__["a"]();__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].emitter.on("nodes-list/connected",async(nodesListObject)=>{this._initializingNewNodeTimestmap(nodesListObject.socket,nodesListObject.socket.node.protocol.nodeUTC);});__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].emitter.on("nodes-list/disconnected",async(nodesListObject)=>{await this._desinitializeNode(nodesListObject);});}
get networkAdjustedTime(){return this.blockchainTimestamp.timeUTC}
async _initializingNewNodeTimestmap(socket,timestamp){this.blockchainTimestamp._initializeNewSocket();try{if(timestamp===null||timestamp===undefined)throw{message:"The node answer for timestamp returned null or empty"};if(typeof timestamp==="string")timestamp=parseInt(timestamp);if(typeof timestamp!=="number")throw{message:"The node didn't answer to my request-timeUTC"};this._addNodeTimeAdjusted(socket,timestamp);}catch(exception){console.error("Error includeNodeNetworkAdjustedTime to the node",exception,socket.node.sckAddress.toString());}}
_desinitializeNode(nodesListObject){this._removeNodeTimeAdjusted(nodesListObject.socket);}
_addNodeTimeAdjusted(socket,socketTimeUTC){if(socketTimeUTC<=__WEBPACK_IMPORTED_MODULE_3_common_blockchain_global_Blockchain_Genesis__["a"].timeStampOffset){console.error("Socket timestamp is illegal");return false;}
this.networkAdjustedTimeClusters.addNAT(socket,socketTimeUTC-this.blockchainTimestamp.timeUTC);}
_removeNodeTimeAdjusted(socket){this.networkAdjustedTimeClusters.deleteNAT(socket);}}
__webpack_exports__["a"]=(BlockchainNetworkAdjustedTime);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1__Network_Adjusted_Time_Cluster__=__webpack_require__(951);var __WEBPACK_IMPORTED_MODULE_2_common_events_Status_Events__=__webpack_require__(12);class NetworkAdjustedTimeClusters{constructor(){this._clusterInitialization=false;this.clearClusters();setTimeout(()=>{this._clusterInitialization=true;this._refreshClusterStatus();},130*1000);}
clearClusters(){this.clusters=[];this.clusterBest=null;}
addNAT(socket,socketTimeUTCOffset){let bestClusterAnswer=this._findNATCluster(socketTimeUTCOffset);let cluster=undefined;if(bestClusterAnswer===null){cluster=new __WEBPACK_IMPORTED_MODULE_1__Network_Adjusted_Time_Cluster__["a"]();cluster.pushSocket(socket,socketTimeUTCOffset);this.clusters.push(cluster);}else{cluster=this.clusters[bestClusterAnswer.clusterIndex];cluster.pushSocket(socket,socketTimeUTCOffset);}
this._calculateBestCluster();return cluster;}
deleteNAT(socket){let index=this._findNATClusterBySocket(socket);if(index===-1)
return false;else{let cluster=this.clusters[index];cluster.deleteSocket(socket);if(cluster.sockets.length===0)
this.clusters.splice(index,1);}
this._calculateBestCluster();}
_findNATClusterBySocket(socket){for(let i=0;i<this.clusters.length;i++){if(this.clusters[i].findSocketIncluded(socket)!==-1)
return i;}
return-1;}
_findNATCluster(socketTimeUTCOffset){let bestCluster=null;for(let i=0;i<this.clusters.length;i++){let difference=Math.abs(socketTimeUTCOffset-this.clusters[i].socketTimeUTCOffset);if(Math.abs(difference)<__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.TIMESTAMP.NETWORK_ADJUSTED_TIME_NODE_MAX_UTC_DIFFERENCE){if(bestCluster===null||bestCluster.difference>Math.abs(difference))
bestCluster={difference:difference,clusterIndex:i,}}}
return bestCluster;}
_calculateBestCluster(){let bestCluster=null;for(let i=0;i<this.clusters.length;i++)
if(bestCluster===null||this.clusters[i].sockets.length>bestCluster.sockets.length){bestCluster=this.clusters[i];}
if(this.clusterBest!==bestCluster)
this.clusterBest=bestCluster;this._refreshClusterStatus();}
_refreshClusterStatus(){if(!this._clusterInitialization)return;if(this.clusterBest===null)
return __WEBPACK_IMPORTED_MODULE_2_common_events_Status_Events__["a"].emit("blockchain/logs",{message:"Network Adjusted Time Error",reason:"ClusterBest is Empty"});return __WEBPACK_IMPORTED_MODULE_2_common_events_Status_Events__["a"].emit("blockchain/logs",{message:"Network Adjusted Time Success"});}
_timeConverter(UNIX_timestamp){let a=new Date(UNIX_timestamp*1000);let months=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];let year=a.getFullYear();let month=months[a.getMonth()];let date=a.getDate();let hour=a.getHours();let min=a.getMinutes();let sec=a.getSeconds();let time=date+' '+month+' '+year+' '+hour+':'+min+':'+sec;return time;}}
__webpack_exports__["a"]=(NetworkAdjustedTimeClusters);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";class NetworkAdjustedTimeCluster{constructor(){this.sockets=[];this.meanTimeUTCOffset=0;}
pushSocket(socket,socketTimeUTCOffset){this.sockets.push({socketTimeUTCOffset:socketTimeUTCOffset,socket:socket});this.recalculateClusterMean();}
recalculateClusterMean(){this.meanTimeUTCOffset=0;for(let i=0;i<this.sockets.length;i++)
if(i>=this.sockets.length){this.meanTimeUTCOffset+=this.sockets[i].socketTimeUTCOffset;}
if(this.sockets.length>0){this.meanTimeUTCOffset=Math.floor(this.meanTimeUTCOffset/this.sockets.length);}}
deleteSocket(socket){let index=this.findSocketIncluded(socket);if(index===-1)return false;this.sockets.splice(index,1);this.recalculateClusterMean();}
findSocketIncluded(socket){for(let j=0;j<this.sockets.length;j++)
if(this.sockets[j].socket.node.sckAddress.matchAddress(socket.node.sckAddress)){return j;}
return-1;}}
__webpack_exports__["a"]=(NetworkAdjustedTimeCluster);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__Interface_Blockchain_Tip__=__webpack_require__(953);var __WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_2_common_utils_bans_BansList__=__webpack_require__(120);class InterfaceBlockchainTipsAdministrator{constructor(blockchain,agent){this.blockchain=blockchain;this.agent=agent;this._tips=[];this._initializeProtocol();}
_initializeProtocol(){__WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__["a"].emitter.on("nodes-list/disconnected",(nodesListObject)=>{for(let i=0;i<this._tips.length;i++)
if(this._tips[i].socket===nodesListObject.socket){try{if(this._tips[i].forkResolve!==undefined)
this._tips[i].forkResolve(true);}catch(exception){}
this._tips[i].socket=undefined;this._tips.splice(i,1);return true;}});}
getBestTip(){let maxTip=null;let maxTipChainLength=0;for(let i=0;i<this._tips.length;i++)
if(this._tips[i].forkChainLength>maxTipChainLength&&!__WEBPACK_IMPORTED_MODULE_2_common_utils_bans_BansList__["a"].isBanned(this._tips[i].socket.node.sckAddress)){maxTipChainLength=this._tips[i].forkChainLength;maxTip=this._tips[i];}
return maxTip;}
findTip(socket){for(let i=0;i<this._tips.length;i++)
if(this._tips[i]===socket||this._tips[i].socket===socket||this._tips[i].socket.node.sckAddress.matchAddress(socket.node.sckAddress))
return i;return null;}
getTip(socket){let index=this.findTip(socket);if(index===null)
return null;else
return this._tips[index];}
addTip(socket,forkChainLength,forkChainStartingPoint,forkLastBlockHeader){let tip=this.findTip(socket);if(tip===null){tip=new __WEBPACK_IMPORTED_MODULE_0__Interface_Blockchain_Tip__["a"](this.blockchain,socket,forkChainLength,forkChainStartingPoint,forkLastBlockHeader);if(!tip.validateTip())
return null;this._tips.push(tip);}
return tip;}
updateTipNewForkLength(tip,forkToDoChainLength,forkToDoChainStartingPoint,forkToDoLastBlockHeader){if(tip===null)
return null;if(tip.forkChainLength>forkToDoChainLength)
return null;if(tip.forkToDoResolve!==undefined){tip.forkToDoResolve(false);tip.forkToDoResolve=undefined;}
tip.forkToDoChainLength=forkToDoChainLength;tip.forkToDoChainStartingPoint=forkToDoChainStartingPoint;tip.forkToDoLastBlockHeader=forkToDoLastBlockHeader;if(tip.forkToDoPromise===undefined){tip.forkToDoPromise=new Promise((resolve)=>{tip.forkToDoResolve=resolve;})}
return tip;}
processTipsNewForkLengths(){for(let i=this._tips.length-1;i>=0;i--){if(this._tips[i]===null||this._tips[i]===undefined)
this._tips.splice(i,1);this._tips[i].updateToDo();if(!this._tips[i].validateTip()){if(this._tips[i].forkResolve!==undefined)
this._tips[i].forkResolve(false);this._tips.splice(i,1);}}}}
__webpack_exports__["a"]=(InterfaceBlockchainTipsAdministrator);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";class InterfaceBlockchainTip{constructor(blockchain,socket,forkChainLength,forkChainStartingPoint,forkLastBlockHeader,forkType){this.blockchain=blockchain;this.socket=socket;this.forkChainLength=forkChainLength;this.forkChainStartingPoint=forkChainStartingPoint;this.forkLastBlockHeader=forkLastBlockHeader;this.forkPromise=new Promise((resolve)=>{this.forkResolve=resolve;});this.forkToDoChainLength=-1;this.forkToDoChainStartingPoint=-1;this.forkToDoLastBlockHeader=undefined;this.forkToDoPromise=undefined;this.forkToDoResolve=undefined;}
updateToDo(){if(this.forkToDoChainLength>0&&this.forkToDoChainLength>this.forkChainLength){if(this.forkResolve!==undefined)
this.forkResolve(false);this.forkChainLength=this.forkToDoChainLength;this.forkChainStartingPoint=this.forkToDoChainStartingPoint;this.forkLastBlockHeader=this.forkToDoLastBlockHeader;this.forkPromise=this.forkToDoPromise;this.forkResolve=this.forkToDoResolve;this.forkToDoChainLength=-1;this.forkToDoChainStartingPoint=-1;this.forkToDoLastBlockHeader=undefined;this.forkToDoPromise=undefined;this.forkToDoResolve=undefined;return true;}
return false;}
toString(){return "socket.uuid "+this.socket.node.sckAddress.getAddress(true)+" forkChainLength "+this.forkChainLength+" forkToDoChainLength "+this.forkToDoChainLength;}
validateTip(){if(this.blockchain.blocks.length<this.forkChainLength)
return true;else
if(this.blockchain.blocks.length===this.forkChainLength)
if(this.forkLastBlockHeader.hash.compare(this.blockchain.getHash(this.blockchain.blocks.length-1))<0)
return true;return false;}}
__webpack_exports__["a"]=(InterfaceBlockchainTip);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__BansList__=__webpack_require__(120);class BanObject{constructor(sckAddress){this.sckAddress=sckAddress;this.timeStamp=new Date().getTime();this.banTime=0;this.banTimestamp=0;this.banReasons=[];}
isBanned(){let timestamp=new Date().getTime();if((timestamp-this.banTimestamp)<this.banTime)
return true;return false;}
increaseBanTrials(banTime,banReason){let timestamp=new Date().getTime();if((timestamp-this.banTimestamp)>=(1.5*this.banTime)){this.upLiftBan();}
if(this.banTimestamp===0)
this.banTimestamp=timestamp;this.banTime=banTime;this.banReasons.push(banReason);}
upLiftBan(){this.timeStamp=0;this.banTimestamp=0;this.banReasons=[];}}
__webpack_exports__["a"]=(BanObject);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_node_sockets_node_server_API_Node_API_Public__=__webpack_require__(956);var __WEBPACK_IMPORTED_MODULE_1__addresses_Interface_Blockchain_Address_Helper__=__webpack_require__(17);var __WEBPACK_IMPORTED_MODULE_2_common_utils_coins_WebDollar_Coins__=__webpack_require__(32);class InterfaceBlockchainHardForks{constructor(blockchain){this.blockchain=blockchain;this._output=[];this._processed=[];this._txs={};}
async process(address,height){address=__WEBPACK_IMPORTED_MODULE_1__addresses_Interface_Blockchain_Address_Helper__["a"].getUnencodedAddressFromWIF(address);let list=[address];let findAddressInList=(adr)=>{for(let i=0;i<list.length;i++)
if(list[i].equals(adr))
return i;return-1;};for(let i=height;i<this.blockchain.blocks.length;i++){let block=await this.blockchain.getBlock(i);for(let j=0;j<block.data.transactions.transactions.length;j++){let transaction=block.data.transactions.transactions[j];let addrIndex=findAddressInList(transaction.from.addresses[0].unencodedAddress);if(addrIndex!==-1){let from=__WEBPACK_IMPORTED_MODULE_1__addresses_Interface_Blockchain_Address_Helper__["a"].generateAddressWIF(transaction.from.addresses[0].unencodedAddress,false,true);let to=__WEBPACK_IMPORTED_MODULE_1__addresses_Interface_Blockchain_Address_Helper__["a"].generateAddressWIF(transaction.to.addresses[0].unencodedAddress,false,true);console.log("from ",from," => ",to,transaction.to.addresses[0].amount/__WEBPACK_IMPORTED_MODULE_2_common_utils_coins_WebDollar_Coins__["a"].WEBD," :: ",transaction.from.addresses[0].amount/__WEBPACK_IMPORTED_MODULE_2_common_utils_coins_WebDollar_Coins__["a"].WEBD);if(this._output[to]===undefined)this._output[to]=0;if(this._output[from]===undefined)this._output[from]=0;this._output[to]+=Math.min(this._output[from],transaction.to.addresses[0].amount);this._output[from]-=Math.min(this._output[from],transaction.to.addresses[0].amount);let fee=transaction.fee;let miner=__WEBPACK_IMPORTED_MODULE_1__addresses_Interface_Blockchain_Address_Helper__["a"].generateAddressWIF(block.data.minerAddress,false,true);if(this._output[miner]===undefined)this._output[miner]=0;this._output[miner]+=Math.min(this._output[from],fee);this._output[from]-=Math.min(this._output[from],fee);console.log("miner  ",miner,"  ",fee/__WEBPACK_IMPORTED_MODULE_2_common_utils_coins_WebDollar_Coins__["a"].WEBD);list.push(transaction.to.addresses[0].unencodedAddress);list.push(block.data.minerAddress);}}}}
async revertAllTransactions(address,height,revertActions,totalAmount,finalAddress){this._output={};this._processed=[];this._output[address]=totalAmount;await this.process(address,height);console.log("===============OUTPUT===========");console.log("================================");for(let key in this._output)
if(this._output[key]>0&&this._output[key]<200*10000)
delete this._output[key];let sum=0;for(let key in this._output){sum+=this._output[key];console.log(key,-this._output[key]/10000);}
console.log("TOTAL:",sum/10000);let json={};sum=0;for(let key in this._output){console.log("key",key,this.blockchain.accountantTree.getBalance(key),-this._output[key]);if(key!==undefined&&this._output[key]>0){this.blockchain.accountantTree.updateAccount(key,-this._output[key],undefined,revertActions,false);sum+=this._output[key];json[key]=-this._output[key];}}
for(let key in this._output)
console.log(key,this.blockchain.accountantTree.getBalance(key)/__WEBPACK_IMPORTED_MODULE_2_common_utils_coins_WebDollar_Coins__["a"].WEBD,"WEBD");this.blockchain.accountantTree.updateAccount(finalAddress,sum);json[finalAddress]=sum;console.log("");console.log("");console.log("JSON",JSON.stringify(json));console.log("");console.log("");console.log("DONE",this.blockchain.accountantTree.getBalance(finalAddress)/__WEBPACK_IMPORTED_MODULE_2_common_utils_coins_WebDollar_Coins__["a"].WEBD,"WEBD");return json;}}
__webpack_exports__["a"]=(InterfaceBlockchainHardForks);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1_node_lists_waitlist_Nodes_Waitlist__=__webpack_require__(39);var __WEBPACK_IMPORTED_MODULE_2_node_lists_types_Node_Type__=__webpack_require__(35);var __WEBPACK_IMPORTED_MODULE_3_node_lists_types_Connection_Type__=__webpack_require__(47);var __WEBPACK_IMPORTED_MODULE_4_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_6_common_blockchain_global_Blockchain_Genesis__=__webpack_require__(16);class NodeAPIPublic{constructor(){}
info(){if(!__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].blockchain.blocks.last){return{message:"lastBlock is undefined",length:__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].blockchain.blocks.length,}}
let is_synchronized=false;let currentTimestamp=new Date().getTime();let oDate=new Date((__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].blockchain.blocks.last.timeStamp+__WEBPACK_IMPORTED_MODULE_6_common_blockchain_global_Blockchain_Genesis__["a"].timeStampOffset)*1000);let blockTimestamp=oDate.getTime();let nSecondsBehind=currentTimestamp-blockTimestamp;const UNSYNC_THRESHOLD=600*1000;if(nSecondsBehind<UNSYNC_THRESHOLD){is_synchronized=true;}
return{protocol:__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].SETTINGS.NODE.PROTOCOL,version:__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].SETTINGS.NODE.VERSION,poolURL:__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].DEBUG?__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].PoolManagement.poolSettings.poolURL:'',blocks:{length:__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].blockchain.blocks.length,lastBlockHash:__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].blockchain.blocks.last?__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].blockchain.blocks.last.hash.toString("hex"):'',},networkHashRate:__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].blockchain.blocks.networkHashRate,chainWork:__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].blockchain.blocks.chainWork.toString(),sockets:{clients:__WEBPACK_IMPORTED_MODULE_4_node_lists_Nodes_List__["a"].countNodesByConnectionType(__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Connection_Type__["a"].CONNECTION_CLIENT_SOCKET),servers:__WEBPACK_IMPORTED_MODULE_4_node_lists_Nodes_List__["a"].countNodesByConnectionType(__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Connection_Type__["a"].CONNECTION_SERVER_SOCKET),webpeers:__WEBPACK_IMPORTED_MODULE_4_node_lists_Nodes_List__["a"].countNodesByConnectionType(__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Connection_Type__["a"].CONNECTION_WEBRTC),},services:{serverPool:__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].ServerPoolManagement.serverPoolProtocol.loaded,miningPool:__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].PoolManagement.poolProtocol.loaded,minerPool:__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].MinerPoolManagement.minerPoolProtocol.loaded,},waitlist:{list:__WEBPACK_IMPORTED_MODULE_1_node_lists_waitlist_Nodes_Waitlist__["a"].getJSONList(__WEBPACK_IMPORTED_MODULE_2_node_lists_types_Node_Type__["a"].NODE_TERMINAL,false),},is_synchronized:is_synchronized,secondsBehind:nSecondsBehind/1000};}
helloWorld(req,res){return{hello:"world"};}
ping(req,res){return{ping:"pong"};}}
var _unused_webpack_default_export=(new NodeAPIPublic());}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1__helpers_PPoW_Helper__=__webpack_require__(253);var __WEBPACK_IMPORTED_MODULE_2__proofs_PPoW_Blockchain_Proof_Pi__=__webpack_require__(175);var __WEBPACK_IMPORTED_MODULE_3__proofs_PPoW_Blockchain_Proof_Xi__=__webpack_require__(958);var __WEBPACK_IMPORTED_MODULE_4__PPoW_Blockchain_Proves_Calculated__=__webpack_require__(959);class PPoWBlockchainProver{constructor(blockchain){this.provesCalculated=new __WEBPACK_IMPORTED_MODULE_4__PPoW_Blockchain_Proves_Calculated__["a"](blockchain);this.proofActivated=true;this.blockchain=blockchain;this.proofPi=undefined;this.proofXi=undefined;}
async _createProofPi(chain){return;let B=await chain.getBlock(0);let underlyingChain=new __WEBPACK_IMPORTED_MODULE_2__proofs_PPoW_Blockchain_Proof_Pi__["a"](this.blockchain,[]);let chainLength=chain.blocks.length;try{console.info("_createProofPi ProofPi CREATOR");let count=0;let C=await chain.getBlock(chainLength-__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].POPOW_PARAMS.k);if(chainLength-__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].POPOW_PARAMS.k>=0)
for(let miu=C.interlink.length;miu>=0;--miu){let superChain=new __WEBPACK_IMPORTED_MODULE_2__proofs_PPoW_Blockchain_Proof_Pi__["a"](this.blockchain,[]);for(let level=miu;level<256;level++){let chainBlocks=this.provesCalculated.levels[level];let index=this.provesCalculated._binarySearch(chainBlocks,B.height);for(let i=index;i<chainBlocks.length;i++)
if(chainBlocks[i]<(chainLength-__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].POPOW_PARAMS.k)&&chainBlocks[i]>=B.height){superChain.push(chainBlocks[i]);if(!underlyingChain.blocksIndex[chainBlocks[i]])
underlyingChain.push(chainBlocks[i]);}}
superChain.blocks.sort((a,b)=>a-b);if(__WEBPACK_IMPORTED_MODULE_1__helpers_PPoW_Helper__["a"].good(underlyingChain,superChain,miu))
B=await this.blockchain.getBlock(superChain.blocks[superChain.blocks.length-__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].POPOW_PARAMS.m]);count++;if(count%100===0)
await this.blockchain.sleep(5);}
console.info("_createProofPi ProofPi FINAL");}catch(exception){console.error("_createProofPi",exception);underlyingChain=null;}
if(underlyingChain){underlyingChain.blocks.sort((a,b)=>a-b);await underlyingChain.calculateProofHash();await underlyingChain.calculateProofSerialized();await underlyingChain.calculateProofGzip();}
return underlyingChain;}
_createProofXi(chain){let blocks=[];for(let i=chain.blocks.length-__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].POPOW_PARAMS.k;i<chain.blocks.length;i++)
if(i>=0)
blocks.push(chain.blocks[i]);let proofXi=new __WEBPACK_IMPORTED_MODULE_3__proofs_PPoW_Blockchain_Proof_Xi__["a"](this.blockchain,blocks);return proofXi;}
async createProofs(){if(!this.proofActivated)
return false;if(this.proofPi)
this.proofPi=undefined;console.info("Creating proof: ",this.blockchain.blocks.length);this.proofPi=await this._createProofPi(this.blockchain);}}
__webpack_exports__["a"]=(PPoWBlockchainProver);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__PPoW_Blockchain_Proof_Basic__=__webpack_require__(406);class PPowBlockchainProofXi extends __WEBPACK_IMPORTED_MODULE_0__PPoW_Blockchain_Proof_Basic__["a"]{}
__webpack_exports__["a"]=(PPowBlockchainProofXi);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__=__webpack_require__(18);var __WEBPACK_IMPORTED_MODULE_1_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_2_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_3_common_utils_BufferExtended__=__webpack_require__(3);class PPoWBlockchainProvesCalculated{constructor(blockchain){this.blockchain=blockchain;this.levelsLengths=[];this.levels=[];for(let i=-1;i<256;i++){this.levelsLengths[i]=0;this.levels[i]=[];}
this.allBlocks={};this.db=this.blockchain.db;}
deleteBlock(height,level){if(typeof height==="object"){level=height.level;height=height.height;}
if(level===undefined){console.error("couldn't get level");return false;}
if(this.allBlocks[height]&&this.allBlocks[height]!==level){let oldlevel=this.allBlocks[height];delete this.allBlocks[height];let oldPos=this._binarySearch(this.levels[oldlevel],height);if(this.levels[oldlevel]&&this.levels[oldlevel][oldPos]===height){this.levels[oldlevel].splice(oldPos,1);this.levelsLengths[oldlevel]--;}}}
updateBlock(height,level){if(typeof height==="object"){level=height.level;height=height.height;}
if(level===undefined){console.error("couldn't get level");return false;}
let pos;try{pos=this._binarySearch(this.levels[level],height);this.deleteBlock(height,level);if(this.levels[level][pos]&&this.levels[level][pos]===height)
return true;this.levelsLengths[level]++;this.allBlocks[height]=level;if(this.levels[level].length===0)
this.levels[level]=[height];else{if(height>this.levels[level][this.levels[level].length-1])
this.levels[level].push(height);else{if(pos===0)
this.levels[level].unshift(height);else
this.levels[level].splice(pos,0,height);}}}catch(exception){__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].error("Error Proves Updating Block",__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.BLOCKCHAIN,{level:level,pos:pos},exception,)}}
_binarySearch(array,value){if(!array)return-1;var guess,min=0,max=array.length-1;while(min<=max){guess=Math.floor((min+max)/2);if(array[guess].height===value.height)
return guess;else if(array[guess].height<value.height)
min=guess+1;else
max=guess-1;}
return min;}
async _serializationProves(){let array=[];array.push(__WEBPACK_IMPORTED_MODULE_2_common_utils_Serialization__["a"].serializeNumber2Bytes(this.levels.length));for(let i=-1;i<this.levels.length;i++){array.push(__WEBPACK_IMPORTED_MODULE_2_common_utils_Serialization__["a"].serializeNumber3Bytes(this.levels[i].length));for(let j=0;j<this.levels[i].length;j++){array.push(__WEBPACK_IMPORTED_MODULE_2_common_utils_Serialization__["a"].serializeNumber4Bytes(this.levels[i][j]));}}
return Buffer.concat(array);}
async _deserializationProves(buffer,offset=0){let levelsLength=__WEBPACK_IMPORTED_MODULE_2_common_utils_Serialization__["a"].deserializeNumber2Bytes(buffer,offset);offset+=2;for(let i=-1;i<levelsLength;i++){let currentLevelLength=__WEBPACK_IMPORTED_MODULE_2_common_utils_Serialization__["a"].deserializeNumber3Bytes(buffer,offset);offset+=3;if(currentLevelLength!==0){for(let j=0;j<currentLevelLength;j++){this.levels[i][j]={};let height=__WEBPACK_IMPORTED_MODULE_2_common_utils_Serialization__["a"].deserializeNumber4Bytes(buffer,offset);offset+=4;this.levels[i][j]=height;this.allBlocks[height]=i;}}}}
async _saveProvesCalculated(key=this.blockchain._blockchainFileName+"_proves_calculated"){let buffer=await this._serializationProves();console.log("Save proof creator "+key);return(await this.db.save(key,buffer));}
async _loadProvesCalculated(key=this.blockchain._blockchainFileName+"_proves_calculated"){console.log("Load proof creator "+key);try{let buffer=await this.db.get(key,20000,20,true);if(!buffer||!Buffer.isBuffer(buffer)){console.error("Proof for key "+key+" was not found");return false;}
await this._deserializationProves(buffer);return true;}
catch(exception){console.error('ERROR on LOAD block: ',exception);return false;}}}
__webpack_exports__["a"]=(PPoWBlockchainProvesCalculated);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1__helpers_PPoW_Helper__=__webpack_require__(253);const BigInteger=__webpack_require__(36);class PPoWBlockchainVerifier{constructor(blockchain){this.blockchain=blockchain;this.prevProofs=[];}
validateChain(proofPi,proofXi){if(!proofPi.validateProof())throw{message:"proofPi failed"};if(!proofXi.validateProof())throw{message:"proofXi failed"};if(proofPi.blocks.length>0)
this.prevProofs.push(proofPi);return true;}
predicateQ(C){if(C.lastBlocks.length<__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].POPOW_PARAMS.l)
throw{message:"Error, the Chain C doesn't have at least l security param blocks",l:__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].POPOW_PARAMS.l}
if(this.predicateD(C.accountantTree,C.lastBlocks))
return true;throw{message:"predicateQ is invalid"};}
predicateD(accountantTree,lastBlocks){throw{message:"predicateD is invalid"}}
_bestArg(proofPi,b){let M=this.calculateM(proofPi,b);let max=BigInteger(0);for(let i=0;i<M.length;++i)
if(M[i]>0){let miu=i;let formula=new BigInteger(2).pow(miu).multiply(M[miu]);if(max<formula)
max=formula;}
return max;};compareProofs(proofPi1,proofPi2,LCA){let b;if(LCA!==undefined)
b=LCA;else
b=__WEBPACK_IMPORTED_MODULE_1__helpers_PPoW_Helper__["a"].LCA(proofPi1,proofPi2);let val1=this._bestArg(proofPi1,b);let val2=this._bestArg(proofPi2,b);return val1.compare(val2);}
calculateM(proofPi,blockStart){let index;let M=[0];if(blockStart!==undefined){index=proofPi.blocks.length-1;while(index>=0){if(proofPi.blocks[index]===blockStart)
break;index--;}}else index=0;let levels=[];while(index<proofPi.blocks.length-1){index++;let miu=proofPi.blocks[index].level;for(let level=0;level<miu;level++){if(levels[level]===undefined)levels[level]=0;levels[level]++;}}
for(let miu=0;miu<levels.length;miu++)
if(levels[miu]>=__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].POPOW_PARAMS.m){M[miu]=levels[miu];}
return M;}
badness(proofs){let M=this.calculateM(proofs);if(M[0]!==undefined)
delete M[0];let max;for(max=M.length-1;M[max]!==undefined&&max>=0;--max);if(max===0)
throw{message:'max === 0',max};let p=1/max;for(let miu=0;miu<M.length;miu++){if(M[miu]===undefined)
continue;let C=proofs.blocksGreaterLevel(miu);for(let i=0;i<C.length;i++){let C1=undefined;for(let j=i+1;j<C.length;j++){C1.push(C[j]);if(C1.length===__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].POPOW_PARAMS.m)
break;}
if(C1.length===__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].POPOW_PARAMS.m){let CPrim=proofs.downSuperChainGetUnderlyingChain(C1);Cstar=CPrim.blocksGreaterLevel(miu-1);if(new BigInteger(2*C1.length).lesser(new BigInteger(1-__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].POPOW_PARAMS.d).pow(p)*Cstar.length))
throw{message:"badness failed because of Cstar badness ",Cstar:Cstar}}}}
return null;}}
__webpack_exports__["a"]=(PPoWBlockchainVerifier);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_crypto_WebDollar_Crypto_Data__=__webpack_require__(106);var __WEBPACK_IMPORTED_MODULE_1__Interface_Radix_Tree_Node__=__webpack_require__(409);var __WEBPACK_IMPORTED_MODULE_2__Interface_Radix_Tree_Edge__=__webpack_require__(410);var __WEBPACK_IMPORTED_MODULE_3_common_trees_Interface_Tree__=__webpack_require__(411);var __WEBPACK_IMPORTED_MODULE_4_common_utils_BufferExtended__=__webpack_require__(3);class InterfaceRadixTree extends __WEBPACK_IMPORTED_MODULE_3_common_trees_Interface_Tree__["a"]{createRoot(){this.root=new __WEBPACK_IMPORTED_MODULE_1__Interface_Radix_Tree_Node__["a"](null,null,[],null);this.root.root=this.root;}
add(input,value){if(!Buffer.isBuffer(input))
input=__WEBPACK_IMPORTED_MODULE_0_common_crypto_WebDollar_Crypto_Data__["a"].createWebDollarCryptoData(input).buffer;if(input.length===0)
throw{message:'No input'};let nodeCurrent=this.root;let i=0;while(i<input.length){let childFound=false;let match=null;let skipOptimization=true;while(skipOptimization&&childFound===false&&nodeCurrent!==null){let nodePrevious=nodeCurrent;for(let j=0;j<nodeCurrent.edges.length;j++){match=__WEBPACK_IMPORTED_MODULE_4_common_utils_BufferExtended__["a"].longestMatch(input,nodeCurrent.edges[j].label,i);if(match){if(match.length<nodeCurrent.edges[j].label.length){let originalEdgeLength=nodeCurrent.edges[j].label.length;let edge=nodeCurrent.edges[j];nodeCurrent.edges.splice(j,1);let nodeMatch=null;if(i+originalEdgeLength>input.length&&(i+match.length)===input.length){nodeMatch=nodeCurrent.createNewNode(nodeCurrent,[],value);nodeCurrent.edgesPush(this.root.createNewEdge(match,nodeMatch));nodeMatch.edgesPush(this.root.createNewEdge(__WEBPACK_IMPORTED_MODULE_4_common_utils_BufferExtended__["a"].substr(edge.label,match.length),edge.targetNode),);edge.targetNode.parent=nodeMatch;nodeCurrent=edge.targetNode;}else{nodeMatch=nodeCurrent.createNewNode(nodeCurrent,[],null);nodeCurrent.edgesPush(this.root.createNewEdge(match,nodeMatch));nodeMatch.edgesPush(this.root.createNewEdge(__WEBPACK_IMPORTED_MODULE_4_common_utils_BufferExtended__["a"].substr(edge.label,match.length),edge.targetNode),);edge.targetNode.parent=nodeMatch;let nodeChild=nodeMatch.createNewNode(nodeMatch,[],value);nodeMatch.edgesPush(this.root.createNewEdge(__WEBPACK_IMPORTED_MODULE_4_common_utils_BufferExtended__["a"].substr(input,i+match.length),nodeChild));nodeCurrent=nodeChild;}
nodeCurrent._changedNode();nodeMatch._changedNode();i=input.length+1;}else{i+=nodeCurrent.edges[j].label.length;nodeCurrent=nodeCurrent.edges[j].targetNode;if(i===input.length){if(nodeCurrent.value!==null)
throw{message:'the node already includes a value....'};else
nodeCurrent._setNodeValue(value);nodeCurrent._changedNode()}}
childFound=true;break;}}
if(nodePrevious!==nodeCurrent)
skipOptimization=true;else skipOptimization=false;}
if(!childFound){let nodeChild=nodeCurrent.createNewNode(nodeCurrent,[],value);nodeCurrent.edgesPush(this.root.createNewEdge(__WEBPACK_IMPORTED_MODULE_4_common_utils_BufferExtended__["a"].substr(input,i),nodeChild));nodeChild._changedNode();nodeCurrent=nodeChild;break;}}
return nodeCurrent;}
delete(input){let searchResult;if(input instanceof __WEBPACK_IMPORTED_MODULE_1__Interface_Radix_Tree_Node__["a"]===false){if(!Buffer.isBuffer(input))
input=__WEBPACK_IMPORTED_MODULE_0_common_crypto_WebDollar_Crypto_Data__["a"].createWebDollarCryptoData(input).buffer
searchResult=this.search(input);if(!searchResult.node)
return false;}else{searchResult={node:input,}}
let finished=false;if(!searchResult.node.isLeaf())
throw{message:"couldn't delete because input is not a leaf node"};let node=searchResult.node;node.value=null;node._previousEdges=node.edges.slice();node.edges=[];while(!finished&&node!==null){let toDelete=node;let nodeParent=node.parent;finished=true;if(node!==null&&node.value===null&&nodeParent!==null&&nodeParent.edges.length>0&&node.edges.length===0){let deletedParentEdge=null;for(let i=0;i<nodeParent.edges.length;i++)
if(nodeParent.edges[i].targetNode===node){deletedParentEdge=nodeParent.edges[i];nodeParent.edges.splice(i,1);break;}
if(deletedParentEdge!==null){if(node._previousEdges.length===1){nodeParent.edgesPush(this.root.createNewEdge(Buffer.concat([deletedParentEdge.label,node._previousEdges[0].label]),node._previousEdges[0].targetNode));node=node._previousEdges[0].targetNode;node.parent=nodeParent;break;}else
if(node._previousEdges.length>1){node.edges=node._previousEdges;nodeParent.edgesPush(deletedParentEdge);break;}else
if(!nodeParent.isLeaf()&&nodeParent.edges.length===1){if(nodeParent.parent!==null){let edge=nodeParent.edges[0];node=nodeParent.edges[0].targetNode;let grandParent=nodeParent.parent;for(let i=0;i<grandParent.edges.length;i++)
if(grandParent.edges[i].targetNode===nodeParent){let label=Buffer.concat([grandParent.edges[i].label,edge.label]);grandParent.edges.splice(i,1);grandParent.edgesPush(this.root.createNewEdge(label,node));node.parent=grandParent;break;}}else{node=node.parent;}}
else{node=nodeParent;}
nodeParent=node.parent;finished=false;}}
if(node!==null&&nodeParent!==null&&node.value===null&&node.edges.length===0&&node!==this.root){for(let i=nodeParent.edges.length-1;i>=0;i--)
if(nodeParent.edges[i].targetNode===node){nodeParent.edges.splice(i,1);node=node.parent;nodeParent=node.parent;finished=false;break;}}
if(toDelete!==node){toDelete.edges=[];toDelete._previousEdges=[];toDelete.destroyNode();}}
node._changedNode();return true;}
search(input){if(!Buffer.isBuffer(input))
input=__WEBPACK_IMPORTED_MODULE_0_common_crypto_WebDollar_Crypto_Data__["a"].createWebDollarCryptoData(input).buffer;if(input.length===0)
throw{message:'No input'};let nodeCurrent=this.root;try{let i=0;while(i<input.length){let childFound=false;for(let j=0;j<nodeCurrent.edges.length;j++){let match=__WEBPACK_IMPORTED_MODULE_4_common_utils_BufferExtended__["a"].longestMatch(input,nodeCurrent.edges[j].label,i);if(match&&match.length===nodeCurrent.edges[j].label.length){nodeCurrent=nodeCurrent.edges[j].targetNode;i+=match.length;childFound=true;break;}}
if(!childFound)
return{result:false}}}catch(exception){console.log("Radix Search Error",exception);}
return{result:(nodeCurrent.value!==null),node:nodeCurrent,value:nodeCurrent.value}}
update(input,value){if(!Buffer.isBuffer(input))
input=__WEBPACK_IMPORTED_MODULE_0_common_crypto_WebDollar_Crypto_Data__["a"].createWebDollarCryptoData(input).buffer;let searchResult=this.search(input);if(!searchResult.node)
return false;if(!searchResult.node.isLeaf())
throw{message:"couldn't delete because input is not a leaf node"};let node=searchResult.node;node.value=value;node._changedNode();}}
__webpack_exports__["a"]=(InterfaceRadixTree);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_1_common_trees_Interface_Tree__=__webpack_require__(411);var __WEBPACK_IMPORTED_MODULE_2__Interface_Merkle_Tree_Node__=__webpack_require__(413);class InterfaceMerkleTree extends __WEBPACK_IMPORTED_MODULE_1_common_trees_Interface_Tree__["a"]{constructor(){super();}
createRoot(){this.root=new __WEBPACK_IMPORTED_MODULE_2__Interface_Merkle_Tree_Node__["a"](null,null,[],null);this.root.autoMerklify=true;this.root.root=this.root;}
_deserializeTree(buffer,offset,includeHashes){offset=__WEBPACK_IMPORTED_MODULE_1_common_trees_Interface_Tree__["a"].prototype._deserializeTree.call(this,buffer,offset,includeHashes);if(includeHashes){if(!this.validateRoot(includeHashes))
throw{message:"Refresh Hash didn't work"};}
else{if(!this.root._refreshHash(true))
throw{message:"Refresh Hash2 didn't work"};}
return offset;}
matches(tree){let result=this.validateRoot();result=result&&tree.validateRoot();result=result&&__WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].safeCompare(this.root.hash,tree.root.hash);return result;}}
__webpack_exports__["a"]=(InterfaceMerkleTree);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_2_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_3_common_trees_radix_tree_merkle_tree_Interface_Merkle_Radix_Tree_Node__=__webpack_require__(412);var __WEBPACK_IMPORTED_MODULE_4_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_5_common_utils_coins_WebDollar_Coins__=__webpack_require__(32);var __WEBPACK_IMPORTED_MODULE_6_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__=__webpack_require__(17);var __WEBPACK_IMPORTED_MODULE_7_common_blockchain_global_Blockchain_Mining_Reward__=__webpack_require__(56);class MiniBlockchainAccountantTreeNode extends __WEBPACK_IMPORTED_MODULE_3_common_trees_radix_tree_merkle_tree_Interface_Merkle_Radix_Tree_Node__["a"]{constructor(root,parent,edges,value){super(root,parent,edges);this.hash=new Buffer(32);this.total=0;if(value){value.balances=value.balances||[];this.balances=value.balances;this.nonce=0;this.value=this.balances;}else{this.balances=undefined;this.nonce=0;this.value=undefined;}}
updateBalanceToken(value,tokenId){if(!tokenId){tokenId=new Buffer(__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.WEBD_TOKEN.LENGTH);tokenId[0]=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.WEBD_TOKEN.VALUE;}
if(!this.balances)
throw{message:'balances is null',amount:value,tokenId:tokenId};if(!Buffer.isBuffer(tokenId))
tokenId=__WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].fromBase(tokenId);if(typeof value==='string')value=parseInt(value);if(!__WEBPACK_IMPORTED_MODULE_5_common_utils_coins_WebDollar_Coins__["a"].validateCoinsNumber(value))
throw{message:"Value is invalid for update",value:value};let result;for(let i=0;i<this.balances.length;i++)
if(__WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].safeCompare(this.balances[i].id,tokenId)){this.balances[i].amount+=value;result=this.balances[i];break;}
if(!result&&tokenId){this.balances.push({id:tokenId,amount:value,});result=this.balances[this.balances.length-1];}
if(!result)
throw{message:'token is empty',amount:value,tokenId:tokenId};if(result.amount<0)
throw{message:'balances became negative',amount:value,tokenId:tokenId};if(!__WEBPACK_IMPORTED_MODULE_5_common_utils_coins_WebDollar_Coins__["a"].validateCoinsNumber(result.amount))
throw{message:"balance is no longer a valid number"};this._deleteBalancesEmpty();if(this.balances.length===0)
return null;return{tokenId:result.id,amount:result.amount,}}
getBalance(tokenId){if(!tokenId){tokenId=new Buffer(__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.WEBD_TOKEN.LENGTH);tokenId[0]=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.WEBD_TOKEN.VALUE;}
if(!Buffer.isBuffer(tokenId))
tokenId=__WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].fromBase(tokenId);if(this.balances)
for(let i=0;i<this.balances.length;i++)
if(__WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].safeCompare(this.balances[i].id,tokenId))
return this.balances[i].amount;return 0;}
getBalances(){if(!this.isLeaf())
return null;let list={};for(let i=0;i<this.balances.length;i++)
list["0x"+this.balances[i].id.toString("hex")]=this.balances[i].amount;return list;}
hasBalances(){let balances=this.getBalances();if(!balances)return false;if(Object.keys(balances).length===0&&balances.constructor===Object)
return false;return true;}
_deleteBalancesEmpty(){let result=false;if(this.balances)
for(let i=this.balances.length-1;i>=0;i--)
if(!this.balances[i]||this.balances[i].amount===0){this.balances.splice(i,1);result=true;}
return true;}
_serializeBalance(balance){return Buffer.concat([__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeToFixedBuffer(balance.id,__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.OTHER_TOKENS.LENGTH),__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeNumber7Bytes(balance.amount)]);}
_serializeBalanceWEBDToken(balance){return Buffer.concat([__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeToFixedBuffer(balance.id,__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.WEBD_TOKEN.LENGTH),__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeNumber7Bytes(balance.amount)]);}
serializeNodeData(includeEdges,includeHashes){try{let hash=__WEBPACK_IMPORTED_MODULE_3_common_trees_radix_tree_merkle_tree_Interface_Merkle_Radix_Tree_Node__["a"].prototype.serializeNodeDataHash.call(this,includeHashes);if(!hash)hash=new Buffer(0);let dataBuffer=new Buffer(0);if(this.isLeaf()){let balancesBuffers=[];if(this.balances.length>0){let WEBDTokenIndex=null;for(let i=0;i<this.balances.length;i++)
if((this.balances[i].id.length===__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.WEBD_TOKEN.LENGTH)&&(this.balances[i].id[0]===__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.WEBD_TOKEN.VALUE)){WEBDTokenIndex=i;break;}
if(WEBDTokenIndex===null){if(this.balances.length>0){let idWEBD=new Buffer(__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.WEBD_TOKEN.LENGTH);idWEBD[0]=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.WEBD_TOKEN.VALUE;balancesBuffers.push(this._serializeBalanceWEBDToken({id:idWEBD,amount:0}));}}else{balancesBuffers.push(this._serializeBalanceWEBDToken(this.balances[WEBDTokenIndex]));}
for(let i=0;i<this.balances.length;i++)
if(i!==WEBDTokenIndex)
balancesBuffers.push(this._serializeBalance(this.balances[i]));}
let balancesBuffered=Buffer.concat(balancesBuffers);dataBuffer=Buffer.concat([__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeNumber2Bytes(this.nonce),__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeNumber1Byte(balancesBuffers.length),balancesBuffered]);}
return Buffer.concat([hash,dataBuffer]);}catch(exception){console.log("Error Serializing MiniAccountantTree NodeData",exception);throw exception;}}
deserializeNodeData(buffer,offset,includeEdges,includeHashes){offset=offset||0;offset=__WEBPACK_IMPORTED_MODULE_3_common_trees_radix_tree_merkle_tree_Interface_Merkle_Radix_Tree_Node__["a"].prototype.deserializeNodeDataHash.call(this,buffer,offset,includeHashes);try{if(this.isLeafBasedOnParents()){this.nonce=__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].deserializeNumber2Bytes(buffer,offset);offset+=2;let balancesLength=__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].deserializeNumber1Bytes(buffer,offset);offset+=1;this.balances=[];if(balancesLength>0){let webdId=__WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].substr(buffer,offset,__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.WEBD_TOKEN.LENGTH);offset+=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.WEBD_TOKEN.LENGTH;if(webdId[0]!==__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.WEBD_TOKEN.VALUE)
throw{message:"webd token is incorrect",token:webdId};let result=__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].deserializeNumber7Bytes(buffer,offset);offset+=7;this.updateBalanceToken(result,webdId);if(balancesLength>1){for(let i=1;i<balancesLength;i++){let tokenId=__WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].substr(buffer,offset,__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.OTHER_TOKENS.LENGTH);offset+=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.OTHER_TOKENS.LENGTH;result=__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].deserializeNumber7Bytes(buffer,offset);offset+=7;this.updateBalanceToken(result,tokenId);}}}
this._deleteBalancesEmpty();}else{this.balances=undefined;this.nonce=undefined;}
return offset;}catch(exception){console.error("error deserializing tree node",exception);throw exception;}}
validateTreeNode(validateMerkleTree){if(!__WEBPACK_IMPORTED_MODULE_3_common_trees_radix_tree_merkle_tree_Interface_Merkle_Radix_Tree_Node__["a"].prototype.validateTreeNode.apply(this,arguments))return false;if(!this.isLeaf()){if(this.balances!==undefined)throw{message:"balance is not undefined"};if(this.nonce!==undefined)throw{message:"nonce is not undefined"};}else{if(!Number.isInteger(this.nonce))throw{message:"nonce is invalid"};if(this.nonce<0)throw{message:"nonce is less than 0"};if(this.nonce>0xFFFF)throw{message:"nonce is higher than 0xFFFF"};if(this.balances!==undefined)
for(let i=0;i<this.balances.length;i++){if(!__WEBPACK_IMPORTED_MODULE_5_common_utils_coins_WebDollar_Coins__["a"].validateCoinsNumber(this.balances[i].amount))
throw{message:"balance.amount is not a valid Coin Number"};if(this.balances[i].amount<0)throw{message:"balance.amount is invalid number"};if(!Buffer.isBuffer(this.balances[i].id))throw{message:"token is not a buffer"};if(this.balances[i].id.length===__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.WEBD_TOKEN.LENGTH){if(this.balances[i].id[0]!==__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.WEBD_TOKEN.VALUE)throw{message:"WEBD Token is invalid"}}else{if(__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.OTHER_TOKENS.ACTIVATED!==-1&&__WEBPACK_IMPORTED_MODULE_4_main_blockchain_Blockchain__["a"].blockchain.blocks.length>__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.OTHER_TOKENS.ACTIVATED){if(this.balances[i].id.length!==__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINI_BLOCKCHAIN.TOKENS.OTHER_TOKENS.LENGTH)
throw{message:"Token doesn't have the correct length"}
else{}}else throw{message:"Other Token is invalid"};}}
if(this.isLeaf()&&this.balances.length===0&&this.nonce===0)throw{message:"Address should not exist"};}
if(validateMerkleTree)
return this._validateHash(this.root);return true;}
isLeaf(){return this.balances!==undefined}
isLeafBasedOnParents(){let node=this;let count=0;while(node!==null){if(node.parent!==null)
for(let i=0;i<node.parent.edges.length;i++)
if(node.parent.edges[i].targetNode===node){count+=node.parent.edges[i].label.length;break;}
node=node.parent;}
if(count===__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH)
return true;else
if(count>__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH)
throw{message:"Label is longer than any address"};else
return false;}
getAddress(){let node=this;let buffers=[];while(node!==null){if(node.parent!==null)
for(let i=0;i<node.parent.edges.length;i++)
if(node.parent.edges[i].targetNode===node){buffers.unshift(node.parent.edges[i].label);break;}
node=node.parent;}
if(buffers.length===0)return null;else return __WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].toBase(__WEBPACK_IMPORTED_MODULE_6_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].generateAddressWIF(Buffer.concat(buffers)));}
getAccountantTreeList(list,bIncludeMiningReward=false,excludeEmpty=true,countOnly=undefined){if(this.isLeaf()){let balance=this.getBalance();if(excludeEmpty)
if(balance===0)return false;if(!bIncludeMiningReward){for(let i=1;i<=40;i++)
if(balance===__WEBPACK_IMPORTED_MODULE_7_common_blockchain_global_Blockchain_Mining_Reward__["a"].getReward(i))
return;}
list.push({node:this,balance:balance});}
for(let i=0;i<this.edges.length;i++)
this.edges[i].targetNode.getAccountantTreeList(list,bIncludeMiningReward,excludeEmpty,countOnly);if(this===this.root){list.sort((a,b)=>b.balance-a.balance);if(countOnly)
list=list.splice(0,countOnly);for(let i=list.length-1;i>=0;i--){list[i].address=list[i].node.getAddress();if(!bIncludeMiningReward)
if(["WEBD$gDZwjjD7ZE5+AE+44ITr8yo5E2aXYT3mEH$","WEBD$gDx8CjURuVS+LSI91ufs@LH2QpIdSzaAxT$","WEBD$gD5@1VU3ZiJ1siQxib#wAb4xeQTUS2zscn$","WEBD$gCP41xykgy6K$LyGHCVNDZ44@PTp1kGufP$","WEBD$gAHF1r0FJjDxWvEAZe3MV8izwWKEXhNt03$","WEBD$gCSiJ0yUAV#TPnoFDYJu+opGmKCHHXDw3z$","WEBD$gD#Ws@o65Imk9DLWJTsPRd0oMxnUeU7S@r$","WEBD$gAuP5uvvJo6c#hxTtor9n5GV5m1Ysd0zjT$","WEBD$gAvnyWnGSVcrVu4ERMEK8PHm8WCZiwa2ET$","WEBD$gDvYAPvIDAe+gnqByY$A2kMF21yiQiE#0j$","WEBD$gAIhBLJi6yvx#+PZtxMg5piwIW0p1#4HU3$","WEBD$gDH2IIR+DprpggngzC5Ssw5eMjgiPFM@sf$","WEBD$gC9ri$@bfpHLhiDppCfcxDzRvnNLH79L2j$","WEBD$gBwnT+PoK1sI9xyz1PI1t9ZqVK5htrwLWn$","\n"+
"WEBD$gBAjU3JemoRXZ5KNEG$b45QE6aI+oDUggb$","WEBD$gBcJMPpviZNU4PT8Y5p+ijtM@ohPc@5CGX$","WEBD$gByeqrPHBGvZfwssFbLtFc64Tt6WQDknXP$"].indexOf(list[i].address)>=0){list.splice(i,1);i++;}}
return list;}}}
__webpack_exports__["a"]=(MiniBlockchainAccountantTreeNode);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__=__webpack_require__(17);var __WEBPACK_IMPORTED_MODULE_2_common_trees_radix_tree_merkle_tree_Interface_Merkle_Radix_Tree__=__webpack_require__(408);var __WEBPACK_IMPORTED_MODULE_3_common_utils_Advanced_Emitter__=__webpack_require__(70);class MiniBlockchainAccountantTreeEvents extends __WEBPACK_IMPORTED_MODULE_2_common_trees_radix_tree_merkle_tree_Interface_Merkle_Radix_Tree__["a"]{constructor(db){super(db);this.emitter=new __WEBPACK_IMPORTED_MODULE_3_common_utils_Advanced_Emitter__["a"](1000);}
_checkBalanceIsSubscribed(address){let name;if(Buffer.isBuffer(address))
name="balances/changes/"+__WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].toBase(address);else
name=address;let list=this.emitter._events;for(let key in list)
if(key===name)
return true;return false;}
emitBalancesChanges(){let list=this.emitter._events;for(let key in list)
if(key.indexOf("balances/changes/")===0){let address=__WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].fromBase(key.replace("balances/changes/",""));let node=null;let balances=null;let nonce=null;try{node=this.search(address).node;if(node!==undefined&&node!==null&&node.isLeaf()){balances=node.getBalances();nonce=node.nonce;}}catch(exception){}
this.emitBalanceChangeEvent(address,()=>{return balances},nonce);}}
emitBalanceChangeEvent(address,getBalanceCallback,nonce){if(this._checkBalanceIsSubscribed(address)){let addressWIF=__WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].toBase(__WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].generateAddressWIF(address));this.emitter.emit("balances/changes/"+__WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].toBase(address),{address:addressWIF,balances:getBalanceCallback===null?getBalanceCallback:getBalanceCallback(),nonce:nonce});}}}
__webpack_exports__["a"]=(MiniBlockchainAccountantTreeEvents);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_2_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Block__=__webpack_require__(107);var __WEBPACK_IMPORTED_MODULE_3_common_blockchain_ppow_blockchain_blocks_PPoW_Blockchain_Block__=__webpack_require__(966);var __WEBPACK_IMPORTED_MODULE_4_common_blockchain_global_Blockchain_Genesis__=__webpack_require__(16);var __WEBPACK_IMPORTED_MODULE_5_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_6_common_crypto_WebDollar_Crypto__=__webpack_require__(28);var __WEBPACK_IMPORTED_MODULE_7_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_8_common_crypto_ed25519__=__webpack_require__(75);var __WEBPACK_IMPORTED_MODULE_9__interface_blockchain_addresses_Interface_Blockchain_Address_Helper__=__webpack_require__(17);var __WEBPACK_IMPORTED_MODULE_10__interface_blockchain_blocks_Interface_Blockchain_Block__=__webpack_require__(107);var __WEBPACK_IMPORTED_MODULE_11_common_utils_coins_WebDollar_Coins__=__webpack_require__(32);const BigInteger=__webpack_require__(36);let inheritBlockchainBlock;if(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].POPOW_PARAMS.ACTIVATED)inheritBlockchainBlock=__WEBPACK_IMPORTED_MODULE_3_common_blockchain_ppow_blockchain_blocks_PPoW_Blockchain_Block__["a"];else inheritBlockchainBlock=__WEBPACK_IMPORTED_MODULE_2_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Block__["a"];class MiniBlockchainBlock extends inheritBlockchainBlock{constructor(blockchain,blockValidation,version,hash,hashPrev,hashChainPrev,difficultyTargetPrev,timeStamp,nonce,data,height,db,posMinerAddress,posMinerPublicKey,posSignature){super(blockchain,blockValidation,version,hash,hashPrev,hashChainPrev,difficultyTargetPrev,timeStamp,nonce,data,height,db);if(__WEBPACK_IMPORTED_MODULE_4_common_blockchain_global_Blockchain_Genesis__["a"].isPoSActivated(this.height)){this.posMinerAddress=posMinerAddress||undefined;this.posMinerPublicKey=posMinerPublicKey||undefined;this.posSignature=posSignature||undefined;}}
getBlockHeader(){let json=inheritBlockchainBlock.prototype.getBlockHeader.call(this);json.data.hashAccountantTree=this.data.hashAccountantTree;return json;}
importBlockFromHeader(json){this.data.hashAccountantTree=json.data.hashAccountantTree;return inheritBlockchainBlock.prototype.importBlockFromHeader.call(this,json);}
async computeHash(){if(__WEBPACK_IMPORTED_MODULE_4_common_blockchain_global_Blockchain_Genesis__["a"].isPoSActivated(this.height))
return this.computeHashPOS.apply(this,arguments);else
return this.computeHashPOW.apply(this,arguments);}
async computeHashPOS(newTimestamp,posNewMinerAddress,balance){let virtualBalance=balance;let whoIsMining=posNewMinerAddress||this.posMinerAddress||this.data.minerAddress;let whoIsReceivingMoney=this.data.minerAddress;try{let buffer=Buffer.concat([__WEBPACK_IMPORTED_MODULE_5_common_utils_Serialization__["a"].serializeBufferRemovingLeadingZeros(__WEBPACK_IMPORTED_MODULE_5_common_utils_Serialization__["a"].serializeNumber4Bytes(this.height)),__WEBPACK_IMPORTED_MODULE_5_common_utils_Serialization__["a"].serializeBufferRemovingLeadingZeros(this.difficultyTargetPrev),__WEBPACK_IMPORTED_MODULE_5_common_utils_Serialization__["a"].serializeBufferRemovingLeadingZeros(this.hashPrev),__WEBPACK_IMPORTED_MODULE_5_common_utils_Serialization__["a"].serializeBufferRemovingLeadingZeros(whoIsMining),__WEBPACK_IMPORTED_MODULE_5_common_utils_Serialization__["a"].serializeBufferRemovingLeadingZeros(__WEBPACK_IMPORTED_MODULE_5_common_utils_Serialization__["a"].serializeNumber4Bytes(newTimestamp||this.timeStamp)),]);let hash=await __WEBPACK_IMPORTED_MODULE_6_common_crypto_WebDollar_Crypto__["a"].SHA256(buffer);if(balance===undefined)
balance=__WEBPACK_IMPORTED_MODULE_7_main_blockchain_Blockchain__["a"].blockchain.accountantTree.getBalance(whoIsMining);if(__WEBPACK_IMPORTED_MODULE_7_main_blockchain_Blockchain__["a"].blockchain.accountantTree.root.hash.equals(this.data.hashAccountantTree)&&balance!==null){if(whoIsReceivingMoney.equals(whoIsMining)){balance-=this.reward;balance-=this.data.transactions.calculateFees();}
for(let tx of this.data.transactions.transactions){for(let from of tx.from.addresses)
if(from.unencodedAddress.equals(whoIsMining))
balance+=from.amount;for(let to of tx.to.addresses)
if(to.unencodedAddress.equals(whoIsMining))
balance-=to.amount;}}
if(!virtualBalance&&!__WEBPACK_IMPORTED_MODULE_7_main_blockchain_Blockchain__["a"].MinerPoolManagement.minerPoolSettings.minerPoolActivated){for(let i=this.height-1;i>=0&&i>=this.height-1-__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.POS.MINIMUM_POS_TRANSFERS;i--){let block=await this.blockValidation.getBlockCallBack(i);if(!block)continue;for(let tx of block.data.transactions.transactions)
for(let to of tx.to.addresses)
if(to.unencodedAddress.equals(whoIsMining))
balance-=to.amount;}}
if(balance===null||balance<__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.POS.MINIMUM_AMOUNT*__WEBPACK_IMPORTED_MODULE_11_common_utils_coins_WebDollar_Coins__["a"].WEBD)
return __WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.BLOCKS_MAX_TARGET_BUFFER;let number=new BigInteger(hash.toString("hex"),16);let hex=number.divide(balance).toString(16);if(hex.length%2===1)hex="0"+hex;return __WEBPACK_IMPORTED_MODULE_5_common_utils_Serialization__["a"].serializeToFixedBuffer(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.BLOCKS_POW_LENGTH,Buffer.from(hex,"hex"));}catch(exception){console.error("Error computeHash",exception);throw exception;}}
async _signPOSSignature(){let address=__WEBPACK_IMPORTED_MODULE_7_main_blockchain_Blockchain__["a"].Wallet.getAddress({unencodedAddress:this.posMinerAddress||this.data.minerAddress});if(!address)
if(typeof this.data.minerAddress!=="undefined")
throw{message:"Can not sign POS because the address doesn't exist in your wallet "+(this.posMinerAddress||this.data.minerAddress).toString('hex')};else
throw{message:"Can not sign POS because the address doesn't exist in your wallet"};let data=this._computeBlockHeaderPrefix(true);let answer=await address.signMessage(data,undefined,true);this.posMinerPublicKey=answer.publicKey;this.posSignature=answer.signature;return{signature:answer.signature,publicKey:answer.publicKey,};}
verifyPOSSignature(){if(!__WEBPACK_IMPORTED_MODULE_9__interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"]._generateUnencodedAddressFromPublicKey(this.posMinerPublicKey,false).equals(this.posMinerAddress||this.data.minerAddress))
throw{message:"posPublicKey doesn't match with the minerAddress"}
let data=this._computeBlockHeaderPrefix(true);let answer=__WEBPACK_IMPORTED_MODULE_8_common_crypto_ed25519__["a"].verify(this.posSignature,data,this.posMinerPublicKey);if(!answer)
throw{message:"POS Signature is invalid"};return true;}
async _validateHash(){await inheritBlockchainBlock.prototype._validateHash.call(this);if(__WEBPACK_IMPORTED_MODULE_4_common_blockchain_global_Blockchain_Genesis__["a"].isPoSActivated(this.height)){if(!this.blockValidation.blockValidationType['skip-validation-PoS-signature'])
this.verifyPOSSignature();}
return true;}
_calculateSerializedBlock(requestHeader=false){if(__WEBPACK_IMPORTED_MODULE_4_common_blockchain_global_Blockchain_Genesis__["a"].isPoSActivated(this.height)){let buffers=[this.hash,this.posMinerPublicKey,this.posSignature,];if(this.posMinerAddress===undefined)
buffers.push(new Buffer(1));else{buffers.push(__WEBPACK_IMPORTED_MODULE_5_common_utils_Serialization__["a"].serializeNumber1Byte(this.posMinerAddress.length));buffers.push(this.posMinerAddress);}
buffers.push(this._computeBlockHeaderPrefix(requestHeader));return Buffer.concat(buffers);}else
return inheritBlockchainBlock.prototype._calculateSerializedBlock.call(this,requestHeader);}
_deserializeBlock(buffer,offset){if(__WEBPACK_IMPORTED_MODULE_4_common_blockchain_global_Blockchain_Genesis__["a"].isPoSActivated(this.height)){this.hash=__WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__["a"].substr(buffer,offset,__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.BLOCKS_POW_LENGTH);offset+=__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.BLOCKS_POW_LENGTH;this.posMinerPublicKey=__WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__["a"].substr(buffer,offset,__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].ADDRESSES.PUBLIC_KEY.LENGTH);offset+=__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].ADDRESSES.PUBLIC_KEY.LENGTH;this.posSignature=__WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__["a"].substr(buffer,offset,__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].TRANSACTIONS.SIGNATURE_SCHNORR.LENGTH);offset+=__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].TRANSACTIONS.SIGNATURE_SCHNORR.LENGTH;let minerAddressLength=__WEBPACK_IMPORTED_MODULE_5_common_utils_Serialization__["a"].deserializeNumber1Bytes(buffer,offset);offset+=1;if(minerAddressLength!==0&&minerAddressLength!==__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH)throw{message:"minerAddress is invalid"};if(minerAddressLength===0)this.posMinerAddress=undefined;else this.posMinerAddress=__WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__["a"].substr(buffer,offset,minerAddressLength);offset+=minerAddressLength;return offset;}else
return inheritBlockchainBlock.prototype._deserializeBlock.call(this,buffer,offset);}
deserializeBlock(buffer,height,reward,difficultyTargetPrev,offset=0,blockLengthValidation,onlyHeader){offset=inheritBlockchainBlock.prototype.deserializeBlock.apply(this,arguments);this.hashChain=this.calculateChainHash();}
calculateChainHash(){if(__WEBPACK_IMPORTED_MODULE_4_common_blockchain_global_Blockchain_Genesis__["a"].isPoSActivated(this.height))
return __WEBPACK_IMPORTED_MODULE_6_common_crypto_WebDollar_Crypto__["a"].SHA256(__WEBPACK_IMPORTED_MODULE_6_common_crypto_WebDollar_Crypto__["a"].SHA256(this._calculateSerializedBlock(true)));else
return __WEBPACK_IMPORTED_MODULE_10__interface_blockchain_blocks_Interface_Blockchain_Block__["a"].prototype.calculateChainHash.call(this);}}
__webpack_exports__["a"]=(MiniBlockchainBlock);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Block__=__webpack_require__(107);var __WEBPACK_IMPORTED_MODULE_2_common_blockchain_global_Blockchain_Genesis__=__webpack_require__(16);var __WEBPACK_IMPORTED_MODULE_3_common_utils_Convert__=__webpack_require__(967);var __WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_5_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_6_common_crypto_WebDollar_Crypto_Data__=__webpack_require__(106);const BigInteger=__webpack_require__(36);class PPoWBlockchainBlock extends __WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Block__["a"]{constructor(blockchain,blockValidation,version,hash,hashPrev,difficultyTargetPrev,hashChainPrev,timeStamp,nonce,data,height,db){super(blockchain,blockValidation,version,hash,hashPrev,difficultyTargetPrev,hashChainPrev,timeStamp,nonce,data,height,db);this._level=undefined;this.interlink=undefined;this._provesClculatedInserted=undefined;}
async updateInterlink(){this.interlink=await this.calculateInterlink();}
get level(){if(this._level!==undefined)return this._level;let T=this.difficultyTargetPrev;if(this.height===0)T=__WEBPACK_IMPORTED_MODULE_2_common_blockchain_global_Blockchain_Genesis__["a"].difficultyTarget;else
if(this.height===__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.HARD_FORKS.POS_ACTIVATION)T=__WEBPACK_IMPORTED_MODULE_2_common_blockchain_global_Blockchain_Genesis__["a"].difficultyTargetPOS;if(!T)throw{message:"Target is not defined"};if(Buffer.isBuffer(T))
T=__WEBPACK_IMPORTED_MODULE_3_common_utils_Convert__["a"].bufferToBigIntegerHex(T);let id=__WEBPACK_IMPORTED_MODULE_3_common_utils_Convert__["a"].bufferToBigIntegerHex(this.hash);let u=0;let pow=new BigInteger("1",16);while(pow.multiply(id).compare(T)<=0){++u;pow=pow.multiply(2);}
--u;this._level=u;return u;}
async calculateInterlink(){if(this.blockValidation.blockValidationType["skip-interlinks-update"]===true)return this.interlink;let interlink=[{height:-1,blockId:__WEBPACK_IMPORTED_MODULE_2_common_blockchain_global_Blockchain_Genesis__["a"].hashPrev}];if(this.height===0)return interlink;let blockLevel=0;let prevBlock=await this.blockValidation.getBlockCallBack(this.height-1);if(prevBlock===__WEBPACK_IMPORTED_MODULE_2_common_blockchain_global_Blockchain_Genesis__["a"])blockLevel=0;else
if(prevBlock){for(let i=0;i<prevBlock.interlink.length;++i)
interlink[i]=prevBlock.interlink[i];blockLevel=prevBlock.level;}
for(let i=1;i<=blockLevel;++i){if(i>interlink.length)
interlink.push({});interlink[i]={height:prevBlock.height,blockId:prevBlock.hash};}
return interlink;}
_validateInterlink(){let level=this.interlink.length-1;while(level>=0){let link=this.interlink[level];let linkedBlock=this.blockValidation.getBlockCallBack(link.height+1);if(level!==0){if(!__WEBPACK_IMPORTED_MODULE_5_common_utils_BufferExtended__["a"].safeCompare(linkedBlock.hash,link.blockId))
throw{message:"Interlink to Genesis is wrong! "};let linkedBlockLevel=linkedBlock.level;if(linkedBlockLevel<level)
throw{message:"Interlink level error",level:level}}else{if(linkedBlock!==__WEBPACK_IMPORTED_MODULE_2_common_blockchain_global_Blockchain_Genesis__["a"]||this.interlink[0].height!==-1||!__WEBPACK_IMPORTED_MODULE_5_common_utils_BufferExtended__["a"].safeCompare(this.interlink[0].blockId,__WEBPACK_IMPORTED_MODULE_2_common_blockchain_global_Blockchain_Genesis__["a"].hashPrev))
throw{message:"Interlink to Genesis is wrong! "}}
level--;}
return true;}
_supplementaryValidation(){return this.validateBlockInterlinks();}
_computeBlockHeaderPrefix(requestHeader){return Buffer.concat([__WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Block__["a"].prototype._computeBlockHeaderPrefix.call(this,requestHeader),this._serializeInterlink(),]);}
_serializeInterlink(){let list=[__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].serializeNumber1Byte(this.interlink.length)];for(let i=0;i<this.interlink.length;i++){if(i>0&&this.interlink[i-1].height===this.interlink[i].height){list.push(__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].serializeNumber3Bytes(0));}else{let heightBuffer=__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].serializeNumber3Bytes(this.interlink[i].height+2);let blockIdBuffer=this.interlink[i].blockId;list.push(heightBuffer);list.push(blockIdBuffer);}}
return Buffer.concat(list);}
_deserializeInterlink(buffer,offset){try{let numInterlink=__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].deserializeNumber1Bytes(buffer,offset);offset+=1;this.interlink=[];for(let i=0;i<numInterlink;++i){let height=__WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__["a"].deserializeNumber3Bytes(buffer,offset);offset+=3;if(height===0){this.interlink.push(this.interlink[i-1]);}else{let blockId=__WEBPACK_IMPORTED_MODULE_5_common_utils_BufferExtended__["a"].substr(buffer,offset,32);offset+=32;this.interlink.push({height:height-2,blockId:blockId});}}}catch(exception){console.log("Error deserialize interlink. ",exception);throw exception;}
return offset;}
deserializeBlock(buffer,height,reward,difficultyTargetPrev,offset=0,blockLengthValidation,onlyHeader){offset=__WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Block__["a"].prototype.deserializeBlock.apply(this,arguments);try{offset=this._deserializeInterlink(buffer,offset);}catch(exception){console.error("error deserialize a NiPoPoW block  ",exception,buffer);throw exception;}
return offset;}
_interlinksToJSON(interlinks){let data=[];let prevInterlink=null;for(let i=0;i<interlinks.length;i++){if(prevInterlink!==null&&prevInterlink.blockId.equals(interlinks[i].blockId)){data.push(0);}else
data.push({h:interlinks[i].height,bId:interlinks[i].blockId.toString("hex"),});prevInterlink=this.interlink[i];}
return data;}
_importInterlinksFromJSON(interlinks){let data=[];let prevInterlink=null;for(let i=0;i<interlinks.length;i++){if(interlinks[i]===0){data.push({height:prevInterlink.h,blockId:prevInterlink.bId,});}else{data.push({height:interlinks[i].h||interlinks[i].height,blockId:interlinks[i].bId||interlinks[i].blockId,});prevInterlink=interlinks[i];}}
return data;}
toJSON(){let answer=__WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Block__["a"].prototype.toJSON.call(this);answer.interlinks=this._interlinksToJSON(this.interlink);return answer;}
getBlockHeader(){let answer=__WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Block__["a"].prototype.getBlockHeader.call(this);answer.interlinks=this._interlinksToJSON(this.interlink);return answer;}
importBlockFromHeader(json){this.interlink=this._importInterlinksFromJSON(json.interlinks);return __WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Block__["a"].prototype.importBlockFromHeader.call(this,json);}
async validateBlockInterlinks(){if(!this.blockValidation.blockValidationType["skip-validation-interlinks"]){let interlink=await this.calculateInterlink();if(interlink.length!==this.interlink.length)
throw{message:"interlink has different sizes"};for(let i=0;i<interlink.length;i++){if(interlink[i].height!==this.interlink[i].height)
throw{message:"interlink height is different"};if(!__WEBPACK_IMPORTED_MODULE_5_common_utils_BufferExtended__["a"].safeCompare(interlink[i].blockId,this.interlink[i].blockId))
throw{message:"interlink prevBlock height is different"};}}
return true;}}
__webpack_exports__["a"]=(PPoWBlockchainBlock);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0__BufferExtended__=__webpack_require__(3);const BigInteger=__webpack_require__(36);class Convert{toString(data,base){return data.toString();}
toBufferHex(data,fixedSizeBuffer=true,resultNumBytes=32){if(typeof data==="string")
return Buffer.from(data,"hex");let str=data.toString(16);if(str.length%2!==0)
str="0"+str;if(fixedSizeBuffer===true&&str.length<2*resultNumBytes){let prefix="";for(let i=0;i<(2*resultNumBytes-str.length);++i)
prefix=prefix+"0";str=prefix+str;}
return Buffer.from(str,"hex");}
bufferToBigIntegerHex(data){return new BigInteger(data.toString("hex"),16);}}
__webpack_exports__["a"]=(new Convert());}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_ppow_blockchain_blocks_PPoW_Blockchain_Block_Data__=__webpack_require__(969);var __WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Block_Data__=__webpack_require__(252);var __WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_3_consts_const_global__=__webpack_require__(2);let inheritBlockData;if(__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].POPOW_PARAMS.ACTIVATED)inheritBlockData=__WEBPACK_IMPORTED_MODULE_0_common_blockchain_ppow_blockchain_blocks_PPoW_Blockchain_Block_Data__["a"];else inheritBlockData=__WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Block_Data__["a"];class MiniBlockchainBlockData extends inheritBlockData{constructor(blockchain,minerAddress,transactions,hashTransactions,hashData,hashAccountantTree){super(blockchain,minerAddress,transactions,hashTransactions,hashData,);this.hashAccountantTree=hashAccountantTree;if(this.hashAccountantTree===undefined)
this.computeAccountantTreeHashBlockData();if(!hashData)
this.computeHashBlockData();}
async validateBlockData(height,blockValidation){let result=await inheritBlockData.prototype.validateBlockData.call(this,height,blockValidation);if(!result)
return false;if(!this.hashAccountantTree||!Buffer.isBuffer(this.hashAccountantTree))
throw{message:'hashAccountantTree is empty'};if(!blockValidation.blockValidationType['skip-validation']&&!blockValidation.blockValidationType['skip-accountant-tree-validation']){let hashAccountantTree=this.calculateAccountantTreeHashBlockData();if(!__WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__["a"].safeCompare(hashAccountantTree,this.hashAccountantTree))
throw{message:"block.data hashAccountantTree is not right  ",hashAccountantTree:hashAccountantTree.toString("hex"),myHashAccoutantTree:this.hashAccountantTree.toString("hex")};}
return true;}
_computeBlockDataHeaderPrefix(onlyHeader=false){if(!Buffer.isBuffer(this.hashAccountantTree)||this.hashAccountantTree.length!==32)
this.computeAccountantTreeHashBlockData();return Buffer.concat([inheritBlockData.prototype._computeBlockDataHeaderPrefix.call(this,onlyHeader),this.hashAccountantTree,]);}
calculateAccountantTreeHashBlockData(){return this.blockchain.accountantTree.root.hash;}
computeAccountantTreeHashBlockData(){this.hashAccountantTree=this.calculateAccountantTreeHashBlockData();}
deserializeData(buffer,offset,onlyHeader=false){offset=inheritBlockData.prototype.deserializeData.call(this,buffer,offset,onlyHeader);this.hashAccountantTree=__WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__["a"].substr(buffer,offset,32);offset+=32;return offset;}}
__webpack_exports__["a"]=(MiniBlockchainBlockData);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Block_Data__=__webpack_require__(252);class PPoWBlockchainBlockData extends __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Block_Data__["a"]{}
__webpack_exports__["a"]=(PPoWBlockchainBlockData);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_transactions_Interface_Blockchain_Transactions__=__webpack_require__(399);var __WEBPACK_IMPORTED_MODULE_1__trasanction_Mini_Blockchain_Transaction__=__webpack_require__(250);class MiniBlockchainTransactions extends __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_transactions_Interface_Blockchain_Transactions__["a"]{_createTransaction(from,to,nonce,timeLock,version,txId,validateFrom,validateTo,validateNonce,validateTimeLock,validateVersion,validateTxId){return new __WEBPACK_IMPORTED_MODULE_1__trasanction_Mini_Blockchain_Transaction__["a"](this.blockchain,from,to,nonce,timeLock,version,txId,validateFrom,validateTo,validateNonce,validateTimeLock,validateVersion,validateTxId);}}
__webpack_exports__["a"]=(MiniBlockchainTransactions);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Blocks__=__webpack_require__(404);var __WEBPACK_IMPORTED_MODULE_1__utils_Revert_Actions_Revert_Actions__=__webpack_require__(118);class MiniBlockchainBlocks extends __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Blocks__["a"]{async spliceBlocks(after,showUpdate=true,revertActions,removeTransactions=true){let oldLength=this.length;if(!revertActions)
revertActions=new __WEBPACK_IMPORTED_MODULE_1__utils_Revert_Actions_Revert_Actions__["a"](this.blockchain);let removedBlocks=[];if(after===0){this.blockchain.accountantTree.clear();}else
if(removeTransactions)
for(let i=oldLength-1;i>=after;i--){let block=await this.blockchain.getBlock(i);removedBlocks.push(block);for(let j=block.data.transactions.transactions.length-1;j>=0;j--)
block.data.transactions.transactions[j].processTransaction(-1,block.data.minerAddress,undefined,showUpdate);this.blockchain.accountantTree.updateAccount(block.data.minerAddress,-block.reward,undefined,undefined,showUpdate);revertActions.push({name:"block-removed",height:block.height,data:block,});}
await __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Blocks__["a"].prototype.spliceBlocks.apply(this,arguments);return removedBlocks;}}
__webpack_exports__["a"]=(MiniBlockchainBlocks);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1_consts_global__=__webpack_require__(45);var __WEBPACK_IMPORTED_MODULE_2__Mini_Blockchain_Advanced__=__webpack_require__(396);var __WEBPACK_IMPORTED_MODULE_3_common_blockchain_global_Blockchain_Genesis__=__webpack_require__(16);var __WEBPACK_IMPORTED_MODULE_4_common_sockets_protocol_propagation_Node_Blockchain_Propagation__=__webpack_require__(119);var __WEBPACK_IMPORTED_MODULE_5__Mini_Blockchain__=__webpack_require__(397);var __WEBPACK_IMPORTED_MODULE_6_common_utils_GZip__=__webpack_require__(176);class MiniBlockchainLight extends __WEBPACK_IMPORTED_MODULE_2__Mini_Blockchain_Advanced__["a"]{constructor(agent){super(agent);this._initializeMiniBlockchainLight();}
_initializeMiniBlockchainLight(){this.proofPi=undefined;this.blocks.clearBlocks();this.blocks.blocksStartingPoint=0;this.lightPrevDifficultyTargets={};this.lightPrevTimeStamps={};this.lightPrevHashPrevs={};this.lightProofCalculated={};this._lightLoadingDifficultyNextDifficulty=null;}
getSavingSafePosition(height){if(height===undefined)height=this.blocks.length-1;height=height-__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.LIGHT.SAFETY_LAST_BLOCKS;return height-(height+1)%__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.DIFFICULTY.NO_BLOCKS}
async includeBlockchainBlock(block,resetMining,socketsAvoidBroadcast,saveBlock,revertActions,showUpdate){if(!block.blockValidation.blockValidationType['skip-validation']){console.log("block.height > ",block.height,block.hash.toString("hex"));if(await this.simulateNewBlock(block,false,revertActions,async()=>await this.inheritBlockchain.prototype.includeBlockchainBlock.call(this,block,resetMining,"all",saveBlock,revertActions,showUpdate),showUpdate)===false)throw{message:"Error Including Blockchain Light Block"};if(saveBlock)
__WEBPACK_IMPORTED_MODULE_4_common_sockets_protocol_propagation_Node_Blockchain_Propagation__["a"].propagateBlock(block,socketsAvoidBroadcast)}else{if(!(await this.inheritBlockchain.prototype.includeBlockchainBlock.call(this,block,resetMining,"all",saveBlock,revertActions)))
throw{message:"Error Including Blockchain Light Block"};}
return true;}
async _onBlockCreated(block,saveBlock){__WEBPACK_IMPORTED_MODULE_2__Mini_Blockchain_Advanced__["a"].prototype._onBlockCreated.call(this,block,saveBlock);if(!(await this._recalculateLightPrevs(block.height,block,this.getSerializedAccountantTree(block.height),this.getSerializedAccountantTree(block.height,true),saveBlock)))
throw{message:"_recalculateLightPrevs failed"};}
async _recalculateLightPrevs(height,block,serialization,serializationGzip,save=true){if(block===undefined||block===null)
block=__WEBPACK_IMPORTED_MODULE_3_common_blockchain_global_Blockchain_Genesis__["a"];this.lightPrevDifficultyTargets[height+1]=block.difficultyTarget;this.lightPrevTimeStamps[height+1]=block.timeStamp;this.lightPrevHashPrevs[height+1]=block.hash;this._deleteOldLightSettings();try{if(this.agent.light&&save)
if(this.lightPrevDifficultyTargets[this.getSavingSafePosition(height)]!==undefined)
await this._saveLightSettings(this.getSavingSafePosition(height));}catch(exception){console.error("Couldn't save Light Settings _saveLightSettings",exception);}
return true;}
async _saveLightSettings(diffIndex){if(true)
return true;try{__WEBPACK_IMPORTED_MODULE_1_consts_global__["a"].MINIBLOCKCHAIN_LIGHT_CONFIGURATION_SAVED=false;console.log("_LightPrevDifficultyTarget saved");if(diffIndex===undefined)
diffIndex=this.getSavingSafePosition();if(!(await this.db.save(this._blockchainFileName+"_LightSettings_diffIndex",diffIndex)))
throw{message:"Couldn't be saved _LightSettings_diffIndex",diffIndex};if(this.lightPrevDifficultyTargets[diffIndex]===undefined)
throw{message:"_saveLightSettings is undefined ",diffIndex:diffIndex};let treeSerialization=this.getSerializedAccountantTree(diffIndex);if(!(await this.accountantTree.saveMiniAccountant(true,undefined,treeSerialization)))
throw{message:"saveMiniAccountant",diffIndex};if(!(await this.db.save(this._blockchainFileName+"_LightSettings_prevDifficultyTarget",this.lightPrevDifficultyTargets[diffIndex])))
throw{message:"Couldn't be saved _LightSettings_prevDifficultyTarget",diffIndex:diffIndex};if(!(await this.db.save(this._blockchainFileName+"_LightSettings_prevDifficultyTargetStart",this.lightPrevDifficultyTargets[diffIndex+1])))
throw{message:"Couldn't be saved _LightSettings_prevDifficultyTargetStart",diffIndex:diffIndex};if(!(await this.db.save(this._blockchainFileName+"_LightSettings_prevTimestamp",this.lightPrevTimeStamps[diffIndex])))
throw{message:"Couldn't be saved _LightSettings_prevTimestamp ",diffIndex:diffIndex};if(!(await this.db.save(this._blockchainFileName+"_LightSettings_prevHashPrev",this.lightPrevHashPrevs[diffIndex])))
throw{message:"Couldn't be saved _LightSettings_prevHashPrev ",diffIndex:diffIndex};}catch(exception){console.error("Error saving LIGHT SETTINGS",exception);console.error("Error saving LIGHT SETTINGS",exception);__WEBPACK_IMPORTED_MODULE_1_consts_global__["a"].MINIBLOCKCHAIN_LIGHT_CONFIGURATION_SAVED=true;throw exception;}
__WEBPACK_IMPORTED_MODULE_1_consts_global__["a"].MINIBLOCKCHAIN_LIGHT_CONFIGURATION_SAVED=true;return true;}
async _loadLightSettings(serializationAccountantTreeInitial){console.log("_loadLightSettings load");let numBlocks=this.blocks.loadingManager.readBlockchainLength();if(numBlocks===false)return{result:false};let diffIndex=await this.db.get(this._blockchainFileName+"_LightSettings_diffIndex");if(diffIndex===null||diffIndex===undefined)
diffIndex=this.getSavingSafePosition(numBlocks-1);console.log("DIFFFINDEXAFTER",diffIndex);if(numBlocks>__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.LIGHT.SAFETY_LAST_BLOCKS){this.lightAccountantTreeSerializations[diffIndex]=serializationAccountantTreeInitial;this.lightAccountantTreeSerializationsGzipped[diffIndex]=await __WEBPACK_IMPORTED_MODULE_6_common_utils_GZip__["a"].zip(serializationAccountantTreeInitial);this.lightPrevDifficultyTargets[diffIndex]=await this.db.get(this._blockchainFileName+"_LightSettings_prevDifficultyTarget");if(this.lightPrevDifficultyTargets[diffIndex]===null){console.error("_LightSettings_prevDifficultyTarget was not found");return{result:false};}
this._lightLoadingDifficultyNextDifficulty=await this.db.get(this._blockchainFileName+"_LightSettings_prevDifficultyTargetStart");this.lightPrevTimeStamps[diffIndex]=await this.db.get(this._blockchainFileName+"_LightSettings_prevTimestamp");if(this.lightPrevTimeStamps[diffIndex]===null){console.error("_LightSettings_prevTimestamp was not found");return{result:false};}
this.lightPrevHashPrevs[diffIndex]=await this.db.get(this._blockchainFileName+"_LightSettings_prevHashPrev");if(this.lightPrevHashPrevs[diffIndex]===null){console.error("_LightSettings_prevHashPrev was not found");return{result:false};}}else throw{message:"Error Loading Light Settings"};this.blocks.blocksStartingPoint=diffIndex;console.log("diffIndex",diffIndex);console.log("this.lightPrevDifficultyTarget",this.lightPrevDifficultyTargets[diffIndex]!==undefined?this.lightPrevDifficultyTargets[diffIndex].toString("hex"):'');console.log("",this.lightPrevDifficultyTargets[diffIndex]!==undefined?this.lightPrevDifficultyTargets[diffIndex].toString("hex"):'');console.log("this.lightPrevTimestamp",this.lightPrevTimeStamps[diffIndex]);console.log("this.lightPrevHashPrev",this.lightPrevHashPrevs[diffIndex]!==undefined?this.lightPrevHashPrevs[diffIndex].toString("hex"):'');return{result:true,numBlocks:numBlocks,diffIndex:diffIndex};}
async saveBlockchainTerminated(){await __WEBPACK_IMPORTED_MODULE_2__Mini_Blockchain_Advanced__["a"].prototype.saveBlockchainTerminated.call(this);if(true)
return true;try{__WEBPACK_IMPORTED_MODULE_1_consts_global__["a"].MINIBLOCKCHAIN_LIGHT_SAVED=false;if(this.blocks.length===0)
throw{message:"Nothing to Save"};await this._saveLightSettings();if(!(await this.inheritBlockchain.prototype.saveBlockchain.call(this,this.blocks.length-this.getSavingSafePosition())))
throw{message:"couldn't save the blockchain"};}catch(exception){console.error("Couldn't save MiniBlockchain",exception);__WEBPACK_IMPORTED_MODULE_1_consts_global__["a"].MINIBLOCKCHAIN_LIGHT_SAVED=true;return false;}
__WEBPACK_IMPORTED_MODULE_1_consts_global__["a"].MINIBLOCKCHAIN_LIGHT_SAVED=true;return true;}
async _loadBlockchain(){if(true)
return true;try{if(!(await this.accountantTree.loadMiniAccountant(undefined,undefined,true)))
throw{message:"Problem Loading Mini Accountant Tree Initial"};console.log("loading blockchain balances ",this.accountantTree.calculateNodeCoins(),this.accountantTree.root.hash.toString("hex"));let serializationAccountantTreeInitial=this.accountantTree.serializeMiniAccountant();let answer=await this._loadLightSettings(serializationAccountantTreeInitial)
if(!answer.result)
throw{message:"couldn't load the Light Settings"};this._difficultyNotValidated=false;if(!(await this.inheritBlockchain.prototype._loadBlockchain.call(this,answer.diffIndex-1)))
throw{message:"Problem loading the blockchain"};console.log("this.accountantTree final",this.accountantTree.root.hash);return true;}catch(exception){console.error("Couldn't load Light MiniBlockchain",exception);this.accountantTree.createRoot();this._initializeMiniBlockchainLight();return false;}}
_getLoadBlockchainValidationType(indexStart,i,numBlocks,onlyLastBlocks){let validationType={};if(this.agent!==undefined&&this.agent.light===true){if(i-indexStart<numBlocks+__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.TIMESTAMP.VALIDATION_NO_BLOCKS)
validationType["skip-validation-timestamp"]=true;if(!this._difficultyNotValidated)
validationType["skip-difficulty-recalculation"]=true;if((i+1)%__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.DIFFICULTY.NO_BLOCKS===0&&(i-indexStart)>=__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.DIFFICULTY.NO_BLOCKS){this._difficultyNotValidated=true;validationType["skip-difficulty-recalculation"]=false;}
console.log("_getLoadBlockchainValidationType",i,(i-indexStart),this._difficultyNotValidated);}
return validationType;}
async _loadBlock(indexStart,i,blockValidation){let block=await __WEBPACK_IMPORTED_MODULE_2__Mini_Blockchain_Advanced__["a"].prototype._loadBlock.call(this,indexStart,i,blockValidation);if((i+1)%__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.DIFFICULTY.NO_BLOCKS===0&&i===indexStart){block.difficultyTarget=this._lightLoadingDifficultyNextDifficulty;this.lightPrevDifficultyTargets[i+1]=this._lightLoadingDifficultyNextDifficulty;}
return block;}
_deleteOldLightSettings(){let index=this.blocks.length-__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.LIGHT.SAFETY_LAST_ACCOUNTANT_TREES-2;while(this.lightPrevDifficultyTargets.hasOwnProperty(index)){delete this.lightAccountantTreeSerializations[index];delete this.lightAccountantTreeSerializationsGzipped[index];delete this.lightPrevDifficultyTargets[index];delete this.lightPrevHashPrevs[index];delete this.lightPrevTimeStamps[index];index--;}}
getBlock(height=this.blocks.length){if(this.agent!==undefined&&this.agent.light===true&&height!==0){if(this.proofPi!==undefined){let proofPiBlock=this.proofPi.hasBlock(height-1);if(proofPiBlock!==undefined&&proofPiBlock!==null)
return proofPiBlock;}}
return __WEBPACK_IMPORTED_MODULE_2__Mini_Blockchain_Advanced__["a"].prototype.getBlock.call(this,height);}
getDifficultyTarget(height=this.blocks.length){if(this.agent&&this.agent.light===true&&height!==0){if(this.lightPrevDifficultyTargets[height])
return this.lightPrevDifficultyTargets[height];}
return __WEBPACK_IMPORTED_MODULE_2__Mini_Blockchain_Advanced__["a"].prototype.getDifficultyTarget.call(this,height);}
getTimeStamp(height=this.blocks.length){if(this.agent.light===true&&height!==0){if(this.lightPrevTimeStamps[height]!==undefined)
return this.lightPrevTimeStamps[height];}
return __WEBPACK_IMPORTED_MODULE_2__Mini_Blockchain_Advanced__["a"].prototype.getTimeStamp.call(this,height);}
getHash(height=this.blocks.length){if(this.agent.light===true&&height!==0)
if(this.lightPrevHashPrevs[height]!==undefined)
return this.lightPrevHashPrevs[height];return __WEBPACK_IMPORTED_MODULE_2__Mini_Blockchain_Advanced__["a"].prototype.getHash.call(this,height);}}
__webpack_exports__["a"]=(MiniBlockchainLight);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_mini_blockchain_Mini_Blockchain_Mining__=__webpack_require__(974);class MainBlockchainMining extends __WEBPACK_IMPORTED_MODULE_0_common_blockchain_mini_blockchain_Mini_Blockchain_Mining__["a"]{constructor(blockchain,minerAddress){super(blockchain,minerAddress);this.blockchain.mining=this;this.blockchain.miningSolo=this;}
startMining(){console.log("Mining started");__WEBPACK_IMPORTED_MODULE_0_common_blockchain_mini_blockchain_Mini_Blockchain_Mining__["a"].prototype.startMining.call(this);}
stopMining(){console.log("Mining Stopped");__WEBPACK_IMPORTED_MODULE_0_common_blockchain_mini_blockchain_Mini_Blockchain_Mining__["a"].prototype.stopMining.call(this);}}
__webpack_exports__["a"]=(MainBlockchainMining);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";let InterfaceBlockchainMining;if(false){InterfaceBlockchainMining=require('common/blockchain/interface-blockchain/mining/backbone/Blockchain-Backbone-Mining').default;}else{InterfaceBlockchainMining=__webpack_require__(414).default;}
class MiniBlockchainMining extends InterfaceBlockchainMining{_simulatedNextBlockMining(nextBlock){nextBlock.data.computeAccountantTreeHashBlockData();nextBlock.data.computeHashBlockData();return true;}}
__webpack_exports__["a"]=(MiniBlockchainMining);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0__Interface_Blockchain_Mining__=__webpack_require__(976);var __WEBPACK_IMPORTED_MODULE_1__Interface_Blockchain_Mining_Workers_List__=__webpack_require__(979);var __WEBPACK_IMPORTED_MODULE_2_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_3_common_utils_Semaphore_Processing__=__webpack_require__(403);var __WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__=__webpack_require__(12);var __WEBPACK_IMPORTED_MODULE_5_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_6_common_blockchain_global_Blockchain_Genesis__=__webpack_require__(16);class InterfaceBlockchainMiningWorkers extends __WEBPACK_IMPORTED_MODULE_0__Interface_Blockchain_Mining__["a"]{constructor(blockchain,minerAddress,miningFeePerByte){super(blockchain,minerAddress,miningFeePerByte);this._workerFinished=false;this._workerResolve=undefined;this.block=null;this.WORKER_NONCES_WORK=42;this.workers=new __WEBPACK_IMPORTED_MODULE_1__Interface_Blockchain_Mining_Workers_List__["a"](this);}
mine(block,difficultyTarget,start,end,height){let blockBuffer;if(Buffer.isBuffer(block))
blockBuffer=block;else
if(!Buffer.isBuffer(block)&&typeof block==='object'){blockBuffer=Buffer.concat([__WEBPACK_IMPORTED_MODULE_2_common_utils_Serialization__["a"].serializeBufferRemovingLeadingZeros(__WEBPACK_IMPORTED_MODULE_2_common_utils_Serialization__["a"].serializeNumber4Bytes(block.height)),__WEBPACK_IMPORTED_MODULE_2_common_utils_Serialization__["a"].serializeBufferRemovingLeadingZeros(block.difficultyTargetPrev),block._computeBlockHeaderPrefix(true)]);}
this.bestHash=__WEBPACK_IMPORTED_MODULE_5_consts_const_global__["a"].BLOCKCHAIN.BLOCKS_MAX_TARGET_BUFFER;this.bestHashNonce=-1;if(__WEBPACK_IMPORTED_MODULE_6_common_blockchain_global_Blockchain_Genesis__["a"].isPoSActivated(height))
return this._minePOS(block,difficultyTarget);this.block=block;this.difficulty=difficultyTarget;this.start=start;this.end=end;this._nonce=start;this._workerFinished=false;let promiseResolve=new Promise((resolve)=>{this._workerResolve=resolve});this.workers.initializeWorkers(blockBuffer,difficultyTarget);return promiseResolve;}
_getWorker(){return{};}
_suspendMiningWorking(){this._workerFinished=true;}
async setWorkers(newWorkers){if(newWorkers>this.workers.workers)
await this.increaseWorkers(newWorkers-this.workers.workers);else
if(newWorkers<this.workers.workers)
await this.decreaseWorkers(-(newWorkers-this.workers.workers));}
async increaseWorkers(number){if(number===0)
return;console.log("number",number);this.workers.addWorkers(number);if(!this.started&&this.workers.workers>0)
await this.startMining();this.workers.createWorkers();}
async decreaseWorkers(number){if(number===0)
return;console.log("number",number);this.workers.addWorkers(-number);this.workers.reduceWorkers();if(this.workers.workers===0)
await this.stopMining();}
async startMining(){if(this.started)
return;__WEBPACK_IMPORTED_MODULE_0__Interface_Blockchain_Mining__["a"].prototype.startMining.call(this);if(this.workers.workers===0)
await this.setWorkers(1);}
async stopMining(){__WEBPACK_IMPORTED_MODULE_0__Interface_Blockchain_Mining__["a"].prototype.stopMining.call(this);if(this.workers.workers!==0)
await this.setWorkers(0);this.checkFinished();}
checkFinished(){if(this._nonce>this.end||(this.started===false)||this.resetForced||(this.reset&&this.useResetConsensus)){this.workers.suspendWorkers();this._suspendMiningWorking();if(this._workerResolve)
this._workerResolve({result:false,hash:this.bestHash,nonce:this.bestHashNonce});return true;}
if(this.reset&&this.useResetConsensus){console.warn("WORKERS MINING RESTARTED",this.reset);this._hashesPerSecond=0;}
return false;}
_puzzleReceived(worker,event){if(this._workerFinished)
return;if(this.checkFinished())
return false;if(event.data.message==="worker nonce worked"){this._hashesPerSecond+=event.data.nonceWork;}else
if(event.data.message==="results"){worker.dateLast=new Date();if(worker.suspended)
return;if(!event.data.hash)
console.log("Worker Error");else{let compare=0;for(let i=0,l=event.data.hash.length;i<l;i++)
if(event.data.hash[i]<this.bestHash[i]){compare=-1;break;}
else if(event.data.hash[i]>this.bestHash[i]){compare=1;break;}
if(compare===-1){this.bestHash=new Buffer(event.data.hash);this.bestHashNonce=event.data.nonce;if(this.bestHash.compare(this.difficulty)<=0){this._suspendMiningWorking();this.workers.suspendWorkers();this._workerResolve({result:true,hash:new Buffer(event.data.hash),nonce:event.data.nonce,});return;}}}
if(worker.suspended)
return;worker.postMessage({message:"new-nonces",nonce:this._nonce,count:this.WORKER_NONCES_WORK});this._nonce+=this.WORKER_NONCES_WORK;}else
if(event.data.message==="algorithm"){console.log("algorithm information",event.data.answer);if(event.data.answer==="WebAssembly supported"||event.data.answer==="ASM.JS supported"){if(event.data.answer==="ASM.JS supported")
__WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__["a"].emit("validation/status",{type:"MINING",message:"WebAssembly not supported"});this.workers._initializeWorker(worker);}else{__WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__["a"].emit("validation/status",{type:"MINING",message:"ASM.JS not supported"});this.stopMining();}}else
if(event.data.message==="error"){}
if(event.data.message==="log"){if(__WEBPACK_IMPORTED_MODULE_5_consts_const_global__["a"].DEBUG)
console.log("worker",event.data.log);}}}
__webpack_exports__["a"]=(InterfaceBlockchainMiningWorkers);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0__transactions_selector_Mining_Transactions_Selector__=__webpack_require__(977);var __WEBPACK_IMPORTED_MODULE_1_common_sockets_protocol_propagation_Node_Blockchain_Propagation__=__webpack_require__(119);var __WEBPACK_IMPORTED_MODULE_2_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_3_consts_global__=__webpack_require__(45);var __WEBPACK_IMPORTED_MODULE_4_common_blockchain_global_Blockchain_Mining_Reward__=__webpack_require__(56);var __WEBPACK_IMPORTED_MODULE_5__Interface_Blockchain_Mining_Basic__=__webpack_require__(978);var __WEBPACK_IMPORTED_MODULE_6_common_events_Status_Events__=__webpack_require__(12);var __WEBPACK_IMPORTED_MODULE_7_common_utils_coins_WebDollar_Coins__=__webpack_require__(32);var __WEBPACK_IMPORTED_MODULE_8_common_utils_Revert_Actions_Revert_Actions__=__webpack_require__(118);var __WEBPACK_IMPORTED_MODULE_9_src_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_10_common_utils_helpers_Utils__=__webpack_require__(40);class InterfaceBlockchainMining extends __WEBPACK_IMPORTED_MODULE_5__Interface_Blockchain_Mining_Basic__["a"]{constructor(blockchain,minerAddress,miningFeePerByte){super(blockchain,minerAddress,miningFeePerByte);this.miningTransactionSelector=new __WEBPACK_IMPORTED_MODULE_0__transactions_selector_Mining_Transactions_Selector__["a"](blockchain);this.bestHash=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].BLOCKCHAIN.BLOCKS_MAX_TARGET_BUFFER;this.bestHashNonce=-1;}
_simulatedNextBlockMining(nextBlock){}
async getNextBlock(showLogsOnlyOnce){let nextBlock,nextTransactions;try{nextTransactions=await this.miningTransactionSelector.selectNextTransactions(this.miningFeePerByte,showLogsOnlyOnce);nextBlock=await this.blockchain.blockCreator.createBlockNew(this.unencodedMinerAddress,undefined,nextTransactions);nextBlock.timeStamp=await nextBlock.getTimestampForMining();nextBlock.reward=__WEBPACK_IMPORTED_MODULE_4_common_blockchain_global_Blockchain_Mining_Reward__["a"].getReward(nextBlock.height);await nextBlock.updateInterlink();}catch(Exception){console.error("Error creating next block ",Exception,nextBlock);}
let revertActions=new __WEBPACK_IMPORTED_MODULE_8_common_utils_Revert_Actions_Revert_Actions__["a"](this.blockchain);try{if(await this.blockchain.semaphoreProcessing.processSempahoreCallback(()=>this.blockchain.simulateNewBlock(nextBlock,true,revertActions,()=>this._simulatedNextBlockMining(nextBlock,false),false))===false)throw{message:"Mining1 returned False"};}catch(Exception){console.error("Error processBlocksSempahoreCallback ",Exception,nextBlock?nextBlock.toJSON():'');await revertActions.revertOperations();}
return nextBlock;}
async mineNextBlock(suspend){let showLogsOnlyOnce=true;while(this.started&&!__WEBPACK_IMPORTED_MODULE_3_consts_global__["a"].TERMINATED){try{let nextBlock=await this.getNextBlock(showLogsOnlyOnce);if(!nextBlock){console.warn("nextBlock couldn't be created");await __WEBPACK_IMPORTED_MODULE_10_common_utils_helpers_Utils__["a"].sleep(1000);continue;}
if(!Buffer.isBuffer(nextBlock)){if(!nextBlock)
throw{message:"block is undefined"};nextBlock._computeBlockHeaderPrefix(true);}
let start=Math.floor(Math.random()*3700000000);let end=0xFFFFFFFF;await this.mineBlock(nextBlock,nextBlock.difficultyTargetPrev,start,end,nextBlock.height,showLogsOnlyOnce);}catch(exception){console.log("Mining Exception",exception);this.stopMining();}
showLogsOnlyOnce=false;}}
async mineBlock(block,difficulty,start,end,height,showLogsOnlyOnce){if(showLogsOnlyOnce){console.log("");console.log(" ----------- mineBlock-------------",height,"  ",difficulty.toString("hex"));}
try{let answer;try{answer=await this.mine(block,difficulty,start,end,height);}catch(exception){console.error("Couldn't mine block "+block.height,exception);answer={result:false,};}
if(answer&&answer.result&&this.blockchain.blocks.length===block.height){console.warn("----------------------------------------------------------------------------");console.warn("WebDollar Block was mined ",block.height," nonce (",answer.nonce+")","timestamp",block.timeStamp,answer.hash.toString("hex")," reward",(block.reward/__WEBPACK_IMPORTED_MODULE_7_common_utils_coins_WebDollar_Coins__["a"].WEBD),"WEBD",block.data.minerAddress.toString("hex"));console.warn("difficulty prev: ",block.difficultyTargetPrev.toString("hex"));console.warn("----------------------------------------------------------------------------");this.blockchain.mining.timeMinedBlock=new Date().getTime();let i=this.blockchain.blocks.length-1;let count=0;while(!__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].DEBUG&&i>=0&&(await this.blockchain.getBlock(i)).data.minerAddress.equals(this.unencodedMinerAddress)){count++;i--;if(count>=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINING_POOL.MINING.MAXIMUM_BLOCKS_TO_MINE_BEFORE_ERROR){__WEBPACK_IMPORTED_MODULE_6_common_events_Status_Events__["a"].emit("blockchain/logs",{message:"You mined way too many blocks"});break;}}
let revertActions=new __WEBPACK_IMPORTED_MODULE_8_common_utils_Revert_Actions_Revert_Actions__["a"](this.blockchain);try{if(await this.blockchain.semaphoreProcessing.processSempahoreCallback(()=>{if(this.blockchain.blocks.length!==block.height)
return false;block.hash=answer.hash;block.nonce=answer.nonce;block.hashChain=block.calculateChainHash();return this.blockchain.includeBlockchainBlock(block,false,"all",true,revertActions,false);})===false)throw{message:"Mining2 returned false"};revertActions.push({name:"block-added",height:block.height});__WEBPACK_IMPORTED_MODULE_1_common_sockets_protocol_propagation_Node_Blockchain_Propagation__["a"].propagateLastBlockFast(block);await block.data.transactions.confirmTransactions();__WEBPACK_IMPORTED_MODULE_6_common_events_Status_Events__["a"].emit("blockchain/new-blocks",{});console.warn("----------------------------------------------------------------------------");console.warn("Block mined successfully");console.warn("----------------------------------------------------------------------------");}catch(exception){console.error("Mining processBlocksSempahoreCallback raised an error ",block.height,exception);await revertActions.revertOperations();}}else
if(!(answer&&answer.result))
console.error("block ",block.height," was not mined...");if(this.reset){this.reset=false;this._hashesPerSecond=0;}}catch(Exception){console.error("Error mining block ",Exception,(block!==null?block.toJSON():''));throw Exception;}}
calculateHash(){return this.block.computeHash.apply(this.block,arguments);}
async getMedianTimestamp(){return this.blockchain.blocks.timestampBlocks.getMedianTimestamp(this.block.height,this.block.blockValidation);}
async _minePOS(block,difficultyTarget){this.end=0;this.block=block;let whoIsMining=this.block.posMinerAddress||block.data.minerAddress;let balance;if(this._miningBalances)
balance=this._miningBalances[whoIsMining.toString("hex")];else
balance=this.blockchain.accountantTree.getBalance(whoIsMining);let medianTimestamp=Math.ceil(await this.getMedianTimestamp());if(true&&await __WEBPACK_IMPORTED_MODULE_9_src_main_blockchain_Blockchain__["a"].Wallet.isAddressEncrypted(whoIsMining))
return{result:false,hash:Buffer.from(__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].BLOCKCHAIN.BLOCKS_MAX_TARGET_BUFFER),nonce:0,pos:{timestamp:medianTimestamp,posSignature:undefined,posMinerAddress:this.block.posMinerAddress?this.block.posMinerAddress:undefined,posMinerPublicKey:undefined,}};if(!balance||balance<__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].BLOCKCHAIN.POS.MINIMUM_AMOUNT*__WEBPACK_IMPORTED_MODULE_7_common_utils_coins_WebDollar_Coins__["a"].WEBD){await this.blockchain.sleep(__WEBPACK_IMPORTED_MODULE_9_src_main_blockchain_Blockchain__["a"].MinerPoolManagement.minerPoolStarted?10000:1000);console.warn("Not enough funds to mine POS. It is required "+__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].BLOCKCHAIN.POS.MINIMUM_AMOUNT+" WEBD to mine POS");this.block.timeStamp=medianTimestamp;let posSignature=await this.block._signPOSSignature();return{result:false,hash:Buffer.from(__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].BLOCKCHAIN.BLOCKS_MAX_TARGET_BUFFER),nonce:0,pos:{timestamp:medianTimestamp,posSignature:posSignature.signature,posMinerAddress:this.block.posMinerAddress?this.block.posMinerAddress:undefined,posMinerPublicKey:posSignature.publicKey,}};}
let exceptionLogged=false;let i=0,done=false;let errors=0;while(this.started&&!this.resetForced&&!(this.reset&&this.useResetConsensus)&&!done){try{if(this.blockchain.blocks.timestampBlocks.validateNetworkAdjustedTime(medianTimestamp+i,this.block.height)){let hash=await this.calculateHash(medianTimestamp+i,whoIsMining,balance);this.block.timeStamp=medianTimestamp+i;if(hash.compare(this.bestHash)<0){this.bestHash=hash;this.bestHashNonce=medianTimestamp+i;if(this.bestHash.compare(difficultyTarget)<=0){let posSignature=await this.block._signPOSSignature();return{result:true,hash:hash,nonce:0,pos:{timestamp:medianTimestamp+i,posSignature:posSignature.signature,posMinerAddress:this.block.posMinerAddress?this.block.posMinerAddress:undefined,posMinerPublicKey:posSignature.publicKey,}};}}
if(__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].DEBUG&&i%300===0&&!exceptionLogged){console.log("medianTimestamp ",medianTimestamp," ",i," timestamp ",medianTimestamp+i,hash.toString("hex"));await this.blockchain.sleep(5);}
this._hashesPerSecond++;i++;}else{await this.blockchain.sleep(500);}}catch(exception){if(typeof exception==="object"&&exception.message==="Timestamp of block is less than the network-adjusted time"){if(__WEBPACK_IMPORTED_MODULE_9_src_main_blockchain_Blockchain__["a"].MinerPoolManagement.minerPoolStarted&&errors>30)
break;errors++;}else{done=true;exceptionLogged=true;console.error(exception);}
await this.blockchain.sleep(500);}}
this.block.timeStamp=medianTimestamp;let hash=await this.calculateHash(this.block.timeStamp,whoIsMining,balance);let posSignature=await this.block._signPOSSignature();return{result:false,hash:hash,nonce:0,pos:{timestamp:medianTimestamp,posSignature:posSignature.signature,posMinerAddress:this.block.posMinerAddress?this.block.posMinerAddress:undefined,posMinerPublicKey:posSignature.publicKey,}};}
async _mineNonces(start,end){let nonce=start;if(start<0||end<0||start>end)
return{result:false,hash:new Buffer(__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].BLOCKCHAIN.BLOCKS_MAX_TARGET_BUFFER),nonce:-1,};try{while(nonce<=end&&this.started&&!this.resetForced&&!(this.reset&&this.useResetConsensus)){let hash=await this.calculateHash(nonce);if(hash.compare(this.bestHash)<0){this.bestHash=hash;this.bestHashNonce=nonce;if(this.bestHash.compare(this.difficulty)<=0){return{result:true,nonce:this.bestHashNonce,hash:this.bestHash,};}}
nonce++;this._hashesPerSecond++;}}catch(exception){console.error("Error _mineNonces","nonce",nonce,start,end);if(__WEBPACK_IMPORTED_MODULE_9_src_main_blockchain_Blockchain__["a"].MinerPoolManagement.minerPoolStarted)
this.resetForced=true;}
if(__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].DEBUG&&Math.random()<0.05){console.log("current bestHash -",this.bestHash.toString("hex")," target -",this.difficulty.toString("hex"));await this.blockchain.sleep(5);}
return{result:false,hash:this.bestHash,nonce:this.bestHashNonce}}
async mine(block,difficulty,start,end,height){if(start===undefined)start=0;if(end===undefined)end=0xFFFFFFFF;this.block=block;this.difficulty=difficulty;this.bestHash=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].BLOCKCHAIN.BLOCKS_MAX_TARGET_BUFFER;this.bestHashNonce=-1;try{await this._mineNonces(start,end);}catch(exception){console.log("Error Mining ",exception)}}}
__webpack_exports__["a"]=(InterfaceBlockchainMining);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_2__transactions_wizard_Interface_Blockchain_Transactions_Wizard__=__webpack_require__(251);var __WEBPACK_IMPORTED_MODULE_3__addresses_Interface_Blockchain_Address_Helper__=__webpack_require__(17);class MiningTransactionsSelector{constructor(blockchain){this.blockchain=blockchain;this._transactions=[];}
async validateTransactionId(txId){let response=await this.blockchain.transactions.checkVirtualizedTxId(txId);if(response)
return false;else
return true;}
async validateTransaction(transaction,miningFeePerByte){for(let j=0;j<transaction.from.addresses.length;j++){if(this._countAddresses(transaction.from.addresses[j].unencodedAddress,true,false)+1>__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].SPAM_GUARDIAN.TRANSACTIONS.MAXIMUM_IDENTICAL_INPUTS)
throw{message:"too many inputs",from:transaction.from.addresses[j]};if(transaction.from.addresses[j].amount<__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].SETTINGS.MEM_POOL.MINIMUM_TRANSACTION_AMOUNT)
throw{message:"amount too small"};}
for(let j=0;j<transaction.to.addresses.length;j++){if(this._countAddresses(transaction.to.addresses[j].unencodedAddress,false,true)+1>__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].SPAM_GUARDIAN.TRANSACTIONS.MAXIMUM_IDENTICAL_OUTPUTS)
throw{message:"too many outputs",from:transaction.to.addresses[j]};if(transaction.to.addresses[j].amount<__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].SETTINGS.MEM_POOL.MINIMUM_TRANSACTION_AMOUNT)
throw{message:"amount too small"};}
if(await this.validateTransactionId(transaction.txId)===false)
throw{message:"This transaction was already inserted by txId"};if(transaction.nonce<this.blockchain.accountantTree.getAccountNonce(transaction.from.addresses[0].unencodedAddress))
throw{message:"This transaction was already inserted"};if(transaction.from.addresses[0].unencodedAddress.equals(this.blockchain.mining.unencodedMinerAddress))
return true;if(transaction.timeLock+__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.FORKS.IMMUTABILITY_LENGTH/2<this.blockchain.blocks.length)
throw{message:"transaction is too old"};if(transaction.timeLock-__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.FORKS.IMMUTABILITY_LENGTH/2>this.blockchain.blocks.length)
throw{message:"transaction is in future"};if(transaction.fee<this.blockchain.transactions.wizard.calculateFeeWizzard(transaction.serializeTransaction(),miningFeePerByte))
throw{message:"fee is too small"};return true;}
async selectNextTransactions(miningFeePerByte,showLogsOnlyOnce){this._transactions=[];let missingFirstNonce=false;let size=200*1024-800;let i=0;let infoTx;while(size>0&&i<this.blockchain.transactions.pendingQueue.listArray.length){let transaction=this.blockchain.transactions.pendingQueue.listArray[i];try{infoTx=transaction.txId.toString("hex")+" "+__WEBPACK_IMPORTED_MODULE_3__addresses_Interface_Blockchain_Address_Helper__["a"].generateAddressWIF(transaction.from.addresses[0].unencodedAddress,false,true);if(!transaction.blockchain){i++;continue;}
await this.validateTransaction(transaction,miningFeePerByte);let bRemoveTransaction=false;try{let blockValidationType={"take-transactions-list-in-consideration":{validation:true,transactions:this._transactions,},"validate-fast-transactions":true,};if(this.blockchain.blocks.length>transaction.timeLock)
if(transaction.validateTransactionEveryTime(this.blockchain.blocks.length,blockValidationType)){size-=transaction.serializeTransaction().length;if(size>=0){this._transactions.push(transaction);infoTx+=" added";}}else
bRemoveTransaction=true;}catch(exception){console.warn('Error Including Transaction',exception);if(!missingFirstNonce)
if(exception.message==='Nonce is invalid'||exception.message==='Nonce is not right 2'||exception.message==='Nonce is not right'){missingFirstNonce=true;let alreadyInserted=0;for(let j=this.blockchain.accountantTree.getAccountNonce(transaction.from.addresses[0].unencodedAddress)+1;j<transaction.nonce;j++)
if(alreadyInserted<=__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].SPAM_GUARDIAN.TRANSACTIONS.MAXIMUM_MISSING_NONCE_SEARCH){this.blockchain.transactions.pendingQueue.propagateMissingNonce(transaction.from.addresses[0].unencodedAddress,j);alreadyInserted++;}}
bRemoveTransaction=true;}
if(bRemoveTransaction);}catch(exception){console.warn('Error Including Transaction',exception);}
console.log(infoTx);i++;}
if(showLogsOnlyOnce){console.warn("--------------------------------");console.warn("pendingQueue",this.blockchain.transactions.pendingQueue.listArray.length);console.warn("Transactions selected for mining: ",this._transactions.length);console.warn("--------------------------------");}
return this._transactions;}
_countAddresses(unencodedAddress,from=false,to=false){let count=0;this._transactions.forEach((transaction)=>{if(from)
transaction.from.addresses.forEach((address)=>{if(address.unencodedAddress.equals(unencodedAddress))
count++;});if(to)
transaction.to.addresses.forEach((address)=>{if(address.unencodedAddress.equals(unencodedAddress))
count++;})});return count;}}
__webpack_exports__["a"]=(MiningTransactionsSelector);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_1_common_events_Status_Events__=__webpack_require__(12);var __WEBPACK_IMPORTED_MODULE_2_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_3_common_satoshmindb_Interface_SatoshminDB__=__webpack_require__(69);var __WEBPACK_IMPORTED_MODULE_4__addresses_Interface_Blockchain_Address_Helper__=__webpack_require__(17);var __WEBPACK_IMPORTED_MODULE_5__node_menu_Advanced_Messages__=__webpack_require__(86);var __WEBPACK_IMPORTED_MODULE_6__main_blockchain_Blockchain__=__webpack_require__(5);class InterfaceBlockchainMiningBasic{constructor(blockchain,minerAddress,miningFeePerByte){this._minerAddress=undefined;this._unencodedMinerAddress=undefined;this.blockchain=blockchain;if(minerAddress)
this.minerAddress=minerAddress;if(miningFeePerByte===undefined)miningFeePerByte=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINING_POOL.MINING.FEE_PER_BYTE;this.miningFeePerByte=miningFeePerByte;this._nonce=0;this.started=false;this._hashesPerSecond=0;this.walletDB=new __WEBPACK_IMPORTED_MODULE_3_common_satoshmindb_Interface_SatoshminDB__["a"](__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].DATABASE_NAMES.WALLET_DATABASE);this._intervalMiningOutput=undefined;this.useResetConsensus=true;this.resetForced=false;this._intervalPerMinute=false;}
get minerAddress(){return this._minerAddress;}
get unencodedMinerAddress(){return this._unencodedMinerAddress;}
set minerAddress(newAddress){return this._setAddress(newAddress,true)}
set miningFeePerByte(newFee){this._miningFeePerByte=newFee;}
get miningFeePerByte(){return this._miningFeePerByte;}
_setAddress(newAddress,save=true){if(typeof newAddress==="object"&&newAddress.hasOwnProperty("address"))
newAddress=newAddress.address;if(Buffer.isBuffer(newAddress))
newAddress=__WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].toBase(newAddress);this._minerAddress=newAddress;if(!newAddress)
this._unencodedMinerAddress=undefined;else
this._unencodedMinerAddress=__WEBPACK_IMPORTED_MODULE_4__addresses_Interface_Blockchain_Address_Helper__["a"].getUnencodedAddressFromWIF(newAddress);__WEBPACK_IMPORTED_MODULE_1_common_events_Status_Events__["a"].emit('blockchain/mining/address',{address:this._minerAddress,unencodedAddress:this._unencodedMinerAddress});if(!save)
return true;else
return this.saveMinerAddress();}
async saveMinerAddress(minerAddress=this.minerAddress){if(typeof minerAddress==="object"&&minerAddress.hasOwnProperty("address"))
minerAddress=minerAddress.address;let key="minerAddress";try{return(await this.walletDB.save(key,minerAddress));}
catch(err){console.error('ERROR on SAVE miner address: ',err);return false;}}
async loadMinerAddress(defaultAddress,Wallet){let key="minerAddress";try{let minerAddress=await this.walletDB.get(key);if(minerAddress===null||minerAddress===undefined){this.minerAddress=defaultAddress;return true;}
if(Wallet.getAddress(minerAddress)===null){if(typeof window==="undefined"){console.error("You are mining on an address that is not in your wallet. Do you want to change the mining address on your wallet?")}else{let confirmation=confirm("You are mining on an address that is not in your wallet. Do you want to change the mining address on your wallet?");if(confirmation){minerAddress=Wallet.addresses[0];this._setAddress(minerAddress,true);}}}
this._setAddress(minerAddress,false);return true;}
catch(err){console.error('ERROR on LOAD miner address: ',err);return false;}}
async startMining(){if(this.started)
return;this.started=true;this.reset=false;__WEBPACK_IMPORTED_MODULE_1_common_events_Status_Events__["a"].emit('mining/status-changed',true);if(!this.minerAddress){__WEBPACK_IMPORTED_MODULE_5__node_menu_Advanced_Messages__["a"].alert("Mining suspended. No Mining Address","Mining Error","error",5000);this.stopMining();return false;}
this._startMiningHashRateInterval();await this.mineNextBlock();}
stopMining(){this.started=false;__WEBPACK_IMPORTED_MODULE_1_common_events_Status_Events__["a"].emit('mining/status-changed',false);this._destroyMiningInterval();}
resetMining(){this.reset=true;__WEBPACK_IMPORTED_MODULE_1_common_events_Status_Events__["a"].emit('mining/reset',true);}
_startMiningHashRateInterval(){if(this._intervalMiningOutput!==undefined)return;let count=0;this._intervalMiningOutput=setInterval(()=>{count++;if(!this._intervalPerMinute){console.log(this._hashesPerSecond+" hashes/s");__WEBPACK_IMPORTED_MODULE_1_common_events_Status_Events__["a"].emit("mining/hash-rate",this._hashesPerSecond);this._hashesPerSecond=0;}else if(count%30===0){console.info("-------------------------------------");console.info("-------------------------------------");console.info("-------------------------------------");console.info(this._hashesPerSecond/30+" hashes/s");console.info("-------------------------------------");console.info("-------------------------------------");console.info("-------------------------------------");__WEBPACK_IMPORTED_MODULE_1_common_events_Status_Events__["a"].emit("mining/hash-rate",this._hashesPerSecond);this._hashesPerSecond=0;}else{if(this._hashesPerSecond>0)
console.log("mining....");}},1000);}
async mineNextBlock(suspend){}
_destroyMiningInterval(){if(this._intervalMiningOutput!==undefined){clearInterval(this._intervalMiningOutput);this._intervalMiningOutput=undefined;this._hashesPerSecond=0;}}
async setPrivateKeyAddressForMiningAddress(){let foundAddress=__WEBPACK_IMPORTED_MODULE_6__main_blockchain_Blockchain__["a"].Wallet.getAddress(this.minerAddress);let password=await foundAddress.getPrivateKey();if(password){foundAddress._privateKeyForMining=password;console.warn("Mining Address ready for mining"+this.minerAddress);}else{console.warn("Password is invalid");return false;}
return true;}}
__webpack_exports__["a"]=(InterfaceBlockchainMiningBasic);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_events_Status_Events__=__webpack_require__(12);var __WEBPACK_IMPORTED_MODULE_1_main_blockchain_Blockchain__=__webpack_require__(5);class InterfaceBlockchainMiningWorkersList{constructor(mining){this.mining=mining;this._workersList=[];this.WORKERS_MAX=100;this.block=undefined;this.difficultyTarget=undefined;this.workers=0;this._id=0;setInterval(this._makeUnworkingWorkersToWork.bind(this),2000);}
_makeUnworkingWorkersToWork(){let time=new Date().getTime();let terminated=false;if(!__WEBPACK_IMPORTED_MODULE_1_main_blockchain_Blockchain__["a"].synchronized)
return false;for(let i=this._workersList.length-1;i>=0;i--){if(this._workersList[i].dateLast!==undefined&&(time-this._workersList[i].dateLast.getTime()>10000)){this.terminateWorker(this._workersList[i]);this._workersList.splice(i,1);terminated=true;}}
if(terminated)
this.createWorkers();}
addWorkers(number){if(number===0)
return false;this.workers+=number;if(this.workers<=0)
this.workers=0;if(this.workers>this.WORKERS_MAX)
this.workers=this.WORKERS_MAX;__WEBPACK_IMPORTED_MODULE_0_common_events_Status_Events__["a"].emit('mining/workers-changed',this.workers);}
_initializeWorkerFirstTime(worker){worker.suspended=false;worker.postMessage({message:"initialize-algorithm"});}
_initializeWorker(worker){worker.suspended=false;worker.postMessage({message:"initialize",block:this.block,difficulty:this.difficultyTarget,nonce:this.mining._nonce,count:this.mining.WORKER_NONCES_WORK});this.mining._nonce+=this.mining.WORKER_NONCES_WORK;worker.dateLast=new Date();}
initializeWorkers(block,difficultyTarget){this.block=block;this.difficultyTarget=difficultyTarget;for(let i=0;i<this._workersList.length;i++)
this._initializeWorker(this._workersList[i]);}
createWorkers(){while(this._workersList.length<this.workers){console.log("createWorkers");let worker=this.createWorker();this._initializeWorkerFirstTime(worker);}}
decreaseWorkers(){if(this.workers<0)
this.workers=0;for(let i=this._workersList.length-1;i>this.workers-1;i--)
this.terminateWorker(this._workersList[i]);this._workersList.splice(this.workers-1);}
reduceWorkers(){if(this._workersList.length<this.workers)
return;console.log("reduce workers");this.mining._nonce-=this.mining.WORKER_NONCES_WORK*(this._workersList.length-this.workers);if(this.mining._nonce<0)
this.mining._nonce=0;this.decreaseWorkers();}
createWorker(){let worker=this.mining._getWorker();console.log("worker created",worker);if(worker===undefined||worker===null)
throw{message:'No Worker specified'};worker.id=++this._id;worker.dateLast=new Date();this._workersList.push(worker);worker.addEventListener('message',(event)=>{this.mining._puzzleReceived(worker,event);});return worker;}
terminateWorker(worker){this.suspendWorker(worker);worker.terminate()}
terminateWorkers(){for(let i=0;i<this._workersList.length;i++)
this.terminateWorker(this._workersList[i]);this._workersList=[];}
suspendWorker(worker){worker.suspended=true;worker.postMessage({message:"terminate"});}
suspendWorkers(){for(let i=0;i<this._workersList.length;i++)
this.suspendWorker(this._workersList[i]);}}
__webpack_exports__["a"]=(InterfaceBlockchainMiningWorkersList);}),(function(module,exports,__webpack_require__){function webpackBootstrapFunc(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])
return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports;}
__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.i=function(value){return value;};__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{configurable:false,enumerable:true,get:getter});}};__webpack_require__.r=function(exports){Object.defineProperty(exports,'__esModule',{value:true});};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module['default'];}:function getModuleExports(){return module;};__webpack_require__.d(getter,'a',getter);return getter;};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property);};__webpack_require__.p="/";__webpack_require__.oe=function(err){console.error(err);throw err;};var f=__webpack_require__(__webpack_require__.s=ENTRY_MODULE)
return f.default||f}
var moduleNameReqExp='[\\.|\\-|\\+|\\w|\/|@]+'
var dependencyRegExp='\\((\/\\*.*?\\*\/)?\s?.*?('+moduleNameReqExp+').*?\\)'
function quoteRegExp(str){return(str+'').replace(/[.?*+^$[\]\\(){}|-]/g,'\\$&')}
function isNumeric(n){return!isNaN(1*n);}
function getModuleDependencies(sources,module,queueName){var retval={}
retval[queueName]=[]
var fnString=module.toString()
var wrapperSignature=fnString.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/)
if(!wrapperSignature)return retval
var webpackRequireName=wrapperSignature[1]
var re=new RegExp('(\\\\n|\\W)'+quoteRegExp(webpackRequireName)+dependencyRegExp,'g')
var match
while((match=re.exec(fnString))){if(match[3]==='dll-reference')continue
retval[queueName].push(match[3])}
re=new RegExp('\\('+quoteRegExp(webpackRequireName)+'\\("(dll-reference\\s('+moduleNameReqExp+'))"\\)\\)'+dependencyRegExp,'g')
while((match=re.exec(fnString))){if(!sources[match[2]]){retval[queueName].push(match[1])
sources[match[2]]=__webpack_require__(match[1]).m}
retval[match[2]]=retval[match[2]]||[]
retval[match[2]].push(match[4])}
var keys=Object.keys(retval);for(var i=0;i<keys.length;i++){for(var j=0;j<retval[keys[i]].length;j++){if(isNumeric(retval[keys[i]][j])){retval[keys[i]][j]=1*retval[keys[i]][j];}}}
return retval}
function hasValuesInQueues(queues){var keys=Object.keys(queues)
return keys.reduce(function(hasValues,key){return hasValues||queues[key].length>0},false)}
function getRequiredModules(sources,moduleId){var modulesQueue={main:[moduleId]}
var requiredModules={main:[]}
var seenModules={main:{}}
while(hasValuesInQueues(modulesQueue)){var queues=Object.keys(modulesQueue)
for(var i=0;i<queues.length;i++){var queueName=queues[i]
var queue=modulesQueue[queueName]
var moduleToCheck=queue.pop()
seenModules[queueName]=seenModules[queueName]||{}
if(seenModules[queueName][moduleToCheck]||!sources[queueName][moduleToCheck])continue
seenModules[queueName][moduleToCheck]=true
requiredModules[queueName]=requiredModules[queueName]||[]
requiredModules[queueName].push(moduleToCheck)
var newModules=getModuleDependencies(sources,sources[queueName][moduleToCheck],queueName)
var newModulesKeys=Object.keys(newModules)
for(var j=0;j<newModulesKeys.length;j++){modulesQueue[newModulesKeys[j]]=modulesQueue[newModulesKeys[j]]||[]
modulesQueue[newModulesKeys[j]]=modulesQueue[newModulesKeys[j]].concat(newModules[newModulesKeys[j]])}}}
return requiredModules}
module.exports=function(moduleId,options){options=options||{}
var sources={main:__webpack_require__.m}
var requiredModules=options.all?{main:Object.keys(sources.main)}:getRequiredModules(sources,moduleId)
var src=''
Object.keys(requiredModules).filter(function(m){return m!=='main'}).forEach(function(module){var entryModule=0
while(requiredModules[module][entryModule]){entryModule++}
requiredModules[module].push(entryModule)
sources[module][entryModule]='(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })'
src=src+'var '+module+' = ('+webpackBootstrapFunc.toString().replace('ENTRY_MODULE',JSON.stringify(entryModule))+')({'+requiredModules[module].map(function(id){return ''+JSON.stringify(id)+': '+sources[module][id].toString()}).join(',')+'});\n'})
src=src+'new (('+webpackBootstrapFunc.toString().replace('ENTRY_MODULE',JSON.stringify(moduleId))+')({'+requiredModules.main.map(function(id){return ''+JSON.stringify(id)+': '+sources.main[id].toString()}).join(',')+'}))(self);'
var blob=new window.Blob([src],{type:'text/javascript'})
if(options.bare){return blob}
var URL=window.URL||window.webkitURL||window.mozURL||window.msURL
var workerUrl=URL.createObjectURL(blob)
var worker=new window.Worker(workerUrl)
worker.objectURL=workerUrl
return worker}}),(function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:true});(function(Buffer){let jobTerminated=false;let block=undefined;let ARGON2_PARAM={salt:'Satoshi_is_Finney',time:2,mem:256,parallelism:2,type:0,hashLen:32}
let algorithm=undefined;let bestHash,bestNonce;let nonce,noncePrevious,nonceEnd;let WorkerInitialized=false;let WorkerChanged=false;var _librayLoaded=false;var _libraryLoadPromise=false;var global=typeof window==='undefined'?self:window;var url=global.location.href;var arr=url.split("/");var root=arr[0]+"//"+arr[2]+"/public/";root="https://webdollar.io/public";var log;function calcAsmJs(){let promise=new Promise(async(resolve)=>{if(global.Module&&!global.Module.wasmJSMethod){if(!_librayLoaded)await _libraryLoadPromise;resolve(calcHash());return;}
_librayLoaded=false;global.Module={print:log,printErr:log,setStatus:log};var ts=now();loadScript(root+'/dist/argon2-asm.min.js',()=>{_librayLoaded=true;resolve(calcHash())},()=>{_librayLoaded=true;log('Error loading script');});});if(!_librayLoaded)
_libraryLoadPromise=promise;return promise;}
function calcWasm(){return calcBinaryen('native-wasm');}
function calcBinaryenSexpr(){return calcBinaryen('interpret-s-expr');}
function calcBinaryenBin(){return calcBinaryen('interpret-binary');}
function calcBinaryen(method){let promise=new Promise(async(resolve)=>{if(!global.WebAssembly){log('Your browser doesn\'t support WebAssembly, please try it in Chrome Canary or Firefox Nightly with WASM flag enabled');resolve(null);return;}
if(global.Module&&global.Module.wasmJSMethod===method&&global.Module._argon2_hash){if(!_librayLoaded)await _libraryLoadPromise;resolve(calcHash());return;}
_librayLoaded=false;const KB=1024*1024;const MB=1024*KB;const GB=1024*MB;const WASM_PAGE_SIZE=64*1024;const totalMemory=(2*GB-64*KB)/1024/WASM_PAGE_SIZE;const initialMemory=Math.min(Math.max(Math.ceil(ARGON2_PARAM.mem*1024/WASM_PAGE_SIZE),256)+256,totalMemory);log('Memory: '+initialMemory+' pages ('+Math.round(initialMemory*64)+' KB)',totalMemory);const wasmMemory=new WebAssembly.Memory({initial:initialMemory,maximum:totalMemory});global.Module={print:log,printErr:log,setStatus:log,wasmBinary:null,wasmJSMethod:method,asmjsCodeFile:root+'/dist/argon2/argon2-asm.min.asm.js',wasmBinaryFile:root+'/dist/argon2/argon2.wasm',wasmTextFile:root+'/dist/argon2/argon2.wast',wasmMemory:wasmMemory,buffer:wasmMemory.buffer,TOTAL_MEMORY:initialMemory*WASM_PAGE_SIZE};log('Loading wasm...');var xhr=new XMLHttpRequest();xhr.open('GET',root+'/dist/argon2/argon2.wasm',true);xhr.responseType='arraybuffer';xhr.onload=()=>{global.Module.wasmBinary=xhr.response;global.Module.postRun=()=>resolve(calcHash());var ts=now();log('Wasm loaded, loading script...');loadScript(root+'/dist/argon2/argon2.min.js',()=>{log('Script loaded in '+Math.round(now()-ts)+'ms');log('Calculating hash....');_librayLoaded=true;},()=>{_librayLoaded=true;log('Error loading script');});};xhr.onerror=()=>{log('Error loading wasm');};xhr.send(null);});if(!_librayLoaded)
_libraryLoadPromise=promise;return promise;}
function calcHash(){var hashArr=new Uint8Array(32);if(!Module._argon2_hash)
return hashArr;var pwd=allocateArray(ARGON2_PARAM.pass);var salt=allocateArray(ARGON2_PARAM.salt);var hash=Module.allocate(new Array(ARGON2_PARAM.hashLen),'i8',Module.ALLOC_NORMAL);var encoded=Module.allocate(new Array(512),'i8',Module.ALLOC_NORMAL);var err;try{var res=Module._argon2_hash(ARGON2_PARAM.time,ARGON2_PARAM.mem,ARGON2_PARAM.parallelism,pwd,ARGON2_PARAM.pass.length,salt,ARGON2_PARAM.salt.length,hash,ARGON2_PARAM.hashLen,encoded,512,ARGON2_PARAM.type,0x13);}catch(e){err=e;}
if(res===0&&!err){for(var i=hash,n=hash+ARGON2_PARAM.hashLen;i<n;i++)
hashArr[i-hash]=Module.HEAP8[i];}else{try{if(!err)
err=Module.Pointer_stringify(Module._argon2_error_message(res))}catch(e){}
log('Error: '+res+(err?': '+err:''));}
try{Module._free(pwd);Module._free(salt);Module._free(hash);Module._free(encoded);}catch(e){}
return hashArr;}
function allocateArray(strOrArr){var arr=strOrArr instanceof Uint8Array||strOrArr instanceof Array?strOrArr:Module.intArrayFromString(strOrArr);return Module.allocate(arr,'i8',Module.ALLOC_NORMAL);}
function now(){return global.performance?performance.now():Date.now();}
let loadScript=(script,callback,errorCallback)=>{try{importScripts(script);}catch(e){console.error('Error loading script',script,e);errorCallback(e);return;}
callback();};function sleep(ms){return new Promise(resolve=>setTimeout(resolve,ms));}
__webpack_exports__["default"]=(function(self){let blockLen,difficulty;log=(msg)=>{if(!msg)
return;self.postMessage({message:"log",log:msg});};self.addEventListener('message',async function(ev){if(ev.data.message==="terminate"){jobTerminated=true;}else
if(ev.data.message==="initialize-algorithm"){ARGON2_PARAM.pass=new Uint8Array(10);let answer=await calcWasm();if(answer===null){answer=await calcAsmJs();if(answer===null){algorithm=null;self.postMessage({message:"algorithm",answer:"no algorithm supported",});}else{algorithm=calcAsmJs;self.postMessage({message:"algorithm",answer:"ASM.JS supported",});}}else{algorithm=calcWasm;self.postMessage({message:"algorithm",answer:"WebAssembly supported",});}
processWorker();}else
if(ev.data.message==="new-nonces"||ev.data.message==="initialize"){jobTerminated=false;if(ev.data.message==="initialize"){if(ev.data.block!==undefined&&ev.data.block!==null&&ev.data.difficulty!==undefined&&ev.data.difficulty!==null){block=ev.data.block;difficulty=ev.data.difficulty;ARGON2_PARAM.pass=new Uint8Array(block.length+4);ARGON2_PARAM.pass.set(block);blockLen=block.length;}
log({message:"worker initialize"});}
if(block===undefined)return;if(algorithm===undefined){log("worker can't mine");return;}
nonce=ev.data.nonce;noncePrevious=nonce;nonceEnd=nonce+ev.data.count;bestHash=Buffer.from("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","hex");bestNonce=0;WorkerChanged=true;}});async function processWorker(){if(WorkerInitialized)return;WorkerInitialized=true;let change,found;while(1===1){if(nonce===nonceEnd||jobTerminated){await sleep(1);continue;}
try{WorkerChanged=false;ARGON2_PARAM.pass[blockLen+3]=nonce&0xff;ARGON2_PARAM.pass[blockLen+2]=nonce>>8&0xff;ARGON2_PARAM.pass[blockLen+1]=nonce>>16&0xff;ARGON2_PARAM.pass[blockLen]=nonce>>24&0xff;let hash=await algorithm();if(WorkerChanged)continue;change=false;for(let i=0,l=bestHash.length;i<l;i++)
if(hash[i]<bestHash[i]){change=true;break;}
else if(hash[i]>bestHash[i])
break;if(change){bestHash=hash;bestNonce=nonce;found=false;for(let i=0,l=difficulty.length;i<l;i++)
if(hash[i]<difficulty[i]){found=true;break;}
else if(hash[i]>difficulty[i])
break;if(found)
nonce=nonceEnd-1;}}catch(exception){}
nonce++;try{if(nonce%3===0){self.postMessage({message:"worker nonce worked",nonce:nonce,nonceWork:nonce-noncePrevious});noncePrevious=nonce;}
if(nonce===nonceEnd){if(!jobTerminated)
self.postMessage({message:"results",hash:bestHash,nonce:bestNonce});else
log("job terminated");}}catch(exception){}}}});;}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_mini_blockchain_agents_Mini_Blockchain_Agent_Full_Node__=__webpack_require__(983);var __WEBPACK_IMPORTED_MODULE_1_common_blockchain_mini_blockchain_agents_Mini_Blockchain_Agent_Block_Headers__=__webpack_require__(1026);var __WEBPACK_IMPORTED_MODULE_2_common_blockchain_mini_blockchain_agents_Mini_Blockchain_Agent_Light_Node__=__webpack_require__(1028);class MainBlockchainAgent{createAgent(agentName,blockchain){if(agentName==="headers-node")
return new __WEBPACK_IMPORTED_MODULE_1_common_blockchain_mini_blockchain_agents_Mini_Blockchain_Agent_Block_Headers__["a"](blockchain);else
if(agentName==="full-node")
return new __WEBPACK_IMPORTED_MODULE_0_common_blockchain_mini_blockchain_agents_Mini_Blockchain_Agent_Full_Node__["a"](blockchain);else
if(agentName==="light-node")
return new __WEBPACK_IMPORTED_MODULE_2_common_blockchain_mini_blockchain_agents_Mini_Blockchain_Agent_Light_Node__["a"](blockchain);throw{message:"Couldn't create an agent"}}}
__webpack_exports__["a"]=(new MainBlockchainAgent());}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_ppow_blockchain_agents_PPoW_Blockchain_Agent_Full_Node__=__webpack_require__(415);var __WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_agents_Interface_Blockchain_Agent_Full_Node__=__webpack_require__(255);var __WEBPACK_IMPORTED_MODULE_2_common_blockchain_mini_blockchain_protocol_Mini_Blockchain_Advanced_Protocol__=__webpack_require__(267);var __WEBPACK_IMPORTED_MODULE_3__protocol_Mini_Blockchain_Fork__=__webpack_require__(268);var __WEBPACK_IMPORTED_MODULE_4_consts_const_global__=__webpack_require__(2);let inheritAgentClass;if(__WEBPACK_IMPORTED_MODULE_4_consts_const_global__["a"].POPOW_PARAMS.ACTIVATED)inheritAgentClass=__WEBPACK_IMPORTED_MODULE_0_common_blockchain_ppow_blockchain_agents_PPoW_Blockchain_Agent_Full_Node__["a"];else inheritAgentClass=__WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_agents_Interface_Blockchain_Agent_Full_Node__["a"];class MiniBlockchainAgentFullNode extends inheritAgentClass{newFork(){let fork=new __WEBPACK_IMPORTED_MODULE_3__protocol_Mini_Blockchain_Fork__["a"]();__WEBPACK_IMPORTED_MODULE_3__protocol_Mini_Blockchain_Fork__["a"].prototype.initializeConstructor.apply(fork,arguments);return fork;}
_newProtocol(){this.protocol=new __WEBPACK_IMPORTED_MODULE_2_common_blockchain_mini_blockchain_protocol_Mini_Blockchain_Advanced_Protocol__["a"](this.blockchain,this);}}
__webpack_exports__["a"]=(MiniBlockchainAgentFullNode);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__Agent_Status__=__webpack_require__(108);var __WEBPACK_IMPORTED_MODULE_1_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_2_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_3__Nano_Nano_Wallet_Protocol__=__webpack_require__(358);var __WEBPACK_IMPORTED_MODULE_4_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_5_common_utils_Advanced_Emitter__=__webpack_require__(70);const TIME_TO_RESYNCHRONIZE_IN_CASE_NO_NEW_BLOCKS_WERE_RECEIVED_BROWSER=__WEBPACK_IMPORTED_MODULE_1_consts_const_global__["a"].BLOCKCHAIN.DIFFICULTY.TIME_PER_BLOCK*1000*4;const TIME_TO_RESYNCHRONIZE_IN_CASE_NO_NEW_BLOCKS_WERE_RECEIVED_TERMINAL=__WEBPACK_IMPORTED_MODULE_1_consts_const_global__["a"].BLOCKCHAIN.DIFFICULTY.TIME_PER_BLOCK*1000*8;class InterfaceBlockchainAgentBasic{constructor(blockchain){this.blockchain=blockchain;this._eventEmitter=new __WEBPACK_IMPORTED_MODULE_5_common_utils_Advanced_Emitter__["a"](100);this._eventEmitter.on("agent/synchronized",(data)=>{if(data.result)
console.warn("Synchronization done");else
console.warn("Synchronization done FAILED");});this._status=__WEBPACK_IMPORTED_MODULE_0__Agent_Status__["a"].AGENT_STATUS_NOT_SYNCHRONIZED;this.consensus=true;__WEBPACK_IMPORTED_MODULE_4_node_lists_Nodes_List__["a"].emitter.on("nodes-list/disconnected",async(result)=>{if(!this.consensus||__WEBPACK_IMPORTED_MODULE_1_consts_const_global__["a"].DEBUG)return;if(__WEBPACK_IMPORTED_MODULE_4_node_lists_Nodes_List__["a"].nodes.length===0){console.warn("################### RESYNCHRONIZATION STARTED ##########");__WEBPACK_IMPORTED_MODULE_2_main_blockchain_Blockchain__["a"].synchronizeBlockchain();}});}
setBlockchain(blockchain){this.blockchain=blockchain;this.protocol.setBlockchain(blockchain);}
get consensus(){return this._consensus;}
set consensus(newValue){this._consensus=newValue;this._initializeConsensus(newValue);}
async _initializeConsensus(newConsensus){if(newConsensus){if(__WEBPACK_IMPORTED_MODULE_2_main_blockchain_Blockchain__["a"].loaded)
await this.blockchain.loadBlockchain();if(this._intervalVerifyConsensus===undefined){this._prevBlocks=0;this._prevDate=0;this._intervalVerifyConsensus=setInterval(()=>{if(this._prevDate&&this._prevBlocks===this.blockchain.blocks.length){if(this.status!==__WEBPACK_IMPORTED_MODULE_0__Agent_Status__["a"].AGENT_STATUS_NOT_SYNCHRONIZED){console.warn("agent basic synchronization");__WEBPACK_IMPORTED_MODULE_2_main_blockchain_Blockchain__["a"].synchronizeBlockchain();}}
this._prevDate=new Date();this._prevBlocks=this.blockchain.blocks.length;},true?TIME_TO_RESYNCHRONIZE_IN_CASE_NO_NEW_BLOCKS_WERE_RECEIVED_BROWSER:TIME_TO_RESYNCHRONIZE_IN_CASE_NO_NEW_BLOCKS_WERE_RECEIVED_TERMINAL);}}else{await __WEBPACK_IMPORTED_MODULE_3__Nano_Nano_Wallet_Protocol__["a"].initializeNanoProtocol();clearInterval(this._intervalVerifyConsensus);}}}
__webpack_exports__["a"]=(InterfaceBlockchainAgentBasic);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_socket_io_client__=__webpack_require__(986);var __WEBPACK_IMPORTED_MODULE_0_socket_io_client___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_socket_io_client__);var __WEBPACK_IMPORTED_MODULE_1_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_2_common_sockets_protocol_extend_socket_Socket_Extend__=__webpack_require__(427);var __WEBPACK_IMPORTED_MODULE_3_common_sockets_protocol_extend_socket_Socket_Address__=__webpack_require__(76);var __WEBPACK_IMPORTED_MODULE_4_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_5_node_lists_types_Connection_Type__=__webpack_require__(47);var __WEBPACK_IMPORTED_MODULE_6_node_lists_types_Node_Type__=__webpack_require__(35);var __WEBPACK_IMPORTED_MODULE_7_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_8_common_sockets_protocol_Node_Propagation_Protocol__=__webpack_require__(263);var __WEBPACK_IMPORTED_MODULE_9_node_lists_types_Node_Consensus_Type__=__webpack_require__(44);let NodeExpress,NodeServer;if(false){NodeExpress=require('node/sockets/node-server/express/Node-Express').default;NodeServer=require('node/sockets/node-server/sockets/Node-Server').default;}
class NodeClient{constructor(){this.socket=null;}
connectToWaitlist(waitlist,index){return this.connectTo(waitlist.sckAddresses[index],undefined,waitlist.level+1,waitlist.sckAddresses[index].SSL,waitlist)}
connectTo(address,port,level,SSL,waitlist){let sckAddress=__WEBPACK_IMPORTED_MODULE_3_common_sockets_protocol_extend_socket_Socket_Address__["a"].createSocketAddress(address,port);if(sckAddress.isLocalHost()){console.log('localhost connection, rejected',address)
return false;}
address=sckAddress.getAddress(true,true);port=sckAddress.port;address=address.replace('::ffff:','');return new Promise(async(resolve)=>{let timeoutTotal=8*1000+Math.floor(Math.random()*10*1000)+(false?10*1000+Math.random()*30*1000:0);try{if(address.length<3){console.log("rejecting address... invalid ",address);return resolve(false);}
if(port&&address.indexOf(":")===-1||address.indexOf(":")===(address.length-1))address+=":"+port;if(true&&__WEBPACK_IMPORTED_MODULE_1_consts_const_global__["a"].SETTINGS.NODE.SSL)
SSL=true;console.log("connecting to...                ",address);let socket;try{this.socket=socket=__WEBPACK_IMPORTED_MODULE_0_socket_io_client__(address,{reconnection:false,maxHttpBufferSize:__WEBPACK_IMPORTED_MODULE_1_consts_const_global__["a"].SOCKET_MAX_SIZE_BYRES,connection_timeout:timeoutTotal,timeout:timeoutTotal,secure:SSL,query:{msg:"HelloNode",version:__WEBPACK_IMPORTED_MODULE_1_consts_const_global__["a"].SETTINGS.NODE.VERSION,uuid:__WEBPACK_IMPORTED_MODULE_1_consts_const_global__["a"].SETTINGS.UUID,nodeType:true?__WEBPACK_IMPORTED_MODULE_6_node_lists_types_Node_Type__["a"].NODE_WEB_PEER:NODE_TYPE.NODE_TERMINAL,nodeConsensusType:waitlist.nodeConsensusType,UTC:__WEBPACK_IMPORTED_MODULE_7_main_blockchain_Blockchain__["a"].blockchain.timestamp.timeUTC,domain:true?"browser":await NodeServer.getServerHTTPAddress(),},});}catch(Exception){console.error("Error Connecting Node to ",address," ",Exception);return resolve(false);}
if(__WEBPACK_IMPORTED_MODULE_7_main_blockchain_Blockchain__["a"].MinerPoolManagement.minerPoolStarted&&waitlist.nodeConsensusType!==__WEBPACK_IMPORTED_MODULE_9_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_SERVER)
throw{message:"You switched to pool"};__WEBPACK_IMPORTED_MODULE_8_common_sockets_protocol_Node_Propagation_Protocol__["a"].initializeNodesSimpleWaitlist(socket);socket.once("connect",async(response)=>{__WEBPACK_IMPORTED_MODULE_2_common_sockets_protocol_extend_socket_Socket_Extend__["a"].extendSocket(socket,socket.io.opts.hostname||sckAddress.getAddress(false),socket.io.opts.port||sckAddress.port,undefined,level);console.warn("Client connected to "+socket.node.sckAddress.address);});socket.once("HelloNode",async(data)=>{try{if(data){if(await socket.node.protocol.processHello(data,{"ip":true,"uuid":true})){await this.initializeSocket({"ip":true,"uuid":true},waitlist);resolve(true);}}else
resolve(false);}catch(exception){}});socket.once("connect_error",response=>{resolve(false);});socket.once("connect_failed",response=>{resolve(false);});socket.on("disconnect",()=>{resolve(false);});socket.connect();}
catch(Exception){console.error("Error Raised when connecting Node to ",address,Exception);resolve(false);}
setTimeout(()=>{resolve(false);},timeoutTotal+Math.floor(Math.random()*5*1000));});}
async initializeSocket(validationDoubleConnectionsTypes,waitlist){if(__WEBPACK_IMPORTED_MODULE_7_main_blockchain_Blockchain__["a"].MinerPoolManagement.minerPoolStarted&&waitlist.nodeConsensusType!==__WEBPACK_IMPORTED_MODULE_9_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_SERVER){console.error("socket disconnected by not being minerPool");return false;}
if(await __WEBPACK_IMPORTED_MODULE_4_node_lists_Nodes_List__["a"].registerUniqueSocket(this.socket,__WEBPACK_IMPORTED_MODULE_5_node_lists_types_Connection_Type__["a"].CONNECTION_CLIENT_SOCKET,this.socket.node.protocol.nodeType,waitlist.nodeConsensusType,validationDoubleConnectionsTypes)===false)
return false;waitlist.socketConnected(this.socket);console.log('Socket Client Initialized '+this.socket.node.sckAddress.getAddress(true));this.socket.on("disconnect",async()=>{console.warn("Client disconnected ",this.socket.node.sckAddress.getAddress(true));await __WEBPACK_IMPORTED_MODULE_4_node_lists_Nodes_List__["a"].disconnectSocket(this.socket);});this.socket.node.protocol.propagation.initializePropagation();}}
__webpack_exports__["a"]=(NodeClient);}),(function(module,exports,__webpack_require__){var url=__webpack_require__(987);var parser=__webpack_require__(259);var Manager=__webpack_require__(419);var debug=__webpack_require__(91)('socket.io-client');module.exports=exports=lookup;var cache=exports.managers={};function lookup(uri,opts){if(typeof uri==='object'){opts=uri;uri=undefined;}
opts=opts||{};var parsed=url(uri);var source=parsed.source;var id=parsed.id;var path=parsed.path;var sameNamespace=cache[id]&&path in cache[id].nsps;var newConnection=opts.forceNew||opts['force new connection']||false===opts.multiplex||sameNamespace;var io;if(newConnection){debug('ignoring socket cache for %s',source);io=Manager(source,opts);}else{if(!cache[id]){debug('new io instance for %s',source);cache[id]=Manager(source,opts);}
io=cache[id];}
if(parsed.query&&!opts.query){opts.query=parsed.query;}else if(opts&&'object'===typeof opts.query){opts.query=encodeQueryString(opts.query);}
return io.socket(parsed.path,opts);}
function encodeQueryString(obj){var str=[];for(var p in obj){if(obj.hasOwnProperty(p)){str.push(encodeURIComponent(p)+'='+encodeURIComponent(obj[p]));}}
return str.join('&');}
exports.protocol=parser.protocol;exports.connect=lookup;exports.Manager=__webpack_require__(419);exports.Socket=__webpack_require__(424);}),(function(module,exports,__webpack_require__){(function(global){var parseuri=__webpack_require__(417);var debug=__webpack_require__(91)('socket.io-client:url');module.exports=url;function url(uri,loc){var obj=uri;loc=loc||global.location;if(null==uri)uri=loc.protocol+'//'+loc.host;if('string'===typeof uri){if('/'===uri.charAt(0)){if('/'===uri.charAt(1)){uri=loc.protocol+uri;}else{uri=loc.host+uri;}}
if(!/^(https?|wss?):\/\//.test(uri)){debug('protocol-less url %s',uri);if('undefined'!==typeof loc){uri=loc.protocol+'//'+uri;}else{uri='https://'+uri;}}
debug('parse %s',uri);obj=parseuri(uri);}
if(!obj.port){if(/^(http|ws)$/.test(obj.protocol)){obj.port='80';}else if(/^(http|ws)s$/.test(obj.protocol)){obj.port='443';}}
obj.path=obj.path||'/';var ipv6=obj.host.indexOf(':')!==-1;var host=ipv6?'['+obj.host+']':obj.host;obj.id=obj.protocol+'://'+host+':'+obj.port;obj.href=obj.protocol+'://'+host+(loc&&loc.port===obj.port?'':(':'+obj.port));return obj;}}.call(exports,__webpack_require__(10)))}),(function(module,exports,__webpack_require__){exports=module.exports=debug.debug=debug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=__webpack_require__(989);exports.names=[];exports.skips=[];exports.formatters={};var prevColor=0;var prevTime;function selectColor(){return exports.colors[prevColor++%exports.colors.length];}
function debug(namespace){function disabled(){}
disabled.enabled=false;function enabled(){var self=enabled;var curr=+new Date();var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;if(null==self.useColors)self.useColors=exports.useColors();if(null==self.color&&self.useColors)self.color=selectColor();var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i];}
args[0]=exports.coerce(args[0]);if('string'!==typeof args[0]){args=['%o'].concat(args);}
var index=0;args[0]=args[0].replace(/%([a-z%])/g,function(match,format){if(match==='%%')return match;index++;var formatter=exports.formatters[format];if('function'===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--;}
return match;});args=exports.formatArgs.apply(self,args);var logFn=enabled.log||exports.log||console.log.bind(console);logFn.apply(self,args);}
enabled.enabled=true;var fn=exports.enabled(namespace)?enabled:disabled;fn.namespace=namespace;return fn;}
function enable(namespaces){exports.save(namespaces);var split=(namespaces||'').split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/[\\^$+?.()|[\]{}]/g,'\\$&').replace(/\*/g,'.*?');if(namespaces[0]==='-'){exports.skips.push(new RegExp('^'+namespaces.substr(1)+'$'));}else{exports.names.push(new RegExp('^'+namespaces+'$'));}}}
function disable(){exports.enable('');}
function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false;}}
for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true;}}
return false;}
function coerce(val){if(val instanceof Error)return val.stack||val.message;return val;}}),(function(module,exports){var s=1000
var m=s*60
var h=m*60
var d=h*24
var y=d*365.25
module.exports=function(val,options){options=options||{}
var type=typeof val
if(type==='string'&&val.length>0){return parse(val)}else if(type==='number'&&isNaN(val)===false){return options.long?fmtLong(val):fmtShort(val)}
throw new Error('val is not a non-empty string or a valid number. val='+JSON.stringify(val))}
function parse(str){str=String(str)
if(str.length>10000){return}
var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str)
if(!match){return}
var n=parseFloat(match[1])
var type=(match[2]||'ms').toLowerCase()
switch(type){case 'years':case 'year':case 'yrs':case 'yr':case 'y':return n*y
case 'days':case 'day':case 'd':return n*d
case 'hours':case 'hour':case 'hrs':case 'hr':case 'h':return n*h
case 'minutes':case 'minute':case 'mins':case 'min':case 'm':return n*m
case 'seconds':case 'second':case 'secs':case 'sec':case 's':return n*s
case 'milliseconds':case 'millisecond':case 'msecs':case 'msec':case 'ms':return n
default:return undefined}}
function fmtShort(ms){if(ms>=d){return Math.round(ms/d)+'d'}
if(ms>=h){return Math.round(ms/h)+'h'}
if(ms>=m){return Math.round(ms/m)+'m'}
if(ms>=s){return Math.round(ms/s)+'s'}
return ms+'ms'}
function fmtLong(ms){return plural(ms,d,'day')||plural(ms,h,'hour')||plural(ms,m,'minute')||plural(ms,s,'second')||ms+' ms'}
function plural(ms,n,name){if(ms<n){return}
if(ms<n*1.5){return Math.floor(ms/n)+' '+name}
return Math.ceil(ms/n)+' '+name+'s'}}),(function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(991);exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage='undefined'!=typeof chrome&&'undefined'!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=['lightseagreen','forestgreen','goldenrod','dodgerblue','darkorchid','crimson'];function useColors(){return('WebkitAppearance'in document.documentElement.style)||(window.console&&(console.firebug||(console.exception&&console.table)))||(navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31);}
exports.formatters.j=function(v){return JSON.stringify(v);};function formatArgs(){var args=arguments;var useColors=this.useColors;args[0]=(useColors?'%c':'')
+this.namespace
+(useColors?' %c':' ')
+args[0]
+(useColors?'%c ':' ')
+'+'+exports.humanize(this.diff);if(!useColors)return args;var c='color: '+this.color;args=[args[0],c,'color: inherit'].concat(Array.prototype.slice.call(args,1));var index=0;var lastC=0;args[0].replace(/%[a-z%]/g,function(match){if('%%'===match)return;index++;if('%c'===match){lastC=index;}});args.splice(lastC,0,c);return args;}
function log(){return 'object'===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments);}
function save(namespaces){try{if(null==namespaces){exports.storage.removeItem('debug');}else{exports.storage.debug=namespaces;}}catch(e){}}
function load(){var r;try{r=exports.storage.debug;}catch(e){}
return r;}
exports.enable(load());function localstorage(){try{return window.localStorage;}catch(e){}}}),(function(module,exports,__webpack_require__){exports=module.exports=debug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=__webpack_require__(992);exports.names=[];exports.skips=[];exports.formatters={};var prevColor=0;var prevTime;function selectColor(){return exports.colors[prevColor++%exports.colors.length];}
function debug(namespace){function disabled(){}
disabled.enabled=false;function enabled(){var self=enabled;var curr=+new Date();var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;if(null==self.useColors)self.useColors=exports.useColors();if(null==self.color&&self.useColors)self.color=selectColor();var args=Array.prototype.slice.call(arguments);args[0]=exports.coerce(args[0]);if('string'!==typeof args[0]){args=['%o'].concat(args);}
var index=0;args[0]=args[0].replace(/%([a-z%])/g,function(match,format){if(match==='%%')return match;index++;var formatter=exports.formatters[format];if('function'===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--;}
return match;});if('function'===typeof exports.formatArgs){args=exports.formatArgs.apply(self,args);}
var logFn=enabled.log||exports.log||console.log.bind(console);logFn.apply(self,args);}
enabled.enabled=true;var fn=exports.enabled(namespace)?enabled:disabled;fn.namespace=namespace;return fn;}
function enable(namespaces){exports.save(namespaces);var split=(namespaces||'').split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,'.*?');if(namespaces[0]==='-'){exports.skips.push(new RegExp('^'+namespaces.substr(1)+'$'));}else{exports.names.push(new RegExp('^'+namespaces+'$'));}}}
function disable(){exports.enable('');}
function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false;}}
for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true;}}
return false;}
function coerce(val){if(val instanceof Error)return val.stack||val.message;return val;}}),(function(module,exports){var s=1000;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};if('string'==typeof val)return parse(val);return options.long?long(val):short(val);};function parse(str){str=''+str;if(str.length>10000)return;var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);var type=(match[2]||'ms').toLowerCase();switch(type){case 'years':case 'year':case 'yrs':case 'yr':case 'y':return n*y;case 'days':case 'day':case 'd':return n*d;case 'hours':case 'hour':case 'hrs':case 'hr':case 'h':return n*h;case 'minutes':case 'minute':case 'mins':case 'min':case 'm':return n*m;case 'seconds':case 'second':case 'secs':case 'sec':case 's':return n*s;case 'milliseconds':case 'millisecond':case 'msecs':case 'msec':case 'ms':return n;}}
function short(ms){if(ms>=d)return Math.round(ms/d)+'d';if(ms>=h)return Math.round(ms/h)+'h';if(ms>=m)return Math.round(ms/m)+'m';if(ms>=s)return Math.round(ms/s)+'s';return ms+'ms';}
function long(ms){return plural(ms,d,'day')||plural(ms,h,'hour')||plural(ms,m,'minute')||plural(ms,s,'second')||ms+' ms';}
function plural(ms,n,name){if(ms<n)return;if(ms<n*1.5)return Math.floor(ms/n)+' '+name;return Math.ceil(ms/n)+' '+name+'s';}}),(function(module,exports,__webpack_require__){(function(module,global){var __WEBPACK_AMD_DEFINE_RESULT__;/*!JSON v3.3.2 | http://bestiejs.github.io/json3 | Copyright 2012-2014, Kit Cambridge | http://kit.mit-license.org*/;(function(){var isLoader="function"==="function"&&__webpack_require__(994);var objectTypes={"function":true,"object":true};var freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports;var root=objectTypes[typeof window]&&window||this,freeGlobal=freeExports&&objectTypes[typeof module]&&module&&!module.nodeType&&typeof global=="object"&&global;if(freeGlobal&&(freeGlobal["global"]===freeGlobal||freeGlobal["window"]===freeGlobal||freeGlobal["self"]===freeGlobal)){root=freeGlobal;}
function runInContext(context,exports){context||(context=root["Object"]());exports||(exports=root["Object"]());var Number=context["Number"]||root["Number"],String=context["String"]||root["String"],Object=context["Object"]||root["Object"],Date=context["Date"]||root["Date"],SyntaxError=context["SyntaxError"]||root["SyntaxError"],TypeError=context["TypeError"]||root["TypeError"],Math=context["Math"]||root["Math"],nativeJSON=context["JSON"]||root["JSON"];if(typeof nativeJSON=="object"&&nativeJSON){exports.stringify=nativeJSON.stringify;exports.parse=nativeJSON.parse;}
var objectProto=Object.prototype,getClass=objectProto.toString,isProperty,forEach,undef;var isExtended=new Date(-3509827334573292);try{isExtended=isExtended.getUTCFullYear()==-109252&&isExtended.getUTCMonth()===0&&isExtended.getUTCDate()===1&&isExtended.getUTCHours()==10&&isExtended.getUTCMinutes()==37&&isExtended.getUTCSeconds()==6&&isExtended.getUTCMilliseconds()==708;}catch(exception){}
function has(name){if(has[name]!==undef){return has[name];}
var isSupported;if(name=="bug-string-char-index"){isSupported="a"[0]!="a";}else if(name=="json"){isSupported=has("json-stringify")&&has("json-parse");}else{var value,serialized='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if(name=="json-stringify"){var stringify=exports.stringify,stringifySupported=typeof stringify=="function"&&isExtended;if(stringifySupported){(value=function(){return 1;}).toJSON=value;try{stringifySupported=stringify(0)==="0"&&stringify(new Number())==="0"&&stringify(new String())=='""'&&stringify(getClass)===undef&&stringify(undef)===undef&&stringify()===undef&&stringify(value)==="1"&&stringify([value])=="[1]"&&stringify([undef])=="[null]"&&stringify(null)=="null"&&stringify([undef,getClass,null])=="[null,null,null]"&&stringify({"a":[value,true,false,null,"\x00\b\n\f\r\t"]})==serialized&&stringify(null,value)==="1"&&stringify([1,2],null,1)=="[\n 1,\n 2\n]"&&stringify(new Date(-8.64e15))=='"-271821-04-20T00:00:00.000Z"'&&stringify(new Date(8.64e15))=='"+275760-09-13T00:00:00.000Z"'&&stringify(new Date(-621987552e5))=='"-000001-01-01T00:00:00.000Z"'&&stringify(new Date(-1))=='"1969-12-31T23:59:59.999Z"';}catch(exception){stringifySupported=false;}}
isSupported=stringifySupported;}
if(name=="json-parse"){var parse=exports.parse;if(typeof parse=="function"){try{if(parse("0")===0&&!parse(false)){value=parse(serialized);var parseSupported=value["a"].length==5&&value["a"][0]===1;if(parseSupported){try{parseSupported=!parse('"\t"');}catch(exception){}
if(parseSupported){try{parseSupported=parse("01")!==1;}catch(exception){}}
if(parseSupported){try{parseSupported=parse("1.")!==1;}catch(exception){}}}}}catch(exception){parseSupported=false;}}
isSupported=parseSupported;}}
return has[name]=!!isSupported;}
if(!has("json")){var functionClass="[object Function]",dateClass="[object Date]",numberClass="[object Number]",stringClass="[object String]",arrayClass="[object Array]",booleanClass="[object Boolean]";var charIndexBuggy=has("bug-string-char-index");if(!isExtended){var floor=Math.floor;var Months=[0,31,59,90,120,151,181,212,243,273,304,334];var getDay=function(year,month){return Months[month]+365*(year-1970)+floor((year-1969+(month=+(month>1)))/4)-floor((year-1901+month)/100)+floor((year-1601+month)/400);};}
if(!(isProperty=objectProto.hasOwnProperty)){isProperty=function(property){var members={},constructor;if((members.__proto__=null,members.__proto__={"toString":1},members).toString!=getClass){isProperty=function(property){var original=this.__proto__,result=property in(this.__proto__=null,this);this.__proto__=original;return result;};}else{constructor=members.constructor;isProperty=function(property){var parent=(this.constructor||constructor).prototype;return property in this&&!(property in parent&&this[property]===parent[property]);};}
members=null;return isProperty.call(this,property);};}
forEach=function(object,callback){var size=0,Properties,members,property;(Properties=function(){this.valueOf=0;}).prototype.valueOf=0;members=new Properties();for(property in members){if(isProperty.call(members,property)){size++;}}
Properties=members=null;if(!size){members=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"];forEach=function(object,callback){var isFunction=getClass.call(object)==functionClass,property,length;var hasProperty=!isFunction&&typeof object.constructor!="function"&&objectTypes[typeof object.hasOwnProperty]&&object.hasOwnProperty||isProperty;for(property in object){if(!(isFunction&&property=="prototype")&&hasProperty.call(object,property)){callback(property);}}
for(length=members.length;property=members[--length];hasProperty.call(object,property)&&callback(property));};}else if(size==2){forEach=function(object,callback){var members={},isFunction=getClass.call(object)==functionClass,property;for(property in object){if(!(isFunction&&property=="prototype")&&!isProperty.call(members,property)&&(members[property]=1)&&isProperty.call(object,property)){callback(property);}}};}else{forEach=function(object,callback){var isFunction=getClass.call(object)==functionClass,property,isConstructor;for(property in object){if(!(isFunction&&property=="prototype")&&isProperty.call(object,property)&&!(isConstructor=property==="constructor")){callback(property);}}
if(isConstructor||isProperty.call(object,(property="constructor"))){callback(property);}};}
return forEach(object,callback);};if(!has("json-stringify")){var Escapes={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"};var leadingZeroes="000000";var toPaddedString=function(width,value){return(leadingZeroes+(value||0)).slice(-width);};var unicodePrefix="\\u00";var quote=function(value){var result='"',index=0,length=value.length,useCharIndex=!charIndexBuggy||length>10;var symbols=useCharIndex&&(charIndexBuggy?value.split(""):value);for(;index<length;index++){var charCode=value.charCodeAt(index);switch(charCode){case 8:case 9:case 10:case 12:case 13:case 34:case 92:result+=Escapes[charCode];break;default:if(charCode<32){result+=unicodePrefix+toPaddedString(2,charCode.toString(16));break;}
result+=useCharIndex?symbols[index]:value.charAt(index);}}
return result+'"';};var serialize=function(property,object,callback,properties,whitespace,indentation,stack){var value,className,year,month,date,time,hours,minutes,seconds,milliseconds,results,element,index,length,prefix,result;try{value=object[property];}catch(exception){}
if(typeof value=="object"&&value){className=getClass.call(value);if(className==dateClass&&!isProperty.call(value,"toJSON")){if(value>-1/0&&value<1/0){if(getDay){date=floor(value/864e5);for(year=floor(date/365.2425)+1970-1;getDay(year+1,0)<=date;year++);for(month=floor((date-getDay(year,0))/30.42);getDay(year,month+1)<=date;month++);date=1+date-getDay(year,month);time=(value%864e5+864e5)%864e5;hours=floor(time/36e5)%24;minutes=floor(time/6e4)%60;seconds=floor(time/1e3)%60;milliseconds=time%1e3;}else{year=value.getUTCFullYear();month=value.getUTCMonth();date=value.getUTCDate();hours=value.getUTCHours();minutes=value.getUTCMinutes();seconds=value.getUTCSeconds();milliseconds=value.getUTCMilliseconds();}
value=(year<=0||year>=1e4?(year<0?"-":"+")+toPaddedString(6,year<0?-year:year):toPaddedString(4,year))+
"-"+toPaddedString(2,month+1)+"-"+toPaddedString(2,date)+
"T"+toPaddedString(2,hours)+":"+toPaddedString(2,minutes)+":"+toPaddedString(2,seconds)+
"."+toPaddedString(3,milliseconds)+"Z";}else{value=null;}}else if(typeof value.toJSON=="function"&&((className!=numberClass&&className!=stringClass&&className!=arrayClass)||isProperty.call(value,"toJSON"))){value=value.toJSON(property);}}
if(callback){value=callback.call(object,property,value);}
if(value===null){return "null";}
className=getClass.call(value);if(className==booleanClass){return ""+value;}else if(className==numberClass){return value>-1/0&&value<1/0?""+value:"null";}else if(className==stringClass){return quote(""+value);}
if(typeof value=="object"){for(length=stack.length;length--;){if(stack[length]===value){throw TypeError();}}
stack.push(value);results=[];prefix=indentation;indentation+=whitespace;if(className==arrayClass){for(index=0,length=value.length;index<length;index++){element=serialize(index,value,callback,properties,whitespace,indentation,stack);results.push(element===undef?"null":element);}
result=results.length?(whitespace?"[\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"]":("["+results.join(",")+"]")):"[]";}else{forEach(properties||value,function(property){var element=serialize(property,value,callback,properties,whitespace,indentation,stack);if(element!==undef){results.push(quote(property)+":"+(whitespace?" ":"")+element);}});result=results.length?(whitespace?"{\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"}":("{"+results.join(",")+"}")):"{}";}
stack.pop();return result;}};exports.stringify=function(source,filter,width){var whitespace,callback,properties,className;if(objectTypes[typeof filter]&&filter){if((className=getClass.call(filter))==functionClass){callback=filter;}else if(className==arrayClass){properties={};for(var index=0,length=filter.length,value;index<length;value=filter[index++],((className=getClass.call(value)),className==stringClass||className==numberClass)&&(properties[value]=1));}}
if(width){if((className=getClass.call(width))==numberClass){if((width-=width%1)>0){for(whitespace="",width>10&&(width=10);whitespace.length<width;whitespace+=" ");}}else if(className==stringClass){whitespace=width.length<=10?width:width.slice(0,10);}}
return serialize("",(value={},value[""]=source,value),callback,properties,whitespace,"",[]);};}
if(!has("json-parse")){var fromCharCode=String.fromCharCode;var Unescapes={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"};var Index,Source;var abort=function(){Index=Source=null;throw SyntaxError();};var lex=function(){var source=Source,length=source.length,value,begin,position,isSigned,charCode;while(Index<length){charCode=source.charCodeAt(Index);switch(charCode){case 9:case 10:case 13:case 32:Index++;break;case 123:case 125:case 91:case 93:case 58:case 44:value=charIndexBuggy?source.charAt(Index):source[Index];Index++;return value;case 34:for(value="@",Index++;Index<length;){charCode=source.charCodeAt(Index);if(charCode<32){abort();}else if(charCode==92){charCode=source.charCodeAt(++Index);switch(charCode){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:value+=Unescapes[charCode];Index++;break;case 117:begin=++Index;for(position=Index+4;Index<position;Index++){charCode=source.charCodeAt(Index);if(!(charCode>=48&&charCode<=57||charCode>=97&&charCode<=102||charCode>=65&&charCode<=70)){abort();}}
value+=fromCharCode("0x"+source.slice(begin,Index));break;default:abort();}}else{if(charCode==34){break;}
charCode=source.charCodeAt(Index);begin=Index;while(charCode>=32&&charCode!=92&&charCode!=34){charCode=source.charCodeAt(++Index);}
value+=source.slice(begin,Index);}}
if(source.charCodeAt(Index)==34){Index++;return value;}
abort();default:begin=Index;if(charCode==45){isSigned=true;charCode=source.charCodeAt(++Index);}
if(charCode>=48&&charCode<=57){if(charCode==48&&((charCode=source.charCodeAt(Index+1)),charCode>=48&&charCode<=57)){abort();}
isSigned=false;for(;Index<length&&((charCode=source.charCodeAt(Index)),charCode>=48&&charCode<=57);Index++);if(source.charCodeAt(Index)==46){position=++Index;for(;position<length&&((charCode=source.charCodeAt(position)),charCode>=48&&charCode<=57);position++);if(position==Index){abort();}
Index=position;}
charCode=source.charCodeAt(Index);if(charCode==101||charCode==69){charCode=source.charCodeAt(++Index);if(charCode==43||charCode==45){Index++;}
for(position=Index;position<length&&((charCode=source.charCodeAt(position)),charCode>=48&&charCode<=57);position++);if(position==Index){abort();}
Index=position;}
return+source.slice(begin,Index);}
if(isSigned){abort();}
if(source.slice(Index,Index+4)=="true"){Index+=4;return true;}else if(source.slice(Index,Index+5)=="false"){Index+=5;return false;}else if(source.slice(Index,Index+4)=="null"){Index+=4;return null;}
abort();}}
return "$";};var get=function(value){var results,hasMembers;if(value=="$"){abort();}
if(typeof value=="string"){if((charIndexBuggy?value.charAt(0):value[0])=="@"){return value.slice(1);}
if(value=="["){results=[];for(;;hasMembers||(hasMembers=true)){value=lex();if(value=="]"){break;}
if(hasMembers){if(value==","){value=lex();if(value=="]"){abort();}}else{abort();}}
if(value==","){abort();}
results.push(get(value));}
return results;}else if(value=="{"){results={};for(;;hasMembers||(hasMembers=true)){value=lex();if(value=="}"){break;}
if(hasMembers){if(value==","){value=lex();if(value=="}"){abort();}}else{abort();}}
if(value==","||typeof value!="string"||(charIndexBuggy?value.charAt(0):value[0])!="@"||lex()!=":"){abort();}
results[value.slice(1)]=get(lex());}
return results;}
abort();}
return value;};var update=function(source,property,callback){var element=walk(source,property,callback);if(element===undef){delete source[property];}else{source[property]=element;}};var walk=function(source,property,callback){var value=source[property],length;if(typeof value=="object"&&value){if(getClass.call(value)==arrayClass){for(length=value.length;length--;){update(value,length,callback);}}else{forEach(value,function(property){update(value,property,callback);});}}
return callback.call(source,property,value);};exports.parse=function(source,callback){var result,value;Index=0;Source=""+source;result=get(lex());if(lex()!="$"){abort();}
Index=Source=null;return callback&&getClass.call(callback)==functionClass?walk((value={},value[""]=result,value),"",callback):result;};}}
exports["runInContext"]=runInContext;return exports;}
if(freeExports&&!isLoader){runInContext(root,freeExports);}else{var nativeJSON=root.JSON,previousJSON=root["JSON3"],isRestored=false;var JSON3=runInContext(root,(root["JSON3"]={"noConflict":function(){if(!isRestored){isRestored=true;root.JSON=nativeJSON;root["JSON3"]=previousJSON;nativeJSON=previousJSON=null;}
return JSON3;}}));root.JSON={"parse":JSON3.parse,"stringify":JSON3.stringify};}
if(isLoader){!(__WEBPACK_AMD_DEFINE_RESULT__=(function(){return JSON3;}).call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));}}).call(this);}.call(exports,__webpack_require__(83)(module),__webpack_require__(10)))}),(function(module,exports){(function(__webpack_amd_options__){module.exports=__webpack_amd_options__;}.call(exports,{}))}),(function(module,exports){module.exports=Emitter;function Emitter(obj){if(obj)return mixin(obj);};function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key];}
return obj;}
Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks[event]=this._callbacks[event]||[]).push(fn);return this;};Emitter.prototype.once=function(event,fn){var self=this;this._callbacks=this._callbacks||{};function on(){self.off(event,on);fn.apply(this,arguments);}
on.fn=fn;this.on(event,on);return this;};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this;}
var callbacks=this._callbacks[event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks[event];return this;}
var cb;for(var i=0;i<callbacks.length;i++){cb=callbacks[i];if(cb===fn||cb.fn===fn){callbacks.splice(i,1);break;}}
return this;};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks[event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args);}}
return this;};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks[event]||[];};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length;};}),(function(module,exports,__webpack_require__){(function(global){var isArray=__webpack_require__(997);var isBuf=__webpack_require__(418);exports.deconstructPacket=function(packet){var buffers=[];var packetData=packet.data;function _deconstructPacket(data){if(!data)return data;if(isBuf(data)){var placeholder={_placeholder:true,num:buffers.length};buffers.push(data);return placeholder;}else if(isArray(data)){var newData=new Array(data.length);for(var i=0;i<data.length;i++){newData[i]=_deconstructPacket(data[i]);}
return newData;}else if('object'==typeof data&&!(data instanceof Date)){var newData={};for(var key in data){newData[key]=_deconstructPacket(data[key]);}
return newData;}
return data;}
var pack=packet;pack.data=_deconstructPacket(packetData);pack.attachments=buffers.length;return{packet:pack,buffers:buffers};};exports.reconstructPacket=function(packet,buffers){var curPlaceHolder=0;function _reconstructPacket(data){if(data&&data._placeholder){var buf=buffers[data.num];return buf;}else if(isArray(data)){for(var i=0;i<data.length;i++){data[i]=_reconstructPacket(data[i]);}
return data;}else if(data&&'object'==typeof data){for(var key in data){data[key]=_reconstructPacket(data[key]);}
return data;}
return data;}
packet.data=_reconstructPacket(packet.data);packet.attachments=undefined;return packet;};exports.removeBlobs=function(data,callback){function _removeBlobs(obj,curKey,containingObject){if(!obj)return obj;if((global.Blob&&obj instanceof Blob)||(global.File&&obj instanceof File)){pendingBlobs++;var fileReader=new FileReader();fileReader.onload=function(){if(containingObject){containingObject[curKey]=this.result;}
else{bloblessData=this.result;}
if(!--pendingBlobs){callback(bloblessData);}};fileReader.readAsArrayBuffer(obj);}else if(isArray(obj)){for(var i=0;i<obj.length;i++){_removeBlobs(obj[i],i,obj);}}else if(obj&&'object'==typeof obj&&!isBuf(obj)){for(var key in obj){_removeBlobs(obj[key],key,obj);}}}
var pendingBlobs=0;var bloblessData=data;_removeBlobs(bloblessData);if(!pendingBlobs){callback(bloblessData);}};}.call(exports,__webpack_require__(10)))}),(function(module,exports){module.exports=Array.isArray||function(arr){return Object.prototype.toString.call(arr)=='[object Array]';};}),(function(module,exports,__webpack_require__){module.exports=__webpack_require__(999);}),(function(module,exports,__webpack_require__){module.exports=__webpack_require__(1000);module.exports.parser=__webpack_require__(121);}),(function(module,exports,__webpack_require__){(function(global){var transports=__webpack_require__(420);var Emitter=__webpack_require__(144);var debug=__webpack_require__(91)('engine.io-client:socket');var index=__webpack_require__(218);var parser=__webpack_require__(121);var parseuri=__webpack_require__(417);var parsejson=__webpack_require__(1013);var parseqs=__webpack_require__(262);module.exports=Socket;function Socket(uri,opts){if(!(this instanceof Socket))return new Socket(uri,opts);opts=opts||{};if(uri&&'object'===typeof uri){opts=uri;uri=null;}
if(uri){uri=parseuri(uri);opts.hostname=uri.host;opts.secure=uri.protocol==='https'||uri.protocol==='wss';opts.port=uri.port;if(uri.query)opts.query=uri.query;}else if(opts.host){opts.hostname=parseuri(opts.host).host;}
this.secure=null!=opts.secure?opts.secure:(global.location&&'https:'===location.protocol);if(opts.hostname&&!opts.port){opts.port=this.secure?'443':'80';}
this.agent=opts.agent||false;this.hostname=opts.hostname||(global.location?location.hostname:'localhost');this.port=opts.port||(global.location&&location.port?location.port:(this.secure?443:80));this.query=opts.query||{};if('string'===typeof this.query)this.query=parseqs.decode(this.query);this.upgrade=false!==opts.upgrade;this.path=(opts.path||'/engine.io').replace(/\/$/,'')+'/';this.forceJSONP=!!opts.forceJSONP;this.jsonp=false!==opts.jsonp;this.forceBase64=!!opts.forceBase64;this.enablesXDR=!!opts.enablesXDR;this.timestampParam=opts.timestampParam||'t';this.timestampRequests=opts.timestampRequests;this.transports=opts.transports||['polling','websocket'];this.readyState='';this.writeBuffer=[];this.prevBufferLen=0;this.policyPort=opts.policyPort||843;this.rememberUpgrade=opts.rememberUpgrade||false;this.binaryType=null;this.onlyBinaryUpgrades=opts.onlyBinaryUpgrades;this.perMessageDeflate=false!==opts.perMessageDeflate?(opts.perMessageDeflate||{}):false;if(true===this.perMessageDeflate)this.perMessageDeflate={};if(this.perMessageDeflate&&null==this.perMessageDeflate.threshold){this.perMessageDeflate.threshold=1024;}
this.pfx=opts.pfx||null;this.key=opts.key||null;this.passphrase=opts.passphrase||null;this.cert=opts.cert||null;this.ca=opts.ca||null;this.ciphers=opts.ciphers||null;this.rejectUnauthorized=opts.rejectUnauthorized===undefined?null:opts.rejectUnauthorized;this.forceNode=!!opts.forceNode;var freeGlobal=typeof global==='object'&&global;if(freeGlobal.global===freeGlobal){if(opts.extraHeaders&&Object.keys(opts.extraHeaders).length>0){this.extraHeaders=opts.extraHeaders;}
if(opts.localAddress){this.localAddress=opts.localAddress;}}
this.id=null;this.upgrades=null;this.pingInterval=null;this.pingTimeout=null;this.pingIntervalTimer=null;this.pingTimeoutTimer=null;this.open();}
Socket.priorWebsocketSuccess=false;Emitter(Socket.prototype);Socket.protocol=parser.protocol;Socket.Socket=Socket;Socket.Transport=__webpack_require__(261);Socket.transports=__webpack_require__(420);Socket.parser=__webpack_require__(121);Socket.prototype.createTransport=function(name){debug('creating transport "%s"',name);var query=clone(this.query);query.EIO=parser.protocol;query.transport=name;if(this.id)query.sid=this.id;var transport=new transports[name]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:query,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders,forceNode:this.forceNode,localAddress:this.localAddress});return transport;};function clone(obj){var o={};for(var i in obj){if(obj.hasOwnProperty(i)){o[i]=obj[i];}}
return o;}
Socket.prototype.open=function(){var transport;if(this.rememberUpgrade&&Socket.priorWebsocketSuccess&&this.transports.indexOf('websocket')!==-1){transport='websocket';}else if(0===this.transports.length){var self=this;setTimeout(function(){self.emit('error','No transports available');},0);return;}else{transport=this.transports[0];}
this.readyState='opening';try{transport=this.createTransport(transport);}catch(e){this.transports.shift();this.open();return;}
transport.open();this.setTransport(transport);};Socket.prototype.setTransport=function(transport){debug('setting transport %s',transport.name);var self=this;if(this.transport){debug('clearing existing transport %s',this.transport.name);this.transport.removeAllListeners();}
this.transport=transport;transport.on('drain',function(){self.onDrain();}).on('packet',function(packet){self.onPacket(packet);}).on('error',function(e){self.onError(e);}).on('close',function(){self.onClose('transport close');});};Socket.prototype.probe=function(name){debug('probing transport "%s"',name);var transport=this.createTransport(name,{probe:1});var failed=false;var self=this;Socket.priorWebsocketSuccess=false;function onTransportOpen(){if(self.onlyBinaryUpgrades){var upgradeLosesBinary=!this.supportsBinary&&self.transport.supportsBinary;failed=failed||upgradeLosesBinary;}
if(failed)return;debug('probe transport "%s" opened',name);transport.send([{type:'ping',data:'probe'}]);transport.once('packet',function(msg){if(failed)return;if('pong'===msg.type&&'probe'===msg.data){debug('probe transport "%s" pong',name);self.upgrading=true;self.emit('upgrading',transport);if(!transport)return;Socket.priorWebsocketSuccess='websocket'===transport.name;debug('pausing current transport "%s"',self.transport.name);self.transport.pause(function(){if(failed)return;if('closed'===self.readyState)return;debug('changing transport and sending upgrade packet');cleanup();self.setTransport(transport);transport.send([{type:'upgrade'}]);self.emit('upgrade',transport);transport=null;self.upgrading=false;self.flush();});}else{debug('probe transport "%s" failed',name);var err=new Error('probe error');err.transport=transport.name;self.emit('upgradeError',err);}});}
function freezeTransport(){if(failed)return;failed=true;cleanup();transport.close();transport=null;}
function onerror(err){var error=new Error('probe error: '+err);error.transport=transport.name;freezeTransport();debug('probe transport "%s" failed because of error: %s',name,err);self.emit('upgradeError',error);}
function onTransportClose(){onerror('transport closed');}
function onclose(){onerror('socket closed');}
function onupgrade(to){if(transport&&to.name!==transport.name){debug('"%s" works - aborting "%s"',to.name,transport.name);freezeTransport();}}
function cleanup(){transport.removeListener('open',onTransportOpen);transport.removeListener('error',onerror);transport.removeListener('close',onTransportClose);self.removeListener('close',onclose);self.removeListener('upgrading',onupgrade);}
transport.once('open',onTransportOpen);transport.once('error',onerror);transport.once('close',onTransportClose);this.once('close',onclose);this.once('upgrading',onupgrade);transport.open();};Socket.prototype.onOpen=function(){debug('socket open');this.readyState='open';Socket.priorWebsocketSuccess='websocket'===this.transport.name;this.emit('open');this.flush();if('open'===this.readyState&&this.upgrade&&this.transport.pause){debug('starting upgrade probes');for(var i=0,l=this.upgrades.length;i<l;i++){this.probe(this.upgrades[i]);}}};Socket.prototype.onPacket=function(packet){if('opening'===this.readyState||'open'===this.readyState||'closing'===this.readyState){debug('socket receive: type "%s", data "%s"',packet.type,packet.data);this.emit('packet',packet);this.emit('heartbeat');switch(packet.type){case 'open':this.onHandshake(parsejson(packet.data));break;case 'pong':this.setPing();this.emit('pong');break;case 'error':var err=new Error('server error');err.code=packet.data;this.onError(err);break;case 'message':this.emit('data',packet.data);this.emit('message',packet.data);break;}}else{debug('packet received with socket readyState "%s"',this.readyState);}};Socket.prototype.onHandshake=function(data){this.emit('handshake',data);this.id=data.sid;this.transport.query.sid=data.sid;this.upgrades=this.filterUpgrades(data.upgrades);this.pingInterval=data.pingInterval;this.pingTimeout=data.pingTimeout;this.onOpen();if('closed'===this.readyState)return;this.setPing();this.removeListener('heartbeat',this.onHeartbeat);this.on('heartbeat',this.onHeartbeat);};Socket.prototype.onHeartbeat=function(timeout){clearTimeout(this.pingTimeoutTimer);var self=this;self.pingTimeoutTimer=setTimeout(function(){if('closed'===self.readyState)return;self.onClose('ping timeout');},timeout||(self.pingInterval+self.pingTimeout));};Socket.prototype.setPing=function(){var self=this;clearTimeout(self.pingIntervalTimer);self.pingIntervalTimer=setTimeout(function(){debug('writing ping packet - expecting pong within %sms',self.pingTimeout);self.ping();self.onHeartbeat(self.pingTimeout);},self.pingInterval);};Socket.prototype.ping=function(){var self=this;this.sendPacket('ping',function(){self.emit('ping');});};Socket.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen);this.prevBufferLen=0;if(0===this.writeBuffer.length){this.emit('drain');}else{this.flush();}};Socket.prototype.flush=function(){if('closed'!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){debug('flushing %d packets in socket',this.writeBuffer.length);this.transport.send(this.writeBuffer);this.prevBufferLen=this.writeBuffer.length;this.emit('flush');}};Socket.prototype.write=Socket.prototype.send=function(msg,options,fn){this.sendPacket('message',msg,options,fn);return this;};Socket.prototype.sendPacket=function(type,data,options,fn){if('function'===typeof data){fn=data;data=undefined;}
if('function'===typeof options){fn=options;options=null;}
if('closing'===this.readyState||'closed'===this.readyState){return;}
options=options||{};options.compress=false!==options.compress;var packet={type:type,data:data,options:options};this.emit('packetCreate',packet);this.writeBuffer.push(packet);if(fn)this.once('flush',fn);this.flush();};Socket.prototype.close=function(){if('opening'===this.readyState||'open'===this.readyState){this.readyState='closing';var self=this;if(this.writeBuffer.length){this.once('drain',function(){if(this.upgrading){waitForUpgrade();}else{close();}});}else if(this.upgrading){waitForUpgrade();}else{close();}}
function close(){self.onClose('forced close');debug('socket closing - telling transport to close');self.transport.close();}
function cleanupAndClose(){self.removeListener('upgrade',cleanupAndClose);self.removeListener('upgradeError',cleanupAndClose);close();}
function waitForUpgrade(){self.once('upgrade',cleanupAndClose);self.once('upgradeError',cleanupAndClose);}
return this;};Socket.prototype.onError=function(err){debug('socket error %j',err);Socket.priorWebsocketSuccess=false;this.emit('error',err);this.onClose('transport error',err);};Socket.prototype.onClose=function(reason,desc){if('opening'===this.readyState||'open'===this.readyState||'closing'===this.readyState){debug('socket close with reason: "%s"',reason);var self=this;clearTimeout(this.pingIntervalTimer);clearTimeout(this.pingTimeoutTimer);this.transport.removeAllListeners('close');this.transport.close();this.transport.removeAllListeners();this.readyState='closed';this.id=null;this.emit('close',reason,desc);self.writeBuffer=[];self.prevBufferLen=0;}};Socket.prototype.filterUpgrades=function(upgrades){var filteredUpgrades=[];for(var i=0,j=upgrades.length;i<j;i++){if(~index(this.transports,upgrades[i]))filteredUpgrades.push(upgrades[i]);}
return filteredUpgrades;};}.call(exports,__webpack_require__(10)))}),(function(module,exports){try{module.exports=typeof XMLHttpRequest!=='undefined'&&'withCredentials'in new XMLHttpRequest();}catch(err){module.exports=false;}}),(function(module,exports,__webpack_require__){(function(global){var XMLHttpRequest=__webpack_require__(260);var Polling=__webpack_require__(421);var Emitter=__webpack_require__(144);var inherit=__webpack_require__(179);var debug=__webpack_require__(91)('engine.io-client:polling-xhr');module.exports=XHR;module.exports.Request=Request;function empty(){}
function XHR(opts){Polling.call(this,opts);this.requestTimeout=opts.requestTimeout;if(global.location){var isSSL='https:'===location.protocol;var port=location.port;if(!port){port=isSSL?443:80;}
this.xd=opts.hostname!==global.location.hostname||port!==opts.port;this.xs=opts.secure!==isSSL;}else{this.extraHeaders=opts.extraHeaders;}}
inherit(XHR,Polling);XHR.prototype.supportsBinary=true;XHR.prototype.request=function(opts){opts=opts||{};opts.uri=this.uri();opts.xd=this.xd;opts.xs=this.xs;opts.agent=this.agent||false;opts.supportsBinary=this.supportsBinary;opts.enablesXDR=this.enablesXDR;opts.pfx=this.pfx;opts.key=this.key;opts.passphrase=this.passphrase;opts.cert=this.cert;opts.ca=this.ca;opts.ciphers=this.ciphers;opts.rejectUnauthorized=this.rejectUnauthorized;opts.requestTimeout=this.requestTimeout;opts.extraHeaders=this.extraHeaders;return new Request(opts);};XHR.prototype.doWrite=function(data,fn){var isBinary=typeof data!=='string'&&data!==undefined;var req=this.request({method:'POST',data:data,isBinary:isBinary});var self=this;req.on('success',fn);req.on('error',function(err){self.onError('xhr post error',err);});this.sendXhr=req;};XHR.prototype.doPoll=function(){debug('xhr poll');var req=this.request();var self=this;req.on('data',function(data){self.onData(data);});req.on('error',function(err){self.onError('xhr poll error',err);});this.pollXhr=req;};function Request(opts){this.method=opts.method||'GET';this.uri=opts.uri;this.xd=!!opts.xd;this.xs=!!opts.xs;this.async=false!==opts.async;this.data=undefined!==opts.data?opts.data:null;this.agent=opts.agent;this.isBinary=opts.isBinary;this.supportsBinary=opts.supportsBinary;this.enablesXDR=opts.enablesXDR;this.requestTimeout=opts.requestTimeout;this.pfx=opts.pfx;this.key=opts.key;this.passphrase=opts.passphrase;this.cert=opts.cert;this.ca=opts.ca;this.ciphers=opts.ciphers;this.rejectUnauthorized=opts.rejectUnauthorized;this.extraHeaders=opts.extraHeaders;this.create();}
Emitter(Request.prototype);Request.prototype.create=function(){var opts={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};opts.pfx=this.pfx;opts.key=this.key;opts.passphrase=this.passphrase;opts.cert=this.cert;opts.ca=this.ca;opts.ciphers=this.ciphers;opts.rejectUnauthorized=this.rejectUnauthorized;var xhr=this.xhr=new XMLHttpRequest(opts);var self=this;try{debug('xhr open %s: %s',this.method,this.uri);xhr.open(this.method,this.uri,this.async);try{if(this.extraHeaders){xhr.setDisableHeaderCheck(true);for(var i in this.extraHeaders){if(this.extraHeaders.hasOwnProperty(i)){xhr.setRequestHeader(i,this.extraHeaders[i]);}}}}catch(e){}
if(this.supportsBinary){xhr.responseType='arraybuffer';}
if('POST'===this.method){try{if(this.isBinary){xhr.setRequestHeader('Content-type','application/octet-stream');}else{xhr.setRequestHeader('Content-type','text/plain;charset=UTF-8');}}catch(e){}}
try{xhr.setRequestHeader('Accept','*/*');}catch(e){}
if('withCredentials'in xhr){xhr.withCredentials=true;}
if(this.requestTimeout){xhr.timeout=this.requestTimeout;}
if(this.hasXDR()){xhr.onload=function(){self.onLoad();};xhr.onerror=function(){self.onError(xhr.responseText);};}else{xhr.onreadystatechange=function(){if(4!==xhr.readyState)return;if(200===xhr.status||1223===xhr.status){self.onLoad();}else{setTimeout(function(){self.onError(xhr.status);},0);}};}
debug('xhr data %s',this.data);xhr.send(this.data);}catch(e){setTimeout(function(){self.onError(e);},0);return;}
if(global.document){this.index=Request.requestsCount++;Request.requests[this.index]=this;}};Request.prototype.onSuccess=function(){this.emit('success');this.cleanup();};Request.prototype.onData=function(data){this.emit('data',data);this.onSuccess();};Request.prototype.onError=function(err){this.emit('error',err);this.cleanup(true);};Request.prototype.cleanup=function(fromError){if('undefined'===typeof this.xhr||null===this.xhr){return;}
if(this.hasXDR()){this.xhr.onload=this.xhr.onerror=empty;}else{this.xhr.onreadystatechange=empty;}
if(fromError){try{this.xhr.abort();}catch(e){}}
if(global.document){delete Request.requests[this.index];}
this.xhr=null;};Request.prototype.onLoad=function(){var data;try{var contentType;try{contentType=this.xhr.getResponseHeader('Content-Type').split(';')[0];}catch(e){}
if(contentType==='application/octet-stream'){data=this.xhr.response||this.xhr.responseText;}else{if(!this.supportsBinary){data=this.xhr.responseText;}else{try{data=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response));}catch(e){var ui8Arr=new Uint8Array(this.xhr.response);var dataArray=[];for(var idx=0,length=ui8Arr.length;idx<length;idx++){dataArray.push(ui8Arr[idx]);}
data=String.fromCharCode.apply(null,dataArray);}}}}catch(e){this.onError(e);}
if(null!=data){this.onData(data);}};Request.prototype.hasXDR=function(){return 'undefined'!==typeof global.XDomainRequest&&!this.xs&&this.enablesXDR;};Request.prototype.abort=function(){this.cleanup();};Request.requestsCount=0;Request.requests={};if(global.document){if(global.attachEvent){global.attachEvent('onunload',unloadHandler);}else if(global.addEventListener){global.addEventListener('beforeunload',unloadHandler,false);}}
function unloadHandler(){for(var i in Request.requests){if(Request.requests.hasOwnProperty(i)){Request.requests[i].abort();}}}}.call(exports,__webpack_require__(10)))}),(function(module,exports){module.exports=Object.keys||function keys(obj){var arr=[];var has=Object.prototype.hasOwnProperty;for(var i in obj){if(has.call(obj,i)){arr.push(i);}}
return arr;};}),(function(module,exports){module.exports=Array.isArray||function(arr){return Object.prototype.toString.call(arr)=='[object Array]';};}),(function(module,exports){module.exports=function(arraybuffer,start,end){var bytes=arraybuffer.byteLength;start=start||0;end=end||bytes;if(arraybuffer.slice){return arraybuffer.slice(start,end);}
if(start<0){start+=bytes;}
if(end<0){end+=bytes;}
if(end>bytes){end=bytes;}
if(start>=bytes||start>=end||bytes===0){return new ArrayBuffer(0);}
var abv=new Uint8Array(arraybuffer);var result=new Uint8Array(end-start);for(var i=start,ii=0;i<end;i++,ii++){result[ii]=abv[i];}
return result.buffer;};}),(function(module,exports){module.exports=after
function after(count,callback,err_cb){var bail=false
err_cb=err_cb||noop
proxy.count=count
return(count===0)?callback():proxy
function proxy(err,result){if(proxy.count<=0){throw new Error('after called too many times')}
--proxy.count
if(err){bail=true
callback(err)
callback=err_cb}else if(proxy.count===0&&!bail){callback(null,result)}}}
function noop(){}}),(function(module,exports,__webpack_require__){(function(module,global){var __WEBPACK_AMD_DEFINE_RESULT__;/*!https://mths.be/wtf8 v1.0.0 by @mathias*/;(function(root){var freeExports=typeof exports=='object'&&exports;var freeModule=typeof module=='object'&&module&&module.exports==freeExports&&module;var freeGlobal=typeof global=='object'&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal){root=freeGlobal;}
var stringFromCharCode=String.fromCharCode;function ucs2decode(string){var output=[];var counter=0;var length=string.length;var value;var extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=0xD800&&value<=0xDBFF&&counter<length){extra=string.charCodeAt(counter++);if((extra&0xFC00)==0xDC00){output.push(((value&0x3FF)<<10)+(extra&0x3FF)+0x10000);}else{output.push(value);counter--;}}else{output.push(value);}}
return output;}
function ucs2encode(array){var length=array.length;var index=-1;var value;var output='';while(++index<length){value=array[index];if(value>0xFFFF){value-=0x10000;output+=stringFromCharCode(value>>>10&0x3FF|0xD800);value=0xDC00|value&0x3FF;}
output+=stringFromCharCode(value);}
return output;}
function createByte(codePoint,shift){return stringFromCharCode(((codePoint>>shift)&0x3F)|0x80);}
function encodeCodePoint(codePoint){if((codePoint&0xFFFFFF80)==0){return stringFromCharCode(codePoint);}
var symbol='';if((codePoint&0xFFFFF800)==0){symbol=stringFromCharCode(((codePoint>>6)&0x1F)|0xC0);}
else if((codePoint&0xFFFF0000)==0){symbol=stringFromCharCode(((codePoint>>12)&0x0F)|0xE0);symbol+=createByte(codePoint,6);}
else if((codePoint&0xFFE00000)==0){symbol=stringFromCharCode(((codePoint>>18)&0x07)|0xF0);symbol+=createByte(codePoint,12);symbol+=createByte(codePoint,6);}
symbol+=stringFromCharCode((codePoint&0x3F)|0x80);return symbol;}
function wtf8encode(string){var codePoints=ucs2decode(string);var length=codePoints.length;var index=-1;var codePoint;var byteString='';while(++index<length){codePoint=codePoints[index];byteString+=encodeCodePoint(codePoint);}
return byteString;}
function readContinuationByte(){if(byteIndex>=byteCount){throw Error('Invalid byte index');}
var continuationByte=byteArray[byteIndex]&0xFF;byteIndex++;if((continuationByte&0xC0)==0x80){return continuationByte&0x3F;}
throw Error('Invalid continuation byte');}
function decodeSymbol(){var byte1;var byte2;var byte3;var byte4;var codePoint;if(byteIndex>byteCount){throw Error('Invalid byte index');}
if(byteIndex==byteCount){return false;}
byte1=byteArray[byteIndex]&0xFF;byteIndex++;if((byte1&0x80)==0){return byte1;}
if((byte1&0xE0)==0xC0){var byte2=readContinuationByte();codePoint=((byte1&0x1F)<<6)|byte2;if(codePoint>=0x80){return codePoint;}else{throw Error('Invalid continuation byte');}}
if((byte1&0xF0)==0xE0){byte2=readContinuationByte();byte3=readContinuationByte();codePoint=((byte1&0x0F)<<12)|(byte2<<6)|byte3;if(codePoint>=0x0800){return codePoint;}else{throw Error('Invalid continuation byte');}}
if((byte1&0xF8)==0xF0){byte2=readContinuationByte();byte3=readContinuationByte();byte4=readContinuationByte();codePoint=((byte1&0x0F)<<0x12)|(byte2<<0x0C)|(byte3<<0x06)|byte4;if(codePoint>=0x010000&&codePoint<=0x10FFFF){return codePoint;}}
throw Error('Invalid WTF-8 detected');}
var byteArray;var byteCount;var byteIndex;function wtf8decode(byteString){byteArray=ucs2decode(byteString);byteCount=byteArray.length;byteIndex=0;var codePoints=[];var tmp;while((tmp=decodeSymbol())!==false){codePoints.push(tmp);}
return ucs2encode(codePoints);}
var wtf8={'version':'1.0.0','encode':wtf8encode,'decode':wtf8decode};if(true){!(__WEBPACK_AMD_DEFINE_RESULT__=(function(){return wtf8;}).call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));}else if(freeExports&&!freeExports.nodeType){if(freeModule){freeModule.exports=wtf8;}else{var object={};var hasOwnProperty=object.hasOwnProperty;for(var key in wtf8){hasOwnProperty.call(wtf8,key)&&(freeExports[key]=wtf8[key]);}}}else{root.wtf8=wtf8;}}(this));}.call(exports,__webpack_require__(83)(module),__webpack_require__(10)))}),(function(module,exports){(function(){"use strict";var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var lookup=new Uint8Array(256);for(var i=0;i<chars.length;i++){lookup[chars.charCodeAt(i)]=i;}
exports.encode=function(arraybuffer){var bytes=new Uint8Array(arraybuffer),i,len=bytes.length,base64="";for(i=0;i<len;i+=3){base64+=chars[bytes[i]>>2];base64+=chars[((bytes[i]&3)<<4)|(bytes[i+1]>>4)];base64+=chars[((bytes[i+1]&15)<<2)|(bytes[i+2]>>6)];base64+=chars[bytes[i+2]&63];}
if((len%3)===2){base64=base64.substring(0,base64.length-1)+"=";}else if(len%3===1){base64=base64.substring(0,base64.length-2)+"==";}
return base64;};exports.decode=function(base64){var bufferLength=base64.length*0.75,len=base64.length,i,p=0,encoded1,encoded2,encoded3,encoded4;if(base64[base64.length-1]==="="){bufferLength--;if(base64[base64.length-2]==="="){bufferLength--;}}
var arraybuffer=new ArrayBuffer(bufferLength),bytes=new Uint8Array(arraybuffer);for(i=0;i<len;i+=4){encoded1=lookup[base64.charCodeAt(i)];encoded2=lookup[base64.charCodeAt(i+1)];encoded3=lookup[base64.charCodeAt(i+2)];encoded4=lookup[base64.charCodeAt(i+3)];bytes[p++]=(encoded1<<2)|(encoded2>>4);bytes[p++]=((encoded2&15)<<4)|(encoded3>>2);bytes[p++]=((encoded3&3)<<6)|(encoded4&63);}
return arraybuffer;};})();}),(function(module,exports,__webpack_require__){(function(global){var BlobBuilder=global.BlobBuilder||global.WebKitBlobBuilder||global.MSBlobBuilder||global.MozBlobBuilder;var blobSupported=(function(){try{var a=new Blob(['hi']);return a.size===2;}catch(e){return false;}})();var blobSupportsArrayBufferView=blobSupported&&(function(){try{var b=new Blob([new Uint8Array([1,2])]);return b.size===2;}catch(e){return false;}})();var blobBuilderSupported=BlobBuilder&&BlobBuilder.prototype.append&&BlobBuilder.prototype.getBlob;function mapArrayBufferViews(ary){for(var i=0;i<ary.length;i++){var chunk=ary[i];if(chunk.buffer instanceof ArrayBuffer){var buf=chunk.buffer;if(chunk.byteLength!==buf.byteLength){var copy=new Uint8Array(chunk.byteLength);copy.set(new Uint8Array(buf,chunk.byteOffset,chunk.byteLength));buf=copy.buffer;}
ary[i]=buf;}}}
function BlobBuilderConstructor(ary,options){options=options||{};var bb=new BlobBuilder();mapArrayBufferViews(ary);for(var i=0;i<ary.length;i++){bb.append(ary[i]);}
return(options.type)?bb.getBlob(options.type):bb.getBlob();};function BlobConstructor(ary,options){mapArrayBufferViews(ary);return new Blob(ary,options||{});};module.exports=(function(){if(blobSupported){return blobSupportsArrayBufferView?global.Blob:BlobConstructor;}else if(blobBuilderSupported){return BlobBuilderConstructor;}else{return undefined;}})();}.call(exports,__webpack_require__(10)))}),(function(module,exports,__webpack_require__){(function(global){var Polling=__webpack_require__(421);var inherit=__webpack_require__(179);module.exports=JSONPPolling;var rNewline=/\n/g;var rEscapedNewline=/\\n/g;var callbacks;function empty(){}
function JSONPPolling(opts){Polling.call(this,opts);this.query=this.query||{};if(!callbacks){if(!global.___eio)global.___eio=[];callbacks=global.___eio;}
this.index=callbacks.length;var self=this;callbacks.push(function(msg){self.onData(msg);});this.query.j=this.index;if(global.document&&global.addEventListener){global.addEventListener('beforeunload',function(){if(self.script)self.script.onerror=empty;},false);}}
inherit(JSONPPolling,Polling);JSONPPolling.prototype.supportsBinary=false;JSONPPolling.prototype.doClose=function(){if(this.script){this.script.parentNode.removeChild(this.script);this.script=null;}
if(this.form){this.form.parentNode.removeChild(this.form);this.form=null;this.iframe=null;}
Polling.prototype.doClose.call(this);};JSONPPolling.prototype.doPoll=function(){var self=this;var script=document.createElement('script');if(this.script){this.script.parentNode.removeChild(this.script);this.script=null;}
script.async=true;script.src=this.uri();script.onerror=function(e){self.onError('jsonp poll error',e);};var insertAt=document.getElementsByTagName('script')[0];if(insertAt){insertAt.parentNode.insertBefore(script,insertAt);}else{(document.head||document.body).appendChild(script);}
this.script=script;var isUAgecko='undefined'!==typeof navigator&&/gecko/i.test(navigator.userAgent);if(isUAgecko){setTimeout(function(){var iframe=document.createElement('iframe');document.body.appendChild(iframe);document.body.removeChild(iframe);},100);}};JSONPPolling.prototype.doWrite=function(data,fn){var self=this;if(!this.form){var form=document.createElement('form');var area=document.createElement('textarea');var id=this.iframeId='eio_iframe_'+this.index;var iframe;form.className='socketio';form.style.position='absolute';form.style.top='-1000px';form.style.left='-1000px';form.target=id;form.method='POST';form.setAttribute('accept-charset','utf-8');area.name='d';form.appendChild(area);document.body.appendChild(form);this.form=form;this.area=area;}
this.form.action=this.uri();function complete(){initIframe();fn();}
function initIframe(){if(self.iframe){try{self.form.removeChild(self.iframe);}catch(e){self.onError('jsonp polling iframe removal error',e);}}
try{var html='<iframe src="javascript:0" name="'+self.iframeId+'">';iframe=document.createElement(html);}catch(e){iframe=document.createElement('iframe');iframe.name=self.iframeId;iframe.src='javascript:0';}
iframe.id=self.iframeId;self.form.appendChild(iframe);self.iframe=iframe;}
initIframe();data=data.replace(rEscapedNewline,'\\\n');this.area.value=data.replace(rNewline,'\\n');try{this.form.submit();}catch(e){}
if(this.iframe.attachEvent){this.iframe.onreadystatechange=function(){if(self.iframe.readyState==='complete'){complete();}};}else{this.iframe.onload=complete;}};}.call(exports,__webpack_require__(10)))}),(function(module,exports,__webpack_require__){(function(global){var Transport=__webpack_require__(261);var parser=__webpack_require__(121);var parseqs=__webpack_require__(262);var inherit=__webpack_require__(179);var yeast=__webpack_require__(423);var debug=__webpack_require__(91)('engine.io-client:websocket');var BrowserWebSocket=global.WebSocket||global.MozWebSocket;var NodeWebSocket;if(typeof window==='undefined'){try{NodeWebSocket=__webpack_require__(1012);}catch(e){}}
var WebSocket=BrowserWebSocket;if(!WebSocket&&typeof window==='undefined'){WebSocket=NodeWebSocket;}
module.exports=WS;function WS(opts){var forceBase64=(opts&&opts.forceBase64);if(forceBase64){this.supportsBinary=false;}
this.perMessageDeflate=opts.perMessageDeflate;this.usingBrowserWebSocket=BrowserWebSocket&&!opts.forceNode;if(!this.usingBrowserWebSocket){WebSocket=NodeWebSocket;}
Transport.call(this,opts);}
inherit(WS,Transport);WS.prototype.name='websocket';WS.prototype.supportsBinary=true;WS.prototype.doOpen=function(){if(!this.check()){return;}
var uri=this.uri();var protocols=void(0);var opts={agent:this.agent,perMessageDeflate:this.perMessageDeflate};opts.pfx=this.pfx;opts.key=this.key;opts.passphrase=this.passphrase;opts.cert=this.cert;opts.ca=this.ca;opts.ciphers=this.ciphers;opts.rejectUnauthorized=this.rejectUnauthorized;if(this.extraHeaders){opts.headers=this.extraHeaders;}
if(this.localAddress){opts.localAddress=this.localAddress;}
try{this.ws=this.usingBrowserWebSocket?new WebSocket(uri):new WebSocket(uri,protocols,opts);}catch(err){return this.emit('error',err);}
if(this.ws.binaryType===undefined){this.supportsBinary=false;}
if(this.ws.supports&&this.ws.supports.binary){this.supportsBinary=true;this.ws.binaryType='nodebuffer';}else{this.ws.binaryType='arraybuffer';}
this.addEventListeners();};WS.prototype.addEventListeners=function(){var self=this;this.ws.onopen=function(){self.onOpen();};this.ws.onclose=function(){self.onClose();};this.ws.onmessage=function(ev){self.onData(ev.data);};this.ws.onerror=function(e){self.onError('websocket error',e);};};WS.prototype.write=function(packets){var self=this;this.writable=false;var total=packets.length;for(var i=0,l=total;i<l;i++){(function(packet){parser.encodePacket(packet,self.supportsBinary,function(data){if(!self.usingBrowserWebSocket){var opts={};if(packet.options){opts.compress=packet.options.compress;}
if(self.perMessageDeflate){var len='string'===typeof data?global.Buffer.byteLength(data):data.length;if(len<self.perMessageDeflate.threshold){opts.compress=false;}}}
try{if(self.usingBrowserWebSocket){self.ws.send(data);}else{self.ws.send(data,opts);}}catch(e){debug('websocket closed before onclose event');}
--total||done();});})(packets[i]);}
function done(){self.emit('flush');setTimeout(function(){self.writable=true;self.emit('drain');},0);}};WS.prototype.onClose=function(){Transport.prototype.onClose.call(this);};WS.prototype.doClose=function(){if(typeof this.ws!=='undefined'){this.ws.close();}};WS.prototype.uri=function(){var query=this.query||{};var schema=this.secure?'wss':'ws';var port='';if(this.port&&(('wss'===schema&&Number(this.port)!==443)||('ws'===schema&&Number(this.port)!==80))){port=':'+this.port;}
if(this.timestampRequests){query[this.timestampParam]=yeast();}
if(!this.supportsBinary){query.b64=1;}
query=parseqs.encode(query);if(query.length){query='?'+query;}
var ipv6=this.hostname.indexOf(':')!==-1;return schema+'://'+(ipv6?'['+this.hostname+']':this.hostname)+port+this.path+query;};WS.prototype.check=function(){return!!WebSocket&&!('__initialize'in WebSocket&&this.name===WS.prototype.name);};}.call(exports,__webpack_require__(10)))}),(function(module,exports){}),(function(module,exports,__webpack_require__){(function(global){var rvalidchars=/^[\],:{}\s]*$/;var rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g;var rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g;var rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g;var rtrimLeft=/^\s+/;var rtrimRight=/\s+$/;module.exports=function parsejson(data){if('string'!=typeof data||!data){return null;}
data=data.replace(rtrimLeft,'').replace(rtrimRight,'');if(global.JSON&&JSON.parse){return JSON.parse(data);}
if(rvalidchars.test(data.replace(rvalidescape,'@').replace(rvalidtokens,']').replace(rvalidbraces,''))){return(new Function('return '+data))();}};}.call(exports,__webpack_require__(10)))}),(function(module,exports){module.exports=toArray
function toArray(list,index){var array=[]
index=index||0
for(var i=index||0;i<list.length;i++){array[i-index]=list[i]}
return array}}),(function(module,exports){module.exports=Backoff;function Backoff(opts){opts=opts||{};this.ms=opts.min||100;this.max=opts.max||10000;this.factor=opts.factor||2;this.jitter=opts.jitter>0&&opts.jitter<=1?opts.jitter:0;this.attempts=0;}
Backoff.prototype.duration=function(){var ms=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var rand=Math.random();var deviation=Math.floor(rand*this.jitter*ms);ms=(Math.floor(rand*10)&1)==0?ms-deviation:ms+deviation;}
return Math.min(ms,this.max)|0;};Backoff.prototype.reset=function(){this.attempts=0;};Backoff.prototype.setMin=function(min){this.ms=min;};Backoff.prototype.setMax=function(max){this.max=max;};Backoff.prototype.setJitter=function(jitter){this.jitter=jitter;};}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_node_lists_waitlist_Nodes_Waitlist__=__webpack_require__(39);var __WEBPACK_IMPORTED_MODULE_1_node_lists_types_Node_Type__=__webpack_require__(35);var __WEBPACK_IMPORTED_MODULE_2_main_blockchain_Blockchain__=__webpack_require__(5);class NodePropagationList{constructor(){this._waitlistSimple=[];this._waitlistSimpleSSL=[];setTimeout(this._recalculateWaitlistSimple.bind(this),5*1000+Math.random()*5*1000);}
_getWailistElements(number,nodes,answer,onlySSL=false){if(nodes.length===0)return;let list=[];for(let index=0;index<nodes.length;index++){let node=nodes[index];if(node.isFallback){index++;continue;}
if((!onlySSL||(onlySSL&&node.sckAddresses[0].SSL===true)))
list.push(node.toJSON());}
for(let i=0;i<number&&answer.length<list.length;i++)
answer.push(list[i]);let index=0;while(index<number&&answer.length<list.length){let pos=Math.floor(Math.random()*list.length);let found=false;for(let i=0;i<answer.length;i++)
if(answer[i].a===list[pos].a){found=true;break;}
if(!found){answer.push(list[pos]);}}};_recalculateWaitlistSimple(){let number=8+Math.floor(Math.random()*10);this._waitlistSimple=[];this._getWailistElements(number,__WEBPACK_IMPORTED_MODULE_0_node_lists_waitlist_Nodes_Waitlist__["a"].waitListFullNodes,this._waitlistSimple);this._waitlistSimpleSSL=[];this._getWailistElements(number,__WEBPACK_IMPORTED_MODULE_0_node_lists_waitlist_Nodes_Waitlist__["a"].waitListFullNodes,this._waitlistSimpleSSL,true);setTimeout(this._recalculateWaitlistSimple.bind(this),10*1000+Math.random()*10*1000);}
async propagateWaitlistSimple(socket,nodeType,disconnectSocket=true){if(!socket)return;if(!socket.emit)console.warn("socket.emit is not supported");let list=nodeType===__WEBPACK_IMPORTED_MODULE_1_node_lists_types_Node_Type__["a"].NODE_WEB_PEER?this._waitlistSimpleSSL:this._waitlistSimple;let timeout;if(disconnectSocket)
timeout=setTimeout(()=>{console.error("Disconnected by simple waitlist1");socket.disconnect()},7000+Math.floor(Math.random()*5*1000));socket.emit("propagation/simple-waitlist-nodes",{op:"new-full-nodes",addresses:list},(data)=>{if(disconnectSocket){console.error("Disconnected by simple waitlist");socket.disconnect();}
clearTimeout(timeout);});await __WEBPACK_IMPORTED_MODULE_2_main_blockchain_Blockchain__["a"].blockchain.sleep(20);}}
var _unused_webpack_default_export=(new NodePropagationList());}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_1__Node_Signaling_Server_Waitlist_Object__=__webpack_require__(1018);var __WEBPACK_IMPORTED_MODULE_2__Node_Signaling_Server_Protocol__=__webpack_require__(428);var __WEBPACK_IMPORTED_MODULE_3__signaling_server_room_Signaling_Server_Room_List__=__webpack_require__(429);var __WEBPACK_IMPORTED_MODULE_4_common_utils_helpers_Utils__=__webpack_require__(40);class NodeSignalingServerService{constructor(){this.waitlist=[];this.started=false;__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].emitter.on("nodes-list/disconnected",async(nodesListObject)=>{await this._desinitializeNode(nodesListObject.socket);});}
_desinitializeNode(socket){for(let i=this.waitlist.length-1;i>=0;i--)
if(this.waitlist[i].socket.node.sckAddress.matchAddress(socket.node.sckAddress,{"uuid":true})){this.waitlist.splice(i,1);return;}}
async registerSocketForSignaling(socket,acceptWebPeers=true){let waitlistObject=this.searchNodeSignalingServerWaitlist(socket);if(waitlistObject===null){waitlistObject=new __WEBPACK_IMPORTED_MODULE_1__Node_Signaling_Server_Waitlist_Object__["a"](socket,acceptWebPeers,);this.waitlist.push(waitlistObject)}
return waitlistObject;}
startConnectingWebPeers(){if(this.started===true)
return;this.started=true;this._connectWebPeers();}
findNodeSignalingServerWaitlist(socket){for(let i=0;i<this.waitlist.length;i++)
if(this.waitlist[i].socket.node.sckAddress.matchAddress(socket.node.sckAddress,{"uuid":true}))
return i;return-1;}
searchNodeSignalingServerWaitlist(socket){let pos=this.findNodeSignalingServerWaitlist(socket);if(pos!==-1)return this.waitlist[pos];return null;}
async _connectWebPeers(){let count=0;for(let i=0;i<this.waitlist.length;i++)
if(this.waitlist[i].acceptWebPeers)
for(let j=i+1;j<this.waitlist.length;j++)
if(this.waitlist[j].acceptWebPeers){let client1,client2=null;if(Math.random()>0.5){client1=this.waitlist[i];client2=this.waitlist[j];}else{client1=this.waitlist[j];client2=this.waitlist[i];}
__WEBPACK_IMPORTED_MODULE_2__Node_Signaling_Server_Protocol__["a"].connectWebPeer(client1.socket,client2.socket);if(count%100===0)
await __WEBPACK_IMPORTED_MODULE_4_common_utils_helpers_Utils__["a"].sleep(20);}
setTimeout(this._connectWebPeers.bind(this),2000);}}
__webpack_exports__["a"]=(new NodeSignalingServerService());}),(function(module,__webpack_exports__,__webpack_require__){"use strict";class NodeSignalingServerWaitlistObject{constructor(socket,acceptWebPeers){this.socket=socket;this.acceptWebPeers=acceptWebPeers;}
set acceptWebPeers(acceptWebPeers){this._acceptWebPeers=acceptWebPeers;}
get acceptWebPeers(){return this._acceptWebPeers;}}
__webpack_exports__["a"]=(NodeSignalingServerWaitlistObject);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__signaling_client_list__=__webpack_require__(265);var __WEBPACK_IMPORTED_MODULE_1__Node_Signaling_Client_Protocol__=__webpack_require__(264);class SignalingClientPeerObject{constructor(webPeer,uuid,signalingClientType){this.webPeer=webPeer;this.uuid=uuid;this.signalingClientType=signalingClientType;this.lastTimeChecked=0;let timeout=setTimeout(()=>{console.error("Signaling Client Peer Object Timeout");__WEBPACK_IMPORTED_MODULE_0__signaling_client_list__["a"].deleteWebPeerSignalingClientList(uuid);__WEBPACK_IMPORTED_MODULE_1__Node_Signaling_Client_Protocol__["a"].sendErrorConnection(webPeer);},10*1000);webPeer.emitter.on("connect",()=>{clearTimeout(timeout);__WEBPACK_IMPORTED_MODULE_1__Node_Signaling_Client_Protocol__["a"].sendSuccessConnection(webPeer);});}
refreshLastTimeChecked(){this.lastTimeChecked=new Date().getTime();}}
__webpack_exports__["a"]=(SignalingClientPeerObject);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_utils_Advanced_Emitter__=__webpack_require__(70);var __WEBPACK_IMPORTED_MODULE_1_common_sockets_protocol_extend_socket_Socket_Extend__=__webpack_require__(427);var __WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_3_common_sockets_protocol_signaling_client_Node_Signaling_Client_Protocol__=__webpack_require__(264);var __WEBPACK_IMPORTED_MODULE_4_node_lists_types_Connection_Type__=__webpack_require__(47);var __WEBPACK_IMPORTED_MODULE_5_consts_const_global__=__webpack_require__(2);let RTCPeerConnection;let RTCSessionDescription;let RTCIceCandidate;if(typeof window!=="undefined"){RTCPeerConnection=window.RTCPeerConnection;RTCSessionDescription=window.RTCSessionDescription;RTCIceCandidate=window.RTCIceCandidate;}
const config={iceServers:[{urls:'stun:stun.l.google.com:19302',},{urls:"turn:192.155.84.88","username":"easyRTC","credential":"easyRTC@pass"},{urls:"turn:192.155.84.88?transport=tcp","username":"easyRTC","credential":"easyRTC@pass"},{urls:"turn:192.155.86.24:443","credential":"easyRTC@pass","username":"easyRTC"},{urls:"turn:192.155.86.24:443?transport=tcp","credential":"easyRTC@pass","username":"easyRTC"},{urls:"turn:numb.viagenie.ca",username:"pasaseh@ether123.net",credential:"12345678"}]}
class NodeWebPeerRTC{constructor(){if(__WEBPACK_IMPORTED_MODULE_5_consts_const_global__["a"].DEBUG)
console.log("Peer WebRTC Client constructor");this.peer=null;this.emitter=new __WEBPACK_IMPORTED_MODULE_0_common_utils_Advanced_Emitter__["a"](20);this._messages=[];}
async createPeer(initiator,socketSignaling,signalingServerConnectionId,callbackSignalingServerSendIceCandidate,remoteAddress,remoteUUID,remotePort,level){console.log('Using SCTP based data channels');this.peer=new RTCPeerConnection(config);this.peer.connected=false;this.peer.disconnected=true;this.enableEventsHandling();this.peer.onicecandidate=(event)=>{if(!event||!event.candidate)return;callbackSignalingServerSendIceCandidate(event.candidate);};this.peer.signaling={};this.peer.signaling.socketSignaling=socketSignaling;this.peer.signaling.connectionId=signalingServerConnectionId;this.peer.inputSignalsQueue=[];console.log('Created webRTC peer',"initiator",initiator,"signalingServerConnectionId",signalingServerConnectionId,"remoteAddress",remoteAddress,"remoteUUID",remoteUUID,"remotePort",remotePort);this.peer.disconnect=()=>{this.emitter.removeAllListeners();delete this._messages;this.peer.close()};this.socket=this.peer;this.peer.signalData=null;this.peer.signalInitiatorData=null;this.peer.on('error',err=>{console.log('error',err)});this.peer.on('connect',async()=>{console.log('WEBRTC PEER CONNECTED',this.peer);let remoteData=this.processDescription(this.peer.remoteDescription);this.peer.remoteAddress=remoteAddress||remoteData.address;this.peer.remoteUUID=remoteUUID||remoteData.uuid;this.peer.remotePort=remotePort||remoteData.port;this.peer.webRTC=true;__WEBPACK_IMPORTED_MODULE_1_common_sockets_protocol_extend_socket_Socket_Extend__["a"].extendSocket(this.peer,this.peer.remoteAddress,this.peer.remotePort,this.peer.remoteUUID,socketSignaling.node.level+1);});this.peer.once("HelloNode",async(data)=>{if(data){await this.socket.node.protocol.processHello(data,{"ip":true,"uuid":true});await this.initializePeer({"uuid":true});}else
this.peer.disconnect()});this.peer.on('data',(data)=>{console.log('data: ',data)});if(initiator){this.peer.dataChannel=this.peer.createDataChannel('chat');this.setupDataChannel();console.log("offer set");}else{this.peer.ondatachannel=event=>{this.peer.dataChannel=event.channel;this.setupDataChannel();}}}
createSignalInitiator(){this.peer.signalData=null;let promise=new Promise((resolve)=>{this.peer.onnegotiationneeded=()=>{this.peer.createOffer((desc)=>{this.peer.setLocalDescription(desc,async()=>{this.peer.signalData={"sdp":this.peer.localDescription};this.peer.signalInitiatorData=this.peer.signalData;resolve({result:true,signal:this.peer.signalData});},(error)=>{resolve({result:false,message:"Generating Initiator - Error Setting Local Description "+(error!==undefined?error.toString():'')});console.error("Generating Initiator - Error Setting Local Description ",error);});},(error)=>{resolve({result:false,message:"Error Creating Offer "+error.toString()});console.error("Error Creating Offer ",error);});};});return promise;}
createSignal(inputSignal){this.peer.signalData=null;let promise=new Promise((resolve)=>{if(typeof inputSignal==="string"){try{inputSignal=JSON.parse(inputSignal);}catch(exception){console.error("Error processing JSON createSignal",inputSignal,exception);resolve({result:false,message:"Invalid input signal"});return;}}
if(this.peer.connected===true){console.error("Error - Peer Already connected");resolve({result:false,message:"Already connected in the past"});return;}
if(inputSignal.sdp){this.peer.setRemoteDescription(new RTCSessionDescription(inputSignal.sdp),async()=>{console.log('pc.remoteDescription.type',this.peer.remoteDescription.type);if(this.peer.remoteDescription.type==='offer'){console.log('Answering offer');this.peer.signalInitiatorData=inputSignal;this.peer.createAnswer((desc)=>{this.peer.setLocalDescription(desc,async()=>{this.peer.signalData={'sdp':this.peer.localDescription};this.peer.setLocalDescription=true;resolve({result:true,signal:this.peer.signalData});for(let i=0;i<this.peer.inputSignalsQueue.length;i++){let answer=await this.createSignal(this.peer.inputSignalsQueue[i].inputSignal);this.peer.inputSignalsQueue[i].resolve(answer);}},error=>{console.error("Error Setting Local Description",error);resolve({result:false,message:"Error Setting Local Description"+error.toString()});})},error=>{console.error("Error Creating Answer ",error);resolve({result:false,message:"Error Creating Answer "+error.toString()});});}else{this.peer.setLocalDescription=true;for(let i=0;i<this.peer.inputSignalsQueue.length;i++){let answer=await this.createSignal(this.peer.inputSignalsQueue[i].inputSignal);this.peer.inputSignalsQueue[i].resolve(answer);}
resolve({result:true,message:""})}},error=>{console.error("Error setRemoteDescription",error);resolve({result:false,message:"setRemoteDescription failed"});});}else if(inputSignal.candidate){try{if(__WEBPACK_IMPORTED_MODULE_5_consts_const_global__["a"].DEBUG)
console.log("inputSignal.candidate",inputSignal);if(this.peer.setLocalDescription===true){let candidate=new RTCIceCandidate(inputSignal.candidate);this.peer.addIceCandidate(candidate);resolve({result:true,message:"iceCandidate successfully introduced"});}else{this.peer.inputSignalsQueue.push({inputSignal:inputSignal,resolve:resolve});}}catch(Exception){resolve({result:false,message:"iceCandidate error ",exception:Exception});console.error("iceCandidate error",inputSignal.candidate);}}});return promise;}
async joinAnswer(inputSignal){return await this.createSignal(inputSignal);}
setupDataChannel(){this.checkDataChannelState();this.peer.dataChannel.onopen=()=>{this.checkDataChannelState()};this.peer.dataChannel.onclose=()=>{this.checkDataChannelState()};this.peer.dataChannel.onerror=()=>{this.checkDataChannelState()};this.peer.oniceconnectionstatechange=function(){if(this.peer!==undefined&&this.peer.iceConnectionState==='disconnected'){console.log('iceConnection Disconnected');if(this.peer.connected===true){this.peer.connected=false;this.peer.disconnected=true;this.emitter.emit("disconnect",{})}}}.bind(this);this.peer.dataChannel.onmessage=(event)=>{try{let data=event.data;if(data.indexOf("chunk")===0){let pos=data.indexOf("chunk");let index=data.substr(pos+"chunk".length,data.indexOf("/")-pos-"chunk".length);let chunks=data.substr(data.indexOf("/")+1,data.indexOf("@")-data.indexOf("/")-1);let id=data.substr(data.indexOf("@")+1,data.indexOf("#")-data.indexOf("@")-1);let value=data.substr(data.indexOf("#")+1);let done=false;let message=undefined;if(chunks>0){message=this._findMessages(id);if(message===null){this._messages.push({id:id,chunks:{},timestamp:new Date(),});message=this._messages[this._messages.length-1];}
message.chunks[index]=value;done=true;for(let i=0;i<chunks;i++)
if(message.chunks[i]===undefined){done=false;break;}}else{done=true;}
if(done){if(chunks>0){data='';for(let i=0;i<chunks;i++)
data=data+message.chunks[i];}else
data=value;data=JSON.parse(data);let name=data.name;let value=data.value;if(name!==''){this.emitter.emit(name,value);}}}}catch(exception){console.error("Error onMessage",event.data,exception);}}}
checkDataChannelState(){if(this.peer===undefined)return;console.log('WebRTC channel state is:',this.peer.dataChannel.readyState);if(this.peer.dataChannel.readyState==='open'){if(!this.peer.connected){this.peer.connected=true;this.peer.disconnected=false;this.emitter.emit("connect",{});}}
if(this.peer.dataChannel.readyState==='closed'){if(this.peer.connected){this.peer.connected=false;this.peer.disconnected=true;this.emitter.emit("disconnect",{});}}}
async initializePeer(validationDoubleConnectionsTypes){if(await __WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].registerUniqueSocket(this.peer,__WEBPACK_IMPORTED_MODULE_4_node_lists_types_Connection_Type__["a"].CONNECTION_WEBRTC,this.peer.node.protocol.nodeType,this.peer.node.protocol.nodeConsensusType,validationDoubleConnectionsTypes)===false){return false;}
this.peer.node.protocol.signaling.server.initializeSignalingServerService();this.peer.on("disconnect",()=>{console.log("Peer disconnected",this.peer.node.sckAddress.getAddress());this.disconnected=true;this.connected=false;try{__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].disconnectSocket(this.peer);__WEBPACK_IMPORTED_MODULE_3_common_sockets_protocol_signaling_client_Node_Signaling_Client_Protocol__["a"].webPeerDisconnected(this);}catch(exception){}
delete this.peer;});}
enableEventsHandling(){this.peer.errorTrials=0;this.peer.on=(name,callback)=>{this.emitter.on(name,callback)};this.peer.once=(name,callback)=>{this.emitter.once(name,callback)};this.peer.off=(id)=>{this.emitter.off(id)};this.peer.send=(name,value)=>{let data={name:name,value:value};if(this.peer!==undefined&&this.peer.dataChannel.readyState!=="open"){console.error("Error sending data to webRTC because it is not open",data);this.peer.errorTrials++;if(this.peer.errorTrials>5){__WEBPACK_IMPORTED_MODULE_2_node_lists_Nodes_List__["a"].disconnectSocket(this.peer);console.warn("I deleted socket",this.peer.errorTrials);}
return null;}
data=JSON.stringify(data);const SIZE=16*1024-100;let chunks=data.length/SIZE;let id=Math.floor(Math.random()*10000000000);let i=0;while(i<chunks){if(this.peer===undefined)return;this.peer.dataChannel.send("chunk"+i+"/"+chunks+"@"+id+"#"+data.substr(i*SIZE,SIZE));i++;}};}
extractCharsUntilInvalid(str,pos,invalidChars){invalidChars=invalidChars||'';let subStr='';while(pos>-1&&pos<str.length&&invalidChars.indexOf(str[pos])===-1){subStr+=str[pos];pos++;}
if(subStr.length>0)
subStr=subStr.trim();return subStr;}
extractValueFromDescription(str,text){let pos=-1,ok=false;let data=[];while(ok===false||pos>-1){ok=true;pos=str.indexOf(text,pos+1);if(pos>-1){pos+=text.length;let subStr=this.extractCharsUntilInvalid(str,pos,'\n↵');if(subStr!=='')data.push(subStr);}}
return data;}
processDescription(description){let str='';if(description.sdp){str=description.sdp;if(typeof str==="object"&&!str.sdp)str=str.sdp;}
if(description.candidate)str=description.candidate;if(typeof str==="string"){let ip4=this.extractValueFromDescription(str,"IP4");let ip6=this.extractValueFromDescription(str,"IP6");let candidate=this.extractValueFromDescription(str,"candidate:");let address='';if(candidate&&candidate.length>0){str=candidate;let data=str;let done=false;for(let i=0;i<data.length&&!done;i++){let element=data[i].split(" ");if(Array.isArray(element)&&element.length>1){for(let j=0;j<element.length;j++)
if(element[j]==="udp"||element[j]==="tcp")
if(j+2<element.length&&this.checkValidRemoteAddress(element[j+2])){address=element[j+2];done=true;break;}}
else if(data[i]==="udp"||data[i]==="tcp")
if(i+2<data.length&&this.checkValidRemoteAddress(element[j+2])){address=data[i+2];break;}}}
if(address===''&&ip6.length>0)
address=ip6[ip6.length-1];if(address===''&&ip4.length>0)
address=ip4[ip4.length-1];if(address==="0.0.0.0")
address="127.0.0.1";console.log("address",address);return({address:address,port:undefined,})}}
checkValidRemoteAddress(ip){if(ip.indexOf(".")<=0)return false;if(ip.length<5)return false;if(ip.indexOf("192.168.")===0||ip.indexOf("10.")===0)return false;for(let i=17;i<=31;i++)
if(ip.indexOf("172."+i.toString()+".")===0)return false;return true;}
_findMessages(id){for(let i=0;i<this._messages.length;i++)
if(this._messages[i].id===id)
return this._messages[i];return null;}}
__webpack_exports__["a"]=(NodeWebPeerRTC);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_consts_global__=__webpack_require__(45);var __WEBPACK_IMPORTED_MODULE_1_is_array_buffer__=__webpack_require__(1022);class SocketProtocol{sendRequestSocket(request,requestData){try{return this.emit(request,requestData,);}catch(exception){console.error("Error sending request"+exception,exception);return null;}}
sendRequestWebPeer(request,requestData,){try{return this.send(request,requestData);}catch(exception){console.error("Error sending request"+exception,exception);return null;}}
sendRequestWaitOnce(request,requestData,answerSuffix,timeOutInterval=3000){if(answerSuffix!==undefined)answerSuffix=String(answerSuffix);return new Promise((resolve)=>{let requestAnswer=request;let timeoutId;if(typeof answerSuffix==='string'&&answerSuffix.length>0){requestAnswer+=(answerSuffix[1]!=='/'?'/':'')+answerSuffix;}
let requestFunction=(resData)=>{if(__WEBPACK_IMPORTED_MODULE_0_consts_global__["a"].TERMINATED)return;if(timeoutId!==undefined)clearTimeout(timeoutId);if(timeoutId===undefined)return false;SocketProtocol._processBufferArray(resData);resolve(resData);};let clearReturnFunction=()=>{if(this.removeListener!==undefined)
this.removeListener(requestAnswer,requestFunction);else
if(this.emitter!==undefined&&this.emitter.removeListener!==undefined)
this.emitter.removeListener(requestAnswer,requestFunction);resolve(null);};this.once(requestAnswer,requestFunction);if(timeOutInterval)
timeoutId=setTimeout(clearReturnFunction,timeOutInterval);let answer=this.node.sendRequest(request,requestData);if(!answer)
clearReturnFunction();});}
_isIterable(obj){if(obj===null||obj===undefined){return false;}
return typeof obj[Symbol.iterator]==='function';}
static _processBufferArray(data){if(typeof data==="object"&&data!==null)
for(let prop in data){if(data.hasOwnProperty(prop)){if(Object(__WEBPACK_IMPORTED_MODULE_1_is_array_buffer__["a"])(data[prop]))
data[prop]=Buffer.from(data[prop]);else
if(prop==="type"&&data.type==="Buffer"&&data.hasOwnProperty("data")){data=new Buffer(data);return data;}
else
data[prop]=SocketProtocol._processBufferArray(data[prop]);}}
return data;}}
__webpack_exports__["a"]=(SocketProtocol);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";/*!
* isArrayBuffer v1.0.1
* https://github.com/fengyuanchen/is-array-buffer
*
* Copyright (c) 2015-2018 Chen Fengyuan
* Released under the MIT license
*
* Date: 2018-04-01T07:19:08.136Z
*/var hasArrayBuffer=typeof ArrayBuffer==='function';var toString=Object.prototype.toString;function isArrayBuffer(value){return hasArrayBuffer&&(value instanceof ArrayBuffer||toString.call(value)==='[object ArrayBuffer]');}
__webpack_exports__["a"]=(isArrayBuffer);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_protocol_Interface_Blockchain_Protocol_Forks_Manager__=__webpack_require__(416);class PPoWBlockchainProtocolForksManager extends __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_protocol_Interface_Blockchain_Protocol_Forks_Manager__["a"]{async _getBestFork(){if(!this.blockchain.agent.light)
return __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_protocol_Interface_Blockchain_Protocol_Forks_Manager__["a"].prototype._getBestFork.call(this);let bestFork,fork;try{for(let i=0;i<this.blockchain.forksAdministrator.forks.length;i++)
if(this.blockchain.forksAdministrator.forks[i].forkReady){fork=this.blockchain.forksAdministrator.forks[i];if(fork.forkChainStartingPoint<=fork.forkStartingHeight&&(!bestFork||bestFork.forkChainLength<fork.forkChainLength)){bestFork=fork;}else if(bestFork&&bestFork.forkProofPi&&fork.forkProofPi){let compare=await this.blockchain.verifier.compareProofs(bestFork.forkProofPi,fork.forkProofPi);if(compare<0||(compare===0&&bestFork.forkChainLength<fork.forkChainLength)){bestFork=fork;}}else if((!bestFork||!bestFork.forkProofPi)&&fork.forkProofPi){bestFork=fork;}}}catch(exception){console.error("_getBestFork returned an exception",exception);throw{message:exception,fork:fork}}
return bestFork;}}
__webpack_exports__["a"]=(PPoWBlockchainProtocolForksManager);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_protocol_Interface_Blockchain_Protocol__=__webpack_require__(177);var __WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_2_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_3_common_blockchain_ppow_blockchain_protocol_PPoW_Blockchain_Protocol__=__webpack_require__(266);let inheritProtocol;if(__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].POPOW_PARAMS.ACTIVATED)inheritProtocol=__WEBPACK_IMPORTED_MODULE_3_common_blockchain_ppow_blockchain_protocol_PPoW_Blockchain_Protocol__["a"];else inheritProtocol=__WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_protocol_Interface_Blockchain_Protocol__["a"];class MiniBlockchainProtocol extends inheritProtocol{_validateBlockchainHeader(data){__WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_protocol_Interface_Blockchain_Protocol__["a"].prototype._validateBlockchainHeader.call(this,data);if(typeof data.header.data.hashAccountantTree==='string')
data.header.data.hashAccountantTree=__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].fromBase(data.header.data.hashAccountantTree);else
data.header.data.hashAccountantTree=new Buffer(data.header.data.hashAccountantTree);}
_initializeNewSocket(nodesListObject){let socket=nodesListObject.socket;inheritProtocol.prototype._initializeNewSocket.call(this,nodesListObject);}}
__webpack_exports__["a"]=(MiniBlockchainProtocol);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_blockchain_forks_Interface_Blockchain_Fork__=__webpack_require__(142);var __WEBPACK_IMPORTED_MODULE_1__prover_proofs_PPoW_Blockchain_Proof_Pi__=__webpack_require__(175);var __WEBPACK_IMPORTED_MODULE_2_common_blockchain_global_Blockchain_Genesis__=__webpack_require__(16);var __WEBPACK_IMPORTED_MODULE_3_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__=__webpack_require__(12);var __WEBPACK_IMPORTED_MODULE_5__helpers_PPoW_Helper__=__webpack_require__(253);var __WEBPACK_IMPORTED_MODULE_6_common_utils_bans_BansList__=__webpack_require__(120);var __WEBPACK_IMPORTED_MODULE_7_common_utils_GZip__=__webpack_require__(176);class PPoWBlockchainFork extends __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_blockchain_forks_Interface_Blockchain_Fork__["a"]{async initializeConstructor(blockchain,forkId,sockets,forkStartingHeight,forkChainStartingPoint,forkChainLength,forkChainWork,headers,forkReady){__WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_blockchain_forks_Interface_Blockchain_Fork__["a"].prototype.initializeConstructor.call(this,blockchain,forkId,sockets,forkStartingHeight,forkChainStartingPoint,forkChainLength,forkChainWork,headers,forkReady);this.forkProofPi=undefined;this._forkProofPiClone=undefined;}
async initializeFork(){if(this.blockchain.agent.light){if(!(await this._downloadProof()))
return false;}
return __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_blockchain_forks_Interface_Blockchain_Fork__["a"].prototype.initializeFork.call(this);}
async _downloadProof(){if(this.blockchain.agent.light){__WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__["a"].emit("agent/status",{message:"Downloading Proofs",blockHeight:this.forkStartingHeight});let socket,proofPiData;for(let i=0;i<this.sockets.length;i++){socket=this.sockets[i];proofPiData=await socket.node.sendRequestWaitOnce("get/nipopow-blockchain/headers/get-proofs/pi/hash",{},"answer",__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].SETTINGS.PARAMS.CONNECTIONS.TIMEOUT.WAIT_ASYNC_DISCOVERY_TIMEOUT);if(!proofPiData)
__WEBPACK_IMPORTED_MODULE_6_common_utils_bans_BansList__["a"].addBan(socket,30000,"proofPiFailed");else{this.sockets[0]=socket;break;}}
if(!proofPiData)
throw{message:"Proof Failed to answer"};if(typeof proofPiData.length!=="number"||proofPiData.length<=0)throw{message:"Proof Pi length is invalid"};if(this.blockchain.proofPi&&this.blockchain.proofPi.hash.equals(proofPiData.hash)){if(this.forkChainWork.greater(this.blockchain.blocks.chainWork)){this.forkProofPi=this.blockchain.proofPi;return true;}
else throw{message:"same proof, but your blockchain is smaller than mine"}}
if(this.blockchain.forksAdministrator.findForkByProofs(proofPiData.hash)!==null)
throw{message:"fork proof was already downloaded"};this.forkProofPi=new __WEBPACK_IMPORTED_MODULE_1__prover_proofs_PPoW_Blockchain_Proof_Pi__["a"](this.blockchain,[]);this.forkProofPi.hash=proofPiData.hash;let proofsList=[];let downloading=true;let pos=0;let buffers=[];let timeoutCount=100;while(downloading&&pos<timeoutCount){let answer=await socket.node.sendRequestWaitOnce("get/nipopow-blockchain/headers/get-proofs/pi-gzip",{starting:pos*__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].SETTINGS.PARAMS.MAX_SIZE.SPLIT_CHUNKS_BUFFER_SOCKETS_SIZE_BYTES,length:__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].SETTINGS.PARAMS.MAX_SIZE.SPLIT_CHUNKS_BUFFER_SOCKETS_SIZE_BYTES},"answer",10000);if(answer===null)throw{message:"get-proofGziped never received ",answer:answer};if(!answer.result)throw{message:"get-proofGziped return false ",answer:answer.message};if(!Buffer.isBuffer(answer.data))
throw{message:"accountantTree data is not a buffer"};if(answer.data.length===__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].SETTINGS.PARAMS.MAX_SIZE.SPLIT_CHUNKS_BUFFER_SOCKETS_SIZE_BYTES||(answer.data.length<=__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].SETTINGS.PARAMS.MAX_SIZE.SPLIT_CHUNKS_BUFFER_SOCKETS_SIZE_BYTES&&!answer.moreChunks))
{buffers.push(answer.data);if(!answer.moreChunks)
downloading=false;}
pos++;}
let buffer=Buffer.concat(buffers);try{buffer=await __WEBPACK_IMPORTED_MODULE_7_common_utils_GZip__["a"].unzip(buffer);}catch(exception){}
let offset=0;while(offset!==buffer.length){let result=this.forkProofPi.deserializeProof(buffer,offset);proofsList.push(result.data);offset=result.offset;}
if(proofsList.length===0)
throw{message:"Proofs was not downloaded successfully"};if(proofsList.length<150)
console.error("PROOFS LIST length is less than 150",proofsList.length);__WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__["a"].emit("agent/status",{message:"Proofs - Preparing",blockHeight:this.forkStartingHeight});if(this.blockchain===undefined){console.warn("Strange this.blockchain is empty");return;}
if(this.blockchain.proofPi!==undefined){this.forkProofPi.blocks=proofsList;let LCA=__WEBPACK_IMPORTED_MODULE_5__helpers_PPoW_Helper__["a"].LCA(this.blockchain.proofPi,this.forkProofPi);this._isProofBetter(LCA);}else{}
this.forkProofPi.blocks=[];await this.importForkProofPiHeaders(proofsList);if(!this.forkProofPi.validateProofLastElements(__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].POPOW_PARAMS.m))
throw{message:"Prof Pi is invalid"};__WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__["a"].emit("agent/status",{message:"Proofs Validated",blockHeight:this.forkStartingHeight});return true;}}
_validateFork(validateHashesAgain,firstValidation){if(!this.blockchain.agent.light)
return __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_blockchain_forks_Interface_Blockchain_Fork__["a"].prototype._validateFork.call(this,validateHashesAgain);if(!this.forkProofPi)throw{message:"Proof is invalid being null"};if(this.blockchain.proofPi){if(this._isProofBetter())
return true;}else return true;}
async importForkProofPiHeaders(proofsList){for(let i=0;i<proofsList.length;i++){let found=false,block=undefined;if(this.blockchain.proofPi){let searchBlock=this.blockchain.proofPi.findBlockByHeight(proofsList[i].height);if(searchBlock!==null&&searchBlock.hash.equals(proofsList[i].hash)){block=searchBlock;found=true;}}
if(!found){block=await this.blockchain.blockCreator.createEmptyBlock(proofsList[i].height);await block.importBlockFromHeader(proofsList[i]);}
block.blockValidation.getBlockCallBack=this.getForkProofsPiBlock.bind(this);this.forkProofPi.blocks.push(block);__WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__["a"].emit("agent/status",{message:"Validating Proof ",blockHeight:i});}
await this.forkProofPi.calculateProofHash();}
getForkProofsPiBlock(height){if(height<0)
return __WEBPACK_IMPORTED_MODULE_2_common_blockchain_global_Blockchain_Genesis__["a"];else{let block=this.forkProofPi.hasBlock(height-1);if(block!==null)
return block;return this.getForkBlock(height);}}
preForkClone(cloneBlocks=true){if(this.blockchain.agent.light)
this._forkProofPiClone=this.blockchain.proofPi;return __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_blockchain_forks_Interface_Blockchain_Fork__["a"].prototype.preForkClone.call(this,cloneBlocks);}
revertFork(){if(this.blockchain.agent.light)
this.blockchain.proofPi=this._forkProofPiClone;}
_isProofBetter(LCA){let comparison=this.blockchain.verifier.compareProofs(this.blockchain.proofPi,this.forkProofPi,LCA);if(comparison>0)
if(this.forkStartingHeight<this.blockchain.proofPi.lastProofBlock.height)
throw{message:"Proof is worst than mine"};if(comparison===0&&this.forkProofPi.lastProofBlock.height<=this.blockchain.proofPi.lastProofBlock.height){if(comparison===0&&this.forkChainLength<this.blockchain.blocks.length)throw{message:"Your proof is worst than mine"};if(comparison===0&&this.forkChainLength===this.blockchain.blocks.length){throw{message:"Your proof is worst than mine because you have the same block"};}}
return true;}
_shouldTakeNewProof(){if(!this.blockchain.proofPi)
return true;let comparison=this.blockchain.verifier.compareProofs(this.blockchain.proofPi,this.forkProofPi);if(comparison>0)
return false;else
if(comparison===0&&this.forkProofPi.lastProofBlock.height<=this.blockchain.proofPi.lastProofBlock.height)
return false;return true;}}
__webpack_exports__["a"]=(PPoWBlockchainFork);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_ppow_blockchain_agents_PPoW_Blockchain_Agent_Block_Headers__=__webpack_require__(1027);var __WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_agents_Interface_Blockchain_Agent_Block_Headers__=__webpack_require__(433);var __WEBPACK_IMPORTED_MODULE_2__protocol_Mini_Blockchain_Advanced_Protocol__=__webpack_require__(267);var __WEBPACK_IMPORTED_MODULE_3__protocol_Mini_Blockchain_Fork__=__webpack_require__(268);var __WEBPACK_IMPORTED_MODULE_4_consts_const_global__=__webpack_require__(2);let inheritAgentClass;if(__WEBPACK_IMPORTED_MODULE_4_consts_const_global__["a"].POPOW_PARAMS.ACTIVATED)inheritAgentClass=__WEBPACK_IMPORTED_MODULE_0_common_blockchain_ppow_blockchain_agents_PPoW_Blockchain_Agent_Block_Headers__["a"];else inheritAgentClass=__WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_agents_Interface_Blockchain_Agent_Block_Headers__["a"];class MiniBlockchainAgentBlockHeaders extends inheritAgentClass{newFork(){let fork=new __WEBPACK_IMPORTED_MODULE_3__protocol_Mini_Blockchain_Fork__["a"]();__WEBPACK_IMPORTED_MODULE_3__protocol_Mini_Blockchain_Fork__["a"].prototype.initializeConstructor.apply(fork,arguments);return fork;}
_newProtocol(){this.protocol=new __WEBPACK_IMPORTED_MODULE_2__protocol_Mini_Blockchain_Advanced_Protocol__["a"](this.blockchain,this);}}
__webpack_exports__["a"]=(MiniBlockchainAgentBlockHeaders);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_agents_Interface_Blockchain_Agent_Block_Headers__=__webpack_require__(433);var __WEBPACK_IMPORTED_MODULE_1__protocol_PPoW_Blockchain_Protocol__=__webpack_require__(266);class PPoWBlockchainAgentBlockHeaders extends __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_agents_Interface_Blockchain_Agent_Block_Headers__["a"]{_newProtocol(){this.protocol=new __WEBPACK_IMPORTED_MODULE_1__protocol_PPoW_Blockchain_Protocol__["a"](this.blockchain,this);}}
__webpack_exports__["a"]=(PPoWBlockchainAgentBlockHeaders);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_ppow_blockchain_agents_PPoW_Blockchain_Agent_Full_Node__=__webpack_require__(415);var __WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_agents_Interface_Blockchain_Agent_Full_Node__=__webpack_require__(255);var __WEBPACK_IMPORTED_MODULE_2_common_blockchain_mini_blockchain_protocol_light_Mini_Blockchain_Light_Protocol__=__webpack_require__(1029);var __WEBPACK_IMPORTED_MODULE_3__protocol_light_Mini_Blockchain_Light_Fork__=__webpack_require__(1032);var __WEBPACK_IMPORTED_MODULE_4_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_5_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_6_node_lists_types_Connection_Type__=__webpack_require__(47);var __WEBPACK_IMPORTED_MODULE_7_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_8_common_blockchain_interface_blockchain_agents_Agent_Status__=__webpack_require__(108);let inheritAgentClass;if(__WEBPACK_IMPORTED_MODULE_4_consts_const_global__["a"].POPOW_PARAMS.ACTIVATED)inheritAgentClass=__WEBPACK_IMPORTED_MODULE_0_common_blockchain_ppow_blockchain_agents_PPoW_Blockchain_Agent_Full_Node__["a"];else inheritAgentClass=__WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_agents_Interface_Blockchain_Agent_Full_Node__["a"];const WEBRTC_MINIMUM_LIGHT=6;const WEBRTC_MINIMUM_LIGHT_PROBABILITY=1/WEBRTC_MINIMUM_LIGHT;class MiniBlockchainAgentLightNode extends inheritAgentClass{constructor(blockchain){super(blockchain);this.light=true;}
newFork(){let fork=new __WEBPACK_IMPORTED_MODULE_3__protocol_light_Mini_Blockchain_Light_Fork__["a"]();__WEBPACK_IMPORTED_MODULE_3__protocol_light_Mini_Blockchain_Light_Fork__["a"].prototype.initializeConstructor.apply(fork,arguments);return fork;}
_newProtocol(){this.protocol=new __WEBPACK_IMPORTED_MODULE_2_common_blockchain_mini_blockchain_protocol_light_Mini_Blockchain_Light_Protocol__["a"](this.blockchain,this);}
initializeStartAgentOnce(){this._initializeProtocol();}
_initializeConsensus(newConsensus){inheritAgentClass.prototype._initializeConsensus.call(this,newConsensus);if(newConsensus){this._intervalWebRTC=setInterval(()=>{if(this.blockchain.proofPi)
if(new Date().getTime()-this.blockchain.proofPi.date.getTime()>=__WEBPACK_IMPORTED_MODULE_4_consts_const_global__["a"].BLOCKCHAIN.DIFFICULTY.TIME_PER_BLOCK*1000*2){if(Math.random()<2*WEBRTC_MINIMUM_LIGHT_PROBABILITY&&this.status===__WEBPACK_IMPORTED_MODULE_8_common_blockchain_interface_blockchain_agents_Agent_Status__["a"].AGENT_STATUS_SYNCHRONIZED_SLAVES){console.warn("mini blockchain agent light synchronization");__WEBPACK_IMPORTED_MODULE_7_main_blockchain_Blockchain__["a"].synchronizeBlockchain();}}},(__WEBPACK_IMPORTED_MODULE_4_consts_const_global__["a"].BLOCKCHAIN.DIFFICULTY.TIME_PER_BLOCK-10)*1000);this._lastBlocks=undefined;this._intervalBlocksSame=setInterval(()=>{if(this.blockchain.blocks.length<=10)return;if(this._lastBlocks!==undefined)
if(this._lastBlocks===this.blockchain.blocks.length)
location.reload();this._lastBlocks=this.blockchain.blocks.length;},__WEBPACK_IMPORTED_MODULE_4_consts_const_global__["a"].BLOCKCHAIN.DIFFICULTY.TIME_PER_BLOCK*10*1000)}else{clearInterval(this._intervalWebRTC);clearInterval(this._intervalBlocksSame);}}}
__webpack_exports__["a"]=(MiniBlockchainAgentLightNode);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__Mini_Blockchain_Advanced_Protocol__=__webpack_require__(267);var __WEBPACK_IMPORTED_MODULE_1__Mini_Blockchain_Light_Protocol_Fork_Solver__=__webpack_require__(1030);class MiniBlockchainLightProtocol extends __WEBPACK_IMPORTED_MODULE_0__Mini_Blockchain_Advanced_Protocol__["a"]{createForkSolver(){this.forkSolver=new __WEBPACK_IMPORTED_MODULE_1__Mini_Blockchain_Light_Protocol_Fork_Solver__["a"](this.blockchain,this);}
_initializeNewSocket(nodesListObject){let socket=nodesListObject.socket;__WEBPACK_IMPORTED_MODULE_0__Mini_Blockchain_Advanced_Protocol__["a"].prototype._initializeNewSocket.call(this,nodesListObject);}}
__webpack_exports__["a"]=(MiniBlockchainLightProtocol);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_protocol_Interface_Blockchain_Protocol_Fork_Solver__=__webpack_require__(257);var __WEBPACK_IMPORTED_MODULE_1_common_blockchain_ppow_blockchain_protocol_PPoW_Blockchain_Protocol_Fork_Solver__=__webpack_require__(1031);var __WEBPACK_IMPORTED_MODULE_2_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_3_common_events_Status_Events__=__webpack_require__(12);var __WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__=__webpack_require__(9);const BigInteger=__webpack_require__(36);let inheritForkSolver;if(__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].POPOW_PARAMS.ACTIVATED)inheritForkSolver=__WEBPACK_IMPORTED_MODULE_1_common_blockchain_ppow_blockchain_protocol_PPoW_Blockchain_Protocol_Fork_Solver__["a"];else inheritForkSolver=__WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_protocol_Interface_Blockchain_Protocol_Fork_Solver__["a"];class MiniBlockchainLightProtocolForkSolver extends inheritForkSolver{async _getLastBlocks(socket,heightRequired){let hash=await socket.node.sendRequestWaitOnce("head/chainHash",heightRequired,heightRequired,__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].SETTINGS.PARAMS.CONNECTIONS.TIMEOUT.WAIT_ASYNC_DISCOVERY_TIMEOUT);if(!hash)
throw{message:"LightProtocolForkSolver _calculateForkBinarySearch headers-info dropped ",heightRequired};return{position:heightRequired,header:hash.hash};}
async _calculateForkBinarySearch(socket,forkChainStartingPoint,forkChainLength,currentBlockchainLength){console.log("newChainStartingPoint",forkChainStartingPoint,"forkChainLength",forkChainLength,"currentBlockchainLength",currentBlockchainLength)
if(forkChainStartingPoint>currentBlockchainLength-1){return await this._getLastBlocks(socket,forkChainLength-__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].BLOCKCHAIN.LIGHT.VALIDATE_LAST_BLOCKS-1);}else{let result=await inheritForkSolver.prototype._calculateForkBinarySearch.call(this,socket,forkChainStartingPoint,forkChainLength,currentBlockchainLength);console.warn("_calculateForkBinarySearch",result);if(this.blockchain.agent.light){if(result.position===-1)
return await this._getLastBlocks(socket,forkChainStartingPoint);}
return result;}}
async _calculateBlockRequestsForLight(socket,fork){let forkPosition=fork.forkStartingHeight;let forkAdditionalBlocksBlocksRequired=[];for(let i=forkPosition-(forkPosition+1)%__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].BLOCKCHAIN.DIFFICULTY.NO_BLOCKS-__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].BLOCKCHAIN.DIFFICULTY.NO_BLOCKS;i<forkPosition;i++)
forkAdditionalBlocksBlocksRequired.push(i);let blockFirstPosition=forkAdditionalBlocksBlocksRequired[0];let answer=await socket.node.sendRequestWaitOnce("get/blockchain/light/get-light-settings",{height:blockFirstPosition+1},blockFirstPosition+1,__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].SETTINGS.PARAMS.CONNECTIONS.TIMEOUT.WAIT_ASYNC_DISCOVERY_TIMEOUT);if(!answer)throw{message:"get-accountant-tree[0] never received ",height:(blockFirstPosition+1)};if(!answer.result)throw{message:"get-accountant-tree[0] return false ",answer:answer.message};if(!answer.result)throw{message:"get-light-settings return false ",answer:answer.message};if(!answer.difficultyTarget)throw{message:"get-light-settings difficultyTarget is null"};return{difficultyAdditionalBlocks:forkAdditionalBlocksBlocksRequired,difficultyAdditionalBlockFirstDifficulty:answer.difficultyTarget,difficultyCalculationStarts:forkPosition-(forkPosition+1)%__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].BLOCKCHAIN.DIFFICULTY.NO_BLOCKS,}}
async _solveFork(fork){let socket=fork.sockets[Math.floor(Math.random()*fork.sockets.length)];console.warn(" fork.forkChainStartingPoint "+fork.forkChainStartingPoint+"  "+"fork.forkStartingHeight "+fork.forkStartingHeight+" length "+fork.forkChainLength);if(fork.forkChainStartingPoint===fork.forkStartingHeight){fork.forkDifficultyCalculation=await this._calculateBlockRequestsForLight(socket,fork);fork.forkStartingHeight=fork.forkDifficultyCalculation.difficultyAdditionalBlocks[0];fork.forkChainStartingPoint=fork.forkDifficultyCalculation.difficultyAdditionalBlocks[0];__WEBPACK_IMPORTED_MODULE_3_common_events_Status_Events__["a"].emit("agent/status",{message:"Downloading Accountant Tree",blockHeight:fork.forkStartingHeight});let answer=await this.protocol.getAccountantTree(socket,fork.forkStartingHeight);fork.forkPrevAccountantTree=answer.buffer;fork.forkPrevAccountantTreeGzipped=answer.gzipped;answer=await socket.node.sendRequestWaitOnce("get/blockchain/light/get-light-settings",{height:fork.forkStartingHeight},fork.forkStartingHeight,__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].SETTINGS.PARAMS.CONNECTIONS.TIMEOUT.WAIT_ASYNC_DISCOVERY_TIMEOUT);if(answer===null)throw{message:"get-light-settings never received ",forkChainStartingPoint:fork.forkChainStartingPoint};if(answer.result===false)throw{message:"get-light-settings return false ",answer:answer.message};if(answer.difficultyTarget===null)throw{message:"get-light-settings difficultyTarget is null"};if(answer.timeStamp===null)throw{message:"get-light-settings timeStamp is null"};if(answer.hashPrev===null)throw{message:"get-light-settings hashPrev is null"};console.log("answer.difficultyTarget",fork.forkStartingHeight,answer.difficultyTarget.toString("hex"));fork.forkPrevDifficultyTarget=answer.difficultyTarget;fork.forkPrevTimeStamp=answer.timeStamp;fork.forkPrevHash=answer.hash;for(let i=0;i<fork.forkDifficultyCalculation.difficultyAdditionalBlocks.length;i++){let blockRequested=fork.forkDifficultyCalculation.difficultyAdditionalBlocks[i];if(blockRequested%2===0)
__WEBPACK_IMPORTED_MODULE_3_common_events_Status_Events__["a"].emit("agent/status",{message:"Synchronizing - Downloading First Blocks",blockHeight:blockRequested,blockHeightMax:fork.forkChainLength});answer=await socket.node.sendRequestWaitOnce("blockchain/blocks/request-block-by-height",{height:blockRequested,onlyHeader:false},blockRequested,__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].SETTINGS.PARAMS.CONNECTIONS.TIMEOUT.WAIT_ASYNC_DISCOVERY_TIMEOUT);if(!answer)
throw{message:"block never received ",answer:blockRequested};if(!answer.result||!answer.block||!Buffer.isBuffer(answer.block))
throw{message:"block for difficulty never received ",blockRequested:blockRequested};let blockValidation=fork._createBlockValidation_ForkValidation(blockRequested,fork.forkBlocks.length-1);let block=await this._deserializeForkBlock(fork,answer.block,blockRequested,blockValidation);if(blockRequested<fork.forkDifficultyCalculation.difficultyCalculationStarts)
block.difficultyTarget=fork.forkDifficultyCalculation.difficultyAdditionalBlockFirstDifficulty;try{let result=await fork.includeForkBlock(block);if(blockRequested===fork.forkDifficultyCalculation.difficultyAdditionalBlocks[0])
block.difficultyTarget=fork.forkDifficultyCalculation.difficultyAdditionalBlockFirstDifficulty;if(!result)
throw{message:"The block was not includedForkBlock successfully",block:blockRequested}}catch(exception){console.error("Exception including Light Block",exception);return false;}}}else{fork.forkPrevAccountantTree=null;fork.forkPrevDifficultyTarget=null;fork.forkPrevTimeStamp=null;fork.forkPrevHash=null;}
return inheritForkSolver.prototype._solveFork.call(this,fork);}
async optionalProcess(socket,binarySearchResult,currentBlockchainLength,forkChainLength,forkChainStartingPoint){if(binarySearchResult.position===-1&&currentBlockchainLength<forkChainLength){let hash=await socket.node.sendRequestWaitOnce("head/chainHash",forkChainStartingPoint,forkChainStartingPoint,__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].SETTINGS.PARAMS.CONNECTIONS.TIMEOUT.WAIT_ASYNC_DISCOVERY_TIMEOUT);if(!hash)throw{message:"connection dropped headers-info optionalProcess"};hash=hash.hash;if(!hash)throw{message:"connection dropped headers-info optionalProcess"};binarySearchResult.position={position:forkChainStartingPoint,header:hash.hash};}
await inheritForkSolver.prototype.optionalProcess.call(this,socket,binarySearchResult,currentBlockchainLength,forkChainLength,forkChainStartingPoint)}}
__webpack_exports__["a"]=(MiniBlockchainLightProtocolForkSolver);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_protocol_Interface_Blockchain_Protocol_Fork_Solver__=__webpack_require__(257);var __WEBPACK_IMPORTED_MODULE_1_common_events_Status_Events__=__webpack_require__(12);var __WEBPACK_IMPORTED_MODULE_2_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_3__blockchain_prover_proofs_PPoW_Blockchain_Proof_Pi__=__webpack_require__(175);class PPoWBlockchainProtocolForkSolver extends __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_protocol_Interface_Blockchain_Protocol_Fork_Solver__["a"]{}
__webpack_exports__["a"]=(PPoWBlockchainProtocolForkSolver);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1__Mini_Blockchain_Fork__=__webpack_require__(268);var __WEBPACK_IMPORTED_MODULE_2_common_blockchain_interface_blockchain_blocks_validation_Interface_Blockchain_Block_Validation__=__webpack_require__(140);var __WEBPACK_IMPORTED_MODULE_3_common_blockchain_global_Blockchain_Mining_Reward__=__webpack_require__(56);const BigInteger=__webpack_require__(36);class MiniBlockchainLightFork extends __WEBPACK_IMPORTED_MODULE_1__Mini_Blockchain_Fork__["a"]{constructor(blockchain,forkId,sockets,forkStartingHeight,forkChainStartingPoint,forkChainLength,header){super(blockchain,forkId,sockets,forkStartingHeight,forkChainStartingPoint,forkChainLength,header)
this.forkPrevAccountantTree=null;this.forkPrevAccountantTreeGzipped=undefined;this.forkPrevDifficultyTarget=null;this.forkPrevTimeStamp=null;this.forkPrevHash=null;this.forkPrevChainWork=null;this.forkPrevChainWorkPrevHash=null;this.forkDifficultyCalculation={difficultyAdditionalBlocks:[],difficultyCalculationStarts:0,};this._blocksStartingPointClone=null;this._lightChainWorkClone=new BigInteger(0);this._lightPrevDifficultyTargetClone=null;this._lightPrevTimeStampClone=null;this._lightPrevHashPrevClone=null;this._lightAccountantTreeSerializationsHeightClone=undefined;this._lightAccountantTreeSerializationsHeightCloneGzipped=undefined;}
getForkDifficultyTarget(height){let forkHeight=height-this.forkStartingHeight;if(this.forkChainStartingPoint===this.forkStartingHeight&&height!==0&&height===this.forkStartingHeight){if(this.forkPrevDifficultyTarget===null||this.forkPrevDifficultyTarget===undefined)throw{message:"forkPrevDifficultyTarget was not specified"};return this.forkPrevDifficultyTarget;}
return __WEBPACK_IMPORTED_MODULE_1__Mini_Blockchain_Fork__["a"].prototype.getForkDifficultyTarget.call(this,height);}
getForkTimeStamp(height){let forkHeight=height-this.forkStartingHeight;if(this.forkChainStartingPoint===this.forkStartingHeight&&height!==0&&height===this.forkStartingHeight){if(!this.forkPrevTimeStamp)
throw{message:"forkPrevTimeStamp was not specified"};return this.forkPrevTimeStamp;}
return __WEBPACK_IMPORTED_MODULE_1__Mini_Blockchain_Fork__["a"].prototype.getForkTimeStamp.call(this,height);}
getForkHash(height){let forkHeight=height-this.forkStartingHeight;if(this.forkChainStartingPoint===this.forkStartingHeight&&height!==0&&height===this.forkStartingHeight){if(!this.forkPrevHash)
throw{message:"forkPrevHash was not specified"};return this.forkPrevHash;}
return __WEBPACK_IMPORTED_MODULE_1__Mini_Blockchain_Fork__["a"].prototype.getForkHash.call(this,height);}
getForkChainHash(height){let forkHeight=height-this.forkStartingHeight;if(this.forkChainStartingPoint===this.forkStartingHeight&&height!==0&&height===this.forkStartingHeight){if(!this.forkPrevChainWorkPrevHash)
throw{message:"forkChainHash was not specified"};return this.forkPrevChainWorkPrevHash;}
return __WEBPACK_IMPORTED_MODULE_1__Mini_Blockchain_Fork__["a"].prototype.getForkChainHash.call(this,height);}
_createBlockValidation_ForkValidation(height,forkHeight){let validationType={"skip-accountant-tree-validation":true,"skip-validation-transactions-from-values":true,};if(height<this.forkDifficultyCalculation.difficultyCalculationStarts)
validationType["skip-difficulty-recalculation"]=true;if(this.forkChainStartingPoint===this.forkStartingHeight&&forkHeight<__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.TIMESTAMP.VALIDATION_NO_BLOCKS)
validationType["skip-validation-timestamp"]=true;if(this.forkProofPi!==undefined&&height<(this.forkChainLength-__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].POPOW_PARAMS.m))
validationType["skip-validation-interlinks"]=true;return new __WEBPACK_IMPORTED_MODULE_2_common_blockchain_interface_blockchain_blocks_validation_Interface_Blockchain_Block_Validation__["a"](this.forkProofPi!==undefined?this.getForkProofsPiBlock.bind(this):this.getForkBlock.bind(this),this.getForkDifficultyTarget.bind(this),this.getForkTimeStamp.bind(this),this.getForkHash.bind(this),this.getForkChainHash.bind(this),validationType);}
_createBlockValidation_BlockchainValidation(height,forkHeight){let validationType={};if(height<this.forkDifficultyCalculation.difficultyCalculationStarts)
validationType["skip-difficulty-recalculation"]=true;if(this.forkChainStartingPoint===this.forkStartingHeight&&forkHeight<__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].BLOCKCHAIN.TIMESTAMP.VALIDATION_NO_BLOCKS)
validationType["skip-validation-timestamp"]=true;if(this.forkProofPi!==undefined&&height<(this.forkChainLength-__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].POPOW_PARAMS.m))
validationType["skip-validation-interlinks"]=true;if(forkHeight===0)
validationType["skip-interlinks-update"]=true;return new __WEBPACK_IMPORTED_MODULE_2_common_blockchain_interface_blockchain_blocks_validation_Interface_Blockchain_Block_Validation__["a"](this.forkProofPi!==undefined?this.getForkProofsPiBlock.bind(this):this.getForkBlock.bind(this),this.getForkDifficultyTarget.bind(this),this.getForkTimeStamp.bind(this),this.getForkHash.bind(this),this.getForkChainHash.bind(this),validationType);}
preForkClone(){if(this.forkChainStartingPoint===this.forkStartingHeight&&this.forkPrevAccountantTree!==null&&Buffer.isBuffer(this.forkPrevAccountantTree)){let diffIndex=this.forkDifficultyCalculation.difficultyAdditionalBlocks[0];this._lightChainWorkClone=this.blockchain.blocks.chainWork;this._blocksStartingPointClone=this.blockchain.blocks.blocksStartingPoint;this._lightAccountantTreeSerializationsHeightClone=this.blockchain.lightAccountantTreeSerializations[diffIndex]!==undefined;this._lightAccountantTreeSerializationsHeightCloneGzipped=this.blockchain.lightAccountantTreeSerializationsGzipped[diffIndex]!==undefined?this.blockchain.lightAccountantTreeSerializationsGzipped[diffIndex]:0;this._lightPrevDifficultyTargetClone=new Buffer(this.blockchain.lightPrevDifficultyTargets[diffIndex]!==undefined?this.blockchain.lightPrevDifficultyTargets[diffIndex]:0);this._lightPrevTimeStampClone=this.blockchain.lightPrevTimeStamps[diffIndex];this._lightPrevHashPrevClone=new Buffer(this.blockchain.lightPrevHashPrevs[diffIndex]!==undefined?this.blockchain.lightPrevHashPrevs[diffIndex]:0);return __WEBPACK_IMPORTED_MODULE_1__Mini_Blockchain_Fork__["a"].prototype.preForkClone.call(this,true,true);}else
return __WEBPACK_IMPORTED_MODULE_1__Mini_Blockchain_Fork__["a"].prototype.preForkClone.call(this,true,false);}
async preFork(revertActions){if(this.blockchain.agent.light&&this._shouldTakeNewProof()){this.blockchain.proofPi=this.forkProofPi;}
if(this.forkChainStartingPoint===this.forkStartingHeight&&this.forkPrevAccountantTree!==null&&Buffer.isBuffer(this.forkPrevAccountantTree)){let diffIndex=this.forkDifficultyCalculation.difficultyAdditionalBlocks[0];this.blockchain.accountantTree.deserializeMiniAccountant(this.forkPrevAccountantTree,);let forkSum=this.blockchain.accountantTree.calculateNodeCoins();if(forkSum!==__WEBPACK_IMPORTED_MODULE_3_common_blockchain_global_Blockchain_Mining_Reward__["a"].getSumReward(diffIndex-1)||forkSum<=0)
throw{message:"Accountant Tree sum is smaller than previous accountant Tree!!! Impossible",forkSum:forkSum,rewardShould:__WEBPACK_IMPORTED_MODULE_3_common_blockchain_global_Blockchain_Mining_Reward__["a"].getSumReward(diffIndex-1)};this.blockchain.blocks.blocksStartingPoint=diffIndex;this.forkPrevChainWork=this.forkChainWork;for(let i=0;i<this.forkBlocks.length;i++)
this.forkPrevChainWork=this.forkPrevChainWork.minus(this.forkBlocks[i].workDone);this.blockchain.blocks.chainWork=this.forkPrevChainWork;this.blockchain.lightPrevDifficultyTargets[diffIndex]=this.forkPrevDifficultyTarget;this.blockchain.lightPrevTimeStamps[diffIndex]=this.forkPrevTimeStamp;this.blockchain.lightPrevHashPrevs[diffIndex]=this.forkPrevHash;this.blockchain.lightAccountantTreeSerializations[diffIndex]=this.forkPrevAccountantTree;this.blockchain.lightAccountantTreeSerializationsGzipped[diffIndex]=this.forkPrevAccountantTreeGzipped;}else
return __WEBPACK_IMPORTED_MODULE_1__Mini_Blockchain_Fork__["a"].prototype.preFork.call(this,revertActions);}
async revertFork(){if(this.forkPrevAccountantTree&&Buffer.isBuffer(this.forkPrevAccountantTree)){this.blockchain.blocks.blocksStartingPoint=this._blocksStartingPointClone;let diffIndex=this.forkDifficultyCalculation.difficultyAdditionalBlocks[0];this.blockchain.blocks.chainWork=this._lightChainWorkClone;this.blockchain.lightPrevDifficultyTargets[diffIndex]=this._lightPrevDifficultyTargetClone;this.blockchain.lightPrevTimeStamps[diffIndex]=this._lightPrevTimeStampClone;this.blockchain.lightPrevHashPrevs[diffIndex]=this._lightPrevHashPrevClone;this.blockchain.lightAccountantTreeSerializations[diffIndex]=this._lightAccountantTreeSerializationsHeightClone;this.blockchain.lightAccountantTreeSerializationsGzipped[diffIndex]=this._lightAccountantTreeSerializationsHeightCloneGzipped;}
return __WEBPACK_IMPORTED_MODULE_1__Mini_Blockchain_Fork__["a"].prototype.revertFork.call(this);}
async saveIncludeBlock(index,revertActions,saveBlock=false){let answer=await __WEBPACK_IMPORTED_MODULE_1__Mini_Blockchain_Fork__["a"].prototype.saveIncludeBlock.call(this,index,revertActions,saveBlock);if(answer){if(this.forkChainStartingPoint===this.forkStartingHeight&&index===0)
this.forkBlocks[index].difficultyTarget=this.forkDifficultyCalculation.difficultyAdditionalBlockFirstDifficulty}
return answer;}
_validateChainWork(){if(this.blockchain.blocks.chainWork.greater(0))
__WEBPACK_IMPORTED_MODULE_1__Mini_Blockchain_Fork__["a"].prototype._validateChainWork.call(this);if(this.forkChainStartingPoint===this.forkStartingHeight&&this.forkPrevAccountantTree!==null&&Buffer.isBuffer(this.forkPrevAccountantTree)){let chainWork=this.forkPrevChainWork;let forkWork=new BigInteger(0);for(let i=0;i<this.forkBlocks.length;i++)
forkWork=forkWork.plus(this.forkBlocks[i].workDone);}}}
__webpack_exports__["a"]=(MiniBlockchainLightFork);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_mini_blockchain_balances_Mini_Blockchain_Balances__=__webpack_require__(1034);class MainBlockchainBalances extends __WEBPACK_IMPORTED_MODULE_0_common_blockchain_mini_blockchain_balances_Mini_Blockchain_Balances__["a"]{}
__webpack_exports__["a"]=(MainBlockchainBalances);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__=__webpack_require__(17);class MiniBlockchainBalances{constructor(blockchain){this._blockchain=blockchain;}
listBalances(address){if(address===''||address===undefined||address===null)return null;try{return this._blockchain.accountantTree.listBalances(address);}catch(exception){return null;}}
getNonce(address){if(address===''||address===undefined||address===null)return null;try{return this._blockchain.accountantTree.getAccountNonce(address);}catch(exception){return null;}}
subscribeBalancesChanges(addressWIF,callback){if(addressWIF===''||addressWIF===undefined||addressWIF===null||addressWIF==='')return{result:false,message:"address is invalid"};if(!Buffer.isBuffer(addressWIF)&&typeof addressWIF==="string")
addressWIF=__WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].fromBase(addressWIF);let address=__WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].getUnencodedAddressFromWIF(addressWIF);if(address===null)return{result:false,message:"invalid address"};let unsubscribe=this._blockchain.accountantTree.emitter.on("balances/changes/"+__WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__["a"].toBase(address),callback);return{result:true,subscription:unsubscribe,balances:this.listBalances(addressWIF),nonce:this.getNonce(addressWIF),}}}
__webpack_exports__["a"]=(MiniBlockchainBalances);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1__cookies_Cookies__=__webpack_require__(1036);var __WEBPACK_IMPORTED_MODULE_2__Detect_Multiple_Windows__=__webpack_require__(1037);var __WEBPACK_IMPORTED_MODULE_3_common_satoshmindb_Interface_SatoshminDB__=__webpack_require__(69);var __WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__=__webpack_require__(12);var __WEBPACK_IMPORTED_MODULE_5_node_menu_Advanced_Messages__=__webpack_require__(86);let PounchDB;if(true)PounchDB=__webpack_require__(344).default;else PounchDB=require('pouchdb-node');const DATABASES=["validateDB","defaultDB",__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].DATABASE_NAMES.BLOCKCHAIN_DATABASE.FOLDER];const TIME_OUT=10000;const TIME_OUT_DESTROY=1000;class ValidationsUtils{constructor(){}
async validate(){this._validateIndexedDB();this._detectIncognito();}
_pouchDestroy(dbName){return new Promise(async(resolve)=>{let poucbdb=new PounchDB(dbName);let result=false;let timeout=setTimeout(()=>{poucbdb.close();resolve(false);},TIME_OUT_DESTROY);try{let answer=await poucbdb.destroy();result=true;}catch(exception){result=false;}
clearTimeout(timeout);poucbdb.close();resolve(true);})}
async clearIndexedDB(){if(true)return true;if(!confirm("Are you WANT TO DELETE YOUR WALLET?"))
return false;let error=false;for(let i=0;i<DATABASES.length;i++){try{await this._pouchDestroy(DATABASES[i])}catch(exception){error=true;}}
if(true){for(let i=0;i<DATABASES.length;i++){window.indexedDB.deleteDatabase('_pouch_'+DATABASES[i]);window.localStorage.removeItem("_pouch_"+DATABASES[i]);}
window.localStorage.removeItem("_pouch_check_localstorage");window.localStorage.clear();__WEBPACK_IMPORTED_MODULE_5_node_menu_Advanced_Messages__["a"].alert("am sters tot");}
return error;}
_validateIndexedDB(){if(typeof window==='undefined')return true;let indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(indexedDB){__WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__["a"].emit("validation/status",{result:true,message:"IndexedDB is available"})
return true;}
else{__WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__["a"].emit("validation/status",{result:false,message:"IndexedDB is not supported"})
return false;}}
async _validatePouchDB(initialTest=true){try{if(initialTest){for(let i=0;i<DATABASES.length;i++){if(!(await this.testPounchDB(DATABASES[i],TIME_OUT)))throw{message:"it didn't work"};__WEBPACK_IMPORTED_MODULE_5_node_menu_Advanced_Messages__["a"].alert(DATABASES[i]+"   "+i+"  merge 1")
if(!(await this.testPounchDB2(DATABASES[i],TIME_OUT)))throw{message:"it didn't work"};__WEBPACK_IMPORTED_MODULE_5_node_menu_Advanced_Messages__["a"].alert(DATABASES[i]+"   "+i+"  merge 2")
if(!(await this.testPounchDB3(DATABASES[i],TIME_OUT)))throw{message:"it didn't work"};__WEBPACK_IMPORTED_MODULE_5_node_menu_Advanced_Messages__["a"].alert(DATABASES[i]+"   "+i+"  merge 3")}}}catch(exception){if(initialTest){await this.clearIndexedDB();await this._validatePouchDB(false);}}}
testPounchDB(dbName,timeoutTime=TIME_OUT){return new Promise(async(resolve)=>{let timeout;let db=new PounchDB(dbName);let result=false;try{let number=Math.floor(Math.random()*100000000).toString();timeout=setTimeout(()=>{__WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__["a"].emit("validation/status",{result:true,message:"IndexedDB - PouchDB doesn't work",dbName:dbName+" - PouchDB 1 directly TIMEOUT"});resolve(false);},timeoutTime);await db.put({_id:"validate_test"+number,number:number});let data=await db.get("validate_test"+number);let number2=data.number;db.remove("validate_test"+number);if(number!==number2||number===null||number2===null)
throw(number===undefined?'undefined':number.toString())+" !== "+(number2===undefined?'undefined':number2.toString());__WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__["a"].emit("validation/status",{result:true,message:"IndexedDB - PouchDB works",dbName:dbName});result=true;}catch(exception){console.error("PouchDB doesn't work well",exception,"data",data);__WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__["a"].emit("validation/status",{result:true,message:"IndexedDB - PouchDB doesn't work",dbName:dbName+" - PouchDB 1 directly "+JSON.stringify(data)});}
clearTimeout(timeout);db.close();resolve(result);})}
async testPounchDB2(dbName,timeoutTime=TIME_OUT){let db=new __WEBPACK_IMPORTED_MODULE_3_common_satoshmindb_Interface_SatoshminDB__["a"](dbName);let result=false;try{let number=Math.floor(Math.random()*10000000).toString();await db.save("validate_test",number,timeoutTime);let number2=await db.get("validate_test",timeoutTime);if(number!==number2||number===null||number2===null)
throw(number===null?'null':number.toString())+" !== "+(number2===null?'null':number2.toString());__WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__["a"].emit("validation/status",{result:true,message:"IndexedDB - PouchDB works",dbName:dbName});result=true;}catch(exception){console.error("PouchDB doesn't work well 2",exception);__WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__["a"].emit("validation/status",{result:true,message:"IndexedDB - PouchDB doesn't work",dbName:dbName+" 2 "});}
db.close();return result;}
async testPounchDB3(dbName,timeoutTime){let db=new __WEBPACK_IMPORTED_MODULE_3_common_satoshmindb_Interface_SatoshminDB__["a"](dbName);let result=false;try{let number=Math.floor(Math.random()*10000000).toString();await db.save("validate_test"+number,number,timeoutTime);let number2=await db.get("validate_test"+number,timeoutTime);if(number!==number2||number===null||number2===null)
throw(number===null?'null':number.toString())+" !== "+(number2===null?'null':number2.toString());__WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__["a"].emit("validation/status",{result:true,message:"IndexedDB - PouchDB 3 works",dbName:dbName});result=true;}catch(exception){console.error("PouchDB doesn't work well 3",exception);__WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__["a"].emit("validation/status",{result:true,message:"IndexedDB - PouchDB doesn't work",dbName:dbName+" 3 "});}
db.close();return result;}
_detectIncognito(){if(false)return true;let fs=window.RequestFileSystem||window.webkitRequestFileSystem;if(!fs){console.error("_detectIncognito didn't work .. check failed?");}else{fs(window.TEMPORARY,100,()=>{__WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__["a"].emit("validation/status",{result:true,message:"Not incognito mode"})},()=>{__WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__["a"].emit("validation/status",{result:false,message:"Incognito mode"})});}}
waitSingleTab(waitCallback){if(false)return true;return __WEBPACK_IMPORTED_MODULE_2__Detect_Multiple_Windows__["a"].waitForSingleTabNow(waitCallback);}}
__webpack_exports__["a"]=(ValidationsUtils);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";function setCookie(cname,cvalue,seconds){let d=new Date();d.setTime(d.getTime()+(seconds*1000));let expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+";"+expires+";path=/";}
function getCookie(cname){let name=cname+"=";let decodedCookie=decodeURIComponent(document.cookie);let ca=decodedCookie.split(';');for(let i=0;i<ca.length;i++){let c=ca[i];while(c.charAt(0)===' '){c=c.substring(1);}
if(c.indexOf(name)===0){return c.substring(name.length,c.length);}}
return "";}}),(function(module,__webpack_exports__,__webpack_require__){"use strict";class DetectMultipleWindows{constructor(){if(false)
return;window.addEventListener('storage',(data)=>{if(data.key===this.HI1)
this._hi2(data.newValue);});window.addEventListener('unload',()=>{this._hi3();});}
waitForSingleTabNow(waitCallback,){return new Promise((resolver)=>{setTimeout(async()=>{await this._waitForSingleTab(waitCallback,resolver)},100);});}
async _waitForSingleTab(waitCallback,promiseResolver){let windowSingle=await this.isWindowSingle();if(windowSingle)
promiseResolver(true);else{if(typeof waitCallback==="function")
waitCallback();const listener=(data)=>{if(data.key===this.HI3){window.removeEventListener('storage',listener);this._waitForSingleTab(undefined,promiseResolver);}};window.addEventListener('storage',listener);}}
isWindowSingle(){return new Promise((resolve)=>{const nonce=Math.round(Math.random()*Number.MAX_SAFE_INTEGER);const timeout=setTimeout(()=>{window.removeEventListener('storage',listener);resolve(true);},500);const listener=(data)=>{if(data.key===this.HI2&&data.newValue==nonce){clearTimeout(timeout);window.removeEventListener('storage',listener);resolve(false);}};window.addEventListener('storage',listener);this._hi1(nonce);});}
get HI1(){return 'Windows.HI1';}
get HI2(){return 'Windows.HI2';}
get HI3(){return 'Windows.HI3';}
_hi1(nonce){localStorage.setItem(this.HI1,nonce);}
_hi2(nonce){localStorage.setItem(this.HI2,nonce);}
_hi3(){localStorage.setItem(this.HI3,Date.now());}}
__webpack_exports__["a"]=(new DetectMultipleWindows());}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__Pool_Settings__=__webpack_require__(1039);var __WEBPACK_IMPORTED_MODULE_1_common_mining_pools_pool_pool_management_pool_data_Pool_Data__=__webpack_require__(1042);var __WEBPACK_IMPORTED_MODULE_2_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_3__pool_work_Pool_Work_Management__=__webpack_require__(1052);var __WEBPACK_IMPORTED_MODULE_4__protocol_Pool_Protocol__=__webpack_require__(1056);var __WEBPACK_IMPORTED_MODULE_5__pool_statistics_Pool_Statistics__=__webpack_require__(1059);var __WEBPACK_IMPORTED_MODULE_6_common_events_Status_Events__=__webpack_require__(12);var __WEBPACK_IMPORTED_MODULE_7_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_8__pool_work_rewards_Pool_Rewards_Management__=__webpack_require__(1060);var __WEBPACK_IMPORTED_MODULE_9__pool_work_rewards_Payout_Pool_Process_Remaining_Payment__=__webpack_require__(1062);class PoolManagement{constructor(blockchain,wallet,databaseName){this.blockchain=blockchain;this.poolSettings=new __WEBPACK_IMPORTED_MODULE_0__Pool_Settings__["a"](wallet,this);this.poolWorkManagement=new __WEBPACK_IMPORTED_MODULE_3__pool_work_Pool_Work_Management__["a"](this,blockchain);this.poolProtocol=new __WEBPACK_IMPORTED_MODULE_4__protocol_Pool_Protocol__["a"](this);this.poolData=new __WEBPACK_IMPORTED_MODULE_1_common_mining_pools_pool_pool_management_pool_data_Pool_Data__["a"](this,databaseName);this.poolStatistics=new __WEBPACK_IMPORTED_MODULE_5__pool_statistics_Pool_Statistics__["a"](this);this.poolRewardsManagement=new __WEBPACK_IMPORTED_MODULE_8__pool_work_rewards_Pool_Rewards_Management__["a"](this,this.poolData,blockchain);this.poolRemainingRewards=new __WEBPACK_IMPORTED_MODULE_9__pool_work_rewards_Payout_Pool_Process_Remaining_Payment__["a"](this,this.poolData,blockchain);this._poolInitialized=false;this._poolOpened=false;this._poolStarted=false;}
async initializePoolManagement(poolFee){let answer;try{answer=await this.poolSettings.initializePoolSettings(poolFee);console.info("The url is just your domain: "+this.poolSettings.poolURL);answer=await this.poolData.initializePoolData();answer=await this.poolStatistics.initializePoolStatistics();if(!answer)
throw{message:"Pool Couldn't be started"};}catch(exception){console.error("Couldn't initialize a Pool",exception);}
this.poolInitialized=true;return answer;}
async startPool(forceStartPool=false){if(this.poolSettings.poolURL&&this.poolSettings.poolURL!=='')
return await this.setPoolStarted(true,forceStartPool);else
console.error("Couldn't start the Pool because the poolURL is empty");return false}
generatePoolWork(minerInstance){return this.poolWorkManagement.getWork(minerInstance);}
receivePoolWork(minerInstance,work){return this.poolWorkManagement.poolWorkValidation.pushWorkForValidation(minerInstance,work)}
updateRewards(){return this.poolData.updateRewards();}
sendRewardsToMiners(){return this.poolRewardsManagement.poolPayouts.doPayout();}
get poolOpened(){return this._poolOpened;}
get poolInitialized(){return this._poolInitialized;}
get poolStarted(){return this._poolStarted;}
set poolInitialized(value){this._poolInitialized=value;__WEBPACK_IMPORTED_MODULE_6_common_events_Status_Events__["a"].emit("pools/status",{result:value,message:"Pool Initialization changed"});}
set poolOpened(value){this._poolOpened=value;__WEBPACK_IMPORTED_MODULE_6_common_events_Status_Events__["a"].emit("pools/status",{result:value,message:"Pool Opened changed"});}
async setPoolStarted(value,forceStartPool=false){if(this._poolStarted!==value){if(value&&forceStartPool){await __WEBPACK_IMPORTED_MODULE_7_main_blockchain_Blockchain__["a"].MinerPoolManagement.setMinerPoolStarted(false);if(__WEBPACK_IMPORTED_MODULE_7_main_blockchain_Blockchain__["a"].ServerPoolManagement!==undefined)
await __WEBPACK_IMPORTED_MODULE_7_main_blockchain_Blockchain__["a"].ServerPoolManagement.setServerPoolStarted(false);}
this._poolStarted=value;await this.poolSettings.setPoolActivated(value);if(value){this.poolStatistics.startInterval();await this.poolProtocol._startPoolProtocol();if(this.blockchain&&this.blockchain.prover)
this.blockchain.prover.proofActivated=false;await this.poolProtocol.poolConnectedServersProtocol.insertServersListWaitlist(this.poolSettings._poolServers);__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINING_POOL.MINING_POOL_STATUS=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINING_POOL_TYPE.MINING_POOL;this.poolData.connectedMinerInstances.startPoolDataConnectedMinerInstances();__WEBPACK_IMPORTED_MODULE_7_main_blockchain_Blockchain__["a"].PoolManagement.poolSettings.printPoolSettings();this.poolWorkManagement.startPoolWorkManagement();}
else{await this.poolProtocol._stopPoolProtocol();this.poolStatistics.clearInterval();if(this.blockchain&&this.blockchain.prover)
this.blockchain.prover.proofActivated=true;__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINING_POOL.MINING_POOL_STATUS=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINING_POOL_TYPE.MINING_POOL_DISABLED;this.poolData.connectedMinerInstances.stopPoolDataConnectedMinerInstances();this.poolWorkManagement.stopPoolWorkManagement();}
__WEBPACK_IMPORTED_MODULE_6_common_events_Status_Events__["a"].emit("pools/status",{result:value,message:"Pool Started changed"});}}}
__webpack_exports__["a"]=(PoolManagement);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_satoshmindb_Interface_SatoshminDB__=__webpack_require__(69);var __WEBPACK_IMPORTED_MODULE_1_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_2__crypto_WebDollar_Crypto__=__webpack_require__(28);var __WEBPACK_IMPORTED_MODULE_3_common_crypto_ed25519__=__webpack_require__(75);var __WEBPACK_IMPORTED_MODULE_4_common_utils_helpers_Utils__=__webpack_require__(40);var __WEBPACK_IMPORTED_MODULE_5_common_mining_pools_common_Pools_Utils__=__webpack_require__(122);var __WEBPACK_IMPORTED_MODULE_6_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_7_common_events_Status_Events__=__webpack_require__(12);var __WEBPACK_IMPORTED_MODULE_8_common_utils_logging_Log__=__webpack_require__(18);class PoolSettings{constructor(wallet,poolManagement,databaseName){this.poolManagement=poolManagement;this._wallet=wallet;this._db=new __WEBPACK_IMPORTED_MODULE_0_common_satoshmindb_Interface_SatoshminDB__["a"](databaseName?databaseName:__WEBPACK_IMPORTED_MODULE_1_consts_const_global__["a"].DATABASE_NAMES.POOL_DATABASE);this._poolFee=0.02;this._poolName='';this._poolWebsite='';this._poolServers=[];this._poolPOWValidationProbability=0.10;this._poolActivated=false;this._poolUseSignatures=false;this._poolUsePoolServers=true;this._poolReferralFee=0;this._poolPrivateKey=__WEBPACK_IMPORTED_MODULE_2__crypto_WebDollar_Crypto__["a"].getBufferRandomValues(64);this.poolPublicKey=new Buffer(0);this.poolAddress='';this.poolURL='';}
async initializePoolSettings(poolFee){let result=await this._getPoolPrivateKey();result=result&&await this._getPoolAddress();if(typeof poolFee==="number")
await this.setPoolFee(poolFee);result=result&&await this._getPoolDetails();if(result)
this.poolManagement.poolInitialized=true;return result;}
printPoolSettings(showPoolPrivateKey=false){__WEBPACK_IMPORTED_MODULE_8_common_utils_logging_Log__["a"].info("Fee: "+this._poolFee,__WEBPACK_IMPORTED_MODULE_8_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_8_common_utils_logging_Log__["a"].info("Referral Fee: "+this._poolReferralFee,__WEBPACK_IMPORTED_MODULE_8_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_8_common_utils_logging_Log__["a"].info("Name: "+this._poolName,__WEBPACK_IMPORTED_MODULE_8_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_8_common_utils_logging_Log__["a"].info("Website: "+this._poolWebsite,__WEBPACK_IMPORTED_MODULE_8_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);let poolServersStr="";for(let i=0;i<this._poolServers.length;i++)
poolServersStr+=this._poolServers[i]+", ";__WEBPACK_IMPORTED_MODULE_8_common_utils_logging_Log__["a"].info("Servers: {"+poolServersStr+"}");__WEBPACK_IMPORTED_MODULE_8_common_utils_logging_Log__["a"].info("POWValidationProbability: "+this._poolPOWValidationProbability,__WEBPACK_IMPORTED_MODULE_8_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_8_common_utils_logging_Log__["a"].info("UsePoolServers: "+this._poolUsePoolServers,__WEBPACK_IMPORTED_MODULE_8_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_8_common_utils_logging_Log__["a"].info("UsePoolSignatures: "+this._poolUseSignatures,__WEBPACK_IMPORTED_MODULE_8_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);if(showPoolPrivateKey)
__WEBPACK_IMPORTED_MODULE_8_common_utils_logging_Log__["a"].info("PrivateKey: "+this._poolPrivateKey.toString("hex"),__WEBPACK_IMPORTED_MODULE_8_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_8_common_utils_logging_Log__["a"].info("PublicKey: "+this.poolPublicKey.toString("hex"),__WEBPACK_IMPORTED_MODULE_8_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_8_common_utils_logging_Log__["a"].info("Address: "+this.poolAddress.toString("hex"),__WEBPACK_IMPORTED_MODULE_8_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_8_common_utils_logging_Log__["a"].info("URL: "+this.poolURL,__WEBPACK_IMPORTED_MODULE_8_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_8_common_utils_logging_Log__["a"].info("Activated: "+this._poolActivated,__WEBPACK_IMPORTED_MODULE_8_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);}
_generatePoolURL(){if(this._poolName===''||this._poolFee===0||this._poolServers===[]){this.poolURL='';return '';}
let servers=this.poolServers.join(";");servers=servers.replace(/\//g,'$');let poolName=this.poolName.replace(/ /g,"_");this.poolURL=(true?window.location.origin:'http://webdollar.ddns.net:9094')+'/pool/1/'+encodeURI(poolName)+"/"+encodeURI(this.poolFee)+"/"+encodeURI(this.poolPublicKey.toString("hex"))+"/"+encodeURI(servers);__WEBPACK_IMPORTED_MODULE_7_common_events_Status_Events__["a"].emit("pools/settings",{message:"Pool Settings were saved",poolName:this._poolName,poolServer:this._poolServers,poolFee:this._poolFee,poolWebsite:this._poolServers});return this.poolURL;}
get poolName(){return this._poolName;}
async setPoolName(newValue,skipSaving=false){if(this._poolName===newValue)return;__WEBPACK_IMPORTED_MODULE_5_common_mining_pools_common_Pools_Utils__["a"].validatePoolName(newValue);this._poolName=newValue;if(!skipSaving)
if(false===await this._db.save("pool_name",this._poolName))throw{message:"PoolName couldn't be saved"};this._generatePoolURL();}
get poolWebsite(){return this._poolWebsite;}
get poolFee(){return this._poolFee;}
async setPoolFee(newValue,skipSaving=false){if(this._poolFee===newValue)return;__WEBPACK_IMPORTED_MODULE_5_common_mining_pools_common_Pools_Utils__["a"].validatePoolFee(newValue);this._poolFee=newValue;if(!skipSaving)
if(false===await this._db.save("pool_fee",this._poolFee))throw{message:"PoolFee couldn't be saved"};this._generatePoolURL();}
async setPoolWebsite(newValue,skipSaving=false){if(this._poolWebsite===newValue)return;__WEBPACK_IMPORTED_MODULE_5_common_mining_pools_common_Pools_Utils__["a"].validatePoolWebsite(newValue);this._poolWebsite=newValue;if(!skipSaving)
if(false===await await this._db.save("pool_website",this._poolWebsite))throw{message:"PoolWebsite couldn't be saved"};this._generatePoolURL();}
get poolPrivateKey(){return this._poolPrivateKey;}
async setPoolActivated(newValue,skipSaving=false,useActivation=true){__WEBPACK_IMPORTED_MODULE_5_common_mining_pools_common_Pools_Utils__["a"].validatePoolActivated(newValue);this._poolActivated=newValue;if(!skipSaving)
if(false===await this._db.save("pool_activated",this._poolActivated?"true":"false"))throw{message:"poolActivated couldn't be saved"};__WEBPACK_IMPORTED_MODULE_7_common_events_Status_Events__["a"].emit("pools/settings",{message:"Pool Settings were saved",poolName:this._poolName,poolServer:this._poolServers,poolFee:this._poolFee,poolWebsite:this._poolServers,poolUsePoolServers:this._poolUsePoolServers});if(useActivation)
await this.poolManagement.setPoolStarted(newValue,true);}
get poolActivated(){return this._poolActivated;}
async setPoolUseSignatures(newValue,skipSaving=false){__WEBPACK_IMPORTED_MODULE_5_common_mining_pools_common_Pools_Utils__["a"].validatePoolActivated(newValue);this._poolUseSignatures=newValue;if(!skipSaving)
if(false===await this._db.save("pool_use_signatures",this._poolUseSignatures?"true":"false"))throw{message:"poolUseSignatures couldn't be saved"};}
get poolUseSignatures(){return this._poolUseSignatures;}
async setPoolReferralFee(newValue,skipSaving=false){__WEBPACK_IMPORTED_MODULE_5_common_mining_pools_common_Pools_Utils__["a"].validatePoolFee(newValue);this._poolReferralFee=newValue;if(!skipSaving)
if(false===await this._db.save("pool_referral_fee",this._poolReferralFee))throw{message:"poolReferralFee couldn't be saved"};}
get poolReferralFee(){return this._poolReferralFee;}
async setPoolUsePoolServers(newValue,skipSaving=false){__WEBPACK_IMPORTED_MODULE_5_common_mining_pools_common_Pools_Utils__["a"].validatePoolActivated(newValue);this._poolUsePoolServers=newValue;if(!skipSaving)
if(false===await this._db.save("pool_use_pool_servers",this._poolUsePoolServers?"true":"false"))throw{message:"poolUsePoolServers couldn't be saved"};}
get poolUsePoolServers(){return this._poolUsePoolServers;}
get poolPOWValidationProbability(){return this._poolPOWValidationProbability;}
get poolServers(){return this._poolServers;}
getPoolServersText(){if(typeof this._poolServers==="string")return this._poolServers;return __WEBPACK_IMPORTED_MODULE_5_common_mining_pools_common_Pools_Utils__["a"].convertServersList(this._poolServers);}
async setPoolServers(newValue,skipSaving=false){__WEBPACK_IMPORTED_MODULE_5_common_mining_pools_common_Pools_Utils__["a"].validatePoolServers(newValue);if(JSON.stringify(this._poolServers)===JSON.stringify(newValue))return;newValue=__WEBPACK_IMPORTED_MODULE_5_common_mining_pools_common_Pools_Utils__["a"].processServersList(newValue);this._poolServers=newValue;if(!skipSaving)
if(false===await this._db.save("pool_servers",JSON.stringify(this._poolServers)))throw{message:"PoolServers couldn't be stored"};if(this.poolManagement.poolStarted)
await this.poolManagement.poolProtocol.poolConnectedServersProtocol.insertServersListWaitlist(this._poolServers);this._generatePoolURL();}
async savePoolPrivateKey(){let result=await this._db.save("pool_privateKey",this._poolPrivateKey);return result;}
async _getPoolAddress(){this.poolAddress=__WEBPACK_IMPORTED_MODULE_6_main_blockchain_Blockchain__["a"].Wallet.addresses[0].address;return true;}
async _getPoolPrivateKey(){this._poolPrivateKey=await this._db.get("pool_privateKey",10*1000,20,true);if(!this._poolPrivateKey){this._poolPrivateKey=__WEBPACK_IMPORTED_MODULE_3_common_crypto_ed25519__["a"].generatePrivateKey();await this.savePoolPrivateKey();}
if(Buffer.isBuffer(this._poolPrivateKey)){this.poolPublicKey=__WEBPACK_IMPORTED_MODULE_3_common_crypto_ed25519__["a"].generatePublicKey(this._poolPrivateKey);}else
throw{message:"poolPrivateKey is wrong"}
return true;}
async justValidatePoolDetails(poolName,poolFee,poolWebsite,poolServers,poolActivated,poolReferralFee){return __WEBPACK_IMPORTED_MODULE_5_common_mining_pools_common_Pools_Utils__["a"].validatePoolsDetails(poolName,poolFee,poolWebsite,this.poolAddress,this.poolPublicKey,poolServers,poolActivated,poolReferralFee);}
async _getPoolDetails(){let poolName=await this._db.get("pool_name",10*1000,20,true);if(poolName===null)poolName='';let poolFee;try{poolFee=await this._db.get("pool_fee",10*1000,20,true);if(typeof poolFee!=="number")poolFee=0.02;poolFee=parseFloat(poolFee);}catch(exception){poolFee=0.02;}
let poolWebsite=await this._db.get("pool_website",10*1000,20,true);if(!poolWebsite)poolWebsite='';let poolServers=JSON.parse(await this._db.get("pool_servers",10*1000,20,true));if(!poolServers)poolServers='';let poolActivated=await this._db.get("pool_activated",10*1000,20,true);if(poolActivated==="true")poolActivated=true;else if(poolActivated==="false")poolActivated=false;else poolActivated=false;let poolUsePoolServers=await this._db.get("pool_use_pool_servers",10*1000,20,true);if(poolUsePoolServers==="true")poolUsePoolServers=true;else if(poolUsePoolServers==="false")poolUsePoolServers=false;else poolUsePoolServers=true;let poolUseSignatures=await this._db.get("pool_use_signatures",10*1000,20,true);if(poolUseSignatures==="true")poolUseSignatures=true;else if(poolUseSignatures==="false")poolUseSignatures=false;else poolUseSignatures=true;if(!poolUsePoolServers)
poolUseSignatures=false;let poolReferralFee=await this._db.get("pool_referral_fee",10*1000,20,true);if(typeof poolReferralFee!=="number")poolReferralFee=0.05;if(false===await this.justValidatePoolDetails(poolName,poolFee,poolWebsite,poolServers,poolActivated,poolReferralFee))
return false;await this.setPoolName(poolName,true);await this.setPoolFee(poolFee,true);await this.setPoolWebsite(poolWebsite,true);await this.setPoolServers(poolServers,true);await this.setPoolActivated(poolActivated,true,true);await this.setPoolUsePoolServers(poolUsePoolServers,true,true);await this.setPoolUseSignatures(poolUseSignatures,true,true);await this.setPoolReferralFee(poolReferralFee,true);return true;}
poolDigitalSign(message){let signature=__WEBPACK_IMPORTED_MODULE_3_common_crypto_ed25519__["a"].sign(message,this._poolPrivateKey);return signature;}}
__webpack_exports__["a"]=(PoolSettings);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,exports,__webpack_require__){var html4={};html4.atype={'NONE':0,'URI':1,'URI_FRAGMENT':11,'SCRIPT':2,'STYLE':3,'ID':4,'IDREF':5,'IDREFS':6,'GLOBAL_NAME':7,'LOCAL_NAME':8,'CLASSES':9,'FRAME_TARGET':10};html4.ATTRIBS={'*::class':9,'*::dir':0,'*::id':4,'*::lang':0,'*::onclick':2,'*::ondblclick':2,'*::onkeydown':2,'*::onkeypress':2,'*::onkeyup':2,'*::onload':2,'*::onmousedown':2,'*::onmousemove':2,'*::onmouseout':2,'*::onmouseover':2,'*::onmouseup':2,'*::style':3,'*::title':0,'a::accesskey':0,'a::coords':0,'a::href':1,'a::hreflang':0,'a::name':7,'a::onblur':2,'a::onfocus':2,'a::rel':0,'a::rev':0,'a::shape':0,'a::tabindex':0,'a::target':10,'a::type':0,'area::accesskey':0,'area::alt':0,'area::coords':0,'area::href':1,'area::nohref':0,'area::onblur':2,'area::onfocus':2,'area::shape':0,'area::tabindex':0,'area::target':10,'bdo::dir':0,'blockquote::cite':1,'br::clear':0,'button::accesskey':0,'button::disabled':0,'button::name':8,'button::onblur':2,'button::onfocus':2,'button::tabindex':0,'button::type':0,'button::value':0,'caption::align':0,'col::align':0,'col::char':0,'col::charoff':0,'col::span':0,'col::valign':0,'col::width':0,'colgroup::align':0,'colgroup::char':0,'colgroup::charoff':0,'colgroup::span':0,'colgroup::valign':0,'colgroup::width':0,'del::cite':1,'del::datetime':0,'dir::compact':0,'div::align':0,'dl::compact':0,'font::color':0,'font::face':0,'font::size':0,'form::accept':0,'form::action':1,'form::autocomplete':0,'form::enctype':0,'form::method':0,'form::name':7,'form::onreset':2,'form::onsubmit':2,'form::target':10,'h1::align':0,'h2::align':0,'h3::align':0,'h4::align':0,'h5::align':0,'h6::align':0,'hr::align':0,'hr::noshade':0,'hr::size':0,'hr::width':0,'iframe::align':0,'iframe::frameborder':0,'iframe::height':0,'iframe::marginheight':0,'iframe::marginwidth':0,'iframe::width':0,'img::align':0,'img::alt':0,'img::border':0,'img::height':0,'img::hspace':0,'img::ismap':0,'img::name':7,'img::src':1,'img::usemap':11,'img::vspace':0,'img::width':0,'input::accept':0,'input::accesskey':0,'input::align':0,'input::alt':0,'input::autocomplete':0,'input::checked':0,'input::disabled':0,'input::ismap':0,'input::maxlength':0,'input::name':8,'input::onblur':2,'input::onchange':2,'input::onfocus':2,'input::onselect':2,'input::readonly':0,'input::size':0,'input::src':1,'input::tabindex':0,'input::type':0,'input::usemap':11,'input::value':0,'ins::cite':1,'ins::datetime':0,'label::accesskey':0,'label::for':5,'label::onblur':2,'label::onfocus':2,'legend::accesskey':0,'legend::align':0,'li::type':0,'li::value':0,'map::name':7,'menu::compact':0,'ol::compact':0,'ol::start':0,'ol::type':0,'optgroup::disabled':0,'optgroup::label':0,'option::disabled':0,'option::label':0,'option::selected':0,'option::value':0,'p::align':0,'pre::width':0,'q::cite':1,'select::disabled':0,'select::multiple':0,'select::name':8,'select::onblur':2,'select::onchange':2,'select::onfocus':2,'select::size':0,'select::tabindex':0,'table::align':0,'table::bgcolor':0,'table::border':0,'table::cellpadding':0,'table::cellspacing':0,'table::frame':0,'table::rules':0,'table::summary':0,'table::width':0,'tbody::align':0,'tbody::char':0,'tbody::charoff':0,'tbody::valign':0,'td::abbr':0,'td::align':0,'td::axis':0,'td::bgcolor':0,'td::char':0,'td::charoff':0,'td::colspan':0,'td::headers':6,'td::height':0,'td::nowrap':0,'td::rowspan':0,'td::scope':0,'td::valign':0,'td::width':0,'textarea::accesskey':0,'textarea::cols':0,'textarea::disabled':0,'textarea::name':8,'textarea::onblur':2,'textarea::onchange':2,'textarea::onfocus':2,'textarea::onselect':2,'textarea::readonly':0,'textarea::rows':0,'textarea::tabindex':0,'tfoot::align':0,'tfoot::char':0,'tfoot::charoff':0,'tfoot::valign':0,'th::abbr':0,'th::align':0,'th::axis':0,'th::bgcolor':0,'th::char':0,'th::charoff':0,'th::colspan':0,'th::headers':6,'th::height':0,'th::nowrap':0,'th::rowspan':0,'th::scope':0,'th::valign':0,'th::width':0,'thead::align':0,'thead::char':0,'thead::charoff':0,'thead::valign':0,'tr::align':0,'tr::bgcolor':0,'tr::char':0,'tr::charoff':0,'tr::valign':0,'ul::compact':0,'ul::type':0};html4.eflags={'OPTIONAL_ENDTAG':1,'EMPTY':2,'CDATA':4,'RCDATA':8,'UNSAFE':16,'FOLDABLE':32,'SCRIPT':64,'STYLE':128};html4.ELEMENTS={'a':0,'abbr':0,'acronym':0,'address':0,'applet':16,'area':2,'b':0,'base':18,'basefont':18,'bdo':0,'big':0,'blockquote':0,'body':49,'br':2,'button':0,'caption':0,'center':0,'cite':0,'code':0,'col':2,'colgroup':1,'dd':1,'del':0,'dfn':0,'dir':0,'div':0,'dl':0,'dt':1,'em':0,'fieldset':0,'font':0,'form':0,'frame':18,'frameset':16,'h1':0,'h2':0,'h3':0,'h4':0,'h5':0,'h6':0,'head':49,'hr':2,'html':49,'i':0,'iframe':4,'img':2,'input':2,'ins':0,'isindex':18,'kbd':0,'label':0,'legend':0,'li':1,'link':18,'map':0,'menu':0,'meta':18,'noframes':20,'noscript':20,'object':16,'ol':0,'optgroup':0,'option':1,'p':1,'param':18,'pre':0,'q':0,'s':0,'samp':0,'script':84,'select':0,'small':0,'span':0,'strike':0,'strong':0,'style':148,'sub':0,'sup':0,'table':0,'tbody':1,'td':1,'textarea':8,'tfoot':1,'th':1,'thead':1,'title':24,'tr':1,'tt':0,'u':0,'ul':0,'var':0};html4.URIEFFECTS={};html4.LOADERTYPES={}
if(true){if(typeof module!=='undefined'&&module.exports){exports=module.exports=html4;}
exports.URI=html4;}else{if(typeof window!=='undefined'){window['html4']=html4;}}}),(function(module,exports,__webpack_require__){var URI=(function(){function parse(uriStr){var m=(''+uriStr).match(URI_RE_);if(!m){return null;}
return new URI(nullIfAbsent(m[1]),nullIfAbsent(m[2]),nullIfAbsent(m[3]),nullIfAbsent(m[4]),nullIfAbsent(m[5]),nullIfAbsent(m[6]),nullIfAbsent(m[7]));}
function create(scheme,credentials,domain,port,path,query,fragment){var uri=new URI(encodeIfExists2(scheme,URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_),encodeIfExists2(credentials,URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_),encodeIfExists(domain),port>0?port.toString():null,encodeIfExists2(path,URI_DISALLOWED_IN_PATH_),null,encodeIfExists(fragment));if(query){if('string'===typeof query){uri.setRawQuery(query.replace(/[^?&=0-9A-Za-z_\-~.%]/g,encodeOne));}else{uri.setAllParameters(query);}}
return uri;}
function encodeIfExists(unescapedPart){if('string'==typeof unescapedPart){return encodeURIComponent(unescapedPart);}
return null;};function encodeIfExists2(unescapedPart,extra){if('string'==typeof unescapedPart){return encodeURI(unescapedPart).replace(extra,encodeOne);}
return null;};function encodeOne(ch){var n=ch.charCodeAt(0);return '%'+'0123456789ABCDEF'.charAt((n>>4)&0xf)+
'0123456789ABCDEF'.charAt(n&0xf);}
function normPath(path){return path.replace(/(^|\/)\.(?:\/|$)/g,'$1').replace(/\/{2,}/g,'/');}
var PARENT_DIRECTORY_HANDLER=new RegExp(''
+'(/|^)'
+'(?:[^./][^/]*|\\.{2,}(?:[^./][^/]*)|\\.{3,}[^/]*)'
+'/\\.\\.(?:/|$)');var PARENT_DIRECTORY_HANDLER_RE=new RegExp(PARENT_DIRECTORY_HANDLER);var EXTRA_PARENT_PATHS_RE=/^(?:\.\.\/)*(?:\.\.$)?/;function collapse_dots(path){if(path===null){return null;}
var p=normPath(path);var r=PARENT_DIRECTORY_HANDLER_RE;for(var q;(q=p.replace(r,'$1'))!=p;p=q){};return p;}
function resolve(baseUri,relativeUri){var absoluteUri=baseUri.clone();var overridden=relativeUri.hasScheme();if(overridden){absoluteUri.setRawScheme(relativeUri.getRawScheme());}else{overridden=relativeUri.hasCredentials();}
if(overridden){absoluteUri.setRawCredentials(relativeUri.getRawCredentials());}else{overridden=relativeUri.hasDomain();}
if(overridden){absoluteUri.setRawDomain(relativeUri.getRawDomain());}else{overridden=relativeUri.hasPort();}
var rawPath=relativeUri.getRawPath();var simplifiedPath=collapse_dots(rawPath);if(overridden){absoluteUri.setPort(relativeUri.getPort());simplifiedPath=simplifiedPath&&simplifiedPath.replace(EXTRA_PARENT_PATHS_RE,'');}else{overridden=!!rawPath;if(overridden){if(simplifiedPath.charCodeAt(0)!==0x2f){var absRawPath=collapse_dots(absoluteUri.getRawPath()||'').replace(EXTRA_PARENT_PATHS_RE,'');var slash=absRawPath.lastIndexOf('/')+1;simplifiedPath=collapse_dots((slash?absRawPath.substring(0,slash):'')
+collapse_dots(rawPath)).replace(EXTRA_PARENT_PATHS_RE,'');}}else{simplifiedPath=simplifiedPath&&simplifiedPath.replace(EXTRA_PARENT_PATHS_RE,'');if(simplifiedPath!==rawPath){absoluteUri.setRawPath(simplifiedPath);}}}
if(overridden){absoluteUri.setRawPath(simplifiedPath);}else{overridden=relativeUri.hasQuery();}
if(overridden){absoluteUri.setRawQuery(relativeUri.getRawQuery());}else{overridden=relativeUri.hasFragment();}
if(overridden){absoluteUri.setRawFragment(relativeUri.getRawFragment());}
return absoluteUri;}
function URI(rawScheme,rawCredentials,rawDomain,port,rawPath,rawQuery,rawFragment){this.scheme_=rawScheme;this.credentials_=rawCredentials;this.domain_=rawDomain;this.port_=port;this.path_=rawPath;this.query_=rawQuery;this.fragment_=rawFragment;this.paramCache_=null;}
URI.prototype.toString=function(){var out=[];if(null!==this.scheme_){out.push(this.scheme_,':');}
if(null!==this.domain_){out.push('//');if(null!==this.credentials_){out.push(this.credentials_,'@');}
out.push(this.domain_);if(null!==this.port_){out.push(':',this.port_.toString());}}
if(null!==this.path_){out.push(this.path_);}
if(null!==this.query_){out.push('?',this.query_);}
if(null!==this.fragment_){out.push('#',this.fragment_);}
return out.join('');};URI.prototype.clone=function(){return new URI(this.scheme_,this.credentials_,this.domain_,this.port_,this.path_,this.query_,this.fragment_);};URI.prototype.getScheme=function(){return this.scheme_&&decodeURIComponent(this.scheme_).toLowerCase();};URI.prototype.getRawScheme=function(){return this.scheme_;};URI.prototype.setScheme=function(newScheme){this.scheme_=encodeIfExists2(newScheme,URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_);return this;};URI.prototype.setRawScheme=function(newScheme){this.scheme_=newScheme?newScheme:null;return this;};URI.prototype.hasScheme=function(){return null!==this.scheme_;};URI.prototype.getCredentials=function(){return this.credentials_&&decodeURIComponent(this.credentials_);};URI.prototype.getRawCredentials=function(){return this.credentials_;};URI.prototype.setCredentials=function(newCredentials){this.credentials_=encodeIfExists2(newCredentials,URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_);return this;};URI.prototype.setRawCredentials=function(newCredentials){this.credentials_=newCredentials?newCredentials:null;return this;};URI.prototype.hasCredentials=function(){return null!==this.credentials_;};URI.prototype.getDomain=function(){return this.domain_&&decodeURIComponent(this.domain_);};URI.prototype.getRawDomain=function(){return this.domain_;};URI.prototype.setDomain=function(newDomain){return this.setRawDomain(newDomain&&encodeURIComponent(newDomain));};URI.prototype.setRawDomain=function(newDomain){this.domain_=newDomain?newDomain:null;return this.setRawPath(this.path_);};URI.prototype.hasDomain=function(){return null!==this.domain_;};URI.prototype.getPort=function(){return this.port_&&decodeURIComponent(this.port_);};URI.prototype.setPort=function(newPort){if(newPort){newPort=Number(newPort);if(newPort!==(newPort&0xffff)){throw new Error('Bad port number '+newPort);}
this.port_=''+newPort;}else{this.port_=null;}
return this;};URI.prototype.hasPort=function(){return null!==this.port_;};URI.prototype.getPath=function(){return this.path_&&decodeURIComponent(this.path_);};URI.prototype.getRawPath=function(){return this.path_;};URI.prototype.setPath=function(newPath){return this.setRawPath(encodeIfExists2(newPath,URI_DISALLOWED_IN_PATH_));};URI.prototype.setRawPath=function(newPath){if(newPath){newPath=String(newPath);this.path_=(!this.domain_||/^\//.test(newPath))?newPath:'/'+newPath;}else{this.path_=null;}
return this;};URI.prototype.hasPath=function(){return null!==this.path_;};URI.prototype.getQuery=function(){return this.query_&&decodeURIComponent(this.query_).replace(/\+/g,' ');};URI.prototype.getRawQuery=function(){return this.query_;};URI.prototype.setQuery=function(newQuery){this.paramCache_=null;this.query_=encodeIfExists(newQuery);return this;};URI.prototype.setRawQuery=function(newQuery){this.paramCache_=null;this.query_=newQuery?newQuery:null;return this;};URI.prototype.hasQuery=function(){return null!==this.query_;};URI.prototype.setAllParameters=function(params){if(typeof params==='object'){if(!(params instanceof Array)&&(params instanceof Object||Object.prototype.toString.call(params)!=='[object Array]')){var newParams=[];var i=-1;for(var k in params){var v=params[k];if('string'===typeof v){newParams[++i]=k;newParams[++i]=v;}}
params=newParams;}}
this.paramCache_=null;var queryBuf=[];var separator='';for(var j=0;j<params.length;){var k=params[j++];var v=params[j++];queryBuf.push(separator,encodeURIComponent(k.toString()));separator='&';if(v){queryBuf.push('=',encodeURIComponent(v.toString()));}}
this.query_=queryBuf.join('');return this;};URI.prototype.checkParameterCache_=function(){if(!this.paramCache_){var q=this.query_;if(!q){this.paramCache_=[];}else{var cgiParams=q.split(/[&\?]/);var out=[];var k=-1;for(var i=0;i<cgiParams.length;++i){var m=cgiParams[i].match(/^([^=]*)(?:=(.*))?$/);out[++k]=decodeURIComponent(m[1]).replace(/\+/g,' ');out[++k]=decodeURIComponent(m[2]||'').replace(/\+/g,' ');}
this.paramCache_=out;}}};URI.prototype.setParameterValues=function(key,values){if(typeof values==='string'){values=[values];}
this.checkParameterCache_();var newValueIndex=0;var pc=this.paramCache_;var params=[];for(var i=0,k=0;i<pc.length;i+=2){if(key===pc[i]){if(newValueIndex<values.length){params.push(key,values[newValueIndex++]);}}else{params.push(pc[i],pc[i+1]);}}
while(newValueIndex<values.length){params.push(key,values[newValueIndex++]);}
this.setAllParameters(params);return this;};URI.prototype.removeParameter=function(key){return this.setParameterValues(key,[]);};URI.prototype.getAllParameters=function(){this.checkParameterCache_();return this.paramCache_.slice(0,this.paramCache_.length);};URI.prototype.getParameterValues=function(paramNameUnescaped){this.checkParameterCache_();var values=[];for(var i=0;i<this.paramCache_.length;i+=2){if(paramNameUnescaped===this.paramCache_[i]){values.push(this.paramCache_[i+1]);}}
return values;};URI.prototype.getParameterMap=function(paramNameUnescaped){this.checkParameterCache_();var paramMap={};for(var i=0;i<this.paramCache_.length;i+=2){var key=this.paramCache_[i++],value=this.paramCache_[i++];if(!(key in paramMap)){paramMap[key]=[value];}else{paramMap[key].push(value);}}
return paramMap;};URI.prototype.getParameterValue=function(paramNameUnescaped){this.checkParameterCache_();for(var i=0;i<this.paramCache_.length;i+=2){if(paramNameUnescaped===this.paramCache_[i]){return this.paramCache_[i+1];}}
return null;};URI.prototype.getFragment=function(){return this.fragment_&&decodeURIComponent(this.fragment_);};URI.prototype.getRawFragment=function(){return this.fragment_;};URI.prototype.setFragment=function(newFragment){this.fragment_=newFragment?encodeURIComponent(newFragment):null;return this;};URI.prototype.setRawFragment=function(newFragment){this.fragment_=newFragment?newFragment:null;return this;};URI.prototype.hasFragment=function(){return null!==this.fragment_;};function nullIfAbsent(matchPart){return('string'==typeof matchPart)&&(matchPart.length>0)?matchPart:null;}
var URI_RE_=new RegExp("^"+
"(?:"+
"([^:/?#]+)"+
":)?"+
"(?://"+
"(?:([^/?#]*)@)?"+
"([^/?#:@]*)"+
"(?::([0-9]+))?"+
")?"+
"([^?#]+)?"+
"(?:\\?([^#]*))?"+
"(?:#(.*))?"+
"$");var URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_=/[#\/\?@]/g;var URI_DISALLOWED_IN_PATH_=/[\#\?]/g;URI.parse=parse;URI.create=create;URI.resolve=resolve;URI.collapse_dots=collapse_dots;URI.utils={mimeTypeOf:function(uri){var uriObj=parse(uri);if(/\.html$/.test(uriObj.getPath())){return 'text/html';}else{return 'application/javascript';}},resolve:function(base,uri){if(base){return resolve(parse(base),parse(uri)).toString();}else{return ''+uri;}}};return URI;})();if(true){if(typeof module!=='undefined'&&module.exports){exports=module.exports=URI;}
exports.URI=URI;}else{if(typeof window!=='undefined'){window['URI']=URI;}}}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_3_common_satoshmindb_Interface_SatoshminDB__=__webpack_require__(69);var __WEBPACK_IMPORTED_MODULE_4_common_mining_pools_pool_pool_management_pool_data_miners_Pool_Data_Miner__=__webpack_require__(1043);var __WEBPACK_IMPORTED_MODULE_5_common_mining_pools_pool_pool_management_pool_data_block_informations_Pool_Data_Block_Information__=__webpack_require__(1047);var __WEBPACK_IMPORTED_MODULE_6_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_7_common_utils_helpers_Utils__=__webpack_require__(40);var __WEBPACK_IMPORTED_MODULE_8__Pool_Data_Connected_Miner_Instances__=__webpack_require__(1049);var __WEBPACK_IMPORTED_MODULE_9_consts_global__=__webpack_require__(45);var __WEBPACK_IMPORTED_MODULE_10_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__=__webpack_require__(17);var __WEBPACK_IMPORTED_MODULE_11_common_utils_bans_AddressBanList__=__webpack_require__(145);const FileSystem=__webpack_require__(62);const readline=__webpack_require__(1051);const uuid=__webpack_require__(306);class PoolData{constructor(poolManagement,databaseName){this.poolManagement=poolManagement;this._db=new __WEBPACK_IMPORTED_MODULE_3_common_satoshmindb_Interface_SatoshminDB__["a"](databaseName?databaseName:__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].DATABASE_NAMES.POOL_DATABASE);this.miners=[];this.blocksInfo=[];setTimeout(this._savePoolData.bind(this),30000);this.connectedMinerInstances=new __WEBPACK_IMPORTED_MODULE_8__Pool_Data_Connected_Miner_Instances__["a"](poolManagement);}
async initializePoolData(){return await this._loadPoolData();}
get lastBlockInformation(){if(this.blocksInfo.length===0)
this.addBlockInformation();return this.blocksInfo[this.blocksInfo.length-1];}
get confirmedBlockInformations(){let blocksConfirmed=[];for(let i=0;i<this.blocksInfo.length;i++)
if(this.blocksInfo[i].confirmed&&!this.blocksInfo[i].payout)
blocksConfirmed.push(this.blocksInfo[i]);return blocksConfirmed;}
updateRewards(){let blockInformation=this.lastBlockInformation;for(let i=0;i<blockInformation.blockInformationMinersInstances.length;i++)
blockInformation.blockInformationMinersInstances[i].calculateReward();return true;}
findMiner(minerAddress,returnPos=false){for(let i=0;i<this.miners.length;++i)
if(this.miners[i].address.equals(minerAddress))
return(returnPos?i:this.miners[i]);return returnPos?-1:null;}
getMinerInstance(socket){return socket.node.protocol.minerPool.minerInstance;}
addMiner(minerAddress,minerReward=0){if(!Buffer.isBuffer(minerAddress)||minerAddress.length!==__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH)
throw{message:"miner address is invalid"};let miner=this.findMiner(minerAddress);if(!miner){miner=new __WEBPACK_IMPORTED_MODULE_4_common_mining_pools_pool_pool_management_pool_data_miners_Pool_Data_Miner__["a"](this,uuid.v4(),minerAddress,minerReward,[]);this.miners.push(miner);}
return miner;}
addBlockInformation(){let blockInformation=new __WEBPACK_IMPORTED_MODULE_5_common_mining_pools_pool_pool_management_pool_data_block_informations_Pool_Data_Block_Information__["a"](this.poolManagement,this.blocksInfo.length,undefined,undefined,undefined,__WEBPACK_IMPORTED_MODULE_6_main_blockchain_Blockchain__["a"].blockchain.blocks.length);this.blocksInfo.push(blockInformation);return blockInformation;}
findBlockInformation(blockInformation,returnPos=false){for(let i=0;i<this.blocksInfo.length;i++)
if(blockInformation===this.blocksInfo[i])
return returnPos?i:this.blocksInfo[i];return returnPos?-1:null;}
deleteBlockInformation(index){if(typeof index!=="number")index=this.findBlockInformation(index,true);if(index===-1)return false;this.blocksInfo[index].destroyPoolDataBlockInformation();this.blocksInfo.splice(index,1);return true;}
async removeMiner(minerAddress){let pos;if(typeof minerAddress!=="number")pos=this.findMiner(minerAddress,true);else pos=minerAddress;if(pos===-1)return false;this.miners[pos].destroyPoolDataMiner();this.miners[pos]=this.miners[this.miners.length-1];this.miners.pop();return true;}
async _serializeMiners(){let lists=[__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeNumber4Bytes(this.miners.length)];let buffer=[];for(let i=0;i<this.miners.length;++i){buffer.push(this.miners[i].serializeMiner());if(buffer.length===100){await __WEBPACK_IMPORTED_MODULE_7_common_utils_helpers_Utils__["a"].sleep(100);lists.push(Buffer.concat(buffer));buffer=[];}}
if(buffer.length>0)
lists.push(Buffer.concat(buffer));return lists;}
_deserializeMiners(buffer,offset=0,numMiners){try{for(let i=0;i<numMiners;++i){let miner=new __WEBPACK_IMPORTED_MODULE_4_common_mining_pools_pool_pool_management_pool_data_miners_Pool_Data_Miner__["a"](this,i);offset=miner.deserializeMiner(buffer,offset);if(!this.findMiner(miner.address))
this.miners.push(miner);}
return true;}catch(exception){console.log("Error deserialize minersList. ",exception);throw exception;}}
async _loadMinersList(){try{this.miners=[];let buffer=await this._db.get("minersList_0",60000,20,true);if(buffer){let numMiners=__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].deserializeNumber4Bytes(buffer,0);let i=0,index=1;while(i<numMiners){buffer=await this._db.get("minersList_"+index,60000,20,true);try{let response=this._deserializeMiners(buffer,0,Math.min(100,numMiners-i));if(!response)
throw 'Unable to load miners from DB'}catch(exception){}
i+=100;index++;console.info("Loading ",i);}}else{buffer=await this._db.get("minersList",60000,20,true);let offset=0;if(buffer){let numMiners=__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].deserializeNumber4Bytes(buffer,offset);offset+=4;let response=this._deserializeMiners(buffer,offset,numMiners);if(!response)
throw 'Unable to load miners from DB';}}
for(let i=0;i<this.miners.length;i++){this.miners[i].referrals.findReferralLinkAddress();this.miners[i].referrals.refreshRefereeAddresses();}
return true;}catch(exception){console.log('ERROR loading miners from BD: ',exception);return false;}}
async saveMinersList(){try{let lists=await this._serializeMiners();for(let i=0;i<lists.length;i++){let response=await this._db.save("minersList_"+i,lists[i]);if(!response)
throw 'Unable to save miners to DB'
await this.poolManagement.blockchain.sleep(1000);}
return true;}catch(exception){console.log('ERROR saving miners in DB: ',exception);return false;}}
async _serializeBlockInformation(){console.info("SAVING POOL DATA");let lists=[__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeNumber4Bytes(this.blocksInfo.length)];let i=0;for(let blockInfo of this.blocksInfo){i++;lists.push(await blockInfo.serializeBlockInformation());if(blockInfo.blockInformationMinersInstances.length>100)
await this.poolManagement.blockchain.sleep(200);console.info("Saving Block Info",i)}
console.info("SAVE DONE");__WEBPACK_IMPORTED_MODULE_11_common_utils_bans_AddressBanList__["a"].saveBans();return lists;}
async _deserializeBlockInformation(buffer,offset=0,numBlocksInformation){try{console.info("Pool Blocks Data Length",numBlocksInformation);for(let i=0;i<numBlocksInformation&&offset<buffer.length;i++){console.info("Pool Blocks Data",i);let blockInformation=new __WEBPACK_IMPORTED_MODULE_5_common_mining_pools_pool_pool_management_pool_data_block_informations_Pool_Data_Block_Information__["a"](this.poolManagement,this.blocksInfo.length,undefined,undefined,undefined,__WEBPACK_IMPORTED_MODULE_6_main_blockchain_Blockchain__["a"].blockchain.blocks.length);offset=await blockInformation.deserializeBlockInformation(buffer,offset);if(blockInformation.blockInformationMinersInstances.length>0){this.blocksInfo.push(blockInformation);for(let j=0;j<blockInformation.blockInformationMinersInstances.length;j++)
blockInformation.blockInformationMinersInstances[j].calculateReward(false);}}
return true;}catch(exception){console.log("Error deserialize blocksInfo. ",exception);throw exception;}}
async _loadBlockInformations(){if(__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].DEBUG){console.log('Pool Data is not loaded in Debug');return true;}
this.blocksInfo=[];try{let buffer=await this._db.get("blocksInformation_0",60000,20,true);if(buffer){let numBlocksInformation=__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].deserializeNumber4Bytes(buffer,0,);for(let i=0;i<numBlocksInformation;i++){buffer=await this._db.get("blocksInformation_"+(i+1),60000,20,true);if(buffer){let response=await this._deserializeBlockInformation(buffer,0,1);if(!response)
throw 'Unable to load miners from DB'}}}else{buffer=await this._db.get("blocksInformation",60000,undefined,true);let offset=0;if(buffer){let numBlocksInformation=__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].deserializeNumber4Bytes(buffer,offset,);offset+=4;let response=await this._deserializeBlockInformation(buffer,offset,numBlocksInformation);if(!response)
throw 'Unable to load miners from DB'}}
if(this.blocksInfo.length>0&&this.blocksInfo[this.blocksInfo.length-1].block&&this.blocksInfo[this.blocksInfo.length-1].blockInformationMinersInstances.length>0)
this.addBlockInformation();console.warn("==========================================================");console.warn("POOLS BLOCK INFORMATION LOADED: "+this.blocksInfo.length);console.warn("==========================================================");return true;}catch(exception){console.log('Unable to load miners from DB');return false;}}
async saveBlocksInformation(){try{let lists=await this._serializeBlockInformation();for(let i=0;i<lists.length;i++){let response=await this._db.save("blocksInformation_"+i,lists[i]);if(!response)
throw 'Unable to save miners to DB'
await this.poolManagement.blockchain.sleep(2000);}
return true;}catch(exception){console.log('ERROR saving block information in DB: ',exception);return false;}}
async _savePoolData(){let answer=false;if(this.poolManagement.poolStarted){__WEBPACK_IMPORTED_MODULE_9_consts_global__["a"].POOL_SAVED=false;try{answer=await this.saveMinersList();await __WEBPACK_IMPORTED_MODULE_7_common_utils_helpers_Utils__["a"].sleep(3000);answer=answer&&(await this.saveBlocksInformation());}catch(exception){console.error("SavePoolData: ",exception.message);}
__WEBPACK_IMPORTED_MODULE_9_consts_global__["a"].POOL_SAVED=true;}
setTimeout(this._savePoolData.bind(this),3*60*1000);return answer;}
async _loadPoolData(){let answer1=await this._loadMinersList();let answer2=await this._loadBlockInformations();this._clearEmptyMiners();await this.LoadAddressBanList();return answer1&&answer2;}
_compareMinersList(minersList){if(minersList.length!==this.miners.length)
return true;for(let i=0;i<this.miners;++i){if(this.miners[i].address!==minersList[i].address)
return true;}
return false;}
static compareMiners(miner1,miner2){return miner1===miner2||miner1.address===miner2.address;}
_clearEmptyMiners(){}
async LoadAddressBanList(){try{const file=FileSystem.createReadStream('address-ban-list.txt');const rl=readline.createInterface({input:file,crlfDelay:Infinity});rl.on('error',function(err){console.error('Address ban list was not found');});file.on('error',function(err){console.error('Address ban list was not found');});rl.on('line',(line)=>{let triplet=line.split(';');if(triplet.length==3){let duration=parseFloat(triplet[0]);let addressWIF=triplet[1];let reason=triplet[2];if(addressWIF&&addressWIF.length==40){let unencodedAddress=__WEBPACK_IMPORTED_MODULE_10_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].getUnencodedAddressFromWIF(addressWIF);if(unencodedAddress)
__WEBPACK_IMPORTED_MODULE_11_common_utils_bans_AddressBanList__["a"].addBan(unencodedAddress,duration*3600*1000,reason);}}else console.log("Invalid line in address-ban-list.txt",line);});rl.on('close',()=>{__WEBPACK_IMPORTED_MODULE_11_common_utils_bans_AddressBanList__["a"].listBans();});}catch(exception){console.error("Error loading banlist: ",exception);}}}
__webpack_exports__["a"]=(PoolData);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_2_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_3__Pool_Data_Miner_Instance__=__webpack_require__(1044);var __WEBPACK_IMPORTED_MODULE_4__Pool_Data_Miner_Referrals__=__webpack_require__(1045);var __WEBPACK_IMPORTED_MODULE_5_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__=__webpack_require__(17);class PoolDataMiner{constructor(poolData,index,address){this.poolData=poolData;this.index=index;this.address=address;this.instances=[];this._rewardTotal=0;this._rewardConfirmed=0;this._rewardConfirmedOther=0;this._rewardSent=0;this.dateActivity=0;this.referrals=new __WEBPACK_IMPORTED_MODULE_4__Pool_Data_Miner_Referrals__["a"](poolData,this);}
get addressWIF(){return __WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__["a"].toBase(__WEBPACK_IMPORTED_MODULE_5_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].generateAddressWIF(this.address));}
destroyPoolDataMiner(){this.poolData=undefined;for(let i=0;i<this.instances.length;i++)
this.instances[i].destroyPoolDataMinerInstance();this.instances=[];this.referrals.destroyPoolDataMinerReferrals();}
addInstance(socket,miner){if(socket.node.protocol.minerPool&&socket.node.protocol.minerPool.minerInstance&&socket.node.protocol.minerPool.miner===miner)
return socket.node.protocol.minerPool.minerInstance;let instance=this.findInstance(socket);if(instance)return instance;instance=this.findEmptyInstance(miner);if(instance){instance.socket=socket;return instance;}
instance=new __WEBPACK_IMPORTED_MODULE_3__Pool_Data_Miner_Instance__["a"](this,socket);this.instances.push(instance);return instance;}
findInstance(socket,returnPos=false){for(let i=0;i<this.instances.length;i++)
if(this.instances[i].socket===socket)
return returnPos?i:this.instances[i];return returnPos?-1:null;}
findEmptyInstance(miner){for(let i=0;i<this.instances.length;i++)
if(this.instances[i].miner===miner&&(!this.instances[i].socket||this.instances[i].socket.disconnected))
return this.instances[i];return;}
removeInstance(socket){let pos=this.findInstance(socket,true);if(pos!==-1){this.instances.splice(pos,1);return true;}
return false;}
serializeMiner(){let list=[];let version=0x03;list.push(__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].serializeNumber1Byte(version));list.push(this.address);list.push(__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].serializeNumber7Bytes(Math.max(0,Math.floor(this._rewardConfirmedOther))));list.push(__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].serializeNumber7Bytes(Math.max(0,Math.floor(this._rewardSent))));if(version>=0x03)
list.push(this.referrals.serializeReferrals());return Buffer.concat(list);}
deserializeMiner(buffer,offset){let version=__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].deserializeNumber1Bytes(buffer,offset,);offset+=1;this.address=__WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__["a"].substr(buffer,offset,__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH);offset+=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH;if(version===0x01){this.rewardTotal=0;offset+=7;}
this.rewardConfirmedOther=__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].deserializeNumber7Bytes(buffer,offset,);offset+=7;if(this.rewardConfirmedOther>10000000000)this.rewardConfirmedOther=0;this.rewardSent=__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].deserializeNumber7Bytes(buffer,offset,);offset+=7;this.instances=[];if(version===0x02){let len=__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].deserializeNumber4Bytes(buffer,offset,);offset+=4;this.publicKeys=[];for(let i=0;i<len;i++){this.publicKeys.push(__WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__["a"].substr(buffer,offset,__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].ADDRESSES.PUBLIC_KEY.LENGTH));offset+=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].ADDRESSES.PUBLIC_KEY.LENGTH+4;}}
if(version>=0x03)
offset=this.referrals.deserializeReferrals(buffer,offset);return offset;}
get minerHashesPerSecond(){let hashesPerSecond=0;for(let i=0;i<this.instances.length;i++)
hashesPerSecond+=this.instances[i].hashesPerSecond;return hashesPerSecond;}
get rewardConfirmedTotal(){return this._rewardConfirmed+this._rewardConfirmedOther}
set rewardTotal(newValue){this._rewardTotal=Math.max(0,newValue);}
set rewardConfirmed(newValue){this._rewardConfirmed=newValue;}
set rewardConfirmedOther(newValue){this._rewardConfirmedOther=Math.max(0,Math.floor(newValue));}
set rewardSent(newValue){this._rewardSent=Math.max(0,Math.floor(newValue));}
get rewardTotal(){return this._rewardTotal;}
get rewardConfirmed(){return this._rewardConfirmed;}
get rewardConfirmedOther(){return this._rewardConfirmedOther;}
get rewardSent(){return this._rewardSent;}
get isOnline(){return Math.abs(new Date().getTime()/1000-this.dateActivity)<=180;}}
__webpack_exports__["a"]=(PoolDataMiner);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_1_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__=__webpack_require__(3);class PoolDataMinerInstance{constructor(miner,socket){this.miner=miner;this._hashesPerSecond=500;this.socket=socket;this.work=undefined;this.lastBlockInformation=undefined;this._dateActivity=0;}
destroyPoolDataMinerInstance(){this.miner=undefined;this.lastBlockInformation=undefined;this.work=undefined;this.socket=undefined;}
get address(){return this.miner?this.miner.address:undefined;}
get addressWIF(){return this.miner.addressWIF;}
set hashesPerSecond(newValue){this._hashesPerSecond=newValue;}
get hashesPerSecond(){return this._hashesPerSecond;}
set dateActivity(newValue){this._dateActivity=newValue;}
set realHashesPerSecond(newValue){this._realHashesPerSecond=newValue;}
get realHashesPerSecond(){return this._realHashesPerSecond;}
get dateActivity(){return this._dateActivity;}}
__webpack_exports__["a"]=(PoolDataMinerInstance);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_1__Pool_Data_Miner_Referral__=__webpack_require__(1046);var __WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_3_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_4_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__=__webpack_require__(17);class PoolDataMinerReferrals{constructor(poolData,miner){this.poolData=poolData;this.miner=miner;this.referralLinkAddress=undefined;this.referralLinkMiner=undefined;this.referees=[];this._rewardReferralsTotal=0;this._rewardReferralsConfirmed=0;this._rewardReferralsSent=0;}
destroyPoolDataMinerReferrals(){this.poolData=undefined;this.miner=undefined;this.referralLinkMiner=undefined;for(let i=0;i<this.referees.length;i++)
this.referees[i].destroyPoolDataMinerReferral();this.referees=[];}
setReferralLink(address){if(typeof address==="string")
address=__WEBPACK_IMPORTED_MODULE_4_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].getUnencodedAddressFromWIF(address);if(!address||!Buffer.isBuffer(address)||address.length!==__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH)
return false;if(address.equals(this.miner.address))
return false;this.referralLinkAddress=address;this.findReferralLinkAddress();return true;}
refreshRefereeAddresses(){for(let i=0;i<this.referees.length;i++)
this.referees[i].findRefereeAddress();this.findReferralLinkAddress();}
findReferralLinkAddress(){if(this.referralLinkMiner)
return this.referralLinkMiner;if(!this.referralLinkAddress)return null;let linkMiner=this.poolData.findMiner(this.referralLinkAddress);if(!linkMiner)return;let referralLinkMiner=linkMiner.referrals.addReferral(this.miner.address,this.miner);if(!referralLinkMiner)this.referralLinkMiner=undefined;else this.referralLinkMiner=referralLinkMiner;return this.referralLinkMiner;}
serializeReferrals(){let list=[];list.push(__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].serializeNumber1Byte(this.referralLinkAddress?1:0));if(this.referralLinkAddress)
list.push(this.referralLinkAddress);list.push(__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].serializeNumber1Byte(this.referees.length>0?1:0));if(this.referees.length>0){list.push(__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].serializeNumber4Bytes(this.referees.length));for(let i=0;i<this.referees.length;i++)
list.push(this.referees[i].serializeMinerReferral());list.push(__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].serializeNumber7Bytes(this.rewardReferralsSent))}
return Buffer.concat(list);}
deserializeReferrals(buffer,offset){let hasReferralLink=buffer[offset];offset+=1;if(hasReferralLink===0x01){let address=__WEBPACK_IMPORTED_MODULE_2_common_utils_BufferExtended__["a"].substr(buffer,offset,__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH);offset+=__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH;if(!address.equals(this.miner.address))
this.referralLinkAddress=address;}
let hasReferrals=buffer[offset];offset+=1;this._rewardReferralsConfirmed=0;this._rewardReferralsTotal=0;if(hasReferrals===1){let length=__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].deserializeNumber4Bytes(buffer,offset);offset+=4;for(let i=0;i<length;i++){let referral=new __WEBPACK_IMPORTED_MODULE_1__Pool_Data_Miner_Referral__["a"](this.poolData,this,this.miner);offset=referral.deserializeMinerReferral(buffer,offset);if(!referral.refereeAddress.equals(this.miner.address))
this.referees.push(referral);}
this._rewardReferralsSent=__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].deserializeNumber7Bytes(buffer,offset);offset+=7;}else{this._rewardReferralsSent=0;}
return offset;}
addReferral(refereeAddress,refereeMiner){let referee=this.findReferral(refereeAddress);if(referee===null){referee=new __WEBPACK_IMPORTED_MODULE_1__Pool_Data_Miner_Referral__["a"](this.poolData,this,this.miner,refereeAddress,refereeMiner);this.referees.push(referee);}
return referee;}
findReferral(refereeAddress,returnPos=false){for(let i=0;i<this.referees.length;i++)
if(this.referees[i].refereeAddress.equals(refereeAddress))
return returnPos?i:this.referees[i];return returnPos?-1:null;}
deleteReferral(refereeAddress){let pos=this.findReferral(refereeAddress,true);if(pos===-1)return false;this.referees[pos].destroyPoolDataMinerReferral();this.referees.splice(pos,1);return true;}
set rewardReferralsTotal(newValue){this._rewardReferralsTotal=Math.max(0,newValue);}
get rewardReferralsTotal(){return this._rewardReferralsTotal;}
set rewardReferralsConfirmed(newValue){this._rewardReferralsConfirmed=Math.max(0,newValue);}
get rewardReferralsConfirmed(){return this._rewardReferralsConfirmed;}
set rewardReferralsSent(newValue){this._rewardReferralsSent=Math.max(0,Math.floor(newValue));}
get rewardReferralsSent(){return this._rewardReferralsSent;}
toJSON(){let referees=[];for(let i=0;i<this.referees.length;i++)
referees.push(this.referees[i].toJSON())
return{referees:referees,linkAddress:this.referralLinkAddress?__WEBPACK_IMPORTED_MODULE_4_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].generateAddressWIF(this.referralLinkAddress,false,true):'',linkAddressOnline:this.referralLinkAddress?this.referralLinkMiner.isOnline:undefined,total:Math.floor(this._rewardReferralsTotal),confirmed:Math.floor(this._rewardReferralsConfirmed),sent:Math.floor(this._rewardReferralsSent),}}}
__webpack_exports__["a"]=(PoolDataMinerReferrals);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_2_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_3_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__=__webpack_require__(17);class PoolDataMinerReferral{constructor(poolData,referrals,miner,refereeAddress,refereeMiner){this.referrals=referrals;this.poolData=poolData;this.miner=miner;this.refereeAddress=refereeAddress;this.refereeMiner=refereeMiner;if(this.refereeAddress)
this.findRefereeAddress();this._rewardReferralTotal=0;this._rewardReferralConfirmed=0;this._rewardReferralSent=0;}
destroyPoolDataMinerReferral(){this.poolData=undefined;this.miner=undefined;this.refereeMiner=undefined;}
serializeMinerReferral(){return Buffer.concat([this.refereeAddress,__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].serializeNumber7Bytes(this.rewardReferralSent),]);}
deserializeMinerReferral(buffer,offset){this.refereeAddress=__WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__["a"].substr(buffer,offset,__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH);offset+=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH;this._rewardReferralTotal=0;this._rewardReferralConfirmed=0;this._rewardReferralSent=__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].deserializeNumber7Bytes(buffer,offset);offset+=7;return offset;}
findRefereeAddress(){if(this.refereeMiner)
return this.refereeMiner;if(!this.refereeAddress)return null;let refereeMiner=this.poolData.findMiner(this.refereeAddress);if(!refereeMiner)throw{message:"couldn't find refereeAddress",refereeAddress:this.refereeAddress}
else this.refereeMiner=refereeMiner;return this.refereeMiner;}
set rewardReferralTotal(newValue){let prevVal=this._rewardReferralTotal;this._rewardReferralTotal=newValue;this.referrals.rewardReferralsTotal+=newValue-prevVal;}
get rewardReferralTotal(){return this._rewardReferralTotal;}
set rewardReferralConfirmed(newValue){let prevVal=this._rewardReferralConfirmed;this._rewardReferralConfirmed=newValue;this.referrals.rewardReferralsConfirmed+=newValue-prevVal;}
get rewardReferralConfirmed(){return this._rewardReferralConfirmed;}
set rewardReferralSent(newValue){let prevVal=this._rewardReferralSent;this._rewardReferralSent=Math.max(0,Math.floor(newValue));this.referrals.rewardReferralsSent+=newValue-prevVal;}
get rewardReferralSent(){return this._rewardReferralSent;}
toJSON(){return{total:Math.floor(this._rewardReferralTotal),confirmed:Math.floor(this._rewardReferralConfirmed),sent:Math.floor(this._rewardReferralSent),address:this.refereeAddress?__WEBPACK_IMPORTED_MODULE_3_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].generateAddressWIF(this.refereeAddress,false,true):'',online:this.refereeMiner?this.refereeMiner.isOnline:undefined,}}}
__webpack_exports__["a"]=(PoolDataMinerReferral);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_1_common_blockchain_global_Blockchain_Mining_Reward__=__webpack_require__(56);var __WEBPACK_IMPORTED_MODULE_2__Pool_Data_Block_Information_Miner_Instance__=__webpack_require__(1048);var __WEBPACK_IMPORTED_MODULE_3_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_4_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__=__webpack_require__(18);var __WEBPACK_IMPORTED_MODULE_7_common_blockchain_global_Blockchain_Genesis__=__webpack_require__(16);const BigNumber=__webpack_require__(84);class PoolDataBlockInformation{constructor(poolManagement,index,totalDifficultyPOW=new BigNumber(0),totalDifficultyPOS=new BigNumber(0),block,height){this.poolManagement=poolManagement;this.index=index;this.totalDifficultyPOW=totalDifficultyPOW;this.totalDifficultyPOS=totalDifficultyPOS;this.miningHeights={length:0,blocksPow:0,blocksPos:0,};this.blockInformationMinersInstances=[];this.blockInformationMinersInstancesPositionsFirst={};this.confirmations=0;this.confirmationsFailsTrials=0;this.confirmed=false;this.payout=false;if(height<40)height=1000;this.height=height;this.block=block;this.date=new Date().getTime();this.bestHash=undefined;this.timeRemaining=-1;this.calculateTargetDifficulty();}
destroyPoolDataBlockInformation(){this.poolManagement=undefined;for(let i=0;i<this.blockInformationMinersInstances.length;i++)
this.blockInformationMinersInstances[i].destroyBlockInformationMinerInstance();this.blockInformationMinersInstances=[];this.block=undefined;}
adjustBlockInformationDifficultyBestTarget(difficulty,prevDifficulty,height,add){if(typeof height==="string")height=Number.parseInt(height);let pos=__WEBPACK_IMPORTED_MODULE_7_common_blockchain_global_Blockchain_Genesis__["a"].isPoSActivated(height);let difference=difficulty.minus(prevDifficulty);if(!pos)this.totalDifficultyPOW=this.totalDifficultyPOW.plus(difference);else if(pos)this.totalDifficultyPOS=this.totalDifficultyPOS.plus(difference);this._calculateTimeRemaining();let prevMiningHeight=this.miningHeights[height];let miningHeightDifficulty=this.miningHeights[height]||BigNumber(0);if(!difference.isEqualTo(0)){this.miningHeights[height]=miningHeightDifficulty.plus(difference);if(!prevMiningHeight&&this.miningHeights[height].isGreaterThan(0)){this.miningHeights.length++;if(pos&&!__WEBPACK_IMPORTED_MODULE_4_consts_const_global__["a"].MINING_POOL.SKIP_POS_REWARDS)this.miningHeights.blocksPos++;else if(!pos&&!__WEBPACK_IMPORTED_MODULE_4_consts_const_global__["a"].MINING_POOL.SKIP_POW_REWARDS)this.miningHeights.blocksPow++;}
if(prevMiningHeight&&prevMiningHeight.isGreaterThan(0)&&this.miningHeights[height].isEqualTo(0)){delete this.miningHeights[height];this.miningHeights.length--;if(pos&&!__WEBPACK_IMPORTED_MODULE_4_consts_const_global__["a"].MINING_POOL.SKIP_POS_REWARDS)this.miningHeights.blocksPos--;else if(!pos&&!__WEBPACK_IMPORTED_MODULE_4_consts_const_global__["a"].MINING_POOL.SKIP_POW_REWARDS)this.miningHeights.blocksPow--;}}}
getRewardBlockInformationMinerInstance(minerInstance){let blockInformationMinerInstance=this._findBlockInformationMinerInstance(minerInstance);if(!blockInformationMinerInstance)throw{message:"blockInformation - miner instance was not found "};return blockInformationMinerInstance.reward;}
async serializeBlockInformation(){let buffers=[__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].serializeNumber1Byte(0x03),__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].serializeNumber4Bytes(this.height||500)];let minerInstances=[];if(this.blockInformationMinersInstances&&Array.isArray(this.blockInformationMinersInstances))
for(let blockInfoMinerInstance of this.blockInformationMinersInstances)
try{if(blockInfoMinerInstance.minerInstance&&blockInfoMinerInstance.reward>0)
minerInstances.push(blockInfoMinerInstance.serializeBlockInformationMinerInstance());}catch(exception){}
buffers.push(__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].serializeNumber4Bytes(minerInstances.length));buffers=buffers.concat(minerInstances);buffers.push(__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].serializeNumber1Byte(this.payout?1:0));let array=[];if(this.block&&this.block){try{array.push(__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].serializeNumber4Bytes(this.block.height));array.push(this.block.difficultyTargetPrev);array.push(await this.block.serializeBlock());}catch(exception){__WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__["a"].error("Error saving block",__WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__["a"].LOG_TYPE.POOLS,this.block?this.block.toJSON():'');console.log(exception);}}
buffers.push(__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].serializeNumber1Byte(array.length>0?1:0));buffers=buffers.concat(array);return Buffer.concat(buffers);}
async deserializeBlockInformation(buffer,offset=0){let version=__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].deserializeNumber1Bytes(buffer,offset,);offset+=1;if(version===0x00)return buffer.length;if(version>=0x01){let height=__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].deserializeNumber4Bytes(buffer,offset,);offset+=4;this.height=height;}
let length=__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].deserializeNumber4Bytes(buffer,offset,);offset+=4;this.blockInformationMinersInstances=[];this.totalDifficultyPOW=new BigNumber(0);this.totalDifficultyPOS=new BigNumber(0);console.info("Blocks Miner Instances",length);for(let i=0;i<length;i++){let blockInformationMinerInstance=new __WEBPACK_IMPORTED_MODULE_2__Pool_Data_Block_Information_Miner_Instance__["a"](this.poolManagement,this,undefined);this.blockInformationMinersInstances.push(blockInformationMinerInstance);offset=blockInformationMinerInstance.deserializeBlockInformationMinerInstance(buffer,offset,version);if(!blockInformationMinerInstance.minerInstance||!blockInformationMinerInstance.miner||(blockInformationMinerInstance.minerInstanceTotalDifficultyPOS.isEqualTo(0)&&blockInformationMinerInstance.minerInstanceTotalDifficultyPOW.isEqualTo(0)))
this.blockInformationMinersInstances.splice(this.blockInformationMinersInstances.length-1);}
this._calculateTimeRemaining();let payout=__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].deserializeNumber1Bytes(buffer,offset,);offset+=1;this.payout=payout===1;let hasBlock=__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].deserializeNumber1Bytes(buffer,offset,);offset+=1;if(hasBlock===1){this.block=await this.poolManagement.blockchain.blockCreator.createEmptyBlock(0,undefined);let height=__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].deserializeNumber4Bytes(buffer,offset,);offset+=4;let difficultyTargetPrev=__WEBPACK_IMPORTED_MODULE_3_common_utils_BufferExtended__["a"].substr(buffer,offset,32);offset+=32;try{offset=this.block.deserializeBlock(buffer,height,undefined,difficultyTargetPrev,offset,false,false);this.block._difficultyTargetPrev=difficultyTargetPrev;}catch(exception){this.block=undefined;__WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__["a"].error("Error Deserialize block",__WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);offset=buffer.length;}}
return offset;}
_findBlockInformationMinerInstance(minerInstance,pos=false){for(let i=0;i<this.blockInformationMinersInstances.length;i++)
if(this.blockInformationMinersInstances[i].minerInstance===minerInstance)
return pos?i:this.blockInformationMinersInstances[i];return pos?-1:null;}
addBlockInformationMinerInstance(minerInstance){if(!minerInstance)throw{message:"minerInstance is undefined"};let blockInformationMinerInstance=this.findFirstMinerInstance(minerInstance.address);if(!blockInformationMinerInstance){blockInformationMinerInstance=new __WEBPACK_IMPORTED_MODULE_2__Pool_Data_Block_Information_Miner_Instance__["a"](this.poolManagement,this,minerInstance,undefined,);this.blockInformationMinersInstances.push(blockInformationMinerInstance);}
return blockInformationMinerInstance;}
_deleteBlockInformationMinerInstance(minerInstance){let pos=minerInstance;if(typeof pos!=="number")
pos=this._findBlockInformationMinerInstance(minerInstance,true);if(typeof pos!=="number")
return;this.blockInformationMinersInstances[pos].cancelReward();this.blockInformationMinersInstances[pos].cancelDifficulties();let address=this.blockInformationMinersInstances[pos].address.toString("hex");if(this.blockInformationMinersInstancesPositionsFirst[address]===pos)
delete this.blockInformationMinersInstancesPositionsFirst[address];this.blockInformationMinersInstances.splice(pos,1);}
async calculateTargetDifficulty(){this.targetDifficulty=__WEBPACK_IMPORTED_MODULE_4_consts_const_global__["a"].BLOCKCHAIN.BLOCKS_MAX_TARGET.dividedBy(new BigNumber("0x"+(await this.poolManagement.blockchain.getDifficultyTarget()).toString("hex")));}
_calculateTimeRemaining(){let dTime=(new Date().getTime()-this.date)/1000;if(this.poolManagement.poolStatistics.poolHashes<=0)return 40;if(__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].blockchain.blocks.networkHashRate<=0)return 40;this.timeRemaining=Math.max(0,Math.floor(new BigNumber(Math.floor(__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].blockchain.blocks.networkHashRate)).dividedBy(this.poolManagement.poolStatistics.poolHashes).dividedBy(2).multipliedBy(__WEBPACK_IMPORTED_MODULE_4_consts_const_global__["a"].BLOCKCHAIN.DIFFICULTY.TIME_PER_BLOCK).toNumber()))}
set timeRemaining(newValue){this._timeRemaining=newValue;if(this.poolManagement.poolData.blocksInfo.length===0||this.poolManagement.poolData.lastBlockInformation===this)
this.poolManagement.poolStatistics.poolTimeRemaining=newValue;}
findFirstMinerInstance(minerAddress){if(typeof minerAddress==="string")minerAddress=Buffer.from(minerAddress,"hex");if(!Buffer.isBuffer(minerAddress)&&typeof minerAddress==="object")minerAddress=minerAddress.address;let minerAddressString=minerAddress.toString("hex");if(this.blockInformationMinersInstancesPositionsFirst[minerAddressString]===undefined)
for(let i=0;i<this.blockInformationMinersInstances.length;i++){let blockInformationMinersInstance=this.blockInformationMinersInstances[i];if(minerAddress.equals(blockInformationMinersInstance.address)){this.blockInformationMinersInstancesPositionsFirst[minerAddressString]=i;break;}}
return this.blockInformationMinersInstances[this.blockInformationMinersInstancesPositionsFirst[minerAddressString]];}}
__webpack_exports__["a"]=(PoolDataBlockInformation);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_2_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_3_common_blockchain_global_Blockchain_Mining_Reward__=__webpack_require__(56);var __WEBPACK_IMPORTED_MODULE_4_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_5_common_utils_helpers_Utils__=__webpack_require__(40);var __WEBPACK_IMPORTED_MODULE_6_common_blockchain_global_Blockchain_Genesis__=__webpack_require__(16);const BigNumber=__webpack_require__(84);class PoolDataBlockInformationMinerInstance{constructor(poolManagement,blockInformation,minerInstance){this.poolManagement=poolManagement;this.blockInformation=blockInformation;this.minerInstance=minerInstance;this._reward=0;this.rewardForReferral=0;this._prevRewardInitial=0;this.addresses=[];this.reset();this._lastHeight=60;this.socket=undefined;}
reset(){this.minerInstanceTotalDifficultyPOW=BigNumber(0);this.minerInstanceTotalDifficultyPOS=BigNumber(0);this._minerInstanceTotalDifficultiesPOW={};this._minerInstanceTotalDifficultiesPOS={};}
destroyBlockInformationMinerInstance(){this.poolManagement=undefined;this.blockInformation=undefined;this.minerInstance=undefined;}
async validateWorkHash(prevBlock,workHash){let hash=await prevBlock.computeHash.apply(prevBlock,Array.prototype.slice.call(arguments,2));if(!__WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__["a"].safeCompare(hash,workHash))return false;return true;}
async wasBlockMined(prevBlock){if((await prevBlock.computeHash.apply(prevBlock,Array.prototype.slice.call(arguments,1))).compare(prevBlock.difficultyTargetPrev)<=0)
return true;return false;}
calculateDifficulty(prevBlock,workDone){if(__WEBPACK_IMPORTED_MODULE_6_common_blockchain_global_Blockchain_Genesis__["a"].isPoSActivated(prevBlock.height)){workDone=workDone.toString();return new BigNumber(workDone);}else{return __WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].BLOCKCHAIN.BLOCKS_MAX_TARGET.dividedBy(new BigNumber("0x"+workDone.toString("hex")));}}
adjustDifficulty(prevBlock,difficulty,useDeltaTime=false,calculateReward=true,blockInformationFirstMinerInstance){let height=Number.parseInt(prevBlock.height);if(!blockInformationFirstMinerInstance)
blockInformationFirstMinerInstance=this.blockInformation.findFirstMinerInstance(this.address);if(__WEBPACK_IMPORTED_MODULE_6_common_blockchain_global_Blockchain_Genesis__["a"].isPoSActivated(height)){if(blockInformationFirstMinerInstance.penalty)
return;let prevDifficulty=blockInformationFirstMinerInstance._minerInstanceTotalDifficultiesPOS[height]||BigNumber(0);if(prevDifficulty.isLessThan(difficulty)){this.blockInformation.adjustBlockInformationDifficultyBestTarget(difficulty,prevDifficulty,height,true);blockInformationFirstMinerInstance.minerInstanceTotalDifficultyPOS=blockInformationFirstMinerInstance.minerInstanceTotalDifficultyPOS.plus(difficulty.minus(prevDifficulty));blockInformationFirstMinerInstance._minerInstanceTotalDifficultiesPOS[height]=difficulty;}}else{let prevDifficulty=blockInformationFirstMinerInstance._minerInstanceTotalDifficultiesPOW[height]||BigNumber(0);if(prevDifficulty.isLessThan(difficulty)){this.blockInformation.adjustBlockInformationDifficultyBestTarget(difficulty,prevDifficulty,height,true);blockInformationFirstMinerInstance.minerInstanceTotalDifficultyPOW=blockInformationFirstMinerInstance.minerInstanceTotalDifficultyPOW.plus(difficulty.minus(prevDifficulty));blockInformationFirstMinerInstance._minerInstanceTotalDifficultiesPOW[height]=difficulty;}}
if(calculateReward)
this.calculateReward(useDeltaTime);this._lastHeight=Math.max(this._lastHeight,height);}
cancelDifficulties(workType){if(!workType||workType==="pow"){for(let height in this._minerInstanceTotalDifficultiesPOW)
this.blockInformation.adjustBlockInformationDifficultyBestTarget(BigNumber(0),this._minerInstanceTotalDifficultiesPOW[height],height,false);this._minerInstanceTotalDifficultiesPOW={};this.minerInstanceTotalDifficultyPOW=BigNumber(0);}
if(!workType||workType==="pos"){for(let height in this._minerInstanceTotalDifficultiesPOS)
this.blockInformation.adjustBlockInformationDifficultyBestTarget(BigNumber(0),this._minerInstanceTotalDifficultiesPOS[height],height,false);this._minerInstanceTotalDifficultiesPOS={};this.minerInstanceTotalDifficultyPOS=BigNumber(0);}}
calculateReward(useDeltaTime=false){let ratio=1;if(useDeltaTime){let diff=Math.floor((new Date().getTime()-this.blockInformation.date)/1000);if(diff>0&&this.blockInformation._timeRemaining>0)
if(diff+this.blockInformation._timeRemaining!==0)
ratio=new BigNumber(diff).dividedBy(diff+this.blockInformation._timeRemaining*10);else
ratio=new BigNumber(diff);if(ratio>1)ratio=1;}
let rewardPOW=BigNumber(0);if(this.blockInformation.totalDifficultyPOW.isGreaterThan(0))
rewardPOW=this.minerInstanceTotalDifficultyPOW.dividedBy(this.blockInformation.totalDifficultyPOW).multipliedBy(this.blockInformation.miningHeights.blocksPow).dividedBy(this.blockInformation.miningHeights.blocksPow+this.blockInformation.miningHeights.blocksPos);let rewardPOS=BigNumber(0);if(this.blockInformation.totalDifficultyPOS.isGreaterThan(0))
rewardPOS=this.minerInstanceTotalDifficultyPOS.dividedBy(this.blockInformation.totalDifficultyPOS).multipliedBy(this.blockInformation.miningHeights.blocksPos).dividedBy(this.blockInformation.miningHeights.blocksPow+this.blockInformation.miningHeights.blocksPos);let rewardDifficulty=rewardPOW.plus(rewardPOS);let reward=rewardDifficulty.multipliedBy(ratio).multipliedBy(__WEBPACK_IMPORTED_MODULE_3_common_blockchain_global_Blockchain_Mining_Reward__["a"].getReward(this._lastHeight)).multipliedBy(1-this.poolManagement.poolSettings.poolFee).toNumber();let prevReward;if(this.miner.referrals.referralLinkMiner&&this.poolManagement.poolSettings.poolReferralFee>0){this.rewardForReferral=reward*this.poolManagement.poolSettings.poolReferralFee;this.miner.referrals.referralLinkMiner.rewardReferralTotal+=this.rewardForReferral-this._prevRewardInitial*this.poolManagement.poolSettings.poolReferralFee;this.reward=Math.max(0,Math.floor(reward*(1-this.poolManagement.poolSettings.poolReferralFee)));prevReward=Math.max(0,Math.floor(this._prevRewardInitial*(1-this.poolManagement.poolSettings.poolReferralFee)));}else{this.reward=Math.max(0,Math.floor(reward));prevReward=Math.max(0,Math.floor(this._prevRewardInitial));}
this.minerInstance.miner.rewardTotal+=this._reward-prevReward;this._prevRewardInitial=reward;return this._reward;}
cancelReward(){this.minerInstance.miner.rewardTotal-=this.reward;this.reward=0;if(this.miner.referrals.referralLinkMiner&&this.poolManagement.poolSettings.poolReferralFee>0)
this.miner.referrals.referralLinkMiner.rewardReferralTotal-=this._prevRewardInitial*(this.poolManagement.poolSettings.poolReferralFee);this._prevRewardInitial=0;}
serializeBlockInformationMinerInstance(){let buffers=[this.minerInstance.address,];let pow=[],pos=[];for(let height in this._minerInstanceTotalDifficultiesPOW){pow.push(__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].serializeNumber3Bytes(Number.parseInt(height)));pow.push(__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].serializeBigNumber(this._minerInstanceTotalDifficultiesPOW[height]));}
buffers.push(__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].serializeNumber2Bytes(pow.length/2));buffers=buffers.concat(pow);for(let height in this._minerInstanceTotalDifficultiesPOS){pos.push(__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].serializeNumber3Bytes(Number.parseInt(height)));pos.push(__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].serializeBigNumber(this._minerInstanceTotalDifficultiesPOS[height]));}
buffers.push(__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].serializeNumber2Bytes(pos.length/2));buffers=buffers.concat(pos);return Buffer.concat(buffers,);}
deserializeBlockInformationMinerInstance(buffer,offset=0,version){let address;if(version>=0x02){address=__WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__["a"].substr(buffer,offset,__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH);offset+=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH;}
let miner=this.poolManagement.poolData.findMiner(address);if(miner!==null)
this.minerInstance=miner.addInstance({_diff:Math.random(),node:{protocol:{}}});if(version===0x02){let answer=__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].deserializeBigNumber(buffer,offset);offset=answer.newOffset;}else if(version===0x03){let powLength=__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].deserializeNumber2Bytes(buffer,offset);offset+=2;for(let i=0;i<powLength;i++){let height=__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].deserializeNumber3Bytes(buffer,offset);offset+=3;let difficultyBigNumber=__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].deserializeBigNumber(buffer,offset);offset=difficultyBigNumber.newOffset;let difficulty=difficultyBigNumber.number;if(difficulty.isGreaterThan(0)&&this.minerInstance)
this.adjustDifficulty({height:height},difficulty,false,false);}
let posLength=__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].deserializeNumber2Bytes(buffer,offset);offset+=2;for(let i=0;i<posLength;i++){let height=__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].deserializeNumber3Bytes(buffer,offset);offset+=3;let difficultyBigNumber=__WEBPACK_IMPORTED_MODULE_0_common_utils_Serialization__["a"].deserializeBigNumber(buffer,offset);offset=difficultyBigNumber.newOffset;let difficulty=difficultyBigNumber.number;if(difficulty.isGreaterThan(0)&&this.minerInstance)
this.adjustDifficulty({height:height},difficulty,false,false);}}
return offset;}
get addressWIF(){return this.minerInstance.miner.addressWIF;}
get address(){return this.minerInstance.miner?this.minerInstance.miner.address:undefined;}
get minerAddress(){return this.address;}
get miner(){return this.minerInstance.miner;}
set workHash(newValue){this._workHash=newValue;if(!this.blockInformation.bestHash||newValue.compare(this.blockInformation.bestHash)<=0)
this.blockInformation.bestHash=newValue;}
get workHash(){return this._workHash;}
set reward(newValue){this._reward=newValue;}
get reward(){return this._reward;}}
__webpack_exports__["a"]=(PoolDataBlockInformationMinerInstance);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_mining_pools_common_Pool_Protocol_List__=__webpack_require__(180);var __WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__=__webpack_require__(18);class PoolDataConnectedMinerInstances extends __WEBPACK_IMPORTED_MODULE_0_common_mining_pools_common_Pool_Protocol_List__["a"]{constructor(poolManagement){super();this.poolManagement=poolManagement;this.connectedMinerInstances=this.list;}
startPoolDataConnectedMinerInstances(){if(!this._deleteUnresponsiveMinersInterval)
this._deleteUnresponsiveMinersInterval=setTimeout(this._deleteUnresponsiveMiners.bind(this),20000);}
stopPoolDataConnectedMinerInstances(){clearTimeout(this._deleteUnresponsiveMinersInterval);this._deleteUnresponsiveMinersInterval=undefined;}
async _deleteUnresponsiveMiners(){let count=0;try{let time=new Date().getTime()/1000;for(let i=this.connectedMinerInstances.length-1;i>=0;i--){if(!this.connectedMinerInstances[i]||!this.connectedMinerInstances[i].socket||this.connectedMinerInstances[i].socket.disconnected)
this.connectedMinerInstances.splice(i,1);else
if(time-this.connectedMinerInstances[i].dateActivity>480){try{let socket=this.connectedMinerInstances[i].socket;if(!this.poolManagement.poolSettings.poolUsePoolServers){__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].info("Socket was disconnected for not having activity: "+time-this.connectedMinerInstances[i].dateActivity,__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);this.connectedMinerInstances[i].socket.disconnect();}
if(this.connectedMinerInstances[i]&&socket===this.connectedMinerInstances[i].socket)
this.connectedMinerInstances.splice(i,1);count++;if(count%20===0){await this.poolManagement.blockchain.sleep(500);__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].info("_deleteUnresponsiveMiners batch disconnected",__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].LOG_TYPE.POOLS,count);}}catch(exception){__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].error("_deleteUnresponsiveMiners raised an error",__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].LOG_TYPE.POOLS,exception);}}}}catch(err){}
setTimeout(this._deleteUnresponsiveMiners.bind(this),20000);}
findElement(socket){for(let i=0;i<this.list.length;i++)
if(this.list[i].socket===socket||this.list[i]===socket)
return i;return-1;}
deleteElement(socket){for(let i=this.list.length-1;i>=0;i--)
if(this.list[i].socket===socket||this.list[i]===socket)
this.list.splice(i,1);}}
__webpack_exports__["a"]=(PoolDataConnectedMinerInstances);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__AddressBanList__=__webpack_require__(145);var __WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__=__webpack_require__(17);class AddressBanObject{constructor(address){this.address=address;this.addressWIF=__WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].generateAddressWIF(address,false,true);this.timeStamp=new Date().getTime();this.banTime=0;this.banTimestamp=0;this.banReasons=[];}
isBanned(){let timestamp=new Date().getTime();if((timestamp-this.banTimestamp)<this.banTime)
return true;return false;}
increaseBanTrials(banTime,banReason){let timestamp=new Date().getTime();if((timestamp-this.banTimestamp)>=(1.5*this.banTime)){this.upLiftBan();}
if(this.banTimestamp===0)
this.banTimestamp=timestamp;this.banTime=banTime;this.banReasons.push(banReason);}
upLiftBan(){this.timeStamp=0;this.banTimestamp=0;this.banReasons=[];}}
__webpack_exports__["a"]=(AddressBanObject);}),(function(module,exports,__webpack_require__){(function(Buffer){var fs=__webpack_require__(62),EventEmitter=__webpack_require__(104).EventEmitter,util=__webpack_require__(25);var readLine=module.exports=function(file,opts){if(!(this instanceof readLine))return new readLine(file,opts);EventEmitter.call(this);opts=opts||{};opts.maxLineLength=opts.maxLineLength||4096;opts.retainBuffer=!!opts.retainBuffer;var self=this,lineBuffer=new Buffer(opts.maxLineLength),lineLength=0,lineCount=0,byteCount=0,emit=function(lineCount,byteCount){try{var line=lineBuffer.slice(0,lineLength);self.emit('line',opts.retainBuffer?line:line.toString(),lineCount,byteCount);}catch(err){self.emit('error',err);}finally{lineLength=0;}};this.input=('string'===typeof file)?fs.createReadStream(file,opts):file;this.input.on('open',function(fd){self.emit('open',fd);}).on('data',function(data){for(var i=0;i<data.length;i++){if(data[i]==10||data[i]==13){if(data[i]==10){lineCount++;emit(lineCount,byteCount);}}else{lineBuffer[lineLength]=data[i];lineLength++;}
byteCount++;}}).on('error',function(err){self.emit('error',err);}).on('end',function(){if(lineLength){lineCount++;emit(lineCount,byteCount);}
self.emit('end');}).on('close',function(){self.emit('close');});};util.inherits(readLine,EventEmitter);}.call(exports,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_2_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_3_common_utils_coins_WebDollar_Coins__=__webpack_require__(32);var __WEBPACK_IMPORTED_MODULE_4_common_utils_Revert_Actions_Revert_Actions__=__webpack_require__(118);var __WEBPACK_IMPORTED_MODULE_5_common_sockets_protocol_propagation_Node_Blockchain_Propagation__=__webpack_require__(119);var __WEBPACK_IMPORTED_MODULE_6__Pool_Work__=__webpack_require__(1053);var __WEBPACK_IMPORTED_MODULE_7_common_events_Status_Events__=__webpack_require__(12);var __WEBPACK_IMPORTED_MODULE_8__Pool_New_Work_Management__=__webpack_require__(1054);var __WEBPACK_IMPORTED_MODULE_9_common_blockchain_global_Blockchain_Genesis__=__webpack_require__(16);var __WEBPACK_IMPORTED_MODULE_10__Pool_Work_Validation__=__webpack_require__(1055);class PoolWorkManagement{constructor(poolManagement,blockchain){this.poolManagement=poolManagement;this.blockchain=blockchain;this.poolNewWorkManagement=new __WEBPACK_IMPORTED_MODULE_8__Pool_New_Work_Management__["a"](poolManagement,this,blockchain);this.poolWorkValidation=new __WEBPACK_IMPORTED_MODULE_10__Pool_Work_Validation__["a"](poolManagement,this);this.poolWork=new __WEBPACK_IMPORTED_MODULE_6__Pool_Work__["a"](poolManagement,blockchain);this._rewardedAddresses={};}
startPoolWorkManagement(){this.poolWork.startGarbageCollector();this.poolWorkValidation.startPoolWorkValidation();}
stopPoolWorkManagement(){this.poolWorkValidation.stopPoolWorkValidation();this.poolWork.stopGarbageCollector();}
async getWork(minerInstance,blockInformationMinerInstance){if(!minerInstance)throw{message:"minerInstance is undefined"};let hashes=minerInstance.hashesPerSecond;if(!hashes)hashes=500;if(!blockInformationMinerInstance)
blockInformationMinerInstance=this.poolManagement.poolData.lastBlockInformation.addBlockInformationMinerInstance(minerInstance);await this.poolWork.lastBlockPromise;if(!this.poolWork.lastBlock||(this.poolWork.lastBlockNonce+hashes)>0xFFFFFFFF)
await this.poolWork.getNextBlockForWork();else if(!this.blockchain.semaphoreProcessing.processing&&(this.poolWork.lastBlock.height!==this.blockchain.blocks.length||!this.poolWork.lastBlock.hashPrev.equals(this.blockchain.blocks.last.hash)))
await this.poolWork.getNextBlockForWork();this.poolWork.lastBlockElement.instances[minerInstance.socket.node.sckAddress.uuid]=this.poolWork.lastBlock;let balances;let isPOS=__WEBPACK_IMPORTED_MODULE_9_common_blockchain_global_Blockchain_Genesis__["a"].isPoSActivated(this.poolWork.lastBlock.height);if(isPOS){balances=[];for(let i=0;i<minerInstance.addresses.length;i++)
balances.push(this._getMinerBalance(minerInstance.addresses[i]));balances=await Promise.all(balances);}
let answer={h:this.poolWork.lastBlock.height,t:this.poolWork.lastBlock.difficultyTargetPrev,s:this.poolWork.lastBlockSerialization,I:this.poolWork.lastBlockId,m:this.poolWork.lastBlock.timeStamp,start:isPOS?0:this.poolWork.lastBlockNonce,end:isPOS?0:(this.poolWork.lastBlockNonce+hashes),b:isPOS?balances:undefined,};if(!isPOS)
this.poolWork.lastBlockNonce+=hashes;minerInstance.lastBlockInformation=blockInformationMinerInstance;minerInstance.workBlock=this.poolWork.lastBlock;minerInstance.dateActivity=new Date().getTime()/1000;blockInformationMinerInstance.workBlock=this.poolWork.lastBlock;if(this.poolManagement.poolSettings.poolUseSignatures){let message=Buffer.concat([this.poolWork.lastBlockSerialization,__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeNumber4Bytes(answer.start),__WEBPACK_IMPORTED_MODULE_1_common_utils_Serialization__["a"].serializeNumber4Bytes(answer.end)]);answer.sig=this.poolManagement.poolSettings.poolDigitalSign(message);}
return answer;}
async processWork(minerInstance,work,prevBlock){let result=false;try{let wasBlockMined;if(!minerInstance)throw{message:"minerInstance is undefined"};if(!work||typeof work!=="object")throw{message:"work is undefined"};if(!Buffer.isBuffer(work.hash)||work.hash.length!==__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].BLOCKCHAIN.BLOCKS_POW_LENGTH)throw{message:"hash is invalid"};if(typeof work.nonce!=="number")throw{message:"nonce is invalid"};let blockInformationMinerInstance=this.poolManagement.poolData.lastBlockInformation.addBlockInformationMinerInstance(minerInstance);if(!prevBlock)prevBlock=blockInformationMinerInstance.workBlock;if(!prevBlock)throw{message:"miner instance - no block"};let isPos=__WEBPACK_IMPORTED_MODULE_9_common_blockchain_global_Blockchain_Genesis__["a"].isPoSActivated(prevBlock.height);let args=[];if(isPos){work.nonce=0;work.pos.balance=await this._getMinerBalance(work.pos.posMinerAddress,prevBlock);args=[work.pos.timestamp,work.pos.posMinerAddress,work.pos.balance];}else{args=[work.nonce];}
if(false===await blockInformationMinerInstance.validateWorkHash.apply(blockInformationMinerInstance,[prevBlock,work.hash].concat(args),))
if(!isPos)
throw{message:"block was incorrectly mined "+(isPos?"pos":"pow"),work:work};if(Math.random()<0.001)
console.log("Work: ",work);if(isPos){prevBlock.nonce=0;prevBlock.posSignature=work.pos.posSignature;prevBlock.posMinerAddress=work.pos.posMinerAddress;prevBlock.posMinerPublicKey=work.pos.posMinerPublicKey;prevBlock.timeStamp=work.pos.timestamp;prevBlock.verifyPOSSignature();if(!work.pos.posMinerAddress.equals(minerInstance.address))
throw{message:"work.pos.posMinerAddress doesn't match",posMinerAddress:work.pos.posMinerAddress,minerInstance:minerInstance.address,}}
let blocksDifference=isPos?5:3;if(this.blockchain.blocks.length-blocksDifference>prevBlock.height+1)
throw{message:"pool: block is already too old"};if(work.result){try{wasBlockMined=await blockInformationMinerInstance.wasBlockMined.apply(blockInformationMinerInstance,[prevBlock].concat(args));}catch(exception){wasBlockMined=false;if(!isPos)
throw exception;}
if(wasBlockMined){console.warn("POOL: A block could be mined",prevBlock.height," nonce (",work.nonce+")",work.hash.toString("hex"),prevBlock.data.minerAddress.toString("hex"));this.blockchain.mining.timeMinedBlock=new Date().getTime();prevBlock.hash=work.hash;prevBlock.nonce=work.nonce;if(isPos){prevBlock.nonce=0;prevBlock.posSignature=work.pos.posSignature;prevBlock.posMinerAddress=work.pos.posMinerAddress;prevBlock.posMinerPublicKey=work.pos.posMinerPublicKey;prevBlock.timeStamp=work.pos.timestamp;try{await prevBlock._validateBlockTimeStamp();}catch(exception){console.error("POOL: block timestamp raised an error",exception);throw exception;}
console.warn("POOL: A block passed timestamp validation",prevBlock.height);}
let revertActions=new __WEBPACK_IMPORTED_MODULE_4_common_utils_Revert_Actions_Revert_Actions__["a"](this.blockchain);let block;try{let serialization=await prevBlock.serializeBlock();block=await this.blockchain.blockCreator.createEmptyBlock(prevBlock.height,undefined);block.deserializeBlock(serialization,prevBlock.height,prevBlock.reward,await this.blockchain.getDifficultyTarget(prevBlock.height-1));if(await this.blockchain.semaphoreProcessing.processSempahoreCallback(()=>{if(this.blockchain.blocks.length!==block.height)
throw{message:"pool: block is already too old for processing"};block.hashChain=block.calculateChainHash();return this.blockchain.includeBlockchainBlock(block,false,"all",true,revertActions);})===false)throw{message:"Mining2 returned false"};__WEBPACK_IMPORTED_MODULE_5_common_sockets_protocol_propagation_Node_Blockchain_Propagation__["a"].propagateLastBlockFast(block);await block.data.transactions.confirmTransactions(block.height);console.warn("----------------------------------------------------------------------------");console.warn("----------------------------------------------------------------------------");console.warn("WebDollar Block was mined in Pool 2 ",prevBlock.height," nonce (",work.nonce+")",work.hash.toString("hex")," reward",(prevBlock.reward/__WEBPACK_IMPORTED_MODULE_3_common_utils_coins_WebDollar_Coins__["a"].WEBD),"WEBD",prevBlock.data.minerAddress.toString("hex"));console.warn("----------------------------------------------------------------------------");console.warn("----------------------------------------------------------------------------");let blockInformation=blockInformationMinerInstance.blockInformation;try{blockInformation.block=block;blockInformation.height=block.height;}catch(exception){console.error("blockInformation block",exception);}
this.poolManagement.poolData.addBlockInformation();__WEBPACK_IMPORTED_MODULE_7_common_events_Status_Events__["a"].emit("blockchain/new-blocks",{});}catch(exception){console.error("PoolWork include raised an exception",exception);await revertActions.revertOperations();}}}else{if(__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].DEBUG)
console.log("valid work, but not solution",prevBlock.height,work.pos?work.pos.balance:'');}
let storeDifficulty;if(!__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINING_POOL.SKIP_POS_REWARDS&&isPos)storeDifficulty=true;else if(!__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINING_POOL.SKIP_POW_REWARDS&&!isPos)storeDifficulty=true;if(storeDifficulty){let workDone;if(isPos)workDone=work.pos.balance;else{let target=prevBlock.difficultyTargetPrev.toString("hex").substr(2)+"FF";target=Buffer.from(target,"hex");if(work.hash.compare(target)<=0){work.hash=target;work.nonce=-1;}
workDone=work.hash;}
let difficulty=blockInformationMinerInstance.calculateDifficulty(prevBlock,workDone);blockInformationMinerInstance.adjustDifficulty(prevBlock,difficulty,true,true);if(isPos&&!__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].DEBUG)
for(let i=0;i<this.poolManagement.poolData.blocksInfo.length;i++){let oldBlockInfo=this.poolManagement.poolData.blocksInfo[i];if(oldBlockInfo.payoutTransaction||oldBlockInfo.payout)continue;for(let height in oldBlockInfo.miningHeights)
if(typeof oldBlockInfo.miningHeights[height]==="object"&&oldBlockInfo.miningHeights[height].isGreaterThan(0))
if(__WEBPACK_IMPORTED_MODULE_9_common_blockchain_global_Blockchain_Genesis__["a"].isPoSActivated(height)){let oldBlockInformationMinerInstance=oldBlockInfo.addBlockInformationMinerInstance(blockInformationMinerInstance.minerInstance);oldBlockInformationMinerInstance.adjustDifficulty({height:height},difficulty,true,true,oldBlockInformationMinerInstance);}}
this.poolManagement.poolStatistics.addStatistics(difficulty,minerInstance);}
result=true;}catch(exception){if(exception.message==="block was incorrectly mined"&&Math.random()<0.3)
console.error("Pool Work Management raised an error",exception);else if(Math.random()<0.05)
console.error("error pool mining",exception)}
return{result:result,reward:minerInstance.miner.rewardTotal,confirmed:minerInstance.miner.rewardConfirmedTotal,refReward:minerInstance.miner.referrals.rewardReferralsTotal,refConfirmed:minerInstance.miner.referrals.rewardReferralsConfirmed}}
async _getMinerBalance(address,prevBlock=this.poolWork.lastBlock){let balance=this.blockchain.accountantTree.getBalance(address);if(!balance)balance=0;let blocks=[],end=Math.max(0,prevBlock.height-1-__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].BLOCKCHAIN.POS.MINIMUM_POS_TRANSFERS);for(let i=prevBlock.height-1;i>=end;i--)
blocks.push(this.blockchain.getBlock(i));blocks=await Promise.all(blocks);for(let block of blocks){if(!block)continue;for(let tx of block.data.transactions.transactions){for(let from of tx.from.addresses)
if(from.unencodedAddress.equals(address))
balance+=from.amount;for(let to of tx.to.addresses)
if(to.unencodedAddress.equals(address))
balance-=to.amount;}}
return balance;}}
__webpack_exports__["a"]=(PoolWorkManagement);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_1_common_utils_helpers_Utils__=__webpack_require__(40);var __WEBPACK_IMPORTED_MODULE_2_common_blockchain_global_Blockchain_Genesis__=__webpack_require__(16);var __WEBPACK_IMPORTED_MODULE_3_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_4_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_5_common_events_Status_Events__=__webpack_require__(12);var __WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__=__webpack_require__(18);class PoolWork{constructor(poolManagement,blockchain){this.poolManagement=poolManagement;this.blockchain=blockchain;this.lastBlockPromise=undefined;this.lastBlock=undefined;this.lastBlockNonce=0;this.lastBlockId=0;this._blocksList=[];}
startGarbageCollector(){if(!this._garbageCollectorInterval)
this._garbageCollectorInterval=setTimeout(this._garbageCollector.bind(this),30000);}
stopGarbageCollector(){if(this._garbageCollectorInterval)clearTimeout(this._garbageCollectorInterval);this._garbageCollectorInterval=undefined;}
findBlockById(blockId,blockHeight){for(let i=0;i<this._blocksList.length;i++)
if((blockId&&this._blocksList[i].blockId===blockId)||(this._blocksList[i].block.height===blockHeight)){return this._blocksList[i].block;}
return undefined;}
getNextBlockForWork(){if(!__WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__["a"].synchronized)
throw{message:"Blockchain is not yet synchronized"};if(this.lastBlockPromise&&this.lastBlockPromise.isPending())
return this.lastBlockPromise;this.lastBlockPromise=__WEBPACK_IMPORTED_MODULE_1_common_utils_helpers_Utils__["a"].makeQuerablePromise(new Promise(async(resolve)=>{this.lastBlock=await this.blockchain.mining.getNextBlock();this.lastBlockNonce=0;this.lastBlock.hash=new Buffer(__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].BLOCKCHAIN.BLOCKS_POW_LENGTH);if(__WEBPACK_IMPORTED_MODULE_2_common_blockchain_global_Blockchain_Genesis__["a"].isPoSActivated(this.lastBlock.height)){this.lastBlock.posMinerPublicKey=new Buffer(__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].ADDRESSES.PUBLIC_KEY.LENGTH);this.lastBlock.posSignature=new Buffer(__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].TRANSACTIONS.SIGNATURE_SCHNORR.LENGTH);}
let error=false;try{this.lastBlockSerialization=await this.lastBlock.serializeBlock(true);}catch(exception){error=true;}
this.lastBlockId++;this.lastBlockElement={block:this.lastBlock,blockId:this.lastBlockId,instances:{},};this._blocksList.push(this.lastBlockElement);if(error){resolve(false);console.error("Error creating Pool block");return;}
if(!this.blockchain.semaphoreProcessing.processing&&(this.lastBlock.height!==this.blockchain.blocks.length||!this.lastBlock.hashPrev.equals(this.blockchain.blocks.last.hash))){if(__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].DEBUG)
console.error("ERROR!!! POOL MINING LAST BLOCK WAS CHANGED. HASHPREV DOESN'T MATCH blocks.last.hash");resolve(false);return;}
resolve(true);}));return this.lastBlockPromise;}
async _garbageCollector(){try{let time=(new Date().getTime()/1000)-__WEBPACK_IMPORTED_MODULE_2_common_blockchain_global_Blockchain_Genesis__["a"].timeStampOffset;let destroyed=0;for(let i=0;i<this._blocksList.length;i++){let found=false;for(let j=0;j<this.poolManagement.poolData.blocksInfo.length;j++)
if(this.poolManagement.poolData.blocksInfo[j].block&&this._blocksList[i].block&&(this.poolManagement.poolData.blocksInfo[j].block===this._blocksList[i].block||(this._blocksList[i].block.hash&&this.poolManagement.poolData.blocksInfo[j].block.hash.equals(this._blocksList[i].block.hash)))){found=true;break;}
if(!found)
if(this._blocksList[i].block!==this.lastBlock&&((time-this._blocksList[i].block.timeStamp)>200*__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].BLOCKCHAIN.DIFFICULTY.TIME_PER_BLOCK)&&this._blocksList[i].block.height<this.blockchain.blocks.length-100){__WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__["a"].warn("==========================================",__WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__["a"].warn("GARBAGE COLLECTOR DELETE BLOCK "+this._blocksList[i].blockId+" height "+this._blocksList[i].block.height,__WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__["a"].warn("==========================================",__WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);for(let key in this._blocksList[i].instances)
this._blocksList[i].instances[key].workBlock=undefined;this._blocksList[i].block=undefined;this._blocksList[i].instances=undefined;this._blocksList.splice(i,1);destroyed++;if(destroyed%10===0)
await this.blockchain.sleep(100);i--;}}}catch(exception){}
this._garbageCollectorInterval=setTimeout(this._garbageCollector.bind(this),30000);}}
__webpack_exports__["a"]=(PoolWork);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_events_Status_Events__=__webpack_require__(12);var __WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_2_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_3_common_utils_logging_Log__=__webpack_require__(18);var __WEBPACK_IMPORTED_MODULE_4_consts_const_global__=__webpack_require__(2);class PoolNewWorkManagement{constructor(poolManagement,poolWorkManagement,blockchain){this.poolManagement=poolManagement;this.poolWorkManagement=poolWorkManagement;this.blockchain=blockchain;this._workInProgressIndex=0;__WEBPACK_IMPORTED_MODULE_0_common_events_Status_Events__["a"].on("blockchain/new-blocks",async(data)=>{if(!this.poolManagement._poolStarted)return;if(!__WEBPACK_IMPORTED_MODULE_2_main_blockchain_Blockchain__["a"].synchronized)return;this._workInProgressIndex++;try{await this.propagateNewWork(this._workInProgressIndex);}catch(exception){__WEBPACK_IMPORTED_MODULE_3_common_utils_logging_Log__["a"].error("propagateNewWork raised a total error",__WEBPACK_IMPORTED_MODULE_3_common_utils_logging_Log__["a"].LOG_TYPE.POOLS,exception);}});setTimeout(this.propagateNewWork.bind(this,this._workInProgressIndex),20000)}
async propagateNewWork(workInProgressIndex){__WEBPACK_IMPORTED_MODULE_3_common_utils_logging_Log__["a"].info("   Connected Miners: "+this.poolManagement.poolData.connectedMinerInstances.list.length,__WEBPACK_IMPORTED_MODULE_3_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);let count=0;for(let i=0;i<this.poolManagement.poolData.connectedMinerInstances.list.length;i++){if(workInProgressIndex!==this._workInProgressIndex){__WEBPACK_IMPORTED_MODULE_3_common_utils_logging_Log__["a"].info("   PROPAGATE NEW WORK returned: "+this._workInProgressIndex+" "+workInProgressIndex,__WEBPACK_IMPORTED_MODULE_3_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);return;}
try{if(this._sendNewWork(this.poolManagement.poolData.connectedMinerInstances.list[i],undefined,workInProgressIndex)===false)continue;}catch(exception){__WEBPACK_IMPORTED_MODULE_3_common_utils_logging_Log__["a"].error("propagateNewWork raised an error",__WEBPACK_IMPORTED_MODULE_3_common_utils_logging_Log__["a"].LOG_TYPE.POOLS,exception);continue;}
count++;if(__WEBPACK_IMPORTED_MODULE_4_consts_const_global__["a"].MINING_POOL.CONNECTIONS.PUSH_WORK_MAX_CONNECTIONS_CONSECUTIVE!==0&&(count%__WEBPACK_IMPORTED_MODULE_4_consts_const_global__["a"].MINING_POOL.CONNECTIONS.PUSH_WORK_MAX_CONNECTIONS_CONSECUTIVE===0))await this.blockchain.sleep(10);}
__WEBPACK_IMPORTED_MODULE_3_common_utils_logging_Log__["a"].info("   Work sent to "+count,__WEBPACK_IMPORTED_MODULE_3_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);}
async _sendNewWork(minerInstance,blockInformationMinerInstance,workInProgressIndex){try{if(minerInstance.socket.disconnected)
return false;if(!blockInformationMinerInstance)blockInformationMinerInstance=minerInstance.lastBlockInformation;if(!blockInformationMinerInstance)return false;let newWork=await this.poolWorkManagement.getWork(minerInstance,blockInformationMinerInstance);if(workInProgressIndex!==this._workInProgressIndex)return false;if(minerInstance.lastWork&&newWork.s.equals(minerInstance.lastWork.s))return false;minerInstance.socket.node.sendRequest("mining-pool/new-work",{work:newWork,reward:minerInstance.miner.rewardTotal||0,confirmed:minerInstance.miner.rewardConfirmedTotal||0,refReward:minerInstance.miner.referrals.rewardReferralsTotal||0,refConfirmed:minerInstance.miner.referrals.rewardReferralsConfirmed||0,h:this.poolManagement.poolStatistics.poolHashes,m:this.poolManagement.poolStatistics.poolMinersOnline.length,t:this.poolManagement.poolStatistics.poolTimeRemaining,n:__WEBPACK_IMPORTED_MODULE_2_main_blockchain_Blockchain__["a"].blockchain.blocks.networkHashRate,b:this.poolManagement.poolStatistics.poolBlocksConfirmed,bp:this.poolManagement.poolStatistics.poolBlocksConfirmedAndPaid,ub:this.poolManagement.poolStatistics.poolBlocksUnconfirmed,bc:this.poolManagement.poolStatistics.poolBlocksBeingConfirmed,});blockInformationMinerInstance.lastWork=newWork;return true;}catch(exception){if(exception.message!=="answer is null"||Math.random()<0.2)
console.error("_sendNewWork",exception);}
return false;}}
__webpack_exports__["a"]=(PoolNewWorkManagement);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__=__webpack_require__(18);var __WEBPACK_IMPORTED_MODULE_1_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_2_common_blockchain_global_Blockchain_Genesis__=__webpack_require__(16);const PROCESS_COUNT=30;class PoolWorkValidation{constructor(poolManagement,poolWorkManagement){this.poolManagement=poolManagement;this.poolWorkManagement=poolWorkManagement;this._works={};this._worksLength=0;this._worksDuplicate={};}
startPoolWorkValidation(){if(!this._timeoutPoolWorkValidation)
this._timeoutPoolWorkValidation=setTimeout(this._processPoolWorkValidation.bind(this),100);if(!this._intervalPoolWorkDuplicateRemoval)
this._intervalPoolWorkDuplicateRemoval=setInterval(this._removePoolWorkDuplicates.bind(this),60*1000);}
stopPoolWorkValidation(){clearTimeout(this._timeoutPoolWorkValidation);this._timeoutPoolWorkValidation=undefined;clearInterval(this._intervalPoolWorkDuplicateRemoval);this._intervalPoolWorkDuplicateRemoval=undefined;}
async pushWorkForValidation(minerInstance,work,forced){const time=new Date().getTime();if(Math.random()<0.0005)
console.log("pushWorkForValidation",work);try{if(!work.hash)return;work.hashHex=work.hash.toString("hex");if(this._worksDuplicate[work.hashHex]>=time)
return;let isPOS=__WEBPACK_IMPORTED_MODULE_2_common_blockchain_global_Blockchain_Genesis__["a"].isPoSActivated(work.h);if(!isPOS&&typeof work.timeDiff==="number"){let hashesFactor=Math.max(0.5,Math.min(2,(80000/work.timeDiff)));let hashesPerSecond=Math.floor(minerInstance.hashesPerSecond*hashesFactor);minerInstance.hashesPerSecond=Math.max(100,Math.min(hashesPerSecond,3000000));minerInstance.realHashesPerSecond=Math.floor(work.hashes/work.timeDiff*1000);}
minerInstance.dateActivity=time/1000;let workData={hashHex:work.hashHex,work:work,minerInstance:minerInstance};let timeToBan;if(isPOS){if(!work.pos||!work.pos.posSignature)
return;forced=true;timeToBan=1000;}else{timeToBan=180000;}
this._worksDuplicate[work.hashHex]=time+timeToBan;if(work.result||forced){const out=await this._validateWork(workData);if(isPOS&&out&&out.result)
this._worksDuplicate[work.hashHex]=time+180000;}else{this.addWork(workData);}}catch(exception){console.log(exception);}}
addWork(workData){if(!this._works[workData.hashHex]){this._works[workData.hashHex]=workData;this._worksLength++;}}
async _processPoolWorkValidation(){__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].info("Total amount of work to validate: "+this._worksLength,__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);if(this.poolManagement.blockchain.semaphoreProcessing._list.length===0){let index=0;let n=Math.min(PROCESS_COUNT,this._worksLength);for(let key in this._works){try{await this._validateWork(this._works[key]);}catch(exception){}
delete this._works[key];index++;if(index>n)break;}
this._worksLength-=n;}
this._timeoutPoolWorkValidation=setTimeout(this._processPoolWorkValidation.bind(this),Math.max(400,Math.min(10000,this._worksLength?50000/this._worksLength:10000)));}
async _validateWork(work){let prevBlock=this.poolWorkManagement.poolWork.findBlockById(work.work.id,work.work.height);if(prevBlock)
return this.poolWorkManagement.processWork(work.minerInstance,work.work,prevBlock);else
__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].error("_validateWork didn't work as the block "+work.work.id+" was not found",__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS,work.work);}
_removePoolWorkDuplicates(){try{let time=new Date().getTime();for(let key in this._worksDuplicate)
if(time-this._worksDuplicate[key]>=0)
delete this._worksDuplicate[key];}catch(exception){}}}
__webpack_exports__["a"]=(PoolWorkValidation);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_1__connected_servers_Pool_Connected_Servers_Protocol__=__webpack_require__(1057);var __WEBPACK_IMPORTED_MODULE_2__connected_miners_Pool_Connected_Miners_Protocol__=__webpack_require__(1058);class PoolProtocol{constructor(poolManagement){this.poolManagement=poolManagement;this.loaded=false;this.poolConnectedServersProtocol=new __WEBPACK_IMPORTED_MODULE_1__connected_servers_Pool_Connected_Servers_Protocol__["a"](this.poolManagement);this.poolConnectedMinersProtocol=new __WEBPACK_IMPORTED_MODULE_2__connected_miners_Pool_Connected_Miners_Protocol__["a"](this.poolManagement);}
async _startPoolProtocol(){if(this.loaded)return true;this.loaded=true;for(let i=0;i<__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].nodes.length;i++)
this._subscribePool(__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].nodes[i]);__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].emitter.on("nodes-list/connected",(result)=>{this._subscribePool(result)});__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].emitter.on("nodes-list/disconnected",(result)=>{this._unsubscribePool(result)});await this.poolConnectedServersProtocol.startPoolConnectedServersProtocol();await this.poolConnectedMinersProtocol.startPoolConnectedMinersProtocol();return true;}
_stopPoolProtocol(){}
_subscribePool(nodesListObject){let socket=nodesListObject.socket;}
_unsubscribePool(nodesListObject){let socket=nodesListObject.socket;}}
__webpack_exports__["a"]=(PoolProtocol);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_node_lists_waitlist_Nodes_Waitlist__=__webpack_require__(39);var __WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_2_node_lists_types_Node_Type__=__webpack_require__(35);var __WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Consensus_Type__=__webpack_require__(44);var __WEBPACK_IMPORTED_MODULE_4_common_mining_pools_common_Pools_Utils__=__webpack_require__(122);var __WEBPACK_IMPORTED_MODULE_5_common_mining_pools_common_Pool_Protocol_List__=__webpack_require__(180);var __WEBPACK_IMPORTED_MODULE_6_common_events_Status_Events__=__webpack_require__(12);class PoolConnectedServersProtocol extends __WEBPACK_IMPORTED_MODULE_5_common_mining_pools_common_Pool_Protocol_List__["a"]{constructor(poolManagement){super();this.poolManagement=poolManagement;this.connectedServersPools=[];this.list=this.connectedServersPools;}
async insertServersListWaitlist(serversListArray){return await __WEBPACK_IMPORTED_MODULE_4_common_mining_pools_common_Pools_Utils__["a"].insertServersListWaitlist(serversListArray,__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_SERVER_FOR_POOL);}
async startPoolConnectedServersProtocol(){if(!this.poolManagement.poolSettings.poolUsePoolServers)return false;for(let i=0;i<__WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__["a"].nodes.length;i++)
await this._subscribePoolConnectedServer(__WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__["a"].nodes[i].socket);__WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__["a"].emitter.on("nodes-list/connected",async(nodesListObject)=>{await this._subscribePoolConnectedServer(nodesListObject.socket)});__WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__["a"].emitter.on("nodes-list/disconnected",(nodesListObject)=>{this._unsubscribePoolConnectedServer(nodesListObject)});}
async _subscribePoolConnectedServer(socket){if(!this.poolManagement._poolStarted)return;if(!this.poolManagement.poolSettings.poolUsePoolServers)return;try{if(socket.node.protocol.nodeType===__WEBPACK_IMPORTED_MODULE_2_node_lists_types_Node_Type__["a"].NODE_TERMINAL&&socket.node.protocol.nodeConsensusType===__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_SERVER){let answer=await this._registerPoolToServerPool(socket);if(!answer)
throw{message:"poolConnected raised an error"};}}catch(exception){console.error("PoolConnectedServersProtocol raised an error",exception);socket.disconnect();}}
_unsubscribePoolConnectedServer(nodesListObject){let socket=nodesListObject.socket;if(socket.node.protocol.nodeConsensusType===__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_POOL)
__WEBPACK_IMPORTED_MODULE_6_common_events_Status_Events__["a"].emit("pools/servers-connections",{message:"Server Removed"});}
async _registerPoolToServerPool(socket){let answer=await socket.node.sendRequestWaitOnce("server-pool/register-pool",{poolName:this.poolManagement.poolSettings.poolName,poolFee:this.poolManagement.poolSettings.poolFee,poolWebsite:this.poolManagement.poolSettings.poolWebsite,poolPublicKey:this.poolManagement.poolSettings.poolPublicKey,poolServers:this.poolManagement.poolSettings.poolServers,},"answer");try{if(!answer||!answer.result)throw{message:"ServerPool returned false"};if(typeof answer.serverPoolFee!=="number")throw{message:"ServerPool returned a wrong fee"};if(answer.serverPoolFee<0||answer.serverPoolFee>1)throw{message:"ServerPool returned a wrong fee"};if(!Buffer.isBuffer(answer.messageToSign)||answer.messageToSign.length!==32)throw{message:"ServerPool message is wrong"};if(answer.serverPoolFee>0.2){await socket.node.sendRequestWaitOnce("server-pool/register-pool/answer/confirmation",{result:false,message:"ServerPool fee is too high"},"answer");setTimeout(()=>{console.error("serverPoolFee is too big");socket.disconnect();},5000);return;}
let signature=this.poolManagement.poolSettings.poolDigitalSign(answer.messageToSign);let confirmation=await socket.node.sendRequestWaitOnce("server-pool/register-pool/answer/confirmation",{result:true,signature:signature},"answer");if(!confirmation)throw{message:"ServerPool returned a null confirmation"};if(confirmation.result){this._addConnectedServerPool(socket,answer.serverPoolFee);return true;}else{throw{message:"ServerPool returned a wrong confirmation"};}}catch(exception){console.error("Pool ConnectedServersProtocol returned an error",exception);socket.disconnect();}
return false;}
_addConnectedServerPool(socket,fee){socket.node.protocol.serverPool={serverPoolFee:fee,};socket.node.protocol.nodeConsensusType=__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_POOL;this.addElement(socket);__WEBPACK_IMPORTED_MODULE_6_common_events_Status_Events__["a"].emit("pools/servers-connections",{message:"Server Removed"});this.poolManagement.poolProtocol.poolConnectedMinersProtocol._subscribePoolConnectedMiners(socket);}}
__webpack_exports__["a"]=(PoolConnectedServersProtocol);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_node_lists_waitlist_Nodes_Waitlist__=__webpack_require__(39);var __WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_2_node_lists_types_Node_Type__=__webpack_require__(35);var __WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Consensus_Type__=__webpack_require__(44);var __WEBPACK_IMPORTED_MODULE_4_common_mining_pools_common_Pools_Utils__=__webpack_require__(122);var __WEBPACK_IMPORTED_MODULE_5_common_mining_pools_common_Pool_Protocol_List__=__webpack_require__(180);var __WEBPACK_IMPORTED_MODULE_6_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_7_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__=__webpack_require__(17);var __WEBPACK_IMPORTED_MODULE_8_common_crypto_ed25519__=__webpack_require__(75);var __WEBPACK_IMPORTED_MODULE_9_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_10_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_11_common_blockchain_global_Blockchain_Genesis__=__webpack_require__(16);var __WEBPACK_IMPORTED_MODULE_12_common_utils_bans_AddressBanList__=__webpack_require__(145);class PoolConnectedMinersProtocol extends __WEBPACK_IMPORTED_MODULE_5_common_mining_pools_common_Pool_Protocol_List__["a"]{constructor(poolManagement){super();this.poolManagement=poolManagement;this.connectedMiners=this.list;}
async startPoolConnectedMinersProtocol(){for(let i=0;i<__WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__["a"].nodes.length;i++)
await this._subscribePoolConnectedMiners(__WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__["a"].nodes[i].socket);__WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__["a"].emitter.on("nodes-list/connected",(nodesListObject)=>this._subscribePoolConnectedMiners(nodesListObject.socket));}
_validatePoolMiner(socket){if((socket.node.protocol.nodeType===__WEBPACK_IMPORTED_MODULE_2_node_lists_types_Node_Type__["a"].NODE_TERMINAL&&[__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_SERVER_FOR_MINER,__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_SERVER].indexOf(socket.node.protocol.nodeConsensusType)>=0)||(socket.node.protocol.nodeType===__WEBPACK_IMPORTED_MODULE_2_node_lists_types_Node_Type__["a"].NODE_WEB_PEER&&[__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_SERVER_FOR_MINER,__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_SERVER].indexOf(socket.node.protocol.nodeConsensusType)>=0)){return true;}
return false;}
async _subscribePoolConnectedMiners(socket){if(!this.poolManagement._poolStarted)return;if(!this._validatePoolMiner(socket))return false;socket.node.on("mining-pool/hello-pool",async(data)=>{try{if(!this.poolManagement._poolStarted)return;if(!this._validatePoolMiner(socket))return;if(typeof socket.node.protocol.minerPool==="object"&&socket.node.protocol.minerPool.socketAddress&&socket.node.protocol.minerPool.minerInstance)return;if(!data)throw{message:"invalid hello"};if(!Buffer.isBuffer(data.message)||data.message.length!==32)throw{message:"message is invalid"};if(!Buffer.isBuffer(data.pool)||data.pool.length!==__WEBPACK_IMPORTED_MODULE_6_consts_const_global__["a"].ADDRESSES.PUBLIC_KEY.LENGTH)throw{message:"poolPublicKey is invalid"};if(!data.pool.equals(this.poolManagement.poolSettings.poolPublicKey))throw{message:"poolPublicKey doesn't match"};if(typeof data.minerAddress!=="string")throw{message:"minerAddress is not correct"};let unencodedAddress=__WEBPACK_IMPORTED_MODULE_7_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].getUnencodedAddressFromWIF(data.minerAddress);if(!unencodedAddress)throw{message:"minerAddress is not correct"};let addresses=[];if(data.addresses)
for(let i=0;i<Math.min(20,data.addresses.length);i++)
addresses.push(Buffer.from(data.addresses[i],"hex"));if(__WEBPACK_IMPORTED_MODULE_12_common_utils_bans_AddressBanList__["a"].isBanned(unencodedAddress))
throw{message:"MinerAddress is banned"};let miner=await this.poolManagement.poolData.addMiner(unencodedAddress);let minerInstance=miner.addInstance(socket,miner);if(addresses.length>0)
minerInstance.addresses=addresses;if(data.ref&&(typeof data.ref==="string"||(Buffer.isBuffer(data.ref)&&data.ref.length===__WEBPACK_IMPORTED_MODULE_6_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH)))
miner.referrals.setReferralLink(data.ref);let newMessage=Buffer.concat([data.message,Buffer.from(this.poolManagement.poolSettings.poolName,"ascii"),Buffer.from(this.poolManagement.poolSettings.poolFee.toString(),"ascii"),Buffer.from(this.poolManagement.poolSettings.poolWebsite,"ascii"),Buffer.from(JSON.stringify(this.poolManagement.poolSettings.poolServers),"ascii"),Buffer.from(this.poolManagement.poolSettings.poolUseSignatures.toString(),"ascii"),]);let signature=this.poolManagement.poolSettings.poolDigitalSign(newMessage);let suffix="";if(typeof data.suffix==="string")
suffix='/'+data.suffix;let messageAddressConfirmation=undefined;if(__WEBPACK_IMPORTED_MODULE_10_main_blockchain_Blockchain__["a"].Wallet.getAddress(unencodedAddress))
messageAddressConfirmation=new Buffer(32);let work=await this.poolManagement.generatePoolWork(minerInstance,true);minerInstance.lastWork=work;let confirmation=await socket.node.sendRequestWaitOnce("mining-pool/hello-pool/answer"+suffix,{result:true,signature:signature,v:0x00,address:this.poolManagement.poolSettings.poolAddress,name:this.poolManagement.poolSettings.poolName,fee:this.poolManagement.poolSettings.poolFee,referralFee:this.poolManagement.poolSettings.poolReferralFee,website:this.poolManagement.poolSettings.poolWebsite,useSig:this.poolManagement.poolSettings.poolUseSignatures,servers:this.poolManagement.poolSettings.poolServers,reward:minerInstance.miner.rewardTotal||0,confirmed:minerInstance.miner.rewardConfirmedTotal||0,refReward:minerInstance.miner.referrals.rewardReferralsTotal||0,refConfirmed:minerInstance.miner.referrals.rewardReferralsConfirmed||0,h:this.poolManagement.poolStatistics.poolHashes,m:this.poolManagement.poolStatistics.poolMinersOnline.length,t:this.poolManagement.poolStatistics.poolTimeRemaining,n:__WEBPACK_IMPORTED_MODULE_10_main_blockchain_Blockchain__["a"].blockchain.blocks.networkHashRate,b:this.poolManagement.poolStatistics.poolBlocksConfirmed,bp:this.poolManagement.poolStatistics.poolBlocksConfirmedAndPaid,ub:this.poolManagement.poolStatistics.poolBlocksUnconfirmed,bc:this.poolManagement.poolStatistics.poolBlocksBeingConfirmed,work:work,msg:messageAddressConfirmation,},"confirmation",30000);try{if(!confirmation)throw{message:"confirmation is empty"};if(!confirmation.result)throw{message:"confirmation is false"};if(confirmation.result){this._addConnectedMinerPool(socket,confirmation.sckAddress||socket.node.sckAddress.address,minerInstance);if(__WEBPACK_IMPORTED_MODULE_10_main_blockchain_Blockchain__["a"].Wallet.getAddress(unencodedAddress)&&Buffer.isBuffer(confirmation.sig)&&confirmation.sig.length>5){let address=__WEBPACK_IMPORTED_MODULE_10_main_blockchain_Blockchain__["a"].Wallet.getAddress(unencodedAddress);if(__WEBPACK_IMPORTED_MODULE_8_common_crypto_ed25519__["a"].verify(confirmation.sig,messageAddressConfirmation,address.publicKey))
socket.node.protocol.minerPool.poolOwner=true;}
return true;}}catch(exception){console.error("mining-pool/hello-pool/answer/confirmation",exception);console.error("exception",exception)}}catch(exception){if(Math.random()<0.1)
console.log("mining-pool/hello-pool"+"/answer",exception);if(!socket.disconnected)
socket.node.sendRequest("mining-pool/hello-pool"+"/answer",{result:false,message:exception.message,});}});socket.node.on("mining-pool/get-work",async(data)=>{if(!this.poolManagement._poolStarted||!socket.node.protocol.minerPool)return;if(!data)return;let suffix="";if(typeof data.suffix==="string")
suffix='/'+data.suffix;let minerInstance=socket.node.protocol.minerPool.minerInstance;if(!minerInstance)throw{message:"publicKey was not found"};if(__WEBPACK_IMPORTED_MODULE_12_common_utils_bans_AddressBanList__["a"].isBanned(minerInstance.address))
throw{message:"MinerAddress is banned"};let work=await this.poolManagement.generatePoolWork(minerInstance,true);minerInstance.lastWork=work;socket.node.sendRequest("mining-pool/get-work/answer"+suffix,{result:true,work:work,reward:minerInstance.miner.rewardTotal||0,confirmed:minerInstance.miner.rewardConfirmedTotal||0,refReward:minerInstance.miner.referrals.rewardReferralsTotal||0,refConfirmed:minerInstance.miner.referrals.rewardReferralsConfirmed||0,h:this.poolManagement.poolStatistics.poolHashes,m:this.poolManagement.poolStatistics.poolMinersOnline.length,t:this.poolManagement.poolStatistics.poolTimeRemaining,n:__WEBPACK_IMPORTED_MODULE_10_main_blockchain_Blockchain__["a"].blockchain.blocks.networkHashRate,b:this.poolManagement.poolStatistics.poolBlocksConfirmed,bp:this.poolManagement.poolStatistics.poolBlocksConfirmedAndPaid,ub:this.poolManagement.poolStatistics.poolBlocksUnconfirmed,bc:this.poolManagement.poolStatistics.poolBlocksBeingConfirmed,})});socket.node.on("mining-pool/get-referrals",async(data)=>{if(!this.poolManagement._poolStarted||!socket.node.protocol.minerPool)return;let suffix="";if(data&&typeof data.suffix==="string")
suffix='/'+data.suffix;let minerInstance=socket.node.protocol.minerPool.minerInstance;if(!minerInstance)throw{message:"publicKey was not found"};socket.node.sendRequest("mining-pool/get-referrals/answer"+suffix,{result:true,referrals:minerInstance.miner.referrals.toJSON()});});socket.node.on("mining-pool/work-partially-done",async(data)=>{if(!this.poolManagement._poolStarted||!data||!socket.node.protocol.minerPool)return;let suffix="";if(typeof data.suffix==="string")
suffix='/'+data.suffix;let minerInstance=socket.node.protocol.minerPool.minerInstance;if(!minerInstance)throw{message:"publicKey was not found"};await this.poolManagement.receivePoolWork(minerInstance,data.work);});socket.node.on("mining-pool/work-done",async(data)=>{if(!this.poolManagement._poolStarted||!data||!socket.node.protocol.minerPool)return;if((!__WEBPACK_IMPORTED_MODULE_11_common_blockchain_global_Blockchain_Genesis__["a"].isPoSActivated(data.work.h))&&((data.work.nonce===0)||(data.work.hashes===0)))return;let suffix="";if(typeof data.suffix==="string")
suffix='/'+data.suffix;let minerInstance=socket.node.protocol.minerPool.minerInstance;if(!minerInstance)throw{message:"publicKey was not found"};try{await this.poolManagement.receivePoolWork(minerInstance,data.work);}catch(exception){console.log("mining-pool/work-done exception 2",exception)}
try{let newWork=await this.poolManagement.generatePoolWork(minerInstance,true);minerInstance.lastWork=newWork;socket.node.sendRequest("mining-pool/work-done/answer"+suffix,{result:true,newWork:newWork,reward:minerInstance.miner.rewardTotal||0,confirmed:minerInstance.miner.rewardConfirmedTotal||0,refReward:minerInstance.miner.referrals.rewardReferralsTotal||0,refConfirmed:minerInstance.miner.referrals.rewardReferralsConfirmed||0,h:this.poolManagement.poolStatistics.poolHashes,m:this.poolManagement.poolStatistics.poolMinersOnline.length,t:this.poolManagement.poolStatistics.poolTimeRemaining,n:__WEBPACK_IMPORTED_MODULE_10_main_blockchain_Blockchain__["a"].blockchain.blocks.networkHashRate,b:this.poolManagement.poolStatistics.poolBlocksConfirmed,bp:this.poolManagement.poolStatistics.poolBlocksConfirmedAndPaid,ub:this.poolManagement.poolStatistics.poolBlocksUnconfirmed,bc:this.poolManagement.poolStatistics.poolBlocksBeingConfirmed,});}catch(exception){console.log("mining-pool/work-done exception 3",exception)}});socket.node.on("mining-pool/change-wallet-mining",(data)=>{if(!this.poolManagement._poolStarted||!data||!socket.node.protocol.minerPool)return;if(typeof data.minerAddress!=="string")throw{message:"minerAddress is not correct"};let unencodedAddress=__WEBPACK_IMPORTED_MODULE_7_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].getUnencodedAddressFromWIF(data.minerAddress);if(!unencodedAddress)throw{message:"minerAddress is not correct"};if(!Buffer.isBuffer(data.minerAddressPublicKey)||data.minerAddressPublicKey.length!==__WEBPACK_IMPORTED_MODULE_6_consts_const_global__["a"].ADDRESSES.PUBLIC_KEY.LENGTH)throw{message:"minerPublicKey is invalid"};let minerAddressPublicKey=data.minerAddressPublicKey;if(typeof data.newMinerAddress!=="string")throw{message:"newMinerAddress is not correct"};let newUnencodedAddress=__WEBPACK_IMPORTED_MODULE_7_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].getUnencodedAddressFromWIF(data.newMinerAddress);if(!newUnencodedAddress)throw{message:"newMinerAddress is not correct"};if(newUnencodedAddress.equals(unencodedAddress))
throw{message:"addresses are the same"};let miner=this.poolManagement.poolData.findMiner(unencodedAddress);if(!miner)throw{message:"miner was not found"};let message=Buffer.concat([unencodedAddress,newUnencodedAddress,]);let minerInstance=socket.node.protocol.minerPool.minerInstance;if(!minerInstance)throw{message:"minerInstance was not found"};if(!Buffer.isBuffer(data.signature)||data.signature.length<10)throw{message:"pool: signature is invalid"};if(!__WEBPACK_IMPORTED_MODULE_8_common_crypto_ed25519__["a"].verify(data.signature,message,minerAddressPublicKey))throw{message:"pool: signature doesn't validate message"};if(!__WEBPACK_IMPORTED_MODULE_7_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"]._generateUnencodedAddressFromPublicKey(minerAddressPublicKey).equals(unencodedAddress))throw{message:"pool: unencodedAddress doesn't work minerPublicKey"};if(data.type==="only instance"){let newMiner=this.poolManagement.poolData.addMiner(newUnencodedAddress);minerInstance=newMiner.addInstance(socket,newMiner);socket.node.protocol.minerPool=newMiner;miner=newMiner;}
socket.node.sendRequest("mining-pool/change-wallet-mining/answer",{result:true,address:__WEBPACK_IMPORTED_MODULE_7_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].generateAddressWIF(miner.address),reward:minerInstance.miner.rewardTotal,confirmed:minerInstance.miner.rewardConfirmedTotal,refReward:minerInstance.miner.referrals.rewardReferralsTotal,refConfirmed:minerInstance.miner.referrals.rewardReferralsConfirmed})});socket.node.on("mining-pool/request-wallet-mining",(data)=>{if(!this.poolManagement._poolStarted||!data||!socket.node.protocol.minerPool)return;let minerInstance=socket.node.protocol.minerPool.minerInstance;if(!minerInstance)throw{message:"publicKey was not found"};socket.node.sendRequest("mining-pool/request-wallet-mining/answer",{result:true,address:__WEBPACK_IMPORTED_MODULE_7_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].generateAddressWIF(minerInstance.miner.address)})});socket.node.on("mining-pool/request-reward",async(data)=>{if(!this.poolManagement._poolStarted||!data||!socket.node.protocol.minerPool)return;if(Buffer.isBuffer(data.minerAddress)||data.minerAddress.length!==__WEBPACK_IMPORTED_MODULE_6_consts_const_global__["a"].ADDRESSES.ADDRESS.LENGTH)throw{message:"minerAddress is invalid"};let miner=this.poolManagement.poolData.findMiner(data.minerAddress);if(miner===null)throw{message:"mine was not found"};let answer=false;socket.node.sendRequest("mining-pool/request-reward"+"/answer",{result:answer})});}
_addConnectedMinerPool(socket,socketAddress,minerInstance){if(typeof socket.node.protocol.minerPool==="object"&&socket.node.protocol.minerPool.socketAddress&&socket.node.protocol.minerPool.minerInstance)return;socket.node.protocol.minerPool={socketAddress:socketAddress,minerInstance:minerInstance};socket.node.protocol.nodeConsensusType=__WEBPACK_IMPORTED_MODULE_3_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_MINER_POOL;this.addElement(socket,minerInstance);}
addElement(socket,minerInstance){if(!__WEBPACK_IMPORTED_MODULE_5_common_mining_pools_common_Pool_Protocol_List__["a"].prototype.addElement.call(this,socket))
minerInstance.dateActivity=new Date().getTime()/1000;minerInstance.socket=socket;this.poolManagement.poolData.connectedMinerInstances.addElement(minerInstance);}}
__webpack_exports__["a"]=(PoolConnectedMinersProtocol);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1_common_satoshmindb_Interface_SatoshminDB__=__webpack_require__(69);var __WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__=__webpack_require__(18);var __WEBPACK_IMPORTED_MODULE_3_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_4_common_utils_Advanced_Emitter__=__webpack_require__(70);class PoolStatistics{constructor(poolManagement,databaseName){this.emitter=new __WEBPACK_IMPORTED_MODULE_4_common_utils_Advanced_Emitter__["a"](100);this.poolManagement=poolManagement;this.POOL_STATISTICS_TIME=120000;this.POOL_STATISTICS_MEAN_VALUES=10;this.poolHashes=0;this.poolHashesNow=0;this.poolMinersOnline=this.poolManagement.poolData.connectedMinerInstances.list;this.poolBlocksConfirmedAndPaid=0;this.poolBlocksUnconfirmed=0;this.poolBlocksConfirmed=0;this.poolBlocksBeingConfirmed=0;this.poolTimeRemaining=0;this._db=new __WEBPACK_IMPORTED_MODULE_1_common_satoshmindb_Interface_SatoshminDB__["a"](databaseName?databaseName:__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].DATABASE_NAMES.SERVER_POOL_DATABASE);this._poolHashesLast=[];}
initializePoolStatistics(){return this._load();}
startInterval(){this._interval=setInterval(this._poolStatisticsInterval.bind(this),this.POOL_STATISTICS_TIME);this._saveInterval=setInterval(this._save.bind(this),5*this.POOL_STATISTICS_TIME);}
clearInterval(){clearInterval(this._interval);clearInterval(this._saveInterval);}
_poolStatisticsInterval(){let poolHashes=Math.floor(this.poolHashesNow/(this.POOL_STATISTICS_TIME/1000));this.poolHashesNow=0;if(this._poolHashesLast.length===this.POOL_STATISTICS_MEAN_VALUES){for(let i=0;i<this._poolHashesLast.length-1;i++){this._poolHashesLast[i]=this._poolHashesLast[i+1];}
this._poolHashesLast[this._poolHashesLast.length-1]=poolHashes;}else{this._poolHashesLast.push(poolHashes);}
let array=[];for(let i=0;i<this._poolHashesLast.length;i++)
array.push(this._poolHashesLast[i]);array.sort((a,b)=>a-b);this.poolHashes=array[Math.floor(array.length/4)];this.emitter.emit("pools/statistics/update",{poolHashes:this.poolHashes,poolMinersOnline:this.poolMinersOnline.length,poolBeingConfirmed:this.poolBlocksBeingConfirmed,poolBlocksConfirmed:this.poolBlocksConfirmed,poolBlocksConfirmedAndPaid:this.poolBlocksConfirmedAndPaid,poolBlocksUnconfirmed:this.poolBlocksUnconfirmed,poolTimeRemaining:this.poolTimeRemaining,});}
addStatistics(hashes){this.poolManagement.poolStatistics.poolHashesNow+=hashes.toNumber();}
async _save(){__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].info('Saving pool statistics...',__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);await this._db.save("serverPool_statistics_confirmedAndPaid",this.poolBlocksConfirmedAndPaid);await this._db.save("serverPool_statistics_unconfirmed",this.poolBlocksUnconfirmed);}
async _load(){__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].info('Loading pool statistics...',__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);let confirmedAndPaid=await this._db.get("serverPool_statistics_confirmedAndPaid",30*1000,undefined,true);let unconfirmed=await this._db.get("serverPool_statistics_unconfirmed",30*1000,undefined,true);if(typeof confirmedAndPaid!=="number")confirmedAndPaid=0;if(typeof unconfirmed!=="number")unconfirmed=0;this.poolBlocksConfirmedAndPaid=confirmedAndPaid;this.poolBlocksUnconfirmed=unconfirmed;return true;}
async _clear(){__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].info('Clearing pool statistics...',__WEBPACK_IMPORTED_MODULE_2_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);try{return(await this._db.remove("serverPool_statistics_confirmedAndPaid"));}
catch(exception){console.log('Exception on clear serverPool_statistics_confirmedAndPaid: ',exception);return false;}}}
__webpack_exports__["a"]=(PoolStatistics);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_events_Status_Events__=__webpack_require__(12);var __WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_2_common_blockchain_global_Blockchain_Mining_Reward__=__webpack_require__(56);var __WEBPACK_IMPORTED_MODULE_3_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_4_common_blockchain_interface_blockchain_blocks_validation_Interface_Blockchain_Block_Validation__=__webpack_require__(140);var __WEBPACK_IMPORTED_MODULE_5__Payout_Pool_Payouts__=__webpack_require__(1061);var __WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__=__webpack_require__(18);var __WEBPACK_IMPORTED_MODULE_7_common_blockchain_global_Blockchain_Genesis__=__webpack_require__(16);var __WEBPACK_IMPORTED_MODULE_8_common_utils_bans_AddressBanList__=__webpack_require__(145);var __WEBPACK_IMPORTED_MODULE_9_main_blockchain_Blockchain__=__webpack_require__(5);const LIGHT_SERVER_POOL_VALIDATION_BLOCK_CONFIRMATIONS=50;const VALIDATION_BLOCK_CONFIRMATIONS_FAILS_START=40;const MAXIMUM_FAIL_CONFIRMATIONS=80;const CONFIRMATIONS_REQUIRE_OTHER_MINERS=__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].DEBUG?false:true;const CONFIRMATION_METHOD=2;const CONFIRMATIONS_REQUIRED=__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].DEBUG?2:(CONFIRMATION_METHOD===2?60:10);class PoolRewardsManagement{constructor(poolManagement,poolData,blockchain){this.poolManagement=poolManagement;this.poolData=poolData;this.blockchain=blockchain;this.poolPayouts=new __WEBPACK_IMPORTED_MODULE_5__Payout_Pool_Payouts__["a"](poolManagement,poolData,blockchain);__WEBPACK_IMPORTED_MODULE_0_common_events_Status_Events__["a"].on("blockchain/blocks-count-changed",async(data)=>{if(!this.poolManagement._poolStarted)return;if(!__WEBPACK_IMPORTED_MODULE_9_main_blockchain_Blockchain__["a"].loaded)return;await this._blockchainChanged();});this._serverBlocksDifficultyCalculation={};this._serverBlocks=[];this._serverBlockInfo=undefined;this._lastTimeCheckHeight=0;}
async _blockchainChanged(){if(this.poolData.blocksInfo.length===0)return;if(this.blockchain.blocks.length===0)return;if(!__WEBPACK_IMPORTED_MODULE_9_main_blockchain_Blockchain__["a"].synchronized)return;if(this._lastTimeCheckHeight>this.blockchain.blocks.length-1)
return;this._lastTimeCheckHeight=this.blockchain.blocks.length-1;let penaltiesMinerInstances={};let penaltiesMinerInstancesCount=0;try{for(let blockInfo of this.poolData.blocksInfo)
if(blockInfo.block&&__WEBPACK_IMPORTED_MODULE_7_common_blockchain_global_Blockchain_Genesis__["a"].isPoSActivated(blockInfo.block.height)){let block=await this.blockchain.getBlock(blockInfo.height);if(block&&blockInfo.height>=this.blockchain.blocks.blocksStartingPoint&&this.blockchain.blocks.length>=block.height+5&&this.blockchain.blocks.length-50<=block.height)
for(let blockInformationMinerInstance of blockInfo.blockInformationMinersInstances)
if(!blockInformationMinerInstance.penalty){let penalty;if(block.posMinerAddress&&block.posMinerAddress.equals(blockInformationMinerInstance.minerAddress)&&!block.data.minerAddress.equals(this.blockchain.mining.unencodedMinerAddress))
penalty=true;if(block.data.minerAddress.equals(blockInformationMinerInstance.minerAddress))
penalty=true;if(penalty&&!penaltiesMinerInstances[blockInformationMinerInstance.address.toString("hex")]){penaltiesMinerInstances[blockInformationMinerInstance.address.toString("hex")]=blockInformationMinerInstance.address;penaltiesMinerInstancesCount++;console.info("penalty activated",blockInformationMinerInstance.addressWIF);__WEBPACK_IMPORTED_MODULE_8_common_utils_bans_AddressBanList__["a"].addBan(blockInformationMinerInstance.minerInstance.address,4*3600*1000,"4 Hours POS Penalty");}}}
if(penaltiesMinerInstancesCount>0)
for(let minerAddress in penaltiesMinerInstances)
for(let blockInfo of this.poolData.blocksInfo)
for(let blockInformationMinerInstance of blockInfo.blockInformationMinersInstances)
if(!blockInformationMinerInstance.penalty&&blockInformationMinerInstance.minerAddress.equals(penaltiesMinerInstances[minerAddress])){blockInformationMinerInstance.cancelDifficulties("pos");blockInformationMinerInstance.cancelReward();blockInformationMinerInstance.penalty=true;}}catch(exception){console.error("Pool Rewards Redistribution error")}
await this.blockchain.sleep(500);let confirmationsPool=0;let confirmationsOthers=0;let confirmationsOthersUnique=0;let found=false;let uniques=[];let confirmations={};if(CONFIRMATION_METHOD===1)
try{let firstBlock;for(let blockInfo of this.poolData.blocksInfo)
if(blockInfo.block)
if(!firstBlock||blockInfo.block.height<firstBlock)
firstBlock=blockInfo.block.height;for(let i=this.blockchain.blocks.length-1,n=Math.max(this.blockchain.blocks.blocksStartingPoint,firstBlock);i>=n;i--){let block=await this.blockchain.getBlock(i);if(this.blockchain.mining.unencodedMinerAddress.equals(block.data.minerAddress))
confirmationsPool++;else{if(!uniques[block.data.minerAddress.toString("hex")]){uniques[block.data.minerAddress.toString("hex")]=true;confirmationsOthersUnique++;}else
confirmationsOthers++;}
confirmations[i]={confirmationsPool:confirmationsPool,confirmationsOthers:confirmationsOthers,confirmationsOthersUnique:confirmationsOthersUnique,}}}catch(exception){}
__WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__["a"].info("BLocksInfo: "+this.poolData.blocksInfo.length,__WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);let poolBlocksBeingConfirmed=0;let needSave=false;for(let i=this.poolData.blocksInfo.length-1;i>=0;i--){let blockInfo=this.poolData.blocksInfo[i];if(blockInfo.payoutTransaction){let found=false;if(!blockInfo.payoutTx)found=true;else
for(let i=this.blockchain.blocks.length-1-2;i>=Math.max(this.blockchain.blocks.length-100,this.blockchain.blocks.blocksStartingPoint);i--){let block=await this.blockchain.getBlock(i);if(block.data.transactions.findTransactionInBlockData(blockInfo.payoutTx)>=0){found=true;break;}}
if(found){blockInfo.payout=true;__WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__["a"].warn("BLOCK TRANSACTION PAYOUT CONFIRMED "+i,__WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);}}
if(blockInfo.payout){this.poolManagement.poolStatistics.poolBlocksConfirmedAndPaid++;this.poolManagement.poolStatistics.poolBlocksConfirmed--;__WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__["a"].warn("BLOCK ALREADY PAID "+i,__WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);this.poolData.deleteBlockInformation(i);needSave=true;continue;}
if(blockInfo.confirmed)
continue;let block=blockInfo.block;if(!block){if(i===this.poolData.blocksInfo.length-1)continue;else{__WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__["a"].warn("==========================================",__WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__["a"].warn("REDISTRIBUTION1 DONE 1 "+i,__WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__["a"].warn("==========================================",__WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);this.redistributePoolDataBlockInformation(blockInfo,i);continue;}}
if(block.height>this.blockchain.blocks.length){poolBlocksBeingConfirmed++;continue;}
if(this.blockchain.blocks.blocksStartingPoint<block.height){let blockckahinBlock=await this.blockchain.getBlock(blockInfo.height);if(!blockckahinBlock)continue;if(__WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__["a"].safeCompare(block.hashChain,blockckahinBlock.hashChain)){found=true;if(CONFIRMATION_METHOD===1){let confirmation=confirmations[block.height];blockInfo.confirmations=confirmation.confirmationsOthersUnique+confirmation.confirmationsOthers/2+Math.min(confirmation.confirmationsPool/4,CONFIRMATIONS_REQUIRE_OTHER_MINERS?2:10000);}else if(CONFIRMATION_METHOD===2)
blockInfo.confirmations=(this.blockchain.blocks.length-block.height);blockInfo.confirmationsFailsTrials=0;}else{if(this.blockchain.blocks.length>block.height+VALIDATION_BLOCK_CONFIRMATIONS_FAILS_START)
blockInfo.confirmationsFailsTrials++;}}else{if(block.height<this.blockchain.blocks.length+LIGHT_SERVER_POOL_VALIDATION_BLOCK_CONFIRMATIONS)
continue;found=await this._confirmUsingPoolServer(blockInfo);if(!found)
blockInfo.confirmationsFailsTrials++;}
if(!found)
blockInfo.confirmations=0;if(blockInfo.confirmationsFailsTrials>MAXIMUM_FAIL_CONFIRMATIONS){if(i===this.poolData.blocksInfo.length-1)continue;this.poolManagement.poolStatistics.poolBlocksUnconfirmed++;__WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__["a"].warn("==========================================",__WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__["a"].warn("REDISTRIBUTION1 DONE 2 "+i,__WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__["a"].warn("==========================================",__WEBPACK_IMPORTED_MODULE_6_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);this.redistributePoolDataBlockInformation(blockInfo,i);continue;}
if(found&&blockInfo.confirmations>CONFIRMATIONS_REQUIRED){blockInfo.confirmed=true;for(let minerInstance of blockInfo.blockInformationMinersInstances){minerInstance.calculateReward(false);minerInstance.miner.rewardConfirmed+=minerInstance.reward;minerInstance.miner.rewardTotal-=minerInstance.reward;if(minerInstance.miner.referrals.referralLinkMiner&&this.poolManagement.poolSettings.poolReferralFee>0){minerInstance.miner.referrals.referralLinkMiner.rewardReferralConfirmed+=minerInstance.rewardForReferral;minerInstance.miner.referrals.referralLinkMiner.rewardReferralTotal-=minerInstance.rewardForReferral;}}
this.poolManagement.poolStatistics.poolBlocksConfirmed++;}else
poolBlocksBeingConfirmed++;await this.blockchain.sleep(100);}
this.poolManagement.poolStatistics.poolBlocksBeingConfirmed=poolBlocksBeingConfirmed;if(needSave)
await this.poolManagement.poolData.saveBlocksInformation();}
async _confirmUsingPoolServer(blockInfo){let found=false;if(this.poolManagement.poolProtocol.poolConnectedServersProtocol.connectedServersPools.length===0)return false;let connectedServerPoolIndex=Math.floor(Math.random()*this.poolManagement.poolProtocol.poolConnectedServersProtocol.connectedServersPools.length);let connectedServerPool=this.poolManagement.poolProtocol.poolConnectedServersProtocol.connectedServersPools[connectedServerPoolIndex];this._serverBlocksDifficultyCalculation=this.blockchain.agent.protocol.forkSolver._calculateBlockRequestsForLight(connectedServerPool,{forkStartingHeight:blockInfo.block.height});this._serverBlockInfo=blockInfo;try{let n=blockInfo.block.height+LIGHT_SERVER_POOL_VALIDATION_BLOCK_CONFIRMATIONS;if(n>this.blockchain.blocks.length)throw{message:"blockInfo not enough blocks"};for(let i=blockInfo.height-1;i<n;i++){let answer=connectedServerPool.node.sendRequestWaitOnce("blockchain/blocks/request-block-by-height",{height:i,onlyHeader:true},i,6000);if(!answer||!answer.result)break;let blockValidation=this._createServerBlockValidation(i,this._serverBlocks.length-1);let block=await this.blockchain.blockCreator.createEmptyBlock(i,blockValidation);block.data._onlyHeader=true;block.deserializeBlock(answer.block,i,undefined,blockInfo.block.difficultyTargetPrev);if(i>=this.poolData.blocksInfo[i].block.height){if(!__WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__["a"].safeCompare(this.poolData.blocksInfo[i-1].block.hash,block.prevHash))throw{message:"pool confirmation: prevHash doesn't match"};this._serverBlocks.push(block);}
else if(i===this.poolData.blocksInfo[i].block.height-1){if(!__WEBPACK_IMPORTED_MODULE_1_common_utils_BufferExtended__["a"].safeCompare(this.poolData.blocksInfo[i].block.hash,block.hash))throw{message:"pool confirmation: hash doesn't match"};}
let result=await this.blockchain.validateBlockchainBlock(block);if(!result)
throw{message:"validation failed"};}
blockInfo.confirmations=n-blockInfo.block.height;}catch(exception){console.error("Pool Rewards raised an exception: server based validation",exception);}
return found;}
_createServerBlockValidation(height,blockInfoHeight){let validationType={"skip-accountant-tree-validation":true,"skip-validation-transactions-from-values":true,};if(height<this._serverBlocksDifficultyCalculation.difficultyCalculationStarts)
validationType["skip-difficulty-recalculation"]=true;if(blockInfoHeight<__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"].BLOCKCHAIN.TIMESTAMP.VALIDATION_NO_BLOCKS)
validationType["skip-validation-timestamp"]=true;validationType["skip-validation-interlinks"]=true;return new __WEBPACK_IMPORTED_MODULE_4_common_blockchain_interface_blockchain_blocks_validation_Interface_Blockchain_Block_Validation__["a"](this._getServerBlock.bind(this),this._getServerDifficultyTarget.bind(this),this._getServerTimeStamp.bind(this),this._getServerPrevHash.bind(this),this._getServerChainHash.bind(this),validationType);}
_getServerBlock(height){let forkHeight=height-this._serverBlockInfo.height;if(forkHeight===0)return this._serverBlockInfo;else return this._serverBlocks[forkHeight-1];}
_getServerDifficultyTarget(height){let forkHeight=height-this._serverBlockInfo.height;if(forkHeight===0)return this._serverBlockInfo.difficultyTarget;else return this._serverBlocks[forkHeight-1].difficultyTarget;}
_getServerTimeStamp(height){let forkHeight=height-this._serverBlockInfo.height;if(forkHeight===0)return this._serverBlockInfo.timeStamp;else return this._serverBlocks[forkHeight-1].timeStamp;}
_getServerPrevHash(height){let forkHeight=height-this._serverBlockInfo.height;if(forkHeight===0)return this._serverBlockInfo.hash;else return this._serverBlocks[forkHeight-1].hash;}
__getServerChainHash(height){let forkHeight=height-this._serverBlockInfo.height;if(forkHeight===0)return this._serverBlockInfo.hashChain;else return this._serverBlocks[forkHeight-1].hashChain;}
redistributePoolDataBlockInformation(blockInformation,index,workType){if(!workType)
blockInformation.block=undefined;let newBlockInformation=this.poolData.lastBlockInformation;if(!newBlockInformation||newBlockInformation.block||newBlockInformation===blockInformation)
newBlockInformation=this.poolData.addBlockInformation();for(let blockInformationMinersInstance of blockInformation.blockInformationMinersInstances){let nothing=true;if((!workType||workType==="pow")&&blockInformationMinersInstance.minerInstanceTotalDifficultyPOW.isGreaterThan(0))nothing=false;if((!workType||workType==="pos")&&blockInformationMinersInstance.minerInstanceTotalDifficultyPOS.isGreaterThan(0))nothing=false;if(nothing)continue;let newBlockInformationMinerInstance=newBlockInformation.addBlockInformationMinerInstance(blockInformationMinersInstance.minerInstance);blockInformationMinersInstance.cancelReward();if(!workType||workType==="pow")
for(let height in blockInformationMinersInstance._minerInstanceTotalDifficultiesPOW)
newBlockInformationMinerInstance.adjustDifficulty({height:height},blockInformationMinersInstance._minerInstanceTotalDifficultiesPOW[height],true);if(!workType||workType==="pos")
for(let height in blockInformationMinersInstance._minerInstanceTotalDifficultiesPOS)
newBlockInformationMinerInstance.adjustDifficulty({height:height},blockInformationMinersInstance._minerInstanceTotalDifficultiesPOS[height],true);blockInformationMinersInstance.cancelDifficulties(workType);blockInformationMinersInstance.calculateReward(false);}
if(!workType)
this.poolData.deleteBlockInformation(index);}}
__webpack_exports__["a"]=(PoolRewardsManagement);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__=__webpack_require__(18);var __WEBPACK_IMPORTED_MODULE_1_common_events_Status_Events__=__webpack_require__(12);var __WEBPACK_IMPORTED_MODULE_2_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_3_common_blockchain_global_Blockchain_Mining_Reward__=__webpack_require__(56);var __WEBPACK_IMPORTED_MODULE_4_common_utils_coins_WebDollar_Coins__=__webpack_require__(32);var __WEBPACK_IMPORTED_MODULE_5_common_blockchain_global_Blockchain_Genesis__=__webpack_require__(16);var __WEBPACK_IMPORTED_MODULE_6_main_blockchain_Blockchain__=__webpack_require__(5);const BigNumber=__webpack_require__(84);const PAYOUT_INTERVAL=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].DEBUG?6:30;const PAYOUT_FEE=__WEBPACK_IMPORTED_MODULE_4_common_utils_coins_WebDollar_Coins__["a"].WEBD*__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINING_POOL.POOL_PAYOUT_FEE;class PoolPayouts{constructor(poolManagement,poolData,blockchain){this.poolManagement=poolManagement;this.poolData=poolData;this.blockchain=blockchain;this._payoutInProgress=false;__WEBPACK_IMPORTED_MODULE_1_common_events_Status_Events__["a"].on("blockchain/blocks-count-changed",async(data)=>{if(!this.poolManagement._poolStarted)return;if(!__WEBPACK_IMPORTED_MODULE_6_main_blockchain_Blockchain__["a"].loaded)return;__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].info("Next Payout in "+(PAYOUT_INTERVAL-(this.blockchain.blocks.length%PAYOUT_INTERVAL))+"  blocks",__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);let blocksConfirmed=this.poolData.confirmedBlockInformations;__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].info("Next Payout - Blocks confirmed: "+blocksConfirmed.length,__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);if(this.blockchain.blocks.length%PAYOUT_INTERVAL===0)
await this.doPayout();});this._toAddresses=[];}
async doPayout(){if(this._payoutInProgress)return;this._payoutInProgress=true;try{await this._doPayout();}catch(exception){console.error("doPayout raised an error",exception)}
this._payoutInProgress=false;}
async _doPayout(){if(!__WEBPACK_IMPORTED_MODULE_6_main_blockchain_Blockchain__["a"].synchronized)return;let paymentType="pos";if(this.blockchain.blocks.length%(2*PAYOUT_INTERVAL)===0)paymentType="pow";__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].info("--------------------------------------------------",__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].info("--------------------------------------------------",__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].info("--------------------------------------------------",__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].info("--------------------------------------------------",__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].info("--------------------------------------------------",__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].info("--------------------------------------------------",__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].info("--------------------PAYOUT------------------------",__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].info("--------------------------------------------------",__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].info("--------------------------------------------------",__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].info("--------------------------------------------------",__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].info("--------------------------------------------------",__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].info("--------------------------------------------------",__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].info("--------------------------------------------------",__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);let blocksConfirmed=[];for(let blockInfo of this.poolData.blocksInfo)
if(blockInfo.block&&blockInfo.confirmed&&!blockInfo.payout&&!blockInfo.payoutTransaction)
if((__WEBPACK_IMPORTED_MODULE_5_common_blockchain_global_Blockchain_Genesis__["a"].isPoSActivated(blockInfo.block.height)&&paymentType==="pos")||(!__WEBPACK_IMPORTED_MODULE_5_common_blockchain_global_Blockchain_Genesis__["a"].isPoSActivated(blockInfo.block.height)&&paymentType==="pow"))
blocksConfirmed.push(blockInfo);console.info("Payout: Blocks confirmed: ",blocksConfirmed.length);if(blocksConfirmed.length===0){console.warn("Payout: No payouts, because no blocks were confirmed");return false;}
try{for(let miner of this.poolData.miners)
miner.__tempRewardConfirmedOther=0;this._toAddresses=[];__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].info("Payout: Initialized ",__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);let totalSumReward=0;for(let blockConfirmed of blocksConfirmed)
totalSumReward+=__WEBPACK_IMPORTED_MODULE_3_common_blockchain_global_Blockchain_Mining_Reward__["a"].getReward(blockConfirmed.block.height)*(1-this.poolManagement.poolSettings.poolFee);let poolFork=totalSumReward-__WEBPACK_IMPORTED_MODULE_6_main_blockchain_Blockchain__["a"].blockchain.accountantTree.getBalance(this.blockchain.mining.minerAddress);let poolForkDifferencePerBlock=0;if(poolFork>0)
poolForkDifferencePerBlock=Math.ceil(poolFork/blocksConfirmed.length);for(let blockConfirmed of blocksConfirmed){let totalDifficultyPOW=new BigNumber(0),totalDifficultyPOS=new BigNumber(0);this.poolManagement.poolRewardsManagement.redistributePoolDataBlockInformation(blockConfirmed,blockConfirmed,(paymentType==="pow")?"pos":"pow");for(let blockInformationMinerInstance of blockConfirmed.blockInformationMinersInstances){totalDifficultyPOW=totalDifficultyPOW.plus(blockInformationMinerInstance.minerInstanceTotalDifficultyPOW);totalDifficultyPOS=totalDifficultyPOS.plus(blockInformationMinerInstance.minerInstanceTotalDifficultyPOS);}
if(!totalDifficultyPOW.isEqualTo(blockConfirmed.totalDifficultyPOW))
console.error("Total POW Difficulty doesn't match",{totalDifficultyPOW:totalDifficultyPOW,blockConfirmedDifficulty:blockConfirmed.totalDifficultyPOW});if(!totalDifficultyPOS.isEqualTo(blockConfirmed.totalDifficultyPOS))
console.error("Total POS Difficulty doesn't match",{totalDifficultyPOS:totalDifficultyPOS,blockConfirmedDifficulty:blockConfirmed.totalDifficultyPOS});if(totalDifficultyPOS.isLessThanOrEqualTo(0)&&totalDifficultyPOW.isLessThanOrEqualTo(0)){if(__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINING_POOL.SKIP_POS_REWARDS||__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINING_POOL.SKIP_POW_REWARDS)
continue;console.info("--------------------------");console.info("TOTAL POS AND POW ARE BOTH ZERO",{totalDifficultyPOS:totalDifficultyPOS,totalDifficultyPOW:totalDifficultyPOW});console.info("--------------------------");blockConfirmed.payout=true;continue;}
let maxSumReward=__WEBPACK_IMPORTED_MODULE_3_common_blockchain_global_Blockchain_Mining_Reward__["a"].getReward(blockConfirmed.block.height)*(1-this.poolManagement.poolSettings.poolFee);let sumReward=0;for(let blockInformationMinerInstance of blockConfirmed.blockInformationMinersInstances){blockInformationMinerInstance.calculateReward(false);sumReward+=blockInformationMinerInstance.reward;sumReward+=blockInformationMinerInstance.rewardForReferral;}
let difference=(sumReward-maxSumReward)+poolForkDifferencePerBlock;if(Math.abs(difference)>1){difference=Math.ceil(difference/blockConfirmed.blockInformationMinersInstances.length);for(let blockInformationMinerInstance of blockConfirmed.blockInformationMinersInstances)
if(blockInformationMinerInstance.reward-difference>0){blockInformationMinerInstance.miner.rewardConfirmed-=difference;blockInformationMinerInstance.reward-=difference;}}
for(let blockInformationMinerInstance of blockConfirmed.blockInformationMinersInstances){blockInformationMinerInstance.miner.__tempRewardConfirmedOther+=blockInformationMinerInstance.reward;if(blockInformationMinerInstance.miner.referrals.referralLinkMiner)
blockInformationMinerInstance.miner.referrals.referralLinkMiner.miner.__tempRewardConfirmedOther+=blockInformationMinerInstance.rewardForReferral;}
await this.blockchain.sleep(1000);}
__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].info("Payout: Blocks Confirmed Processed",__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);for(let miner of this.poolData.miners)
if((miner.rewardConfirmedOther+miner.__tempRewardConfirmedOther)>=__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINING_POOL.MINING.MINING_POOL_MINIMUM_PAYOUT){this._addAddressTo(miner.address).amount+=miner.rewardConfirmedOther+miner.__tempRewardConfirmedOther;miner.__tempRewardConfirmedOther=0;miner.rewardConfirmedOther=0;}
await this.blockchain.sleep(500);__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].info("Payout: Adding rewardConfirmedOther",__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);if(this._toAddresses.length===0)throw{message:"No Addresses to send money"};for(let toAddress of this._toAddresses)
toAddress.amount=Math.floor(toAddress.amount);await this.blockchain.sleep(500);__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].info("Number of original recipients: "+this._toAddresses.length,__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);this._removeAddressTo(this.blockchain.mining.unencodedMinerAddress);__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].info("Number of initial recipients: "+this._toAddresses.length,__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);for(let i=this._toAddresses.length-1;i>=0;i--)
if(this._toAddresses[i].amount<__WEBPACK_IMPORTED_MODULE_2_consts_const_global__["a"].MINING_POOL.MINING.MINING_POOL_MINIMUM_PAYOUT)
this._removeAddressTo(this._toAddresses[i].address);let totalToPay=0;for(let toAddress of this._toAddresses)
totalToPay+=toAddress.amount;__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].info("======================================= ",__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].info("Number of recipients: "+this._toAddresses.length,__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].info("Payout Total To Pay: "+(totalToPay/__WEBPACK_IMPORTED_MODULE_4_common_utils_coins_WebDollar_Coins__["a"].WEBD),__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].info("======================================= ",__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);let index=0;let transactions=[];while(index*255<this._toAddresses.length){let toAddresses=this._toAddresses.slice(index*255,(index+1)*255);try{let transaction=await __WEBPACK_IMPORTED_MODULE_6_main_blockchain_Blockchain__["a"].Transactions.wizard.createTransactionSimple(this.blockchain.mining.minerAddress,toAddresses,undefined,PAYOUT_FEE,);if(!transaction.result)throw{message:"Transaction was not made"};transactions.push(transaction);}catch(exception){__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].error("Payout: ERROR CREATING TRANSACTION",__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);throw exception;}
index++;}
__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].info("Payout: Transaction Created",__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);for(let blockConfirmed of blocksConfirmed){for(let blockInformationMinerInstance of blockConfirmed.blockInformationMinersInstances){let miner=blockInformationMinerInstance.miner;let paid=this._findAddressTo(miner.address);try{if(!paid){miner.rewardConfirmedOther+=miner.__tempRewardConfirmedOther;miner.rewardConfirmed=0;}
miner.__tempRewardConfirmedOther=0;blockInformationMinerInstance.reset();blockInformationMinerInstance.reward=0;if(miner.referrals.referralLinkMiner){miner.referrals.referralLinkMiner.rewardReferralSent+=blockInformationMinerInstance.rewardForReferral;miner.referrals.referralLinkMiner.rewardReferralConfirmed-=blockInformationMinerInstance.rewardForReferral;blockInformationMinerInstance.rewardForReferral=0;}}catch(exception){}};blockConfirmed.payoutTransaction=true;await this.blockchain.sleep(500);}
let total=0,i=0;for(let toAddress of this._toAddresses){let miner=this.poolData.findMiner(toAddress.address);if(!miner){__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].error("ERROR! Miner was not found at the payout",__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);continue;}
miner.rewardSent+=toAddress.amount;miner.rewardConfirmed=0;miner.rewardConfirmedOther=0;miner.__tempRewardConfirmedOther=0;total+=toAddress.amount;if(i%100===0)
await this.blockchain.sleep(200);i++;}
__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].info("Payout Total Paid "+(total/__WEBPACK_IMPORTED_MODULE_4_common_utils_coins_WebDollar_Coins__["a"].WEBD),__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);if(transactions.length>0)
for(let blockConfirmed of blocksConfirmed)
blockConfirmed.payoutTx=transactions[0].txId;}catch(exception){__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].error("----------------------------------------",__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].error("Pool Payouts raised an error",__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS,exception);__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].error("----------------------------------------",__WEBPACK_IMPORTED_MODULE_0_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);return false;}
return true;}
_findAddressTo(address,returnPos=false){for(let q=0;q<this._toAddresses.length;q++)
if(this._toAddresses[q].address.equals(address))
return returnPos?q:this._toAddresses[q];return returnPos?-1:null;}
_addAddressTo(address){let found=this._findAddressTo(address);if(found)
return found;let object={address:address,amount:0,};this._toAddresses.push(object);return object;}
_removeAddressTo(address){let index=this._findAddressTo(address,true);if(index!==-1)
this._toAddresses.splice(index,1);}}
__webpack_exports__["a"]=(PoolPayouts);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_1_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_2_common_utils_coins_WebDollar_Coins__=__webpack_require__(32);var __WEBPACK_IMPORTED_MODULE_3_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__=__webpack_require__(17);var __WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__=__webpack_require__(18);var __WEBPACK_IMPORTED_MODULE_5_common_blockchain_global_Blockchain_Mining_Reward__=__webpack_require__(56);const PAYOUT_FEE=__WEBPACK_IMPORTED_MODULE_2_common_utils_coins_WebDollar_Coins__["a"].WEBD*__WEBPACK_IMPORTED_MODULE_1_consts_const_global__["a"].MINING_POOL.POOL_PAYOUT_FEE;class PoolRewardsManagement{constructor(poolManagement,poolData,blockchain){this.poolManagement=poolManagement;this.poolData=poolData;this.blockchain=blockchain;this._payoutInProgress=false;this.poolFeePercent=poolManagement.poolSettings._poolFee;this.currentPoolBalance=0;this.totalRewardSent=0;this.totalRewardConfirmOther=0;this._toAddresses=[];}
async doPayout(){if(this._payoutInProgress)return;this._payoutInProgress=true;await this._doPayout();this._payoutInProgress=false;}
async _doPayout(){if(!__WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__["a"].synchronized)return;__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].info("--------------------------------------------------",__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].info("--------------------------------------------------",__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].info("--------------------------------------------------",__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].info("--------------------------------------------------",__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].info("------------------Remained PAYOUT-----------------",__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].info("--------------------------------------------------",__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].info("--------------------------------------------------",__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].info("--------------------------------------------------",__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].info("--------------------------------------------------",__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);try{this.createRemainPayouts();if(!this.prepareRewards())throw{message:"No Addresses to send money"};await this.createTransactions();__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].info("Payout: Transaction Created",__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);this.updateMinersReward();}catch(exception){__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].error("----------------------------------------",__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].error("Pool Payouts raised an error",exception,__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].error("----------------------------------------",__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);return false;}
return true;}
createRemainPayouts(){this.poolData.miners.forEach((miner)=>{this.totalRewardSent+=miner._rewardSent;this.totalRewardConfirmOther+=miner._rewardConfirmedOther;});let poolRewardSCO=this.totalRewardSent+this.totalRewardConfirmOther;let poolCurrentBalance=__WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__["a"].blockchain.accountantTree.getBalance(this.blockchain.mining.minerAddress,undefined);poolCurrentBalance-=__WEBPACK_IMPORTED_MODULE_5_common_blockchain_global_Blockchain_Mining_Reward__["a"].getReward(this.blockchain.blocks.length-1)*this.poolData.confirmedBlockInformations.length;let remainingAmount=Math.floor(poolCurrentBalance-(poolCurrentBalance+poolRewardSCO)*this.poolFeePercent-this.totalRewardConfirmOther);if(remainingAmount<=0){__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].error("Can not Pay the Remaning money because you don't have enough funds or you already paid all the users",__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);return;}
__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].info("I have to pay "+remainingAmount/__WEBPACK_IMPORTED_MODULE_2_common_utils_coins_WebDollar_Coins__["a"].WEBD+" WEBD from "+poolCurrentBalance/__WEBPACK_IMPORTED_MODULE_2_common_utils_coins_WebDollar_Coins__["a"].WEBD,__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);let sumTotal=0;this.poolData.miners.forEach((miner)=>{let percentAlreadyPaid=miner._rewardSent/this.totalRewardSent;let reward=Math.floor(percentAlreadyPaid*remainingAmount+miner._rewardConfirmedOther);if(reward>=__WEBPACK_IMPORTED_MODULE_1_consts_const_global__["a"].MINING_POOL.MINING.MINING_POOL_MINIMUM_PAYOUT){this._addAddressTo(miner.address).amount=reward;sumTotal+=reward}});__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].info("Total to pay "+sumTotal/__WEBPACK_IMPORTED_MODULE_2_common_utils_coins_WebDollar_Coins__["a"].WEBD.toFixed(0),__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);}
prepareRewards(){if(this._toAddresses.length===0)return false;for(let i=0;i<this._toAddresses.length;i++)
this._toAddresses[i].amount=Math.floor(this._toAddresses[i].amount);return true;}
async createTransactions(){let sumTotal=0;for(let i=this._toAddresses.length-1;i>=0;i--){this._toAddresses[i].amount=Math.floor(this._toAddresses[i].amount);if(this._toAddresses[i].amount<__WEBPACK_IMPORTED_MODULE_1_consts_const_global__["a"].MINING_POOL.MINING.MINING_POOL_MINIMUM_PAYOUT){let miner=this.poolData.findMiner(this._toAddresses[i].address);miner.rewardConfirmedOther+=Math.max(0,this._toAddresses[i].amount);this._toAddresses.splice(i,1);}else{__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].info("Will pay "+this._toAddresses[i].amount/__WEBPACK_IMPORTED_MODULE_2_common_utils_coins_WebDollar_Coins__["a"].WEBD+" WEBD to "+__WEBPACK_IMPORTED_MODULE_3_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].generateAddressWIF(this._toAddresses[i].address,false,true),__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);sumTotal+=this._toAddresses[i].amount;}}
this._removeAddressTo(this.blockchain.mining.unencodedMinerAddress);__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].info("Total to pay "+sumTotal/__WEBPACK_IMPORTED_MODULE_2_common_utils_coins_WebDollar_Coins__["a"].WEBD.toFixed(0),__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);let index=0;while(index*256<this._toAddresses.length){let toAddresses=this._toAddresses.slice(index*255,(index+1)*255);try{let transaction=await __WEBPACK_IMPORTED_MODULE_0_main_blockchain_Blockchain__["a"].Transactions.wizard.createTransactionSimple(this.blockchain.mining.minerAddress,toAddresses,undefined,PAYOUT_FEE,);if(!transaction.result)throw{message:"Transaction was not made"};}catch(exception){__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].error("Payout: ERROR CREATING TRANSACTION",__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);}
index++;}
__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].info("Payout: Transactions made  "+index,__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);}
updateMinersReward(){for(let i=0;i<this._toAddresses.length;i++){let miner=this.poolData.findMiner(this._toAddresses[i].address);if(!miner)__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].error("ERROR! Miner was not found at the payout",__WEBPACK_IMPORTED_MODULE_4_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);miner.rewardSent+=this._toAddresses[i].amount;miner.rewardConfirmedOther=0;}
this._toAddresses=[];}
_findAddressTo(address,returnPos=false){for(let q=0;q<this._toAddresses.length;q++)
if(this._toAddresses[q].address.equals(address))
return returnPos?q:this._toAddresses[q];return returnPos?-1:null;}
_addAddressTo(address){let found=this._findAddressTo(address);if(found!==null)
return found;let object={address:address,amount:0,};this._toAddresses.push(object);return object;}
_removeAddressTo(address){let index=this._findAddressTo(address,true);if(index!==-1)
this._toAddresses.splice(index,1);}}
__webpack_exports__["a"]=(PoolRewardsManagement);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1__mining_Miner_Pool_Mining__=__webpack_require__(1064);var __WEBPACK_IMPORTED_MODULE_2__mining_Miner_Pool_Reward__=__webpack_require__(1066);var __WEBPACK_IMPORTED_MODULE_3__pool_statistics_Miner_Pool_Statistics__=__webpack_require__(1067);var __WEBPACK_IMPORTED_MODULE_4__protocol_Miner_Pool_Protocol__=__webpack_require__(1068);var __WEBPACK_IMPORTED_MODULE_5__Miner_Pool_Referrals__=__webpack_require__(1069);var __WEBPACK_IMPORTED_MODULE_6__Miner_Pool_Settings__=__webpack_require__(1070);var __WEBPACK_IMPORTED_MODULE_7_common_events_Status_Events__=__webpack_require__(12);var __WEBPACK_IMPORTED_MODULE_8_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_9_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_10_common_utils_logging_Log__=__webpack_require__(18);var __WEBPACK_IMPORTED_MODULE_11_node_sockets_node_clients_service_discovery_Node_Clients_Discovery_Service__=__webpack_require__(435);var __WEBPACK_IMPORTED_MODULE_12_common_utils_helpers_Version_Checker_Helper__=__webpack_require__(178);var __WEBPACK_IMPORTED_MODULE_13_common_blockchain_interface_blockchain_agents_Agent_Status__=__webpack_require__(108);class MinerPoolManagement{constructor(blockchain){this.blockchain=blockchain;this.minerPoolSettings=new __WEBPACK_IMPORTED_MODULE_6__Miner_Pool_Settings__["a"](this);this.minerPoolProtocol=new __WEBPACK_IMPORTED_MODULE_4__protocol_Miner_Pool_Protocol__["a"](this);this.minerPoolStatistics=new __WEBPACK_IMPORTED_MODULE_3__pool_statistics_Miner_Pool_Statistics__["a"](this);this.minerPoolReferrals=new __WEBPACK_IMPORTED_MODULE_5__Miner_Pool_Referrals__["a"](this);this.minerPoolMining=new __WEBPACK_IMPORTED_MODULE_1__mining_Miner_Pool_Mining__["a"](this);this.minerPoolReward=new __WEBPACK_IMPORTED_MODULE_2__mining_Miner_Pool_Reward__["a"](this);this._minerPoolInitialized=false;this._minerPoolOpened=false;this._minerPoolStarted=false;this._lastPoolTried=undefined;this.isNewUser=false;}
async initializeMinerPoolManagement(poolURL){let answer=await this.minerPoolSettings.initializeMinerPoolSettings(poolURL);this.minerPoolInitialized=true;return answer;}
async startMinerPool(poolURL,forceStartMinerPool=false,skipSaving=false){try{if(poolURL===false){await this.setMinerPoolStarted(false);return;}
if(poolURL!==undefined)
await this.minerPoolSettings.setPoolURL(poolURL,skipSaving);if(this.minerPoolSettings.poolURL!==undefined&&this.minerPoolSettings.poolURL!==''){this._minerPoolStarted=false;return await this.setMinerPoolStarted(true,forceStartMinerPool,skipSaving);}
else{console.error("Couldn't start MinerPool");return false;}}catch(exception){__WEBPACK_IMPORTED_MODULE_10_common_utils_logging_Log__["a"].error("startMinerPool raised an error",__WEBPACK_IMPORTED_MODULE_10_common_utils_logging_Log__["a"].LOG_TYPE.POOLS,exception)}}
get minerPoolOpened(){return this._minerPoolOpened;}
get minerPoolInitialized(){return this._minerPoolInitialized;}
get minerPoolStarted(){return this._minerPoolStarted;}
set minerPoolInitialized(value){this._minerPoolInitialized=value;__WEBPACK_IMPORTED_MODULE_7_common_events_Status_Events__["a"].emit("miner-pool/status",{result:value,message:"Miner Pool Initialized changed"});}
set minerPoolOpened(value){this._minerPoolOpened=value;__WEBPACK_IMPORTED_MODULE_7_common_events_Status_Events__["a"].emit("miner-pool/status",{result:value,message:"Miner Pool Opened changed"});}
async setMinerPoolStarted(value,forceStartMinerPool=false,skipSaving=false){try{if(this._minerPoolStarted!==value){if(value&&forceStartMinerPool){await __WEBPACK_IMPORTED_MODULE_8_main_blockchain_Blockchain__["a"].PoolManagement.setPoolStarted(false);if(__WEBPACK_IMPORTED_MODULE_8_main_blockchain_Blockchain__["a"].ServerPoolManagement)
await __WEBPACK_IMPORTED_MODULE_8_main_blockchain_Blockchain__["a"].ServerPoolManagement.setServerPoolStarted(false);}
this._minerPoolStarted=value;await this.minerPoolSettings.setMinerPoolActivated(value,skipSaving);__WEBPACK_IMPORTED_MODULE_9_node_lists_Nodes_List__["a"].disconnectAllNodes("all");if(value){this.blockchain.mining=this.minerPoolMining;__WEBPACK_IMPORTED_MODULE_8_main_blockchain_Blockchain__["a"].Mining=this.minerPoolMining;this.blockchain.agent.consensus=false;if(this.blockchain&&this.blockchain.prover)
this.blockchain.prover.proofActivated=false;await this.minerPoolProtocol.insertServersListWaitlist(this.minerPoolSettings.poolServers);await this.minerPoolMining._startMinerPoolMining();if(!this.minerPoolMining.started){let workers=__WEBPACK_IMPORTED_MODULE_8_main_blockchain_Blockchain__["a"].blockchain.miningSolo.workers?__WEBPACK_IMPORTED_MODULE_8_main_blockchain_Blockchain__["a"].blockchain.miningSolo.workers.workers:undefined;__WEBPACK_IMPORTED_MODULE_8_main_blockchain_Blockchain__["a"].blockchain.miningSolo.stopMining();this.minerPoolMining._stopMinerPoolMining();await this.minerPoolProtocol._startMinerProtocol();if(workers)this.minerPoolMining.setWorkers(workers);}
await this.minerPoolReferrals.startLoadMinerPoolReferrals();__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].MINING_POOL.MINING_POOL_STATUS=__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].MINING_POOL_TYPE.MINING_POOL_MINER;}
else{this.blockchain.mining=__WEBPACK_IMPORTED_MODULE_8_main_blockchain_Blockchain__["a"].blockchain.miningSolo;__WEBPACK_IMPORTED_MODULE_8_main_blockchain_Blockchain__["a"].Mining=__WEBPACK_IMPORTED_MODULE_8_main_blockchain_Blockchain__["a"].blockchain.miningSolo;if(this.minerPoolMining.started){await this.minerPoolProtocol._stopMinerProtocol();let workers=this.minerPoolMining.workers?this.minerPoolMining.workers.workers:undefined;this.minerPoolMining._stopMinerPoolMining();__WEBPACK_IMPORTED_MODULE_8_main_blockchain_Blockchain__["a"].blockchain.miningSolo.stopMining();__WEBPACK_IMPORTED_MODULE_8_main_blockchain_Blockchain__["a"].blockchain.miningSolo.startMining();if(workers)__WEBPACK_IMPORTED_MODULE_8_main_blockchain_Blockchain__["a"].blockchain.miningSolo.setWorkers(workers);}
await this.minerPoolReferrals.stopLoadMinerPoolReferrals();this.blockchain.blocks.clearBlocks();this.blockchain.agent.consensus=true;this.minerPoolReward.totalReward=0;this.minerPoolReward.confirmedReward=0;this.minerPoolReward.totalReferralReward=0;this.minerPoolReward.confirmedReferralReward=0;__WEBPACK_IMPORTED_MODULE_11_node_sockets_node_clients_service_discovery_Node_Clients_Discovery_Service__["a"].startDiscovery();if(this.blockchain&&this.blockchain.prover)
this.blockchain.prover.proofActivated=true;__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].MINING_POOL.MINING_POOL_STATUS=__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].MINING_POOL_TYPE.MINING_POOL_DISABLED;}
__WEBPACK_IMPORTED_MODULE_7_common_events_Status_Events__["a"].emit("miner-pool/status",{result:value,message:"Miner Pool Started changed"});}}catch(exception){this._minerPoolStarted=false;__WEBPACK_IMPORTED_MODULE_10_common_utils_logging_Log__["a"].error("Error starting MinerPool",__WEBPACK_IMPORTED_MODULE_10_common_utils_logging_Log__["a"].LOG_TYPE.POOLS,exception);}}
async setMinerInitialPoolURL(newURL){let timeoutInterval=1000*10;if(newURL!==''&&newURL!==undefined)
timeoutInterval=10;if(!this.minerPoolSettings.poolURL){this.isNewUser=true;timeoutInterval=10;}
if(newURL!==''&&newURL!==undefined){if(!this._setRandomPoolTimeout)
this._setRandomPoolTimeout=setTimeout(()=>this._setRandomPool(newURL),timeoutInterval);this._lastPoolTried=newURL;await this.minerPoolSettings.setPoolURL(newURL);await this.setMinerPoolStarted(true,true);return true;}
if(!this._setRandomPoolTimeout)
this._setRandomPoolTimeout=setTimeout(()=>this._setRandomPool(),timeoutInterval);return true;}
async _setRandomPool(){try{if(__WEBPACK_IMPORTED_MODULE_8_main_blockchain_Blockchain__["a"].MinerPoolManagement.minerPoolStarted&&__WEBPACK_IMPORTED_MODULE_8_main_blockchain_Blockchain__["a"].blockchain.agent.status===__WEBPACK_IMPORTED_MODULE_13_common_blockchain_interface_blockchain_agents_Agent_Status__["a"].AGENT_STATUS_SYNCHRONIZED)
throw "it is sync";if(this.minerPoolSettings.poolURL&&this._lastPoolTried!==this.minerPoolSettings.poolURL){this._lastPoolTried=this.minerPoolSettings.poolURL;await this.setMinerPoolStarted(true,true);}else{let pools=0;for(let key in this.minerPoolSettings.poolsList)
pools++;let random=Math.floor(Math.random()*pools);let c=0;for(let key in this.minerPoolSettings.poolsList){if(c===random){if(this.isNewUser)
await this.minerPoolSettings.setPoolURL(this.minerPoolSettings.poolsList[key].poolURL);await this.startMinerPool(this.minerPoolSettings.poolsList[key].poolURL,true,true);this._lastPoolTried=this.minerPoolSettings.poolsList[key].poolURL;break;}
c++;}}}catch(exception){}
setTimeout(()=>this._setRandomPool(),1000*10);}}
__webpack_exports__["a"]=(MinerPoolManagement);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_1_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_2_consts_global__=__webpack_require__(45);var __WEBPACK_IMPORTED_MODULE_3_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_4_node_menu_Advanced_Messages__=__webpack_require__(86);var __WEBPACK_IMPORTED_MODULE_5_common_utils_logging_Log__=__webpack_require__(18);var __WEBPACK_IMPORTED_MODULE_6_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_7_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_8__blockchain_interface_blockchain_blocks_Interface_Blockchain_Block_Creator__=__webpack_require__(249);var __WEBPACK_IMPORTED_MODULE_9_common_blockchain_global_Blockchain_Genesis__=__webpack_require__(16);let InheritedPoolMining;if(true){InheritedPoolMining=__webpack_require__(1065).default;}else{InheritedPoolMining=require('./backbone/Pool-Backbone-Mining').default;}
class MinerPoolMining extends InheritedPoolMining{constructor(minerPoolManagement){super(minerPoolManagement.blockchain);this.minerPoolManagement=minerPoolManagement;this._miningWork={block:undefined,blockId:-1,start:undefined,end:undefined,height:undefined,difficultyTarget:undefined,serializedHeader:undefined,resolved:true,poolSock1et:undefined,};__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].emitter.on("nodes-list/disconnected",(nodesListObject)=>{if(nodesListObject.socket===this._miningWork.poolSocket)
this._miningWork.poolSocket=null;});this._minerAddress=__WEBPACK_IMPORTED_MODULE_3_main_blockchain_Blockchain__["a"].blockchain.mining.minerAddress;this._unencodedMinerAddress=__WEBPACK_IMPORTED_MODULE_3_main_blockchain_Blockchain__["a"].blockchain.mining.unencodedMinerAddress;this._isBeingMining=undefined;if(this._workers)
this._workers._in_pool=true;this._miningBalances={};}
_startMinerPoolMining(){if(!this._checkForWorkInterval)
this._checkForWorkInterval=this._checkForWorkIntervalCallback();this._miningWork.date=new Date().getTime();}
_stopMinerPoolMining(){clearTimeout(this._checkForWorkInterval);this.started=false;this._checkForWorkInterval=undefined;InheritedPoolMining.prototype.stopMining.call(this);}
getMedianTimestamp(){return this._miningWork.medianTimestamp;}
async _setAddress(newAddress,save,skipChangingAddress=false){await InheritedPoolMining.prototype._setAddress.call(this,newAddress,save);if(this._minerAddress===newAddress)
return;let oldMinerAddress=this._minerAddress;if(skipChangingAddress)return;if(__WEBPACK_IMPORTED_MODULE_3_main_blockchain_Blockchain__["a"].Wallet.getAddress(this._minerAddress)===null){if(await __WEBPACK_IMPORTED_MODULE_4_node_menu_Advanced_Messages__["a"].confirm("You are mining on a different address in this pool. Do you want to change the pool mining address"))
await this.minerPoolManagement.minerPoolProtocol.changeWalletMining();}else
await this.minerPoolManagement.minerPoolProtocol.changeWalletMining(undefined,this._minerAddress,oldMinerAddress);}
updatePoolMiningWork(work,poolSocket){if(work.b&&work.b.length===__WEBPACK_IMPORTED_MODULE_3_main_blockchain_Blockchain__["a"].Wallet.addresses.length){for(let i=0;i<work.b.length;i++)
this._miningBalances[__WEBPACK_IMPORTED_MODULE_3_main_blockchain_Blockchain__["a"].Wallet.addresses[i].unencodedAddress.toString("hex")]=work.b[i];}
let block=new this.blockchain.blockCreator.blockClass(this.blockchain,undefined,0,new Buffer(32),new Buffer(32),new Buffer(32),new Buffer(32),0,0,undefined,work.h,);block.deserializeBlock(work.block,work.h,undefined,work.t,undefined,undefined,true,true);if(__WEBPACK_IMPORTED_MODULE_9_common_blockchain_global_Blockchain_Genesis__["a"].isPoSActivated(work.h))
block.posMinerAddress=__WEBPACK_IMPORTED_MODULE_3_main_blockchain_Blockchain__["a"].Mining.unencodedMinerAddress;this._miningWork.block=block;this._miningWork.blockSerialized=work.block;this._miningWork.medianTimestamp=work.m;this._miningWork.height=work.h;this._miningWork.blockId=work.I||work.h;this._miningWork.blockLastSignature=work.lsig||new Buffer(0);this._miningWork.difficultyTarget=work.t;this._miningWork.serializedHeader=work.s;__WEBPACK_IMPORTED_MODULE_3_main_blockchain_Blockchain__["a"].blockchain.blocks._length=work.h;__WEBPACK_IMPORTED_MODULE_3_main_blockchain_Blockchain__["a"].blockchain.blocks.emitBlockCountChanged();this._miningWork.start=work.start;this._miningWork.end=work.end;this._miningWork.date=new Date().getTime();this._miningWork.poolSocket=poolSocket;this._miningWork.resolved=false;__WEBPACK_IMPORTED_MODULE_5_common_utils_logging_Log__["a"].info("New Work: "+(work.end-work.start)+"   starting at: "+work.start+" block: "+this._getBlockSuffix(),__WEBPACK_IMPORTED_MODULE_5_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);}
_getBlockSuffix(){return __WEBPACK_IMPORTED_MODULE_7_common_utils_BufferExtended__["a"].substr(this._miningWork.serializedHeader,10,26).toString("hex")}
async mineNextBlock(suspend){while(this.started&&!__WEBPACK_IMPORTED_MODULE_2_consts_global__["a"].TERMINATED){if(!this._miningWork.block||this._miningWork.resolved)
await __WEBPACK_IMPORTED_MODULE_3_main_blockchain_Blockchain__["a"].blockchain.sleep(5);else{try{let timeInitial=new Date().getTime();this._isBeingMining=new Promise(async(resolve)=>{try{let workHeight=this._miningWork.height;let workId=this._miningWork.blockId;let workEnd=this._miningWork.end;let workStart=this._miningWork.start;let answer=await this._run();if(!answer){await __WEBPACK_IMPORTED_MODULE_3_main_blockchain_Blockchain__["a"].blockchain.sleep(10000);resolve(false);return false;}
answer.timeDiff=new Date().getTime()-timeInitial;answer.id=workId;answer.h=workHeight;if(answer.hashes!=0)
answer.hashes=workEnd-workStart;if(!this.resetForced)
this._miningWork.resolved=true;else this.resetForced=false;this.minerPoolManagement.minerPoolProtocol.pushWork(answer,this._miningWork.poolSocket);}catch(exception){console.log("Pool Mining Exception",exception);this.stopMining();}
resolve(true);});await this._isBeingMining;}catch(exception){console.log("Pool Mining Exception 2",exception);}}}}
_run(){this._runningPromise=new Promise(async(resolve)=>{try{if(!this._miningWork.block)throw{message:"block is undefined"};if(typeof this._miningWork.start!=="number")throw{message:"start is undefined"};if(typeof this._miningWork.end!=="number")throw{message:"end is undefined"};if(!this._miningWork.difficultyTarget)throw{message:"difficultyTarget is undefined"};let answer=await this.mine(this._miningWork.block,this._miningWork.difficultyTarget,this._miningWork.start,this._miningWork.end,this._miningWork.height,);resolve(answer);}catch(exception){console.error("Couldn't mine block ",this._miningWork.block.toJSON(),exception);resolve(null);}});return this._runningPromise;}
async _checkForWorkIntervalCallback(){try{if(this.started&&this.minerPoolManagement.started&&((new Date().getTime()-this._miningWork.date)>300000||this.minerPoolManagement.minerPoolProtocol.connectedPools.length===0)){__WEBPACK_IMPORTED_MODULE_5_common_utils_logging_Log__["a"].error("Mining Pool is not working. Trying to reconnect",__WEBPACK_IMPORTED_MODULE_5_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].disconnectAllNodes();await this.minerPoolManagement.minerPoolProtocol.insertServersListWaitlist(this.minerPoolSettings.poolServers);this._miningWork.date=new Date().getTime();}}catch(exception){}
this._checkForWorkInterval=setTimeout(this._checkForWorkIntervalCallback.bind(this),5000);}}
__webpack_exports__["a"]=(MinerPoolMining);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:true});var __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_mining_browser_Interface_Blockchain_Browser_Mining__=__webpack_require__(414);var __WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_blocks_Interface_Blockchain_Block__=__webpack_require__(107);var __WEBPACK_IMPORTED_MODULE_2_consts_const_global__=__webpack_require__(2);class PoolBrowserMining extends __WEBPACK_IMPORTED_MODULE_0_common_blockchain_interface_blockchain_mining_browser_Interface_Blockchain_Browser_Mining__["default"]{constructor(blockchain,minerAddress,miningFeePerByte){super(blockchain,minerAddress,miningFeePerByte);this.useResetConsensus=false;}}
__webpack_exports__["default"]=(PoolBrowserMining);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_events_Status_Events__=__webpack_require__(12);class MinerPoolReward{constructor(minerPoolManagement){this.minerPoolManagement=minerPoolManagement;this._totalReward=0;this._confirmedReward=0;this._totalReferralReward=0;this._confirmedReferralReward=0;}
get total(){return this._totalReward+this._totalReferralReward;}
set totalReward(newValue){if(this._totalReward===newValue||typeof newValue!=="number")return;this._totalReward=parseInt(newValue);__WEBPACK_IMPORTED_MODULE_0_common_events_Status_Events__["a"].emit("miner-pool/total-reward",{totalReward:newValue});}
get totalReward(){return this._totalReward;}
set confirmedReward(newValue){if(this._confirmedReward===newValue||typeof newValue!=="number")return;this._confirmedReward=parseInt(newValue);__WEBPACK_IMPORTED_MODULE_0_common_events_Status_Events__["a"].emit("miner-pool/confirmed-reward",{confirmedReward:this._confirmedReward});}
get confirmedReward(){return this._confirmedReward;}
set totalReferralReward(newValue){if(this._totalReferralReward===newValue||typeof newValue!=="number")return;this._totalReferralReward=parseInt(newValue);__WEBPACK_IMPORTED_MODULE_0_common_events_Status_Events__["a"].emit("miner-pool/referral-total-reward",{referralTotalReward:this._totalReferralReward});}
set confirmedReferralReward(newValue){if(this._confirmedReferralReward===newValue||typeof newValue!=="number")return;this._confirmedReferralReward=parseInt(newValue);__WEBPACK_IMPORTED_MODULE_0_common_events_Status_Events__["a"].emit("miner-pool/referral-confirmed-reward",{referralConfirmedReward:this._confirmedReferralReward});}
get totalReferralReward(){return this._totalReferralReward;}
get confirmedReferralReward(){return this._confirmedReferralReward;}
setReward(data){this.confirmedReward=data.confirmed;this.totalReward=data.reward;this.totalReferralReward=data.refReward;this.confirmedReferralReward=data.refConfirmed;}}
__webpack_exports__["a"]=(MinerPoolReward);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_utils_Advanced_Emitter__=__webpack_require__(70);class MinerPoolStatistics{constructor(minerPoolManagement){this.emitter=new __WEBPACK_IMPORTED_MODULE_0_common_utils_Advanced_Emitter__["a"](100);this.minerPoolManagement=minerPoolManagement;this._poolHashes=0;this._poolMinersOnline=0;this._poolBlocksBeingConfirmed=0;this._poolBlocksConfirmed=0;this._poolBlocksConfirmedAndPaid=0;this._poolBlocksUnconfirmed=0;this._poolTimeRemaining=0;}
set poolHashes(newValue){if(this._poolHashes===newValue)return;this._poolHashes=newValue;this._emitNotification();}
get poolHashes(){return this._poolHashes;}
set poolMinersOnline(newValue){if(this._poolMinersOnline===newValue)return;this._poolMinersOnline=newValue;this._emitNotification();}
get poolMinersOnline(){return this._poolMinersOnline;}
set poolBlocksConfirmed(newValue){if(this._poolBlocksConfirmed===newValue)return;this._poolBlocksConfirmed=newValue;this._emitNotification();}
get poolBlocksConfirmed(){return this._poolBlocksConfirmed;}
set poolBlocksConfirmedAndPaid(newValue){if(this._poolBlocksConfirmedAndPaid===newValue)return;this._poolBlocksConfirmedAndPaid=newValue;this._emitNotification();}
get poolBlocksConfirmedAndPaid(){return this._poolBlocksConfirmedAndPaid;}
set poolBlocksBeingConfirmed(newValue){if(this._poolBlocksBeingConfirmed===newValue)return;this._poolBlocksBeingConfirmed=newValue;this._emitNotification();}
get poolBlocksBeingConfirmed(){return this._poolBlocksBeingConfirmed;}
set poolBlocksUnconfirmed(newValue){if(this._poolBlocksUnconfirmed===newValue)return;this._poolBlocksUnconfirmed=newValue;this._emitNotification();}
get poolBlocksUnconfirmed(){return this._poolBlocksUnconfirmed;}
set poolTimeRemaining(newValue){if(this._poolTimeRemaining===newValue)return;this._poolTimeRemaining=newValue;this._emitNotification();}
get poolTimeRemaining(){return this._poolTimeRemaining;}
_emitNotification(){this.emitter.emit("miner-pool/statistics/update",{poolHashes:this._poolHashes,poolMinersOnline:this._poolMinersOnline,poolBlocksBeingConfirmed:this._poolBlocksBeingConfirmed,poolBlocksConfirmed:this._poolBlocksConfirmed,poolBlocksConfirmedAndPaid:this._poolBlocksConfirmedAndPaid,poolBlocksUnconfirmed:this._poolBlocksUnconfirmed,poolTimeRemaining:this.poolTimeRemaining});}}
__webpack_exports__["a"]=(MinerPoolStatistics);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_1_node_lists_waitlist_Nodes_Waitlist__=__webpack_require__(39);var __WEBPACK_IMPORTED_MODULE_2_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_3_common_crypto_WebDollar_Crypto__=__webpack_require__(28);var __WEBPACK_IMPORTED_MODULE_4_common_crypto_ed25519__=__webpack_require__(75);var __WEBPACK_IMPORTED_MODULE_5_node_lists_types_Node_Consensus_Type__=__webpack_require__(44);var __WEBPACK_IMPORTED_MODULE_6_common_mining_pools_common_Pools_Utils__=__webpack_require__(122);var __WEBPACK_IMPORTED_MODULE_7_common_mining_pools_common_Pool_Protocol_List__=__webpack_require__(180);var __WEBPACK_IMPORTED_MODULE_8_common_utils_Serialization__=__webpack_require__(9);var __WEBPACK_IMPORTED_MODULE_9_common_events_Status_Events__=__webpack_require__(12);var __WEBPACK_IMPORTED_MODULE_10_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__=__webpack_require__(17);var __WEBPACK_IMPORTED_MODULE_11_node_menu_Advanced_Messages__=__webpack_require__(86);var __WEBPACK_IMPORTED_MODULE_12_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_13_common_utils_logging_Log__=__webpack_require__(18);var __WEBPACK_IMPORTED_MODULE_14__blockchain_interface_blockchain_agents_Agent_Status__=__webpack_require__(108);var __WEBPACK_IMPORTED_MODULE_15__utils_coins_WebDollar_Coins__=__webpack_require__(32);var __WEBPACK_IMPORTED_MODULE_16_common_blockchain_global_Blockchain_Genesis__=__webpack_require__(16);class MinerPoolProtocol extends __WEBPACK_IMPORTED_MODULE_7_common_mining_pools_common_Pool_Protocol_List__["a"]{constructor(minerPoolManagement){super();this.minerPoolManagement=minerPoolManagement;this.loaded=false;this.connectedPools=[];this.list=this.connectedPools;}
async _startMinerProtocol(){if(this.loaded)return true;this.loaded=true;for(let i=0;i<__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].nodes.length;i++)
await this._subscribeMiner(__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].nodes[i]);__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].emitter.on("nodes-list/connected",async(nodesListObject)=>{await this._subscribeMiner(nodesListObject)});__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].emitter.on("nodes-list/disconnected",(nodesListObject)=>{this._unsubscribeMiner(nodesListObject)});}
async _stopMinerProtocol(){}
async insertServersListWaitlist(serversListArray){__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].disconnectAllNodesByConsensusType(__WEBPACK_IMPORTED_MODULE_5_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_PEER);return await __WEBPACK_IMPORTED_MODULE_6_common_mining_pools_common_Pools_Utils__["a"].insertServersListWaitlist(serversListArray,__WEBPACK_IMPORTED_MODULE_5_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_SERVER_FOR_MINER);}
async _subscribeMiner(nodesListObject){let socket=nodesListObject.socket;if(!this.minerPoolManagement.minerPoolStarted)return false;try{if(socket.node.protocol.nodeConsensusType===__WEBPACK_IMPORTED_MODULE_5_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_SERVER){let answer=await this._sendPoolHello(socket);if(!answer)
throw{message:"send hello is not working"};socket.on("mining-pool/hello-pool/again",(data)=>this._sendPoolHello(socket));}}catch(exception){console.error("subscribeMiner raised an error",exception);socket.disconnect();}}
_unsubscribeMiner(nodesListObject){let socket=nodesListObject.socket;if(socket.node.protocol.nodeConsensusType===__WEBPACK_IMPORTED_MODULE_5_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_POOL)
__WEBPACK_IMPORTED_MODULE_9_common_events_Status_Events__["a"].emit("miner-pool/servers-connections",{message:"Server Removed"});}
async _sendPoolHello(socket){try{let message=__WEBPACK_IMPORTED_MODULE_3_common_crypto_WebDollar_Crypto__["a"].getBufferRandomValues(32);let addresses=[];for(let i=0;i<__WEBPACK_IMPORTED_MODULE_2_main_blockchain_Blockchain__["a"].Wallet.addresses.length;i++)
addresses.push(__WEBPACK_IMPORTED_MODULE_2_main_blockchain_Blockchain__["a"].Wallet.addresses[i].unencodedAddress.toString("hex"))
let answer=await socket.node.sendRequestWaitOnce("mining-pool/hello-pool",{message:message,pool:this.minerPoolManagement.minerPoolSettings.poolPublicKey,minerAddress:__WEBPACK_IMPORTED_MODULE_2_main_blockchain_Blockchain__["a"].blockchain.mining.minerAddress,ref:this.minerPoolManagement.minerPoolSettings.poolReferral!==''?this.minerPoolManagement.minerPoolSettings.poolReferral:undefined,addresses:addresses,},"answer",30000);if(!answer)throw{message:"pool : didn't respond"};if(!answer.result)throw{message:"pool : result is not true"+answer.message}
try{if(typeof answer.name!=='string')throw{message:"pool: name is invalid"};if(typeof answer.fee!=='number')throw{message:"pool:  fee is invalid"};if(typeof answer.referralFee!=='number')throw{message:"pool:  referralFee is invalid"};if(typeof answer.website!=='string')throw{message:"pool:  website is invalid"};if(typeof answer.useSig!=='boolean')throw{message:"pool:  useSignatures is invalid"};if(!Array.isArray(answer.servers))throw{message:"pool:  servers is invalid"};let poolName=answer.name;let poolFee=answer.fee;let poolAddress=answer.address;let poolReferralFee=answer.referralFee;let poolWebsite=answer.website;let poolUseSignatures=answer.useSig;let poolServers=answer.servers;if(!Buffer.isBuffer(answer.signature)||answer.signature.length<10)throw{message:"pool: signature is invalid"};let newMessage=Buffer.concat([message,Buffer.from(poolName,"ascii"),Buffer.from(poolFee.toString(),"ascii"),Buffer.from(poolWebsite,"ascii"),Buffer.from(JSON.stringify(poolServers),"ascii"),Buffer.from(poolUseSignatures.toString(),"ascii"),]);if(!__WEBPACK_IMPORTED_MODULE_4_common_crypto_ed25519__["a"].verify(answer.signature,newMessage,this.minerPoolManagement.minerPoolSettings.poolPublicKey))throw{message:"pool: signature doesn't validate message"};socket.node.sendRequest("mining-pool/hello-pool/answer/confirmation",{result:true});this.minerPoolManagement.minerPoolSettings.poolName=poolName;this.minerPoolManagement.minerPoolSettings.poolAddress=poolAddress;this.minerPoolManagement.minerPoolSettings.poolFee=poolFee;this.minerPoolManagement.minerPoolSettings.poolReferralFee=poolReferralFee;this.minerPoolManagement.minerPoolSettings.poolWebsite=poolWebsite;this.minerPoolManagement.minerPoolSettings.poolUseSignatures=poolUseSignatures;this.minerPoolManagement.minerPoolSettings.notifyNewChanges();await this._connectionEstablishedWithPool(socket);this._updateStatistics(answer);this.minerPoolManagement.minerPoolReward.setReward(answer);if(answer.work)
await this._validateRequestWork(answer.work,socket);return true;}catch(exception){console.error("Exception mining-pool/hello-pool/answer/confirmation",exception);socket.node.sendRequest("mining-pool/hello-pool/answer/confirmation",{result:false,message:exception.message});}}catch(exception){console.error("Exception mining-pool/hello-pool/answer",exception);}
return false;}
async _connectionEstablishedWithPool(socket){this.minerPoolManagement.minerPoolMining.resetForced=true;if(this.minerPoolManagement.minerPoolMining._isBeingMining)
await this.minerPoolManagement.minerPoolMining._isBeingMining;this.minerPoolManagement.minerPoolMining.resetForced=false;socket.node.protocol.pool={};socket.node.protocol.nodeConsensusType=__WEBPACK_IMPORTED_MODULE_5_node_lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_POOL;this.addElement(socket);__WEBPACK_IMPORTED_MODULE_9_common_events_Status_Events__["a"].emit("miner-pool/servers-connections",{message:"Server Added"});console.info("Miner Pool: connection established");__WEBPACK_IMPORTED_MODULE_9_common_events_Status_Events__["a"].emit("miner-pool/connection-established",{connected:true,message:"Connection Established",socket:socket});if(this.minerPoolManagement.blockchain.agent.status===__WEBPACK_IMPORTED_MODULE_14__blockchain_interface_blockchain_agents_Agent_Status__["a"].AGENT_STATUS_NOT_SYNCHRONIZED)
this.minerPoolManagement.blockchain.agent.status=__WEBPACK_IMPORTED_MODULE_14__blockchain_interface_blockchain_agents_Agent_Status__["a"].AGENT_STATUS_SYNCHRONIZED;socket.node.on("mining-pool/new-work",async(data)=>{if(!data)throw{message:"new-work invalid work"};this._updateStatistics(data);this.minerPoolManagement.minerPoolReward.setReward(data);this._validateRequestWork(data.work,socket);this.minerPoolManagement.minerPoolMining.resetForced=true;});}
_validateRequestWork(work,socket){if(typeof work!=="object")throw{message:"get-work invalid work"};if(typeof work.h!=="number")throw{message:"get-work invalid block height"};if(!Buffer.isBuffer(work.t))throw{message:"get-work invalid block difficulty target"};if(!Buffer.isBuffer(work.s))throw{message:"get-work invalid block header"};if(typeof work.start!=="number")throw{message:"get-work invalid noncesStart"};if(typeof work.end!=="number")throw{message:"get-work invalid noncesEnd"};let serialization=work.s;work.block=serialization;if(this.minerPoolManagement.minerPoolSettings.poolUseSignatures){let message=Buffer.concat([work.block,__WEBPACK_IMPORTED_MODULE_8_common_utils_Serialization__["a"].serializeNumber4Bytes(work.start),__WEBPACK_IMPORTED_MODULE_8_common_utils_Serialization__["a"].serializeNumber4Bytes(work.end)]);if(!Buffer.isBuffer(work.sig)||work.sig.length<10)throw{message:"pool: signature is invalid"};if(!__WEBPACK_IMPORTED_MODULE_4_common_crypto_ed25519__["a"].verify(work.sig,message,this.minerPoolManagement.minerPoolSettings.poolPublicKey))throw{message:"pool: signature doesn't validate message"};}
this.minerPoolManagement.minerPoolMining.updatePoolMiningWork(work,socket);}
_updateStatistics(data){if(typeof data.m==="number")this.minerPoolManagement.minerPoolStatistics.poolMinersOnline=data.m;if(typeof data.h==="number")this.minerPoolManagement.minerPoolStatistics.poolHashes=data.h;if(typeof data.b==="number")this.minerPoolManagement.minerPoolStatistics.poolBlocksConfirmed=data.b;if(typeof data.bp==="number")this.minerPoolManagement.minerPoolStatistics.poolBlocksConfirmedAndPaid=data.bp;if(typeof data.ub==="number")this.minerPoolManagement.minerPoolStatistics.poolBlocksUnconfirmed=data.ub;if(typeof data.bc==="number")this.minerPoolManagement.minerPoolStatistics.poolBlocksBeingConfirmed=data.bc;if(typeof data.t==="number")this.minerPoolManagement.minerPoolStatistics.poolTimeRemaining=data.t;if(typeof data.n==="number")__WEBPACK_IMPORTED_MODULE_2_main_blockchain_Blockchain__["a"].blockchain.blocks.networkHashRate=data.n;}
async requestWork(){if(this.connectedPools.length===0)return;let poolSocket=this.connectedPools[0];let answer=await poolSocket.node.sendRequestWaitOnce("mining-pool/get-work",{},"answer",6000);if(answer===null)throw{message:"get-work answered null"};if(answer.result!==true)throw{message:"get-work answered false"};await this._validateRequestWork(answer.work,poolSocket);this._updateStatistics(answer);this.minerPoolManagement.minerPoolReward.setReward(answer);return true;}
async pushWork(miningAnswer,poolSocket){try{if(!poolSocket)
poolSocket=this.connectedPools[0];if(!poolSocket)throw{message:"You are disconnected"};let answer=poolSocket.node.sendRequestWaitOnce("mining-pool/work-done",{work:miningAnswer,},"answer",10000);__WEBPACK_IMPORTED_MODULE_13_common_utils_logging_Log__["a"].info("Push Work: ("+miningAnswer.nonce+")"+miningAnswer.hash.toString("hex")+" id: "+miningAnswer.id,__WEBPACK_IMPORTED_MODULE_13_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);if(miningAnswer.pos)
__WEBPACK_IMPORTED_MODULE_13_common_utils_logging_Log__["a"].info("timestamp "+miningAnswer.pos.timestamp+"   "+"balance "+(__WEBPACK_IMPORTED_MODULE_2_main_blockchain_Blockchain__["a"].AccountantTree.getBalance(__WEBPACK_IMPORTED_MODULE_2_main_blockchain_Blockchain__["a"].blockchain.mining.minerAddress)/__WEBPACK_IMPORTED_MODULE_15__utils_coins_WebDollar_Coins__["a"].WEBD),__WEBPACK_IMPORTED_MODULE_13_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);if(!miningAnswer.result){try{__WEBPACK_IMPORTED_MODULE_13_common_utils_logging_Log__["a"].warn("Statistics: Real "+Math.floor(miningAnswer.hashes/miningAnswer.timeDiff*1000)+" h/s ",__WEBPACK_IMPORTED_MODULE_13_common_utils_logging_Log__["a"].LOG_TYPE.POOLS);}catch(exception){}}
answer=await answer;if(!answer)throw{message:"WorkDone: Answer is null"};if(answer.result!==true)throw{message:"WorkDone: Result is not True",reason:answer.message};this.minerPoolManagement.minerPoolReward.setReward(answer);await this._validateRequestWork(answer.newWork||answer.work,poolSocket);this._updateStatistics(answer);this.minerPoolManagement.minerPoolReward.setReward(answer);}catch(exception){console.error("PushWork raised an error",exception);return false;}}
async changeWalletMining(poolSocket,newAddress,oldAddress){if(!this.minerPoolManagement._minerPoolStarted)return;try{if(!poolSocket)
poolSocket=this.connectedPools[0];if(!newAddress)
newAddress=__WEBPACK_IMPORTED_MODULE_2_main_blockchain_Blockchain__["a"].Wallet.addresses[0].address;if(!poolSocket)throw{message:"You are disconnected"};oldAddress=__WEBPACK_IMPORTED_MODULE_2_main_blockchain_Blockchain__["a"].Wallet.getAddress(oldAddress||this.minerPoolManagement.minerPoolMining.minerAddress);if(!oldAddress){__WEBPACK_IMPORTED_MODULE_11_node_menu_Advanced_Messages__["a"].alert("In order to change the wallet, you need to have access to the wallet of the address "+this.minerPoolManagement.minerPoolMining.minerAddress,"Wallet Error","error",5000);return;}
let unencodedAddress=__WEBPACK_IMPORTED_MODULE_10_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].getUnencodedAddressFromWIF(oldAddress.address);let newUnencodedAddress=__WEBPACK_IMPORTED_MODULE_10_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"].getUnencodedAddressFromWIF(newAddress);let message=Buffer.concat([unencodedAddress,newUnencodedAddress,]);let signature=await oldAddress.signMessage(message,undefined);let answer=await poolSocket.node.sendRequestWaitOnce("mining-pool/change-wallet-mining",{minerAddress:oldAddress.address,minerAddressPublicKey:oldAddress.publicKey,newMinerAddress:newAddress,signature:signature,type:"only instance",},"answer",12000);if(answer===null)throw{message:"pool didn't respond"};if(answer.result!==true)throw answer;else{await this.minerPoolManagement.minerPoolMining._setAddress(newAddress,false,true);this.minerPoolManagement.minerPoolReward.setReward(answer);return true;}}catch(exception){console.error("Couldn't change the wallet",exception.message);if(oldAddress)
await this.minerPoolManagement.minerPoolMining._setAddress(oldAddress.address,false,true);return false;}}
async askWalletMining(poolSocket){if(!this.minerPoolManagement._minerPoolStarted)return;try{if(poolSocket===undefined)
poolSocket=this.connectedPools[0];if(poolSocket===null||poolSocket===undefined)throw{message:"You are disconnected"};let answer=await poolSocket.node.sendRequestWaitOnce("mining-pool/request-wallet-mining",{},"answer",6000);if(answer===null)throw{message:"pool didn't respond"};if(answer.result!==true)throw answer;else{return{result:true,address:answer.address};}}
catch(exception){console.error("Couldn't change the wallet",exception);return{result:false,message:exception.message}}}
async getReferralData(poolSocket){try{if(poolSocket===undefined)
poolSocket=this.connectedPools[0];if(poolSocket===undefined||poolSocket===null)throw{message:"No Pool Socket"};let answer=await poolSocket.node.sendRequestWaitOnce("mining-pool/get-referrals","get","answer",6000);return answer;}catch(exception){console.error("Get Referral Data raised an error",exception);return{result:false};}}}
__webpack_exports__["a"]=(MinerPoolProtocol);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_common_events_Status_Events__=__webpack_require__(12);var __WEBPACK_IMPORTED_MODULE_1_common_utils_logging_Log__=__webpack_require__(18);class MinerPoolReferrals{constructor(minerPoolManagement){this.minerPoolManagement=minerPoolManagement;this.requireReferrals=false;this.referralData={referralLinkAddress:undefined,referralLinkAddressOnline:undefined,referralsTotal:0,referralsConfirmed:0,referralsSent:0,referees:[],};}
startLoadMinerPoolReferrals(){if(this._referralTimeout)return;this._referralTimeout=setTimeout(this._loadReferrals.bind(this),60*1000);}
stopLoadMinerPoolReferrals(){clearTimeout(this._referralTimeout);}
async _loadReferrals(){if(!this.minerPoolManagement._minerPoolStarted)return;if(!this.requireReferrals){this._referralTimeout=setTimeout(this._loadReferrals.bind(this),10*1000);return;}
await this.requestReferrals();this._referralTimeout=setTimeout(this._loadReferrals.bind(this),60*1000);}
async requestReferrals(){try{let data=await this.minerPoolManagement.minerPoolProtocol.getReferralData();if(!data)throw{message:"get-referrals didn't work"};for(let i=0;i<data.referrals.referees.length;i++)
data.referrals.referees[i].referralAddress=this.minerPoolManagement.minerPoolMining.minerAddress;this.referralData={referralLinkAddress:data.referrals.linkAddress,referralLinkAddressOnline:data.referrals.linkAddressOnline,referralsTotal:data.referrals.total,referralsConfirmed:data.referrals.confirmed,referralsSent:data.referrals.sent,referees:data.referrals.referees,};__WEBPACK_IMPORTED_MODULE_0_common_events_Status_Events__["a"].emit("mining-pool/pool-referral-data-changed",{data:this.referralData});}catch(exception){}}}
__webpack_exports__["a"]=(MinerPoolReferrals);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_common_satoshmindb_Interface_SatoshminDB__=__webpack_require__(69);var __WEBPACK_IMPORTED_MODULE_1_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_2_common_crypto_WebDollar_Crypto__=__webpack_require__(28);var __WEBPACK_IMPORTED_MODULE_3_common_crypto_ed25519__=__webpack_require__(75);var __WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__=__webpack_require__(12);var __WEBPACK_IMPORTED_MODULE_5_common_utils_helpers_Utils__=__webpack_require__(40);var __WEBPACK_IMPORTED_MODULE_6_common_mining_pools_common_Pools_Utils__=__webpack_require__(122);var __WEBPACK_IMPORTED_MODULE_7_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_8__blockchain_interface_blockchain_agents_Agent_Status__=__webpack_require__(108);const sanitizer=__webpack_require__(434);class MinerPoolSettings{constructor(minerPoolManagement,databaseName){this.minerPoolManagement=minerPoolManagement;this._db=new __WEBPACK_IMPORTED_MODULE_0_common_satoshmindb_Interface_SatoshminDB__["a"](databaseName?databaseName:__WEBPACK_IMPORTED_MODULE_1_consts_const_global__["a"].DATABASE_NAMES.MINER_POOL_DATABASE);this._poolURL='';this.poolDedicated=false;this.poolsList={};this.poolName="";this.poolAddress="";this.poolFee=0;this.poolReferralFee=0;this.poolWebsite="";this.poolDescription="";this.poolServers=[];this.poolPublicKey=new Buffer(0);this.poolUseSignatures=false;this.poolURLReferral='';this._poolMinerAddress='';this._minerPoolActivated=false;__WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__["a"].on("blockchain/mining/address",async(data)=>{if(!this.minerPoolManagement.minerPoolStarted)
return;this.generatePoolURLReferral();});}
async initializeMinerPoolSettings(poolURL){if(poolURL!==undefined)
await this.setPoolURL(poolURL);await this._getMinerPoolDetails();await this._getMinerPoolList();}
generatePoolURLReferral(){let url=this._poolURL;if(url.indexOf("/r/",url)>=0)
url=url.substr(0,url.indexOf("/r/",url));this.poolURLReferral=(true?window.location.origin:"https://webdollar.ddns.net:9094")+"/pool/"+url+"/r/"+encodeURI(__WEBPACK_IMPORTED_MODULE_7_main_blockchain_Blockchain__["a"].Mining.minerAddress.replace(/#/g,"%23"));__WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__["a"].emit("miner-pool/referral-url",{poolURLReferral:this.poolURLReferral});}
get poolURL(){return this._poolURL;}
async setPoolURL(newValue,skipSaving=false){newValue=await this._replacePoolURL(newValue);newValue=sanitizer.sanitize(newValue);if(newValue===null||newValue===this._poolURL)return;let data=__WEBPACK_IMPORTED_MODULE_6_common_mining_pools_common_Pools_Utils__["a"].extractPoolURL(newValue);if(!data)throw{message:"poolURL is invalid"};this.poolName=data.poolName;this.poolFee=data.poolFee;this.poolWebsite=data.poolWebsite;this.poolDescription=data.poolDescription;this.poolPublicKey=data.poolPublicKey;this.poolReferral=data.poolReferral;await this._setPoolServers(data.poolServers);this._poolURL=data.poolURL;await this.addPoolList(newValue,data);if(!skipSaving)
if(false===await this._db.save("minerPool_poolURL",this._poolURL))throw{message:"PoolURL couldn't be saved"};this.generatePoolURLReferral();__WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__["a"].emit("miner-pool/newPoolURL",{poolURL:this._poolURL});this.notifyNewChanges();return true;}
notifyNewChanges(){__WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__["a"].emit("miner-pool/settings",{poolURL:this._poolURL,poolName:this.poolName,poolFee:this.poolFee,poolReferralFee:this.poolReferralFee,poolWebsite:this.poolWebsite,poolServers:this.poolServers,minerPoolActivated:this._minerPoolActivated});}
async _setPoolServers(newValue){__WEBPACK_IMPORTED_MODULE_6_common_mining_pools_common_Pools_Utils__["a"].validatePoolServers(newValue);if(JSON.stringify(this.poolServers)===JSON.stringify(newValue))return;newValue=__WEBPACK_IMPORTED_MODULE_6_common_mining_pools_common_Pools_Utils__["a"].processServersList(newValue);this.poolServers=newValue;if(this.minerPoolManagement.minerPoolStarted)
await this.minerPoolManagement.minerPoolProtocol.insertServersListWaitlist(this.poolServers);}
async _getMinerPoolDetails(){let poolURL=await this._db.get("minerPool_poolURL",30*1000,undefined,true);let poolMinerActivated=await this._db.get("minerPool_activated",30*1000,undefined,true);if(poolMinerActivated==="true")poolMinerActivated=true;else if(poolMinerActivated==="false")poolMinerActivated=false;else if(poolMinerActivated===null)poolMinerActivated=false;__WEBPACK_IMPORTED_MODULE_6_common_mining_pools_common_Pools_Utils__["a"].validatePoolActivated(poolMinerActivated);await this.setPoolURL(poolURL,true);await this.setMinerPoolActivated(poolMinerActivated,true,false);}
async addPoolList(url,data,save=true){if(!data)
data=__WEBPACK_IMPORTED_MODULE_6_common_mining_pools_common_Pools_Utils__["a"].extractPoolURL(url);if(!data)return;let foundPool=this.poolsList[data.poolPublicKey.toString("hex")];if(!foundPool)
foundPool={};if(JSON.stringify(this.poolsList[data.poolPublicKey.toString("hex")])!==JSON.stringify(data)){this.poolsList[data.poolPublicKey.toString("hex")]=data;if(save)
await this._saveMinerPoolList();}}
async _saveMinerPoolList(){let list={};for(let key in this.poolsList)
list[key]=this.poolsList[key];let result=await this._db.save("minerPool_poolsList",new Buffer(JSON.stringify(list),"ascii"));return result;}
async _getMinerPoolList(){let result=await this._db.get("minerPool_poolsList",30*1000,undefined,true);if(result!==null){if(Buffer.isBuffer(result))
result=result.toString("ascii");result=JSON.parse(result);this.poolsList=result;}else
this.poolsList={};await this._addPoolsList();return result;}
async setMinerPoolActivated(newValue,skipSaving=false,useActivation=true){if(newValue===this._minerPoolActivated)return;__WEBPACK_IMPORTED_MODULE_6_common_mining_pools_common_Pools_Utils__["a"].validatePoolActivated(newValue);this._minerPoolActivated=newValue;if(!skipSaving)
if(false===await this._db.save("minerPool_activated",this._minerPoolActivated?"true":"false"))throw{message:"minerPoolActivated couldn't be saved"};__WEBPACK_IMPORTED_MODULE_4_common_events_Status_Events__["a"].emit("miner-pool/settings",{poolURL:this._poolURL,poolAddress:this.poolAddress,poolName:this.poolName,poolFee:this.poolFee,poolWebsite:this.poolWebsite,poolServers:this.poolServers,minerPoolActivated:this._minerPoolActivated});if(useActivation)
await this.minerPoolManagement.setMinerPoolStarted(newValue,true);}
get minerPoolActivated(){return this._minerPoolActivated;}
async _addPoolsList(){await this.addPoolList("/pool/1/CanadianStakePool/0/b96ebf01cefa08edae50a5bf495a8f61261bc918fa4e62c4cbbe3ebe6bacde21/https:$$webdollarpool.ca:443",undefined,true);await this.addPoolList("/pool/1/ImperiumStake/0/bf883f6f0e7c68c415e791eb77ddf55e43e352fa673fc35536937d074178dd80/https:$$webdollarpool.eu:443",undefined,true);await this.addPoolList("/pool/1/2MooNPooL/0.02/3c9456990ea9d0595f3a438e46b656063a42e6ad7f4fb1316b4a2b4086bfe9b0/https:$$2moonPool.ddns.net:3335",undefined,true);await this.addPoolList("/pool/1/BACMpool/0.01/21dc1f57cb7338963ea159877b4ade97b71dd11ac17292e3852bdc33a26a17e4/https:$$pool.bacm.ro:443",undefined,true);await this.addPoolList("/pool/1/Balanel_si_Miaunel/0.02/cd7217ad76118df5357ae7a094aa48096daae8a67767bd3acbc8638dc68955ac/https:$$webd.pool.coffee:8443",undefined,true);await this.addPoolList("pool/1/EuroPool/0.02/f06b4720a725eb4fe13c06b26fca4c862b2f2f2ddc831e411418aceefae8e6df/https:$$webd-europool.ddns.net:2222",undefined,true);await this.addPoolList("/pool/1/WMP/0.02/d02e26e60a5b0631a0b71e7dc72bb7492fd018dad64531498df369ec14f87962/https:$$server.webdollarminingpool.com:443",undefined,true);await this.addPoolList("/pool/1/WMP-ASIA/0.02/773a8d5f7ce3c0dba0b7216c35d2768b1a6abef716fa2a46d875d6ca0e2c115e/https:$$singapore.webdollarminingpool.com:443",undefined,true);await this.addPoolList("/pool/1/WebDollarPoolWin/0.01/60ba45707efcf2292e1c8d4c6a16b602a58aa8bee04d7d3645198afa4f8435e0/https:$$webdollarpool.win:80",undefined,true);}
async _replacePoolURL(url=''){if(typeof url!=="string")return url;if(url.indexOf("WMP/0.02/bdda9527a040d9063e22e1dccc4d860b84227ff73232f5c418054112114a6ea4/https:$$pool.webdollarminingpool.com:443")>=0)
url=url.replace("WMP/0.02/bdda9527a040d9063e22e1dccc4d860b84227ff73232f5c418054112114a6ea4/https:$$pool.webdollarminingpool.com:443","WMP/0.02/c01f57930c27e78e434de1243ae02b98e56d6cd3df42d136be1a1c0a0a9a8624/https:$$server.webdollarminingpool.com:443",);return url;}}
__webpack_exports__["a"]=(MinerPoolSettings);}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";class FallBackObject{constructor(url){this.url=url;this.checked=false;this.errorTrials=0;this.lastTimeChecked=0;}
refreshLastTimeChecked(){this.lastTimeChecked=new Date().getTime();}
checkLastTimeChecked(timeTryReconnectAgain){let time=new Date().getTime();if((time-this.lastTimeChecked)>=(timeTryReconnectAgain+this.errorTrials*5000))
return true;return false;}}
__webpack_exports__["a"]=(FallBackObject);}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_node_lists_waitlist_Nodes_Waitlist__=__webpack_require__(39);var __WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_2_node_sockets_node_clients_service_Node_Clients_Service__=__webpack_require__(1073);var __WEBPACK_IMPORTED_MODULE_3_node_webrtc_service_node_web_peers_service__=__webpack_require__(1074);var __WEBPACK_IMPORTED_MODULE_4_node_lists_stats_Nodes_Stats__=__webpack_require__(1076);var __WEBPACK_IMPORTED_MODULE_5_common_sockets_protocol_Node_Propagation_Protocol__=__webpack_require__(263);var NodeServer,NodeExpress;if(false){NodeExpress=require('node/sockets/node-server/express/Node-Express').default;NodeServer=require('node/sockets/node-server/sockets/Node-Server').default;}
class Node{constructor(){this.NodesList=__WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__["a"];this.NodesWaitlist=__WEBPACK_IMPORTED_MODULE_0_node_lists_waitlist_Nodes_Waitlist__["a"];__WEBPACK_IMPORTED_MODULE_5_common_sockets_protocol_Node_Propagation_Protocol__["a"].initializePropagationProtocol();this.NodeExpress=NodeExpress;this.NodeServer=NodeServer;this.NodeClientsService=__WEBPACK_IMPORTED_MODULE_2_node_sockets_node_clients_service_Node_Clients_Service__["a"];this.NodeWebPeersService=__WEBPACK_IMPORTED_MODULE_3_node_webrtc_service_node_web_peers_service__["a"];this.NodesStats=__WEBPACK_IMPORTED_MODULE_4_node_lists_stats_Nodes_Stats__["a"];}}
__webpack_exports__["a"]=(new Node());}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_node_lists_waitlist_Nodes_Waitlist__=__webpack_require__(39);var __WEBPACK_IMPORTED_MODULE_1_node_lists_waitlist_Nodes_Waitlist_Connecting__=__webpack_require__(258);var __WEBPACK_IMPORTED_MODULE_2_node_sockets_node_clients_service_discovery_Node_Clients_Discovery_Service__=__webpack_require__(435);var __WEBPACK_IMPORTED_MODULE_3_node_lists_Nodes_List__=__webpack_require__(6);class NodeClientsService{constructor(){console.log("NodeClientsService constructor");}
startService(){__WEBPACK_IMPORTED_MODULE_0_node_lists_waitlist_Nodes_Waitlist__["a"].initializeWaitlist();__WEBPACK_IMPORTED_MODULE_2_node_sockets_node_clients_service_discovery_Node_Clients_Discovery_Service__["a"].startDiscovery();__WEBPACK_IMPORTED_MODULE_1_node_lists_waitlist_Nodes_Waitlist_Connecting__["a"].startConnecting();}}
__webpack_exports__["a"]=(new NodeClientsService());}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_node_webrtc_service_discovery_node_web_peers_discovery_service__=__webpack_require__(1075);var __WEBPACK_IMPORTED_MODULE_1_main_blockchain_Blockchain__=__webpack_require__(5);class NodeWebPeersService{constructor(){console.log("NodeWebPeersService constructor");}
startService(){__WEBPACK_IMPORTED_MODULE_1_main_blockchain_Blockchain__["a"].onLoaded.then((answer)=>{__WEBPACK_IMPORTED_MODULE_0_node_webrtc_service_discovery_node_web_peers_discovery_service__["a"].startDiscovery();});}}
__webpack_exports__["a"]=(new NodeWebPeersService());}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_1_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_2_node_lists_types_Connection_Type__=__webpack_require__(47);var __WEBPACK_IMPORTED_MODULE_3__lists_types_Node_Consensus_Type__=__webpack_require__(44);class NodeWebPeersDiscoveryService{constructor(){console.log("NodeWebPeersDiscoveryService constructor");}
startDiscovery(){__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].emitter.on("nodes-list/connected",(result)=>{this._newSocketRegisterAcceptWebPeers(result)});for(let i=0;i<__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].nodes.length;i++)
this._newSocketRegisterAcceptWebPeers(__WEBPACK_IMPORTED_MODULE_0_node_lists_Nodes_List__["a"].nodes[i]);}
_newSocketRegisterAcceptWebPeers(nodesListObject){if([__WEBPACK_IMPORTED_MODULE_3__lists_types_Node_Consensus_Type__["a"].NODE_CONSENSUS_SERVER_FOR_MINER].indexOf(nodesListObject.nodeConsensusType)>=0)
return;if([__WEBPACK_IMPORTED_MODULE_2_node_lists_types_Connection_Type__["a"].CONNECTION_CLIENT_SOCKET,__WEBPACK_IMPORTED_MODULE_2_node_lists_types_Connection_Type__["a"].CONNECTION_WEBRTC].indexOf(nodesListObject.connectionType)>=0)
nodesListObject.socket.node.protocol.signaling.client.initializeSignalingClientService();}}
__webpack_exports__["a"]=(new NodeWebPeersDiscoveryService());}),(function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Buffer){var __WEBPACK_IMPORTED_MODULE_0_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_2_node_lists_geolocation_lists_GeoLocation_Lists__=__webpack_require__(231);var __WEBPACK_IMPORTED_MODULE_3_node_lists_waitlist_Nodes_Waitlist__=__webpack_require__(39);var __WEBPACK_IMPORTED_MODULE_4_node_lists_types_Connection_Type__=__webpack_require__(47);var __WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_6__types_Node_Type__=__webpack_require__(35);var __WEBPACK_IMPORTED_MODULE_7_common_blockchain_global_Blockchain_Genesis__=__webpack_require__(16);var __WEBPACK_IMPORTED_MODULE_8_common_utils_bans_BansList__=__webpack_require__(120);var __WEBPACK_IMPORTED_MODULE_9_common_utils_bans_AddressBanList__=__webpack_require__(145);var __WEBPACK_IMPORTED_MODULE_10_common_utils_coins_WebDollar_Coins__=__webpack_require__(32);var __WEBPACK_IMPORTED_MODULE_11_common_utils_helpers_Utils__=__webpack_require__(40);class NodesStats{constructor(){this._timeStart=new Date().getTime();this.statsClients=0;this.statsServer=0;this.statsWebPeers=0;this.statsBrowsers=0;this.statsTerminal=0;this.statsWaitlistFullNodes=0;this.statsWaitlistLightNodes=0;__WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__["a"].emitter.on("nodes-list/connected",(nodesListObject)=>{this._recalculateStats(nodesListObject,false)});__WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__["a"].emitter.on("nodes-list/disconnected",(nodesListObject)=>{this._recalculateStats(nodesListObject,false)});__WEBPACK_IMPORTED_MODULE_3_node_lists_waitlist_Nodes_Waitlist__["a"].emitter.on("waitlist/new-node",(nodesListObject)=>{this._recalculateStats(nodesListObject,false)});__WEBPACK_IMPORTED_MODULE_3_node_lists_waitlist_Nodes_Waitlist__["a"].emitter.on("waitlist/delete-node",(nodesListObject)=>{this._recalculateStats(nodesListObject,false)});setInterval(this._printStats.bind(this),__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].SETTINGS.PARAMS.STATUS_INTERVAL)}
_printStats(){console.info(" blocks: ",__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].blockchain.blocks.length,__WEBPACK_IMPORTED_MODULE_7_common_blockchain_global_Blockchain_Genesis__["a"].isPoSActivated(__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].blockchain.blocks.length)?"POS":"POW");console.info(" amount mining wallet: ",__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].AccountantTree.getBalance(__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].blockchain.mining.minerAddress)/__WEBPACK_IMPORTED_MODULE_10_common_utils_coins_WebDollar_Coins__["a"].WEBD,"  amount");if(__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].blockchain.mining.timeMinedBlock){let time=__WEBPACK_IMPORTED_MODULE_11_common_utils_helpers_Utils__["a"].timePassed(__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].blockchain.mining.timeMinedBlock);console.info(`time since block mined ${Math.floor(time.d)} d ${Math.floor(time.h)} h ${Math.floor(time.m)} m`);}
try{if(__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].blockchain.mining.minerAddress&&Buffer.isBuffer(__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].blockchain.mining.unencodedMinerAddress))
console.info("Exists: ",__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].Wallet.getAddress({unencodedAddress:__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].blockchain.mining.unencodedMinerAddress})!==null?"YES":"NO");}catch(err){console.error(" Wallet was not found ",__WEBPACK_IMPORTED_MODULE_5_main_blockchain_Blockchain__["a"].blockchain.mining.unencodedMinerAddress);}
console.info(" v: ",__WEBPACK_IMPORTED_MODULE_0_consts_const_global__["a"].SETTINGS.NODE.VERSION);let time=__WEBPACK_IMPORTED_MODULE_11_common_utils_helpers_Utils__["a"].timePassed(this._timeStart);console.info(`up time ${Math.floor(time.d)} d ${Math.floor(time.h)} h ${ Math.floor(time.m)} m`);console.log(" connected to: ",this.statsClients," , from: ",this.statsServer," web peers WEBRTC",this.statsWebPeers," Network FullNodes:",this.statsWaitlistFullNodes," Network LightNodes:",this.statsWaitlistLightNodes,"    GeoLocationContinents: ",__WEBPACK_IMPORTED_MODULE_2_node_lists_geolocation_lists_GeoLocation_Lists__["a"].countGeoLocationContinentsLists);console.log(" browsers: ",this.statsBrowsers," terminal: ",this.statsTerminal);let string1="";let clients=__WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__["a"].getNodesByConnectionType(__WEBPACK_IMPORTED_MODULE_4_node_lists_types_Connection_Type__["a"].CONNECTION_CLIENT_SOCKET);for(let i=0;i<Math.min(clients.length,50);i++)
string1+='('+clients[i].socket.node.sckAddress.toString()+')   ';if(clients.length>50)string1+=".........";let string2="";let server=__WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__["a"].getNodesByConnectionType(__WEBPACK_IMPORTED_MODULE_4_node_lists_types_Connection_Type__["a"].CONNECTION_SERVER_SOCKET);for(let i=0;i<Math.min(server.length,50);i++)
string2+='('+server[i].socket.node.sckAddress.toString()+')   ';if(server.length>50)string2+=".........";console.log("clients: ",string1);console.log("server: ",string2);console.log("waitlist full node ",__WEBPACK_IMPORTED_MODULE_3_node_lists_waitlist_Nodes_Waitlist__["a"].waitListFullNodes.length);console.log("waitlist light node ",__WEBPACK_IMPORTED_MODULE_3_node_lists_waitlist_Nodes_Waitlist__["a"].waitListLightNodes.length);__WEBPACK_IMPORTED_MODULE_8_common_utils_bans_BansList__["a"].listBans();__WEBPACK_IMPORTED_MODULE_9_common_utils_bans_AddressBanList__["a"].listBans();}
_recalculateStats(nodesListObject,printStats=true){this.statsClients=__WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__["a"].countNodesByConnectionType(__WEBPACK_IMPORTED_MODULE_4_node_lists_types_Connection_Type__["a"].CONNECTION_CLIENT_SOCKET);this.statsServer=__WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__["a"].countNodesByConnectionType(__WEBPACK_IMPORTED_MODULE_4_node_lists_types_Connection_Type__["a"].CONNECTION_SERVER_SOCKET);this.statsWebPeers=__WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__["a"].countNodesByConnectionType(__WEBPACK_IMPORTED_MODULE_4_node_lists_types_Connection_Type__["a"].CONNECTION_WEBRTC);this.statsBrowsers=__WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__["a"].countNodesByType(__WEBPACK_IMPORTED_MODULE_6__types_Node_Type__["a"].NODE_WEB_PEER);this.statsTerminal=__WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__["a"].countNodesByType(__WEBPACK_IMPORTED_MODULE_6__types_Node_Type__["a"].NODE_TERMINAL);this.statsWaitlistFullNodes=__WEBPACK_IMPORTED_MODULE_3_node_lists_waitlist_Nodes_Waitlist__["a"].waitListFullNodes.length;this.statsWaitlistLightNodes=__WEBPACK_IMPORTED_MODULE_3_node_lists_waitlist_Nodes_Waitlist__["a"].waitListLightNodes.length;if(printStats)
this._printStats();}}
__webpack_exports__["a"]=(new NodesStats());}.call(__webpack_exports__,__webpack_require__(1).Buffer))}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_node_lists_geolocation_lists_geo_helpers_geo_helper__=__webpack_require__(233);var __WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__=__webpack_require__(17);var __WEBPACK_IMPORTED_MODULE_2_common_utils_coins_WebDollar_Coins__=__webpack_require__(32);var __WEBPACK_IMPORTED_MODULE_3_consts_const_global__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_4_node_lists_types_Node_Type__=__webpack_require__(35);var __WEBPACK_IMPORTED_MODULE_5_node_lists_types_Connection_Type__=__webpack_require__(47);var __WEBPACK_IMPORTED_MODULE_6_common_utils_helpers_Version_Checker_Helper__=__webpack_require__(178);var __WEBPACK_IMPORTED_MODULE_7_common_utils_BufferExtended__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_8_node_lists_waitlist_Nodes_Waitlist__=__webpack_require__(39);var __WEBPACK_IMPORTED_MODULE_9_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_10_common_mining_pools_common_Pools_Utils__=__webpack_require__(122);var __WEBPACK_IMPORTED_MODULE_11_common_crypto_WebDollar_Crypto__=__webpack_require__(28);var __WEBPACK_IMPORTED_MODULE_12_node_menu_Advanced_Messages__=__webpack_require__(86);class Applications{constructor(){this.GeoHelper=__WEBPACK_IMPORTED_MODULE_0_node_lists_geolocation_lists_geo_helpers_geo_helper__["a"];this.AddressHelper=__WEBPACK_IMPORTED_MODULE_1_common_blockchain_interface_blockchain_addresses_Interface_Blockchain_Address_Helper__["a"];this.CoinsHelper=__WEBPACK_IMPORTED_MODULE_2_common_utils_coins_WebDollar_Coins__["a"];this.VersionCheckerHelper=__WEBPACK_IMPORTED_MODULE_6_common_utils_helpers_Version_Checker_Helper__["a"];this.PoolsUtilsHelper=__WEBPACK_IMPORTED_MODULE_10_common_mining_pools_common_Pools_Utils__["a"];this.BufferExtended=__WEBPACK_IMPORTED_MODULE_7_common_utils_BufferExtended__["a"];this.NodesList=__WEBPACK_IMPORTED_MODULE_9_node_lists_Nodes_List__["a"];this.NodesWaitlist=__WEBPACK_IMPORTED_MODULE_8_node_lists_waitlist_Nodes_Waitlist__["a"];this.WebDollarCrypto=__WEBPACK_IMPORTED_MODULE_11_common_crypto_WebDollar_Crypto__["a"];this.CONSTS=__WEBPACK_IMPORTED_MODULE_3_consts_const_global__["a"];this.NODE_TYPE=__WEBPACK_IMPORTED_MODULE_4_node_lists_types_Node_Type__["a"];this.CONNECTIONS_TYPE=__WEBPACK_IMPORTED_MODULE_5_node_lists_types_Connection_Type__["a"];this.AdvancedMessages=__WEBPACK_IMPORTED_MODULE_12_node_menu_Advanced_Messages__["a"];}}
__webpack_exports__["a"]=(new Applications());}),(function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_consts_global__=__webpack_require__(45);var __WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_2_node_lists_waitlist_Nodes_Waitlist__=__webpack_require__(39);var __WEBPACK_IMPORTED_MODULE_3_node_lists_waitlist_Nodes_Waitlist_Connecting__=__webpack_require__(258);let alreadySaved=false;__webpack_exports__["a"]=(async(Blockchain)=>{console.warn("SIGINT FIRED");__WEBPACK_IMPORTED_MODULE_0_consts_global__["a"].TERMINATED=true;if(alreadySaved)return;alreadySaved=true;Blockchain.Mining.stopMining();console.warn("Disconnecting All Nodes...");__WEBPACK_IMPORTED_MODULE_1_node_lists_Nodes_List__["a"].disconnectAllNodes("all");__WEBPACK_IMPORTED_MODULE_3_node_lists_waitlist_Nodes_Waitlist_Connecting__["a"].stopConnecting();__WEBPACK_IMPORTED_MODULE_2_node_lists_waitlist_Nodes_Waitlist__["a"].waitListFullNodes=[];__WEBPACK_IMPORTED_MODULE_2_node_lists_waitlist_Nodes_Waitlist__["a"].waitListLightNodes=[];console.log("Closing Express");try{if(false){let NodeExpress=require('node/sockets/node-server/express/Node-Express').default;let NodeServer=require('node/sockets/node-server/sockets/Node-Server').default;NodeExpress.close();NodeServer.close();}
console.warn("Node Express and Server closed")}catch(exception){}
Blockchain.Mining.stopMining();try{await Blockchain.blockchain.transactions.pendinQueue.pendingQueueSavingManager.savePendingTransactions();}catch(exception){}
let interval=async()=>{if(__WEBPACK_IMPORTED_MODULE_0_consts_global__["a"].MINIBLOCKCHAIN_LIGHT_CONFIGURATION_SAVED&&__WEBPACK_IMPORTED_MODULE_0_consts_global__["a"].SEMAPHORE_PROCESS_DONE&&__WEBPACK_IMPORTED_MODULE_0_consts_global__["a"].MINIBLOCKCHAIN_LIGHT_SAVED&&__WEBPACK_IMPORTED_MODULE_0_consts_global__["a"].MINIBLOCKCHAIN_ADVANCED_SAVED&&__WEBPACK_IMPORTED_MODULE_0_consts_global__["a"].INTERFACE_BLOCKCHAIN_SAVED&&__WEBPACK_IMPORTED_MODULE_0_consts_global__["a"].POOL_SAVED){try{if(!__WEBPACK_IMPORTED_MODULE_0_consts_global__["a"].INTERFACE_BLOCKCHAIN_LOADING)
await Blockchain.blockchain.saveBlockchainTerminated();}catch(exception){console.error("Exception saving",exception);}
console.log(__WEBPACK_IMPORTED_MODULE_0_consts_global__["a"].MINIBLOCKCHAIN_LIGHT_CONFIGURATION_SAVED);console.log(__WEBPACK_IMPORTED_MODULE_0_consts_global__["a"].SEMAPHORE_PROCESS_DONE);console.log(__WEBPACK_IMPORTED_MODULE_0_consts_global__["a"].MINIBLOCKCHAIN_LIGHT_SAVED);console.warn("process.exit(0)");if(false){setTimeout(()=>{process.emit("SIGINT");process.exit(0);},1500)}
return;}
setTimeout(interval,100);};setTimeout(interval,100);});})]);